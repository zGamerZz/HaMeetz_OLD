"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@stream-io";
exports.ids = ["vendor-chunks/@stream-io"];
exports.modules = {

/***/ "(ssr)/./node_modules/@stream-io/video-client/dist/index.es.js":
/*!***************************************************************!*\
  !*** ./node_modules/@stream-io/video-client/dist/index.es.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AudioSettingsDefaultDeviceEnum: () => (/* binding */ AudioSettingsDefaultDeviceEnum),\n/* harmony export */   AudioSettingsRequestDefaultDeviceEnum: () => (/* binding */ AudioSettingsRequestDefaultDeviceEnum),\n/* harmony export */   AxiosError: () => (/* reexport safe */ axios__WEBPACK_IMPORTED_MODULE_1__.AxiosError),\n/* harmony export */   Browsers: () => (/* binding */ browsers),\n/* harmony export */   Call: () => (/* binding */ Call),\n/* harmony export */   CallState: () => (/* binding */ CallState),\n/* harmony export */   CallType: () => (/* binding */ CallType),\n/* harmony export */   CallTypes: () => (/* binding */ CallTypes),\n/* harmony export */   CallingState: () => (/* binding */ CallingState),\n/* harmony export */   CameraManager: () => (/* binding */ CameraManager),\n/* harmony export */   CameraManagerState: () => (/* binding */ CameraManagerState),\n/* harmony export */   CreateDeviceRequestPushProviderEnum: () => (/* binding */ CreateDeviceRequestPushProviderEnum),\n/* harmony export */   DebounceType: () => (/* binding */ DebounceType),\n/* harmony export */   DynascaleManager: () => (/* binding */ DynascaleManager),\n/* harmony export */   ErrorFromResponse: () => (/* binding */ ErrorFromResponse),\n/* harmony export */   InputMediaDeviceManager: () => (/* binding */ InputMediaDeviceManager),\n/* harmony export */   InputMediaDeviceManagerState: () => (/* binding */ InputMediaDeviceManagerState),\n/* harmony export */   LayoutSettingsNameEnum: () => (/* binding */ LayoutSettingsNameEnum),\n/* harmony export */   LayoutSettingsRequestNameEnum: () => (/* binding */ LayoutSettingsRequestNameEnum),\n/* harmony export */   MicrophoneManager: () => (/* binding */ MicrophoneManager),\n/* harmony export */   MicrophoneManagerState: () => (/* binding */ MicrophoneManagerState),\n/* harmony export */   OwnCapability: () => (/* binding */ OwnCapability),\n/* harmony export */   RecordSettingsRequestModeEnum: () => (/* binding */ RecordSettingsRequestModeEnum),\n/* harmony export */   RecordSettingsRequestQualityEnum: () => (/* binding */ RecordSettingsRequestQualityEnum),\n/* harmony export */   RxUtils: () => (/* binding */ rxUtils),\n/* harmony export */   ScreenShareManager: () => (/* binding */ ScreenShareManager),\n/* harmony export */   ScreenShareState: () => (/* binding */ ScreenShareState),\n/* harmony export */   SfuEvents: () => (/* binding */ events),\n/* harmony export */   SfuModels: () => (/* binding */ models),\n/* harmony export */   SpeakerManager: () => (/* binding */ SpeakerManager),\n/* harmony export */   SpeakerState: () => (/* binding */ SpeakerState),\n/* harmony export */   StreamSfuClient: () => (/* binding */ StreamSfuClient),\n/* harmony export */   StreamVideoClient: () => (/* binding */ StreamVideoClient),\n/* harmony export */   StreamVideoReadOnlyStateStore: () => (/* binding */ StreamVideoReadOnlyStateStore),\n/* harmony export */   StreamVideoServerClient: () => (/* binding */ StreamVideoServerClient),\n/* harmony export */   StreamVideoWriteableStateStore: () => (/* binding */ StreamVideoWriteableStateStore),\n/* harmony export */   TranscriptionSettingsModeEnum: () => (/* binding */ TranscriptionSettingsModeEnum),\n/* harmony export */   TranscriptionSettingsRequestModeEnum: () => (/* binding */ TranscriptionSettingsRequestModeEnum),\n/* harmony export */   VideoSettingsCameraFacingEnum: () => (/* binding */ VideoSettingsCameraFacingEnum),\n/* harmony export */   VideoSettingsRequestCameraFacingEnum: () => (/* binding */ VideoSettingsRequestCameraFacingEnum),\n/* harmony export */   ViewportTracker: () => (/* binding */ ViewportTracker),\n/* harmony export */   VisibilityState: () => (/* binding */ VisibilityState),\n/* harmony export */   checkIfAudioOutputChangeSupported: () => (/* binding */ checkIfAudioOutputChangeSupported),\n/* harmony export */   combineComparators: () => (/* binding */ combineComparators),\n/* harmony export */   conditional: () => (/* binding */ conditional),\n/* harmony export */   createSoundDetector: () => (/* binding */ createSoundDetector),\n/* harmony export */   defaultSortPreset: () => (/* binding */ defaultSortPreset),\n/* harmony export */   descending: () => (/* binding */ descending),\n/* harmony export */   deviceIds$: () => (/* binding */ deviceIds$),\n/* harmony export */   disposeOfMediaStream: () => (/* binding */ disposeOfMediaStream),\n/* harmony export */   dominantSpeaker: () => (/* binding */ dominantSpeaker),\n/* harmony export */   getAudioDevices: () => (/* binding */ getAudioDevices),\n/* harmony export */   getAudioOutputDevices: () => (/* binding */ getAudioOutputDevices),\n/* harmony export */   getAudioStream: () => (/* binding */ getAudioStream),\n/* harmony export */   getClientDetails: () => (/* binding */ getClientDetails),\n/* harmony export */   getDeviceInfo: () => (/* binding */ getDeviceInfo),\n/* harmony export */   getLogger: () => (/* binding */ getLogger),\n/* harmony export */   getOSInfo: () => (/* binding */ getOSInfo),\n/* harmony export */   getScreenShareStream: () => (/* binding */ getScreenShareStream),\n/* harmony export */   getSdkInfo: () => (/* binding */ getSdkInfo),\n/* harmony export */   getVideoDevices: () => (/* binding */ getVideoDevices),\n/* harmony export */   getVideoStream: () => (/* binding */ getVideoStream),\n/* harmony export */   livestreamOrAudioRoomSortPreset: () => (/* binding */ livestreamOrAudioRoomSortPreset),\n/* harmony export */   logLevels: () => (/* binding */ logLevels),\n/* harmony export */   logToConsole: () => (/* binding */ logToConsole),\n/* harmony export */   name: () => (/* binding */ name),\n/* harmony export */   noopComparator: () => (/* binding */ noopComparator),\n/* harmony export */   paginatedLayoutSortPreset: () => (/* binding */ paginatedLayoutSortPreset),\n/* harmony export */   pinned: () => (/* binding */ pinned),\n/* harmony export */   publishingAudio: () => (/* binding */ publishingAudio),\n/* harmony export */   publishingVideo: () => (/* binding */ publishingVideo),\n/* harmony export */   reactionType: () => (/* binding */ reactionType),\n/* harmony export */   role: () => (/* binding */ role),\n/* harmony export */   screenSharing: () => (/* binding */ screenSharing),\n/* harmony export */   setDeviceInfo: () => (/* binding */ setDeviceInfo),\n/* harmony export */   setLogLevel: () => (/* binding */ setLogLevel),\n/* harmony export */   setLogger: () => (/* binding */ setLogger),\n/* harmony export */   setOSInfo: () => (/* binding */ setOSInfo),\n/* harmony export */   setSdkInfo: () => (/* binding */ setSdkInfo),\n/* harmony export */   speakerLayoutSortPreset: () => (/* binding */ speakerLayoutSortPreset),\n/* harmony export */   speaking: () => (/* binding */ speaking)\n/* harmony export */ });\n/* harmony import */ var webrtc_adapter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! webrtc-adapter */ \"(ssr)/./node_modules/webrtc-adapter/src/js/adapter_core.js\");\n/* harmony import */ var _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @protobuf-ts/runtime */ \"(ssr)/./node_modules/@protobuf-ts/runtime/build/es2015/message-type.js\");\n/* harmony import */ var _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @protobuf-ts/runtime */ \"(ssr)/./node_modules/@protobuf-ts/runtime/build/es2015/json-typings.js\");\n/* harmony import */ var _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @protobuf-ts/runtime */ \"(ssr)/./node_modules/@protobuf-ts/runtime/build/es2015/reflection-merge-partial.js\");\n/* harmony import */ var _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @protobuf-ts/runtime */ \"(ssr)/./node_modules/@protobuf-ts/runtime/build/es2015/binary-format-contract.js\");\n/* harmony import */ var _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @protobuf-ts/runtime */ \"(ssr)/./node_modules/@protobuf-ts/runtime/build/es2015/pb-long.js\");\n/* harmony import */ var _protobuf_ts_runtime_rpc__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @protobuf-ts/runtime-rpc */ \"(ssr)/./node_modules/@protobuf-ts/runtime-rpc/build/es2015/service-type.js\");\n/* harmony import */ var _protobuf_ts_runtime_rpc__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @protobuf-ts/runtime-rpc */ \"(ssr)/./node_modules/@protobuf-ts/runtime-rpc/build/es2015/rpc-interceptor.js\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! axios */ \"(ssr)/./node_modules/axios/lib/axios.js\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! axios */ \"(ssr)/./node_modules/axios/index.js\");\n/* harmony import */ var _protobuf_ts_twirp_transport__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @protobuf-ts/twirp-transport */ \"(ssr)/./node_modules/@protobuf-ts/twirp-transport/build/es2015/twirp-transport.js\");\n/* harmony import */ var _barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! __barrel_optimize__?names=BehaviorSubject,Observable,ReplaySubject,combineLatest,concatMap,debounce,debounceTime,distinctUntilChanged,distinctUntilKeyChanged,filter,from,map,merge,of,pairwise,shareReplay,takeWhile,timer!=!rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/ReplaySubject.js\");\n/* harmony import */ var _barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! __barrel_optimize__?names=BehaviorSubject,Observable,ReplaySubject,combineLatest,concatMap,debounce,debounceTime,distinctUntilChanged,distinctUntilKeyChanged,filter,from,map,merge,of,pairwise,shareReplay,takeWhile,timer!=!rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/observable/combineLatest.js\");\n/* harmony import */ var _barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! __barrel_optimize__?names=BehaviorSubject,Observable,ReplaySubject,combineLatest,concatMap,debounce,debounceTime,distinctUntilChanged,distinctUntilKeyChanged,filter,from,map,merge,of,pairwise,shareReplay,takeWhile,timer!=!rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js\");\n/* harmony import */ var _barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! __barrel_optimize__?names=BehaviorSubject,Observable,ReplaySubject,combineLatest,concatMap,debounce,debounceTime,distinctUntilChanged,distinctUntilKeyChanged,filter,from,map,merge,of,pairwise,shareReplay,takeWhile,timer!=!rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/operators/map.js\");\n/* harmony import */ var _barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! __barrel_optimize__?names=BehaviorSubject,Observable,ReplaySubject,combineLatest,concatMap,debounce,debounceTime,distinctUntilChanged,distinctUntilKeyChanged,filter,from,map,merge,of,pairwise,shareReplay,takeWhile,timer!=!rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/operators/shareReplay.js\");\n/* harmony import */ var _barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! __barrel_optimize__?names=BehaviorSubject,Observable,ReplaySubject,combineLatest,concatMap,debounce,debounceTime,distinctUntilChanged,distinctUntilKeyChanged,filter,from,map,merge,of,pairwise,shareReplay,takeWhile,timer!=!rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/operators/distinctUntilChanged.js\");\n/* harmony import */ var _barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! __barrel_optimize__?names=BehaviorSubject,Observable,ReplaySubject,combineLatest,concatMap,debounce,debounceTime,distinctUntilChanged,distinctUntilKeyChanged,filter,from,map,merge,of,pairwise,shareReplay,takeWhile,timer!=!rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/operators/takeWhile.js\");\n/* harmony import */ var _barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! __barrel_optimize__?names=BehaviorSubject,Observable,ReplaySubject,combineLatest,concatMap,debounce,debounceTime,distinctUntilChanged,distinctUntilKeyChanged,filter,from,map,merge,of,pairwise,shareReplay,takeWhile,timer!=!rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/operators/distinctUntilKeyChanged.js\");\n/* harmony import */ var _barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! __barrel_optimize__?names=BehaviorSubject,Observable,ReplaySubject,combineLatest,concatMap,debounce,debounceTime,distinctUntilChanged,distinctUntilKeyChanged,filter,from,map,merge,of,pairwise,shareReplay,takeWhile,timer!=!rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/Observable.js\");\n/* harmony import */ var _barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! __barrel_optimize__?names=BehaviorSubject,Observable,ReplaySubject,combineLatest,concatMap,debounce,debounceTime,distinctUntilChanged,distinctUntilKeyChanged,filter,from,map,merge,of,pairwise,shareReplay,takeWhile,timer!=!rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/operators/debounceTime.js\");\n/* harmony import */ var _barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! __barrel_optimize__?names=BehaviorSubject,Observable,ReplaySubject,combineLatest,concatMap,debounce,debounceTime,distinctUntilChanged,distinctUntilKeyChanged,filter,from,map,merge,of,pairwise,shareReplay,takeWhile,timer!=!rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/operators/concatMap.js\");\n/* harmony import */ var _barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! __barrel_optimize__?names=BehaviorSubject,Observable,ReplaySubject,combineLatest,concatMap,debounce,debounceTime,distinctUntilChanged,distinctUntilKeyChanged,filter,from,map,merge,of,pairwise,shareReplay,takeWhile,timer!=!rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/observable/from.js\");\n/* harmony import */ var _barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! __barrel_optimize__?names=BehaviorSubject,Observable,ReplaySubject,combineLatest,concatMap,debounce,debounceTime,distinctUntilChanged,distinctUntilKeyChanged,filter,from,map,merge,of,pairwise,shareReplay,takeWhile,timer!=!rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/observable/merge.js\");\n/* harmony import */ var _barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! __barrel_optimize__?names=BehaviorSubject,Observable,ReplaySubject,combineLatest,concatMap,debounce,debounceTime,distinctUntilChanged,distinctUntilKeyChanged,filter,from,map,merge,of,pairwise,shareReplay,takeWhile,timer!=!rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/operators/pairwise.js\");\n/* harmony import */ var _barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! __barrel_optimize__?names=BehaviorSubject,Observable,ReplaySubject,combineLatest,concatMap,debounce,debounceTime,distinctUntilChanged,distinctUntilKeyChanged,filter,from,map,merge,of,pairwise,shareReplay,takeWhile,timer!=!rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/observable/of.js\");\n/* harmony import */ var _barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! __barrel_optimize__?names=BehaviorSubject,Observable,ReplaySubject,combineLatest,concatMap,debounce,debounceTime,distinctUntilChanged,distinctUntilKeyChanged,filter,from,map,merge,of,pairwise,shareReplay,takeWhile,timer!=!rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/operators/filter.js\");\n/* harmony import */ var _barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! __barrel_optimize__?names=BehaviorSubject,Observable,ReplaySubject,combineLatest,concatMap,debounce,debounceTime,distinctUntilChanged,distinctUntilKeyChanged,filter,from,map,merge,of,pairwise,shareReplay,takeWhile,timer!=!rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/operators/debounce.js\");\n/* harmony import */ var _barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! __barrel_optimize__?names=BehaviorSubject,Observable,ReplaySubject,combineLatest,concatMap,debounce,debounceTime,distinctUntilChanged,distinctUntilKeyChanged,filter,from,map,merge,of,pairwise,shareReplay,takeWhile,timer!=!rxjs */ \"(ssr)/./node_modules/rxjs/dist/esm5/internal/observable/timer.js\");\n/* harmony import */ var sdp_transform__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! sdp-transform */ \"(ssr)/./node_modules/sdp-transform/lib/index.js\");\n/* harmony import */ var ua_parser_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ua-parser-js */ \"(ssr)/./node_modules/ua-parser-js/src/ua-parser.js\");\n/* harmony import */ var ua_parser_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(ua_parser_js__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var isomorphic_ws__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! isomorphic-ws */ \"(ssr)/./node_modules/isomorphic-ws/node.js\");\n/* harmony import */ var isomorphic_ws__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(isomorphic_ws__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var https__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! https */ \"https\");\n/* harmony import */ var https__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(https__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! jsonwebtoken */ \"(ssr)/./node_modules/jsonwebtoken/index.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var base64_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! base64-js */ \"(ssr)/./node_modules/base64-js/index.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * @export\n */ const AudioSettingsDefaultDeviceEnum = {\n    SPEAKER: \"speaker\",\n    EARPIECE: \"earpiece\"\n};\n/**\n * @export\n */ const AudioSettingsRequestDefaultDeviceEnum = {\n    SPEAKER: \"speaker\",\n    EARPIECE: \"earpiece\"\n};\n/**\n * @export\n */ const CreateDeviceRequestPushProviderEnum = {\n    FIREBASE: \"firebase\",\n    APN: \"apn\",\n    HUAWEI: \"huawei\",\n    XIAOMI: \"xiaomi\"\n};\n/**\n * @export\n */ const LayoutSettingsNameEnum = {\n    SPOTLIGHT: \"spotlight\",\n    GRID: \"grid\",\n    SINGLE_PARTICIPANT: \"single-participant\",\n    MOBILE: \"mobile\",\n    CUSTOM: \"custom\"\n};\n/**\n * @export\n */ const LayoutSettingsRequestNameEnum = {\n    SPOTLIGHT: \"spotlight\",\n    GRID: \"grid\",\n    SINGLE_PARTICIPANT: \"single-participant\",\n    MOBILE: \"mobile\",\n    CUSTOM: \"custom\"\n};\n/**\n * All possibility of string to use\n * @export\n */ const OwnCapability = {\n    BLOCK_USERS: \"block-users\",\n    CREATE_CALL: \"create-call\",\n    CREATE_REACTION: \"create-reaction\",\n    END_CALL: \"end-call\",\n    JOIN_BACKSTAGE: \"join-backstage\",\n    JOIN_CALL: \"join-call\",\n    JOIN_ENDED_CALL: \"join-ended-call\",\n    MUTE_USERS: \"mute-users\",\n    PIN_FOR_EVERYONE: \"pin-for-everyone\",\n    READ_CALL: \"read-call\",\n    REMOVE_CALL_MEMBER: \"remove-call-member\",\n    SCREENSHARE: \"screenshare\",\n    SEND_AUDIO: \"send-audio\",\n    SEND_VIDEO: \"send-video\",\n    START_BROADCAST_CALL: \"start-broadcast-call\",\n    START_RECORD_CALL: \"start-record-call\",\n    START_TRANSCRIPTION_CALL: \"start-transcription-call\",\n    STOP_BROADCAST_CALL: \"stop-broadcast-call\",\n    STOP_RECORD_CALL: \"stop-record-call\",\n    STOP_TRANSCRIPTION_CALL: \"stop-transcription-call\",\n    UPDATE_CALL: \"update-call\",\n    UPDATE_CALL_MEMBER: \"update-call-member\",\n    UPDATE_CALL_PERMISSIONS: \"update-call-permissions\",\n    UPDATE_CALL_SETTINGS: \"update-call-settings\"\n};\n/**\n * @export\n */ const RecordSettingsRequestModeEnum = {\n    AVAILABLE: \"available\",\n    DISABLED: \"disabled\",\n    AUTO_ON: \"auto-on\"\n};\n/**\n * @export\n */ const RecordSettingsRequestQualityEnum = {\n    _360P: \"360p\",\n    _480P: \"480p\",\n    _720P: \"720p\",\n    _1080P: \"1080p\",\n    _1440P: \"1440p\"\n};\n/**\n * @export\n */ const TranscriptionSettingsModeEnum = {\n    AVAILABLE: \"available\",\n    DISABLED: \"disabled\",\n    AUTO_ON: \"auto-on\"\n};\n/**\n * @export\n */ const TranscriptionSettingsRequestModeEnum = {\n    AVAILABLE: \"available\",\n    DISABLED: \"disabled\",\n    AUTO_ON: \"auto-on\"\n};\n/**\n * @export\n */ const VideoSettingsCameraFacingEnum = {\n    FRONT: \"front\",\n    BACK: \"back\",\n    EXTERNAL: \"external\"\n};\n/**\n * @export\n */ const VideoSettingsRequestCameraFacingEnum = {\n    FRONT: \"front\",\n    BACK: \"back\",\n    EXTERNAL: \"external\"\n};\nclass ErrorFromResponse extends Error {\n}\n/**\n * `NullValue` is a singleton enumeration to represent the null value for the\n * `Value` type union.\n *\n *  The JSON representation for `NullValue` is JSON `null`.\n *\n * @generated from protobuf enum google.protobuf.NullValue\n */ var NullValue;\n(function(NullValue) {\n    /**\n     * Null value.\n     *\n     * @generated from protobuf enum value: NULL_VALUE = 0;\n     */ NullValue[NullValue[\"NULL_VALUE\"] = 0] = \"NULL_VALUE\";\n})(NullValue || (NullValue = {}));\n// @generated message type with reflection information, may provide speed optimized methods\nclass Struct$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"google.protobuf.Struct\", [\n            {\n                no: 1,\n                name: \"fields\",\n                kind: \"map\",\n                K: 9 /*ScalarType.STRING*/ ,\n                V: {\n                    kind: \"message\",\n                    T: ()=>Value\n                }\n            }\n        ]);\n    }\n    /**\n     * Encode `Struct` to JSON object.\n     */ internalJsonWrite(message, options) {\n        let json = {};\n        for (let [k, v] of Object.entries(message.fields)){\n            json[k] = Value.toJson(v);\n        }\n        return json;\n    }\n    /**\n     * Decode `Struct` from JSON object.\n     */ internalJsonRead(json, options, target) {\n        if (!(0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_10__.isJsonObject)(json)) throw new globalThis.Error(\"Unable to parse message \" + this.typeName + \" from JSON \" + (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_10__.typeofJsonValue)(json) + \".\");\n        if (!target) target = this.create();\n        for (let [k, v] of globalThis.Object.entries(json)){\n            target.fields[k] = Value.fromJson(v);\n        }\n        return target;\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        message.fields = {};\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* map<string, google.protobuf.Value> fields */ 1:\n                    this.binaryReadMap1(message.fields, reader, options);\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    binaryReadMap1(map, reader, options) {\n        let len = reader.uint32(), end = reader.pos + len, key, val;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case 1:\n                    key = reader.string();\n                    break;\n                case 2:\n                    val = Value.internalBinaryRead(reader, reader.uint32(), options);\n                    break;\n                default:\n                    throw new globalThis.Error(\"unknown map entry field for field google.protobuf.Struct.fields\");\n            }\n        }\n        map[key ?? \"\"] = val ?? Value.create();\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* map<string, google.protobuf.Value> fields = 1; */ for (let k of globalThis.Object.keys(message.fields)){\n            writer.tag(1, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork().tag(1, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(k);\n            writer.tag(2, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork();\n            Value.internalBinaryWrite(message.fields[k], writer, options);\n            writer.join().join();\n        }\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n}\n/**\n * @generated MessageType for protobuf message google.protobuf.Struct\n */ const Struct = new Struct$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass Value$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"google.protobuf.Value\", [\n            {\n                no: 1,\n                name: \"null_value\",\n                kind: \"enum\",\n                oneof: \"kind\",\n                T: ()=>[\n                        \"google.protobuf.NullValue\",\n                        NullValue\n                    ]\n            },\n            {\n                no: 2,\n                name: \"number_value\",\n                kind: \"scalar\",\n                oneof: \"kind\",\n                T: 1 /*ScalarType.DOUBLE*/ \n            },\n            {\n                no: 3,\n                name: \"string_value\",\n                kind: \"scalar\",\n                oneof: \"kind\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 4,\n                name: \"bool_value\",\n                kind: \"scalar\",\n                oneof: \"kind\",\n                T: 8 /*ScalarType.BOOL*/ \n            },\n            {\n                no: 5,\n                name: \"struct_value\",\n                kind: \"message\",\n                oneof: \"kind\",\n                T: ()=>Struct\n            },\n            {\n                no: 6,\n                name: \"list_value\",\n                kind: \"message\",\n                oneof: \"kind\",\n                T: ()=>ListValue\n            }\n        ]);\n    }\n    /**\n     * Encode `Value` to JSON value.\n     */ internalJsonWrite(message, options) {\n        if (message.kind.oneofKind === undefined) throw new globalThis.Error();\n        switch(message.kind.oneofKind){\n            case undefined:\n                throw new globalThis.Error();\n            case \"boolValue\":\n                return message.kind.boolValue;\n            case \"nullValue\":\n                return null;\n            case \"numberValue\":\n                let numberValue = message.kind.numberValue;\n                if (typeof numberValue == \"number\" && !Number.isFinite(numberValue)) throw new globalThis.Error();\n                return numberValue;\n            case \"stringValue\":\n                return message.kind.stringValue;\n            case \"listValue\":\n                let listValueField = this.fields.find((f)=>f.no === 6);\n                if (listValueField?.kind !== \"message\") throw new globalThis.Error();\n                return listValueField.T().toJson(message.kind.listValue);\n            case \"structValue\":\n                let structValueField = this.fields.find((f)=>f.no === 5);\n                if (structValueField?.kind !== \"message\") throw new globalThis.Error();\n                return structValueField.T().toJson(message.kind.structValue);\n        }\n    }\n    /**\n     * Decode `Value` from JSON value.\n     */ internalJsonRead(json, options, target) {\n        if (!target) target = this.create();\n        switch(typeof json){\n            case \"number\":\n                target.kind = {\n                    oneofKind: \"numberValue\",\n                    numberValue: json\n                };\n                break;\n            case \"string\":\n                target.kind = {\n                    oneofKind: \"stringValue\",\n                    stringValue: json\n                };\n                break;\n            case \"boolean\":\n                target.kind = {\n                    oneofKind: \"boolValue\",\n                    boolValue: json\n                };\n                break;\n            case \"object\":\n                if (json === null) {\n                    target.kind = {\n                        oneofKind: \"nullValue\",\n                        nullValue: NullValue.NULL_VALUE\n                    };\n                } else if (globalThis.Array.isArray(json)) {\n                    target.kind = {\n                        oneofKind: \"listValue\",\n                        listValue: ListValue.fromJson(json)\n                    };\n                } else {\n                    target.kind = {\n                        oneofKind: \"structValue\",\n                        structValue: Struct.fromJson(json)\n                    };\n                }\n                break;\n            default:\n                throw new globalThis.Error(\"Unable to parse \" + this.typeName + \" from JSON \" + (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_10__.typeofJsonValue)(json));\n        }\n        return target;\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        message.kind = {\n            oneofKind: undefined\n        };\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* google.protobuf.NullValue null_value */ 1:\n                    message.kind = {\n                        oneofKind: \"nullValue\",\n                        nullValue: reader.int32()\n                    };\n                    break;\n                case /* double number_value */ 2:\n                    message.kind = {\n                        oneofKind: \"numberValue\",\n                        numberValue: reader.double()\n                    };\n                    break;\n                case /* string string_value */ 3:\n                    message.kind = {\n                        oneofKind: \"stringValue\",\n                        stringValue: reader.string()\n                    };\n                    break;\n                case /* bool bool_value */ 4:\n                    message.kind = {\n                        oneofKind: \"boolValue\",\n                        boolValue: reader.bool()\n                    };\n                    break;\n                case /* google.protobuf.Struct struct_value */ 5:\n                    message.kind = {\n                        oneofKind: \"structValue\",\n                        structValue: Struct.internalBinaryRead(reader, reader.uint32(), options, message.kind.structValue)\n                    };\n                    break;\n                case /* google.protobuf.ListValue list_value */ 6:\n                    message.kind = {\n                        oneofKind: \"listValue\",\n                        listValue: ListValue.internalBinaryRead(reader, reader.uint32(), options, message.kind.listValue)\n                    };\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* google.protobuf.NullValue null_value = 1; */ if (message.kind.oneofKind === \"nullValue\") writer.tag(1, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.Varint).int32(message.kind.nullValue);\n        /* double number_value = 2; */ if (message.kind.oneofKind === \"numberValue\") writer.tag(2, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.Bit64).double(message.kind.numberValue);\n        /* string string_value = 3; */ if (message.kind.oneofKind === \"stringValue\") writer.tag(3, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.kind.stringValue);\n        /* bool bool_value = 4; */ if (message.kind.oneofKind === \"boolValue\") writer.tag(4, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.Varint).bool(message.kind.boolValue);\n        /* google.protobuf.Struct struct_value = 5; */ if (message.kind.oneofKind === \"structValue\") Struct.internalBinaryWrite(message.kind.structValue, writer.tag(5, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        /* google.protobuf.ListValue list_value = 6; */ if (message.kind.oneofKind === \"listValue\") ListValue.internalBinaryWrite(message.kind.listValue, writer.tag(6, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n}\n/**\n * @generated MessageType for protobuf message google.protobuf.Value\n */ const Value = new Value$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ListValue$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"google.protobuf.ListValue\", [\n            {\n                no: 1,\n                name: \"values\",\n                kind: \"message\",\n                repeat: 1 /*RepeatType.PACKED*/ ,\n                T: ()=>Value\n            }\n        ]);\n    }\n    /**\n     * Encode `ListValue` to JSON array.\n     */ internalJsonWrite(message, options) {\n        return message.values.map((v)=>Value.toJson(v));\n    }\n    /**\n     * Decode `ListValue` from JSON array.\n     */ internalJsonRead(json, options, target) {\n        if (!globalThis.Array.isArray(json)) throw new globalThis.Error(\"Unable to parse \" + this.typeName + \" from JSON \" + (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_10__.typeofJsonValue)(json));\n        if (!target) target = this.create();\n        let values = json.map((v)=>Value.fromJson(v));\n        target.values.push(...values);\n        return target;\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        message.values = [];\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* repeated google.protobuf.Value values */ 1:\n                    message.values.push(Value.internalBinaryRead(reader, reader.uint32(), options));\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* repeated google.protobuf.Value values = 1; */ for(let i = 0; i < message.values.length; i++)Value.internalBinaryWrite(message.values[i], writer.tag(1, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n}\n/**\n * @generated MessageType for protobuf message google.protobuf.ListValue\n */ const ListValue = new ListValue$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass Timestamp$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"google.protobuf.Timestamp\", [\n            {\n                no: 1,\n                name: \"seconds\",\n                kind: \"scalar\",\n                T: 3 /*ScalarType.INT64*/ \n            },\n            {\n                no: 2,\n                name: \"nanos\",\n                kind: \"scalar\",\n                T: 5 /*ScalarType.INT32*/ \n            }\n        ]);\n    }\n    /**\n     * Creates a new `Timestamp` for the current time.\n     */ now() {\n        const msg = this.create();\n        const ms = Date.now();\n        msg.seconds = _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_13__.PbLong.from(Math.floor(ms / 1000)).toString();\n        msg.nanos = ms % 1000 * 1000000;\n        return msg;\n    }\n    /**\n     * Converts a `Timestamp` to a JavaScript Date.\n     */ toDate(message) {\n        return new Date(_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_13__.PbLong.from(message.seconds).toNumber() * 1000 + Math.ceil(message.nanos / 1000000));\n    }\n    /**\n     * Converts a JavaScript Date to a `Timestamp`.\n     */ fromDate(date) {\n        const msg = this.create();\n        const ms = date.getTime();\n        msg.seconds = _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_13__.PbLong.from(Math.floor(ms / 1000)).toString();\n        msg.nanos = ms % 1000 * 1000000;\n        return msg;\n    }\n    /**\n     * In JSON format, the `Timestamp` type is encoded as a string\n     * in the RFC 3339 format.\n     */ internalJsonWrite(message, options) {\n        let ms = _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_13__.PbLong.from(message.seconds).toNumber() * 1000;\n        if (ms < Date.parse(\"0001-01-01T00:00:00Z\") || ms > Date.parse(\"9999-12-31T23:59:59Z\")) throw new Error(\"Unable to encode Timestamp to JSON. Must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive.\");\n        if (message.nanos < 0) throw new Error(\"Unable to encode invalid Timestamp to JSON. Nanos must not be negative.\");\n        let z = \"Z\";\n        if (message.nanos > 0) {\n            let nanosStr = (message.nanos + 1000000000).toString().substring(1);\n            if (nanosStr.substring(3) === \"000000\") z = \".\" + nanosStr.substring(0, 3) + \"Z\";\n            else if (nanosStr.substring(6) === \"000\") z = \".\" + nanosStr.substring(0, 6) + \"Z\";\n            else z = \".\" + nanosStr + \"Z\";\n        }\n        return new Date(ms).toISOString().replace(\".000Z\", z);\n    }\n    /**\n     * In JSON format, the `Timestamp` type is encoded as a string\n     * in the RFC 3339 format.\n     */ internalJsonRead(json, options, target) {\n        if (typeof json !== \"string\") throw new Error(\"Unable to parse Timestamp from JSON \" + (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_10__.typeofJsonValue)(json) + \".\");\n        let matches = json.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);\n        if (!matches) throw new Error(\"Unable to parse Timestamp from JSON. Invalid format.\");\n        let ms = Date.parse(matches[1] + \"-\" + matches[2] + \"-\" + matches[3] + \"T\" + matches[4] + \":\" + matches[5] + \":\" + matches[6] + (matches[8] ? matches[8] : \"Z\"));\n        if (Number.isNaN(ms)) throw new Error(\"Unable to parse Timestamp from JSON. Invalid value.\");\n        if (ms < Date.parse(\"0001-01-01T00:00:00Z\") || ms > Date.parse(\"9999-12-31T23:59:59Z\")) throw new globalThis.Error(\"Unable to parse Timestamp from JSON. Must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive.\");\n        if (!target) target = this.create();\n        target.seconds = _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_13__.PbLong.from(ms / 1000).toString();\n        target.nanos = 0;\n        if (matches[7]) target.nanos = parseInt(\"1\" + matches[7] + \"0\".repeat(9 - matches[7].length)) - 1000000000;\n        return target;\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        message.seconds = \"0\";\n        message.nanos = 0;\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* int64 seconds */ 1:\n                    message.seconds = reader.int64().toString();\n                    break;\n                case /* int32 nanos */ 2:\n                    message.nanos = reader.int32();\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* int64 seconds = 1; */ if (message.seconds !== \"0\") writer.tag(1, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.Varint).int64(message.seconds);\n        /* int32 nanos = 2; */ if (message.nanos !== 0) writer.tag(2, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.Varint).int32(message.nanos);\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n}\n/**\n * @generated MessageType for protobuf message google.protobuf.Timestamp\n */ const Timestamp = new Timestamp$Type();\n/**\n * @generated from protobuf enum stream.video.sfu.models.PeerType\n */ var PeerType;\n(function(PeerType) {\n    /**\n     * todo fix me (marcelo)\n     *\n     * @generated from protobuf enum value: PEER_TYPE_PUBLISHER_UNSPECIFIED = 0;\n     */ PeerType[PeerType[\"PUBLISHER_UNSPECIFIED\"] = 0] = \"PUBLISHER_UNSPECIFIED\";\n    /**\n     * @generated from protobuf enum value: PEER_TYPE_SUBSCRIBER = 1;\n     */ PeerType[PeerType[\"SUBSCRIBER\"] = 1] = \"SUBSCRIBER\";\n})(PeerType || (PeerType = {}));\n/**\n * @generated from protobuf enum stream.video.sfu.models.ConnectionQuality\n */ var ConnectionQuality;\n(function(ConnectionQuality) {\n    /**\n     * @generated from protobuf enum value: CONNECTION_QUALITY_UNSPECIFIED = 0;\n     */ ConnectionQuality[ConnectionQuality[\"UNSPECIFIED\"] = 0] = \"UNSPECIFIED\";\n    /**\n     * @generated from protobuf enum value: CONNECTION_QUALITY_POOR = 1;\n     */ ConnectionQuality[ConnectionQuality[\"POOR\"] = 1] = \"POOR\";\n    /**\n     * @generated from protobuf enum value: CONNECTION_QUALITY_GOOD = 2;\n     */ ConnectionQuality[ConnectionQuality[\"GOOD\"] = 2] = \"GOOD\";\n    /**\n     * @generated from protobuf enum value: CONNECTION_QUALITY_EXCELLENT = 3;\n     */ ConnectionQuality[ConnectionQuality[\"EXCELLENT\"] = 3] = \"EXCELLENT\";\n})(ConnectionQuality || (ConnectionQuality = {}));\n/**\n * @generated from protobuf enum stream.video.sfu.models.VideoQuality\n */ var VideoQuality;\n(function(VideoQuality) {\n    /**\n     * @generated from protobuf enum value: VIDEO_QUALITY_LOW_UNSPECIFIED = 0;\n     */ VideoQuality[VideoQuality[\"LOW_UNSPECIFIED\"] = 0] = \"LOW_UNSPECIFIED\";\n    /**\n     * @generated from protobuf enum value: VIDEO_QUALITY_MID = 1;\n     */ VideoQuality[VideoQuality[\"MID\"] = 1] = \"MID\";\n    /**\n     * @generated from protobuf enum value: VIDEO_QUALITY_HIGH = 2;\n     */ VideoQuality[VideoQuality[\"HIGH\"] = 2] = \"HIGH\";\n    /**\n     * @generated from protobuf enum value: VIDEO_QUALITY_OFF = 3;\n     */ VideoQuality[VideoQuality[\"OFF\"] = 3] = \"OFF\";\n})(VideoQuality || (VideoQuality = {}));\n/**\n * @generated from protobuf enum stream.video.sfu.models.TrackType\n */ var TrackType;\n(function(TrackType) {\n    /**\n     * @generated from protobuf enum value: TRACK_TYPE_UNSPECIFIED = 0;\n     */ TrackType[TrackType[\"UNSPECIFIED\"] = 0] = \"UNSPECIFIED\";\n    /**\n     * @generated from protobuf enum value: TRACK_TYPE_AUDIO = 1;\n     */ TrackType[TrackType[\"AUDIO\"] = 1] = \"AUDIO\";\n    /**\n     * @generated from protobuf enum value: TRACK_TYPE_VIDEO = 2;\n     */ TrackType[TrackType[\"VIDEO\"] = 2] = \"VIDEO\";\n    /**\n     * @generated from protobuf enum value: TRACK_TYPE_SCREEN_SHARE = 3;\n     */ TrackType[TrackType[\"SCREEN_SHARE\"] = 3] = \"SCREEN_SHARE\";\n    /**\n     * @generated from protobuf enum value: TRACK_TYPE_SCREEN_SHARE_AUDIO = 4;\n     */ TrackType[TrackType[\"SCREEN_SHARE_AUDIO\"] = 4] = \"SCREEN_SHARE_AUDIO\";\n})(TrackType || (TrackType = {}));\n/**\n * @generated from protobuf enum stream.video.sfu.models.ErrorCode\n */ var ErrorCode;\n(function(ErrorCode) {\n    /**\n     * @generated from protobuf enum value: ERROR_CODE_UNSPECIFIED = 0;\n     */ ErrorCode[ErrorCode[\"UNSPECIFIED\"] = 0] = \"UNSPECIFIED\";\n    /**\n     * @generated from protobuf enum value: ERROR_CODE_PUBLISH_TRACK_NOT_FOUND = 100;\n     */ ErrorCode[ErrorCode[\"PUBLISH_TRACK_NOT_FOUND\"] = 100] = \"PUBLISH_TRACK_NOT_FOUND\";\n    /**\n     * @generated from protobuf enum value: ERROR_CODE_PUBLISH_TRACKS_MISMATCH = 101;\n     */ ErrorCode[ErrorCode[\"PUBLISH_TRACKS_MISMATCH\"] = 101] = \"PUBLISH_TRACKS_MISMATCH\";\n    /**\n     * @generated from protobuf enum value: ERROR_CODE_PUBLISH_TRACK_OUT_OF_ORDER = 102;\n     */ ErrorCode[ErrorCode[\"PUBLISH_TRACK_OUT_OF_ORDER\"] = 102] = \"PUBLISH_TRACK_OUT_OF_ORDER\";\n    /**\n     * @generated from protobuf enum value: ERROR_CODE_PUBLISH_TRACK_VIDEO_LAYER_NOT_FOUND = 103;\n     */ ErrorCode[ErrorCode[\"PUBLISH_TRACK_VIDEO_LAYER_NOT_FOUND\"] = 103] = \"PUBLISH_TRACK_VIDEO_LAYER_NOT_FOUND\";\n    /**\n     * @generated from protobuf enum value: ERROR_CODE_LIVE_ENDED = 104;\n     */ ErrorCode[ErrorCode[\"LIVE_ENDED\"] = 104] = \"LIVE_ENDED\";\n    /**\n     * @generated from protobuf enum value: ERROR_CODE_PARTICIPANT_NOT_FOUND = 200;\n     */ ErrorCode[ErrorCode[\"PARTICIPANT_NOT_FOUND\"] = 200] = \"PARTICIPANT_NOT_FOUND\";\n    /**\n     * @generated from protobuf enum value: ERROR_CODE_PARTICIPANT_MIGRATING_OUT = 201;\n     */ ErrorCode[ErrorCode[\"PARTICIPANT_MIGRATING_OUT\"] = 201] = \"PARTICIPANT_MIGRATING_OUT\";\n    /**\n     * @generated from protobuf enum value: ERROR_CODE_PARTICIPANT_MIGRATION_FAILED = 202;\n     */ ErrorCode[ErrorCode[\"PARTICIPANT_MIGRATION_FAILED\"] = 202] = \"PARTICIPANT_MIGRATION_FAILED\";\n    /**\n     * @generated from protobuf enum value: ERROR_CODE_PARTICIPANT_MIGRATING = 203;\n     */ ErrorCode[ErrorCode[\"PARTICIPANT_MIGRATING\"] = 203] = \"PARTICIPANT_MIGRATING\";\n    /**\n     * @generated from protobuf enum value: ERROR_CODE_PARTICIPANT_RECONNECT_FAILED = 204;\n     */ ErrorCode[ErrorCode[\"PARTICIPANT_RECONNECT_FAILED\"] = 204] = \"PARTICIPANT_RECONNECT_FAILED\";\n    /**\n     * @generated from protobuf enum value: ERROR_CODE_PARTICIPANT_MEDIA_TRANSPORT_FAILURE = 205;\n     */ ErrorCode[ErrorCode[\"PARTICIPANT_MEDIA_TRANSPORT_FAILURE\"] = 205] = \"PARTICIPANT_MEDIA_TRANSPORT_FAILURE\";\n    /**\n     * @generated from protobuf enum value: ERROR_CODE_CALL_NOT_FOUND = 300;\n     */ ErrorCode[ErrorCode[\"CALL_NOT_FOUND\"] = 300] = \"CALL_NOT_FOUND\";\n    /**\n     * @generated from protobuf enum value: ERROR_CODE_REQUEST_VALIDATION_FAILED = 400;\n     */ ErrorCode[ErrorCode[\"REQUEST_VALIDATION_FAILED\"] = 400] = \"REQUEST_VALIDATION_FAILED\";\n    /**\n     * @generated from protobuf enum value: ERROR_CODE_UNAUTHENTICATED = 401;\n     */ ErrorCode[ErrorCode[\"UNAUTHENTICATED\"] = 401] = \"UNAUTHENTICATED\";\n    /**\n     * @generated from protobuf enum value: ERROR_CODE_PERMISSION_DENIED = 403;\n     */ ErrorCode[ErrorCode[\"PERMISSION_DENIED\"] = 403] = \"PERMISSION_DENIED\";\n    /**\n     * @generated from protobuf enum value: ERROR_CODE_TOO_MANY_REQUESTS = 429;\n     */ ErrorCode[ErrorCode[\"TOO_MANY_REQUESTS\"] = 429] = \"TOO_MANY_REQUESTS\";\n    /**\n     * @generated from protobuf enum value: ERROR_CODE_INTERNAL_SERVER_ERROR = 500;\n     */ ErrorCode[ErrorCode[\"INTERNAL_SERVER_ERROR\"] = 500] = \"INTERNAL_SERVER_ERROR\";\n    /**\n     * @generated from protobuf enum value: ERROR_CODE_SFU_SHUTTING_DOWN = 600;\n     */ ErrorCode[ErrorCode[\"SFU_SHUTTING_DOWN\"] = 600] = \"SFU_SHUTTING_DOWN\";\n    /**\n     * @generated from protobuf enum value: ERROR_CODE_SFU_FULL = 700;\n     */ ErrorCode[ErrorCode[\"SFU_FULL\"] = 700] = \"SFU_FULL\";\n})(ErrorCode || (ErrorCode = {}));\n/**\n * @generated from protobuf enum stream.video.sfu.models.SdkType\n */ var SdkType;\n(function(SdkType) {\n    /**\n     * @generated from protobuf enum value: SDK_TYPE_UNSPECIFIED = 0;\n     */ SdkType[SdkType[\"UNSPECIFIED\"] = 0] = \"UNSPECIFIED\";\n    /**\n     * @generated from protobuf enum value: SDK_TYPE_REACT = 1;\n     */ SdkType[SdkType[\"REACT\"] = 1] = \"REACT\";\n    /**\n     * @generated from protobuf enum value: SDK_TYPE_ANGULAR = 2;\n     */ SdkType[SdkType[\"ANGULAR\"] = 2] = \"ANGULAR\";\n    /**\n     * @generated from protobuf enum value: SDK_TYPE_ANDROID = 3;\n     */ SdkType[SdkType[\"ANDROID\"] = 3] = \"ANDROID\";\n    /**\n     * @generated from protobuf enum value: SDK_TYPE_IOS = 4;\n     */ SdkType[SdkType[\"IOS\"] = 4] = \"IOS\";\n    /**\n     * @generated from protobuf enum value: SDK_TYPE_FLUTTER = 5;\n     */ SdkType[SdkType[\"FLUTTER\"] = 5] = \"FLUTTER\";\n    /**\n     * @generated from protobuf enum value: SDK_TYPE_REACT_NATIVE = 6;\n     */ SdkType[SdkType[\"REACT_NATIVE\"] = 6] = \"REACT_NATIVE\";\n    /**\n     * @generated from protobuf enum value: SDK_TYPE_UNITY = 7;\n     */ SdkType[SdkType[\"UNITY\"] = 7] = \"UNITY\";\n})(SdkType || (SdkType = {}));\n/**\n * @generated from protobuf enum stream.video.sfu.models.TrackUnpublishReason\n */ var TrackUnpublishReason;\n(function(TrackUnpublishReason) {\n    /**\n     * Default value which is used when the specific reason\n     * for muting the track is not known.\n     *\n     * @generated from protobuf enum value: TRACK_UNPUBLISH_REASON_UNSPECIFIED = 0;\n     */ TrackUnpublishReason[TrackUnpublishReason[\"UNSPECIFIED\"] = 0] = \"UNSPECIFIED\";\n    /**\n     * Represents user muting their tracks.\n     *\n     * @generated from protobuf enum value: TRACK_UNPUBLISH_REASON_USER_MUTED = 1;\n     */ TrackUnpublishReason[TrackUnpublishReason[\"USER_MUTED\"] = 1] = \"USER_MUTED\";\n    /**\n     * Represents muting the track because the permission to\n     * publish the track has been revoked.\n     *\n     * @generated from protobuf enum value: TRACK_UNPUBLISH_REASON_PERMISSION_REVOKED = 2;\n     */ TrackUnpublishReason[TrackUnpublishReason[\"PERMISSION_REVOKED\"] = 2] = \"PERMISSION_REVOKED\";\n    /**\n     * Represents muting the track due to moderation actions.\n     * This is different from permission revoked because the\n     * participant can unmute themselves here whereas in case\n     * of \"permission revoke\" it is not possible until the\n     * call permissions are updated.\n     *\n     * @generated from protobuf enum value: TRACK_UNPUBLISH_REASON_MODERATION = 3;\n     */ TrackUnpublishReason[TrackUnpublishReason[\"MODERATION\"] = 3] = \"MODERATION\";\n})(TrackUnpublishReason || (TrackUnpublishReason = {}));\n/**\n * @generated from protobuf enum stream.video.sfu.models.GoAwayReason\n */ var GoAwayReason;\n(function(GoAwayReason) {\n    /**\n     * @generated from protobuf enum value: GO_AWAY_REASON_UNSPECIFIED = 0;\n     */ GoAwayReason[GoAwayReason[\"UNSPECIFIED\"] = 0] = \"UNSPECIFIED\";\n    /**\n     * @generated from protobuf enum value: GO_AWAY_REASON_SHUTTING_DOWN = 1;\n     */ GoAwayReason[GoAwayReason[\"SHUTTING_DOWN\"] = 1] = \"SHUTTING_DOWN\";\n    /**\n     * @generated from protobuf enum value: GO_AWAY_REASON_REBALANCE = 2;\n     */ GoAwayReason[GoAwayReason[\"REBALANCE\"] = 2] = \"REBALANCE\";\n})(GoAwayReason || (GoAwayReason = {}));\n// @generated message type with reflection information, may provide speed optimized methods\nclass CallState$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.models.CallState\", [\n            {\n                no: 1,\n                name: \"participants\",\n                kind: \"message\",\n                repeat: 1 /*RepeatType.PACKED*/ ,\n                T: ()=>Participant\n            },\n            {\n                no: 2,\n                name: \"started_at\",\n                kind: \"message\",\n                T: ()=>Timestamp\n            },\n            {\n                no: 3,\n                name: \"participant_count\",\n                kind: \"message\",\n                T: ()=>ParticipantCount\n            },\n            {\n                no: 4,\n                name: \"pins\",\n                kind: \"message\",\n                repeat: 1 /*RepeatType.PACKED*/ ,\n                T: ()=>Pin\n            }\n        ]);\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        message.participants = [];\n        message.pins = [];\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* repeated stream.video.sfu.models.Participant participants */ 1:\n                    message.participants.push(Participant.internalBinaryRead(reader, reader.uint32(), options));\n                    break;\n                case /* google.protobuf.Timestamp started_at */ 2:\n                    message.startedAt = Timestamp.internalBinaryRead(reader, reader.uint32(), options, message.startedAt);\n                    break;\n                case /* stream.video.sfu.models.ParticipantCount participant_count */ 3:\n                    message.participantCount = ParticipantCount.internalBinaryRead(reader, reader.uint32(), options, message.participantCount);\n                    break;\n                case /* repeated stream.video.sfu.models.Pin pins */ 4:\n                    message.pins.push(Pin.internalBinaryRead(reader, reader.uint32(), options));\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* repeated stream.video.sfu.models.Participant participants = 1; */ for(let i = 0; i < message.participants.length; i++)Participant.internalBinaryWrite(message.participants[i], writer.tag(1, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        /* google.protobuf.Timestamp started_at = 2; */ if (message.startedAt) Timestamp.internalBinaryWrite(message.startedAt, writer.tag(2, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        /* stream.video.sfu.models.ParticipantCount participant_count = 3; */ if (message.participantCount) ParticipantCount.internalBinaryWrite(message.participantCount, writer.tag(3, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        /* repeated stream.video.sfu.models.Pin pins = 4; */ for(let i = 0; i < message.pins.length; i++)Pin.internalBinaryWrite(message.pins[i], writer.tag(4, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.CallState\n */ const CallState$1 = new CallState$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ParticipantCount$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.models.ParticipantCount\", [\n            {\n                no: 1,\n                name: \"total\",\n                kind: \"scalar\",\n                T: 13 /*ScalarType.UINT32*/ \n            },\n            {\n                no: 2,\n                name: \"anonymous\",\n                kind: \"scalar\",\n                T: 13 /*ScalarType.UINT32*/ \n            }\n        ]);\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        message.total = 0;\n        message.anonymous = 0;\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* uint32 total */ 1:\n                    message.total = reader.uint32();\n                    break;\n                case /* uint32 anonymous */ 2:\n                    message.anonymous = reader.uint32();\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* uint32 total = 1; */ if (message.total !== 0) writer.tag(1, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.Varint).uint32(message.total);\n        /* uint32 anonymous = 2; */ if (message.anonymous !== 0) writer.tag(2, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.Varint).uint32(message.anonymous);\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.ParticipantCount\n */ const ParticipantCount = new ParticipantCount$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass Pin$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.models.Pin\", [\n            {\n                no: 1,\n                name: \"user_id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 2,\n                name: \"session_id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            }\n        ]);\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        message.userId = \"\";\n        message.sessionId = \"\";\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* string user_id */ 1:\n                    message.userId = reader.string();\n                    break;\n                case /* string session_id */ 2:\n                    message.sessionId = reader.string();\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* string user_id = 1; */ if (message.userId !== \"\") writer.tag(1, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.userId);\n        /* string session_id = 2; */ if (message.sessionId !== \"\") writer.tag(2, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.sessionId);\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.Pin\n */ const Pin = new Pin$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass Participant$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.models.Participant\", [\n            {\n                no: 1,\n                name: \"user_id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 2,\n                name: \"session_id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 3,\n                name: \"published_tracks\",\n                kind: \"enum\",\n                repeat: 1 /*RepeatType.PACKED*/ ,\n                T: ()=>[\n                        \"stream.video.sfu.models.TrackType\",\n                        TrackType,\n                        \"TRACK_TYPE_\"\n                    ]\n            },\n            {\n                no: 4,\n                name: \"joined_at\",\n                kind: \"message\",\n                T: ()=>Timestamp\n            },\n            {\n                no: 5,\n                name: \"track_lookup_prefix\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 6,\n                name: \"connection_quality\",\n                kind: \"enum\",\n                T: ()=>[\n                        \"stream.video.sfu.models.ConnectionQuality\",\n                        ConnectionQuality,\n                        \"CONNECTION_QUALITY_\"\n                    ]\n            },\n            {\n                no: 7,\n                name: \"is_speaking\",\n                kind: \"scalar\",\n                T: 8 /*ScalarType.BOOL*/ \n            },\n            {\n                no: 8,\n                name: \"is_dominant_speaker\",\n                kind: \"scalar\",\n                T: 8 /*ScalarType.BOOL*/ \n            },\n            {\n                no: 9,\n                name: \"audio_level\",\n                kind: \"scalar\",\n                T: 2 /*ScalarType.FLOAT*/ \n            },\n            {\n                no: 10,\n                name: \"name\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 11,\n                name: \"image\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 12,\n                name: \"custom\",\n                kind: \"message\",\n                T: ()=>Struct\n            },\n            {\n                no: 13,\n                name: \"roles\",\n                kind: \"scalar\",\n                repeat: 2 /*RepeatType.UNPACKED*/ ,\n                T: 9 /*ScalarType.STRING*/ \n            }\n        ]);\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        message.userId = \"\";\n        message.sessionId = \"\";\n        message.publishedTracks = [];\n        message.trackLookupPrefix = \"\";\n        message.connectionQuality = 0;\n        message.isSpeaking = false;\n        message.isDominantSpeaker = false;\n        message.audioLevel = 0;\n        message.name = \"\";\n        message.image = \"\";\n        message.roles = [];\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* string user_id */ 1:\n                    message.userId = reader.string();\n                    break;\n                case /* string session_id */ 2:\n                    message.sessionId = reader.string();\n                    break;\n                case /* repeated stream.video.sfu.models.TrackType published_tracks */ 3:\n                    if (wireType === _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited) for(let e = reader.int32() + reader.pos; reader.pos < e;)message.publishedTracks.push(reader.int32());\n                    else message.publishedTracks.push(reader.int32());\n                    break;\n                case /* google.protobuf.Timestamp joined_at */ 4:\n                    message.joinedAt = Timestamp.internalBinaryRead(reader, reader.uint32(), options, message.joinedAt);\n                    break;\n                case /* string track_lookup_prefix */ 5:\n                    message.trackLookupPrefix = reader.string();\n                    break;\n                case /* stream.video.sfu.models.ConnectionQuality connection_quality */ 6:\n                    message.connectionQuality = reader.int32();\n                    break;\n                case /* bool is_speaking */ 7:\n                    message.isSpeaking = reader.bool();\n                    break;\n                case /* bool is_dominant_speaker */ 8:\n                    message.isDominantSpeaker = reader.bool();\n                    break;\n                case /* float audio_level */ 9:\n                    message.audioLevel = reader.float();\n                    break;\n                case /* string name */ 10:\n                    message.name = reader.string();\n                    break;\n                case /* string image */ 11:\n                    message.image = reader.string();\n                    break;\n                case /* google.protobuf.Struct custom */ 12:\n                    message.custom = Struct.internalBinaryRead(reader, reader.uint32(), options, message.custom);\n                    break;\n                case /* repeated string roles */ 13:\n                    message.roles.push(reader.string());\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* string user_id = 1; */ if (message.userId !== \"\") writer.tag(1, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.userId);\n        /* string session_id = 2; */ if (message.sessionId !== \"\") writer.tag(2, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.sessionId);\n        /* repeated stream.video.sfu.models.TrackType published_tracks = 3; */ if (message.publishedTracks.length) {\n            writer.tag(3, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork();\n            for(let i = 0; i < message.publishedTracks.length; i++)writer.int32(message.publishedTracks[i]);\n            writer.join();\n        }\n        /* google.protobuf.Timestamp joined_at = 4; */ if (message.joinedAt) Timestamp.internalBinaryWrite(message.joinedAt, writer.tag(4, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        /* string track_lookup_prefix = 5; */ if (message.trackLookupPrefix !== \"\") writer.tag(5, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.trackLookupPrefix);\n        /* stream.video.sfu.models.ConnectionQuality connection_quality = 6; */ if (message.connectionQuality !== 0) writer.tag(6, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.Varint).int32(message.connectionQuality);\n        /* bool is_speaking = 7; */ if (message.isSpeaking !== false) writer.tag(7, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.Varint).bool(message.isSpeaking);\n        /* bool is_dominant_speaker = 8; */ if (message.isDominantSpeaker !== false) writer.tag(8, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.Varint).bool(message.isDominantSpeaker);\n        /* float audio_level = 9; */ if (message.audioLevel !== 0) writer.tag(9, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.Bit32).float(message.audioLevel);\n        /* string name = 10; */ if (message.name !== \"\") writer.tag(10, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.name);\n        /* string image = 11; */ if (message.image !== \"\") writer.tag(11, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.image);\n        /* google.protobuf.Struct custom = 12; */ if (message.custom) Struct.internalBinaryWrite(message.custom, writer.tag(12, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        /* repeated string roles = 13; */ for(let i = 0; i < message.roles.length; i++)writer.tag(13, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.roles[i]);\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.Participant\n */ const Participant = new Participant$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass StreamQuality$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.models.StreamQuality\", [\n            {\n                no: 1,\n                name: \"video_quality\",\n                kind: \"enum\",\n                T: ()=>[\n                        \"stream.video.sfu.models.VideoQuality\",\n                        VideoQuality,\n                        \"VIDEO_QUALITY_\"\n                    ]\n            },\n            {\n                no: 2,\n                name: \"user_id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            }\n        ]);\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        message.videoQuality = 0;\n        message.userId = \"\";\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* stream.video.sfu.models.VideoQuality video_quality */ 1:\n                    message.videoQuality = reader.int32();\n                    break;\n                case /* string user_id */ 2:\n                    message.userId = reader.string();\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* stream.video.sfu.models.VideoQuality video_quality = 1; */ if (message.videoQuality !== 0) writer.tag(1, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.Varint).int32(message.videoQuality);\n        /* string user_id = 2; */ if (message.userId !== \"\") writer.tag(2, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.userId);\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.StreamQuality\n */ const StreamQuality = new StreamQuality$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass VideoDimension$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.models.VideoDimension\", [\n            {\n                no: 1,\n                name: \"width\",\n                kind: \"scalar\",\n                T: 13 /*ScalarType.UINT32*/ \n            },\n            {\n                no: 2,\n                name: \"height\",\n                kind: \"scalar\",\n                T: 13 /*ScalarType.UINT32*/ \n            }\n        ]);\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        message.width = 0;\n        message.height = 0;\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* uint32 width */ 1:\n                    message.width = reader.uint32();\n                    break;\n                case /* uint32 height */ 2:\n                    message.height = reader.uint32();\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* uint32 width = 1; */ if (message.width !== 0) writer.tag(1, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.Varint).uint32(message.width);\n        /* uint32 height = 2; */ if (message.height !== 0) writer.tag(2, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.Varint).uint32(message.height);\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.VideoDimension\n */ const VideoDimension = new VideoDimension$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass VideoLayer$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.models.VideoLayer\", [\n            {\n                no: 1,\n                name: \"rid\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 2,\n                name: \"video_dimension\",\n                kind: \"message\",\n                T: ()=>VideoDimension\n            },\n            {\n                no: 4,\n                name: \"bitrate\",\n                kind: \"scalar\",\n                T: 13 /*ScalarType.UINT32*/ \n            },\n            {\n                no: 5,\n                name: \"fps\",\n                kind: \"scalar\",\n                T: 13 /*ScalarType.UINT32*/ \n            },\n            {\n                no: 6,\n                name: \"quality\",\n                kind: \"enum\",\n                T: ()=>[\n                        \"stream.video.sfu.models.VideoQuality\",\n                        VideoQuality,\n                        \"VIDEO_QUALITY_\"\n                    ]\n            }\n        ]);\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        message.rid = \"\";\n        message.bitrate = 0;\n        message.fps = 0;\n        message.quality = 0;\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* string rid */ 1:\n                    message.rid = reader.string();\n                    break;\n                case /* stream.video.sfu.models.VideoDimension video_dimension */ 2:\n                    message.videoDimension = VideoDimension.internalBinaryRead(reader, reader.uint32(), options, message.videoDimension);\n                    break;\n                case /* uint32 bitrate */ 4:\n                    message.bitrate = reader.uint32();\n                    break;\n                case /* uint32 fps */ 5:\n                    message.fps = reader.uint32();\n                    break;\n                case /* stream.video.sfu.models.VideoQuality quality */ 6:\n                    message.quality = reader.int32();\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* string rid = 1; */ if (message.rid !== \"\") writer.tag(1, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.rid);\n        /* stream.video.sfu.models.VideoDimension video_dimension = 2; */ if (message.videoDimension) VideoDimension.internalBinaryWrite(message.videoDimension, writer.tag(2, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        /* uint32 bitrate = 4; */ if (message.bitrate !== 0) writer.tag(4, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.Varint).uint32(message.bitrate);\n        /* uint32 fps = 5; */ if (message.fps !== 0) writer.tag(5, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.Varint).uint32(message.fps);\n        /* stream.video.sfu.models.VideoQuality quality = 6; */ if (message.quality !== 0) writer.tag(6, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.Varint).int32(message.quality);\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.VideoLayer\n */ const VideoLayer = new VideoLayer$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass Codec$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.models.Codec\", [\n            {\n                no: 1,\n                name: \"payload_type\",\n                kind: \"scalar\",\n                T: 13 /*ScalarType.UINT32*/ \n            },\n            {\n                no: 2,\n                name: \"name\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 3,\n                name: \"fmtp_line\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 4,\n                name: \"clock_rate\",\n                kind: \"scalar\",\n                T: 13 /*ScalarType.UINT32*/ \n            },\n            {\n                no: 5,\n                name: \"encoding_parameters\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 6,\n                name: \"feedbacks\",\n                kind: \"scalar\",\n                repeat: 2 /*RepeatType.UNPACKED*/ ,\n                T: 9 /*ScalarType.STRING*/ \n            }\n        ]);\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        message.payloadType = 0;\n        message.name = \"\";\n        message.fmtpLine = \"\";\n        message.clockRate = 0;\n        message.encodingParameters = \"\";\n        message.feedbacks = [];\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* uint32 payload_type */ 1:\n                    message.payloadType = reader.uint32();\n                    break;\n                case /* string name */ 2:\n                    message.name = reader.string();\n                    break;\n                case /* string fmtp_line */ 3:\n                    message.fmtpLine = reader.string();\n                    break;\n                case /* uint32 clock_rate */ 4:\n                    message.clockRate = reader.uint32();\n                    break;\n                case /* string encoding_parameters */ 5:\n                    message.encodingParameters = reader.string();\n                    break;\n                case /* repeated string feedbacks */ 6:\n                    message.feedbacks.push(reader.string());\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* uint32 payload_type = 1; */ if (message.payloadType !== 0) writer.tag(1, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.Varint).uint32(message.payloadType);\n        /* string name = 2; */ if (message.name !== \"\") writer.tag(2, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.name);\n        /* string fmtp_line = 3; */ if (message.fmtpLine !== \"\") writer.tag(3, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.fmtpLine);\n        /* uint32 clock_rate = 4; */ if (message.clockRate !== 0) writer.tag(4, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.Varint).uint32(message.clockRate);\n        /* string encoding_parameters = 5; */ if (message.encodingParameters !== \"\") writer.tag(5, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.encodingParameters);\n        /* repeated string feedbacks = 6; */ for(let i = 0; i < message.feedbacks.length; i++)writer.tag(6, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.feedbacks[i]);\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.Codec\n */ const Codec = new Codec$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nlet ICETrickle$Type$1 = class ICETrickle$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.models.ICETrickle\", [\n            {\n                no: 1,\n                name: \"peer_type\",\n                kind: \"enum\",\n                T: ()=>[\n                        \"stream.video.sfu.models.PeerType\",\n                        PeerType,\n                        \"PEER_TYPE_\"\n                    ]\n            },\n            {\n                no: 2,\n                name: \"ice_candidate\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 3,\n                name: \"session_id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            }\n        ]);\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        message.peerType = 0;\n        message.iceCandidate = \"\";\n        message.sessionId = \"\";\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* stream.video.sfu.models.PeerType peer_type */ 1:\n                    message.peerType = reader.int32();\n                    break;\n                case /* string ice_candidate */ 2:\n                    message.iceCandidate = reader.string();\n                    break;\n                case /* string session_id */ 3:\n                    message.sessionId = reader.string();\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* stream.video.sfu.models.PeerType peer_type = 1; */ if (message.peerType !== 0) writer.tag(1, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.Varint).int32(message.peerType);\n        /* string ice_candidate = 2; */ if (message.iceCandidate !== \"\") writer.tag(2, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.iceCandidate);\n        /* string session_id = 3; */ if (message.sessionId !== \"\") writer.tag(3, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.sessionId);\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n};\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.ICETrickle\n */ const ICETrickle$1 = new ICETrickle$Type$1();\n// @generated message type with reflection information, may provide speed optimized methods\nclass TrackInfo$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.models.TrackInfo\", [\n            {\n                no: 1,\n                name: \"track_id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 2,\n                name: \"track_type\",\n                kind: \"enum\",\n                T: ()=>[\n                        \"stream.video.sfu.models.TrackType\",\n                        TrackType,\n                        \"TRACK_TYPE_\"\n                    ]\n            },\n            {\n                no: 5,\n                name: \"layers\",\n                kind: \"message\",\n                repeat: 1 /*RepeatType.PACKED*/ ,\n                T: ()=>VideoLayer\n            },\n            {\n                no: 6,\n                name: \"mid\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 7,\n                name: \"dtx\",\n                kind: \"scalar\",\n                T: 8 /*ScalarType.BOOL*/ \n            },\n            {\n                no: 8,\n                name: \"stereo\",\n                kind: \"scalar\",\n                T: 8 /*ScalarType.BOOL*/ \n            },\n            {\n                no: 9,\n                name: \"red\",\n                kind: \"scalar\",\n                T: 8 /*ScalarType.BOOL*/ \n            }\n        ]);\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        message.trackId = \"\";\n        message.trackType = 0;\n        message.layers = [];\n        message.mid = \"\";\n        message.dtx = false;\n        message.stereo = false;\n        message.red = false;\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* string track_id */ 1:\n                    message.trackId = reader.string();\n                    break;\n                case /* stream.video.sfu.models.TrackType track_type */ 2:\n                    message.trackType = reader.int32();\n                    break;\n                case /* repeated stream.video.sfu.models.VideoLayer layers */ 5:\n                    message.layers.push(VideoLayer.internalBinaryRead(reader, reader.uint32(), options));\n                    break;\n                case /* string mid */ 6:\n                    message.mid = reader.string();\n                    break;\n                case /* bool dtx */ 7:\n                    message.dtx = reader.bool();\n                    break;\n                case /* bool stereo */ 8:\n                    message.stereo = reader.bool();\n                    break;\n                case /* bool red */ 9:\n                    message.red = reader.bool();\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* string track_id = 1; */ if (message.trackId !== \"\") writer.tag(1, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.trackId);\n        /* stream.video.sfu.models.TrackType track_type = 2; */ if (message.trackType !== 0) writer.tag(2, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.Varint).int32(message.trackType);\n        /* repeated stream.video.sfu.models.VideoLayer layers = 5; */ for(let i = 0; i < message.layers.length; i++)VideoLayer.internalBinaryWrite(message.layers[i], writer.tag(5, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        /* string mid = 6; */ if (message.mid !== \"\") writer.tag(6, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.mid);\n        /* bool dtx = 7; */ if (message.dtx !== false) writer.tag(7, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.Varint).bool(message.dtx);\n        /* bool stereo = 8; */ if (message.stereo !== false) writer.tag(8, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.Varint).bool(message.stereo);\n        /* bool red = 9; */ if (message.red !== false) writer.tag(9, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.Varint).bool(message.red);\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.TrackInfo\n */ const TrackInfo = new TrackInfo$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass Call$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.models.Call\", [\n            {\n                no: 1,\n                name: \"type\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 2,\n                name: \"id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 3,\n                name: \"created_by_user_id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 4,\n                name: \"host_user_id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 5,\n                name: \"custom\",\n                kind: \"message\",\n                T: ()=>Struct\n            },\n            {\n                no: 6,\n                name: \"created_at\",\n                kind: \"message\",\n                T: ()=>Timestamp\n            },\n            {\n                no: 7,\n                name: \"updated_at\",\n                kind: \"message\",\n                T: ()=>Timestamp\n            }\n        ]);\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        message.type = \"\";\n        message.id = \"\";\n        message.createdByUserId = \"\";\n        message.hostUserId = \"\";\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* string type */ 1:\n                    message.type = reader.string();\n                    break;\n                case /* string id */ 2:\n                    message.id = reader.string();\n                    break;\n                case /* string created_by_user_id */ 3:\n                    message.createdByUserId = reader.string();\n                    break;\n                case /* string host_user_id */ 4:\n                    message.hostUserId = reader.string();\n                    break;\n                case /* google.protobuf.Struct custom */ 5:\n                    message.custom = Struct.internalBinaryRead(reader, reader.uint32(), options, message.custom);\n                    break;\n                case /* google.protobuf.Timestamp created_at */ 6:\n                    message.createdAt = Timestamp.internalBinaryRead(reader, reader.uint32(), options, message.createdAt);\n                    break;\n                case /* google.protobuf.Timestamp updated_at */ 7:\n                    message.updatedAt = Timestamp.internalBinaryRead(reader, reader.uint32(), options, message.updatedAt);\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* string type = 1; */ if (message.type !== \"\") writer.tag(1, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.type);\n        /* string id = 2; */ if (message.id !== \"\") writer.tag(2, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.id);\n        /* string created_by_user_id = 3; */ if (message.createdByUserId !== \"\") writer.tag(3, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.createdByUserId);\n        /* string host_user_id = 4; */ if (message.hostUserId !== \"\") writer.tag(4, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.hostUserId);\n        /* google.protobuf.Struct custom = 5; */ if (message.custom) Struct.internalBinaryWrite(message.custom, writer.tag(5, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        /* google.protobuf.Timestamp created_at = 6; */ if (message.createdAt) Timestamp.internalBinaryWrite(message.createdAt, writer.tag(6, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        /* google.protobuf.Timestamp updated_at = 7; */ if (message.updatedAt) Timestamp.internalBinaryWrite(message.updatedAt, writer.tag(7, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.Call\n */ const Call$1 = new Call$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nlet Error$Type$1 = class Error$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.models.Error\", [\n            {\n                no: 1,\n                name: \"code\",\n                kind: \"enum\",\n                T: ()=>[\n                        \"stream.video.sfu.models.ErrorCode\",\n                        ErrorCode,\n                        \"ERROR_CODE_\"\n                    ]\n            },\n            {\n                no: 2,\n                name: \"message\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 3,\n                name: \"should_retry\",\n                kind: \"scalar\",\n                T: 8 /*ScalarType.BOOL*/ \n            }\n        ]);\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        message.code = 0;\n        message.message = \"\";\n        message.shouldRetry = false;\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* stream.video.sfu.models.ErrorCode code */ 1:\n                    message.code = reader.int32();\n                    break;\n                case /* string message */ 2:\n                    message.message = reader.string();\n                    break;\n                case /* bool should_retry */ 3:\n                    message.shouldRetry = reader.bool();\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* stream.video.sfu.models.ErrorCode code = 1; */ if (message.code !== 0) writer.tag(1, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.Varint).int32(message.code);\n        /* string message = 2; */ if (message.message !== \"\") writer.tag(2, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.message);\n        /* bool should_retry = 3; */ if (message.shouldRetry !== false) writer.tag(3, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.Varint).bool(message.shouldRetry);\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n};\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.Error\n */ const Error$2 = new Error$Type$1();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ClientDetails$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.models.ClientDetails\", [\n            {\n                no: 1,\n                name: \"sdk\",\n                kind: \"message\",\n                T: ()=>Sdk\n            },\n            {\n                no: 2,\n                name: \"os\",\n                kind: \"message\",\n                T: ()=>OS\n            },\n            {\n                no: 3,\n                name: \"browser\",\n                kind: \"message\",\n                T: ()=>Browser\n            },\n            {\n                no: 4,\n                name: \"device\",\n                kind: \"message\",\n                T: ()=>Device\n            }\n        ]);\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* stream.video.sfu.models.Sdk sdk */ 1:\n                    message.sdk = Sdk.internalBinaryRead(reader, reader.uint32(), options, message.sdk);\n                    break;\n                case /* stream.video.sfu.models.OS os */ 2:\n                    message.os = OS.internalBinaryRead(reader, reader.uint32(), options, message.os);\n                    break;\n                case /* stream.video.sfu.models.Browser browser */ 3:\n                    message.browser = Browser.internalBinaryRead(reader, reader.uint32(), options, message.browser);\n                    break;\n                case /* stream.video.sfu.models.Device device */ 4:\n                    message.device = Device.internalBinaryRead(reader, reader.uint32(), options, message.device);\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* stream.video.sfu.models.Sdk sdk = 1; */ if (message.sdk) Sdk.internalBinaryWrite(message.sdk, writer.tag(1, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        /* stream.video.sfu.models.OS os = 2; */ if (message.os) OS.internalBinaryWrite(message.os, writer.tag(2, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        /* stream.video.sfu.models.Browser browser = 3; */ if (message.browser) Browser.internalBinaryWrite(message.browser, writer.tag(3, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        /* stream.video.sfu.models.Device device = 4; */ if (message.device) Device.internalBinaryWrite(message.device, writer.tag(4, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.ClientDetails\n */ const ClientDetails = new ClientDetails$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass Sdk$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.models.Sdk\", [\n            {\n                no: 1,\n                name: \"type\",\n                kind: \"enum\",\n                T: ()=>[\n                        \"stream.video.sfu.models.SdkType\",\n                        SdkType,\n                        \"SDK_TYPE_\"\n                    ]\n            },\n            {\n                no: 2,\n                name: \"major\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 3,\n                name: \"minor\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 4,\n                name: \"patch\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            }\n        ]);\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        message.type = 0;\n        message.major = \"\";\n        message.minor = \"\";\n        message.patch = \"\";\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* stream.video.sfu.models.SdkType type */ 1:\n                    message.type = reader.int32();\n                    break;\n                case /* string major */ 2:\n                    message.major = reader.string();\n                    break;\n                case /* string minor */ 3:\n                    message.minor = reader.string();\n                    break;\n                case /* string patch */ 4:\n                    message.patch = reader.string();\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* stream.video.sfu.models.SdkType type = 1; */ if (message.type !== 0) writer.tag(1, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.Varint).int32(message.type);\n        /* string major = 2; */ if (message.major !== \"\") writer.tag(2, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.major);\n        /* string minor = 3; */ if (message.minor !== \"\") writer.tag(3, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.minor);\n        /* string patch = 4; */ if (message.patch !== \"\") writer.tag(4, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.patch);\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.Sdk\n */ const Sdk = new Sdk$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass OS$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.models.OS\", [\n            {\n                no: 1,\n                name: \"name\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 2,\n                name: \"version\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 3,\n                name: \"architecture\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            }\n        ]);\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        message.name = \"\";\n        message.version = \"\";\n        message.architecture = \"\";\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* string name */ 1:\n                    message.name = reader.string();\n                    break;\n                case /* string version */ 2:\n                    message.version = reader.string();\n                    break;\n                case /* string architecture */ 3:\n                    message.architecture = reader.string();\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* string name = 1; */ if (message.name !== \"\") writer.tag(1, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.name);\n        /* string version = 2; */ if (message.version !== \"\") writer.tag(2, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.version);\n        /* string architecture = 3; */ if (message.architecture !== \"\") writer.tag(3, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.architecture);\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.OS\n */ const OS = new OS$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass Browser$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.models.Browser\", [\n            {\n                no: 1,\n                name: \"name\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 2,\n                name: \"version\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            }\n        ]);\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        message.name = \"\";\n        message.version = \"\";\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* string name */ 1:\n                    message.name = reader.string();\n                    break;\n                case /* string version */ 2:\n                    message.version = reader.string();\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* string name = 1; */ if (message.name !== \"\") writer.tag(1, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.name);\n        /* string version = 2; */ if (message.version !== \"\") writer.tag(2, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.version);\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.Browser\n */ const Browser = new Browser$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass Device$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.models.Device\", [\n            {\n                no: 1,\n                name: \"name\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 2,\n                name: \"version\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            }\n        ]);\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        message.name = \"\";\n        message.version = \"\";\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* string name */ 1:\n                    message.name = reader.string();\n                    break;\n                case /* string version */ 2:\n                    message.version = reader.string();\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* string name = 1; */ if (message.name !== \"\") writer.tag(1, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.name);\n        /* string version = 2; */ if (message.version !== \"\") writer.tag(2, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.version);\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.Device\n */ const Device = new Device$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass CallGrants$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.models.CallGrants\", [\n            {\n                no: 1,\n                name: \"can_publish_audio\",\n                kind: \"scalar\",\n                T: 8 /*ScalarType.BOOL*/ \n            },\n            {\n                no: 2,\n                name: \"can_publish_video\",\n                kind: \"scalar\",\n                T: 8 /*ScalarType.BOOL*/ \n            },\n            {\n                no: 3,\n                name: \"can_screenshare\",\n                kind: \"scalar\",\n                T: 8 /*ScalarType.BOOL*/ \n            }\n        ]);\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        message.canPublishAudio = false;\n        message.canPublishVideo = false;\n        message.canScreenshare = false;\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* bool can_publish_audio */ 1:\n                    message.canPublishAudio = reader.bool();\n                    break;\n                case /* bool can_publish_video */ 2:\n                    message.canPublishVideo = reader.bool();\n                    break;\n                case /* bool can_screenshare */ 3:\n                    message.canScreenshare = reader.bool();\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* bool can_publish_audio = 1; */ if (message.canPublishAudio !== false) writer.tag(1, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.Varint).bool(message.canPublishAudio);\n        /* bool can_publish_video = 2; */ if (message.canPublishVideo !== false) writer.tag(2, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.Varint).bool(message.canPublishVideo);\n        /* bool can_screenshare = 3; */ if (message.canScreenshare !== false) writer.tag(3, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.Varint).bool(message.canScreenshare);\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.models.CallGrants\n */ const CallGrants = new CallGrants$Type();\nvar models = /*#__PURE__*/ Object.freeze({\n    __proto__: null,\n    Browser: Browser,\n    Call: Call$1,\n    CallGrants: CallGrants,\n    CallState: CallState$1,\n    ClientDetails: ClientDetails,\n    Codec: Codec,\n    get ConnectionQuality () {\n        return ConnectionQuality;\n    },\n    Device: Device,\n    Error: Error$2,\n    get ErrorCode () {\n        return ErrorCode;\n    },\n    get GoAwayReason () {\n        return GoAwayReason;\n    },\n    ICETrickle: ICETrickle$1,\n    OS: OS,\n    Participant: Participant,\n    ParticipantCount: ParticipantCount,\n    get PeerType () {\n        return PeerType;\n    },\n    Pin: Pin,\n    Sdk: Sdk,\n    get SdkType () {\n        return SdkType;\n    },\n    StreamQuality: StreamQuality,\n    TrackInfo: TrackInfo,\n    get TrackType () {\n        return TrackType;\n    },\n    get TrackUnpublishReason () {\n        return TrackUnpublishReason;\n    },\n    VideoDimension: VideoDimension,\n    VideoLayer: VideoLayer,\n    get VideoQuality () {\n        return VideoQuality;\n    }\n});\n/* eslint-disable */ // @generated by protobuf-ts 2.9.3 with parameter long_type_string,client_generic,server_none,eslint_disable\n// @generated from protobuf file \"video/sfu/signal_rpc/signal.proto\" (package \"stream.video.sfu.signal\", syntax proto3)\n// tslint:disable\n// @generated message type with reflection information, may provide speed optimized methods\nclass ICERestartRequest$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.signal.ICERestartRequest\", [\n            {\n                no: 1,\n                name: \"session_id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 2,\n                name: \"peer_type\",\n                kind: \"enum\",\n                T: ()=>[\n                        \"stream.video.sfu.models.PeerType\",\n                        PeerType,\n                        \"PEER_TYPE_\"\n                    ]\n            }\n        ]);\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        message.sessionId = \"\";\n        message.peerType = 0;\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* string session_id */ 1:\n                    message.sessionId = reader.string();\n                    break;\n                case /* stream.video.sfu.models.PeerType peer_type */ 2:\n                    message.peerType = reader.int32();\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* string session_id = 1; */ if (message.sessionId !== \"\") writer.tag(1, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.sessionId);\n        /* stream.video.sfu.models.PeerType peer_type = 2; */ if (message.peerType !== 0) writer.tag(2, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.Varint).int32(message.peerType);\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.ICERestartRequest\n */ const ICERestartRequest = new ICERestartRequest$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ICERestartResponse$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.signal.ICERestartResponse\", [\n            {\n                no: 1,\n                name: \"error\",\n                kind: \"message\",\n                T: ()=>Error$2\n            }\n        ]);\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* stream.video.sfu.models.Error error */ 1:\n                    message.error = Error$2.internalBinaryRead(reader, reader.uint32(), options, message.error);\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* stream.video.sfu.models.Error error = 1; */ if (message.error) Error$2.internalBinaryWrite(message.error, writer.tag(1, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.ICERestartResponse\n */ const ICERestartResponse = new ICERestartResponse$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass UpdateMuteStatesRequest$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.signal.UpdateMuteStatesRequest\", [\n            {\n                no: 1,\n                name: \"session_id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 3,\n                name: \"mute_states\",\n                kind: \"message\",\n                repeat: 1 /*RepeatType.PACKED*/ ,\n                T: ()=>TrackMuteState\n            }\n        ]);\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        message.sessionId = \"\";\n        message.muteStates = [];\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* string session_id */ 1:\n                    message.sessionId = reader.string();\n                    break;\n                case /* repeated stream.video.sfu.signal.TrackMuteState mute_states */ 3:\n                    message.muteStates.push(TrackMuteState.internalBinaryRead(reader, reader.uint32(), options));\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* string session_id = 1; */ if (message.sessionId !== \"\") writer.tag(1, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.sessionId);\n        /* repeated stream.video.sfu.signal.TrackMuteState mute_states = 3; */ for(let i = 0; i < message.muteStates.length; i++)TrackMuteState.internalBinaryWrite(message.muteStates[i], writer.tag(3, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.UpdateMuteStatesRequest\n */ const UpdateMuteStatesRequest = new UpdateMuteStatesRequest$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass UpdateMuteStatesResponse$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.signal.UpdateMuteStatesResponse\", [\n            {\n                no: 4,\n                name: \"error\",\n                kind: \"message\",\n                T: ()=>Error$2\n            }\n        ]);\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* stream.video.sfu.models.Error error */ 4:\n                    message.error = Error$2.internalBinaryRead(reader, reader.uint32(), options, message.error);\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* stream.video.sfu.models.Error error = 4; */ if (message.error) Error$2.internalBinaryWrite(message.error, writer.tag(4, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.UpdateMuteStatesResponse\n */ const UpdateMuteStatesResponse = new UpdateMuteStatesResponse$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass TrackMuteState$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.signal.TrackMuteState\", [\n            {\n                no: 1,\n                name: \"track_type\",\n                kind: \"enum\",\n                T: ()=>[\n                        \"stream.video.sfu.models.TrackType\",\n                        TrackType,\n                        \"TRACK_TYPE_\"\n                    ]\n            },\n            {\n                no: 2,\n                name: \"muted\",\n                kind: \"scalar\",\n                T: 8 /*ScalarType.BOOL*/ \n            }\n        ]);\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        message.trackType = 0;\n        message.muted = false;\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* stream.video.sfu.models.TrackType track_type */ 1:\n                    message.trackType = reader.int32();\n                    break;\n                case /* bool muted */ 2:\n                    message.muted = reader.bool();\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* stream.video.sfu.models.TrackType track_type = 1; */ if (message.trackType !== 0) writer.tag(1, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.Varint).int32(message.trackType);\n        /* bool muted = 2; */ if (message.muted !== false) writer.tag(2, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.Varint).bool(message.muted);\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.TrackMuteState\n */ const TrackMuteState = new TrackMuteState$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass AudioMuteChanged$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.signal.AudioMuteChanged\", [\n            {\n                no: 1,\n                name: \"muted\",\n                kind: \"scalar\",\n                T: 8 /*ScalarType.BOOL*/ \n            }\n        ]);\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        message.muted = false;\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* bool muted */ 1:\n                    message.muted = reader.bool();\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* bool muted = 1; */ if (message.muted !== false) writer.tag(1, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.Varint).bool(message.muted);\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.AudioMuteChanged\n */ new AudioMuteChanged$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass VideoMuteChanged$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.signal.VideoMuteChanged\", [\n            {\n                no: 2,\n                name: \"muted\",\n                kind: \"scalar\",\n                T: 8 /*ScalarType.BOOL*/ \n            }\n        ]);\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        message.muted = false;\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* bool muted */ 2:\n                    message.muted = reader.bool();\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* bool muted = 2; */ if (message.muted !== false) writer.tag(2, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.Varint).bool(message.muted);\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.VideoMuteChanged\n */ new VideoMuteChanged$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass UpdateSubscriptionsRequest$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.signal.UpdateSubscriptionsRequest\", [\n            {\n                no: 2,\n                name: \"session_id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 3,\n                name: \"tracks\",\n                kind: \"message\",\n                repeat: 1 /*RepeatType.PACKED*/ ,\n                T: ()=>TrackSubscriptionDetails\n            }\n        ]);\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        message.sessionId = \"\";\n        message.tracks = [];\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* string session_id */ 2:\n                    message.sessionId = reader.string();\n                    break;\n                case /* repeated stream.video.sfu.signal.TrackSubscriptionDetails tracks */ 3:\n                    message.tracks.push(TrackSubscriptionDetails.internalBinaryRead(reader, reader.uint32(), options));\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* string session_id = 2; */ if (message.sessionId !== \"\") writer.tag(2, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.sessionId);\n        /* repeated stream.video.sfu.signal.TrackSubscriptionDetails tracks = 3; */ for(let i = 0; i < message.tracks.length; i++)TrackSubscriptionDetails.internalBinaryWrite(message.tracks[i], writer.tag(3, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.UpdateSubscriptionsRequest\n */ const UpdateSubscriptionsRequest = new UpdateSubscriptionsRequest$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass UpdateSubscriptionsResponse$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.signal.UpdateSubscriptionsResponse\", [\n            {\n                no: 4,\n                name: \"error\",\n                kind: \"message\",\n                T: ()=>Error$2\n            }\n        ]);\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* stream.video.sfu.models.Error error */ 4:\n                    message.error = Error$2.internalBinaryRead(reader, reader.uint32(), options, message.error);\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* stream.video.sfu.models.Error error = 4; */ if (message.error) Error$2.internalBinaryWrite(message.error, writer.tag(4, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.UpdateSubscriptionsResponse\n */ const UpdateSubscriptionsResponse = new UpdateSubscriptionsResponse$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass TrackSubscriptionDetails$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.signal.TrackSubscriptionDetails\", [\n            {\n                no: 1,\n                name: \"user_id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 2,\n                name: \"session_id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 3,\n                name: \"track_type\",\n                kind: \"enum\",\n                T: ()=>[\n                        \"stream.video.sfu.models.TrackType\",\n                        TrackType,\n                        \"TRACK_TYPE_\"\n                    ]\n            },\n            {\n                no: 4,\n                name: \"dimension\",\n                kind: \"message\",\n                T: ()=>VideoDimension\n            }\n        ]);\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        message.userId = \"\";\n        message.sessionId = \"\";\n        message.trackType = 0;\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* string user_id */ 1:\n                    message.userId = reader.string();\n                    break;\n                case /* string session_id */ 2:\n                    message.sessionId = reader.string();\n                    break;\n                case /* stream.video.sfu.models.TrackType track_type */ 3:\n                    message.trackType = reader.int32();\n                    break;\n                case /* stream.video.sfu.models.VideoDimension dimension */ 4:\n                    message.dimension = VideoDimension.internalBinaryRead(reader, reader.uint32(), options, message.dimension);\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* string user_id = 1; */ if (message.userId !== \"\") writer.tag(1, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.userId);\n        /* string session_id = 2; */ if (message.sessionId !== \"\") writer.tag(2, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.sessionId);\n        /* stream.video.sfu.models.TrackType track_type = 3; */ if (message.trackType !== 0) writer.tag(3, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.Varint).int32(message.trackType);\n        /* stream.video.sfu.models.VideoDimension dimension = 4; */ if (message.dimension) VideoDimension.internalBinaryWrite(message.dimension, writer.tag(4, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.TrackSubscriptionDetails\n */ const TrackSubscriptionDetails = new TrackSubscriptionDetails$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass SendAnswerRequest$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.signal.SendAnswerRequest\", [\n            {\n                no: 1,\n                name: \"peer_type\",\n                kind: \"enum\",\n                T: ()=>[\n                        \"stream.video.sfu.models.PeerType\",\n                        PeerType,\n                        \"PEER_TYPE_\"\n                    ]\n            },\n            {\n                no: 2,\n                name: \"sdp\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 3,\n                name: \"session_id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            }\n        ]);\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        message.peerType = 0;\n        message.sdp = \"\";\n        message.sessionId = \"\";\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* stream.video.sfu.models.PeerType peer_type */ 1:\n                    message.peerType = reader.int32();\n                    break;\n                case /* string sdp */ 2:\n                    message.sdp = reader.string();\n                    break;\n                case /* string session_id */ 3:\n                    message.sessionId = reader.string();\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* stream.video.sfu.models.PeerType peer_type = 1; */ if (message.peerType !== 0) writer.tag(1, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.Varint).int32(message.peerType);\n        /* string sdp = 2; */ if (message.sdp !== \"\") writer.tag(2, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.sdp);\n        /* string session_id = 3; */ if (message.sessionId !== \"\") writer.tag(3, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.sessionId);\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.SendAnswerRequest\n */ const SendAnswerRequest = new SendAnswerRequest$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass SendAnswerResponse$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.signal.SendAnswerResponse\", [\n            {\n                no: 4,\n                name: \"error\",\n                kind: \"message\",\n                T: ()=>Error$2\n            }\n        ]);\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* stream.video.sfu.models.Error error */ 4:\n                    message.error = Error$2.internalBinaryRead(reader, reader.uint32(), options, message.error);\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* stream.video.sfu.models.Error error = 4; */ if (message.error) Error$2.internalBinaryWrite(message.error, writer.tag(4, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.SendAnswerResponse\n */ const SendAnswerResponse = new SendAnswerResponse$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ICETrickleResponse$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.signal.ICETrickleResponse\", [\n            {\n                no: 4,\n                name: \"error\",\n                kind: \"message\",\n                T: ()=>Error$2\n            }\n        ]);\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* stream.video.sfu.models.Error error */ 4:\n                    message.error = Error$2.internalBinaryRead(reader, reader.uint32(), options, message.error);\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* stream.video.sfu.models.Error error = 4; */ if (message.error) Error$2.internalBinaryWrite(message.error, writer.tag(4, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.ICETrickleResponse\n */ const ICETrickleResponse = new ICETrickleResponse$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass SetPublisherRequest$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.signal.SetPublisherRequest\", [\n            {\n                no: 1,\n                name: \"sdp\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 2,\n                name: \"session_id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 3,\n                name: \"tracks\",\n                kind: \"message\",\n                repeat: 1 /*RepeatType.PACKED*/ ,\n                T: ()=>TrackInfo\n            }\n        ]);\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        message.sdp = \"\";\n        message.sessionId = \"\";\n        message.tracks = [];\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* string sdp */ 1:\n                    message.sdp = reader.string();\n                    break;\n                case /* string session_id */ 2:\n                    message.sessionId = reader.string();\n                    break;\n                case /* repeated stream.video.sfu.models.TrackInfo tracks */ 3:\n                    message.tracks.push(TrackInfo.internalBinaryRead(reader, reader.uint32(), options));\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* string sdp = 1; */ if (message.sdp !== \"\") writer.tag(1, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.sdp);\n        /* string session_id = 2; */ if (message.sessionId !== \"\") writer.tag(2, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.sessionId);\n        /* repeated stream.video.sfu.models.TrackInfo tracks = 3; */ for(let i = 0; i < message.tracks.length; i++)TrackInfo.internalBinaryWrite(message.tracks[i], writer.tag(3, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.SetPublisherRequest\n */ const SetPublisherRequest = new SetPublisherRequest$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass SetPublisherResponse$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.signal.SetPublisherResponse\", [\n            {\n                no: 1,\n                name: \"sdp\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 2,\n                name: \"session_id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 3,\n                name: \"ice_restart\",\n                kind: \"scalar\",\n                T: 8 /*ScalarType.BOOL*/ \n            },\n            {\n                no: 4,\n                name: \"error\",\n                kind: \"message\",\n                T: ()=>Error$2\n            }\n        ]);\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        message.sdp = \"\";\n        message.sessionId = \"\";\n        message.iceRestart = false;\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* string sdp */ 1:\n                    message.sdp = reader.string();\n                    break;\n                case /* string session_id */ 2:\n                    message.sessionId = reader.string();\n                    break;\n                case /* bool ice_restart */ 3:\n                    message.iceRestart = reader.bool();\n                    break;\n                case /* stream.video.sfu.models.Error error */ 4:\n                    message.error = Error$2.internalBinaryRead(reader, reader.uint32(), options, message.error);\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* string sdp = 1; */ if (message.sdp !== \"\") writer.tag(1, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.sdp);\n        /* string session_id = 2; */ if (message.sessionId !== \"\") writer.tag(2, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.sessionId);\n        /* bool ice_restart = 3; */ if (message.iceRestart !== false) writer.tag(3, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.Varint).bool(message.iceRestart);\n        /* stream.video.sfu.models.Error error = 4; */ if (message.error) Error$2.internalBinaryWrite(message.error, writer.tag(4, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.signal.SetPublisherResponse\n */ const SetPublisherResponse = new SetPublisherResponse$Type();\n/**\n * @generated ServiceType for protobuf service stream.video.sfu.signal.SignalServer\n */ const SignalServer = new _protobuf_ts_runtime_rpc__WEBPACK_IMPORTED_MODULE_14__.ServiceType(\"stream.video.sfu.signal.SignalServer\", [\n    {\n        name: \"SetPublisher\",\n        options: {},\n        I: SetPublisherRequest,\n        O: SetPublisherResponse\n    },\n    {\n        name: \"SendAnswer\",\n        options: {},\n        I: SendAnswerRequest,\n        O: SendAnswerResponse\n    },\n    {\n        name: \"IceTrickle\",\n        options: {},\n        I: ICETrickle$1,\n        O: ICETrickleResponse\n    },\n    {\n        name: \"UpdateSubscriptions\",\n        options: {},\n        I: UpdateSubscriptionsRequest,\n        O: UpdateSubscriptionsResponse\n    },\n    {\n        name: \"UpdateMuteStates\",\n        options: {},\n        I: UpdateMuteStatesRequest,\n        O: UpdateMuteStatesResponse\n    },\n    {\n        name: \"IceRestart\",\n        options: {},\n        I: ICERestartRequest,\n        O: ICERestartResponse\n    }\n]);\n/**\n * @generated from protobuf enum stream.video.sfu.event.VideoLayerSetting.Priority\n */ var VideoLayerSetting_Priority;\n(function(VideoLayerSetting_Priority) {\n    /**\n     * @generated from protobuf enum value: PRIORITY_HIGH_UNSPECIFIED = 0;\n     */ VideoLayerSetting_Priority[VideoLayerSetting_Priority[\"HIGH_UNSPECIFIED\"] = 0] = \"HIGH_UNSPECIFIED\";\n    /**\n     * @generated from protobuf enum value: PRIORITY_LOW = 1;\n     */ VideoLayerSetting_Priority[VideoLayerSetting_Priority[\"LOW\"] = 1] = \"LOW\";\n    /**\n     * @generated from protobuf enum value: PRIORITY_MEDIUM = 2;\n     */ VideoLayerSetting_Priority[VideoLayerSetting_Priority[\"MEDIUM\"] = 2] = \"MEDIUM\";\n    /**\n     * @generated from protobuf enum value: PRIORITY_VERY_LOW = 3;\n     */ VideoLayerSetting_Priority[VideoLayerSetting_Priority[\"VERY_LOW\"] = 3] = \"VERY_LOW\";\n})(VideoLayerSetting_Priority || (VideoLayerSetting_Priority = {}));\n// @generated message type with reflection information, may provide speed optimized methods\nclass SfuEvent$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.event.SfuEvent\", [\n            {\n                no: 1,\n                name: \"subscriber_offer\",\n                kind: \"message\",\n                oneof: \"eventPayload\",\n                T: ()=>SubscriberOffer\n            },\n            {\n                no: 2,\n                name: \"publisher_answer\",\n                kind: \"message\",\n                oneof: \"eventPayload\",\n                T: ()=>PublisherAnswer\n            },\n            {\n                no: 3,\n                name: \"connection_quality_changed\",\n                kind: \"message\",\n                oneof: \"eventPayload\",\n                T: ()=>ConnectionQualityChanged\n            },\n            {\n                no: 4,\n                name: \"audio_level_changed\",\n                kind: \"message\",\n                oneof: \"eventPayload\",\n                T: ()=>AudioLevelChanged\n            },\n            {\n                no: 5,\n                name: \"ice_trickle\",\n                kind: \"message\",\n                oneof: \"eventPayload\",\n                T: ()=>ICETrickle$1\n            },\n            {\n                no: 6,\n                name: \"change_publish_quality\",\n                kind: \"message\",\n                oneof: \"eventPayload\",\n                T: ()=>ChangePublishQuality\n            },\n            {\n                no: 10,\n                name: \"participant_joined\",\n                kind: \"message\",\n                oneof: \"eventPayload\",\n                T: ()=>ParticipantJoined\n            },\n            {\n                no: 11,\n                name: \"participant_left\",\n                kind: \"message\",\n                oneof: \"eventPayload\",\n                T: ()=>ParticipantLeft\n            },\n            {\n                no: 12,\n                name: \"dominant_speaker_changed\",\n                kind: \"message\",\n                oneof: \"eventPayload\",\n                T: ()=>DominantSpeakerChanged\n            },\n            {\n                no: 13,\n                name: \"join_response\",\n                kind: \"message\",\n                oneof: \"eventPayload\",\n                T: ()=>JoinResponse\n            },\n            {\n                no: 14,\n                name: \"health_check_response\",\n                kind: \"message\",\n                oneof: \"eventPayload\",\n                T: ()=>HealthCheckResponse\n            },\n            {\n                no: 16,\n                name: \"track_published\",\n                kind: \"message\",\n                oneof: \"eventPayload\",\n                T: ()=>TrackPublished\n            },\n            {\n                no: 17,\n                name: \"track_unpublished\",\n                kind: \"message\",\n                oneof: \"eventPayload\",\n                T: ()=>TrackUnpublished\n            },\n            {\n                no: 18,\n                name: \"error\",\n                kind: \"message\",\n                oneof: \"eventPayload\",\n                T: ()=>Error$1\n            },\n            {\n                no: 19,\n                name: \"call_grants_updated\",\n                kind: \"message\",\n                oneof: \"eventPayload\",\n                T: ()=>CallGrantsUpdated\n            },\n            {\n                no: 20,\n                name: \"go_away\",\n                kind: \"message\",\n                oneof: \"eventPayload\",\n                T: ()=>GoAway\n            },\n            {\n                no: 21,\n                name: \"ice_restart\",\n                kind: \"message\",\n                oneof: \"eventPayload\",\n                T: ()=>ICERestart\n            },\n            {\n                no: 22,\n                name: \"pins_updated\",\n                kind: \"message\",\n                oneof: \"eventPayload\",\n                T: ()=>PinsChanged\n            }\n        ]);\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        message.eventPayload = {\n            oneofKind: undefined\n        };\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* stream.video.sfu.event.SubscriberOffer subscriber_offer */ 1:\n                    message.eventPayload = {\n                        oneofKind: \"subscriberOffer\",\n                        subscriberOffer: SubscriberOffer.internalBinaryRead(reader, reader.uint32(), options, message.eventPayload.subscriberOffer)\n                    };\n                    break;\n                case /* stream.video.sfu.event.PublisherAnswer publisher_answer */ 2:\n                    message.eventPayload = {\n                        oneofKind: \"publisherAnswer\",\n                        publisherAnswer: PublisherAnswer.internalBinaryRead(reader, reader.uint32(), options, message.eventPayload.publisherAnswer)\n                    };\n                    break;\n                case /* stream.video.sfu.event.ConnectionQualityChanged connection_quality_changed */ 3:\n                    message.eventPayload = {\n                        oneofKind: \"connectionQualityChanged\",\n                        connectionQualityChanged: ConnectionQualityChanged.internalBinaryRead(reader, reader.uint32(), options, message.eventPayload.connectionQualityChanged)\n                    };\n                    break;\n                case /* stream.video.sfu.event.AudioLevelChanged audio_level_changed */ 4:\n                    message.eventPayload = {\n                        oneofKind: \"audioLevelChanged\",\n                        audioLevelChanged: AudioLevelChanged.internalBinaryRead(reader, reader.uint32(), options, message.eventPayload.audioLevelChanged)\n                    };\n                    break;\n                case /* stream.video.sfu.models.ICETrickle ice_trickle */ 5:\n                    message.eventPayload = {\n                        oneofKind: \"iceTrickle\",\n                        iceTrickle: ICETrickle$1.internalBinaryRead(reader, reader.uint32(), options, message.eventPayload.iceTrickle)\n                    };\n                    break;\n                case /* stream.video.sfu.event.ChangePublishQuality change_publish_quality */ 6:\n                    message.eventPayload = {\n                        oneofKind: \"changePublishQuality\",\n                        changePublishQuality: ChangePublishQuality.internalBinaryRead(reader, reader.uint32(), options, message.eventPayload.changePublishQuality)\n                    };\n                    break;\n                case /* stream.video.sfu.event.ParticipantJoined participant_joined */ 10:\n                    message.eventPayload = {\n                        oneofKind: \"participantJoined\",\n                        participantJoined: ParticipantJoined.internalBinaryRead(reader, reader.uint32(), options, message.eventPayload.participantJoined)\n                    };\n                    break;\n                case /* stream.video.sfu.event.ParticipantLeft participant_left */ 11:\n                    message.eventPayload = {\n                        oneofKind: \"participantLeft\",\n                        participantLeft: ParticipantLeft.internalBinaryRead(reader, reader.uint32(), options, message.eventPayload.participantLeft)\n                    };\n                    break;\n                case /* stream.video.sfu.event.DominantSpeakerChanged dominant_speaker_changed */ 12:\n                    message.eventPayload = {\n                        oneofKind: \"dominantSpeakerChanged\",\n                        dominantSpeakerChanged: DominantSpeakerChanged.internalBinaryRead(reader, reader.uint32(), options, message.eventPayload.dominantSpeakerChanged)\n                    };\n                    break;\n                case /* stream.video.sfu.event.JoinResponse join_response */ 13:\n                    message.eventPayload = {\n                        oneofKind: \"joinResponse\",\n                        joinResponse: JoinResponse.internalBinaryRead(reader, reader.uint32(), options, message.eventPayload.joinResponse)\n                    };\n                    break;\n                case /* stream.video.sfu.event.HealthCheckResponse health_check_response */ 14:\n                    message.eventPayload = {\n                        oneofKind: \"healthCheckResponse\",\n                        healthCheckResponse: HealthCheckResponse.internalBinaryRead(reader, reader.uint32(), options, message.eventPayload.healthCheckResponse)\n                    };\n                    break;\n                case /* stream.video.sfu.event.TrackPublished track_published */ 16:\n                    message.eventPayload = {\n                        oneofKind: \"trackPublished\",\n                        trackPublished: TrackPublished.internalBinaryRead(reader, reader.uint32(), options, message.eventPayload.trackPublished)\n                    };\n                    break;\n                case /* stream.video.sfu.event.TrackUnpublished track_unpublished */ 17:\n                    message.eventPayload = {\n                        oneofKind: \"trackUnpublished\",\n                        trackUnpublished: TrackUnpublished.internalBinaryRead(reader, reader.uint32(), options, message.eventPayload.trackUnpublished)\n                    };\n                    break;\n                case /* stream.video.sfu.event.Error error */ 18:\n                    message.eventPayload = {\n                        oneofKind: \"error\",\n                        error: Error$1.internalBinaryRead(reader, reader.uint32(), options, message.eventPayload.error)\n                    };\n                    break;\n                case /* stream.video.sfu.event.CallGrantsUpdated call_grants_updated */ 19:\n                    message.eventPayload = {\n                        oneofKind: \"callGrantsUpdated\",\n                        callGrantsUpdated: CallGrantsUpdated.internalBinaryRead(reader, reader.uint32(), options, message.eventPayload.callGrantsUpdated)\n                    };\n                    break;\n                case /* stream.video.sfu.event.GoAway go_away */ 20:\n                    message.eventPayload = {\n                        oneofKind: \"goAway\",\n                        goAway: GoAway.internalBinaryRead(reader, reader.uint32(), options, message.eventPayload.goAway)\n                    };\n                    break;\n                case /* stream.video.sfu.event.ICERestart ice_restart */ 21:\n                    message.eventPayload = {\n                        oneofKind: \"iceRestart\",\n                        iceRestart: ICERestart.internalBinaryRead(reader, reader.uint32(), options, message.eventPayload.iceRestart)\n                    };\n                    break;\n                case /* stream.video.sfu.event.PinsChanged pins_updated */ 22:\n                    message.eventPayload = {\n                        oneofKind: \"pinsUpdated\",\n                        pinsUpdated: PinsChanged.internalBinaryRead(reader, reader.uint32(), options, message.eventPayload.pinsUpdated)\n                    };\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* stream.video.sfu.event.SubscriberOffer subscriber_offer = 1; */ if (message.eventPayload.oneofKind === \"subscriberOffer\") SubscriberOffer.internalBinaryWrite(message.eventPayload.subscriberOffer, writer.tag(1, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        /* stream.video.sfu.event.PublisherAnswer publisher_answer = 2; */ if (message.eventPayload.oneofKind === \"publisherAnswer\") PublisherAnswer.internalBinaryWrite(message.eventPayload.publisherAnswer, writer.tag(2, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        /* stream.video.sfu.event.ConnectionQualityChanged connection_quality_changed = 3; */ if (message.eventPayload.oneofKind === \"connectionQualityChanged\") ConnectionQualityChanged.internalBinaryWrite(message.eventPayload.connectionQualityChanged, writer.tag(3, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        /* stream.video.sfu.event.AudioLevelChanged audio_level_changed = 4; */ if (message.eventPayload.oneofKind === \"audioLevelChanged\") AudioLevelChanged.internalBinaryWrite(message.eventPayload.audioLevelChanged, writer.tag(4, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        /* stream.video.sfu.models.ICETrickle ice_trickle = 5; */ if (message.eventPayload.oneofKind === \"iceTrickle\") ICETrickle$1.internalBinaryWrite(message.eventPayload.iceTrickle, writer.tag(5, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        /* stream.video.sfu.event.ChangePublishQuality change_publish_quality = 6; */ if (message.eventPayload.oneofKind === \"changePublishQuality\") ChangePublishQuality.internalBinaryWrite(message.eventPayload.changePublishQuality, writer.tag(6, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        /* stream.video.sfu.event.ParticipantJoined participant_joined = 10; */ if (message.eventPayload.oneofKind === \"participantJoined\") ParticipantJoined.internalBinaryWrite(message.eventPayload.participantJoined, writer.tag(10, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        /* stream.video.sfu.event.ParticipantLeft participant_left = 11; */ if (message.eventPayload.oneofKind === \"participantLeft\") ParticipantLeft.internalBinaryWrite(message.eventPayload.participantLeft, writer.tag(11, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        /* stream.video.sfu.event.DominantSpeakerChanged dominant_speaker_changed = 12; */ if (message.eventPayload.oneofKind === \"dominantSpeakerChanged\") DominantSpeakerChanged.internalBinaryWrite(message.eventPayload.dominantSpeakerChanged, writer.tag(12, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        /* stream.video.sfu.event.JoinResponse join_response = 13; */ if (message.eventPayload.oneofKind === \"joinResponse\") JoinResponse.internalBinaryWrite(message.eventPayload.joinResponse, writer.tag(13, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        /* stream.video.sfu.event.HealthCheckResponse health_check_response = 14; */ if (message.eventPayload.oneofKind === \"healthCheckResponse\") HealthCheckResponse.internalBinaryWrite(message.eventPayload.healthCheckResponse, writer.tag(14, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        /* stream.video.sfu.event.TrackPublished track_published = 16; */ if (message.eventPayload.oneofKind === \"trackPublished\") TrackPublished.internalBinaryWrite(message.eventPayload.trackPublished, writer.tag(16, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        /* stream.video.sfu.event.TrackUnpublished track_unpublished = 17; */ if (message.eventPayload.oneofKind === \"trackUnpublished\") TrackUnpublished.internalBinaryWrite(message.eventPayload.trackUnpublished, writer.tag(17, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        /* stream.video.sfu.event.Error error = 18; */ if (message.eventPayload.oneofKind === \"error\") Error$1.internalBinaryWrite(message.eventPayload.error, writer.tag(18, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        /* stream.video.sfu.event.CallGrantsUpdated call_grants_updated = 19; */ if (message.eventPayload.oneofKind === \"callGrantsUpdated\") CallGrantsUpdated.internalBinaryWrite(message.eventPayload.callGrantsUpdated, writer.tag(19, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        /* stream.video.sfu.event.GoAway go_away = 20; */ if (message.eventPayload.oneofKind === \"goAway\") GoAway.internalBinaryWrite(message.eventPayload.goAway, writer.tag(20, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        /* stream.video.sfu.event.ICERestart ice_restart = 21; */ if (message.eventPayload.oneofKind === \"iceRestart\") ICERestart.internalBinaryWrite(message.eventPayload.iceRestart, writer.tag(21, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        /* stream.video.sfu.event.PinsChanged pins_updated = 22; */ if (message.eventPayload.oneofKind === \"pinsUpdated\") PinsChanged.internalBinaryWrite(message.eventPayload.pinsUpdated, writer.tag(22, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.SfuEvent\n */ const SfuEvent = new SfuEvent$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass PinsChanged$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.event.PinsChanged\", [\n            {\n                no: 1,\n                name: \"pins\",\n                kind: \"message\",\n                repeat: 1 /*RepeatType.PACKED*/ ,\n                T: ()=>Pin\n            }\n        ]);\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        message.pins = [];\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* repeated stream.video.sfu.models.Pin pins */ 1:\n                    message.pins.push(Pin.internalBinaryRead(reader, reader.uint32(), options));\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* repeated stream.video.sfu.models.Pin pins = 1; */ for(let i = 0; i < message.pins.length; i++)Pin.internalBinaryWrite(message.pins[i], writer.tag(1, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.PinsChanged\n */ const PinsChanged = new PinsChanged$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass Error$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.event.Error\", [\n            {\n                no: 4,\n                name: \"error\",\n                kind: \"message\",\n                T: ()=>Error$2\n            }\n        ]);\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* stream.video.sfu.models.Error error */ 4:\n                    message.error = Error$2.internalBinaryRead(reader, reader.uint32(), options, message.error);\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* stream.video.sfu.models.Error error = 4; */ if (message.error) Error$2.internalBinaryWrite(message.error, writer.tag(4, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.Error\n */ const Error$1 = new Error$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ICETrickle$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.event.ICETrickle\", [\n            {\n                no: 1,\n                name: \"peer_type\",\n                kind: \"enum\",\n                T: ()=>[\n                        \"stream.video.sfu.models.PeerType\",\n                        PeerType,\n                        \"PEER_TYPE_\"\n                    ]\n            },\n            {\n                no: 2,\n                name: \"ice_candidate\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            }\n        ]);\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        message.peerType = 0;\n        message.iceCandidate = \"\";\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* stream.video.sfu.models.PeerType peer_type */ 1:\n                    message.peerType = reader.int32();\n                    break;\n                case /* string ice_candidate */ 2:\n                    message.iceCandidate = reader.string();\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* stream.video.sfu.models.PeerType peer_type = 1; */ if (message.peerType !== 0) writer.tag(1, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.Varint).int32(message.peerType);\n        /* string ice_candidate = 2; */ if (message.iceCandidate !== \"\") writer.tag(2, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.iceCandidate);\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.ICETrickle\n */ const ICETrickle = new ICETrickle$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ICERestart$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.event.ICERestart\", [\n            {\n                no: 1,\n                name: \"peer_type\",\n                kind: \"enum\",\n                T: ()=>[\n                        \"stream.video.sfu.models.PeerType\",\n                        PeerType,\n                        \"PEER_TYPE_\"\n                    ]\n            }\n        ]);\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        message.peerType = 0;\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* stream.video.sfu.models.PeerType peer_type */ 1:\n                    message.peerType = reader.int32();\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* stream.video.sfu.models.PeerType peer_type = 1; */ if (message.peerType !== 0) writer.tag(1, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.Varint).int32(message.peerType);\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.ICERestart\n */ const ICERestart = new ICERestart$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass SfuRequest$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.event.SfuRequest\", [\n            {\n                no: 1,\n                name: \"join_request\",\n                kind: \"message\",\n                oneof: \"requestPayload\",\n                T: ()=>JoinRequest\n            },\n            {\n                no: 2,\n                name: \"health_check_request\",\n                kind: \"message\",\n                oneof: \"requestPayload\",\n                T: ()=>HealthCheckRequest\n            }\n        ]);\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        message.requestPayload = {\n            oneofKind: undefined\n        };\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* stream.video.sfu.event.JoinRequest join_request */ 1:\n                    message.requestPayload = {\n                        oneofKind: \"joinRequest\",\n                        joinRequest: JoinRequest.internalBinaryRead(reader, reader.uint32(), options, message.requestPayload.joinRequest)\n                    };\n                    break;\n                case /* stream.video.sfu.event.HealthCheckRequest health_check_request */ 2:\n                    message.requestPayload = {\n                        oneofKind: \"healthCheckRequest\",\n                        healthCheckRequest: HealthCheckRequest.internalBinaryRead(reader, reader.uint32(), options, message.requestPayload.healthCheckRequest)\n                    };\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* stream.video.sfu.event.JoinRequest join_request = 1; */ if (message.requestPayload.oneofKind === \"joinRequest\") JoinRequest.internalBinaryWrite(message.requestPayload.joinRequest, writer.tag(1, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        /* stream.video.sfu.event.HealthCheckRequest health_check_request = 2; */ if (message.requestPayload.oneofKind === \"healthCheckRequest\") HealthCheckRequest.internalBinaryWrite(message.requestPayload.healthCheckRequest, writer.tag(2, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.SfuRequest\n */ const SfuRequest = new SfuRequest$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass HealthCheckRequest$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.event.HealthCheckRequest\", []);\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        return target ?? this.create();\n    }\n    internalBinaryWrite(message, writer, options) {\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.HealthCheckRequest\n */ const HealthCheckRequest = new HealthCheckRequest$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass HealthCheckResponse$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.event.HealthCheckResponse\", [\n            {\n                no: 1,\n                name: \"participant_count\",\n                kind: \"message\",\n                T: ()=>ParticipantCount\n            }\n        ]);\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* stream.video.sfu.models.ParticipantCount participant_count */ 1:\n                    message.participantCount = ParticipantCount.internalBinaryRead(reader, reader.uint32(), options, message.participantCount);\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* stream.video.sfu.models.ParticipantCount participant_count = 1; */ if (message.participantCount) ParticipantCount.internalBinaryWrite(message.participantCount, writer.tag(1, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.HealthCheckResponse\n */ const HealthCheckResponse = new HealthCheckResponse$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass TrackPublished$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.event.TrackPublished\", [\n            {\n                no: 1,\n                name: \"user_id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 2,\n                name: \"session_id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 3,\n                name: \"type\",\n                kind: \"enum\",\n                T: ()=>[\n                        \"stream.video.sfu.models.TrackType\",\n                        TrackType,\n                        \"TRACK_TYPE_\"\n                    ]\n            },\n            {\n                no: 4,\n                name: \"participant\",\n                kind: \"message\",\n                T: ()=>Participant\n            }\n        ]);\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        message.userId = \"\";\n        message.sessionId = \"\";\n        message.type = 0;\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* string user_id */ 1:\n                    message.userId = reader.string();\n                    break;\n                case /* string session_id */ 2:\n                    message.sessionId = reader.string();\n                    break;\n                case /* stream.video.sfu.models.TrackType type */ 3:\n                    message.type = reader.int32();\n                    break;\n                case /* stream.video.sfu.models.Participant participant */ 4:\n                    message.participant = Participant.internalBinaryRead(reader, reader.uint32(), options, message.participant);\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* string user_id = 1; */ if (message.userId !== \"\") writer.tag(1, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.userId);\n        /* string session_id = 2; */ if (message.sessionId !== \"\") writer.tag(2, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.sessionId);\n        /* stream.video.sfu.models.TrackType type = 3; */ if (message.type !== 0) writer.tag(3, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.Varint).int32(message.type);\n        /* stream.video.sfu.models.Participant participant = 4; */ if (message.participant) Participant.internalBinaryWrite(message.participant, writer.tag(4, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.TrackPublished\n */ const TrackPublished = new TrackPublished$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass TrackUnpublished$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.event.TrackUnpublished\", [\n            {\n                no: 1,\n                name: \"user_id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 2,\n                name: \"session_id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 3,\n                name: \"type\",\n                kind: \"enum\",\n                T: ()=>[\n                        \"stream.video.sfu.models.TrackType\",\n                        TrackType,\n                        \"TRACK_TYPE_\"\n                    ]\n            },\n            {\n                no: 4,\n                name: \"cause\",\n                kind: \"enum\",\n                T: ()=>[\n                        \"stream.video.sfu.models.TrackUnpublishReason\",\n                        TrackUnpublishReason,\n                        \"TRACK_UNPUBLISH_REASON_\"\n                    ]\n            },\n            {\n                no: 5,\n                name: \"participant\",\n                kind: \"message\",\n                T: ()=>Participant\n            }\n        ]);\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        message.userId = \"\";\n        message.sessionId = \"\";\n        message.type = 0;\n        message.cause = 0;\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* string user_id */ 1:\n                    message.userId = reader.string();\n                    break;\n                case /* string session_id */ 2:\n                    message.sessionId = reader.string();\n                    break;\n                case /* stream.video.sfu.models.TrackType type */ 3:\n                    message.type = reader.int32();\n                    break;\n                case /* stream.video.sfu.models.TrackUnpublishReason cause */ 4:\n                    message.cause = reader.int32();\n                    break;\n                case /* stream.video.sfu.models.Participant participant */ 5:\n                    message.participant = Participant.internalBinaryRead(reader, reader.uint32(), options, message.participant);\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* string user_id = 1; */ if (message.userId !== \"\") writer.tag(1, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.userId);\n        /* string session_id = 2; */ if (message.sessionId !== \"\") writer.tag(2, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.sessionId);\n        /* stream.video.sfu.models.TrackType type = 3; */ if (message.type !== 0) writer.tag(3, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.Varint).int32(message.type);\n        /* stream.video.sfu.models.TrackUnpublishReason cause = 4; */ if (message.cause !== 0) writer.tag(4, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.Varint).int32(message.cause);\n        /* stream.video.sfu.models.Participant participant = 5; */ if (message.participant) Participant.internalBinaryWrite(message.participant, writer.tag(5, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.TrackUnpublished\n */ const TrackUnpublished = new TrackUnpublished$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass JoinRequest$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.event.JoinRequest\", [\n            {\n                no: 1,\n                name: \"token\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 2,\n                name: \"session_id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 3,\n                name: \"subscriber_sdp\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 4,\n                name: \"client_details\",\n                kind: \"message\",\n                T: ()=>ClientDetails\n            },\n            {\n                no: 5,\n                name: \"migration\",\n                kind: \"message\",\n                T: ()=>Migration\n            },\n            {\n                no: 6,\n                name: \"fast_reconnect\",\n                kind: \"scalar\",\n                T: 8 /*ScalarType.BOOL*/ \n            }\n        ]);\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        message.token = \"\";\n        message.sessionId = \"\";\n        message.subscriberSdp = \"\";\n        message.fastReconnect = false;\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* string token */ 1:\n                    message.token = reader.string();\n                    break;\n                case /* string session_id */ 2:\n                    message.sessionId = reader.string();\n                    break;\n                case /* string subscriber_sdp */ 3:\n                    message.subscriberSdp = reader.string();\n                    break;\n                case /* stream.video.sfu.models.ClientDetails client_details */ 4:\n                    message.clientDetails = ClientDetails.internalBinaryRead(reader, reader.uint32(), options, message.clientDetails);\n                    break;\n                case /* stream.video.sfu.event.Migration migration */ 5:\n                    message.migration = Migration.internalBinaryRead(reader, reader.uint32(), options, message.migration);\n                    break;\n                case /* bool fast_reconnect */ 6:\n                    message.fastReconnect = reader.bool();\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* string token = 1; */ if (message.token !== \"\") writer.tag(1, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.token);\n        /* string session_id = 2; */ if (message.sessionId !== \"\") writer.tag(2, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.sessionId);\n        /* string subscriber_sdp = 3; */ if (message.subscriberSdp !== \"\") writer.tag(3, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.subscriberSdp);\n        /* stream.video.sfu.models.ClientDetails client_details = 4; */ if (message.clientDetails) ClientDetails.internalBinaryWrite(message.clientDetails, writer.tag(4, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        /* stream.video.sfu.event.Migration migration = 5; */ if (message.migration) Migration.internalBinaryWrite(message.migration, writer.tag(5, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        /* bool fast_reconnect = 6; */ if (message.fastReconnect !== false) writer.tag(6, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.Varint).bool(message.fastReconnect);\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.JoinRequest\n */ const JoinRequest = new JoinRequest$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass Migration$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.event.Migration\", [\n            {\n                no: 1,\n                name: \"from_sfu_id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 2,\n                name: \"announced_tracks\",\n                kind: \"message\",\n                repeat: 1 /*RepeatType.PACKED*/ ,\n                T: ()=>TrackInfo\n            },\n            {\n                no: 3,\n                name: \"subscriptions\",\n                kind: \"message\",\n                repeat: 1 /*RepeatType.PACKED*/ ,\n                T: ()=>TrackSubscriptionDetails\n            }\n        ]);\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        message.fromSfuId = \"\";\n        message.announcedTracks = [];\n        message.subscriptions = [];\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* string from_sfu_id */ 1:\n                    message.fromSfuId = reader.string();\n                    break;\n                case /* repeated stream.video.sfu.models.TrackInfo announced_tracks */ 2:\n                    message.announcedTracks.push(TrackInfo.internalBinaryRead(reader, reader.uint32(), options));\n                    break;\n                case /* repeated stream.video.sfu.signal.TrackSubscriptionDetails subscriptions */ 3:\n                    message.subscriptions.push(TrackSubscriptionDetails.internalBinaryRead(reader, reader.uint32(), options));\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* string from_sfu_id = 1; */ if (message.fromSfuId !== \"\") writer.tag(1, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.fromSfuId);\n        /* repeated stream.video.sfu.models.TrackInfo announced_tracks = 2; */ for(let i = 0; i < message.announcedTracks.length; i++)TrackInfo.internalBinaryWrite(message.announcedTracks[i], writer.tag(2, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        /* repeated stream.video.sfu.signal.TrackSubscriptionDetails subscriptions = 3; */ for(let i = 0; i < message.subscriptions.length; i++)TrackSubscriptionDetails.internalBinaryWrite(message.subscriptions[i], writer.tag(3, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.Migration\n */ const Migration = new Migration$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass JoinResponse$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.event.JoinResponse\", [\n            {\n                no: 1,\n                name: \"call_state\",\n                kind: \"message\",\n                T: ()=>CallState$1\n            },\n            {\n                no: 2,\n                name: \"reconnected\",\n                kind: \"scalar\",\n                T: 8 /*ScalarType.BOOL*/ \n            }\n        ]);\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        message.reconnected = false;\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* stream.video.sfu.models.CallState call_state */ 1:\n                    message.callState = CallState$1.internalBinaryRead(reader, reader.uint32(), options, message.callState);\n                    break;\n                case /* bool reconnected */ 2:\n                    message.reconnected = reader.bool();\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* stream.video.sfu.models.CallState call_state = 1; */ if (message.callState) CallState$1.internalBinaryWrite(message.callState, writer.tag(1, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        /* bool reconnected = 2; */ if (message.reconnected !== false) writer.tag(2, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.Varint).bool(message.reconnected);\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.JoinResponse\n */ const JoinResponse = new JoinResponse$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ParticipantJoined$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.event.ParticipantJoined\", [\n            {\n                no: 1,\n                name: \"call_cid\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 2,\n                name: \"participant\",\n                kind: \"message\",\n                T: ()=>Participant\n            }\n        ]);\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        message.callCid = \"\";\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* string call_cid */ 1:\n                    message.callCid = reader.string();\n                    break;\n                case /* stream.video.sfu.models.Participant participant */ 2:\n                    message.participant = Participant.internalBinaryRead(reader, reader.uint32(), options, message.participant);\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* string call_cid = 1; */ if (message.callCid !== \"\") writer.tag(1, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.callCid);\n        /* stream.video.sfu.models.Participant participant = 2; */ if (message.participant) Participant.internalBinaryWrite(message.participant, writer.tag(2, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.ParticipantJoined\n */ const ParticipantJoined = new ParticipantJoined$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ParticipantLeft$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.event.ParticipantLeft\", [\n            {\n                no: 1,\n                name: \"call_cid\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 2,\n                name: \"participant\",\n                kind: \"message\",\n                T: ()=>Participant\n            }\n        ]);\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        message.callCid = \"\";\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* string call_cid */ 1:\n                    message.callCid = reader.string();\n                    break;\n                case /* stream.video.sfu.models.Participant participant */ 2:\n                    message.participant = Participant.internalBinaryRead(reader, reader.uint32(), options, message.participant);\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* string call_cid = 1; */ if (message.callCid !== \"\") writer.tag(1, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.callCid);\n        /* stream.video.sfu.models.Participant participant = 2; */ if (message.participant) Participant.internalBinaryWrite(message.participant, writer.tag(2, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.ParticipantLeft\n */ const ParticipantLeft = new ParticipantLeft$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass SubscriberOffer$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.event.SubscriberOffer\", [\n            {\n                no: 1,\n                name: \"ice_restart\",\n                kind: \"scalar\",\n                T: 8 /*ScalarType.BOOL*/ \n            },\n            {\n                no: 2,\n                name: \"sdp\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            }\n        ]);\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        message.iceRestart = false;\n        message.sdp = \"\";\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* bool ice_restart */ 1:\n                    message.iceRestart = reader.bool();\n                    break;\n                case /* string sdp */ 2:\n                    message.sdp = reader.string();\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* bool ice_restart = 1; */ if (message.iceRestart !== false) writer.tag(1, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.Varint).bool(message.iceRestart);\n        /* string sdp = 2; */ if (message.sdp !== \"\") writer.tag(2, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.sdp);\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.SubscriberOffer\n */ const SubscriberOffer = new SubscriberOffer$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass PublisherAnswer$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.event.PublisherAnswer\", [\n            {\n                no: 1,\n                name: \"sdp\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            }\n        ]);\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        message.sdp = \"\";\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* string sdp */ 1:\n                    message.sdp = reader.string();\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* string sdp = 1; */ if (message.sdp !== \"\") writer.tag(1, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.sdp);\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.PublisherAnswer\n */ const PublisherAnswer = new PublisherAnswer$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ConnectionQualityChanged$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.event.ConnectionQualityChanged\", [\n            {\n                no: 1,\n                name: \"connection_quality_updates\",\n                kind: \"message\",\n                repeat: 1 /*RepeatType.PACKED*/ ,\n                T: ()=>ConnectionQualityInfo\n            }\n        ]);\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        message.connectionQualityUpdates = [];\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* repeated stream.video.sfu.event.ConnectionQualityInfo connection_quality_updates */ 1:\n                    message.connectionQualityUpdates.push(ConnectionQualityInfo.internalBinaryRead(reader, reader.uint32(), options));\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* repeated stream.video.sfu.event.ConnectionQualityInfo connection_quality_updates = 1; */ for(let i = 0; i < message.connectionQualityUpdates.length; i++)ConnectionQualityInfo.internalBinaryWrite(message.connectionQualityUpdates[i], writer.tag(1, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.ConnectionQualityChanged\n */ const ConnectionQualityChanged = new ConnectionQualityChanged$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ConnectionQualityInfo$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.event.ConnectionQualityInfo\", [\n            {\n                no: 1,\n                name: \"user_id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 2,\n                name: \"session_id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 3,\n                name: \"connection_quality\",\n                kind: \"enum\",\n                T: ()=>[\n                        \"stream.video.sfu.models.ConnectionQuality\",\n                        ConnectionQuality,\n                        \"CONNECTION_QUALITY_\"\n                    ]\n            }\n        ]);\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        message.userId = \"\";\n        message.sessionId = \"\";\n        message.connectionQuality = 0;\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* string user_id */ 1:\n                    message.userId = reader.string();\n                    break;\n                case /* string session_id */ 2:\n                    message.sessionId = reader.string();\n                    break;\n                case /* stream.video.sfu.models.ConnectionQuality connection_quality */ 3:\n                    message.connectionQuality = reader.int32();\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* string user_id = 1; */ if (message.userId !== \"\") writer.tag(1, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.userId);\n        /* string session_id = 2; */ if (message.sessionId !== \"\") writer.tag(2, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.sessionId);\n        /* stream.video.sfu.models.ConnectionQuality connection_quality = 3; */ if (message.connectionQuality !== 0) writer.tag(3, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.Varint).int32(message.connectionQuality);\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.ConnectionQualityInfo\n */ const ConnectionQualityInfo = new ConnectionQualityInfo$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass DominantSpeakerChanged$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.event.DominantSpeakerChanged\", [\n            {\n                no: 1,\n                name: \"user_id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 2,\n                name: \"session_id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            }\n        ]);\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        message.userId = \"\";\n        message.sessionId = \"\";\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* string user_id */ 1:\n                    message.userId = reader.string();\n                    break;\n                case /* string session_id */ 2:\n                    message.sessionId = reader.string();\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* string user_id = 1; */ if (message.userId !== \"\") writer.tag(1, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.userId);\n        /* string session_id = 2; */ if (message.sessionId !== \"\") writer.tag(2, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.sessionId);\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.DominantSpeakerChanged\n */ const DominantSpeakerChanged = new DominantSpeakerChanged$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass AudioLevel$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.event.AudioLevel\", [\n            {\n                no: 1,\n                name: \"user_id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 2,\n                name: \"session_id\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 3,\n                name: \"level\",\n                kind: \"scalar\",\n                T: 2 /*ScalarType.FLOAT*/ \n            },\n            {\n                no: 4,\n                name: \"is_speaking\",\n                kind: \"scalar\",\n                T: 8 /*ScalarType.BOOL*/ \n            }\n        ]);\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        message.userId = \"\";\n        message.sessionId = \"\";\n        message.level = 0;\n        message.isSpeaking = false;\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* string user_id */ 1:\n                    message.userId = reader.string();\n                    break;\n                case /* string session_id */ 2:\n                    message.sessionId = reader.string();\n                    break;\n                case /* float level */ 3:\n                    message.level = reader.float();\n                    break;\n                case /* bool is_speaking */ 4:\n                    message.isSpeaking = reader.bool();\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* string user_id = 1; */ if (message.userId !== \"\") writer.tag(1, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.userId);\n        /* string session_id = 2; */ if (message.sessionId !== \"\") writer.tag(2, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.sessionId);\n        /* float level = 3; */ if (message.level !== 0) writer.tag(3, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.Bit32).float(message.level);\n        /* bool is_speaking = 4; */ if (message.isSpeaking !== false) writer.tag(4, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.Varint).bool(message.isSpeaking);\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.AudioLevel\n */ const AudioLevel = new AudioLevel$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass AudioLevelChanged$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.event.AudioLevelChanged\", [\n            {\n                no: 1,\n                name: \"audio_levels\",\n                kind: \"message\",\n                repeat: 1 /*RepeatType.PACKED*/ ,\n                T: ()=>AudioLevel\n            }\n        ]);\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        message.audioLevels = [];\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* repeated stream.video.sfu.event.AudioLevel audio_levels */ 1:\n                    message.audioLevels.push(AudioLevel.internalBinaryRead(reader, reader.uint32(), options));\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* repeated stream.video.sfu.event.AudioLevel audio_levels = 1; */ for(let i = 0; i < message.audioLevels.length; i++)AudioLevel.internalBinaryWrite(message.audioLevels[i], writer.tag(1, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.AudioLevelChanged\n */ const AudioLevelChanged = new AudioLevelChanged$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass AudioMediaRequest$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.event.AudioMediaRequest\", [\n            {\n                no: 1,\n                name: \"channel_count\",\n                kind: \"scalar\",\n                T: 5 /*ScalarType.INT32*/ \n            }\n        ]);\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        message.channelCount = 0;\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* int32 channel_count */ 1:\n                    message.channelCount = reader.int32();\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* int32 channel_count = 1; */ if (message.channelCount !== 0) writer.tag(1, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.Varint).int32(message.channelCount);\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.AudioMediaRequest\n */ const AudioMediaRequest = new AudioMediaRequest$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass AudioSender$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.event.AudioSender\", [\n            {\n                no: 1,\n                name: \"media_request\",\n                kind: \"message\",\n                T: ()=>AudioMediaRequest\n            },\n            {\n                no: 2,\n                name: \"codec\",\n                kind: \"message\",\n                T: ()=>Codec\n            }\n        ]);\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* stream.video.sfu.event.AudioMediaRequest media_request */ 1:\n                    message.mediaRequest = AudioMediaRequest.internalBinaryRead(reader, reader.uint32(), options, message.mediaRequest);\n                    break;\n                case /* stream.video.sfu.models.Codec codec */ 2:\n                    message.codec = Codec.internalBinaryRead(reader, reader.uint32(), options, message.codec);\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* stream.video.sfu.event.AudioMediaRequest media_request = 1; */ if (message.mediaRequest) AudioMediaRequest.internalBinaryWrite(message.mediaRequest, writer.tag(1, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        /* stream.video.sfu.models.Codec codec = 2; */ if (message.codec) Codec.internalBinaryWrite(message.codec, writer.tag(2, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.AudioSender\n */ const AudioSender = new AudioSender$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass VideoMediaRequest$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.event.VideoMediaRequest\", [\n            {\n                no: 1,\n                name: \"ideal_height\",\n                kind: \"scalar\",\n                T: 5 /*ScalarType.INT32*/ \n            },\n            {\n                no: 2,\n                name: \"ideal_width\",\n                kind: \"scalar\",\n                T: 5 /*ScalarType.INT32*/ \n            },\n            {\n                no: 3,\n                name: \"ideal_frame_rate\",\n                kind: \"scalar\",\n                T: 5 /*ScalarType.INT32*/ \n            }\n        ]);\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        message.idealHeight = 0;\n        message.idealWidth = 0;\n        message.idealFrameRate = 0;\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* int32 ideal_height */ 1:\n                    message.idealHeight = reader.int32();\n                    break;\n                case /* int32 ideal_width */ 2:\n                    message.idealWidth = reader.int32();\n                    break;\n                case /* int32 ideal_frame_rate */ 3:\n                    message.idealFrameRate = reader.int32();\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* int32 ideal_height = 1; */ if (message.idealHeight !== 0) writer.tag(1, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.Varint).int32(message.idealHeight);\n        /* int32 ideal_width = 2; */ if (message.idealWidth !== 0) writer.tag(2, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.Varint).int32(message.idealWidth);\n        /* int32 ideal_frame_rate = 3; */ if (message.idealFrameRate !== 0) writer.tag(3, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.Varint).int32(message.idealFrameRate);\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.VideoMediaRequest\n */ const VideoMediaRequest = new VideoMediaRequest$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass VideoLayerSetting$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.event.VideoLayerSetting\", [\n            {\n                no: 1,\n                name: \"name\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            },\n            {\n                no: 2,\n                name: \"active\",\n                kind: \"scalar\",\n                T: 8 /*ScalarType.BOOL*/ \n            },\n            {\n                no: 3,\n                name: \"max_bitrate\",\n                kind: \"scalar\",\n                T: 5 /*ScalarType.INT32*/ \n            },\n            {\n                no: 4,\n                name: \"scale_resolution_down_by\",\n                kind: \"scalar\",\n                T: 2 /*ScalarType.FLOAT*/ \n            },\n            {\n                no: 5,\n                name: \"priority\",\n                kind: \"enum\",\n                T: ()=>[\n                        \"stream.video.sfu.event.VideoLayerSetting.Priority\",\n                        VideoLayerSetting_Priority,\n                        \"PRIORITY_\"\n                    ]\n            },\n            {\n                no: 6,\n                name: \"codec\",\n                kind: \"message\",\n                T: ()=>Codec\n            },\n            {\n                no: 7,\n                name: \"max_framerate\",\n                kind: \"scalar\",\n                T: 13 /*ScalarType.UINT32*/ \n            }\n        ]);\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        message.name = \"\";\n        message.active = false;\n        message.maxBitrate = 0;\n        message.scaleResolutionDownBy = 0;\n        message.priority = 0;\n        message.maxFramerate = 0;\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* string name */ 1:\n                    message.name = reader.string();\n                    break;\n                case /* bool active */ 2:\n                    message.active = reader.bool();\n                    break;\n                case /* int32 max_bitrate */ 3:\n                    message.maxBitrate = reader.int32();\n                    break;\n                case /* float scale_resolution_down_by */ 4:\n                    message.scaleResolutionDownBy = reader.float();\n                    break;\n                case /* stream.video.sfu.event.VideoLayerSetting.Priority priority */ 5:\n                    message.priority = reader.int32();\n                    break;\n                case /* stream.video.sfu.models.Codec codec */ 6:\n                    message.codec = Codec.internalBinaryRead(reader, reader.uint32(), options, message.codec);\n                    break;\n                case /* uint32 max_framerate */ 7:\n                    message.maxFramerate = reader.uint32();\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* string name = 1; */ if (message.name !== \"\") writer.tag(1, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.name);\n        /* bool active = 2; */ if (message.active !== false) writer.tag(2, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.Varint).bool(message.active);\n        /* int32 max_bitrate = 3; */ if (message.maxBitrate !== 0) writer.tag(3, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.Varint).int32(message.maxBitrate);\n        /* float scale_resolution_down_by = 4; */ if (message.scaleResolutionDownBy !== 0) writer.tag(4, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.Bit32).float(message.scaleResolutionDownBy);\n        /* stream.video.sfu.event.VideoLayerSetting.Priority priority = 5; */ if (message.priority !== 0) writer.tag(5, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.Varint).int32(message.priority);\n        /* stream.video.sfu.models.Codec codec = 6; */ if (message.codec) Codec.internalBinaryWrite(message.codec, writer.tag(6, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        /* uint32 max_framerate = 7; */ if (message.maxFramerate !== 0) writer.tag(7, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.Varint).uint32(message.maxFramerate);\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.VideoLayerSetting\n */ const VideoLayerSetting = new VideoLayerSetting$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass VideoSender$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.event.VideoSender\", [\n            {\n                no: 1,\n                name: \"media_request\",\n                kind: \"message\",\n                T: ()=>VideoMediaRequest\n            },\n            {\n                no: 2,\n                name: \"codec\",\n                kind: \"message\",\n                T: ()=>Codec\n            },\n            {\n                no: 3,\n                name: \"layers\",\n                kind: \"message\",\n                repeat: 1 /*RepeatType.PACKED*/ ,\n                T: ()=>VideoLayerSetting\n            }\n        ]);\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        message.layers = [];\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* stream.video.sfu.event.VideoMediaRequest media_request */ 1:\n                    message.mediaRequest = VideoMediaRequest.internalBinaryRead(reader, reader.uint32(), options, message.mediaRequest);\n                    break;\n                case /* stream.video.sfu.models.Codec codec */ 2:\n                    message.codec = Codec.internalBinaryRead(reader, reader.uint32(), options, message.codec);\n                    break;\n                case /* repeated stream.video.sfu.event.VideoLayerSetting layers */ 3:\n                    message.layers.push(VideoLayerSetting.internalBinaryRead(reader, reader.uint32(), options));\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* stream.video.sfu.event.VideoMediaRequest media_request = 1; */ if (message.mediaRequest) VideoMediaRequest.internalBinaryWrite(message.mediaRequest, writer.tag(1, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        /* stream.video.sfu.models.Codec codec = 2; */ if (message.codec) Codec.internalBinaryWrite(message.codec, writer.tag(2, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        /* repeated stream.video.sfu.event.VideoLayerSetting layers = 3; */ for(let i = 0; i < message.layers.length; i++)VideoLayerSetting.internalBinaryWrite(message.layers[i], writer.tag(3, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.VideoSender\n */ const VideoSender = new VideoSender$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass ChangePublishQuality$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.event.ChangePublishQuality\", [\n            {\n                no: 1,\n                name: \"audio_senders\",\n                kind: \"message\",\n                repeat: 1 /*RepeatType.PACKED*/ ,\n                T: ()=>AudioSender\n            },\n            {\n                no: 2,\n                name: \"video_senders\",\n                kind: \"message\",\n                repeat: 1 /*RepeatType.PACKED*/ ,\n                T: ()=>VideoSender\n            }\n        ]);\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        message.audioSenders = [];\n        message.videoSenders = [];\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* repeated stream.video.sfu.event.AudioSender audio_senders */ 1:\n                    message.audioSenders.push(AudioSender.internalBinaryRead(reader, reader.uint32(), options));\n                    break;\n                case /* repeated stream.video.sfu.event.VideoSender video_senders */ 2:\n                    message.videoSenders.push(VideoSender.internalBinaryRead(reader, reader.uint32(), options));\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* repeated stream.video.sfu.event.AudioSender audio_senders = 1; */ for(let i = 0; i < message.audioSenders.length; i++)AudioSender.internalBinaryWrite(message.audioSenders[i], writer.tag(1, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        /* repeated stream.video.sfu.event.VideoSender video_senders = 2; */ for(let i = 0; i < message.videoSenders.length; i++)VideoSender.internalBinaryWrite(message.videoSenders[i], writer.tag(2, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.ChangePublishQuality\n */ const ChangePublishQuality = new ChangePublishQuality$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass CallGrantsUpdated$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.event.CallGrantsUpdated\", [\n            {\n                no: 1,\n                name: \"current_grants\",\n                kind: \"message\",\n                T: ()=>CallGrants\n            },\n            {\n                no: 2,\n                name: \"message\",\n                kind: \"scalar\",\n                T: 9 /*ScalarType.STRING*/ \n            }\n        ]);\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        message.message = \"\";\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* stream.video.sfu.models.CallGrants current_grants */ 1:\n                    message.currentGrants = CallGrants.internalBinaryRead(reader, reader.uint32(), options, message.currentGrants);\n                    break;\n                case /* string message */ 2:\n                    message.message = reader.string();\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* stream.video.sfu.models.CallGrants current_grants = 1; */ if (message.currentGrants) CallGrants.internalBinaryWrite(message.currentGrants, writer.tag(1, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).fork(), options).join();\n        /* string message = 2; */ if (message.message !== \"\") writer.tag(2, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.LengthDelimited).string(message.message);\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.CallGrantsUpdated\n */ const CallGrantsUpdated = new CallGrantsUpdated$Type();\n// @generated message type with reflection information, may provide speed optimized methods\nclass GoAway$Type extends _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_9__.MessageType {\n    constructor(){\n        super(\"stream.video.sfu.event.GoAway\", [\n            {\n                no: 1,\n                name: \"reason\",\n                kind: \"enum\",\n                T: ()=>[\n                        \"stream.video.sfu.models.GoAwayReason\",\n                        GoAwayReason,\n                        \"GO_AWAY_REASON_\"\n                    ]\n            }\n        ]);\n    }\n    create(value) {\n        const message = globalThis.Object.create(this.messagePrototype);\n        message.reason = 0;\n        if (value !== undefined) (0,_protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_11__.reflectionMergePartial)(this, message, value);\n        return message;\n    }\n    internalBinaryRead(reader, length, options, target) {\n        let message = target ?? this.create(), end = reader.pos + length;\n        while(reader.pos < end){\n            let [fieldNo, wireType] = reader.tag();\n            switch(fieldNo){\n                case /* stream.video.sfu.models.GoAwayReason reason */ 1:\n                    message.reason = reader.int32();\n                    break;\n                default:\n                    let u = options.readUnknownField;\n                    if (u === \"throw\") throw new globalThis.Error(`Unknown field ${fieldNo} (wire type ${wireType}) for ${this.typeName}`);\n                    let d = reader.skip(wireType);\n                    if (u !== false) (u === true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onRead : u)(this.typeName, message, fieldNo, wireType, d);\n            }\n        }\n        return message;\n    }\n    internalBinaryWrite(message, writer, options) {\n        /* stream.video.sfu.models.GoAwayReason reason = 1; */ if (message.reason !== 0) writer.tag(1, _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.WireType.Varint).int32(message.reason);\n        let u = options.writeUnknownFields;\n        if (u !== false) (u == true ? _protobuf_ts_runtime__WEBPACK_IMPORTED_MODULE_12__.UnknownFieldHandler.onWrite : u)(this.typeName, message, writer);\n        return writer;\n    }\n}\n/**\n * @generated MessageType for protobuf message stream.video.sfu.event.GoAway\n */ const GoAway = new GoAway$Type();\nvar events = /*#__PURE__*/ Object.freeze({\n    __proto__: null,\n    AudioLevel: AudioLevel,\n    AudioLevelChanged: AudioLevelChanged,\n    AudioMediaRequest: AudioMediaRequest,\n    AudioSender: AudioSender,\n    CallGrantsUpdated: CallGrantsUpdated,\n    ChangePublishQuality: ChangePublishQuality,\n    ConnectionQualityChanged: ConnectionQualityChanged,\n    ConnectionQualityInfo: ConnectionQualityInfo,\n    DominantSpeakerChanged: DominantSpeakerChanged,\n    Error: Error$1,\n    GoAway: GoAway,\n    HealthCheckRequest: HealthCheckRequest,\n    HealthCheckResponse: HealthCheckResponse,\n    ICERestart: ICERestart,\n    ICETrickle: ICETrickle,\n    JoinRequest: JoinRequest,\n    JoinResponse: JoinResponse,\n    Migration: Migration,\n    ParticipantJoined: ParticipantJoined,\n    ParticipantLeft: ParticipantLeft,\n    PinsChanged: PinsChanged,\n    PublisherAnswer: PublisherAnswer,\n    SfuEvent: SfuEvent,\n    SfuRequest: SfuRequest,\n    SubscriberOffer: SubscriberOffer,\n    TrackPublished: TrackPublished,\n    TrackUnpublished: TrackUnpublished,\n    VideoLayerSetting: VideoLayerSetting,\n    get VideoLayerSetting_Priority () {\n        return VideoLayerSetting_Priority;\n    },\n    VideoMediaRequest: VideoMediaRequest,\n    VideoSender: VideoSender\n});\nvar VisibilityState;\n(function(VisibilityState) {\n    VisibilityState[\"UNKNOWN\"] = \"UNKNOWN\";\n    VisibilityState[\"VISIBLE\"] = \"VISIBLE\";\n    VisibilityState[\"INVISIBLE\"] = \"INVISIBLE\";\n})(VisibilityState || (VisibilityState = {}));\nvar DebounceType;\n(function(DebounceType) {\n    DebounceType[DebounceType[\"IMMEDIATE\"] = 20] = \"IMMEDIATE\";\n    DebounceType[DebounceType[\"FAST\"] = 100] = \"FAST\";\n    DebounceType[DebounceType[\"MEDIUM\"] = 600] = \"MEDIUM\";\n    DebounceType[DebounceType[\"SLOW\"] = 1200] = \"SLOW\";\n})(DebounceType || (DebounceType = {}));\n/**\n * @generated from protobuf service stream.video.sfu.signal.SignalServer\n */ class SignalServerClient {\n    constructor(_transport){\n        this._transport = _transport;\n        this.typeName = SignalServer.typeName;\n        this.methods = SignalServer.methods;\n        this.options = SignalServer.options;\n    }\n    /**\n     * SetPublisher sends the WebRTC offer for the peer connection used to publish A/V\n     *\n     * @generated from protobuf rpc: SetPublisher(stream.video.sfu.signal.SetPublisherRequest) returns (stream.video.sfu.signal.SetPublisherResponse);\n     */ setPublisher(input, options) {\n        const method = this.methods[0], opt = this._transport.mergeOptions(options);\n        return (0,_protobuf_ts_runtime_rpc__WEBPACK_IMPORTED_MODULE_15__.stackIntercept)(\"unary\", this._transport, method, opt, input);\n    }\n    /**\n     * answer is sent by the client to the SFU after receiving a subscriber_offer.\n     *\n     * @generated from protobuf rpc: SendAnswer(stream.video.sfu.signal.SendAnswerRequest) returns (stream.video.sfu.signal.SendAnswerResponse);\n     */ sendAnswer(input, options) {\n        const method = this.methods[1], opt = this._transport.mergeOptions(options);\n        return (0,_protobuf_ts_runtime_rpc__WEBPACK_IMPORTED_MODULE_15__.stackIntercept)(\"unary\", this._transport, method, opt, input);\n    }\n    /**\n     * SendICECandidate sends an ICE candidate to the client\n     *\n     * @generated from protobuf rpc: IceTrickle(stream.video.sfu.models.ICETrickle) returns (stream.video.sfu.signal.ICETrickleResponse);\n     */ iceTrickle(input, options) {\n        const method = this.methods[2], opt = this._transport.mergeOptions(options);\n        return (0,_protobuf_ts_runtime_rpc__WEBPACK_IMPORTED_MODULE_15__.stackIntercept)(\"unary\", this._transport, method, opt, input);\n    }\n    /**\n     * UpdateSubscribers is used to notify the SFU about the list of video subscriptions\n     * TODO: sync subscriptions based on this + update tracks using the dimension info sent by the user\n     *\n     * @generated from protobuf rpc: UpdateSubscriptions(stream.video.sfu.signal.UpdateSubscriptionsRequest) returns (stream.video.sfu.signal.UpdateSubscriptionsResponse);\n     */ updateSubscriptions(input, options) {\n        const method = this.methods[3], opt = this._transport.mergeOptions(options);\n        return (0,_protobuf_ts_runtime_rpc__WEBPACK_IMPORTED_MODULE_15__.stackIntercept)(\"unary\", this._transport, method, opt, input);\n    }\n    /**\n     * @generated from protobuf rpc: UpdateMuteStates(stream.video.sfu.signal.UpdateMuteStatesRequest) returns (stream.video.sfu.signal.UpdateMuteStatesResponse);\n     */ updateMuteStates(input, options) {\n        const method = this.methods[4], opt = this._transport.mergeOptions(options);\n        return (0,_protobuf_ts_runtime_rpc__WEBPACK_IMPORTED_MODULE_15__.stackIntercept)(\"unary\", this._transport, method, opt, input);\n    }\n    /**\n     * @generated from protobuf rpc: IceRestart(stream.video.sfu.signal.ICERestartRequest) returns (stream.video.sfu.signal.ICERestartResponse);\n     */ iceRestart(input, options) {\n        const method = this.methods[5], opt = this._transport.mergeOptions(options);\n        return (0,_protobuf_ts_runtime_rpc__WEBPACK_IMPORTED_MODULE_15__.stackIntercept)(\"unary\", this._transport, method, opt, input);\n    }\n}\nconst defaultOptions = {\n    baseUrl: \"\",\n    sendJson: true,\n    timeout: 5 * 1000,\n    jsonOptions: {\n        ignoreUnknownFields: true\n    }\n};\nconst withHeaders = (headers)=>{\n    return {\n        interceptUnary (next, method, input, options) {\n            options.meta = {\n                ...options.meta,\n                ...headers\n            };\n            return next(method, input, options);\n        }\n    };\n};\n/**\n * Creates new SignalServerClient instance.\n *\n * @param options the twirp options.\n */ const createSignalClient = (options)=>{\n    const transport = new _protobuf_ts_twirp_transport__WEBPACK_IMPORTED_MODULE_16__.TwirpFetchTransport({\n        ...defaultOptions,\n        ...options\n    });\n    return new SignalServerClient(transport);\n};\n/**\n * Checks whether we are using React Native\n */ const isReactNative = ()=>{\n    if (typeof navigator === \"undefined\") return false;\n    return navigator.product?.toLowerCase() === \"reactnative\";\n};\n// log levels, sorted by verbosity\nconst logLevels = Object.freeze({\n    trace: 0,\n    debug: 1,\n    info: 2,\n    warn: 3,\n    error: 4\n});\nlet logger$4;\nlet level = \"info\";\nconst logToConsole = (logLevel, message, ...args)=>{\n    let logMethod;\n    switch(logLevel){\n        case \"error\":\n            logMethod = console.error;\n            break;\n        case \"warn\":\n            if (isReactNative()) {\n                message = `WARN: ${message}`;\n                logMethod = console.info;\n                break;\n            }\n            logMethod = console.warn;\n            break;\n        case \"info\":\n            logMethod = console.info;\n            break;\n        case \"trace\":\n            logMethod = console.trace;\n            break;\n        default:\n            logMethod = console.log;\n            break;\n    }\n    logMethod(message, ...args);\n};\nconst setLogger = (l, lvl)=>{\n    logger$4 = l;\n    if (lvl) {\n        setLogLevel(lvl);\n    }\n};\nconst setLogLevel = (l)=>{\n    level = l;\n};\nconst getLogger = (withTags)=>{\n    const loggerMethod = logger$4 || logToConsole;\n    const tags = (withTags || []).join(\":\");\n    const result = (logLevel, message, ...args)=>{\n        if (logLevels[logLevel] >= logLevels[level]) {\n            loggerMethod(logLevel, `[${tags}]: ${message}`, ...args);\n        }\n    };\n    return result;\n};\nconst getPreferredCodecs = (kind, preferredCodec, codecToRemove)=>{\n    const logger = getLogger([\n        \"codecs\"\n    ]);\n    if (!(\"getCapabilities\" in RTCRtpSender)) {\n        logger?.(\"warn\", \"RTCRtpSender.getCapabilities is not supported\");\n        return;\n    }\n    const cap = RTCRtpSender.getCapabilities(kind);\n    if (!cap) return;\n    const matched = [];\n    const partialMatched = [];\n    const unmatched = [];\n    cap.codecs.forEach((c)=>{\n        const codec = c.mimeType.toLowerCase();\n        logger?.(\"debug\", `Found supported codec: ${codec}`);\n        const shouldRemoveCodec = codecToRemove && codec === `${kind}/${codecToRemove.toLowerCase()}`;\n        if (shouldRemoveCodec) return;\n        const matchesCodec = codec === `${kind}/${preferredCodec.toLowerCase()}`;\n        if (!matchesCodec) {\n            unmatched.push(c);\n            return;\n        }\n        // for h264 codecs that have sdpFmtpLine available, use only if the\n        // profile-level-id is 42e01f for cross-browser compatibility\n        if (codec === \"h264\") {\n            if (c.sdpFmtpLine && c.sdpFmtpLine.includes(\"profile-level-id=42e01f\")) {\n                matched.push(c);\n            } else {\n                partialMatched.push(c);\n            }\n            return;\n        }\n        matched.push(c);\n    });\n    const result = [\n        ...matched,\n        ...partialMatched,\n        ...unmatched\n    ];\n    logger?.(\"info\", `Preffered codecs: `, result);\n    return result;\n};\nconst getGenericSdp = async (direction)=>{\n    const tempPc = new RTCPeerConnection();\n    tempPc.addTransceiver(\"video\", {\n        direction\n    });\n    tempPc.addTransceiver(\"audio\", {\n        direction\n    });\n    const offer = await tempPc.createOffer();\n    let sdp = offer.sdp ?? \"\";\n    tempPc.getTransceivers().forEach((t)=>{\n        t.stop();\n    });\n    tempPc.close();\n    return sdp;\n};\nconst sfuEventKinds = {\n    subscriberOffer: undefined,\n    publisherAnswer: undefined,\n    connectionQualityChanged: undefined,\n    audioLevelChanged: undefined,\n    iceTrickle: undefined,\n    changePublishQuality: undefined,\n    participantJoined: undefined,\n    participantLeft: undefined,\n    dominantSpeakerChanged: undefined,\n    joinResponse: undefined,\n    healthCheckResponse: undefined,\n    trackPublished: undefined,\n    trackUnpublished: undefined,\n    error: undefined,\n    callGrantsUpdated: undefined,\n    goAway: undefined,\n    iceRestart: undefined,\n    pinsUpdated: undefined\n};\nconst isSfuEvent = (eventName)=>{\n    return Object.prototype.hasOwnProperty.call(sfuEventKinds, eventName);\n};\nclass Dispatcher {\n    constructor(){\n        this.logger = getLogger([\n            \"Dispatcher\"\n        ]);\n        this.subscribers = {};\n        this.dispatch = (message)=>{\n            const eventKind = message.eventPayload.oneofKind;\n            if (!eventKind) return;\n            const payload = message.eventPayload[eventKind];\n            this.logger(\"debug\", `Dispatching ${eventKind}`, payload);\n            const listeners = this.subscribers[eventKind];\n            if (!listeners) return;\n            for (const fn of listeners){\n                try {\n                    fn(payload);\n                } catch (e) {\n                    this.logger(\"warn\", \"Listener failed with error\", e);\n                }\n            }\n        };\n        this.on = (eventName, fn)=>{\n            var _a;\n            ((_a = this.subscribers)[eventName] ?? (_a[eventName] = [])).push(fn);\n            return ()=>{\n                this.off(eventName, fn);\n            };\n        };\n        this.off = (eventName, fn)=>{\n            this.subscribers[eventName] = (this.subscribers[eventName] || []).filter((f)=>f !== fn);\n        };\n        this.offAll = (eventName)=>{\n            if (eventName) {\n                this.subscribers[eventName] = [];\n            } else {\n                this.subscribers = {};\n            }\n        };\n    }\n}\n/**\n * A buffer for ICE Candidates. Used for ICE Trickle:\n * - https://bloggeek.me/webrtcglossary/trickle-ice/\n */ class IceTrickleBuffer {\n    constructor(){\n        this.subscriberCandidates = new _barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_17__.ReplaySubject();\n        this.publisherCandidates = new _barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_17__.ReplaySubject();\n        this.logger = getLogger([\n            \"sfu-client\"\n        ]);\n        this.push = (iceTrickle)=>{\n            if (iceTrickle.peerType === PeerType.SUBSCRIBER) {\n                this.subscriberCandidates.next(iceTrickle);\n            } else if (iceTrickle.peerType === PeerType.PUBLISHER_UNSPECIFIED) {\n                this.publisherCandidates.next(iceTrickle);\n            } else {\n                this.logger(\"warn\", `ICETrickle, Unknown peer type`, iceTrickle);\n            }\n        };\n    }\n}\nfunction getIceCandidate(candidate) {\n    if (!candidate.usernameFragment) {\n        // react-native-webrtc doesn't include usernameFragment in the candidate\n        const splittedCandidate = candidate.candidate.split(\" \");\n        const ufragIndex = splittedCandidate.findIndex((s)=>s === \"ufrag\") + 1;\n        const usernameFragment = splittedCandidate[ufragIndex];\n        return JSON.stringify({\n            ...candidate,\n            usernameFragment\n        });\n    } else {\n        return JSON.stringify(candidate.toJSON());\n    }\n}\nlet sdkInfo;\nlet osInfo;\nlet deviceInfo;\nconst setSdkInfo = (info)=>{\n    sdkInfo = info;\n};\nconst getSdkInfo = ()=>{\n    return sdkInfo;\n};\nconst setOSInfo = (info)=>{\n    osInfo = info;\n};\nconst getOSInfo = ()=>{\n    return osInfo;\n};\nconst setDeviceInfo = (info)=>{\n    deviceInfo = info;\n};\nconst getDeviceInfo = ()=>{\n    return deviceInfo;\n};\nconst getClientDetails = ()=>{\n    if (isReactNative()) {\n        // Since RN doesn't support web, sharing browser info is not required\n        return {\n            sdk: getSdkInfo(),\n            os: getOSInfo(),\n            device: getDeviceInfo()\n        };\n    }\n    const userAgent = new ua_parser_js__WEBPACK_IMPORTED_MODULE_3__.UAParser(navigator.userAgent);\n    const { browser, os, device, cpu } = userAgent.getResult();\n    return {\n        sdk: getSdkInfo(),\n        browser: {\n            name: browser.name || navigator.userAgent,\n            version: browser.version || \"\"\n        },\n        os: {\n            name: os.name || \"\",\n            version: os.version || \"\",\n            architecture: cpu.architecture || \"\"\n        },\n        device: {\n            name: `${device.vendor || \"\"} ${device.model || \"\"} ${device.type || \"\"}`,\n            version: \"\"\n        }\n    };\n};\nconst DEFAULT_BITRATE = 1250000;\nconst defaultTargetResolution = {\n    bitrate: DEFAULT_BITRATE,\n    width: 1280,\n    height: 720\n};\n/**\n * Determines the most optimal video layers for simulcasting\n * for the given track.\n *\n * @param videoTrack the video track to find optimal layers for.\n * @param targetResolution the expected target resolution.\n */ const findOptimalVideoLayers = (videoTrack, targetResolution = defaultTargetResolution)=>{\n    const optimalVideoLayers = [];\n    const settings = videoTrack.getSettings();\n    const { width: w = 0, height: h = 0 } = settings;\n    const isRNIos = isReactNative() && getOSInfo()?.name.toLowerCase() === \"ios\";\n    const maxBitrate = getComputedMaxBitrate(targetResolution, w, h);\n    let downscaleFactor = 1;\n    [\n        \"f\",\n        \"h\",\n        \"q\"\n    ].forEach((rid)=>{\n        // Reversing the order [f, h, q] to [q, h, f] as Chrome uses encoding index\n        // when deciding which layer to disable when CPU or bandwidth is constrained.\n        // Encodings should be ordered in increasing spatial resolution order.\n        optimalVideoLayers.unshift({\n            active: true,\n            rid,\n            width: Math.round(w / downscaleFactor),\n            height: Math.round(h / downscaleFactor),\n            maxBitrate: Math.round(maxBitrate / downscaleFactor),\n            scaleResolutionDownBy: downscaleFactor,\n            // Simulcast on iOS React-Native requires all encodings to share the same framerate\n            maxFramerate: {\n                f: 30,\n                h: isRNIos ? 30 : 25,\n                q: isRNIos ? 30 : 20\n            }[rid]\n        });\n        downscaleFactor *= 2;\n    });\n    // for simplicity, we start with all layers enabled, then this function\n    // will clear/reassign the layers that are not needed\n    return withSimulcastConstraints(settings, optimalVideoLayers);\n};\n/**\n * Computes the maximum bitrate for a given resolution.\n * If the current resolution is lower than the target resolution,\n * we want to proportionally reduce the target bitrate.\n * If the current resolution is higher than the target resolution,\n * we want to use the target bitrate.\n *\n * @param targetResolution the target resolution.\n * @param currentWidth the current width of the track.\n * @param currentHeight the current height of the track.\n */ const getComputedMaxBitrate = (targetResolution, currentWidth, currentHeight)=>{\n    // if the current resolution is lower than the target resolution,\n    // we want to proportionally reduce the target bitrate\n    const { width: targetWidth, height: targetHeight } = targetResolution;\n    if (currentWidth < targetWidth || currentHeight < targetHeight) {\n        const currentPixels = currentWidth * currentHeight;\n        const targetPixels = targetWidth * targetHeight;\n        const reductionFactor = currentPixels / targetPixels;\n        return Math.round(targetResolution.bitrate * reductionFactor);\n    }\n    return targetResolution.bitrate;\n};\n/**\n * Browsers have different simulcast constraints for different video resolutions.\n *\n * This function modifies the provided list of video layers according to the\n * current implementation of simulcast constraints in the Chromium based browsers.\n *\n * https://chromium.googlesource.com/external/webrtc/+/refs/heads/main/media/engine/simulcast.cc#90\n */ const withSimulcastConstraints = (settings, optimalVideoLayers)=>{\n    let layers;\n    const size = Math.max(settings.width || 0, settings.height || 0);\n    if (size <= 320) {\n        // provide only one layer 320x240 (q), the one with the highest quality\n        layers = optimalVideoLayers.filter((layer)=>layer.rid === \"f\");\n    } else if (size <= 640) {\n        // provide two layers, 160x120 (q) and 640x480 (h)\n        layers = optimalVideoLayers.filter((layer)=>layer.rid !== \"h\");\n    } else {\n        // provide three layers for sizes > 640x480\n        layers = optimalVideoLayers;\n    }\n    const ridMapping = [\n        \"q\",\n        \"h\",\n        \"f\"\n    ];\n    return layers.map((layer, index)=>({\n            ...layer,\n            rid: ridMapping[index]\n        }));\n};\nconst findOptimalScreenSharingLayers = (videoTrack, preferences)=>{\n    const settings = videoTrack.getSettings();\n    return [\n        {\n            active: true,\n            rid: \"q\",\n            width: settings.width || 0,\n            height: settings.height || 0,\n            scaleResolutionDownBy: 1,\n            maxBitrate: preferences?.maxBitrate ?? 3000000,\n            maxFramerate: preferences?.maxFramerate ?? 30\n        }\n    ];\n};\nconst trackTypeToParticipantStreamKey = (trackType)=>{\n    switch(trackType){\n        case TrackType.SCREEN_SHARE:\n            return \"screenShareStream\";\n        case TrackType.SCREEN_SHARE_AUDIO:\n            return \"screenShareAudioStream\";\n        case TrackType.VIDEO:\n            return \"videoStream\";\n        case TrackType.AUDIO:\n            return \"audioStream\";\n        case TrackType.UNSPECIFIED:\n            throw new Error(\"Track type is unspecified\");\n        default:\n            const exhaustiveTrackTypeCheck = trackType;\n            throw new Error(`Unknown track type: ${exhaustiveTrackTypeCheck}`);\n    }\n};\nconst muteTypeToTrackType = (muteType)=>{\n    switch(muteType){\n        case \"audio\":\n            return TrackType.AUDIO;\n        case \"video\":\n            return TrackType.VIDEO;\n        case \"screenshare\":\n            return TrackType.SCREEN_SHARE;\n        case \"screenshare_audio\":\n            return TrackType.SCREEN_SHARE_AUDIO;\n        default:\n            const exhaustiveMuteTypeCheck = muteType;\n            throw new Error(`Unknown mute type: ${exhaustiveMuteTypeCheck}`);\n    }\n};\n/**\n * Checks if the provided update is a function patch.\n *\n * @param update the value to check.\n */ const isFunctionPatch = (update)=>typeof update === \"function\";\n/**\n * Gets the current value of an observable, or undefined if the observable has\n * not emitted a value yet.\n *\n * @param observable$ the observable to get the value from.\n */ const getCurrentValue = (observable$)=>{\n    let value;\n    let err = undefined;\n    (0,_barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_18__.combineLatest)([\n        observable$\n    ]).subscribe({\n        next: ([v])=>{\n            value = v;\n        },\n        error: (e)=>{\n            err = e;\n        }\n    }).unsubscribe();\n    if (err) throw err;\n    return value;\n};\n/**\n * Updates the value of the provided Subject.\n * An `update` can either be a new value or a function which takes\n * the current value and returns a new value.\n *\n * @param subject the subject to update.\n * @param update the update to apply to the subject.\n * @return the updated value.\n */ const setCurrentValue = (subject, update)=>{\n    const next = isFunctionPatch(update) ? update(getCurrentValue(subject)) : update;\n    subject.next(next);\n    return next;\n};\n/**\n * Creates a subscription and returns a function to unsubscribe.\n *\n * @param observable the observable to subscribe to.\n * @param handler the handler to call when the observable emits a value.\n */ const createSubscription = (observable, handler)=>{\n    const subscription = observable.subscribe(handler);\n    return ()=>{\n        subscription.unsubscribe();\n    };\n};\nvar rxUtils = /*#__PURE__*/ Object.freeze({\n    __proto__: null,\n    createSubscription: createSubscription,\n    getCurrentValue: getCurrentValue,\n    setCurrentValue: setCurrentValue\n});\n/**\n * Creates a new combined {@link Comparator<T>} which sorts items by the given comparators.\n * The comparators are applied in the order they are given (left -> right).\n *\n * @param comparators the comparators to use for sorting.\n * @returns a combined {@link Comparator<T>}.\n */ const combineComparators = (...comparators)=>{\n    return (a, b)=>{\n        for (const comparator of comparators){\n            const result = comparator(a, b);\n            if (result !== 0) return result;\n        }\n        return 0;\n    };\n};\n/**\n * Creates a new comparator which sorts items in descending order.\n *\n * @example\n * const byValue = (a, b) => a < b ? - 1 : a > b ? 1 : 0;\n * const byValueDesc = descending(byValue);\n *\n * @param comparator the comparator to wrap.\n */ const descending = (comparator)=>{\n    return (a, b)=>comparator(b, a);\n};\n/**\n * Creates a new comparator which conditionally applies the given comparator.\n *\n * @example\n * const shouldSortByValue = (a, b) => a % 2 === 0; // return false to turn it off\n * const byValue = (a, b) => a < b ? - 1 : a > b ? 1 : 0;\n * const comparator = conditional(shouldSortByValue)(byValue);\n *\n * @param predicate the predicate to use for determining whether to apply the comparator.\n */ const conditional = (predicate)=>{\n    return (comparator)=>{\n        return (a, b)=>{\n            if (!predicate(a, b)) return 0;\n            return comparator(a, b);\n        };\n    };\n};\n/**\n * A no-op comparator which always returns 0.\n */ const noopComparator = ()=>{\n    return ()=>0;\n};\n/**\n * A comparator which sorts participants by the fact that they are the dominant speaker or not.\n *\n * @param a the first participant.\n * @param b the second participant.\n */ const dominantSpeaker = (a, b)=>{\n    if (a.isDominantSpeaker && !b.isDominantSpeaker) return -1;\n    if (!a.isDominantSpeaker && b.isDominantSpeaker) return 1;\n    return 0;\n};\n/**\n * A comparator which sorts participants by the fact that they are speaking or not.\n *\n * @param a the first participant.\n * @param b the second participant.\n */ const speaking = (a, b)=>{\n    if (a.isSpeaking && !b.isSpeaking) return -1;\n    if (!a.isSpeaking && b.isSpeaking) return 1;\n    return 0;\n};\n/**\n * A comparator which sorts participants by screen sharing status.\n *\n * @param a the first participant.\n * @param b the second participant.\n */ const screenSharing = (a, b)=>{\n    if (hasScreenShare(a) && !hasScreenShare(b)) return -1;\n    if (!hasScreenShare(a) && hasScreenShare(b)) return 1;\n    return 0;\n};\n/**\n * A comparator which sorts participants by video status.\n *\n * @param a the first participant.\n * @param b the second participant.\n */ const publishingVideo = (a, b)=>{\n    if (hasVideo(a) && !hasVideo(b)) return -1;\n    if (!hasVideo(a) && hasVideo(b)) return 1;\n    return 0;\n};\n/**\n * A comparator which sorts participants by audio status.\n *\n * @param a the first participant.\n * @param b the second participant.\n */ const publishingAudio = (a, b)=>{\n    if (hasAudio(a) && !hasAudio(b)) return -1;\n    if (!hasAudio(a) && hasAudio(b)) return 1;\n    return 0;\n};\n/**\n * A comparator which prioritizes participants who are pinned.\n *\n * @param a the first participant.\n * @param b the second participant.\n */ const pinned = (a, b)=>{\n    if (a.pin && b.pin) {\n        if (!a.pin.isLocalPin && b.pin.isLocalPin) return -1;\n        if (a.pin.isLocalPin && !b.pin.isLocalPin) return 1;\n        if (a.pin.pinnedAt > b.pin.pinnedAt) return -1;\n        if (a.pin.pinnedAt < b.pin.pinnedAt) return 1;\n    }\n    if (a.pin && !b.pin) return -1;\n    if (!a.pin && b.pin) return 1;\n    return 0;\n};\n/**\n * A comparator creator which will set up a comparator which prioritizes\n * participants who have a specific reaction.\n *\n * @param type the reaction type.\n */ const reactionType = (type)=>{\n    return (a, b)=>{\n        if (a.reaction?.type === type && b.reaction?.type !== type) return -1;\n        if (a.reaction?.type !== type && b.reaction?.type === type) return 1;\n        return 0;\n    };\n};\n/**\n * A comparator creator which will set up a comparator which prioritizes\n * participants who have a specific role.\n *\n * @param roles the roles to prioritize.\n */ const role = (...roles)=>(a, b)=>{\n        if (hasAnyRole(a, roles) && !hasAnyRole(b, roles)) return -1;\n        if (!hasAnyRole(a, roles) && hasAnyRole(b, roles)) return 1;\n        return 0;\n    };\n/**\n * A comparator which sorts participants by name.\n *\n * @param a the first participant.\n * @param b the second participant.\n */ const name = (a, b)=>{\n    if (a.name < b.name) return -1;\n    if (a.name > b.name) return 1;\n    return 0;\n};\nconst hasAnyRole = (p, roles)=>(p.roles || []).some((r)=>roles.includes(r));\nconst hasScreenShare = (p)=>p.publishedTracks.includes(TrackType.SCREEN_SHARE);\nconst hasVideo = (p)=>p.publishedTracks.includes(TrackType.VIDEO);\nconst hasAudio = (p)=>p.publishedTracks.includes(TrackType.AUDIO);\n// a comparator decorator which applies the decorated comparator only if the\n// participant is invisible.\n// This ensures stable sorting when all participants are visible.\nconst ifInvisibleBy = conditional((a, b)=>a.viewportVisibilityState?.videoTrack === VisibilityState.INVISIBLE || b.viewportVisibilityState?.videoTrack === VisibilityState.INVISIBLE);\n/**\n * A comparator that applies the decorated comparator when a participant is\n * either invisible or its visibility state isn't known.\n * For visible participants, it ensures stable sorting.\n */ const ifInvisibleOrUnknownBy = conditional((a, b)=>a.viewportVisibilityState?.videoTrack === VisibilityState.INVISIBLE || a.viewportVisibilityState?.videoTrack === VisibilityState.UNKNOWN || b.viewportVisibilityState?.videoTrack === VisibilityState.INVISIBLE || b.viewportVisibilityState?.videoTrack === VisibilityState.UNKNOWN);\n/**\n * The default sorting preset.\n */ const defaultSortPreset = combineComparators(pinned, screenSharing, ifInvisibleBy(combineComparators(dominantSpeaker, speaking, reactionType(\"raised-hand\"), publishingVideo, publishingAudio)));\n/**\n * The sorting preset for speaker layout.\n */ const speakerLayoutSortPreset = combineComparators(pinned, screenSharing, dominantSpeaker, ifInvisibleBy(combineComparators(speaking, reactionType(\"raised-hand\"), publishingVideo, publishingAudio)));\n/**\n * The sorting preset for layouts that don't render all participants but\n * instead, render them in pages.\n */ const paginatedLayoutSortPreset = combineComparators(pinned, ifInvisibleOrUnknownBy(combineComparators(dominantSpeaker, speaking, reactionType(\"raised-hand\"), publishingVideo, publishingAudio)));\n/**\n * The sorting preset for livestreams and audio rooms.\n */ const livestreamOrAudioRoomSortPreset = combineComparators(ifInvisibleBy(combineComparators(dominantSpeaker, speaking, reactionType(\"raised-hand\"), publishingVideo, publishingAudio)), role(\"admin\", \"host\", \"speaker\"));\n/**\n * Represents the state of the current call.\n */ var CallingState;\n(function(CallingState) {\n    /**\n     * The call is in an unknown state.\n     */ CallingState[\"UNKNOWN\"] = \"unknown\";\n    /**\n     * The call is in an idle state.\n     */ CallingState[\"IDLE\"] = \"idle\";\n    /**\n     * The call is in the process of ringing.\n     * (User hasn't accepted nor rejected the call yet.)\n     */ CallingState[\"RINGING\"] = \"ringing\";\n    /**\n     * The call is in the process of joining.\n     */ CallingState[\"JOINING\"] = \"joining\";\n    /**\n     * The call is currently active.\n     */ CallingState[\"JOINED\"] = \"joined\";\n    /**\n     * The call has been left.\n     */ CallingState[\"LEFT\"] = \"left\";\n    /**\n     * The call is in the process of reconnecting.\n     */ CallingState[\"RECONNECTING\"] = \"reconnecting\";\n    /**\n     * The call is in the process of migrating from one node to another.\n     */ CallingState[\"MIGRATING\"] = \"migrating\";\n    /**\n     * The call has failed to reconnect.\n     */ CallingState[\"RECONNECTING_FAILED\"] = \"reconnecting-failed\";\n    /**\n     * The call is in offline mode.\n     */ CallingState[\"OFFLINE\"] = \"offline\";\n})(CallingState || (CallingState = {}));\n/**\n * Holds the state of the current call.\n * @react You don't have to use this class directly, as we are exposing the state through Hooks.\n */ class CallState {\n    /**\n     * Creates a new instance of the CallState class.\n     *\n     */ constructor(){\n        this.backstageSubject = new _barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_19__.BehaviorSubject(true);\n        this.blockedUserIdsSubject = new _barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_19__.BehaviorSubject([]);\n        this.createdAtSubject = new _barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_19__.BehaviorSubject(new Date());\n        this.endedAtSubject = new _barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_19__.BehaviorSubject(undefined);\n        this.startsAtSubject = new _barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_19__.BehaviorSubject(undefined);\n        this.updatedAtSubject = new _barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_19__.BehaviorSubject(new Date());\n        this.createdBySubject = new _barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_19__.BehaviorSubject(undefined);\n        this.customSubject = new _barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_19__.BehaviorSubject({});\n        this.egressSubject = new _barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_19__.BehaviorSubject(undefined);\n        this.ingressSubject = new _barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_19__.BehaviorSubject(undefined);\n        this.recordingSubject = new _barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_19__.BehaviorSubject(false);\n        this.sessionSubject = new _barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_19__.BehaviorSubject(undefined);\n        this.settingsSubject = new _barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_19__.BehaviorSubject(undefined);\n        this.transcribingSubject = new _barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_19__.BehaviorSubject(false);\n        this.endedBySubject = new _barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_19__.BehaviorSubject(undefined);\n        this.thumbnailsSubject = new _barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_19__.BehaviorSubject(undefined);\n        this.membersSubject = new _barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_19__.BehaviorSubject([]);\n        this.ownCapabilitiesSubject = new _barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_19__.BehaviorSubject([]);\n        this.callingStateSubject = new _barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_19__.BehaviorSubject(CallingState.UNKNOWN);\n        this.startedAtSubject = new _barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_19__.BehaviorSubject(undefined);\n        this.participantCountSubject = new _barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_19__.BehaviorSubject(0);\n        this.anonymousParticipantCountSubject = new _barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_19__.BehaviorSubject(0);\n        this.participantsSubject = new _barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_19__.BehaviorSubject([]);\n        this.callStatsReportSubject = new _barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_19__.BehaviorSubject(undefined);\n        /**\n         * A list of comparators that are used to sort the participants.\n         *\n         * @private\n         */ this.sortParticipantsBy = defaultSortPreset;\n        /**\n         * Sets the list of criteria that are used to sort the participants.\n         * To disable sorting, you can pass `noopComparator()`.\n         *\n         * @param comparator the comparator to use to sort the participants.\n         */ this.setSortParticipantsBy = (comparator)=>{\n            this.sortParticipantsBy = comparator;\n            // trigger re-sorting of participants\n            this.setCurrentValue(this.participantsSubject, (ps)=>ps);\n        };\n        /**\n         * Gets the current value of an observable, or undefined if the observable has\n         * not emitted a value yet.\n         *\n         * @param observable$ the observable to get the value from.\n         */ this.getCurrentValue = getCurrentValue;\n        /**\n         * Updates the value of the provided Subject.\n         * An `update` can either be a new value or a function which takes\n         * the current value and returns a new value.\n         *\n         * @internal\n         *\n         * @param subject the subject to update.\n         * @param update the update to apply to the subject.\n         * @return the updated value.\n         */ this.setCurrentValue = setCurrentValue;\n        /**\n         * Sets the number of participants in the current call.\n         *\n         * @internal\n         * @param count the number of participants.\n         */ this.setParticipantCount = (count)=>{\n            return this.setCurrentValue(this.participantCountSubject, count);\n        };\n        /**\n         * Sets the time the call session actually started.\n         *\n         * @internal\n         * @param startedAt the time the call session actually started.\n         */ this.setStartedAt = (startedAt)=>{\n            return this.setCurrentValue(this.startedAtSubject, startedAt);\n        };\n        /**\n         * Sets the number of anonymous participants in the current call.\n         *\n         * @internal\n         * @param count the number of anonymous participants.\n         */ this.setAnonymousParticipantCount = (count)=>{\n            return this.setCurrentValue(this.anonymousParticipantCountSubject, count);\n        };\n        /**\n         * Sets the list of participants in the current call.\n         *\n         * @internal\n         *\n         * @param participants the list of participants.\n         */ this.setParticipants = (participants)=>{\n            return this.setCurrentValue(this.participantsSubject, participants);\n        };\n        /**\n         * Sets the calling state.\n         *\n         * @internal\n         * @param state the new calling state.\n         */ this.setCallingState = (state)=>{\n            return this.setCurrentValue(this.callingStateSubject, state);\n        };\n        /**\n         * Sets the call stats report.\n         *\n         * @internal\n         * @param report the report to set.\n         */ this.setCallStatsReport = (report)=>{\n            return this.setCurrentValue(this.callStatsReportSubject, report);\n        };\n        /**\n         * Sets the members of the current call.\n         *\n         * @internal\n         * @param members the members to set.\n         */ this.setMembers = (members)=>{\n            this.setCurrentValue(this.membersSubject, members);\n        };\n        /**\n         * Sets the own capabilities.\n         *\n         * @internal\n         * @param capabilities the capabilities to set.\n         */ this.setOwnCapabilities = (capabilities)=>{\n            return this.setCurrentValue(this.ownCapabilitiesSubject, capabilities);\n        };\n        /**\n         * Will try to find the participant with the given sessionId in the current call.\n         *\n         * @param sessionId the sessionId of the participant to find.\n         * @returns the participant with the given sessionId or undefined if not found.\n         */ this.findParticipantBySessionId = (sessionId)=>{\n            return this.participants.find((p)=>p.sessionId === sessionId);\n        };\n        /**\n         * Returns a new lookup table of participants indexed by their session ID.\n         */ this.getParticipantLookupBySessionId = ()=>{\n            return this.participants.reduce((lookupTable, participant)=>{\n                lookupTable[participant.sessionId] = participant;\n                return lookupTable;\n            }, {});\n        };\n        /**\n         * Updates a participant in the current call identified by the given `sessionId`.\n         * If the participant can't be found, this operation is no-op.\n         *\n         * @internal\n         *\n         * @param sessionId the session ID of the participant to update.\n         * @param patch the patch to apply to the participant.\n         * @returns the updated participant or `undefined` if the participant couldn't be found.\n         */ this.updateParticipant = (sessionId, patch)=>{\n            const participant = this.findParticipantBySessionId(sessionId);\n            if (!participant) {\n                this.logger(\"warn\", `Participant with sessionId ${sessionId} not found`);\n                return;\n            }\n            const thePatch = typeof patch === \"function\" ? patch(participant) : patch;\n            const updatedParticipant = {\n                // FIXME OL: this is not a deep merge, we might want to revisit this\n                ...participant,\n                ...thePatch\n            };\n            return this.setParticipants((participants)=>participants.map((p)=>p.sessionId === sessionId ? updatedParticipant : p));\n        };\n        /**\n         * Updates a participant in the current call identified by the given `sessionId`.\n         * If a participant with matching `sessionId` can't be found, the provided\n         * `participant` is added to the list of participants.\n         *\n         * @param sessionId the session ID of the participant to update.\n         * @param participant the participant to update or add.\n         */ this.updateOrAddParticipant = (sessionId, participant)=>{\n            if (!this.findParticipantBySessionId(sessionId)) {\n                return this.setParticipants((participants)=>[\n                        ...participants,\n                        participant\n                    ]);\n            }\n            return this.setParticipants((participants)=>participants.map((p)=>{\n                    if (p.sessionId === sessionId) {\n                        return {\n                            ...p,\n                            ...participant\n                        };\n                    }\n                    return p;\n                }));\n        };\n        /**\n         * Updates all participants in the current call whose session ID is in the given `sessionIds`.\n         * If no patches are provided, this operation is no-op.\n         *\n         * @internal\n         *\n         * @param patch the patch to apply to the participants.\n         * @returns all participants, with all patch applied.\n         */ this.updateParticipants = (patch)=>{\n            if (Object.keys(patch).length === 0) return;\n            return this.setParticipants((participants)=>participants.map((p)=>{\n                    const thePatch = patch[p.sessionId];\n                    if (thePatch) {\n                        return {\n                            ...p,\n                            ...thePatch\n                        };\n                    }\n                    return p;\n                }));\n        };\n        /**\n         * Updates the call state with the data received from the server.\n         *\n         * @internal\n         *\n         * @param event the video event that our backend sent us.\n         */ this.updateFromEvent = (event)=>{\n            const update = this.eventHandlers[event.type];\n            if (update) {\n                update(event);\n            }\n        };\n        /**\n         * Updates the participant pinned state with server side pinning data.\n         *\n         * @param pins the latest pins from the server.\n         */ this.setServerSidePins = (pins)=>{\n            const pinsLookup = pins.reduce((lookup, pin)=>{\n                lookup[pin.sessionId] = Date.now();\n                return lookup;\n            }, {});\n            return this.setParticipants((participants)=>participants.map((participant)=>{\n                    const serverSidePinnedAt = pinsLookup[participant.sessionId];\n                    // the participant is newly pinned\n                    if (serverSidePinnedAt) {\n                        return {\n                            ...participant,\n                            pin: {\n                                isLocalPin: false,\n                                pinnedAt: serverSidePinnedAt\n                            }\n                        };\n                    }\n                    // the participant is no longer pinned server side\n                    // we need to reset the pin\n                    if (participant.pin && !participant.pin.isLocalPin) {\n                        return {\n                            ...participant,\n                            pin: undefined\n                        };\n                    }\n                    // no changes to be applied\n                    return participant;\n                }));\n        };\n        /**\n         * Updates the call state with the data received from the server.\n         *\n         * @internal\n         *\n         * @param call the call response from the server.\n         */ this.updateFromCallResponse = (call)=>{\n            this.setCurrentValue(this.backstageSubject, call.backstage);\n            this.setCurrentValue(this.blockedUserIdsSubject, call.blocked_user_ids);\n            this.setCurrentValue(this.createdAtSubject, new Date(call.created_at));\n            this.setCurrentValue(this.updatedAtSubject, new Date(call.updated_at));\n            this.setCurrentValue(this.startsAtSubject, call.starts_at ? new Date(call.starts_at) : undefined);\n            this.setCurrentValue(this.endedAtSubject, call.ended_at ? new Date(call.ended_at) : undefined);\n            this.setCurrentValue(this.createdBySubject, call.created_by);\n            this.setCurrentValue(this.customSubject, call.custom);\n            this.setCurrentValue(this.egressSubject, call.egress);\n            this.setCurrentValue(this.ingressSubject, call.ingress);\n            this.setCurrentValue(this.recordingSubject, call.recording);\n            this.setCurrentValue(this.sessionSubject, call.session);\n            this.setCurrentValue(this.settingsSubject, call.settings);\n            this.setCurrentValue(this.transcribingSubject, call.transcribing);\n            this.setCurrentValue(this.thumbnailsSubject, call.thumbnails);\n        };\n        this.updateFromMemberRemoved = (event)=>{\n            this.setCurrentValue(this.membersSubject, (members)=>members.filter((m)=>event.members.indexOf(m.user_id) === -1));\n        };\n        this.updateFromMemberAdded = (event)=>{\n            this.setCurrentValue(this.membersSubject, (members)=>[\n                    ...members,\n                    ...event.members\n                ]);\n        };\n        this.updateFromHLSBroadcastStopped = ()=>{\n            this.setCurrentValue(this.egressSubject, (egress)=>({\n                    ...egress,\n                    broadcasting: false\n                }));\n        };\n        this.updateFromHLSBroadcastingFailed = ()=>{\n            this.setCurrentValue(this.egressSubject, (egress)=>({\n                    ...egress,\n                    broadcasting: false\n                }));\n        };\n        this.updateFromHLSBroadcastStarted = (event)=>{\n            this.setCurrentValue(this.egressSubject, (egress)=>({\n                    ...egress,\n                    broadcasting: true,\n                    hls: {\n                        ...egress.hls,\n                        playlist_url: event.hls_playlist_url\n                    }\n                }));\n        };\n        this.updateFromSessionParticipantLeft = (event)=>{\n            this.setCurrentValue(this.sessionSubject, (session)=>{\n                if (!session) {\n                    this.logger(\"warn\", `Received call.session_participant_left event but no session is available.`, event);\n                    return session;\n                }\n                const { participants, participants_count_by_role } = session;\n                const { user, user_session_id } = event.participant;\n                return {\n                    ...session,\n                    participants: participants.filter((p)=>p.user_session_id !== user_session_id),\n                    participants_count_by_role: {\n                        ...participants_count_by_role,\n                        [user.role]: Math.max(0, (participants_count_by_role[user.role] || 0) - 1)\n                    }\n                };\n            });\n        };\n        this.updateFromSessionParticipantJoined = (event)=>{\n            this.setCurrentValue(this.sessionSubject, (session)=>{\n                if (!session) {\n                    this.logger(\"warn\", `Received call.session_participant_joined event but no session is available.`, event);\n                    return session;\n                }\n                const { participants, participants_count_by_role } = session;\n                const { user, user_session_id } = event.participant;\n                // It could happen that the backend delivers the same participant more than once.\n                // Once with the call.session_started event and once again with the\n                // call.session_participant_joined event. In this case,\n                // we should update the existing participant and prevent duplicating it.\n                let shouldInsertParticipant = true;\n                const updatedParticipants = participants.map((p)=>{\n                    if (p.user_session_id === user_session_id) {\n                        shouldInsertParticipant = false;\n                        return event.participant;\n                    }\n                    return p;\n                });\n                if (shouldInsertParticipant) {\n                    // this is a new array, we can safely push the new participant\n                    updatedParticipants.push(event.participant);\n                }\n                // If we are updating an existing participant, we don't want to increment\n                // the participant_by_role count.\n                const increment = shouldInsertParticipant ? 1 : 0;\n                return {\n                    ...session,\n                    participants: updatedParticipants,\n                    participants_count_by_role: {\n                        ...participants_count_by_role,\n                        [user.role]: (participants_count_by_role[user.role] || 0) + increment\n                    }\n                };\n            });\n        };\n        this.updateMembers = (event)=>{\n            this.setCurrentValue(this.membersSubject, (members)=>members.map((member)=>{\n                    const memberUpdate = event.members.find((m)=>m.user_id === member.user_id);\n                    return memberUpdate ? memberUpdate : member;\n                }));\n        };\n        this.updateParticipantReaction = (event)=>{\n            const { user, custom, type, emoji_code } = event.reaction;\n            this.setParticipants((participants)=>{\n                return participants.map((p)=>{\n                    // skip if the reaction is not for this participant\n                    if (p.userId !== user.id) return p;\n                    // update the participant with the new reaction\n                    return {\n                        ...p,\n                        reaction: {\n                            type,\n                            emoji_code,\n                            custom\n                        }\n                    };\n                });\n            });\n        };\n        this.unblockUser = (event)=>{\n            this.setCurrentValue(this.blockedUserIdsSubject, (current)=>{\n                if (!current) return current;\n                return current.filter((id)=>id !== event.user.id);\n            });\n        };\n        this.blockUser = (event)=>{\n            this.setCurrentValue(this.blockedUserIdsSubject, (current)=>[\n                    ...current || [],\n                    event.user.id\n                ]);\n        };\n        this.updateOwnCapabilities = (event)=>{\n            if (event.user.id === this.localParticipant?.userId) {\n                this.setCurrentValue(this.ownCapabilitiesSubject, event.own_capabilities);\n            }\n        };\n        this.logger = getLogger([\n            \"CallState\"\n        ]);\n        this.participants$ = this.participantsSubject.asObservable().pipe(// maintain stable-sort by mutating the participants stored\n        // in the original subject\n        (0,_barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_20__.map)((ps)=>ps.sort(this.sortParticipantsBy)), (0,_barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_21__.shareReplay)({\n            bufferSize: 1,\n            refCount: true\n        }));\n        this.localParticipant$ = this.participants$.pipe((0,_barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_20__.map)((participants)=>participants.find((p)=>p.isLocalParticipant)), (0,_barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_21__.shareReplay)({\n            bufferSize: 1,\n            refCount: true\n        }));\n        this.remoteParticipants$ = this.participants$.pipe((0,_barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_20__.map)((participants)=>participants.filter((p)=>!p.isLocalParticipant)), (0,_barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_21__.shareReplay)({\n            bufferSize: 1,\n            refCount: true\n        }));\n        this.pinnedParticipants$ = this.participants$.pipe((0,_barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_20__.map)((participants)=>participants.filter((p)=>!!p.pin)), (0,_barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_21__.shareReplay)({\n            bufferSize: 1,\n            refCount: true\n        }));\n        this.dominantSpeaker$ = this.participants$.pipe((0,_barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_20__.map)((participants)=>participants.find((p)=>p.isDominantSpeaker)), (0,_barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_21__.shareReplay)({\n            bufferSize: 1,\n            refCount: true\n        }));\n        this.hasOngoingScreenShare$ = this.participants$.pipe((0,_barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_20__.map)((participants)=>participants.some((p)=>p.publishedTracks.includes(TrackType.SCREEN_SHARE))), (0,_barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_22__.distinctUntilChanged)(), (0,_barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_21__.shareReplay)({\n            bufferSize: 1,\n            refCount: true\n        }));\n        this.startedAt$ = this.startedAtSubject.asObservable();\n        this.participantCount$ = this.participantCountSubject.asObservable();\n        this.anonymousParticipantCount$ = this.anonymousParticipantCountSubject.asObservable();\n        this.callStatsReport$ = this.callStatsReportSubject.asObservable();\n        this.members$ = this.membersSubject.asObservable();\n        this.ownCapabilities$ = this.ownCapabilitiesSubject.asObservable();\n        this.callingState$ = this.callingStateSubject.asObservable();\n        this.backstage$ = this.backstageSubject.asObservable();\n        this.blockedUserIds$ = this.blockedUserIdsSubject.asObservable();\n        this.createdAt$ = this.createdAtSubject.asObservable();\n        this.endedAt$ = this.endedAtSubject.asObservable();\n        this.startsAt$ = this.startsAtSubject.asObservable();\n        this.updatedAt$ = this.updatedAtSubject.asObservable();\n        this.createdBy$ = this.createdBySubject.asObservable();\n        this.custom$ = this.customSubject.asObservable();\n        this.egress$ = this.egressSubject.asObservable();\n        this.ingress$ = this.ingressSubject.asObservable();\n        this.recording$ = this.recordingSubject.asObservable();\n        this.session$ = this.sessionSubject.asObservable();\n        this.settings$ = this.settingsSubject.asObservable();\n        this.transcribing$ = this.transcribingSubject.asObservable();\n        this.endedBy$ = this.endedBySubject.asObservable();\n        this.thumbnails$ = this.thumbnailsSubject.asObservable();\n        this.eventHandlers = {\n            // these events are not updating the call state:\n            \"call.permission_request\": undefined,\n            \"call.recording_failed\": undefined,\n            \"call.recording_ready\": undefined,\n            \"call.user_muted\": undefined,\n            \"connection.error\": undefined,\n            \"connection.ok\": undefined,\n            \"health.check\": undefined,\n            custom: undefined,\n            // events that update call state:\n            \"call.accepted\": (e)=>this.updateFromCallResponse(e.call),\n            \"call.blocked_user\": this.blockUser,\n            \"call.created\": (e)=>this.updateFromCallResponse(e.call),\n            \"call.ended\": (e)=>{\n                this.updateFromCallResponse(e.call);\n                this.setCurrentValue(this.endedBySubject, e.user);\n            },\n            \"call.hls_broadcasting_failed\": this.updateFromHLSBroadcastingFailed,\n            \"call.hls_broadcasting_started\": this.updateFromHLSBroadcastStarted,\n            \"call.hls_broadcasting_stopped\": this.updateFromHLSBroadcastStopped,\n            \"call.live_started\": (e)=>this.updateFromCallResponse(e.call),\n            \"call.member_added\": this.updateFromMemberAdded,\n            \"call.member_removed\": this.updateFromMemberRemoved,\n            \"call.member_updated_permission\": this.updateMembers,\n            \"call.member_updated\": this.updateMembers,\n            \"call.notification\": (e)=>{\n                this.updateFromCallResponse(e.call);\n                this.setMembers(e.members);\n            },\n            \"call.permissions_updated\": this.updateOwnCapabilities,\n            \"call.reaction_new\": this.updateParticipantReaction,\n            \"call.recording_started\": ()=>this.setCurrentValue(this.recordingSubject, true),\n            \"call.recording_stopped\": ()=>this.setCurrentValue(this.recordingSubject, false),\n            \"call.rejected\": (e)=>this.updateFromCallResponse(e.call),\n            \"call.ring\": (e)=>this.updateFromCallResponse(e.call),\n            \"call.session_ended\": (e)=>this.updateFromCallResponse(e.call),\n            \"call.session_participant_joined\": this.updateFromSessionParticipantJoined,\n            \"call.session_participant_left\": this.updateFromSessionParticipantLeft,\n            \"call.session_started\": (e)=>this.updateFromCallResponse(e.call),\n            \"call.unblocked_user\": this.unblockUser,\n            \"call.updated\": (e)=>this.updateFromCallResponse(e.call)\n        };\n    }\n    /**\n     * The server-side counted number of participants connected to the current call.\n     * This number includes the anonymous participants as well.\n     */ get participantCount() {\n        return this.getCurrentValue(this.participantCount$);\n    }\n    /**\n     * The time the call session actually started.\n     * Useful for displaying the call duration.\n     */ get startedAt() {\n        return this.getCurrentValue(this.startedAt$);\n    }\n    /**\n     * The server-side counted number of anonymous participants connected to the current call.\n     * This number includes the anonymous participants as well.\n     */ get anonymousParticipantCount() {\n        return this.getCurrentValue(this.anonymousParticipantCount$);\n    }\n    /**\n     * The list of participants in the current call.\n     */ get participants() {\n        return this.getCurrentValue(this.participants$);\n    }\n    /**\n     * The local participant in the current call.\n     */ get localParticipant() {\n        return this.getCurrentValue(this.localParticipant$);\n    }\n    /**\n     * The list of remote participants in the current call.\n     */ get remoteParticipants() {\n        return this.getCurrentValue(this.remoteParticipants$);\n    }\n    /**\n     * The dominant speaker in the current call.\n     */ get dominantSpeaker() {\n        return this.getCurrentValue(this.dominantSpeaker$);\n    }\n    /**\n     * The list of pinned participants in the current call.\n     */ get pinnedParticipants() {\n        return this.getCurrentValue(this.pinnedParticipants$);\n    }\n    /**\n     * Tell if there is an ongoing screen share in this call.\n     */ get hasOngoingScreenShare() {\n        return this.getCurrentValue(this.hasOngoingScreenShare$);\n    }\n    /**\n     * The calling state.\n     */ get callingState() {\n        return this.getCurrentValue(this.callingState$);\n    }\n    /**\n     * The call stats report.\n     */ get callStatsReport() {\n        return this.getCurrentValue(this.callStatsReport$);\n    }\n    /**\n     * The members of the current call.\n     */ get members() {\n        return this.getCurrentValue(this.members$);\n    }\n    /**\n     * The capabilities of the current user for the current call.\n     */ get ownCapabilities() {\n        return this.getCurrentValue(this.ownCapabilities$);\n    }\n    /**\n     * The backstage state.\n     */ get backstage() {\n        return this.getCurrentValue(this.backstage$);\n    }\n    /**\n     * Will provide the list of blocked user IDs.\n     */ get blockedUserIds() {\n        return this.getCurrentValue(this.blockedUserIds$);\n    }\n    /**\n     * Will provide the time when this call has been created.\n     */ get createdAt() {\n        return this.getCurrentValue(this.createdAt$);\n    }\n    /**\n     * Will provide the time when this call has been ended.\n     */ get endedAt() {\n        return this.getCurrentValue(this.endedAt$);\n    }\n    /**\n     * Will provide the time when this call has been scheduled to start.\n     */ get startsAt() {\n        return this.getCurrentValue(this.startsAt$);\n    }\n    /**\n     * Will provide the time when this call has been updated.\n     */ get updatedAt() {\n        return this.getCurrentValue(this.updatedAt$);\n    }\n    /**\n     * Will provide the user who created this call.\n     */ get createdBy() {\n        return this.getCurrentValue(this.createdBy$);\n    }\n    /**\n     * Will provide the custom data of this call.\n     */ get custom() {\n        return this.getCurrentValue(this.custom$);\n    }\n    /**\n     * Will provide the egress data of this call.\n     */ get egress() {\n        return this.getCurrentValue(this.egress$);\n    }\n    /**\n     * Will provide the ingress data of this call.\n     */ get ingress() {\n        return this.getCurrentValue(this.ingress$);\n    }\n    /**\n     * Will provide the recording state of this call.\n     */ get recording() {\n        return this.getCurrentValue(this.recording$);\n    }\n    /**\n     * Will provide the session data of this call.\n     */ get session() {\n        return this.getCurrentValue(this.session$);\n    }\n    /**\n     * Will provide the settings of this call.\n     */ get settings() {\n        return this.getCurrentValue(this.settings$);\n    }\n    /**\n     * Will provide the transcribing state of this call.\n     */ get transcribing() {\n        return this.getCurrentValue(this.transcribing$);\n    }\n    /**\n     * Will provide the user who ended this call.\n     */ get endedBy() {\n        return this.getCurrentValue(this.endedBy$);\n    }\n    /**\n     * Will provide the thumbnails of this call, if enabled in the call settings.\n     */ get thumbnails() {\n        return this.getCurrentValue(this.thumbnails$);\n    }\n}\nclass StreamVideoWriteableStateStore {\n    constructor(){\n        /**\n         * A store keeping data of a successfully connected user over WS to the coordinator server.\n         */ this.connectedUserSubject = new _barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_19__.BehaviorSubject(undefined);\n        /**\n         * A list of {@link Call} objects created/tracked by this client.\n         */ this.callsSubject = new _barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_19__.BehaviorSubject([]);\n        /**\n         * Gets the current value of an observable, or undefined if the observable has\n         * not emitted a value yet.\n         *\n         * @param observable$ the observable to get the value from.\n         */ this.getCurrentValue = getCurrentValue;\n        /**\n         * Updates the value of the provided Subject.\n         * An `update` can either be a new value or a function which takes\n         * the current value and returns a new value.\n         *\n         * @param subject the subject to update.\n         * @param update the update to apply to the subject.\n         * @return the updated value.\n         */ this.setCurrentValue = setCurrentValue;\n        /**\n         * Sets the currently connected user.\n         *\n         * @internal\n         * @param user the user to set as connected.\n         */ this.setConnectedUser = (user)=>{\n            return this.setCurrentValue(this.connectedUserSubject, user);\n        };\n        /**\n         * Sets the list of {@link Call} objects created/tracked by this client.\n         * @param calls\n         */ this.setCalls = (calls)=>{\n            return this.setCurrentValue(this.callsSubject, calls);\n        };\n        /**\n         * Adds a {@link Call} object to the list of {@link Call} objects created/tracked by this client.\n         *\n         * @param call the call to add.\n         */ this.registerCall = (call)=>{\n            if (!this.calls.find((c)=>c.cid === call.cid)) {\n                this.setCalls((calls)=>[\n                        ...calls,\n                        call\n                    ]);\n            }\n        };\n        /**\n         * Removes a {@link Call} object from the list of {@link Call} objects created/tracked by this client.\n         *\n         * @param call the call to remove\n         */ this.unregisterCall = (call)=>{\n            return this.setCalls((calls)=>calls.filter((c)=>c !== call));\n        };\n        /**\n         * Finds a {@link Call} object in the list of {@link Call} objects created/tracked by this client.\n         *\n         * @param type the type of call to find.\n         * @param id the id of the call to find.\n         */ this.findCall = (type, id)=>{\n            return this.calls.find((c)=>c.type === type && c.id === id);\n        };\n        this.connectedUserSubject.subscribe(async (user)=>{\n            // leave all calls when the user disconnects.\n            if (!user) {\n                const logger = getLogger([\n                    \"client-state\"\n                ]);\n                for (const call of this.calls){\n                    if (call.state.callingState === CallingState.LEFT) continue;\n                    logger(\"info\", `User disconnected, leaving call: ${call.cid}`);\n                    await call.leave().catch((err)=>{\n                        logger(\"error\", `Error leaving call: ${call.cid}`, err);\n                    });\n                }\n            }\n        });\n    }\n    /**\n     * The currently connected user.\n     */ get connectedUser() {\n        return this.getCurrentValue(this.connectedUserSubject);\n    }\n    /**\n     * A list of {@link Call} objects created/tracked by this client.\n     */ get calls() {\n        return this.getCurrentValue(this.callsSubject);\n    }\n}\n/**\n * A reactive store that exposes state variables in a reactive manner.\n * You can subscribe to changes of the different state variables.\n * This central store contains all the state variables related to [`StreamVideoClient`](./StreamVideClient.md) and [`Call`](./Call.md).\n */ class StreamVideoReadOnlyStateStore {\n    constructor(store){\n        /**\n         * This method allows you the get the current value of a state variable.\n         *\n         * @param observable the observable to get the current value of.\n         * @returns the current value of the observable.\n         */ this.getCurrentValue = getCurrentValue;\n        // convert and expose subjects as observables\n        this.connectedUser$ = store.connectedUserSubject.asObservable();\n        this.calls$ = store.callsSubject.asObservable();\n    }\n    /**\n     * The current user connected over WS to the backend.\n     */ get connectedUser() {\n        return getCurrentValue(this.connectedUser$);\n    }\n    /**\n     * A list of {@link Call} objects created/tracked by this client.\n     */ get calls() {\n        return getCurrentValue(this.calls$);\n    }\n}\nconst getRtpMap = (line)=>{\n    // Example: a=rtpmap:110 opus/48000/2\n    const rtpRegex = /^a=rtpmap:(\\d*) ([\\w\\-.]*)(?:\\s*\\/(\\d*)(?:\\s*\\/(\\S*))?)?/;\n    // The first captured group is the payload type number, the second captured group is the encoding name, the third captured group is the clock rate, and the fourth captured group is any additional parameters.\n    const rtpMatch = rtpRegex.exec(line);\n    if (rtpMatch) {\n        return {\n            original: rtpMatch[0],\n            payload: rtpMatch[1],\n            codec: rtpMatch[2]\n        };\n    }\n};\nconst getFmtp = (line)=>{\n    // Example: a=fmtp:111 minptime=10; useinbandfec=1\n    const fmtpRegex = /^a=fmtp:(\\d*) (.*)/;\n    const fmtpMatch = fmtpRegex.exec(line);\n    // The first captured group is the payload type number, the second captured group is any additional parameters.\n    if (fmtpMatch) {\n        return {\n            original: fmtpMatch[0],\n            payload: fmtpMatch[1],\n            config: fmtpMatch[2]\n        };\n    }\n};\n/**\n * gets the media section for the specified media type.\n * The media section contains the media type, port, codec, and payload type.\n * Example: m=video 9 UDP/TLS/RTP/SAVPF 100 101 96 97 35 36 102 125 127\n */ const getMedia = (line, mediaType)=>{\n    const regex = new RegExp(`(m=${mediaType} \\\\d+ [\\\\w/]+) ([\\\\d\\\\s]+)`);\n    const match = regex.exec(line);\n    if (match) {\n        return {\n            original: match[0],\n            mediaWithPorts: match[1],\n            codecOrder: match[2]\n        };\n    }\n};\nconst getMediaSection = (sdp, mediaType)=>{\n    let media;\n    const rtpMap = [];\n    const fmtp = [];\n    let isTheRequiredMediaSection = false;\n    sdp.split(/(\\r\\n|\\r|\\n)/).forEach((line)=>{\n        const isValidLine = /^([a-z])=(.*)/.test(line);\n        if (!isValidLine) return;\n        /*\n          NOTE: according to https://www.rfc-editor.org/rfc/rfc8866.pdf\n          Each media description starts with an \"m=\" line and continues to the next media description or the end of the whole session description, whichever comes first\n        */ const type = line[0];\n        if (type === \"m\") {\n            const _media = getMedia(line, mediaType);\n            isTheRequiredMediaSection = !!_media;\n            if (_media) {\n                media = _media;\n            }\n        } else if (isTheRequiredMediaSection && type === \"a\") {\n            const rtpMapLine = getRtpMap(line);\n            const fmtpLine = getFmtp(line);\n            if (rtpMapLine) {\n                rtpMap.push(rtpMapLine);\n            } else if (fmtpLine) {\n                fmtp.push(fmtpLine);\n            }\n        }\n    });\n    if (media) {\n        return {\n            media,\n            rtpMap,\n            fmtp\n        };\n    }\n};\n/**\n * Gets the fmtp line corresponding to opus\n */ const getOpusFmtp = (sdp)=>{\n    const section = getMediaSection(sdp, \"audio\");\n    const rtpMap = section?.rtpMap.find((r)=>r.codec.toLowerCase() === \"opus\");\n    const codecId = rtpMap?.payload;\n    if (codecId) {\n        return section?.fmtp.find((f)=>f.payload === codecId);\n    }\n};\n/**\n * Returns an SDP with DTX enabled or disabled.\n */ const toggleDtx = (sdp, enable)=>{\n    const opusFmtp = getOpusFmtp(sdp);\n    if (opusFmtp) {\n        const matchDtx = /usedtx=(\\d)/.exec(opusFmtp.config);\n        const requiredDtxConfig = `usedtx=${enable ? \"1\" : \"0\"}`;\n        if (matchDtx) {\n            const newFmtp = opusFmtp.original.replace(/usedtx=(\\d)/, requiredDtxConfig);\n            return sdp.replace(opusFmtp.original, newFmtp);\n        } else {\n            const newFmtp = `${opusFmtp.original};${requiredDtxConfig}`;\n            return sdp.replace(opusFmtp.original, newFmtp);\n        }\n    }\n    return sdp;\n};\n/**\n * Enables high-quality audio through SDP munging for the given trackMid.\n *\n * @param sdp the SDP to munge.\n * @param trackMid the trackMid.\n * @param maxBitrate the max bitrate to set.\n */ const enableHighQualityAudio = (sdp, trackMid, maxBitrate = 510000)=>{\n    maxBitrate = Math.max(Math.min(maxBitrate, 510000), 96000);\n    const parsedSdp = sdp_transform__WEBPACK_IMPORTED_MODULE_2__.parse(sdp);\n    const audioMedia = parsedSdp.media.find((m)=>m.type === \"audio\" && String(m.mid) === trackMid);\n    if (!audioMedia) return sdp;\n    const opusRtp = audioMedia.rtp.find((r)=>r.codec === \"opus\");\n    if (!opusRtp) return sdp;\n    const opusFmtp = audioMedia.fmtp.find((f)=>f.payload === opusRtp.payload);\n    if (!opusFmtp) return sdp;\n    // enable stereo, if not already enabled\n    if (opusFmtp.config.match(/stereo=(\\d)/)) {\n        opusFmtp.config = opusFmtp.config.replace(/stereo=(\\d)/, \"stereo=1\");\n    } else {\n        opusFmtp.config = `${opusFmtp.config};stereo=1`;\n    }\n    // set maxaveragebitrate, to the given value\n    if (opusFmtp.config.match(/maxaveragebitrate=(\\d*)/)) {\n        opusFmtp.config = opusFmtp.config.replace(/maxaveragebitrate=(\\d*)/, `maxaveragebitrate=${maxBitrate}`);\n    } else {\n        opusFmtp.config = `${opusFmtp.config};maxaveragebitrate=${maxBitrate}`;\n    }\n    return sdp_transform__WEBPACK_IMPORTED_MODULE_2__.write(parsedSdp);\n};\nconst logger$3 = getLogger([\n    \"Publisher\"\n]);\n/**\n * The `Publisher` is responsible for publishing/unpublishing media streams to/from the SFU\n * @internal\n */ class Publisher {\n    /**\n     * Returns the current connection configuration.\n     *\n     * @internal\n     */ get connectionConfiguration() {\n        if (this.pc.getConfiguration) return this.pc.getConfiguration();\n        return this._connectionConfiguration;\n    }\n    /**\n     * Constructs a new `Publisher` instance.\n     *\n     * @param connectionConfig the connection configuration to use.\n     * @param sfuClient the SFU client to use.\n     * @param state the call state to use.\n     * @param dispatcher the dispatcher to use.\n     * @param isDtxEnabled whether DTX is enabled.\n     * @param isRedEnabled whether RED is enabled.\n     * @param iceRestartDelay the delay in milliseconds to wait before restarting ICE once connection goes to `disconnected` state.\n     */ constructor({ connectionConfig, sfuClient, dispatcher, state, isDtxEnabled, isRedEnabled, iceRestartDelay = 2500 }){\n        this.transceiverRegistry = {\n            [TrackType.AUDIO]: undefined,\n            [TrackType.VIDEO]: undefined,\n            [TrackType.SCREEN_SHARE]: undefined,\n            [TrackType.SCREEN_SHARE_AUDIO]: undefined,\n            [TrackType.UNSPECIFIED]: undefined\n        };\n        this.publishOptionsPerTrackType = new Map();\n        /**\n         * An array maintaining the order how transceivers were added to the peer connection.\n         * This is needed because some browsers (Firefox) don't reliably report\n         * trackId and `mid` parameters.\n         *\n         * @private\n         */ this.transceiverInitOrder = [];\n        this.trackKindMapping = {\n            [TrackType.AUDIO]: \"audio\",\n            [TrackType.VIDEO]: \"video\",\n            [TrackType.SCREEN_SHARE]: \"video\",\n            [TrackType.SCREEN_SHARE_AUDIO]: \"audio\",\n            [TrackType.UNSPECIFIED]: undefined\n        };\n        this.trackLayersCache = {\n            [TrackType.AUDIO]: undefined,\n            [TrackType.VIDEO]: undefined,\n            [TrackType.SCREEN_SHARE]: undefined,\n            [TrackType.SCREEN_SHARE_AUDIO]: undefined,\n            [TrackType.UNSPECIFIED]: undefined\n        };\n        this.isIceRestarting = false;\n        this.createPeerConnection = (connectionConfig)=>{\n            const pc = new RTCPeerConnection(connectionConfig);\n            this._connectionConfiguration = connectionConfig;\n            pc.addEventListener(\"icecandidate\", this.onIceCandidate);\n            pc.addEventListener(\"negotiationneeded\", this.onNegotiationNeeded);\n            pc.addEventListener(\"icecandidateerror\", this.onIceCandidateError);\n            pc.addEventListener(\"iceconnectionstatechange\", this.onIceConnectionStateChange);\n            pc.addEventListener(\"icegatheringstatechange\", this.onIceGatheringStateChange);\n            pc.addEventListener(\"signalingstatechange\", this.onSignalingStateChange);\n            return pc;\n        };\n        /**\n         * Closes the publisher PeerConnection and cleans up the resources.\n         */ this.close = ({ stopTracks = true } = {})=>{\n            if (stopTracks) {\n                this.stopPublishing();\n                Object.keys(this.transceiverRegistry).forEach((trackType)=>{\n                    // @ts-ignore\n                    this.transceiverRegistry[trackType] = undefined;\n                });\n                Object.keys(this.trackLayersCache).forEach((trackType)=>{\n                    // @ts-ignore\n                    this.trackLayersCache[trackType] = undefined;\n                });\n            }\n            clearTimeout(this.iceRestartTimeout);\n            this.unsubscribeOnIceRestart();\n            this.pc.removeEventListener(\"negotiationneeded\", this.onNegotiationNeeded);\n            this.pc.close();\n        };\n        /**\n         * Starts publishing the given track of the given media stream.\n         *\n         * Consecutive calls to this method will replace the stream.\n         * The previous stream will be stopped.\n         *\n         * @param mediaStream the media stream to publish.\n         * @param track the track to publish.\n         * @param trackType the track type to publish.\n         * @param opts the optional publish options to use.\n         */ this.publishStream = async (mediaStream, track, trackType, opts = {})=>{\n            if (track.readyState === \"ended\") {\n                throw new Error(`Can't publish a track that has ended already.`);\n            }\n            let transceiver = this.pc.getTransceivers().find((t)=>t === this.transceiverRegistry[trackType] && t.sender.track && t.sender.track?.kind === this.trackKindMapping[trackType]);\n            /**\n             * An event handler which listens for the 'ended' event on the track.\n             * Once the track has ended, it will notify the SFU and update the state.\n             */ const handleTrackEnded = async ()=>{\n                logger$3(\"info\", `Track ${TrackType[trackType]} has ended, notifying the SFU`);\n                await this.notifyTrackMuteStateChanged(mediaStream, trackType, true);\n                // clean-up, this event listener needs to run only once.\n                track.removeEventListener(\"ended\", handleTrackEnded);\n            };\n            if (!transceiver) {\n                const { settings } = this.state;\n                const targetResolution = settings?.video.target_resolution;\n                const videoEncodings = trackType === TrackType.VIDEO ? findOptimalVideoLayers(track, targetResolution) : trackType === TrackType.SCREEN_SHARE ? findOptimalScreenSharingLayers(track, opts.screenShareSettings) : undefined;\n                let preferredCodec = opts.preferredCodec;\n                if (!preferredCodec && trackType === TrackType.VIDEO) {\n                    if (isReactNative()) {\n                        const osName = getOSInfo()?.name.toLowerCase();\n                        if (osName === \"ipados\") {\n                            // in ipads it was noticed that if vp8 codec is used\n                            // then the bytes sent is 0 in the outbound-rtp\n                            // so we are forcing h264 codec for ipads\n                            preferredCodec = \"H264\";\n                        } else if (osName === \"android\") {\n                            preferredCodec = \"VP8\";\n                        }\n                    }\n                }\n                const codecPreferences = this.getCodecPreferences(trackType, preferredCodec);\n                // listen for 'ended' event on the track as it might be ended abruptly\n                // by an external factor as permission revokes, device disconnected, etc.\n                // keep in mind that `track.stop()` doesn't trigger this event.\n                track.addEventListener(\"ended\", handleTrackEnded);\n                if (!track.enabled) {\n                    track.enabled = true;\n                }\n                transceiver = this.pc.addTransceiver(track, {\n                    direction: \"sendonly\",\n                    streams: trackType === TrackType.VIDEO || trackType === TrackType.SCREEN_SHARE ? [\n                        mediaStream\n                    ] : undefined,\n                    sendEncodings: videoEncodings\n                });\n                logger$3(\"debug\", `Added ${TrackType[trackType]} transceiver`);\n                this.transceiverInitOrder.push(trackType);\n                this.transceiverRegistry[trackType] = transceiver;\n                this.publishOptionsPerTrackType.set(trackType, opts);\n                if (\"setCodecPreferences\" in transceiver && codecPreferences) {\n                    logger$3(\"info\", `Setting ${TrackType[trackType]} codec preferences`, codecPreferences);\n                    transceiver.setCodecPreferences(codecPreferences);\n                }\n            } else {\n                const previousTrack = transceiver.sender.track;\n                // don't stop the track if we are re-publishing the same track\n                if (previousTrack && previousTrack !== track) {\n                    previousTrack.stop();\n                    previousTrack.removeEventListener(\"ended\", handleTrackEnded);\n                    track.addEventListener(\"ended\", handleTrackEnded);\n                }\n                if (!track.enabled) {\n                    track.enabled = true;\n                }\n                await transceiver.sender.replaceTrack(track);\n            }\n            await this.notifyTrackMuteStateChanged(mediaStream, trackType, false);\n        };\n        /**\n         * Stops publishing the given track type to the SFU, if it is currently being published.\n         * Underlying track will be stopped and removed from the publisher.\n         * @param trackType the track type to unpublish.\n         * @param stopTrack specifies whether track should be stopped or just disabled\n         */ this.unpublishStream = async (trackType, stopTrack)=>{\n            const transceiver = this.pc.getTransceivers().find((t)=>t === this.transceiverRegistry[trackType] && t.sender.track);\n            if (transceiver && transceiver.sender.track && (stopTrack ? transceiver.sender.track.readyState === \"live\" : transceiver.sender.track.enabled)) {\n                stopTrack ? transceiver.sender.track.stop() : transceiver.sender.track.enabled = false;\n                // We don't need to notify SFU if unpublishing in response to remote soft mute\n                if (this.state.localParticipant?.publishedTracks.includes(trackType)) {\n                    await this.notifyTrackMuteStateChanged(undefined, trackType, true);\n                }\n            }\n        };\n        /**\n         * Returns true if the given track type is currently being published to the SFU.\n         *\n         * @param trackType the track type to check.\n         */ this.isPublishing = (trackType)=>{\n            const transceiverForTrackType = this.transceiverRegistry[trackType];\n            if (transceiverForTrackType && transceiverForTrackType.sender) {\n                const sender = transceiverForTrackType.sender;\n                return !!sender.track && sender.track.readyState === \"live\" && sender.track.enabled;\n            }\n            return false;\n        };\n        /**\n         * Returns true if the given track type is currently live\n         *\n         * @param trackType the track type to check.\n         */ this.isLive = (trackType)=>{\n            const transceiverForTrackType = this.transceiverRegistry[trackType];\n            if (transceiverForTrackType && transceiverForTrackType.sender) {\n                const sender = transceiverForTrackType.sender;\n                return !!sender.track && sender.track.readyState === \"live\";\n            }\n            return false;\n        };\n        this.notifyTrackMuteStateChanged = async (mediaStream, trackType, isMuted)=>{\n            await this.sfuClient.updateMuteState(trackType, isMuted);\n            const audioOrVideoOrScreenShareStream = trackTypeToParticipantStreamKey(trackType);\n            if (isMuted) {\n                this.state.updateParticipant(this.sfuClient.sessionId, (p)=>({\n                        publishedTracks: p.publishedTracks.filter((t)=>t !== trackType),\n                        [audioOrVideoOrScreenShareStream]: undefined\n                    }));\n            } else {\n                this.state.updateParticipant(this.sfuClient.sessionId, (p)=>{\n                    return {\n                        publishedTracks: p.publishedTracks.includes(trackType) ? p.publishedTracks : [\n                            ...p.publishedTracks,\n                            trackType\n                        ],\n                        [audioOrVideoOrScreenShareStream]: mediaStream\n                    };\n                });\n            }\n        };\n        /**\n         * Stops publishing all tracks and stop all tracks.\n         */ this.stopPublishing = ()=>{\n            logger$3(\"debug\", \"Stopping publishing all tracks\");\n            this.pc.getSenders().forEach((s)=>{\n                s.track?.stop();\n                if (this.pc.signalingState !== \"closed\") {\n                    this.pc.removeTrack(s);\n                }\n            });\n        };\n        this.updateVideoPublishQuality = async (enabledLayers)=>{\n            logger$3(\"info\", \"Update publish quality, requested layers by SFU:\", enabledLayers);\n            const videoSender = this.transceiverRegistry[TrackType.VIDEO]?.sender;\n            if (!videoSender) {\n                logger$3(\"warn\", \"Update publish quality, no video sender found.\");\n                return;\n            }\n            const params = videoSender.getParameters();\n            if (params.encodings.length === 0) {\n                logger$3(\"warn\", \"Update publish quality, No suitable video encoding quality found\");\n                return;\n            }\n            let changed = false;\n            let enabledRids = enabledLayers.filter((ly)=>ly.active).map((ly)=>ly.name);\n            params.encodings.forEach((enc)=>{\n                // flip 'active' flag only when necessary\n                const shouldEnable = enabledRids.includes(enc.rid);\n                if (shouldEnable !== enc.active) {\n                    enc.active = shouldEnable;\n                    changed = true;\n                }\n                if (shouldEnable) {\n                    let layer = enabledLayers.find((vls)=>vls.name === enc.rid);\n                    if (layer !== undefined) {\n                        if (layer.scaleResolutionDownBy >= 1 && layer.scaleResolutionDownBy !== enc.scaleResolutionDownBy) {\n                            logger$3(\"debug\", \"[dynascale]: setting scaleResolutionDownBy from server\", \"layer\", layer.name, \"scale-resolution-down-by\", layer.scaleResolutionDownBy);\n                            enc.scaleResolutionDownBy = layer.scaleResolutionDownBy;\n                            changed = true;\n                        }\n                        if (layer.maxBitrate > 0 && layer.maxBitrate !== enc.maxBitrate) {\n                            logger$3(\"debug\", \"[dynascale] setting max-bitrate from the server\", \"layer\", layer.name, \"max-bitrate\", layer.maxBitrate);\n                            enc.maxBitrate = layer.maxBitrate;\n                            changed = true;\n                        }\n                        if (layer.maxFramerate > 0 && layer.maxFramerate !== enc.maxFramerate) {\n                            logger$3(\"debug\", \"[dynascale]: setting maxFramerate from server\", \"layer\", layer.name, \"max-framerate\", layer.maxFramerate);\n                            enc.maxFramerate = layer.maxFramerate;\n                            changed = true;\n                        }\n                    }\n                }\n            });\n            const activeLayers = params.encodings.filter((e)=>e.active);\n            if (changed) {\n                await videoSender.setParameters(params);\n                logger$3(\"info\", `Update publish quality, enabled rids: `, activeLayers);\n            } else {\n                logger$3(\"info\", `Update publish quality, no change: `, activeLayers);\n            }\n        };\n        /**\n         * Returns the result of the `RTCPeerConnection.getStats()` method\n         * @param selector\n         * @returns\n         */ this.getStats = (selector)=>{\n            return this.pc.getStats(selector);\n        };\n        this.getCodecPreferences = (trackType, preferredCodec)=>{\n            if (trackType === TrackType.VIDEO) {\n                return getPreferredCodecs(\"video\", preferredCodec || \"vp8\");\n            }\n            if (trackType === TrackType.AUDIO) {\n                const defaultAudioCodec = this.isRedEnabled ? \"red\" : \"opus\";\n                const codecToRemove = !this.isRedEnabled ? \"red\" : undefined;\n                return getPreferredCodecs(\"audio\", preferredCodec ?? defaultAudioCodec, codecToRemove);\n            }\n        };\n        this.onIceCandidate = async (e)=>{\n            const { candidate } = e;\n            if (!candidate) {\n                logger$3(\"debug\", \"null ice candidate\");\n                return;\n            }\n            await this.sfuClient.iceTrickle({\n                iceCandidate: getIceCandidate(candidate),\n                peerType: PeerType.PUBLISHER_UNSPECIFIED\n            });\n        };\n        /**\n         * Sets the SFU client to use.\n         *\n         * @param sfuClient the SFU client to use.\n         */ this.setSfuClient = (sfuClient)=>{\n            this.sfuClient = sfuClient;\n        };\n        /**\n         * Performs a migration of this publisher instance to a new SFU.\n         *\n         * Initiates a new `iceRestart` offer/answer exchange with the new SFU.\n         *\n         * @param sfuClient the new SFU client to migrate to.\n         * @param connectionConfig the new connection configuration to use.\n         */ this.migrateTo = async (sfuClient, connectionConfig)=>{\n            this.sfuClient = sfuClient;\n            this.pc.setConfiguration(connectionConfig);\n            this._connectionConfiguration = connectionConfig;\n            const shouldRestartIce = this.pc.iceConnectionState === \"connected\";\n            if (shouldRestartIce) {\n                // negotiate only if there are tracks to publish\n                await this.negotiate({\n                    iceRestart: true\n                });\n            }\n        };\n        /**\n         * Restarts the ICE connection and renegotiates with the SFU.\n         */ this.restartIce = async ()=>{\n            logger$3(\"debug\", \"Restarting ICE connection\");\n            const signalingState = this.pc.signalingState;\n            if (this.isIceRestarting || signalingState === \"have-local-offer\") {\n                logger$3(\"debug\", \"ICE restart is already in progress\");\n                return;\n            }\n            await this.negotiate({\n                iceRestart: true\n            });\n        };\n        this.onNegotiationNeeded = async ()=>{\n            await this.negotiate();\n        };\n        /**\n         * Initiates a new offer/answer exchange with the currently connected SFU.\n         *\n         * @param options the optional offer options to use.\n         */ this.negotiate = async (options)=>{\n            this.isIceRestarting = options?.iceRestart ?? false;\n            const offer = await this.pc.createOffer(options);\n            let sdp = this.mungeCodecs(offer.sdp);\n            if (sdp && this.isPublishing(TrackType.SCREEN_SHARE_AUDIO)) {\n                const transceiver = this.transceiverRegistry[TrackType.SCREEN_SHARE_AUDIO];\n                if (transceiver && transceiver.sender.track) {\n                    const mid = transceiver.mid ?? this.extractMid(sdp, transceiver.sender.track, TrackType.SCREEN_SHARE_AUDIO);\n                    sdp = enableHighQualityAudio(sdp, mid);\n                }\n            }\n            // set the munged SDP back to the offer\n            offer.sdp = sdp;\n            const trackInfos = this.getCurrentTrackInfos(offer.sdp);\n            if (trackInfos.length === 0) {\n                throw new Error(`Can't initiate negotiation without announcing any tracks`);\n            }\n            await this.pc.setLocalDescription(offer);\n            const { response } = await this.sfuClient.setPublisher({\n                sdp: offer.sdp || \"\",\n                tracks: trackInfos\n            });\n            try {\n                await this.pc.setRemoteDescription({\n                    type: \"answer\",\n                    sdp: response.sdp\n                });\n            } catch (e) {\n                logger$3(\"error\", `setRemoteDescription error`, {\n                    sdp: response.sdp,\n                    error: e\n                });\n            }\n            this.isIceRestarting = false;\n            this.sfuClient.iceTrickleBuffer.publisherCandidates.subscribe(async (candidate)=>{\n                try {\n                    const iceCandidate = JSON.parse(candidate.iceCandidate);\n                    await this.pc.addIceCandidate(iceCandidate);\n                } catch (e) {\n                    logger$3(\"warn\", `ICE candidate error`, [\n                        e,\n                        candidate\n                    ]);\n                }\n            });\n        };\n        this.mungeCodecs = (sdp)=>{\n            if (sdp) {\n                sdp = toggleDtx(sdp, this.isDtxEnabled);\n            }\n            return sdp;\n        };\n        this.extractMid = (sdp, track, trackType)=>{\n            if (!sdp) {\n                logger$3(\"warn\", \"No SDP found. Returning empty mid\");\n                return \"\";\n            }\n            logger$3(\"debug\", `No 'mid' found for track. Trying to find it from the Offer SDP`);\n            const parsedSdp = sdp_transform__WEBPACK_IMPORTED_MODULE_2__.parse(sdp);\n            const media = parsedSdp.media.find((m)=>{\n                return m.type === track.kind && // if `msid` is not present, we assume that the track is the first one\n                (m.msid?.includes(track.id) ?? true);\n            });\n            if (typeof media?.mid === \"undefined\") {\n                logger$3(\"debug\", `No mid found in SDP for track type ${track.kind} and id ${track.id}. Attempting to find a heuristic mid`);\n                const heuristicMid = this.transceiverInitOrder.indexOf(trackType);\n                if (heuristicMid !== -1) {\n                    return String(heuristicMid);\n                }\n                logger$3(\"debug\", \"No heuristic mid found. Returning empty mid\");\n                return \"\";\n            }\n            return String(media.mid);\n        };\n        this.getCurrentTrackInfos = (sdp)=>{\n            sdp = sdp || this.pc.localDescription?.sdp;\n            const { settings } = this.state;\n            const targetResolution = settings?.video.target_resolution;\n            return this.pc.getTransceivers().filter((t)=>t.direction === \"sendonly\" && t.sender.track).map((transceiver)=>{\n                const trackType = Number(Object.keys(this.transceiverRegistry).find((key)=>this.transceiverRegistry[key] === transceiver));\n                const track = transceiver.sender.track;\n                let optimalLayers;\n                if (track.readyState === \"live\") {\n                    const publishOpts = this.publishOptionsPerTrackType.get(trackType);\n                    optimalLayers = trackType === TrackType.VIDEO ? findOptimalVideoLayers(track, targetResolution) : trackType === TrackType.SCREEN_SHARE ? findOptimalScreenSharingLayers(track, publishOpts?.screenShareSettings) : [];\n                    this.trackLayersCache[trackType] = optimalLayers;\n                } else {\n                    // we report the last known optimal layers for ended tracks\n                    optimalLayers = this.trackLayersCache[trackType] || [];\n                    logger$3(\"debug\", `Track ${TrackType[trackType]} is ended. Announcing last known optimal layers`, optimalLayers);\n                }\n                const layers = optimalLayers.map((optimalLayer)=>({\n                        rid: optimalLayer.rid || \"\",\n                        bitrate: optimalLayer.maxBitrate || 0,\n                        fps: optimalLayer.maxFramerate || 0,\n                        quality: this.ridToVideoQuality(optimalLayer.rid || \"\"),\n                        videoDimension: {\n                            width: optimalLayer.width,\n                            height: optimalLayer.height\n                        }\n                    }));\n                const isAudioTrack = [\n                    TrackType.AUDIO,\n                    TrackType.SCREEN_SHARE_AUDIO\n                ].includes(trackType);\n                const trackSettings = track.getSettings();\n                const isStereo = isAudioTrack && trackSettings.channelCount === 2;\n                return {\n                    trackId: track.id,\n                    layers: layers,\n                    trackType,\n                    mid: transceiver.mid ?? this.extractMid(sdp, track, trackType),\n                    stereo: isStereo,\n                    dtx: isAudioTrack && this.isDtxEnabled,\n                    red: isAudioTrack && this.isRedEnabled\n                };\n            });\n        };\n        this.onIceCandidateError = (e)=>{\n            const errorMessage = e instanceof RTCPeerConnectionIceErrorEvent && `${e.errorCode}: ${e.errorText}`;\n            const logLevel = this.pc.iceConnectionState === \"connected\" ? \"debug\" : \"error\";\n            logger$3(logLevel, `ICE Candidate error`, errorMessage);\n        };\n        this.onIceConnectionStateChange = ()=>{\n            const state = this.pc.iceConnectionState;\n            logger$3(\"debug\", `ICE Connection state changed to`, state);\n            const hasNetworkConnection = this.state.callingState !== CallingState.OFFLINE;\n            if (state === \"failed\") {\n                logger$3(\"warn\", `Attempting to restart ICE`);\n                this.restartIce().catch((e)=>{\n                    logger$3(\"error\", `ICE restart error`, e);\n                });\n            } else if (state === \"disconnected\" && hasNetworkConnection) {\n                // when in `disconnected` state, the browser may recover automatically,\n                // hence, we delay the ICE restart\n                logger$3(\"warn\", `Scheduling ICE restart in ${this.iceRestartDelay} ms.`);\n                this.iceRestartTimeout = setTimeout(()=>{\n                    // check if the state is still `disconnected` or `failed`\n                    // as the connection may have recovered (or failed) in the meantime\n                    if (this.pc.iceConnectionState === \"disconnected\" || this.pc.iceConnectionState === \"failed\") {\n                        this.restartIce().catch((e)=>{\n                            logger$3(\"error\", `ICE restart error`, e);\n                        });\n                    } else {\n                        logger$3(\"debug\", `Scheduled ICE restart: connection recovered, canceled.`);\n                    }\n                }, this.iceRestartDelay);\n            }\n        };\n        this.onIceGatheringStateChange = ()=>{\n            logger$3(\"debug\", `ICE Gathering State`, this.pc.iceGatheringState);\n        };\n        this.onSignalingStateChange = ()=>{\n            logger$3(\"debug\", `Signaling state changed`, this.pc.signalingState);\n        };\n        this.ridToVideoQuality = (rid)=>{\n            return rid === \"q\" ? VideoQuality.LOW_UNSPECIFIED : rid === \"h\" ? VideoQuality.MID : VideoQuality.HIGH; // default to HIGH\n        };\n        this.pc = this.createPeerConnection(connectionConfig);\n        this.sfuClient = sfuClient;\n        this.state = state;\n        this.isDtxEnabled = isDtxEnabled;\n        this.isRedEnabled = isRedEnabled;\n        this.iceRestartDelay = iceRestartDelay;\n        this.unsubscribeOnIceRestart = dispatcher.on(\"iceRestart\", async (iceRestart)=>{\n            if (iceRestart.peerType !== PeerType.PUBLISHER_UNSPECIFIED) return;\n            await this.restartIce();\n        });\n    }\n}\nconst logger$2 = getLogger([\n    \"Subscriber\"\n]);\n/**\n * A wrapper around the `RTCPeerConnection` that handles the incoming\n * media streams from the SFU.\n */ class Subscriber {\n    /**\n     * Returns the current connection configuration.\n     *\n     * @internal\n     */ get connectionConfiguration() {\n        if (this.pc.getConfiguration) return this.pc.getConfiguration();\n        return this._connectionConfiguration;\n    }\n    /**\n     * Constructs a new `Subscriber` instance.\n     *\n     * @param sfuClient the SFU client to use.\n     * @param dispatcher the dispatcher to use.\n     * @param state the state of the call.\n     * @param connectionConfig the connection configuration to use.\n     * @param iceRestartDelay the delay in milliseconds to wait before restarting ICE when connection goes to `disconnected` state.\n     */ constructor({ sfuClient, dispatcher, state, connectionConfig, iceRestartDelay = 2500 }){\n        this.isIceRestarting = false;\n        /**\n         * Creates a new `RTCPeerConnection` instance with the given configuration.\n         *\n         * @param connectionConfig the connection configuration to use.\n         */ this.createPeerConnection = (connectionConfig)=>{\n            const pc = new RTCPeerConnection(connectionConfig);\n            this._connectionConfiguration = connectionConfig;\n            pc.addEventListener(\"icecandidate\", this.onIceCandidate);\n            pc.addEventListener(\"track\", this.handleOnTrack);\n            pc.addEventListener(\"icecandidateerror\", this.onIceCandidateError);\n            pc.addEventListener(\"iceconnectionstatechange\", this.onIceConnectionStateChange);\n            pc.addEventListener(\"icegatheringstatechange\", this.onIceGatheringStateChange);\n            return pc;\n        };\n        /**\n         * Closes the `RTCPeerConnection` and unsubscribes from the dispatcher.\n         */ this.close = ()=>{\n            clearTimeout(this.iceRestartTimeout);\n            this.unregisterOnSubscriberOffer();\n            this.unregisterOnIceRestart();\n            this.pc.close();\n        };\n        /**\n         * Returns the result of the `RTCPeerConnection.getStats()` method\n         * @param selector\n         * @returns\n         */ this.getStats = (selector)=>{\n            return this.pc.getStats(selector);\n        };\n        /**\n         * Sets the SFU client to use.\n         *\n         * @param sfuClient the SFU client to use.\n         */ this.setSfuClient = (sfuClient)=>{\n            this.sfuClient = sfuClient;\n        };\n        /**\n         * Migrates the subscriber to a new SFU client.\n         *\n         * @param sfuClient the new SFU client to migrate to.\n         * @param connectionConfig the new connection configuration to use.\n         */ this.migrateTo = (sfuClient, connectionConfig)=>{\n            this.setSfuClient(sfuClient);\n            // when migrating, we want to keep the previous subscriber open\n            // until the new one is connected\n            const previousPC = this.pc;\n            // we keep a record of previously available video tracks\n            // so that we can monitor when they become available on the new\n            // subscriber and close the previous one.\n            const trackIdsToMigrate = new Set();\n            previousPC.getReceivers().forEach((r)=>{\n                if (r.track.kind === \"video\") {\n                    trackIdsToMigrate.add(r.track.id);\n                }\n            });\n            // set up a new subscriber peer connection, configured to connect\n            // to the new SFU node\n            const pc = this.createPeerConnection(connectionConfig);\n            let migrationTimeoutId;\n            const cleanupMigration = ()=>{\n                previousPC.close();\n                clearTimeout(migrationTimeoutId);\n            };\n            // When migrating, we want to keep track of the video tracks\n            // that are migrating to the new subscriber.\n            // Once all of them are available, we can close the previous subscriber.\n            const handleTrackMigration = (e)=>{\n                logger$2(\"debug\", `[Migration]: Migrated track: ${e.track.id}, ${e.track.kind}`);\n                trackIdsToMigrate.delete(e.track.id);\n                if (trackIdsToMigrate.size === 0) {\n                    logger$2(\"debug\", `[Migration]: Migration complete`);\n                    pc.removeEventListener(\"track\", handleTrackMigration);\n                    cleanupMigration();\n                }\n            };\n            // When migrating, we want to keep track of the connection state\n            // of the new subscriber.\n            // Once it is connected, we give it a 2-second grace period to receive\n            // all the video tracks that are migrating from the previous subscriber.\n            // After this threshold, we abruptly close the previous subscriber.\n            const handleConnectionStateChange = ()=>{\n                if (pc.connectionState === \"connected\") {\n                    migrationTimeoutId = setTimeout(()=>{\n                        pc.removeEventListener(\"track\", handleTrackMigration);\n                        cleanupMigration();\n                    }, 2000);\n                    pc.removeEventListener(\"connectionstatechange\", handleConnectionStateChange);\n                }\n            };\n            pc.addEventListener(\"track\", handleTrackMigration);\n            pc.addEventListener(\"connectionstatechange\", handleConnectionStateChange);\n            // replace the PeerConnection instance\n            this.pc = pc;\n        };\n        /**\n         * Restarts the ICE connection and renegotiates with the SFU.\n         */ this.restartIce = async ()=>{\n            logger$2(\"debug\", \"Restarting ICE connection\");\n            if (this.pc.signalingState === \"have-remote-offer\") {\n                logger$2(\"debug\", \"ICE restart is already in progress\");\n                return;\n            }\n            const previousIsIceRestarting = this.isIceRestarting;\n            try {\n                this.isIceRestarting = true;\n                await this.sfuClient.iceRestart({\n                    peerType: PeerType.SUBSCRIBER\n                });\n            } catch (e) {\n                // restore the previous state, as our intent for restarting ICE failed\n                this.isIceRestarting = previousIsIceRestarting;\n                throw e;\n            }\n        };\n        this.handleOnTrack = (e)=>{\n            const [primaryStream] = e.streams;\n            // example: `e3f6aaf8-b03d-4911-be36-83f47d37a76a:TRACK_TYPE_VIDEO`\n            const [trackId, trackType] = primaryStream.id.split(\":\");\n            const participantToUpdate = this.state.participants.find((p)=>p.trackLookupPrefix === trackId);\n            logger$2(\"debug\", `[onTrack]: Got remote ${trackType} track for userId: ${participantToUpdate?.userId}`, e.track.id, e.track);\n            if (!participantToUpdate) {\n                logger$2(\"error\", `[onTrack]: Received track for unknown participant: ${trackId}`, e);\n                return;\n            }\n            e.track.addEventListener(\"mute\", ()=>{\n                logger$2(\"info\", `[onTrack]: Track muted: ${participantToUpdate.userId} ${trackType}:${trackId}`);\n            });\n            e.track.addEventListener(\"unmute\", ()=>{\n                logger$2(\"info\", `[onTrack]: Track unmuted: ${participantToUpdate.userId} ${trackType}:${trackId}`);\n            });\n            e.track.addEventListener(\"ended\", ()=>{\n                logger$2(\"info\", `[onTrack]: Track ended: ${participantToUpdate.userId} ${trackType}:${trackId}`);\n            });\n            const streamKindProp = {\n                TRACK_TYPE_AUDIO: \"audioStream\",\n                TRACK_TYPE_VIDEO: \"videoStream\",\n                TRACK_TYPE_SCREEN_SHARE: \"screenShareStream\",\n                TRACK_TYPE_SCREEN_SHARE_AUDIO: \"screenShareAudioStream\"\n            }[trackType];\n            if (!streamKindProp) {\n                logger$2(\"error\", `Unknown track type: ${trackType}`);\n                return;\n            }\n            const previousStream = participantToUpdate[streamKindProp];\n            if (previousStream) {\n                logger$2(\"info\", `[onTrack]: Cleaning up previous remote ${e.track.kind} tracks for userId: ${participantToUpdate.userId}`);\n                previousStream.getTracks().forEach((t)=>{\n                    t.stop();\n                    previousStream.removeTrack(t);\n                });\n            }\n            this.state.updateParticipant(participantToUpdate.sessionId, {\n                [streamKindProp]: primaryStream\n            });\n        };\n        this.onIceCandidate = async (e)=>{\n            const { candidate } = e;\n            if (!candidate) {\n                logger$2(\"debug\", \"null ice candidate\");\n                return;\n            }\n            await this.sfuClient.iceTrickle({\n                iceCandidate: getIceCandidate(candidate),\n                peerType: PeerType.SUBSCRIBER\n            });\n        };\n        this.negotiate = async (subscriberOffer)=>{\n            logger$2(\"info\", `Received subscriberOffer`, subscriberOffer);\n            await this.pc.setRemoteDescription({\n                type: \"offer\",\n                sdp: subscriberOffer.sdp\n            });\n            this.sfuClient.iceTrickleBuffer.subscriberCandidates.subscribe(async (candidate)=>{\n                try {\n                    const iceCandidate = JSON.parse(candidate.iceCandidate);\n                    await this.pc.addIceCandidate(iceCandidate);\n                } catch (e) {\n                    logger$2(\"warn\", `ICE candidate error`, [\n                        e,\n                        candidate\n                    ]);\n                }\n            });\n            const answer = await this.pc.createAnswer();\n            await this.pc.setLocalDescription(answer);\n            await this.sfuClient.sendAnswer({\n                peerType: PeerType.SUBSCRIBER,\n                sdp: answer.sdp || \"\"\n            });\n            this.isIceRestarting = false;\n        };\n        this.onIceConnectionStateChange = ()=>{\n            const state = this.pc.iceConnectionState;\n            logger$2(\"debug\", `ICE connection state changed`, state);\n            // do nothing when ICE is restarting\n            if (this.isIceRestarting) return;\n            const hasNetworkConnection = this.state.callingState !== CallingState.OFFLINE;\n            if (state === \"failed\") {\n                logger$2(\"warn\", `Attempting to restart ICE`);\n                this.restartIce().catch((e)=>{\n                    logger$2(\"error\", `ICE restart failed`, e);\n                });\n            } else if (state === \"disconnected\" && hasNetworkConnection) {\n                // when in `disconnected` state, the browser may recover automatically,\n                // hence, we delay the ICE restart\n                logger$2(\"warn\", `Scheduling ICE restart in ${this.iceRestartDelay} ms.`);\n                this.iceRestartTimeout = setTimeout(()=>{\n                    // check if the state is still `disconnected` or `failed`\n                    // as the connection may have recovered (or failed) in the meantime\n                    if (this.pc.iceConnectionState === \"disconnected\" || this.pc.iceConnectionState === \"failed\") {\n                        this.restartIce().catch((e)=>{\n                            logger$2(\"error\", `ICE restart failed`, e);\n                        });\n                    } else {\n                        logger$2(\"debug\", `Scheduled ICE restart: connection recovered, canceled.`);\n                    }\n                }, 5000);\n            }\n        };\n        this.onIceGatheringStateChange = ()=>{\n            logger$2(\"debug\", `ICE gathering state changed`, this.pc.iceGatheringState);\n        };\n        this.onIceCandidateError = (e)=>{\n            const errorMessage = e instanceof RTCPeerConnectionIceErrorEvent && `${e.errorCode}: ${e.errorText}`;\n            const logLevel = this.pc.iceConnectionState === \"connected\" ? \"debug\" : \"error\";\n            logger$2(logLevel, `ICE Candidate error`, errorMessage);\n        };\n        this.sfuClient = sfuClient;\n        this.state = state;\n        this.iceRestartDelay = iceRestartDelay;\n        this.pc = this.createPeerConnection(connectionConfig);\n        this.unregisterOnSubscriberOffer = dispatcher.on(\"subscriberOffer\", async (subscriberOffer)=>{\n            await this.negotiate(subscriberOffer);\n        });\n        this.unregisterOnIceRestart = dispatcher.on(\"iceRestart\", async (iceRestart)=>{\n            if (iceRestart.peerType !== PeerType.SUBSCRIBER) return;\n            await this.restartIce();\n        });\n    }\n}\nconst createWebSocketSignalChannel = (opts)=>{\n    const logger = getLogger([\n        \"sfu-client\"\n    ]);\n    const { endpoint, onMessage } = opts;\n    const ws = new (isomorphic_ws__WEBPACK_IMPORTED_MODULE_4___default())(endpoint);\n    ws.binaryType = \"arraybuffer\"; // do we need this?\n    ws.addEventListener(\"error\", (e)=>{\n        logger(\"error\", \"Signaling WS channel error\", e);\n    });\n    ws.addEventListener(\"close\", (e)=>{\n        logger(\"info\", \"Signaling WS channel is closed\", e);\n    });\n    ws.addEventListener(\"open\", (e)=>{\n        logger(\"info\", \"Signaling WS channel is open\", e);\n    });\n    ws.addEventListener(\"message\", (e)=>{\n        try {\n            const message = e.data instanceof ArrayBuffer ? SfuEvent.fromBinary(new Uint8Array(e.data)) : SfuEvent.fromJsonString(e.data.toString());\n            onMessage(message);\n        } catch (err) {\n            logger(\"error\", \"Failed to decode a message. Check whether the Proto models match.\", {\n                event: e,\n                error: err\n            });\n        }\n    });\n    return ws;\n};\nconst sleep = (m)=>new Promise((r)=>setTimeout(r, m));\nfunction isFunction(value) {\n    return value && (Object.prototype.toString.call(value) === \"[object Function]\" || \"function\" === typeof value || value instanceof Function);\n}\n/**\n * A map of known error codes.\n */ const KnownCodes = {\n    TOKEN_EXPIRED: 40,\n    WS_CLOSED_SUCCESS: 1000,\n    WS_CLOSED_ABRUPTLY: 1006,\n    WS_POLICY_VIOLATION: 1008\n};\n/**\n * retryInterval - A retry interval which increases acc to number of failures\n *\n * @return {number} Duration to wait in milliseconds\n */ function retryInterval(numberOfFailures) {\n    // try to reconnect in 0.25-5 seconds (random to spread out the load from failures)\n    const max = Math.min(500 + numberOfFailures * 2000, 5000);\n    const min = Math.min(Math.max(250, (numberOfFailures - 1) * 2000), 5000);\n    return Math.floor(Math.random() * (max - min) + min);\n}\nfunction randomId() {\n    return generateUUIDv4();\n}\nfunction hex(bytes) {\n    let s = \"\";\n    for(let i = 0; i < bytes.length; i++){\n        s += bytes[i].toString(16).padStart(2, \"0\");\n    }\n    return s;\n}\n// https://tools.ietf.org/html/rfc4122\nfunction generateUUIDv4() {\n    const bytes = getRandomBytes(16);\n    bytes[6] = bytes[6] & 0x0f | 0x40; // version\n    bytes[8] = bytes[8] & 0xbf | 0x80; // variant\n    return hex(bytes.subarray(0, 4)) + \"-\" + hex(bytes.subarray(4, 6)) + \"-\" + hex(bytes.subarray(6, 8)) + \"-\" + hex(bytes.subarray(8, 10)) + \"-\" + hex(bytes.subarray(10, 16));\n}\nfunction getRandomValuesWithMathRandom(bytes) {\n    const max = Math.pow(2, 8 * bytes.byteLength / bytes.length);\n    for(let i = 0; i < bytes.length; i++){\n        bytes[i] = Math.random() * max;\n    }\n}\nconst getRandomValues = (()=>{\n    if (typeof crypto !== \"undefined\" && typeof crypto?.getRandomValues !== \"undefined\") {\n        return crypto.getRandomValues.bind(crypto);\n    } else if (typeof msCrypto !== \"undefined\") {\n        return msCrypto.getRandomValues.bind(msCrypto);\n    } else {\n        return getRandomValuesWithMathRandom;\n    }\n})();\nfunction getRandomBytes(length) {\n    const bytes = new Uint8Array(length);\n    getRandomValues(bytes);\n    return bytes;\n}\nfunction convertErrorToJson(err) {\n    const jsonObj = {};\n    if (!err) return jsonObj;\n    try {\n        Object.getOwnPropertyNames(err).forEach((key)=>{\n            jsonObj[key] = Object.getOwnPropertyDescriptor(err, key);\n        });\n    } catch (_) {\n        return {\n            error: \"failed to serialize the error\"\n        };\n    }\n    return jsonObj;\n}\n/**\n * isOnline safely return the navigator.online value for browser env\n * if navigator is not in global object, it always return true\n */ function isOnline(logger) {\n    const nav = typeof navigator !== \"undefined\" ? navigator :  false ? 0 : undefined;\n    if (!nav) {\n        logger(\"warn\", \"isOnline failed to access window.navigator and assume browser is online\");\n        return true;\n    }\n    // RN navigator has undefined for onLine\n    if (typeof nav.onLine !== \"boolean\") {\n        return true;\n    }\n    return nav.onLine;\n}\n/**\n * listenForConnectionChanges - Adds an event listener fired on browser going online or offline\n */ function addConnectionEventListeners(cb) {\n    if (false) {}\n}\nfunction removeConnectionEventListeners(cb) {\n    if (false) {}\n}\n/**\n * The client used for exchanging information with the SFU.\n */ class StreamSfuClient {\n    /**\n     * Constructs a new SFU client.\n     *\n     * @param dispatcher the event dispatcher to use.\n     * @param sfuServer the SFU server to connect to.\n     * @param token the JWT token to use for authentication.\n     * @param sessionId the `sessionId` of the currently connected participant.\n     */ constructor({ dispatcher, sfuServer, token, sessionId }){\n        /**\n         * A buffer for ICE Candidates that are received before\n         * the PeerConnections are ready to handle them.\n         */ this.iceTrickleBuffer = new IceTrickleBuffer();\n        /**\n         * A flag indicating whether the client is currently migrating away\n         * from this SFU.\n         */ this.isMigratingAway = false;\n        /**\n         * A flag indicating that the client connection is broken for the current\n         * client and that a fast-reconnect with a new client should be attempted.\n         */ this.isFastReconnecting = false;\n        this.pingIntervalInMs = 10 * 1000;\n        this.unhealthyTimeoutInMs = this.pingIntervalInMs + 5 * 1000;\n        this.close = (code = StreamSfuClient.NORMAL_CLOSURE, reason = \"js-client: requested signal connection close\")=>{\n            this.logger(\"debug\", \"Closing SFU WS connection\", code, reason);\n            if (this.signalWs.readyState !== this.signalWs.CLOSED) {\n                this.signalWs.close(code, reason);\n            }\n            this.unsubscribeIceTrickle();\n            clearInterval(this.keepAliveInterval);\n            clearTimeout(this.connectionCheckTimeout);\n        };\n        this.updateSubscriptions = async (subscriptions)=>{\n            return retryable(()=>this.rpc.updateSubscriptions({\n                    sessionId: this.sessionId,\n                    tracks: subscriptions\n                }), this.logger);\n        };\n        this.setPublisher = async (data)=>{\n            return retryable(()=>this.rpc.setPublisher({\n                    ...data,\n                    sessionId: this.sessionId\n                }), this.logger);\n        };\n        this.sendAnswer = async (data)=>{\n            return retryable(()=>this.rpc.sendAnswer({\n                    ...data,\n                    sessionId: this.sessionId\n                }), this.logger);\n        };\n        this.iceTrickle = async (data)=>{\n            return retryable(()=>this.rpc.iceTrickle({\n                    ...data,\n                    sessionId: this.sessionId\n                }), this.logger);\n        };\n        this.iceRestart = async (data)=>{\n            return retryable(()=>this.rpc.iceRestart({\n                    ...data,\n                    sessionId: this.sessionId\n                }), this.logger);\n        };\n        this.updateMuteState = async (trackType, muted)=>{\n            return this.updateMuteStates({\n                muteStates: [\n                    {\n                        trackType,\n                        muted\n                    }\n                ]\n            });\n        };\n        this.updateMuteStates = async (data)=>{\n            return retryable(()=>this.rpc.updateMuteStates({\n                    ...data,\n                    sessionId: this.sessionId\n                }), this.logger);\n        };\n        this.join = async (data)=>{\n            const joinRequest = JoinRequest.create({\n                ...data,\n                sessionId: this.sessionId,\n                token: this.token\n            });\n            return this.send(SfuRequest.create({\n                requestPayload: {\n                    oneofKind: \"joinRequest\",\n                    joinRequest\n                }\n            }));\n        };\n        this.send = async (message)=>{\n            return this.signalReady.then((signal)=>{\n                if (signal.readyState !== signal.OPEN) return;\n                this.logger(\"debug\", `Sending message to: ${this.edgeName}`, SfuRequest.toJson(message));\n                signal.send(SfuRequest.toBinary(message));\n            });\n        };\n        this.keepAlive = ()=>{\n            clearInterval(this.keepAliveInterval);\n            this.keepAliveInterval = setInterval(()=>{\n                this.logger(\"trace\", \"Sending healthCheckRequest to SFU\");\n                const message = SfuRequest.create({\n                    requestPayload: {\n                        oneofKind: \"healthCheckRequest\",\n                        healthCheckRequest: {}\n                    }\n                });\n                this.send(message).catch((e)=>{\n                    this.logger(\"error\", \"Error sending healthCheckRequest to SFU\", e);\n                });\n            }, this.pingIntervalInMs);\n        };\n        this.scheduleConnectionCheck = ()=>{\n            clearTimeout(this.connectionCheckTimeout);\n            this.connectionCheckTimeout = setTimeout(()=>{\n                if (this.lastMessageTimestamp) {\n                    const timeSinceLastMessage = new Date().getTime() - this.lastMessageTimestamp.getTime();\n                    if (timeSinceLastMessage > this.unhealthyTimeoutInMs) {\n                        this.close(StreamSfuClient.ERROR_CONNECTION_UNHEALTHY, `SFU connection unhealthy. Didn't receive any message for ${this.unhealthyTimeoutInMs}ms`);\n                    }\n                }\n            }, this.unhealthyTimeoutInMs);\n        };\n        this.sessionId = sessionId || generateUUIDv4();\n        this.sfuServer = sfuServer;\n        this.edgeName = sfuServer.edge_name;\n        this.token = token;\n        this.logger = getLogger([\n            \"sfu-client\"\n        ]);\n        const logInterceptor = {\n            interceptUnary: (next, method, input, options)=>{\n                this.logger(\"trace\", `Calling SFU RPC method ${method.name}`, {\n                    input,\n                    options\n                });\n                return next(method, input, options);\n            }\n        };\n        this.rpc = createSignalClient({\n            baseUrl: sfuServer.url,\n            interceptors: [\n                withHeaders({\n                    Authorization: `Bearer ${token}`\n                }),\n                logInterceptor\n            ]\n        });\n        // Special handling for the ICETrickle kind of events.\n        // These events might be triggered by the SFU before the initial RTC\n        // connection is established. In that case, those events (ICE candidates)\n        // need to be buffered and later added to the appropriate PeerConnection\n        // once the remoteDescription is known and set.\n        this.unsubscribeIceTrickle = dispatcher.on(\"iceTrickle\", (iceTrickle)=>{\n            this.iceTrickleBuffer.push(iceTrickle);\n        });\n        this.signalWs = createWebSocketSignalChannel({\n            endpoint: sfuServer.ws_endpoint,\n            onMessage: (message)=>{\n                this.lastMessageTimestamp = new Date();\n                this.scheduleConnectionCheck();\n                dispatcher.dispatch(message);\n            }\n        });\n        this.signalReady = new Promise((resolve)=>{\n            const onOpen = ()=>{\n                this.signalWs.removeEventListener(\"open\", onOpen);\n                this.keepAlive();\n                resolve(this.signalWs);\n            };\n            this.signalWs.addEventListener(\"open\", onOpen);\n        });\n    }\n}\n/**\n * The normal closure code. Used for controlled shutdowns.\n */ StreamSfuClient.NORMAL_CLOSURE = 1000;\n/**\n * The error code used when the SFU connection is unhealthy.\n * Usually, this means that no message has been received from the SFU for\n * a certain amount of time (`connectionCheckTimeout`).\n */ StreamSfuClient.ERROR_CONNECTION_UNHEALTHY = 4001;\n/**\n * The error code used when the SFU connection is broken.\n * Usually, this means that the WS connection has been closed unexpectedly.\n * This error code is used to announce a fast-reconnect.\n */ StreamSfuClient.ERROR_CONNECTION_BROKEN = 4002; // used in fast-reconnects\nconst MAX_RETRIES = 5;\n/**\n * Creates a closure which wraps the given RPC call and retries invoking\n * the RPC until it succeeds or the maximum number of retries is reached.\n *\n * Between each retry, there would be a random delay in order to avoid\n * request bursts towards the SFU.\n *\n * @param rpc the closure around the RPC call to execute.\n * @param logger a logger instance to use.\n * @param <I> the type of the request object.\n * @param <O> the type of the response object.\n */ const retryable = async (rpc, logger)=>{\n    let retryAttempt = 0;\n    let rpcCallResult;\n    do {\n        // don't delay the first invocation\n        if (retryAttempt > 0) {\n            await sleep(retryInterval(retryAttempt));\n        }\n        rpcCallResult = await rpc();\n        logger(\"trace\", `SFU RPC response received for ${rpcCallResult.method.name}`, rpcCallResult);\n        // if the RPC call failed, log the error and retry\n        if (rpcCallResult.response.error) {\n            logger(\"error\", `SFU RPC Error (${rpcCallResult.method.name}):`, rpcCallResult.response.error);\n        }\n        retryAttempt++;\n    }while (rpcCallResult.response.error?.shouldRetry && retryAttempt < MAX_RETRIES);\n    if (rpcCallResult.response.error) {\n        throw rpcCallResult.response.error;\n    }\n    return rpcCallResult;\n};\n/**\n * Event handler that watched the delivery of `call.accepted`.\n * Once the event is received, the call is joined.\n */ const watchCallAccepted = (call)=>{\n    return async function onCallAccepted(event) {\n        // We want to discard the event if it's from the current user\n        if (event.user.id === call.currentUserId) return;\n        const { state } = call;\n        if (event.call.created_by.id === call.currentUserId && state.callingState === CallingState.RINGING) {\n            await call.join();\n        }\n    };\n};\n/**\n * Event handler that watches delivery of `call.rejected` Websocket event.\n * Once the event is received, the call is left.\n */ const watchCallRejected = (call)=>{\n    return async function onCallRejected(event) {\n        // We want to discard the event if it's from the current user\n        if (event.user.id === call.currentUserId) return;\n        const { call: eventCall } = event;\n        const { session: callSession } = eventCall;\n        if (!callSession) {\n            call.logger(\"warn\", \"No call session provided. Ignoring call.rejected event.\", event);\n            return;\n        }\n        const rejectedBy = callSession.rejected_by;\n        const { members, callingState } = call.state;\n        if (callingState !== CallingState.RINGING) {\n            call.logger(\"info\", \"Call is not in ringing mode (it is either accepted or rejected already). Ignoring call.rejected event.\", event);\n            return;\n        }\n        if (call.isCreatedByMe) {\n            const everyoneElseRejected = members.filter((m)=>m.user_id !== call.currentUserId).every((m)=>rejectedBy[m.user_id]);\n            if (everyoneElseRejected) {\n                call.logger(\"info\", \"everyone rejected, leaving the call\");\n                await call.leave();\n            }\n        } else {\n            if (rejectedBy[eventCall.created_by.id]) {\n                call.logger(\"info\", \"call creator rejected, leaving call\");\n                await call.leave();\n            }\n        }\n    };\n};\n/**\n * Event handler that watches the delivery of `call.ended` Websocket event.\n */ const watchCallEnded = (call)=>{\n    return async function onCallEnded() {\n        const { callingState } = call.state;\n        if (callingState === CallingState.RINGING || callingState === CallingState.JOINED || callingState === CallingState.JOINING) {\n            await call.leave();\n        }\n    };\n};\n/**\n * Event handler that watches for `callGrantsUpdated` events.\n *\n * @param state the call state to update.\n */ const watchCallGrantsUpdated = (state)=>{\n    return function onCallGrantsUpdated(event) {\n        const { currentGrants } = event;\n        if (currentGrants) {\n            const { canPublishAudio, canPublishVideo, canScreenshare } = currentGrants;\n            const update = {\n                [OwnCapability.SEND_AUDIO]: canPublishAudio,\n                [OwnCapability.SEND_VIDEO]: canPublishVideo,\n                [OwnCapability.SCREENSHARE]: canScreenshare\n            };\n            const nextCapabilities = state.ownCapabilities.filter((capability)=>update[capability] !== false);\n            Object.entries(update).forEach(([capability, value])=>{\n                if (value && !nextCapabilities.includes(capability)) {\n                    nextCapabilities.push(capability);\n                }\n            });\n            state.setOwnCapabilities(nextCapabilities);\n        }\n    };\n};\nconst logger$1 = getLogger([\n    \"events\"\n]);\n/**\n * An event responder which handles the `changePublishQuality` event.\n */ const watchChangePublishQuality = (dispatcher, call)=>{\n    return dispatcher.on(\"changePublishQuality\", (e)=>{\n        const { videoSenders } = e;\n        videoSenders.forEach((videoSender)=>{\n            const { layers } = videoSender;\n            call.updatePublishQuality(layers.filter((l)=>l.active));\n        });\n    });\n};\nconst watchConnectionQualityChanged = (dispatcher, state)=>{\n    return dispatcher.on(\"connectionQualityChanged\", (e)=>{\n        const { connectionQualityUpdates } = e;\n        if (!connectionQualityUpdates) return;\n        state.updateParticipants(connectionQualityUpdates.reduce((patches, update)=>{\n            const { sessionId, connectionQuality } = update;\n            patches[sessionId] = {\n                connectionQuality\n            };\n            return patches;\n        }, {}));\n    });\n};\n/**\n * Updates the approximate number of participants in the call by peeking at the\n * health check events that our SFU sends.\n */ const watchParticipantCountChanged = (dispatcher, state)=>{\n    return dispatcher.on(\"healthCheckResponse\", (e)=>{\n        const { participantCount } = e;\n        if (participantCount) {\n            state.setParticipantCount(participantCount.total);\n            state.setAnonymousParticipantCount(participantCount.anonymous);\n        }\n    });\n};\nconst watchLiveEnded = (dispatcher, call)=>{\n    return dispatcher.on(\"error\", (e)=>{\n        if (e.error && e.error.code !== ErrorCode.LIVE_ENDED) return;\n        if (!call.permissionsContext.hasPermission(OwnCapability.JOIN_BACKSTAGE)) {\n            call.leave().catch((err)=>{\n                logger$1(\"error\", \"Failed to leave call after live ended\", err);\n            });\n        }\n    });\n};\n/**\n * Watches and logs the errors reported by the currently connected SFU.\n */ const watchSfuErrorReports = (dispatcher)=>{\n    return dispatcher.on(\"error\", (e)=>{\n        if (!e.error) return;\n        const { error } = e;\n        logger$1(\"error\", \"SFU reported error\", {\n            code: ErrorCode[error.code],\n            message: error.message,\n            shouldRetry: error.shouldRetry\n        });\n    });\n};\n/**\n * Watches for `pinsUpdated` events and updates the pinned state of participants\n * in the call.\n */ const watchPinsUpdated = (state)=>{\n    return function onPinsUpdated(e) {\n        const { pins } = e;\n        state.setServerSidePins(pins);\n    };\n};\n/**\n * An event handler that handles soft mutes.\n *\n * @param call the call.\n */ const handleRemoteSoftMute = (call)=>{\n    return call.on(\"trackUnpublished\", async (event)=>{\n        const { cause, type, sessionId } = event;\n        const { localParticipant } = call.state;\n        if (cause === TrackUnpublishReason.MODERATION && sessionId === localParticipant?.sessionId) {\n            const logger = call.logger;\n            logger(\"info\", `Local participant's ${TrackType[type]} track is muted remotely`);\n            try {\n                if (type === TrackType.VIDEO) {\n                    await call.camera.disable();\n                } else if (type === TrackType.AUDIO) {\n                    await call.microphone.disable();\n                } else {\n                    logger(\"warn\", \"Unsupported track type to soft mute\", TrackType[type]);\n                }\n                if (call.publisher?.isPublishing(type)) {\n                    await call.stopPublish(type);\n                }\n            } catch (error) {\n                logger(\"error\", \"Failed to stop publishing\", error);\n            }\n        }\n    });\n};\n/**\n * An event responder which handles the `participantJoined` event.\n */ const watchParticipantJoined = (state)=>{\n    return function onParticipantJoined(e) {\n        const { participant } = e;\n        if (!participant) return;\n        // `state.updateOrAddParticipant` acts as a safeguard against\n        // potential duplicate events from the SFU.\n        //\n        // Although the SFU should not send duplicate events, we have seen\n        // some race conditions in the past during the `join-flow` where\n        // the SFU would send participant info as part of the `join`\n        // response and then follow up with a `participantJoined` event for\n        // already announced participants.\n        state.updateOrAddParticipant(participant.sessionId, Object.assign(participant, {\n            viewportVisibilityState: {\n                videoTrack: VisibilityState.UNKNOWN,\n                screenShareTrack: VisibilityState.UNKNOWN\n            }\n        }));\n    };\n};\n/**\n * An event responder which handles the `participantLeft` event.\n */ const watchParticipantLeft = (state)=>{\n    return function onParticipantLeft(e) {\n        const { participant } = e;\n        if (!participant) return;\n        state.setParticipants((participants)=>participants.filter((p)=>p.sessionId !== participant.sessionId));\n    };\n};\n/**\n * An event responder which handles the `trackPublished` event.\n * The SFU will send this event when a participant publishes a track.\n */ const watchTrackPublished = (state)=>{\n    return function onTrackPublished(e) {\n        const { type, sessionId, participant } = e;\n        // An optimization for large calls.\n        // After a certain threshold, the SFU would stop emitting `participantJoined`\n        // events, and instead, it would only provide the participant's information\n        // once they start publishing a track.\n        if (participant) {\n            state.updateOrAddParticipant(sessionId, participant);\n        } else {\n            state.updateParticipant(sessionId, (p)=>({\n                    publishedTracks: [\n                        ...p.publishedTracks,\n                        type\n                    ].filter(unique)\n                }));\n        }\n    };\n};\n/**\n * An event responder which handles the `trackUnpublished` event.\n * The SFU will send this event when a participant unpublishes a track.\n */ const watchTrackUnpublished = (state)=>{\n    return function onTrackUnpublished(e) {\n        const { type, sessionId, participant } = e;\n        // An optimization for large calls. See `watchTrackPublished`.\n        if (participant) {\n            state.updateOrAddParticipant(sessionId, participant);\n        } else {\n            state.updateParticipant(sessionId, (p)=>({\n                    publishedTracks: p.publishedTracks.filter((t)=>t !== type)\n                }));\n        }\n    };\n};\nconst unique = (v, i, arr)=>arr.indexOf(v) === i;\n/**\n * Watches for `dominantSpeakerChanged` events.\n */ const watchDominantSpeakerChanged = (dispatcher, state)=>{\n    return dispatcher.on(\"dominantSpeakerChanged\", (e)=>{\n        const { sessionId } = e;\n        if (sessionId === state.dominantSpeaker?.sessionId) return;\n        state.setParticipants((participants)=>participants.map((participant)=>{\n                // mark the new dominant speaker\n                if (participant.sessionId === sessionId) {\n                    return {\n                        ...participant,\n                        isDominantSpeaker: true\n                    };\n                }\n                // unmark the old dominant speaker\n                if (participant.isDominantSpeaker) {\n                    return {\n                        ...participant,\n                        isDominantSpeaker: false\n                    };\n                }\n                return participant; // no change\n            }));\n    });\n};\n/**\n * Watches for `audioLevelChanged` events.\n */ const watchAudioLevelChanged = (dispatcher, state)=>{\n    return dispatcher.on(\"audioLevelChanged\", (e)=>{\n        const { audioLevels } = e;\n        state.updateParticipants(audioLevels.reduce((patches, current)=>{\n            patches[current.sessionId] = {\n                audioLevel: current.level,\n                isSpeaking: current.isSpeaking\n            };\n            return patches;\n        }, {}));\n    });\n};\n/**\n * Registers the default event handlers for a call during its lifecycle.\n *\n * @param call the call to register event handlers for.\n * @param state the call state.\n * @param dispatcher the dispatcher.\n */ const registerEventHandlers = (call, state, dispatcher)=>{\n    const eventHandlers = [\n        call.on(\"call.ended\", watchCallEnded(call)),\n        watchLiveEnded(dispatcher, call),\n        watchSfuErrorReports(dispatcher),\n        watchChangePublishQuality(dispatcher, call),\n        watchConnectionQualityChanged(dispatcher, state),\n        watchParticipantCountChanged(dispatcher, state),\n        call.on(\"participantJoined\", watchParticipantJoined(state)),\n        call.on(\"participantLeft\", watchParticipantLeft(state)),\n        call.on(\"trackPublished\", watchTrackPublished(state)),\n        call.on(\"trackUnpublished\", watchTrackUnpublished(state)),\n        watchAudioLevelChanged(dispatcher, state),\n        watchDominantSpeakerChanged(dispatcher, state),\n        call.on(\"callGrantsUpdated\", watchCallGrantsUpdated(state)),\n        call.on(\"pinsUpdated\", watchPinsUpdated(state)),\n        handleRemoteSoftMute(call)\n    ];\n    if (call.ringing) {\n        // these events are only relevant when the call is ringing\n        eventHandlers.push(registerRingingCallEventHandlers(call));\n    }\n    return ()=>{\n        eventHandlers.forEach((unsubscribe)=>unsubscribe());\n    };\n};\n/**\n * Registers event handlers for a call that is of ringing type.\n *\n * @param call the call to register event handlers for.\n */ const registerRingingCallEventHandlers = (call)=>{\n    const coordinatorRingEvents = {\n        \"call.accepted\": watchCallAccepted(call),\n        \"call.rejected\": watchCallRejected(call)\n    };\n    const eventHandlers = Object.keys(coordinatorRingEvents).map((event)=>{\n        const eventName = event;\n        return call.on(eventName, coordinatorRingEvents[eventName]);\n    });\n    return ()=>{\n        eventHandlers.forEach((unsubscribe)=>unsubscribe());\n    };\n};\n/**\n * Collects all necessary information to join a call, talks to the coordinator\n * and returns the necessary information to join the call.\n *\n * @param httpClient the http client to use.\n * @param type the type of the call.\n * @param id the id of the call.\n * @param data the data for the call.\n */ const join = async (httpClient, type, id, data)=>{\n    const joinCallResponse = await doJoin(httpClient, type, id, data);\n    const { call, credentials, members, own_capabilities } = joinCallResponse;\n    return {\n        connectionConfig: toRtcConfiguration(credentials.ice_servers),\n        sfuServer: credentials.server,\n        token: credentials.token,\n        metadata: call,\n        members,\n        ownCapabilities: own_capabilities\n    };\n};\nconst doJoin = async (httpClient, type, id, data)=>{\n    const location = await httpClient.getLocationHint();\n    const request = {\n        ...data,\n        location\n    };\n    return httpClient.post(`/call/${type}/${id}/join`, request);\n};\nconst toRtcConfiguration = (config)=>{\n    if (!config || config.length === 0) return undefined;\n    const rtcConfig = {\n        iceServers: config.map((ice)=>({\n                urls: ice.urls,\n                username: ice.username,\n                credential: ice.password\n            }))\n    };\n    return rtcConfig;\n};\n/**\n * Creates a new StatsReporter instance that collects metrics about the ongoing call and reports them to the state store\n */ const createStatsReporter = ({ subscriber, publisher, state, pollingIntervalInMs = 2000 })=>{\n    const logger = getLogger([\n        \"stats\"\n    ]);\n    const getRawStatsForTrack = async (kind, selector)=>{\n        if (kind === \"subscriber\" && subscriber) {\n            return subscriber.getStats(selector);\n        } else if (kind === \"publisher\" && publisher) {\n            return publisher.getStats(selector);\n        } else {\n            logger(\"warn\", `Can't retrieve RTC stats for ${kind}`);\n            return undefined;\n        }\n    };\n    const getStatsForStream = async (kind, mediaStream)=>{\n        const pc = kind === \"subscriber\" ? subscriber : publisher;\n        const statsForStream = [];\n        for (let track of mediaStream.getTracks()){\n            const report = await pc.getStats(track);\n            const stats = transform(report, {\n                // @ts-ignore\n                trackKind: track.kind,\n                kind\n            });\n            statsForStream.push(stats);\n        }\n        return statsForStream;\n    };\n    const startReportingStatsFor = (sessionId)=>{\n        sessionIdsToTrack.add(sessionId);\n        void run();\n    };\n    const stopReportingStatsFor = (sessionId)=>{\n        sessionIdsToTrack.delete(sessionId);\n        void run();\n    };\n    const sessionIdsToTrack = new Set();\n    /**\n     * The main stats reporting loop.\n     */ const run = async ()=>{\n        const participantStats = {};\n        const sessionIds = new Set(sessionIdsToTrack);\n        if (sessionIds.size > 0) {\n            for (let participant of state.participants){\n                if (!sessionIds.has(participant.sessionId)) continue;\n                const kind = participant.isLocalParticipant ? \"publisher\" : \"subscriber\";\n                try {\n                    const mergedStream = new MediaStream([\n                        ...participant.videoStream?.getVideoTracks() || [],\n                        ...participant.audioStream?.getAudioTracks() || []\n                    ]);\n                    participantStats[participant.sessionId] = await getStatsForStream(kind, mergedStream);\n                    mergedStream.getTracks().forEach((t)=>{\n                        mergedStream.removeTrack(t);\n                    });\n                } catch (e) {\n                    logger(\"error\", `Failed to collect stats for ${kind} if ${participant.userId}`, e);\n                }\n            }\n        }\n        const [subscriberStats, publisherStats] = await Promise.all([\n            subscriber.getStats().then((report)=>transform(report, {\n                    kind: \"subscriber\",\n                    trackKind: \"video\"\n                })).then(aggregate),\n            publisher.getStats().then((report)=>transform(report, {\n                    kind: \"publisher\",\n                    trackKind: \"video\"\n                })).then(aggregate)\n        ]);\n        const [subscriberRawStats, publisherRawStats] = await Promise.all([\n            getRawStatsForTrack(\"subscriber\"),\n            getRawStatsForTrack(\"publisher\")\n        ]);\n        state.setCallStatsReport({\n            datacenter: publisher.sfuClient.edgeName,\n            publisherStats,\n            subscriberStats,\n            subscriberRawStats,\n            publisherRawStats,\n            participants: participantStats,\n            timestamp: Date.now()\n        });\n    };\n    let timeoutId;\n    if (pollingIntervalInMs > 0) {\n        const loop = async ()=>{\n            await run().catch((e)=>{\n                logger(\"debug\", \"Failed to collect stats\", e);\n            });\n            timeoutId = setTimeout(loop, pollingIntervalInMs);\n        };\n        void loop();\n    }\n    const stop = ()=>{\n        if (timeoutId) {\n            clearTimeout(timeoutId);\n        }\n    };\n    return {\n        getRawStatsForTrack,\n        getStatsForStream,\n        startReportingStatsFor,\n        stopReportingStatsFor,\n        stop\n    };\n};\n/**\n * Transforms raw RTC stats into a slimmer and uniform across browsers format.\n *\n * @param report the report to transform.\n * @param opts the transform options.\n */ const transform = (report, opts)=>{\n    const { trackKind, kind } = opts;\n    const direction = kind === \"subscriber\" ? \"inbound-rtp\" : \"outbound-rtp\";\n    const stats = flatten$1(report);\n    const streams = stats.filter((stat)=>stat.type === direction && stat.kind === trackKind).map((stat)=>{\n        const rtcStreamStats = stat;\n        const codec = stats.find((s)=>s.type === \"codec\" && s.id === rtcStreamStats.codecId); // FIXME OL: incorrect type!\n        const transport = stats.find((s)=>s.type === \"transport\" && s.id === rtcStreamStats.transportId);\n        let roundTripTime;\n        if (transport && transport.dtlsState === \"connected\") {\n            const candidatePair = stats.find((s)=>s.type === \"candidate-pair\" && s.id === transport.selectedCandidatePairId);\n            roundTripTime = candidatePair?.currentRoundTripTime;\n        }\n        return {\n            bytesSent: rtcStreamStats.bytesSent,\n            bytesReceived: rtcStreamStats.bytesReceived,\n            codec: codec?.mimeType,\n            currentRoundTripTime: roundTripTime,\n            frameHeight: rtcStreamStats.frameHeight,\n            frameWidth: rtcStreamStats.frameWidth,\n            framesPerSecond: rtcStreamStats.framesPerSecond,\n            jitter: rtcStreamStats.jitter,\n            kind: rtcStreamStats.kind,\n            // @ts-ignore: available in Chrome only, TS doesn't recognize this\n            qualityLimitationReason: rtcStreamStats.qualityLimitationReason,\n            rid: rtcStreamStats.rid,\n            ssrc: rtcStreamStats.ssrc\n        };\n    });\n    return {\n        rawStats: report,\n        streams,\n        timestamp: Date.now()\n    };\n};\n/**\n * Aggregates generic stats.\n *\n * @param stats the stats to aggregate.\n */ const aggregate = (stats)=>{\n    const aggregatedStats = {\n        rawReport: stats,\n        totalBytesSent: 0,\n        totalBytesReceived: 0,\n        averageJitterInMs: 0,\n        averageRoundTripTimeInMs: 0,\n        qualityLimitationReasons: \"none\",\n        highestFrameWidth: 0,\n        highestFrameHeight: 0,\n        highestFramesPerSecond: 0,\n        timestamp: Date.now()\n    };\n    let maxArea = -1;\n    const area = (w, h)=>w * h;\n    const qualityLimitationReasons = new Set();\n    const streams = stats.streams;\n    const report = streams.reduce((acc, stream)=>{\n        acc.totalBytesSent += stream.bytesSent || 0;\n        acc.totalBytesReceived += stream.bytesReceived || 0;\n        acc.averageJitterInMs += stream.jitter || 0;\n        acc.averageRoundTripTimeInMs += stream.currentRoundTripTime || 0;\n        // naive calculation of the highest resolution\n        const streamArea = area(stream.frameWidth || 0, stream.frameHeight || 0);\n        if (streamArea > maxArea) {\n            acc.highestFrameWidth = stream.frameWidth || 0;\n            acc.highestFrameHeight = stream.frameHeight || 0;\n            acc.highestFramesPerSecond = stream.framesPerSecond || 0;\n            maxArea = streamArea;\n        }\n        qualityLimitationReasons.add(stream.qualityLimitationReason || \"\");\n        return acc;\n    }, aggregatedStats);\n    if (streams.length > 0) {\n        report.averageJitterInMs = Math.round(report.averageJitterInMs / streams.length * 1000);\n        report.averageRoundTripTimeInMs = Math.round(report.averageRoundTripTimeInMs / streams.length * 1000);\n    }\n    const qualityLimitationReason = [\n        qualityLimitationReasons.has(\"cpu\") && \"cpu\",\n        qualityLimitationReasons.has(\"bandwidth\") && \"bandwidth\",\n        qualityLimitationReasons.has(\"other\") && \"other\"\n    ].filter(Boolean).join(\", \");\n    if (qualityLimitationReason) {\n        report.qualityLimitationReasons = qualityLimitationReason;\n    }\n    return report;\n};\n/**\n * Flatten the stats report into an array of stats objects.\n *\n * @param report the report to flatten.\n */ const flatten$1 = (report)=>{\n    const stats = [];\n    report.forEach((s)=>{\n        stats.push(s);\n    });\n    return stats;\n};\nconst DEFAULT_THRESHOLD = 0.35;\nclass ViewportTracker {\n    constructor(){\n        /**\n         * @private\n         */ this.elementHandlerMap = new Map();\n        /**\n         * @private\n         */ this.observer = null;\n        // in React children render before viewport is set, add\n        // them to the queue and observe them once the observer is ready\n        /**\n         * @private\n         */ this.queueSet = new Set();\n        /**\n         * Method to set scrollable viewport as root for the IntersectionObserver, returns\n         * cleanup function to be invoked upon disposing of the DOM element to prevent memory leaks\n         *\n         * @param viewportElement\n         * @param options\n         * @returns Unobserve\n         */ this.setViewport = (viewportElement, options)=>{\n            const cleanup = ()=>{\n                this.observer?.disconnect();\n                this.observer = null;\n                this.elementHandlerMap.clear();\n            };\n            this.observer = new IntersectionObserver((entries)=>{\n                entries.forEach((entry)=>{\n                    const handler = this.elementHandlerMap.get(entry.target);\n                    handler?.(entry);\n                });\n            }, {\n                root: viewportElement,\n                ...options,\n                threshold: options?.threshold ?? DEFAULT_THRESHOLD\n            });\n            if (this.queueSet.size) {\n                this.queueSet.forEach(([queueElement, queueHandler])=>{\n                    // check if element which requested observation is\n                    // a child of a viewport element, skip if isn't\n                    if (!viewportElement.contains(queueElement)) return;\n                    this.observer.observe(queueElement);\n                    this.elementHandlerMap.set(queueElement, queueHandler);\n                });\n                this.queueSet.clear();\n            }\n            return cleanup;\n        };\n        /**\n         * Method to set element to observe and handler to be triggered whenever IntersectionObserver\n         * detects a possible change in element's visibility within specified viewport, returns\n         * cleanup function to be invoked upon disposing of the DOM element to prevent memory leaks\n         *\n         * @param element\n         * @param handler\n         * @returns Unobserve\n         */ this.observe = (element, handler)=>{\n            const queueItem = [\n                element,\n                handler\n            ];\n            const cleanup = ()=>{\n                this.elementHandlerMap.delete(element);\n                this.observer?.unobserve(element);\n                this.queueSet.delete(queueItem);\n            };\n            if (this.elementHandlerMap.has(element)) return cleanup;\n            if (!this.observer) {\n                this.queueSet.add(queueItem);\n                return cleanup;\n            }\n            if (this.observer.root.contains(element)) {\n                this.elementHandlerMap.set(element, handler);\n                this.observer.observe(element);\n            }\n            return cleanup;\n        };\n    }\n}\n/**\n * Checks whether the current browser is Safari.\n */ const isSafari = ()=>{\n    if (typeof navigator === \"undefined\") return false;\n    return /^((?!chrome|android).)*safari/i.test(navigator.userAgent || \"\");\n};\n/**\n * Checks whether the current browser is Firefox.\n */ const isFirefox = ()=>{\n    if (typeof navigator === \"undefined\") return false;\n    return navigator.userAgent?.includes(\"Firefox\");\n};\n/**\n * Checks whether the current browser is Google Chrome.\n */ const isChrome = ()=>{\n    if (typeof navigator === \"undefined\") return false;\n    return navigator.userAgent?.includes(\"Chrome\");\n};\nvar browsers = /*#__PURE__*/ Object.freeze({\n    __proto__: null,\n    isChrome: isChrome,\n    isFirefox: isFirefox,\n    isSafari: isSafari\n});\nconst DEFAULT_VIEWPORT_VISIBILITY_STATE = {\n    videoTrack: VisibilityState.UNKNOWN,\n    screenShareTrack: VisibilityState.UNKNOWN\n};\n/**\n * A manager class that handles dynascale related tasks like:\n *\n * - binding video elements to session ids\n * - binding audio elements to session ids\n * - tracking element visibility\n * - updating subscriptions based on viewport visibility\n * - updating subscriptions based on video element dimensions\n * - updating subscriptions based on published tracks\n */ class DynascaleManager {\n    /**\n     * Creates a new DynascaleManager instance.\n     *\n     * @param call the call to manage.\n     */ constructor(call){\n        /**\n         * The viewport tracker instance.\n         */ this.viewportTracker = new ViewportTracker();\n        this.logger = getLogger([\n            \"DynascaleManager\"\n        ]);\n        /**\n         * Will begin tracking the given element for visibility changes within the\n         * configured viewport element (`call.setViewport`).\n         *\n         * @param element the element to track.\n         * @param sessionId the session id.\n         * @param trackType the kind of video.\n         * @returns Untrack.\n         */ this.trackElementVisibility = (element, sessionId, trackType)=>{\n            const cleanup = this.viewportTracker.observe(element, (entry)=>{\n                this.call.state.updateParticipant(sessionId, (participant)=>{\n                    const previousVisibilityState = participant.viewportVisibilityState ?? DEFAULT_VIEWPORT_VISIBILITY_STATE;\n                    // observer triggers when the element is \"moved\" to be a fullscreen element\n                    // keep it VISIBLE if that happens to prevent fullscreen with placeholder\n                    const isVisible = entry.isIntersecting || document.fullscreenElement === element ? VisibilityState.VISIBLE : VisibilityState.INVISIBLE;\n                    return {\n                        ...participant,\n                        viewportVisibilityState: {\n                            ...previousVisibilityState,\n                            [trackType]: isVisible\n                        }\n                    };\n                });\n            });\n            return ()=>{\n                cleanup();\n                // reset visibility state to UNKNOWN upon cleanup\n                // so that the layouts that are not actively observed\n                // can still function normally (runtime layout switching)\n                this.call.state.updateParticipant(sessionId, (participant)=>{\n                    const previousVisibilityState = participant.viewportVisibilityState ?? DEFAULT_VIEWPORT_VISIBILITY_STATE;\n                    return {\n                        ...participant,\n                        viewportVisibilityState: {\n                            ...previousVisibilityState,\n                            [trackType]: VisibilityState.UNKNOWN\n                        }\n                    };\n                });\n            };\n        };\n        /**\n         * Sets the viewport element to track bound video elements for visibility.\n         *\n         * @param element the viewport element.\n         */ this.setViewport = (element)=>{\n            return this.viewportTracker.setViewport(element);\n        };\n        /**\n         * Binds a DOM <video> element to the given session id.\n         * This method will make sure that the video element will play\n         * the correct video stream for the given session id.\n         *\n         * Under the hood, it would also keep track of the video element dimensions\n         * and update the subscription accordingly in order to optimize the bandwidth.\n         *\n         * If a \"viewport\" is configured, the video element will be automatically\n         * tracked for visibility and the subscription will be updated accordingly.\n         *\n         * @param videoElement the video element to bind to.\n         * @param sessionId the session id.\n         * @param trackType the kind of video.\n         */ this.bindVideoElement = (videoElement, sessionId, trackType)=>{\n            const boundParticipant = this.call.state.findParticipantBySessionId(sessionId);\n            if (!boundParticipant) return;\n            const requestTrackWithDimensions = (debounceType, dimension)=>{\n                if (dimension && (dimension.width === 0 || dimension.height === 0)) {\n                    // ignore 0x0 dimensions. this can happen when the video element\n                    // is not visible (e.g., has display: none).\n                    // we treat this as \"unsubscription\" as we don't want to keep\n                    // consuming bandwidth for a video that is not visible on the screen.\n                    this.logger(\"debug\", `Ignoring 0x0 dimension`, boundParticipant);\n                    dimension = undefined;\n                }\n                this.call.updateSubscriptionsPartial(trackType, {\n                    [sessionId]: {\n                        dimension\n                    }\n                }, debounceType);\n            };\n            const participant$ = this.call.state.participants$.pipe((0,_barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_20__.map)((participants)=>participants.find((participant)=>participant.sessionId === sessionId)), (0,_barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_23__.takeWhile)((participant)=>!!participant), (0,_barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_22__.distinctUntilChanged)(), (0,_barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_21__.shareReplay)({\n                bufferSize: 1,\n                refCount: true\n            }));\n            /**\n             * Since the video elements are now being removed from the DOM (React SDK) upon\n             * visibility change, this subscription is not in use an stays here only for the\n             * plain JS integrations where integrators might choose not to remove the video\n             * elements from the DOM.\n             */ // keep copy for resize observer handler\n            let viewportVisibilityState;\n            const viewportVisibilityStateSubscription = boundParticipant.isLocalParticipant ? null : participant$.pipe((0,_barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_20__.map)((p)=>p.viewportVisibilityState?.[trackType]), (0,_barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_22__.distinctUntilChanged)()).subscribe((nextViewportVisibilityState)=>{\n                // skip initial trigger\n                if (!viewportVisibilityState) {\n                    viewportVisibilityState = nextViewportVisibilityState ?? VisibilityState.UNKNOWN;\n                    return;\n                }\n                viewportVisibilityState = nextViewportVisibilityState ?? VisibilityState.UNKNOWN;\n                if (nextViewportVisibilityState === VisibilityState.INVISIBLE) {\n                    return requestTrackWithDimensions(DebounceType.MEDIUM, undefined);\n                }\n                requestTrackWithDimensions(DebounceType.MEDIUM, {\n                    width: videoElement.clientWidth,\n                    height: videoElement.clientHeight\n                });\n            });\n            let lastDimensions;\n            const resizeObserver = boundParticipant.isLocalParticipant ? null : new ResizeObserver(()=>{\n                const currentDimensions = `${videoElement.clientWidth},${videoElement.clientHeight}`;\n                // skip initial trigger\n                if (!lastDimensions) {\n                    lastDimensions = currentDimensions;\n                    return;\n                }\n                if (lastDimensions === currentDimensions || viewportVisibilityState === VisibilityState.INVISIBLE) {\n                    return;\n                }\n                requestTrackWithDimensions(DebounceType.SLOW, {\n                    width: videoElement.clientWidth,\n                    height: videoElement.clientHeight\n                });\n                lastDimensions = currentDimensions;\n            });\n            resizeObserver?.observe(videoElement);\n            // element renders and gets bound - track subscription gets\n            // triggered first other ones get skipped on initial subscriptions\n            const publishedTracksSubscription = boundParticipant.isLocalParticipant ? null : participant$.pipe((0,_barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_24__.distinctUntilKeyChanged)(\"publishedTracks\"), (0,_barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_20__.map)((p)=>p.publishedTracks.includes(trackType === \"videoTrack\" ? TrackType.VIDEO : TrackType.SCREEN_SHARE)), (0,_barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_22__.distinctUntilChanged)()).subscribe((isPublishing)=>{\n                if (isPublishing) {\n                    // the participant just started to publish a track\n                    requestTrackWithDimensions(DebounceType.FAST, {\n                        width: videoElement.clientWidth,\n                        height: videoElement.clientHeight\n                    });\n                } else {\n                    // the participant just stopped publishing a track\n                    requestTrackWithDimensions(DebounceType.FAST, undefined);\n                }\n            });\n            videoElement.autoplay = true;\n            videoElement.playsInline = true;\n            // explicitly marking the element as muted will allow autoplay to work\n            // without prior user interaction:\n            // https://developer.mozilla.org/en-US/docs/Web/Media/Autoplay_guide\n            videoElement.muted = true;\n            const streamSubscription = participant$.pipe((0,_barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_24__.distinctUntilKeyChanged)(trackType === \"videoTrack\" ? \"videoStream\" : \"screenShareStream\")).subscribe((p)=>{\n                const source = trackType === \"videoTrack\" ? p.videoStream : p.screenShareStream;\n                if (videoElement.srcObject === source) return;\n                videoElement.srcObject = source ?? null;\n                if (isSafari() || isFirefox()) {\n                    setTimeout(()=>{\n                        videoElement.srcObject = source ?? null;\n                        videoElement.play().catch((e)=>{\n                            this.logger(\"warn\", `Failed to play stream`, e);\n                        });\n                    // we add extra delay until we attempt to force-play\n                    // the participant's media stream in Firefox and Safari,\n                    // as they seem to have some timing issues\n                    }, 25);\n                }\n            });\n            return ()=>{\n                requestTrackWithDimensions(DebounceType.FAST, undefined);\n                viewportVisibilityStateSubscription?.unsubscribe();\n                publishedTracksSubscription?.unsubscribe();\n                streamSubscription.unsubscribe();\n                resizeObserver?.disconnect();\n            };\n        };\n        /**\n         * Binds a DOM <audio> element to the given session id.\n         *\n         * This method will make sure that the audio element will\n         * play the correct audio stream for the given session id.\n         *\n         * @param audioElement the audio element to bind to.\n         * @param sessionId the session id.\n         * @param trackType the kind of audio.\n         * @returns a cleanup function that will unbind the audio element.\n         */ this.bindAudioElement = (audioElement, sessionId, trackType)=>{\n            const participant = this.call.state.findParticipantBySessionId(sessionId);\n            if (!participant || participant.isLocalParticipant) return;\n            const participant$ = this.call.state.participants$.pipe((0,_barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_20__.map)((participants)=>participants.find((p)=>p.sessionId === sessionId)), (0,_barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_23__.takeWhile)((p)=>!!p), (0,_barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_22__.distinctUntilChanged)(), (0,_barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_21__.shareReplay)({\n                bufferSize: 1,\n                refCount: true\n            }));\n            const updateMediaStreamSubscription = participant$.pipe((0,_barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_24__.distinctUntilKeyChanged)(trackType === \"screenShareAudioTrack\" ? \"screenShareAudioStream\" : \"audioStream\")).subscribe((p)=>{\n                const source = trackType === \"screenShareAudioTrack\" ? p.screenShareAudioStream : p.audioStream;\n                if (audioElement.srcObject === source) return;\n                setTimeout(()=>{\n                    audioElement.srcObject = source ?? null;\n                    if (audioElement.srcObject) {\n                        audioElement.play().catch((e)=>{\n                            this.logger(\"warn\", `Failed to play stream`, e);\n                        });\n                        // audio output device shall be set after the audio element is played\n                        // otherwise, the browser will not pick it up, and will always\n                        // play audio through the system's default device\n                        const { selectedDevice } = this.call.speaker.state;\n                        if (selectedDevice && \"setSinkId\" in audioElement) {\n                            // @ts-expect-error setSinkId is not yet in the lib\n                            audioElement.setSinkId(selectedDevice);\n                        }\n                    }\n                });\n            });\n            const sinkIdSubscription = !(\"setSinkId\" in audioElement) ? null : this.call.speaker.state.selectedDevice$.subscribe((deviceId)=>{\n                if (deviceId) {\n                    // @ts-expect-error setSinkId is not yet in the lib\n                    audioElement.setSinkId(deviceId);\n                }\n            });\n            const volumeSubscription = this.call.speaker.state.volume$.subscribe((volume)=>{\n                audioElement.volume = volume;\n            });\n            audioElement.autoplay = true;\n            return ()=>{\n                sinkIdSubscription?.unsubscribe();\n                volumeSubscription.unsubscribe();\n                updateMediaStreamSubscription.unsubscribe();\n            };\n        };\n        this.call = call;\n    }\n}\n/**\n * Stores the permissions for the current user and exposes\n * a few helper methods which make it easier to work with permissions.\n *\n * This is an internal class meant to be used in combination with\n * a {@link Call} instance.\n *\n * @internal\n */ class PermissionsContext {\n    constructor(){\n        this.permissions = [];\n        /**\n         * Sets the permissions for the current user.\n         *\n         * @param permissions the permissions to set.\n         */ this.setPermissions = (permissions)=>{\n            this.permissions = permissions || [];\n        };\n        /**\n         * Sets the settings for the bound call.\n         * @param settings\n         */ this.setCallSettings = (settings)=>{\n            this.settings = settings;\n        };\n        /**\n         * Checks if the current user has a specific permission.\n         *\n         * @param permission the permission to check for.\n         */ this.hasPermission = (permission)=>{\n            return this.permissions.includes(permission);\n        };\n        /**\n         * Checks if the current user can request a specific permission\n         * within the call.\n         *\n         * @param permission the permission to check for.\n         * @param settings the call settings to check against (optional).\n         */ this.canRequest = (permission, settings = this.settings)=>{\n            if (!settings) return false;\n            const { audio, video, screensharing } = settings;\n            switch(permission){\n                case OwnCapability.SEND_AUDIO:\n                    return audio.access_request_enabled;\n                case OwnCapability.SEND_VIDEO:\n                    return video.access_request_enabled;\n                case OwnCapability.SCREENSHARE:\n                    return screensharing.access_request_enabled;\n                default:\n                    return false;\n            }\n        };\n    }\n}\n/**\n * Represents a call type.\n */ class CallType {\n    /**\n     * Constructs a new CallType.\n     *\n     * @param name the name of the call type.\n     * @param options the options for the call type.\n     */ constructor(name, options = {\n        sortParticipantsBy: defaultSortPreset\n    }){\n        this.name = name;\n        this.options = options;\n    }\n}\n/**\n * A registry of {@link CallType}s.\n * You can register and unregister call types.\n */ class CallTypesRegistry {\n    /**\n     * Constructs a new CallTypesRegistry.\n     *\n     * @param callTypes the initial call types to register.\n     */ constructor(callTypes){\n        /**\n         * Registers a new call type.\n         *\n         * @param callType the call type to register.\n         */ this.register = (callType)=>{\n            this.callTypes[callType.name] = callType;\n        };\n        /**\n         * Unregisters a call type.\n         *\n         * @param name the name of the call type to unregister.\n         */ this.unregister = (name)=>{\n            delete this.callTypes[name];\n        };\n        /**\n         * Gets a call type by name.\n         *\n         * @param name the name of the call type to get.\n         */ this.get = (name)=>{\n            if (!this.callTypes[name]) {\n                this.register(new CallType(name));\n            }\n            return this.callTypes[name];\n        };\n        this.callTypes = callTypes.reduce((acc, callType)=>{\n            acc[callType.name] = callType;\n            return acc;\n        }, {});\n    }\n}\n/**\n * The default call types registry.\n * You can use this instance to dynamically register and unregister call types.\n */ const CallTypes = new CallTypesRegistry([\n    new CallType(\"default\", {\n        sortParticipantsBy: defaultSortPreset\n    }),\n    new CallType(\"development\", {\n        sortParticipantsBy: defaultSortPreset\n    }),\n    new CallType(\"livestream\", {\n        sortParticipantsBy: livestreamOrAudioRoomSortPreset\n    }),\n    new CallType(\"audio_room\", {\n        sortParticipantsBy: livestreamOrAudioRoomSortPreset\n    })\n]);\n/**\n * Returns an Observable that emits the list of available devices\n * that meet the given constraints.\n *\n * @param constraints the constraints to use when requesting the devices.\n * @param kind the kind of devices to enumerate.\n */ const getDevices = (constraints, kind)=>{\n    return new _barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_25__.Observable((subscriber)=>{\n        const enumerate = async ()=>{\n            let devices = await navigator.mediaDevices.enumerateDevices();\n            // some browsers report empty device labels (Firefox).\n            // in that case, we need to request permissions (via getUserMedia)\n            // to be able to get the device labels\n            const needsGetUserMedia = devices.some((device)=>device.kind === kind && device.label === \"\");\n            if (needsGetUserMedia) {\n                let mediaStream;\n                try {\n                    mediaStream = await navigator.mediaDevices.getUserMedia(constraints);\n                    devices = await navigator.mediaDevices.enumerateDevices();\n                } finally{\n                    if (mediaStream) disposeOfMediaStream(mediaStream);\n                }\n            }\n            return devices;\n        };\n        enumerate().then((devices)=>{\n            // notify subscribers and complete\n            subscriber.next(devices);\n            subscriber.complete();\n        }).catch((error)=>{\n            const logger = getLogger([\n                \"devices\"\n            ]);\n            logger(\"error\", \"Failed to enumerate devices\", error);\n            subscriber.error(error);\n        });\n    });\n};\n/**\n * [Tells if the browser supports audio output change on 'audio' elements](https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement/setSinkId).\n *\n *  */ const checkIfAudioOutputChangeSupported = ()=>{\n    if (typeof document === \"undefined\") return false;\n    const element = document.createElement(\"audio\");\n    return \"setSinkId\" in element;\n};\n/**\n * The default constraints used to request audio devices.\n */ const audioDeviceConstraints = {\n    audio: {\n        autoGainControl: true,\n        noiseSuppression: true,\n        echoCancellation: true\n    }\n};\n/**\n * The default constraints used to request video devices.\n */ const videoDeviceConstraints = {\n    video: {\n        width: 1280,\n        height: 720\n    }\n};\n/**\n * Creates a memoized observable instance\n * that will be created only once and shared between all callers.\n *\n * @param create a function that creates an Observable.\n */ const memoizedObservable = (create)=>{\n    let memoized;\n    return ()=>{\n        if (!memoized) memoized = create();\n        return memoized;\n    };\n};\nconst getDeviceChangeObserver = memoizedObservable(()=>{\n    // Audio and video devices are requested in two separate requests.\n    // That way, users will be presented with two separate prompts\n    // -> they can give access to just camera, or just microphone\n    return new _barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_25__.Observable((subscriber)=>{\n        // 'addEventListener' is not available in React Native\n        if (!navigator.mediaDevices.addEventListener) return;\n        const notify = ()=>subscriber.next();\n        navigator.mediaDevices.addEventListener(\"devicechange\", notify);\n        return ()=>{\n            navigator.mediaDevices.removeEventListener(\"devicechange\", notify);\n        };\n    }).pipe((0,_barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_26__.debounceTime)(500), (0,_barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_27__.concatMap)(()=>(0,_barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_28__.from)(navigator.mediaDevices.enumerateDevices())), (0,_barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_21__.shareReplay)(1));\n});\nconst getAudioDevicesObserver = memoizedObservable(()=>{\n    return (0,_barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_29__.merge)(getDevices(audioDeviceConstraints, \"audioinput\"), getDeviceChangeObserver()).pipe((0,_barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_21__.shareReplay)(1));\n});\nconst getAudioOutputDevicesObserver = memoizedObservable(()=>{\n    return (0,_barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_29__.merge)(getDevices(audioDeviceConstraints, \"audiooutput\"), getDeviceChangeObserver()).pipe((0,_barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_21__.shareReplay)(1));\n});\nconst getVideoDevicesObserver = memoizedObservable(()=>{\n    return (0,_barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_29__.merge)(getDevices(videoDeviceConstraints, \"videoinput\"), getDeviceChangeObserver()).pipe((0,_barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_21__.shareReplay)(1));\n});\n/**\n * Prompts the user for a permission to use audio devices (if not already granted) and lists the available 'audioinput' devices, if devices are added/removed the list is updated.\n */ const getAudioDevices = ()=>{\n    return getAudioDevicesObserver().pipe((0,_barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_20__.map)((values)=>values.filter((d)=>d.kind === \"audioinput\")));\n};\n/**\n * Prompts the user for a permission to use video devices (if not already granted) and lists the available 'videoinput' devices, if devices are added/removed the list is updated.\n */ const getVideoDevices = ()=>{\n    return getVideoDevicesObserver().pipe((0,_barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_20__.map)((values)=>values.filter((d)=>d.kind === \"videoinput\")));\n};\n/**\n * Prompts the user for a permission to use audio devices (if not already granted) and lists the available 'audiooutput' devices, if devices are added/removed the list is updated. Selecting 'audiooutput' device only makes sense if [the browser has support for changing audio output on 'audio' elements](#checkifaudiooutputchangesupported)\n */ const getAudioOutputDevices = ()=>{\n    return getAudioOutputDevicesObserver().pipe((0,_barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_20__.map)((values)=>values.filter((d)=>d.kind === \"audiooutput\")));\n};\nconst getStream = async (constraints)=>{\n    try {\n        return await navigator.mediaDevices.getUserMedia(constraints);\n    } catch (e) {\n        getLogger([\n            \"devices\"\n        ])(\"error\", `Failed get user media`, {\n            error: e,\n            constraints: constraints\n        });\n        throw e;\n    }\n};\n/**\n * Returns an audio media stream that fulfills the given constraints.\n * If no constraints are provided, it uses the browser's default ones.\n *\n * @angular It's recommended to use the [`DeviceManagerService`](./DeviceManagerService.md) for a higher level API, use this low-level method only if the `DeviceManagerService` doesn't suit your requirements.\n * @param trackConstraints the constraints to use when requesting the stream.\n * @returns the new `MediaStream` fulfilling the given constraints.\n */ const getAudioStream = async (trackConstraints)=>{\n    const constraints = {\n        audio: {\n            ...audioDeviceConstraints.audio,\n            ...trackConstraints\n        }\n    };\n    return getStream(constraints);\n};\n/**\n * Returns a video media stream that fulfills the given constraints.\n * If no constraints are provided, it uses the browser's default ones.\n *\n * @angular It's recommended to use the [`DeviceManagerService`](./DeviceManagerService.md) for a higher level API, use this low-level method only if the `DeviceManagerService` doesn't suit your requirements.\n * @param trackConstraints the constraints to use when requesting the stream.\n * @returns a new `MediaStream` fulfilling the given constraints.\n */ const getVideoStream = async (trackConstraints)=>{\n    const constraints = {\n        video: {\n            ...videoDeviceConstraints.video,\n            ...trackConstraints\n        }\n    };\n    return getStream(constraints);\n};\n/**\n * Prompts the user for a permission to share a screen.\n * If the user grants the permission, a screen sharing stream is returned. Throws otherwise.\n *\n * The callers of this API are responsible to handle the possible errors.\n *\n * @angular It's recommended to use the [`DeviceManagerService`](./DeviceManagerService.md) for a higher level API, use this low-level method only if the `DeviceManagerService` doesn't suit your requirements.\n *\n * @param options any additional options to pass to the [`getDisplayMedia`](https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getDisplayMedia) API.\n */ const getScreenShareStream = async (options)=>{\n    try {\n        return await navigator.mediaDevices.getDisplayMedia({\n            video: true,\n            audio: {\n                channelCount: {\n                    ideal: 2\n                },\n                echoCancellation: false,\n                autoGainControl: false,\n                noiseSuppression: false\n            },\n            // @ts-expect-error - not present in types yet\n            systemAudio: \"include\",\n            ...options\n        });\n    } catch (e) {\n        getLogger([\n            \"devices\"\n        ])(\"error\", \"Failed to get screen share stream\", e);\n        throw e;\n    }\n};\nconst deviceIds$ = typeof navigator !== \"undefined\" && typeof navigator.mediaDevices !== \"undefined\" ? memoizedObservable(()=>(0,_barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_29__.merge)((0,_barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_28__.from)(navigator.mediaDevices.enumerateDevices()), getDeviceChangeObserver()).pipe((0,_barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_21__.shareReplay)(1)))() : undefined;\n/**\n * Deactivates MediaStream (stops and removes tracks) to be later garbage collected\n *\n * @param stream MediaStream\n * @returns void\n */ const disposeOfMediaStream = (stream)=>{\n    if (!stream.active) return;\n    stream.getTracks().forEach((track)=>{\n        track.stop();\n        stream.removeTrack(track);\n    });\n    // @ts-expect-error release() is present in react-native-webrtc and must be called to dispose the stream\n    if (typeof stream.release === \"function\") {\n        // @ts-expect-error\n        stream.release();\n    }\n};\nclass InputMediaDeviceManager {\n    constructor(call, state, trackType){\n        this.call = call;\n        this.state = state;\n        this.trackType = trackType;\n        /**\n         * if true, stops the media stream when call is left\n         */ this.stopOnLeave = true;\n        this.subscriptions = [];\n        this.isTrackStoppedDueToTrackEnd = false;\n        this.removeSubscriptions = ()=>{\n            this.subscriptions.forEach((s)=>s.unsubscribe());\n        };\n        this.logger = getLogger([\n            `${TrackType[trackType].toLowerCase()} manager`\n        ]);\n        if (deviceIds$ && !isReactNative() && (this.trackType === TrackType.AUDIO || this.trackType === TrackType.VIDEO)) {\n            this.handleDisconnectedOrReplacedDevices();\n        }\n    }\n    /**\n     * Lists the available audio/video devices\n     *\n     * Note: It prompts the user for a permission to use devices (if not already granted)\n     *\n     * @returns an Observable that will be updated if a device is connected or disconnected\n     */ listDevices() {\n        return this.getDevices();\n    }\n    /**\n     * Starts stream.\n     */ async enable() {\n        if (this.state.status === \"enabled\") return;\n        this.enablePromise = this.unmuteStream();\n        try {\n            await this.enablePromise;\n            this.state.setStatus(\"enabled\");\n            this.enablePromise = undefined;\n        } catch (error) {\n            this.enablePromise = undefined;\n            throw error;\n        }\n    }\n    /**\n     * Stops or pauses the stream based on state.disableMode\n     * @param {boolean} [forceStop=false] when true, stops the tracks regardless of the state.disableMode\n     */ async disable(forceStop = false) {\n        this.state.prevStatus = this.state.status;\n        if (!forceStop && this.state.status === \"disabled\") return;\n        const stopTracks = forceStop || this.state.disableMode === \"stop-tracks\";\n        this.disablePromise = this.muteStream(stopTracks);\n        try {\n            await this.disablePromise;\n            this.state.setStatus(\"disabled\");\n            this.disablePromise = undefined;\n        } catch (error) {\n            this.disablePromise = undefined;\n            throw error;\n        }\n    }\n    /**\n     * If status was previously enabled, it will re-enable the device.\n     */ async resume() {\n        if (this.state.prevStatus === \"enabled\" && this.state.status === \"disabled\") {\n            await this.enable();\n        }\n    }\n    /**\n     * If the current device status is disabled, it will enable the device,\n     * else it will disable it.\n     */ async toggle() {\n        if (this.state.status === \"enabled\") {\n            return this.disable();\n        } else {\n            return this.enable();\n        }\n    }\n    /**\n     * Will set the default constraints for the device.\n     *\n     * @param constraints the constraints to set.\n     */ setDefaultConstraints(constraints) {\n        this.state.setDefaultConstraints(constraints);\n    }\n    /**\n     * Selects a device.\n     *\n     * Note: this method is not supported in React Native\n     * @param deviceId the device id to select.\n     */ async select(deviceId) {\n        if (isReactNative()) {\n            throw new Error(\"This method is not supported in React Native\");\n        }\n        if (deviceId === this.state.selectedDevice) {\n            return;\n        }\n        this.state.setDevice(deviceId);\n        await this.applySettingsToStream();\n    }\n    async applySettingsToStream() {\n        if (this.state.status === \"enabled\") {\n            await this.muteStream();\n            await this.unmuteStream();\n        }\n    }\n    getTracks() {\n        return this.state.mediaStream?.getTracks() ?? [];\n    }\n    async muteStream(stopTracks = true) {\n        if (!this.state.mediaStream) return;\n        this.logger(\"debug\", `${stopTracks ? \"Stopping\" : \"Disabling\"} stream`);\n        if (this.call.state.callingState === CallingState.JOINED) {\n            await this.stopPublishStream(stopTracks);\n        }\n        this.muteLocalStream(stopTracks);\n        const allEnded = this.getTracks().every((t)=>t.readyState === \"ended\");\n        if (allEnded) {\n            if (this.state.mediaStream && // @ts-expect-error release() is present in react-native-webrtc\n            typeof this.state.mediaStream.release === \"function\") {\n                // @ts-expect-error called to dispose the stream in RN\n                this.state.mediaStream.release();\n            }\n            this.state.setMediaStream(undefined);\n        }\n    }\n    muteTracks() {\n        this.getTracks().forEach((track)=>{\n            if (track.enabled) track.enabled = false;\n        });\n    }\n    unmuteTracks() {\n        this.getTracks().forEach((track)=>{\n            if (!track.enabled) track.enabled = true;\n        });\n    }\n    stopTracks() {\n        this.getTracks().forEach((track)=>{\n            if (track.readyState === \"live\") track.stop();\n        });\n    }\n    muteLocalStream(stopTracks) {\n        if (!this.state.mediaStream) {\n            return;\n        }\n        if (stopTracks) {\n            this.stopTracks();\n        } else {\n            this.muteTracks();\n        }\n    }\n    async unmuteStream() {\n        this.logger(\"debug\", \"Starting stream\");\n        let stream;\n        if (this.state.mediaStream && this.getTracks().every((t)=>t.readyState === \"live\")) {\n            stream = this.state.mediaStream;\n            this.unmuteTracks();\n        } else {\n            const defaultConstraints = this.state.defaultConstraints;\n            const constraints = {\n                ...defaultConstraints,\n                deviceId: this.state.selectedDevice\n            };\n            stream = await this.getStream(constraints);\n        }\n        if (this.call.state.callingState === CallingState.JOINED) {\n            await this.publishStream(stream);\n        }\n        if (this.state.mediaStream !== stream) {\n            this.state.setMediaStream(stream);\n            this.getTracks().forEach((track)=>{\n                track.addEventListener(\"ended\", async ()=>{\n                    if (this.enablePromise) {\n                        await this.enablePromise;\n                    }\n                    if (this.disablePromise) {\n                        await this.disablePromise;\n                    }\n                    if (this.state.status === \"enabled\") {\n                        this.isTrackStoppedDueToTrackEnd = true;\n                        setTimeout(()=>{\n                            this.isTrackStoppedDueToTrackEnd = false;\n                        }, 2000);\n                        await this.disable();\n                    }\n                });\n            });\n        }\n    }\n    get mediaDeviceKind() {\n        if (this.trackType === TrackType.AUDIO) {\n            return \"audioinput\";\n        }\n        if (this.trackType === TrackType.VIDEO) {\n            return \"videoinput\";\n        }\n        return \"\";\n    }\n    handleDisconnectedOrReplacedDevices() {\n        this.subscriptions.push((0,_barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_18__.combineLatest)([\n            deviceIds$.pipe((0,_barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_30__.pairwise)()),\n            this.state.selectedDevice$\n        ]).subscribe(async ([[prevDevices, currentDevices], deviceId])=>{\n            if (!deviceId) {\n                return;\n            }\n            if (this.enablePromise) {\n                await this.enablePromise;\n            }\n            if (this.disablePromise) {\n                await this.disablePromise;\n            }\n            let isDeviceDisconnected = false;\n            let isDeviceReplaced = false;\n            const currentDevice = this.findDeviceInList(currentDevices, deviceId);\n            const prevDevice = this.findDeviceInList(prevDevices, deviceId);\n            if (!currentDevice && prevDevice) {\n                isDeviceDisconnected = true;\n            } else if (currentDevice && prevDevice && currentDevice.deviceId === prevDevice.deviceId && currentDevice.groupId !== prevDevice.groupId) {\n                isDeviceReplaced = true;\n            }\n            if (isDeviceDisconnected) {\n                await this.disable();\n                this.select(undefined);\n            }\n            if (isDeviceReplaced) {\n                if (this.isTrackStoppedDueToTrackEnd && this.state.status === \"disabled\") {\n                    await this.enable();\n                    this.isTrackStoppedDueToTrackEnd = false;\n                } else {\n                    await this.applySettingsToStream();\n                }\n            }\n        }));\n    }\n    findDeviceInList(devices, deviceId) {\n        return devices.find((d)=>d.deviceId === deviceId && d.kind === this.mediaDeviceKind);\n    }\n}\nclass InputMediaDeviceManagerState {\n    /**\n     * Constructs new InputMediaDeviceManagerState instance.\n     *\n     * @param disableMode the disable mode to use.\n     * @param permissionName the permission name to use for querying.\n     * `undefined` means no permission is required.\n     */ constructor(disableMode = \"stop-tracks\", permissionName = undefined){\n        this.disableMode = disableMode;\n        this.permissionName = permissionName;\n        this.statusSubject = new _barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_19__.BehaviorSubject(undefined);\n        this.mediaStreamSubject = new _barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_19__.BehaviorSubject(undefined);\n        this.selectedDeviceSubject = new _barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_19__.BehaviorSubject(undefined);\n        this.defaultConstraintsSubject = new _barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_19__.BehaviorSubject(undefined);\n        /**\n         * An Observable that emits the current media stream, or `undefined` if the device is currently disabled.\n         *\n         */ this.mediaStream$ = this.mediaStreamSubject.asObservable();\n        /**\n         * An Observable that emits the currently selected device\n         */ this.selectedDevice$ = this.selectedDeviceSubject.asObservable().pipe((0,_barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_22__.distinctUntilChanged)());\n        /**\n         * An Observable that emits the device status\n         */ this.status$ = this.statusSubject.asObservable().pipe((0,_barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_22__.distinctUntilChanged)());\n        /**\n         * The default constraints for the device.\n         */ this.defaultConstraints$ = this.defaultConstraintsSubject.asObservable();\n        /**\n         * An observable that will emit `true` if browser/system permission\n         * is granted, `false` otherwise.\n         */ this.hasBrowserPermission$ = new _barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_25__.Observable((subscriber)=>{\n            const notifyGranted = ()=>subscriber.next(true);\n            const permissionsAPIAvailable = !!navigator?.permissions?.query;\n            if (isReactNative() || !this.permissionName || !permissionsAPIAvailable) {\n                getLogger([\n                    \"devices\"\n                ])(\"warn\", `Permissions can't be queried. Assuming granted.`);\n                return notifyGranted();\n            }\n            let permissionState;\n            const notify = ()=>subscriber.next(// In Safari, the `change` event doesn't reliably emit and hence,\n                // permissionState stays in 'prompt' state forever.\n                // Instead of checking if a permission is granted, we check if it isn't denied\n                isSafari() ? permissionState.state !== \"denied\" : permissionState.state === \"granted\");\n            navigator.permissions.query({\n                name: this.permissionName\n            }).then((permissionStatus)=>{\n                permissionState = permissionStatus;\n                permissionState.addEventListener(\"change\", notify);\n                notify();\n            }).catch(()=>{\n                // permission doesn't exist or can't be queried -> assume it's granted\n                // an example would be Firefox,\n                // where neither camera microphone permission can be queried\n                notifyGranted();\n            });\n            return ()=>{\n                permissionState?.removeEventListener(\"change\", notify);\n            };\n        }).pipe((0,_barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_21__.shareReplay)(1));\n        /**\n         * Gets the current value of an observable, or undefined if the observable has\n         * not emitted a value yet.\n         *\n         * @param observable$ the observable to get the value from.\n         */ this.getCurrentValue = getCurrentValue;\n        /**\n         * Updates the value of the provided Subject.\n         * An `update` can either be a new value or a function which takes\n         * the current value and returns a new value.\n         *\n         * @internal\n         *\n         * @param subject the subject to update.\n         * @param update the update to apply to the subject.\n         * @return the updated value.\n         */ this.setCurrentValue = setCurrentValue;\n    }\n    /**\n     * The device status\n     */ get status() {\n        return this.getCurrentValue(this.status$);\n    }\n    /**\n     * The currently selected device\n     */ get selectedDevice() {\n        return this.getCurrentValue(this.selectedDevice$);\n    }\n    /**\n     * The current media stream, or `undefined` if the device is currently disabled.\n     */ get mediaStream() {\n        return this.getCurrentValue(this.mediaStream$);\n    }\n    /**\n     * @internal\n     * @param status\n     */ setStatus(status) {\n        this.setCurrentValue(this.statusSubject, status);\n    }\n    /**\n     * @internal\n     * @param stream the stream to set.\n     */ setMediaStream(stream) {\n        this.setCurrentValue(this.mediaStreamSubject, stream);\n        if (stream) {\n            this.setDevice(this.getDeviceIdFromStream(stream));\n        }\n    }\n    /**\n     * @internal\n     * @param deviceId the device id to set.\n     */ setDevice(deviceId) {\n        this.setCurrentValue(this.selectedDeviceSubject, deviceId);\n    }\n    /**\n     * Gets the default constraints for the device.\n     */ get defaultConstraints() {\n        return this.getCurrentValue(this.defaultConstraints$);\n    }\n    /**\n     * Sets the default constraints for the device.\n     *\n     * @internal\n     * @param constraints the constraints to set.\n     */ setDefaultConstraints(constraints) {\n        this.setCurrentValue(this.defaultConstraintsSubject, constraints);\n    }\n}\nclass CameraManagerState extends InputMediaDeviceManagerState {\n    constructor(){\n        super(\"stop-tracks\", // `camera` is not in the W3C standard yet,\n        // but it's supported by Chrome and Safari.\n        \"camera\");\n        this.directionSubject = new _barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_19__.BehaviorSubject(undefined);\n        this.direction$ = this.directionSubject.asObservable().pipe((0,_barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_22__.distinctUntilChanged)());\n    }\n    /**\n     * The preferred camera direction\n     * front - means the camera facing the user\n     * back - means the camera facing the environment\n     */ get direction() {\n        return this.getCurrentValue(this.direction$);\n    }\n    /**\n     * @internal\n     */ setDirection(direction) {\n        this.setCurrentValue(this.directionSubject, direction);\n    }\n    /**\n     * @internal\n     */ setMediaStream(stream) {\n        super.setMediaStream(stream);\n        if (stream) {\n            // RN getSettings() doesn't return facingMode, so we don't verify camera direction\n            const direction = isReactNative() ? this.direction : stream.getVideoTracks()[0]?.getSettings().facingMode === \"environment\" ? \"back\" : \"front\";\n            this.setDirection(direction);\n        }\n    }\n    getDeviceIdFromStream(stream) {\n        return stream.getVideoTracks()[0]?.getSettings().deviceId;\n    }\n}\nclass CameraManager extends InputMediaDeviceManager {\n    constructor(call){\n        super(call, new CameraManagerState(), TrackType.VIDEO);\n        this.targetResolution = {\n            width: 1280,\n            height: 720\n        };\n    }\n    /**\n     * Select the camera direction.\n     *\n     * @param direction the direction of the camera to select.\n     */ async selectDirection(direction) {\n        this.state.setDirection(direction);\n        // Providing both device id and direction doesn't work, so we deselect the device\n        this.state.setDevice(undefined);\n        await this.applySettingsToStream();\n    }\n    /**\n     * Flips the camera direction: if it's front it will change to back, if it's back, it will change to front.\n     *\n     * Note: if there is no available camera with the desired direction, this method will do nothing.\n     * @returns\n     */ async flip() {\n        const newDirection = this.state.direction === \"front\" ? \"back\" : \"front\";\n        await this.selectDirection(newDirection);\n    }\n    /**\n     * @internal\n     */ async selectTargetResolution(resolution) {\n        this.targetResolution.height = resolution.height;\n        this.targetResolution.width = resolution.width;\n        if (this.enablePromise) {\n            try {\n                await this.enablePromise;\n            } catch (error) {\n                // couldn't enable device, target resolution will be applied the next time user attempts to start the device\n                this.logger(\"warn\", \"could not apply target resolution\", error);\n            }\n        }\n        if (this.state.status === \"enabled\") {\n            const { width, height } = this.state.mediaStream.getVideoTracks()[0]?.getSettings();\n            if (width !== this.targetResolution.width || height !== this.targetResolution.height) {\n                await this.applySettingsToStream();\n                this.logger(\"debug\", `${width}x${height} target resolution applied to media stream`);\n            }\n        }\n    }\n    /**\n     * Sets the preferred codec for encoding the video.\n     *\n     * @internal internal use only, not part of the public API.\n     * @param codec the codec to use for encoding the video.\n     */ setPreferredCodec(codec) {\n        this.preferredCodec = codec;\n    }\n    getDevices() {\n        return getVideoDevices();\n    }\n    getStream(constraints) {\n        constraints.width = this.targetResolution.width;\n        constraints.height = this.targetResolution.height;\n        // We can't set both device id and facing mode\n        // Device id has higher priority\n        if (!constraints.deviceId && this.state.direction) {\n            constraints.facingMode = this.state.direction === \"front\" ? \"user\" : \"environment\";\n        }\n        return getVideoStream(constraints);\n    }\n    publishStream(stream) {\n        return this.call.publishVideoStream(stream, {\n            preferredCodec: this.preferredCodec\n        });\n    }\n    stopPublishStream(stopTracks) {\n        return this.call.stopPublish(TrackType.VIDEO, stopTracks);\n    }\n}\nclass MicrophoneManagerState extends InputMediaDeviceManagerState {\n    constructor(){\n        super(\"disable-tracks\", // `microphone` is not in the W3C standard yet,\n        // but it's supported by Chrome and Safari.\n        \"microphone\");\n        this.speakingWhileMutedSubject = new _barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_19__.BehaviorSubject(false);\n        this.speakingWhileMuted$ = this.speakingWhileMutedSubject.asObservable().pipe((0,_barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_22__.distinctUntilChanged)());\n    }\n    /**\n     * `true` if the user's microphone is muted but they'are speaking.\n     *\n     * This feature is not available in the React Native SDK.\n     */ get speakingWhileMuted() {\n        return this.getCurrentValue(this.speakingWhileMuted$);\n    }\n    /**\n     * @internal\n     */ setSpeakingWhileMuted(isSpeaking) {\n        this.setCurrentValue(this.speakingWhileMutedSubject, isSpeaking);\n    }\n    getDeviceIdFromStream(stream) {\n        return stream.getAudioTracks()[0]?.getSettings().deviceId;\n    }\n}\nconst DETECTION_FREQUENCY_IN_MS = 500;\nconst AUDIO_LEVEL_THRESHOLD$1 = 150;\nconst FFT_SIZE = 128;\n/**\n * Creates a new sound detector.\n *\n * @param audioStream the audio stream to observe. Depending on the provided configuration, this stream might be destroyed when the sound detector is stopped.\n * @param onSoundDetectedStateChanged a callback which is called when the sound state changes.\n * @param options custom options for the sound detector.\n * @returns a clean-up function which once invoked stops the sound detector.\n */ const createSoundDetector = (audioStream, onSoundDetectedStateChanged, options = {})=>{\n    const { detectionFrequencyInMs = DETECTION_FREQUENCY_IN_MS, audioLevelThreshold = AUDIO_LEVEL_THRESHOLD$1, fftSize = FFT_SIZE, destroyStreamOnStop = true } = options;\n    const audioContext = new AudioContext();\n    const analyser = audioContext.createAnalyser();\n    analyser.fftSize = fftSize;\n    const microphone = audioContext.createMediaStreamSource(audioStream);\n    microphone.connect(analyser);\n    const intervalId = setInterval(()=>{\n        const data = new Uint8Array(analyser.frequencyBinCount);\n        analyser.getByteFrequencyData(data);\n        const isSoundDetected = data.some((value)=>value >= audioLevelThreshold);\n        const averagedDataValue = data.reduce((pv, cv)=>pv + cv, 0) / data.length;\n        const percentage = averagedDataValue > audioLevelThreshold ? 100 : Math.round(averagedDataValue / audioLevelThreshold * 100);\n        // When the track is disabled, it takes time for the buffer to empty\n        // This check will ensure that we don't send anything if the track is disabled\n        if (audioStream.getAudioTracks()[0]?.enabled) {\n            onSoundDetectedStateChanged({\n                isSoundDetected,\n                audioLevel: percentage\n            });\n        } else {\n            onSoundDetectedStateChanged({\n                isSoundDetected: false,\n                audioLevel: 0\n            });\n        }\n    }, detectionFrequencyInMs);\n    return async function stop() {\n        clearInterval(intervalId);\n        // clean-up the AudioContext elements\n        microphone.disconnect();\n        analyser.disconnect();\n        await audioContext.close();\n        // stop the stream\n        if (destroyStreamOnStop) {\n            audioStream.getTracks().forEach((track)=>{\n                track.stop();\n                audioStream.removeTrack(track);\n            });\n        }\n    };\n};\n/**\n * Flatten the stats report into an array of stats objects.\n *\n * @param report the report to flatten.\n */ const flatten = (report)=>{\n    const stats = [];\n    report.forEach((s)=>{\n        stats.push(s);\n    });\n    return stats;\n};\nconst AUDIO_LEVEL_THRESHOLD = 0.2;\nclass RNSpeechDetector {\n    constructor(){\n        this.pc1 = new RTCPeerConnection({});\n        this.pc2 = new RTCPeerConnection({});\n    }\n    /**\n     * Starts the speech detection.\n     */ async start() {\n        try {\n            const audioStream = await navigator.mediaDevices.getUserMedia({\n                audio: true\n            });\n            this.pc1.addEventListener(\"icecandidate\", async (e)=>{\n                await this.pc2.addIceCandidate(e.candidate);\n            });\n            this.pc2.addEventListener(\"icecandidate\", async (e)=>{\n                await this.pc1.addIceCandidate(e.candidate);\n            });\n            audioStream.getTracks().forEach((track)=>this.pc1.addTrack(track, audioStream));\n            const offer = await this.pc1.createOffer({});\n            await this.pc2.setRemoteDescription(offer);\n            await this.pc1.setLocalDescription(offer);\n            const answer = await this.pc2.createAnswer();\n            await this.pc1.setRemoteDescription(answer);\n            await this.pc2.setLocalDescription(answer);\n            const audioTracks = audioStream.getAudioTracks();\n            // We need to mute the audio track for this temporary stream, or else you will hear yourself twice while in the call.\n            audioTracks.forEach((track)=>track.enabled = false);\n        } catch (error) {\n            console.error(\"Error connecting and negotiating between PeerConnections:\", error);\n        }\n    }\n    /**\n     * Stops the speech detection and releases all allocated resources.\n     */ stop() {\n        this.pc1.close();\n        this.pc2.close();\n        if (this.intervalId) {\n            clearInterval(this.intervalId);\n        }\n    }\n    /**\n     * Public method that detects the audio levels and returns the status.\n     */ onSpeakingDetectedStateChange(onSoundDetectedStateChanged) {\n        this.intervalId = setInterval(async ()=>{\n            const stats = await this.pc1.getStats();\n            const report = flatten(stats);\n            // Audio levels are present inside stats of type `media-source` and of kind `audio`\n            const audioMediaSourceStats = report.find((stat)=>stat.type === \"media-source\" && stat.kind === \"audio\");\n            if (audioMediaSourceStats) {\n                const { audioLevel } = audioMediaSourceStats;\n                if (audioLevel) {\n                    if (audioLevel >= AUDIO_LEVEL_THRESHOLD) {\n                        onSoundDetectedStateChanged({\n                            isSoundDetected: true,\n                            audioLevel\n                        });\n                    } else {\n                        onSoundDetectedStateChanged({\n                            isSoundDetected: false,\n                            audioLevel: 0\n                        });\n                    }\n                }\n            }\n        }, 1000);\n        return ()=>{\n            clearInterval(this.intervalId);\n        };\n    }\n}\nclass MicrophoneManager extends InputMediaDeviceManager {\n    constructor(call){\n        super(call, new MicrophoneManagerState(), TrackType.AUDIO);\n        (0,_barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_18__.combineLatest)([\n            this.call.state.callingState$,\n            this.call.state.ownCapabilities$,\n            this.state.selectedDevice$,\n            this.state.status$\n        ]).subscribe(async ([callingState, ownCapabilities, deviceId, status])=>{\n            if (callingState !== CallingState.JOINED) {\n                if (callingState === CallingState.LEFT) {\n                    await this.stopSpeakingWhileMutedDetection();\n                }\n                return;\n            }\n            if (ownCapabilities.includes(OwnCapability.SEND_AUDIO)) {\n                if (status === \"disabled\") {\n                    await this.startSpeakingWhileMutedDetection(deviceId);\n                } else {\n                    await this.stopSpeakingWhileMutedDetection();\n                }\n            } else {\n                await this.stopSpeakingWhileMutedDetection();\n            }\n        });\n    }\n    getDevices() {\n        return getAudioDevices();\n    }\n    getStream(constraints) {\n        return getAudioStream(constraints);\n    }\n    publishStream(stream) {\n        return this.call.publishAudioStream(stream);\n    }\n    stopPublishStream(stopTracks) {\n        return this.call.stopPublish(TrackType.AUDIO, stopTracks);\n    }\n    async startSpeakingWhileMutedDetection(deviceId) {\n        await this.stopSpeakingWhileMutedDetection();\n        if (isReactNative()) {\n            this.rnSpeechDetector = new RNSpeechDetector();\n            await this.rnSpeechDetector.start();\n            const unsubscribe = this.rnSpeechDetector?.onSpeakingDetectedStateChange((event)=>{\n                this.state.setSpeakingWhileMuted(event.isSoundDetected);\n            });\n            this.soundDetectorCleanup = ()=>{\n                unsubscribe();\n                this.rnSpeechDetector?.stop();\n                this.rnSpeechDetector = undefined;\n            };\n        } else {\n            // Need to start a new stream that's not connected to publisher\n            const stream = await this.getStream({\n                deviceId\n            });\n            this.soundDetectorCleanup = createSoundDetector(stream, (event)=>{\n                this.state.setSpeakingWhileMuted(event.isSoundDetected);\n            });\n        }\n    }\n    async stopSpeakingWhileMutedDetection() {\n        if (!this.soundDetectorCleanup) {\n            return;\n        }\n        this.state.setSpeakingWhileMuted(false);\n        try {\n            await this.soundDetectorCleanup();\n        } finally{\n            this.soundDetectorCleanup = undefined;\n        }\n    }\n}\nclass ScreenShareState extends InputMediaDeviceManagerState {\n    constructor(){\n        super(...arguments);\n        this.audioEnabledSubject = new _barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_19__.BehaviorSubject(true);\n        this.settingsSubject = new _barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_19__.BehaviorSubject(undefined);\n        /**\n         * An Observable that emits the current screen share audio status.\n         */ this.audioEnabled$ = this.audioEnabledSubject.asObservable().pipe((0,_barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_22__.distinctUntilChanged)());\n        /**\n         * An Observable that emits the current screen share settings.\n         */ this.settings$ = this.settingsSubject.asObservable();\n        /**\n         * @internal\n         */ this.getDeviceIdFromStream = (stream)=>{\n            const [track] = stream.getTracks();\n            return track?.getSettings().deviceId;\n        };\n    }\n    /**\n     * The current screen share audio status.\n     */ get audioEnabled() {\n        return this.getCurrentValue(this.audioEnabled$);\n    }\n    /**\n     * Set the current screen share audio status.\n     */ setAudioEnabled(isEnabled) {\n        this.setCurrentValue(this.audioEnabledSubject, isEnabled);\n    }\n    /**\n     * The current screen share settings.\n     */ get settings() {\n        return this.getCurrentValue(this.settings$);\n    }\n    /**\n     * Set the current screen share settings.\n     *\n     * @param settings the screen share settings to set.\n     */ setSettings(settings) {\n        this.setCurrentValue(this.settingsSubject, settings);\n    }\n}\nclass ScreenShareManager extends InputMediaDeviceManager {\n    constructor(call){\n        super(call, new ScreenShareState(), TrackType.SCREEN_SHARE);\n    }\n    /**\n     * Will enable screen share audio options on supported platforms.\n     *\n     * Note: for ongoing screen share, audio won't be enabled until you\n     * re-publish the screen share stream.\n     */ enableScreenShareAudio() {\n        this.state.setAudioEnabled(true);\n    }\n    /**\n     * Will disable screen share audio options on supported platforms.\n     */ async disableScreenShareAudio() {\n        this.state.setAudioEnabled(false);\n        if (this.call.publisher?.isPublishing(TrackType.SCREEN_SHARE_AUDIO)) {\n            await this.call.stopPublish(TrackType.SCREEN_SHARE_AUDIO, true);\n        }\n    }\n    /**\n     * Returns the current screen share settings.\n     */ getSettings() {\n        return this.state.settings;\n    }\n    /**\n     * Sets the current screen share settings.\n     *\n     * @param settings the settings to set.\n     */ setSettings(settings) {\n        this.state.setSettings(settings);\n    }\n    getDevices() {\n        return (0,_barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_31__.of)([]); // there are no devices to be listed for Screen Share\n    }\n    getStream(constraints) {\n        if (!this.state.audioEnabled) {\n            constraints.audio = false;\n        }\n        return getScreenShareStream(constraints);\n    }\n    publishStream(stream) {\n        return this.call.publishScreenShareStream(stream, {\n            screenShareSettings: this.state.settings\n        });\n    }\n    async stopPublishStream(stopTracks) {\n        await this.call.stopPublish(TrackType.SCREEN_SHARE, stopTracks);\n        await this.call.stopPublish(TrackType.SCREEN_SHARE_AUDIO, stopTracks);\n    }\n    /**\n     * Overrides the default `select` method to throw an error.\n     *\n     * @param deviceId ignored.\n     */ async select(deviceId) {\n        throw new Error(\"This method is not supported in for Screen Share\");\n    }\n}\nclass SpeakerState {\n    constructor(){\n        this.selectedDeviceSubject = new _barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_19__.BehaviorSubject(\"\");\n        this.volumeSubject = new _barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_19__.BehaviorSubject(1);\n        /**\n         * [Tells if the browser supports audio output change on 'audio' elements](https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement/setSinkId).\n         */ this.isDeviceSelectionSupported = checkIfAudioOutputChangeSupported();\n        /**\n         * Gets the current value of an observable, or undefined if the observable has\n         * not emitted a value yet.\n         *\n         * @param observable$ the observable to get the value from.\n         */ this.getCurrentValue = getCurrentValue;\n        /**\n         * Updates the value of the provided Subject.\n         * An `update` can either be a new value or a function which takes\n         * the current value and returns a new value.\n         *\n         * @internal\n         *\n         * @param subject the subject to update.\n         * @param update the update to apply to the subject.\n         * @return the updated value.\n         */ this.setCurrentValue = setCurrentValue;\n        this.selectedDevice$ = this.selectedDeviceSubject.asObservable().pipe((0,_barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_22__.distinctUntilChanged)());\n        this.volume$ = this.volumeSubject.asObservable().pipe((0,_barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_22__.distinctUntilChanged)());\n    }\n    /**\n     * The currently selected device\n     *\n     * Note: this feature is not supported in React Native\n     */ get selectedDevice() {\n        return this.getCurrentValue(this.selectedDevice$);\n    }\n    /**\n     * The currently selected volume\n     *\n     * Note: this feature is not supported in React Native\n     */ get volume() {\n        return this.getCurrentValue(this.volume$);\n    }\n    /**\n     * @internal\n     * @param deviceId\n     */ setDevice(deviceId) {\n        this.setCurrentValue(this.selectedDeviceSubject, deviceId);\n    }\n    /**\n     * @internal\n     * @param volume\n     */ setVolume(volume) {\n        this.setCurrentValue(this.volumeSubject, volume);\n    }\n}\nclass SpeakerManager {\n    constructor(){\n        this.state = new SpeakerState();\n        this.subscriptions = [];\n        this.removeSubscriptions = ()=>{\n            this.subscriptions.forEach((s)=>s.unsubscribe());\n        };\n        if (deviceIds$ && !isReactNative()) {\n            this.subscriptions.push((0,_barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_18__.combineLatest)([\n                deviceIds$,\n                this.state.selectedDevice$\n            ]).subscribe(([devices, deviceId])=>{\n                if (!deviceId) {\n                    return;\n                }\n                const device = devices.find((d)=>d.deviceId === deviceId && d.kind === \"audiooutput\");\n                if (!device) {\n                    this.select(\"\");\n                }\n            }));\n        }\n    }\n    /**\n     * Lists the available audio output devices\n     *\n     * Note: It prompts the user for a permission to use devices (if not already granted)\n     *\n     * @returns an Observable that will be updated if a device is connected or disconnected\n     */ listDevices() {\n        return getAudioOutputDevices();\n    }\n    /**\n     * Select device\n     *\n     * Note: this method is not supported in React Native\n     *\n     * @param deviceId empty string means the system default\n     */ select(deviceId) {\n        if (isReactNative()) {\n            throw new Error(\"This feature is not supported in React Native\");\n        }\n        this.state.setDevice(deviceId);\n    }\n    /**\n     * Set the volume of the audio elements\n     * @param volume a number between 0 and 1\n     *\n     * Note: this method is not supported in React Native\n     */ setVolume(volume) {\n        if (isReactNative()) {\n            throw new Error(\"This feature is not supported in React Native\");\n        }\n        if (volume && (volume < 0 || volume > 1)) {\n            throw new Error(\"Volume must be between 0 and 1\");\n        }\n        this.state.setVolume(volume);\n    }\n}\n/**\n * An object representation of a `Call`.\n */ class Call {\n    /**\n     * Constructs a new `Call` instance.\n     *\n     * NOTE: Don't call the constructor directly, instead\n     * Use the [`StreamVideoClient.call`](./StreamVideoClient.md/#call)\n     * method to construct a `Call` instance.\n     */ constructor({ type, id, streamClient, members, ownCapabilities, sortParticipantsBy, clientStore, ringing = false, watching = false }){\n        /**\n         * The state of this call.\n         */ this.state = new CallState();\n        /**\n         * The DynascaleManager instance.\n         */ this.dynascaleManager = new DynascaleManager(this);\n        /**\n         * The permissions context of this call.\n         */ this.permissionsContext = new PermissionsContext();\n        /**\n         * The event dispatcher instance dedicated to this Call instance.\n         * @private\n         */ this.dispatcher = new Dispatcher();\n        this.trackSubscriptionsSubject = new _barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_19__.BehaviorSubject({\n            type: DebounceType.MEDIUM,\n            data: []\n        });\n        this.reconnectAttempts = 0;\n        this.maxReconnectAttempts = 10;\n        /**\n         * A list hooks/functions to invoke when the call is left.\n         * A typical use case is to clean up some global event handlers.\n         * @private\n         */ this.leaveCallHooks = new Set();\n        this.streamClientEventHandlers = new Map();\n        /**\n         * You can subscribe to WebSocket events provided by the API. To remove a subscription, call the `off` method.\n         * Please note that subscribing to WebSocket events is an advanced use-case.\n         * For most use-cases, it should be enough to watch for state changes.\n         *\n         * @param eventName the event name.\n         * @param fn the event handler.\n         */ this.on = (eventName, fn)=>{\n            if (isSfuEvent(eventName)) {\n                return this.dispatcher.on(eventName, fn);\n            }\n            const offHandler = this.streamClient.on(eventName, (e)=>{\n                const event = e;\n                if (event.call_cid && event.call_cid === this.cid) {\n                    fn(event);\n                }\n            });\n            // keep the 'off' reference returned by the stream client\n            this.streamClientEventHandlers.set(fn, offHandler);\n            return ()=>{\n                this.off(eventName, fn);\n            };\n        };\n        /**\n         * Remove subscription for WebSocket events that were created by the `on` method.\n         *\n         * @param eventName the event name.\n         * @param fn the event handler.\n         */ this.off = (eventName, fn)=>{\n            if (isSfuEvent(eventName)) {\n                return this.dispatcher.off(eventName, fn);\n            }\n            // unsubscribe from the stream client event by using the 'off' reference\n            const registeredOffHandler = this.streamClientEventHandlers.get(fn);\n            if (registeredOffHandler) {\n                registeredOffHandler();\n            }\n        };\n        /**\n         * Leave the call and stop the media streams that were published by the call.\n         */ this.leave = async ({ reject = false } = {})=>{\n            const callingState = this.state.callingState;\n            if (callingState === CallingState.LEFT) {\n                throw new Error(\"Cannot leave call that has already been left.\");\n            }\n            if (callingState === CallingState.JOINING) {\n                await this.assertCallJoined();\n            }\n            if (this.ringing) {\n                // I'm the one who started the call, so I should cancel it.\n                const hasOtherParticipants = this.state.remoteParticipants.length > 0;\n                if (this.isCreatedByMe && !hasOtherParticipants) {\n                    // Signals other users that I have cancelled my call to them\n                    // before they accepted it.\n                    await this.reject();\n                } else if (reject && callingState === CallingState.RINGING) {\n                    // Signals other users that I have rejected the incoming call.\n                    await this.reject();\n                }\n            }\n            this.statsReporter?.stop();\n            this.statsReporter = undefined;\n            this.subscriber?.close();\n            this.subscriber = undefined;\n            this.publisher?.close();\n            this.publisher = undefined;\n            this.sfuClient?.close();\n            this.sfuClient = undefined;\n            this.dispatcher.offAll();\n            this.state.setCallingState(CallingState.LEFT);\n            // Call all leave call hooks, e.g. to clean up global event handlers\n            this.leaveCallHooks.forEach((hook)=>hook());\n            this.clientStore.unregisterCall(this);\n            this.camera.removeSubscriptions();\n            this.microphone.removeSubscriptions();\n            this.screenShare.removeSubscriptions();\n            this.speaker.removeSubscriptions();\n            const stopOnLeavePromises = [];\n            if (this.camera.stopOnLeave) {\n                stopOnLeavePromises.push(this.camera.disable(true));\n            }\n            if (this.microphone.stopOnLeave) {\n                stopOnLeavePromises.push(this.microphone.disable(true));\n            }\n            if (this.screenShare.stopOnLeave) {\n                stopOnLeavePromises.push(this.screenShare.disable(true));\n            }\n            await Promise.all(stopOnLeavePromises);\n        };\n        /**\n         * Loads the information about the call.\n         *\n         * @param params.ring if set to true, a `call.ring` event will be sent to the call members.\n         * @param params.notify if set to true, a `call.notification` event will be sent to the call members.\n         * @param params.members_limit the total number of members to return as part of the response.\n         */ this.get = async (params)=>{\n            const response = await this.streamClient.get(this.streamClientBasePath, params);\n            if (params?.ring && !this.ringing) {\n                this.ringingSubject.next(true);\n            }\n            this.state.updateFromCallResponse(response.call);\n            this.state.setMembers(response.members);\n            this.state.setOwnCapabilities(response.own_capabilities);\n            if (this.streamClient._hasConnectionID()) {\n                this.watching = true;\n                this.clientStore.registerCall(this);\n            }\n            this.applyDeviceConfig();\n            return response;\n        };\n        /**\n         * Loads the information about the call and creates it if it doesn't exist.\n         *\n         * @param data the data to create the call with.\n         */ this.getOrCreate = async (data)=>{\n            const response = await this.streamClient.post(this.streamClientBasePath, data);\n            if (data?.ring && !this.ringing) {\n                this.ringingSubject.next(true);\n            }\n            this.state.updateFromCallResponse(response.call);\n            this.state.setMembers(response.members);\n            this.state.setOwnCapabilities(response.own_capabilities);\n            if (this.streamClient._hasConnectionID()) {\n                this.watching = true;\n                this.clientStore.registerCall(this);\n            }\n            this.applyDeviceConfig();\n            return response;\n        };\n        /**\n         * Creates a call\n         *\n         * @param data the data to create the call with.\n         */ this.create = async (data)=>{\n            return this.getOrCreate(data);\n        };\n        /**\n         * A shortcut for {@link Call.get} with `ring` parameter set to `true`.\n         * Will send a `call.ring` event to the call members.\n         */ this.ring = async ()=>{\n            return await this.get({\n                ring: true\n            });\n        };\n        /**\n         * A shortcut for {@link Call.get} with `notify` parameter set to `true`.\n         * Will send a `call.notification` event to the call members.\n         */ this.notify = async ()=>{\n            return await this.get({\n                notify: true\n            });\n        };\n        /**\n         * Marks the incoming call as accepted.\n         *\n         * This method should be used only for \"ringing\" call flows.\n         * {@link Call.join} invokes this method automatically for you when joining a call.\n         * Unless you are implementing a custom \"ringing\" flow, you should not use this method.\n         */ this.accept = async ()=>{\n            return this.streamClient.post(`${this.streamClientBasePath}/accept`);\n        };\n        /**\n         * Marks the incoming call as rejected.\n         *\n         * This method should be used only for \"ringing\" call flows.\n         * {@link Call.leave} invokes this method automatically for you when you leave or reject this call.\n         * Unless you are implementing a custom \"ringing\" flow, you should not use this method.\n         */ this.reject = async ()=>{\n            return this.streamClient.post(`${this.streamClientBasePath}/reject`);\n        };\n        /**\n         * Will start to watch for call related WebSocket events and initiate a call session with the server.\n         *\n         * @returns a promise which resolves once the call join-flow has finished.\n         */ this.join = async (data)=>{\n            const callingState = this.state.callingState;\n            if ([\n                CallingState.JOINED,\n                CallingState.JOINING\n            ].includes(callingState)) {\n                this.logger(\"warn\", \"Join method called twice, you should only call this once\");\n                throw new Error(`Illegal State: Already joined.`);\n            }\n            if (callingState === CallingState.LEFT) {\n                throw new Error(\"Illegal State: Cannot join already left call. Create a new Call instance to join a call.\");\n            }\n            const isMigrating = callingState === CallingState.MIGRATING;\n            const isReconnecting = callingState === CallingState.RECONNECTING;\n            this.state.setCallingState(CallingState.JOINING);\n            this.logger(\"debug\", \"Starting join flow\");\n            if (data?.ring && !this.ringing) {\n                this.ringingSubject.next(true);\n            }\n            if (this.ringing && !this.isCreatedByMe) {\n                // signals other users that I have accepted the incoming call.\n                await this.accept();\n            }\n            let sfuServer;\n            let sfuToken;\n            let connectionConfig;\n            try {\n                if (this.sfuClient?.isFastReconnecting) {\n                    // use previous SFU configuration and values\n                    connectionConfig = this.publisher?.connectionConfiguration;\n                    sfuServer = this.sfuClient.sfuServer;\n                    sfuToken = this.sfuClient.token;\n                } else {\n                    // full join flow - let the Coordinator pick a new SFU for us\n                    const call = await join(this.streamClient, this.type, this.id, data);\n                    this.state.updateFromCallResponse(call.metadata);\n                    this.state.setMembers(call.members);\n                    this.state.setOwnCapabilities(call.ownCapabilities);\n                    connectionConfig = call.connectionConfig;\n                    sfuServer = call.sfuServer;\n                    sfuToken = call.token;\n                }\n                if (this.streamClient._hasConnectionID()) {\n                    this.watching = true;\n                    this.clientStore.registerCall(this);\n                }\n            } catch (error) {\n                // restore the previous call state if the join-flow fails\n                this.state.setCallingState(callingState);\n                throw error;\n            }\n            const previousSfuClient = this.sfuClient;\n            const sfuClient = this.sfuClient = new StreamSfuClient({\n                dispatcher: this.dispatcher,\n                sfuServer,\n                token: sfuToken,\n                sessionId: previousSfuClient?.sessionId\n            });\n            /**\n             * A closure which hides away the re-connection logic.\n             */ const reconnect = async (strategy = \"full\")=>{\n                const currentState = this.state.callingState;\n                if (currentState === CallingState.MIGRATING || currentState === CallingState.RECONNECTING) {\n                    // prevent parallel reconnection attempts\n                    return;\n                }\n                this.reconnectAttempts++;\n                this.state.setCallingState(strategy === \"migrate\" ? CallingState.MIGRATING : CallingState.RECONNECTING);\n                if (strategy === \"migrate\") {\n                    this.logger(\"debug\", `[Migration]: migrating call ${this.cid} away from ${sfuServer.edge_name}`);\n                    sfuClient.isMigratingAway = true;\n                } else {\n                    this.logger(\"debug\", `[Rejoin]: ${strategy} rejoin call ${this.cid} (${this.reconnectAttempts})...`);\n                }\n                // take a snapshot of the current \"local participant\" state\n                // we'll need it for restoring the previous publishing state later\n                const localParticipant = this.state.localParticipant;\n                if (strategy === \"fast\") {\n                    sfuClient.close(StreamSfuClient.ERROR_CONNECTION_BROKEN, \"js-client: attempting fast reconnect\");\n                } else if (strategy === \"full\") {\n                    // in migration or recovery scenarios, we don't want to\n                    // wait before attempting to reconnect to an SFU server\n                    await sleep(retryInterval(this.reconnectAttempts));\n                    // in full-reconnect, we need to dispose all Peer Connections\n                    this.subscriber?.close();\n                    this.subscriber = undefined;\n                    this.publisher?.close({\n                        stopTracks: false\n                    });\n                    this.publisher = undefined;\n                    this.statsReporter?.stop();\n                    this.statsReporter = undefined;\n                    // clean up current connection\n                    sfuClient.close(StreamSfuClient.NORMAL_CLOSURE, \"js-client: attempting full reconnect\");\n                }\n                await this.join({\n                    ...data,\n                    ...strategy === \"migrate\" && {\n                        migrating_from: sfuServer.edge_name\n                    }\n                });\n                // clean up previous connection\n                if (strategy === \"migrate\") {\n                    sfuClient.close(StreamSfuClient.NORMAL_CLOSURE, \"js-client: attempting migration\");\n                }\n                this.logger(\"info\", `[Rejoin]: Attempt ${this.reconnectAttempts} successful!`);\n                // we shouldn't be republishing the streams if we're migrating\n                // as the underlying peer connection will take care of it as part\n                // of the ice-restart process\n                if (localParticipant && strategy === \"full\") {\n                    const { audioStream, videoStream, screenShareStream, screenShareAudioStream } = localParticipant;\n                    let screenShare;\n                    if (screenShareStream || screenShareAudioStream) {\n                        screenShare = new MediaStream();\n                        screenShareStream?.getVideoTracks().forEach((track)=>{\n                            screenShare?.addTrack(track);\n                        });\n                        screenShareAudioStream?.getAudioTracks().forEach((track)=>{\n                            screenShare?.addTrack(track);\n                        });\n                    }\n                    // restore previous publishing state\n                    if (audioStream) await this.publishAudioStream(audioStream);\n                    if (videoStream) {\n                        await this.publishVideoStream(videoStream, {\n                            preferredCodec: this.camera.preferredCodec\n                        });\n                    }\n                    if (screenShare) await this.publishScreenShareStream(screenShare);\n                    this.logger(\"info\", `[Rejoin]: State restored. Attempt: ${this.reconnectAttempts}`);\n                }\n            };\n            // reconnect if the connection was closed unexpectedly. example:\n            // - SFU crash or restart\n            // - network change\n            sfuClient.signalReady.then(()=>{\n                // register a handler for the \"goAway\" event\n                const unregisterGoAway = this.dispatcher.on(\"goAway\", (event)=>{\n                    const { reason } = event;\n                    this.logger(\"info\", `[Migration]: Going away from SFU... Reason: ${GoAwayReason[reason]}`);\n                    reconnect(\"migrate\").catch((err)=>{\n                        this.logger(\"warn\", `[Migration]: Failed to migrate to another SFU.`, err);\n                    });\n                });\n                sfuClient.signalWs.addEventListener(\"close\", (e)=>{\n                    // unregister the \"goAway\" handler, as we won't need it anymore for this connection.\n                    // the upcoming re-join will register a new handler anyway\n                    unregisterGoAway();\n                    // do nothing if the connection was closed on purpose\n                    if (e.code === StreamSfuClient.NORMAL_CLOSURE) return;\n                    // do nothing if the connection was closed because of a policy violation\n                    // e.g., the user has been blocked by an admin or moderator\n                    if (e.code === KnownCodes.WS_POLICY_VIOLATION) return;\n                    // When the SFU is being shut down, it sends a goAway message.\n                    // While we migrate to another SFU, we might have the WS connection\n                    // to the old SFU closed abruptly. In this case, we don't want\n                    // to reconnect to the old SFU, but rather to the new one.\n                    const isMigratingAway = e.code === KnownCodes.WS_CLOSED_ABRUPTLY && sfuClient.isMigratingAway;\n                    const isFastReconnecting = e.code === KnownCodes.WS_CLOSED_ABRUPTLY && sfuClient.isFastReconnecting;\n                    if (isMigratingAway || isFastReconnecting) return;\n                    // do nothing if the connection was closed because of a fast reconnect\n                    if (e.code === StreamSfuClient.ERROR_CONNECTION_BROKEN) return;\n                    if (this.reconnectAttempts < this.maxReconnectAttempts) {\n                        sfuClient.isFastReconnecting = this.reconnectAttempts === 0;\n                        const strategy = sfuClient.isFastReconnecting ? \"fast\" : \"full\";\n                        reconnect(strategy).catch((err)=>{\n                            this.logger(\"error\", `[Rejoin]: ${strategy} rejoin failed for ${this.reconnectAttempts} times. Giving up.`, err);\n                            this.state.setCallingState(CallingState.RECONNECTING_FAILED);\n                        });\n                    } else {\n                        this.logger(\"error\", \"[Rejoin]: Reconnect attempts exceeded. Giving up...\");\n                        this.state.setCallingState(CallingState.RECONNECTING_FAILED);\n                    }\n                });\n            });\n            // handlers for connection online/offline events\n            const unsubscribeOnlineEvent = this.streamClient.on(\"connection.changed\", async (e)=>{\n                if (e.type !== \"connection.changed\") return;\n                if (!e.online) return;\n                unsubscribeOnlineEvent();\n                const currentCallingState = this.state.callingState;\n                const shouldReconnect = currentCallingState === CallingState.OFFLINE || currentCallingState === CallingState.RECONNECTING_FAILED;\n                if (!shouldReconnect) return;\n                this.logger(\"info\", \"[Rejoin]: Going online...\");\n                let isFirstReconnectAttempt = true;\n                do {\n                    try {\n                        sfuClient.isFastReconnecting = isFirstReconnectAttempt;\n                        await reconnect(isFirstReconnectAttempt ? \"fast\" : \"full\");\n                        return; // break the loop if rejoin is successful\n                    } catch (err) {\n                        this.logger(\"error\", `[Rejoin][Network]: Rejoin failed for attempt ${this.reconnectAttempts}`, err);\n                    }\n                    // wait for a bit before trying to reconnect again\n                    await sleep(retryInterval(this.reconnectAttempts));\n                    isFirstReconnectAttempt = false;\n                }while (this.reconnectAttempts < this.maxReconnectAttempts);\n                // if we're here, it means that we've exhausted all the reconnect attempts\n                this.logger(\"error\", `[Rejoin][Network]: Rejoin failed. Giving up.`);\n                this.state.setCallingState(CallingState.RECONNECTING_FAILED);\n            });\n            const unsubscribeOfflineEvent = this.streamClient.on(\"connection.changed\", (e)=>{\n                if (e.type !== \"connection.changed\") return;\n                if (e.online) return;\n                unsubscribeOfflineEvent();\n                this.state.setCallingState(CallingState.OFFLINE);\n            });\n            this.leaveCallHooks.add(()=>{\n                unsubscribeOnlineEvent();\n                unsubscribeOfflineEvent();\n            });\n            if (!this.subscriber) {\n                this.subscriber = new Subscriber({\n                    sfuClient,\n                    dispatcher: this.dispatcher,\n                    state: this.state,\n                    connectionConfig\n                });\n            }\n            const audioSettings = this.state.settings?.audio;\n            const isDtxEnabled = !!audioSettings?.opus_dtx_enabled;\n            const isRedEnabled = !!audioSettings?.redundant_coding_enabled;\n            if (!this.publisher) {\n                this.publisher = new Publisher({\n                    sfuClient,\n                    dispatcher: this.dispatcher,\n                    state: this.state,\n                    connectionConfig,\n                    isDtxEnabled,\n                    isRedEnabled\n                });\n            }\n            if (!this.statsReporter) {\n                this.statsReporter = createStatsReporter({\n                    subscriber: this.subscriber,\n                    publisher: this.publisher,\n                    state: this.state\n                });\n            }\n            try {\n                // 1. wait for the signal server to be ready before sending \"joinRequest\"\n                sfuClient.signalReady.catch((err)=>this.logger(\"error\", \"Signal ready failed\", err))// prepare a generic SDP and send it to the SFU.\n                // this is a throw-away SDP that the SFU will use to determine\n                // the capabilities of the client (codec support, etc.)\n                .then(()=>getGenericSdp(\"recvonly\")).then((sdp)=>{\n                    const subscriptions = getCurrentValue(this.trackSubscriptionsSubject);\n                    const migration = isMigrating ? {\n                        fromSfuId: data?.migrating_from || \"\",\n                        subscriptions: subscriptions.data || [],\n                        announcedTracks: this.publisher?.getCurrentTrackInfos() || []\n                    } : undefined;\n                    return sfuClient.join({\n                        subscriberSdp: sdp || \"\",\n                        clientDetails: getClientDetails(),\n                        migration,\n                        fastReconnect: previousSfuClient?.isFastReconnecting ?? false\n                    });\n                });\n                // 2. in parallel, wait for the SFU to send us the \"joinResponse\"\n                // this will throw an error if the SFU rejects the join request or\n                // fails to respond in time\n                const { callState, reconnected } = await this.waitForJoinResponse();\n                if (isReconnecting) {\n                    this.logger(\"debug\", \"[Rejoin] fast reconnected:\", reconnected);\n                }\n                if (isMigrating) {\n                    await this.subscriber.migrateTo(sfuClient, connectionConfig);\n                    await this.publisher.migrateTo(sfuClient, connectionConfig);\n                } else if (isReconnecting) {\n                    if (reconnected) {\n                        // update the SFU client instance on the subscriber and publisher\n                        this.subscriber.setSfuClient(sfuClient);\n                        this.publisher.setSfuClient(sfuClient);\n                        // and perform a full ICE restart on the publisher\n                        await this.publisher.restartIce();\n                    } else if (previousSfuClient?.isFastReconnecting) {\n                        // reconnection wasn't possible, so we need to do a full rejoin\n                        return await reconnect(\"full\").catch((err)=>{\n                            this.logger(\"error\", `[Rejoin]: Rejoin failed forced full rejoin.`, err);\n                        });\n                    }\n                }\n                const currentParticipants = callState?.participants || [];\n                const participantCount = callState?.participantCount;\n                const startedAt = callState?.startedAt ? Timestamp.toDate(callState.startedAt) : new Date();\n                const pins = callState?.pins ?? [];\n                this.state.setParticipants(()=>{\n                    const participantLookup = this.state.getParticipantLookupBySessionId();\n                    return currentParticipants.map((p)=>{\n                        // We need to preserve the local state of the participant\n                        // (e.g. videoDimension, visibilityState, pinnedAt, etc.)\n                        // as it doesn't exist on the server.\n                        const existingParticipant = participantLookup[p.sessionId];\n                        return Object.assign(p, existingParticipant, {\n                            isLocalParticipant: p.sessionId === sfuClient.sessionId,\n                            viewportVisibilityState: existingParticipant?.viewportVisibilityState ?? {\n                                videoTrack: VisibilityState.UNKNOWN,\n                                screenShareTrack: VisibilityState.UNKNOWN\n                            }\n                        });\n                    });\n                });\n                this.state.setParticipantCount(participantCount?.total || 0);\n                this.state.setAnonymousParticipantCount(participantCount?.anonymous || 0);\n                this.state.setStartedAt(startedAt);\n                this.state.setServerSidePins(pins);\n                this.reconnectAttempts = 0; // reset the reconnect attempts counter\n                this.state.setCallingState(CallingState.JOINED);\n                try {\n                    await this.initCamera({\n                        setStatus: true\n                    });\n                    await this.initMic({\n                        setStatus: true\n                    });\n                } catch (error) {\n                    this.logger(\"warn\", \"Camera and/or mic init failed during join call\", error);\n                }\n                // 3. once we have the \"joinResponse\", and possibly reconciled the local state\n                // we schedule a fast subscription update for all remote participants\n                // that were visible before we reconnected or migrated to a new SFU.\n                const { remoteParticipants } = this.state;\n                if (remoteParticipants.length > 0) {\n                    this.updateSubscriptions(remoteParticipants, DebounceType.FAST);\n                }\n                this.logger(\"info\", `Joined call ${this.cid}`);\n            } catch (err) {\n                // join failed, try to rejoin\n                if (this.reconnectAttempts < this.maxReconnectAttempts) {\n                    this.logger(\"error\", `[Rejoin]: Rejoin ${this.reconnectAttempts} failed.`, err);\n                    await reconnect();\n                    this.logger(\"info\", `[Rejoin]: Rejoin ${this.reconnectAttempts} successful!`);\n                } else {\n                    this.logger(\"error\", `[Rejoin]: Rejoin failed for ${this.reconnectAttempts} times. Giving up.`);\n                    this.state.setCallingState(CallingState.RECONNECTING_FAILED);\n                    throw new Error(\"Join failed\");\n                }\n            }\n        };\n        this.waitForJoinResponse = (timeout = 5000)=>{\n            return new Promise((resolve, reject)=>{\n                const unsubscribe = this.on(\"joinResponse\", (event)=>{\n                    clearTimeout(timeoutId);\n                    unsubscribe();\n                    resolve(event);\n                });\n                const timeoutId = setTimeout(()=>{\n                    unsubscribe();\n                    reject(new Error('Waiting for \"joinResponse\" has timed out'));\n                }, timeout);\n            });\n        };\n        /**\n         * Starts publishing the given video stream to the call.\n         * The stream will be stopped if the user changes an input device, or if the user leaves the call.\n         *\n         * Consecutive calls to this method will replace the previously published stream.\n         * The previous video stream will be stopped.\n         *\n         * @param videoStream the video stream to publish.\n         * @param opts the options to use when publishing the stream.\n         */ this.publishVideoStream = async (videoStream, opts = {})=>{\n            // we should wait until we get a JoinResponse from the SFU,\n            // otherwise we risk breaking the ICETrickle flow.\n            await this.assertCallJoined();\n            if (!this.publisher) {\n                this.logger(\"error\", \"Trying to publish video before join is completed\");\n                throw new Error(`Call not joined yet.`);\n            }\n            const [videoTrack] = videoStream.getVideoTracks();\n            if (!videoTrack) {\n                this.logger(\"error\", `There is no video track to publish in the stream.`);\n                return;\n            }\n            await this.publisher.publishStream(videoStream, videoTrack, TrackType.VIDEO, opts);\n        };\n        /**\n         * Starts publishing the given audio stream to the call.\n         * The stream will be stopped if the user changes an input device, or if the user leaves the call.\n         *\n         * Consecutive calls to this method will replace the audio stream that is currently being published.\n         * The previous audio stream will be stopped.\n         *\n         * @param audioStream the audio stream to publish.\n         */ this.publishAudioStream = async (audioStream)=>{\n            // we should wait until we get a JoinResponse from the SFU,\n            // otherwise we risk breaking the ICETrickle flow.\n            await this.assertCallJoined();\n            if (!this.publisher) {\n                this.logger(\"error\", \"Trying to publish audio before join is completed\");\n                throw new Error(`Call not joined yet.`);\n            }\n            const [audioTrack] = audioStream.getAudioTracks();\n            if (!audioTrack) {\n                this.logger(\"error\", `There is no audio track in the stream to publish`);\n                return;\n            }\n            await this.publisher.publishStream(audioStream, audioTrack, TrackType.AUDIO);\n        };\n        /**\n         * Starts publishing the given screen-share stream to the call.\n         *\n         * Consecutive calls to this method will replace the previous screen-share stream.\n         * The previous screen-share stream will be stopped.\n         *\n         * @param screenShareStream the screen-share stream to publish.\n         * @param opts the options to use when publishing the stream.\n         */ this.publishScreenShareStream = async (screenShareStream, opts = {})=>{\n            // we should wait until we get a JoinResponse from the SFU,\n            // otherwise we risk breaking the ICETrickle flow.\n            await this.assertCallJoined();\n            if (!this.publisher) {\n                this.logger(\"error\", \"Trying to publish screen share before join is completed\");\n                throw new Error(`Call not joined yet.`);\n            }\n            const [screenShareTrack] = screenShareStream.getVideoTracks();\n            if (!screenShareTrack) {\n                this.logger(\"error\", `There is no video track in the screen share stream to publish`);\n                return;\n            }\n            await this.publisher.publishStream(screenShareStream, screenShareTrack, TrackType.SCREEN_SHARE, opts);\n            const [screenShareAudioTrack] = screenShareStream.getAudioTracks();\n            if (screenShareAudioTrack) {\n                await this.publisher.publishStream(screenShareStream, screenShareAudioTrack, TrackType.SCREEN_SHARE_AUDIO, opts);\n            }\n        };\n        /**\n         * Stops publishing the given track type to the call, if it is currently being published.\n         * Underlying track will be stopped and removed from the publisher.\n         *\n         * @param trackType the track type to stop publishing.\n         * @param stopTrack if `true` the track will be stopped, else it will be just disabled\n         */ this.stopPublish = async (trackType, stopTrack = true)=>{\n            this.logger(\"info\", `stopPublish ${TrackType[trackType]}, stop tracks: ${stopTrack}`);\n            await this.publisher?.unpublishStream(trackType, stopTrack);\n        };\n        /**\n         * Update track subscription configuration for one or more participants.\n         * You have to create a subscription for each participant for all the different kinds of tracks you want to receive.\n         * You can only subscribe for tracks after the participant started publishing the given kind of track.\n         *\n         * @param trackType the kind of subscription to update.\n         * @param changes the list of subscription changes to do.\n         * @param type the debounce type to use for the update.\n         */ this.updateSubscriptionsPartial = (trackType, changes, type = DebounceType.SLOW)=>{\n            if (trackType === \"video\") {\n                this.logger(\"warn\", `updateSubscriptionsPartial: ${trackType} is deprecated. Please switch to 'videoTrack'`);\n                trackType = \"videoTrack\";\n            } else if (trackType === \"screen\") {\n                this.logger(\"warn\", `updateSubscriptionsPartial: ${trackType} is deprecated. Please switch to 'screenShareTrack'`);\n                trackType = \"screenShareTrack\";\n            }\n            const participants = this.state.updateParticipants(Object.entries(changes).reduce((acc, [sessionId, change])=>{\n                if (change.dimension?.height) {\n                    change.dimension.height = Math.ceil(change.dimension.height);\n                }\n                if (change.dimension?.width) {\n                    change.dimension.width = Math.ceil(change.dimension.width);\n                }\n                const prop = trackType === \"videoTrack\" ? \"videoDimension\" : trackType === \"screenShareTrack\" ? \"screenShareDimension\" : undefined;\n                if (prop) {\n                    acc[sessionId] = {\n                        [prop]: change.dimension\n                    };\n                }\n                return acc;\n            }, {}));\n            if (participants) {\n                this.updateSubscriptions(participants, type);\n            }\n        };\n        this.updateSubscriptions = (participants, type = DebounceType.SLOW)=>{\n            const subscriptions = [];\n            for (const p of participants){\n                // we don't want to subscribe to our own tracks\n                if (p.isLocalParticipant) continue;\n                // NOTE: audio tracks don't have to be requested explicitly\n                // as the SFU will implicitly subscribe us to all of them,\n                // once they become available.\n                if (p.videoDimension && p.publishedTracks.includes(TrackType.VIDEO)) {\n                    subscriptions.push({\n                        userId: p.userId,\n                        sessionId: p.sessionId,\n                        trackType: TrackType.VIDEO,\n                        dimension: p.videoDimension\n                    });\n                }\n                if (p.screenShareDimension && p.publishedTracks.includes(TrackType.SCREEN_SHARE)) {\n                    subscriptions.push({\n                        userId: p.userId,\n                        sessionId: p.sessionId,\n                        trackType: TrackType.SCREEN_SHARE,\n                        dimension: p.screenShareDimension\n                    });\n                }\n                if (p.publishedTracks.includes(TrackType.SCREEN_SHARE_AUDIO)) {\n                    subscriptions.push({\n                        userId: p.userId,\n                        sessionId: p.sessionId,\n                        trackType: TrackType.SCREEN_SHARE_AUDIO\n                    });\n                }\n            }\n            // schedule update\n            this.trackSubscriptionsSubject.next({\n                type,\n                data: subscriptions\n            });\n        };\n        /**\n         * Will enhance the reported stats with additional participant-specific information (`callStatsReport$` state [store variable](./StreamVideoClient.md/#readonlystatestore)).\n         * This is usually helpful when detailed stats for a specific participant are needed.\n         *\n         * @param sessionId the sessionId to start reporting for.\n         */ this.startReportingStatsFor = (sessionId)=>{\n            return this.statsReporter?.startReportingStatsFor(sessionId);\n        };\n        /**\n         * Opposite of `startReportingStatsFor`.\n         * Will turn off stats reporting for a specific participant.\n         *\n         * @param sessionId the sessionId to stop reporting for.\n         */ this.stopReportingStatsFor = (sessionId)=>{\n            return this.statsReporter?.stopReportingStatsFor(sessionId);\n        };\n        /**\n         * Resets the last sent reaction for the user holding the given `sessionId`. This is a local action, it won't reset the reaction on the backend.\n         *\n         * @param sessionId the session id.\n         */ this.resetReaction = (sessionId)=>{\n            this.state.updateParticipant(sessionId, {\n                reaction: undefined\n            });\n        };\n        /**\n         * Sets the list of criteria to sort the participants by.\n         *\n         * @param criteria the list of criteria to sort the participants by.\n         */ this.setSortParticipantsBy = (criteria)=>{\n            return this.state.setSortParticipantsBy(criteria);\n        };\n        /**\n         * Updates the list of video layers to publish.\n         *\n         * @internal\n         * @param enabledLayers the list of layers to enable.\n         */ this.updatePublishQuality = async (enabledLayers)=>{\n            return this.publisher?.updateVideoPublishQuality(enabledLayers);\n        };\n        this.assertCallJoined = ()=>{\n            return new Promise((resolve)=>{\n                this.state.callingState$.pipe((0,_barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_23__.takeWhile)((state)=>state !== CallingState.JOINED, true), (0,_barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_32__.filter)((s)=>s === CallingState.JOINED)).subscribe(()=>resolve());\n            });\n        };\n        /**\n         * Sends a reaction to the other call participants.\n         *\n         * @param reaction the reaction to send.\n         */ this.sendReaction = async (reaction)=>{\n            return this.streamClient.post(`${this.streamClientBasePath}/reaction`, reaction);\n        };\n        /**\n         * Blocks the user with the given `userId`.\n         *\n         * @param userId the id of the user to block.\n         */ this.blockUser = async (userId)=>{\n            return this.streamClient.post(`${this.streamClientBasePath}/block`, {\n                user_id: userId\n            });\n        };\n        /**\n         * Unblocks the user with the given `userId`.\n         *\n         * @param userId the id of the user to unblock.\n         */ this.unblockUser = async (userId)=>{\n            return this.streamClient.post(`${this.streamClientBasePath}/unblock`, {\n                user_id: userId\n            });\n        };\n        /**\n         * Mutes the current user.\n         *\n         * @param type the type of the mute operation.\n         */ this.muteSelf = (type)=>{\n            const myUserId = this.currentUserId;\n            if (myUserId) {\n                return this.muteUser(myUserId, type);\n            }\n        };\n        /**\n         * Mutes all the other participants.\n         *\n         * @param type the type of the mute operation.\n         */ this.muteOthers = (type)=>{\n            const trackType = muteTypeToTrackType(type);\n            if (!trackType) return;\n            const userIdsToMute = [];\n            for (const participant of this.state.remoteParticipants){\n                if (participant.publishedTracks.includes(trackType)) {\n                    userIdsToMute.push(participant.userId);\n                }\n            }\n            return this.muteUser(userIdsToMute, type);\n        };\n        /**\n         * Mutes the user with the given `userId`.\n         *\n         * @param userId the id of the user to mute.\n         * @param type the type of the mute operation.\n         */ this.muteUser = (userId, type)=>{\n            return this.streamClient.post(`${this.streamClientBasePath}/mute_users`, {\n                user_ids: Array.isArray(userId) ? userId : [\n                    userId\n                ],\n                [type]: true\n            });\n        };\n        /**\n         * Will mute all users in the call.\n         *\n         * @param type the type of the mute operation.\n         */ this.muteAllUsers = (type)=>{\n            return this.streamClient.post(`${this.streamClientBasePath}/mute_users`, {\n                mute_all_users: true,\n                [type]: true\n            });\n        };\n        /**\n         * Starts recording the call\n         */ this.startRecording = async (request)=>{\n            return this.streamClient.post(`${this.streamClientBasePath}/start_recording`, request ? request : {});\n        };\n        /**\n         * Stops recording the call\n         */ this.stopRecording = async ()=>{\n            return this.streamClient.post(`${this.streamClientBasePath}/stop_recording`, {});\n        };\n        /**\n         * Sends a `call.permission_request` event to all users connected to the call. The call settings object contains infomration about which permissions can be requested during a call (for example a user might be allowed to request permission to publish audio, but not video).\n         */ this.requestPermissions = async (data)=>{\n            const { permissions } = data;\n            const canRequestPermissions = permissions.every((permission)=>this.permissionsContext.canRequest(permission));\n            if (!canRequestPermissions) {\n                throw new Error(`You are not allowed to request permissions: ${permissions.join(\", \")}`);\n            }\n            return this.streamClient.post(`${this.streamClientBasePath}/request_permission`, data);\n        };\n        /**\n         * Allows you to grant certain permissions to a user in a call.\n         * The permissions are specific to the call experience and do not survive the call itself.\n         *\n         * Supported permissions that can be granted are:\n         * - `send-audio`\n         * - `send-video`\n         * - `screenshare`\n         *\n         * @param userId the id of the user to grant permissions to.\n         * @param permissions the permissions to grant.\n         */ this.grantPermissions = async (userId, permissions)=>{\n            return this.updateUserPermissions({\n                user_id: userId,\n                grant_permissions: permissions\n            });\n        };\n        /**\n         * Allows you to revoke certain permissions from a user in a call.\n         * The permissions are specific to the call experience and do not survive the call itself.\n         *\n         * Supported permissions that can be revoked are:\n         * - `send-audio`\n         * - `send-video`\n         * - `screenshare`\n         *\n         * @param userId the id of the user to revoke permissions from.\n         * @param permissions the permissions to revoke.\n         */ this.revokePermissions = async (userId, permissions)=>{\n            return this.updateUserPermissions({\n                user_id: userId,\n                revoke_permissions: permissions\n            });\n        };\n        /**\n         * Allows you to grant or revoke a specific permission to a user in a call. The permissions are specific to the call experience and do not survive the call itself.\n         *\n         * When revoking a permission, this endpoint will also mute the relevant track from the user. This is similar to muting a user with the difference that the user will not be able to unmute afterwards.\n         *\n         * Supported permissions that can be granted or revoked: `send-audio`, `send-video` and `screenshare`.\n         *\n         * `call.permissions_updated` event is sent to all members of the call.\n         *\n         */ this.updateUserPermissions = async (data)=>{\n            return this.streamClient.post(`${this.streamClientBasePath}/user_permissions`, data);\n        };\n        /**\n         * Starts the livestreaming of the call.\n         *\n         * @param data the request data.\n         * @param params the request params.\n         */ this.goLive = async (data = {}, params)=>{\n            return this.streamClient.post(`${this.streamClientBasePath}/go_live`, data, params);\n        };\n        /**\n         * Stops the livestreaming of the call.\n         */ this.stopLive = async ()=>{\n            return this.streamClient.post(`${this.streamClientBasePath}/stop_live`, {});\n        };\n        /**\n         * Starts the broadcasting of the call.\n         */ this.startHLS = async ()=>{\n            return this.streamClient.post(`${this.streamClientBasePath}/start_broadcasting`, {});\n        };\n        /**\n         * Stops the broadcasting of the call.\n         */ this.stopHLS = async ()=>{\n            return this.streamClient.post(`${this.streamClientBasePath}/stop_broadcasting`, {});\n        };\n        /**\n         * Updates the call settings or custom data.\n         *\n         * @param updates the updates to apply to the call.\n         */ this.update = async (updates)=>{\n            const response = await this.streamClient.patch(`${this.streamClientBasePath}`, updates);\n            const { call, members, own_capabilities } = response;\n            this.state.updateFromCallResponse(call);\n            this.state.setMembers(members);\n            this.state.setOwnCapabilities(own_capabilities);\n            return response;\n        };\n        /**\n         * Ends the call. Once the call is ended, it cannot be re-joined.\n         */ this.endCall = async ()=>{\n            return this.streamClient.post(`${this.streamClientBasePath}/mark_ended`);\n        };\n        /**\n         * Pins the given session to the top of the participants list.\n         *\n         * @param sessionId the sessionId to pin.\n         */ this.pin = (sessionId)=>{\n            this.state.updateParticipant(sessionId, {\n                pin: {\n                    isLocalPin: true,\n                    pinnedAt: Date.now()\n                }\n            });\n        };\n        /**\n         * Unpins the given session from the top of the participants list.\n         *\n         * @param sessionId the sessionId to unpin.\n         */ this.unpin = (sessionId)=>{\n            this.state.updateParticipant(sessionId, {\n                pin: undefined\n            });\n        };\n        /**\n         * Pins the given session to the top of the participants list for everyone\n         * in the call.\n         * You can execute this method only if you have the `pin-for-everyone` capability.\n         *\n         * @param request the request object.\n         */ this.pinForEveryone = async (request)=>{\n            return this.streamClient.post(`${this.streamClientBasePath}/pin`, request);\n        };\n        /**\n         * Unpins the given session from the top of the participants list for everyone\n         * in the call.\n         * You can execute this method only if you have the `pin-for-everyone` capability.\n         *\n         * @param request the request object.\n         */ this.unpinForEveryone = async (request)=>{\n            return this.streamClient.post(`${this.streamClientBasePath}/unpin`, request);\n        };\n        /**\n         * Query call members with filter query. The result won't be stored in call state.\n         * @param request\n         * @returns\n         */ this.queryMembers = (request)=>{\n            return this.streamClient.post(\"/call/members\", {\n                ...request || {},\n                id: this.id,\n                type: this.type\n            });\n        };\n        /**\n         * Will update the call members.\n         *\n         * @param data the request data.\n         */ this.updateCallMembers = async (data)=>{\n            return this.streamClient.post(`${this.streamClientBasePath}/members`, data);\n        };\n        /**\n         * Schedules an auto-drop timeout based on the call settings.\n         * Applicable only for ringing calls.\n         */ this.scheduleAutoDrop = ()=>{\n            clearTimeout(this.dropTimeout);\n            this.leaveCallHooks.add(createSubscription(this.state.settings$, (settings)=>{\n                if (!settings) return;\n                // ignore if the call is not ringing\n                if (this.state.callingState !== CallingState.RINGING) return;\n                const timeoutInMs = settings.ring.auto_cancel_timeout_ms;\n                // 0 means no auto-drop\n                if (timeoutInMs <= 0) return;\n                clearTimeout(this.dropTimeout);\n                this.dropTimeout = setTimeout(()=>{\n                    this.leave().catch((err)=>{\n                        this.logger(\"error\", \"Failed to drop call\", err);\n                    });\n                }, timeoutInMs);\n            }));\n        };\n        /**\n         * Retrieves the list of recordings for the current call or call session.\n         *\n         * If `callSessionId` is provided, it will return the recordings for that call session.\n         * Otherwise, all recordings for the current call will be returned.\n         *\n         * @param callSessionId the call session id to retrieve recordings for.\n         */ this.queryRecordings = async (callSessionId)=>{\n            let endpoint = this.streamClientBasePath;\n            if (callSessionId) {\n                endpoint = `${endpoint}/${callSessionId}`;\n            }\n            return this.streamClient.get(`${endpoint}/recordings`);\n        };\n        /**\n         * Sends a custom event to all call participants.\n         *\n         * @param payload the payload to send.\n         */ this.sendCustomEvent = async (payload)=>{\n            return this.streamClient.post(`${this.streamClientBasePath}/event`, {\n                custom: payload\n            });\n        };\n        this.applyDeviceConfig = ()=>{\n            this.initCamera({\n                setStatus: false\n            });\n            this.initMic({\n                setStatus: false\n            });\n        };\n        /**\n         * Will begin tracking the given element for visibility changes within the\n         * configured viewport element (`call.setViewport`).\n         *\n         * @param element the element to track.\n         * @param sessionId the session id.\n         * @param trackType the video mode.\n         */ this.trackElementVisibility = (element, sessionId, trackType)=>{\n            return this.dynascaleManager.trackElementVisibility(element, sessionId, trackType);\n        };\n        /**\n         * Sets the viewport element to track bound video elements for visibility.\n         *\n         * @param element the viewport element.\n         */ this.setViewport = (element)=>{\n            return this.dynascaleManager.setViewport(element);\n        };\n        /**\n         * Binds a DOM <video> element to the given session id.\n         * This method will make sure that the video element will play\n         * the correct video stream for the given session id.\n         *\n         * Under the hood, it would also keep track of the video element dimensions\n         * and update the subscription accordingly in order to optimize the bandwidth.\n         *\n         * If a \"viewport\" is configured, the video element will be automatically\n         * tracked for visibility and the subscription will be updated accordingly.\n         *\n         * @param videoElement the video element to bind to.\n         * @param sessionId the session id.\n         * @param trackType the kind of video.\n         */ this.bindVideoElement = (videoElement, sessionId, trackType)=>{\n            const unbind = this.dynascaleManager.bindVideoElement(videoElement, sessionId, trackType);\n            if (!unbind) return;\n            this.leaveCallHooks.add(unbind);\n            return ()=>{\n                this.leaveCallHooks.delete(unbind);\n                unbind();\n            };\n        };\n        /**\n         * Binds a DOM <audio> element to the given session id.\n         *\n         * This method will make sure that the audio element will\n         * play the correct audio stream for the given session id.\n         *\n         * @param audioElement the audio element to bind to.\n         * @param sessionId the session id.\n         * @param trackType the kind of audio.\n         */ this.bindAudioElement = (audioElement, sessionId, trackType = \"audioTrack\")=>{\n            const unbind = this.dynascaleManager.bindAudioElement(audioElement, sessionId, trackType);\n            if (!unbind) return;\n            this.leaveCallHooks.add(unbind);\n            return ()=>{\n                this.leaveCallHooks.delete(unbind);\n                unbind();\n            };\n        };\n        /**\n         * Binds a DOM <img> element to this call's thumbnail (if enabled in settings).\n         *\n         * @param imageElement the image element to bind to.\n         * @param opts options for the binding.\n         */ this.bindCallThumbnailElement = (imageElement, opts = {})=>{\n            const handleError = ()=>{\n                imageElement.src = opts.fallbackImageSource || \"https://getstream.io/random_svg/?name=x&id=x\";\n            };\n            const unsubscribe = createSubscription(this.state.thumbnails$, (thumbnails)=>{\n                if (!thumbnails) return;\n                imageElement.addEventListener(\"error\", handleError);\n                const thumbnailUrl = new URL(thumbnails.image_url);\n                thumbnailUrl.searchParams.set(\"w\", String(imageElement.clientWidth));\n                thumbnailUrl.searchParams.set(\"h\", String(imageElement.clientHeight));\n                imageElement.src = thumbnailUrl.toString();\n            });\n            return ()=>{\n                unsubscribe();\n                imageElement.removeEventListener(\"error\", handleError);\n            };\n        };\n        this.type = type;\n        this.id = id;\n        this.cid = `${type}:${id}`;\n        this.ringingSubject = new _barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_19__.BehaviorSubject(ringing);\n        this.watching = watching;\n        this.streamClient = streamClient;\n        this.clientStore = clientStore;\n        this.streamClientBasePath = `/call/${this.type}/${this.id}`;\n        this.logger = getLogger([\n            \"Call\"\n        ]);\n        const callTypeConfig = CallTypes.get(type);\n        const participantSorter = sortParticipantsBy || callTypeConfig.options.sortParticipantsBy;\n        if (participantSorter) {\n            this.state.setSortParticipantsBy(participantSorter);\n        }\n        this.state.setMembers(members || []);\n        this.state.setOwnCapabilities(ownCapabilities || []);\n        this.state.setCallingState(ringing ? CallingState.RINGING : CallingState.IDLE);\n        this.on(\"all\", (event)=>{\n            // update state with the latest event data\n            this.state.updateFromEvent(event);\n        });\n        this.leaveCallHooks.add(registerEventHandlers(this, this.state, this.dispatcher));\n        this.registerEffects();\n        this.leaveCallHooks.add(createSubscription(this.trackSubscriptionsSubject.pipe((0,_barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_33__.debounce)((v)=>(0,_barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_34__.timer)(v.type)), (0,_barrel_optimize_names_BehaviorSubject_Observable_ReplaySubject_combineLatest_concatMap_debounce_debounceTime_distinctUntilChanged_distinctUntilKeyChanged_filter_from_map_merge_of_pairwise_shareReplay_takeWhile_timer_rxjs__WEBPACK_IMPORTED_MODULE_20__.map)((v)=>v.data)), (subscriptions)=>this.sfuClient?.updateSubscriptions(subscriptions)));\n        this.camera = new CameraManager(this);\n        this.microphone = new MicrophoneManager(this);\n        this.speaker = new SpeakerManager();\n        this.screenShare = new ScreenShareManager(this);\n    }\n    registerEffects() {\n        this.leaveCallHooks.add(// handles updating the permissions context when the settings change.\n        createSubscription(this.state.settings$, (settings)=>{\n            if (!settings) return;\n            this.permissionsContext.setCallSettings(settings);\n        }));\n        this.leaveCallHooks.add(// handle the case when the user permissions are modified.\n        createSubscription(this.state.ownCapabilities$, (ownCapabilities)=>{\n            // update the permission context.\n            this.permissionsContext.setPermissions(ownCapabilities);\n            if (!this.publisher) return;\n            // check if the user still has publishing permissions and stop publishing if not.\n            const permissionToTrackType = {\n                [OwnCapability.SEND_AUDIO]: TrackType.AUDIO,\n                [OwnCapability.SEND_VIDEO]: TrackType.VIDEO,\n                [OwnCapability.SCREENSHARE]: TrackType.SCREEN_SHARE\n            };\n            for (const [permission, trackType] of Object.entries(permissionToTrackType)){\n                const hasPermission = this.permissionsContext.hasPermission(permission);\n                if (!hasPermission && (this.publisher.isPublishing(trackType) || this.publisher.isLive(trackType))) {\n                    // Stop tracks, then notify device manager\n                    this.stopPublish(trackType).catch((err)=>{\n                        this.logger(\"error\", `Error stopping publish ${trackType}`, err);\n                    }).then(()=>{\n                        if (trackType === TrackType.VIDEO && this.camera.state.status === \"enabled\") {\n                            this.camera.disable().catch((err)=>this.logger(\"error\", `Error disabling camera after permission revoked`, err));\n                        }\n                        if (trackType === TrackType.AUDIO && this.microphone.state.status === \"enabled\") {\n                            this.microphone.disable().catch((err)=>this.logger(\"error\", `Error disabling microphone after permission revoked`, err));\n                        }\n                    });\n                }\n            }\n        }));\n        this.leaveCallHooks.add(// handles the case when the user is blocked by the call owner.\n        createSubscription(this.state.blockedUserIds$, async (blockedUserIds)=>{\n            if (!blockedUserIds || blockedUserIds.length === 0) return;\n            const currentUserId = this.currentUserId;\n            if (currentUserId && blockedUserIds.includes(currentUserId)) {\n                this.logger(\"info\", \"Leaving call because of being blocked\");\n                await this.leave();\n            }\n        }));\n        this.leaveCallHooks.add(// watch for auto drop cancellation\n        createSubscription(this.state.callingState$, (callingState)=>{\n            if (!this.ringing) return;\n            if (callingState === CallingState.JOINED || callingState === CallingState.JOINING || callingState === CallingState.LEFT) {\n                clearTimeout(this.dropTimeout);\n                this.dropTimeout = undefined;\n            }\n        }));\n        this.leaveCallHooks.add(// \"ringing\" mode effects and event handlers\n        createSubscription(this.ringingSubject, (isRinging)=>{\n            if (!isRinging) return;\n            this.scheduleAutoDrop();\n            if (this.state.callingState === CallingState.IDLE) {\n                this.state.setCallingState(CallingState.RINGING);\n            }\n            this.leaveCallHooks.add(registerRingingCallEventHandlers(this));\n        }));\n    }\n    /**\n     * A flag indicating whether the call is \"ringing\" type of call.\n     */ get ringing() {\n        return getCurrentValue(this.ringingSubject);\n    }\n    /**\n     * Retrieves the current user ID.\n     */ get currentUserId() {\n        return this.clientStore.connectedUser?.id;\n    }\n    /**\n     * A flag indicating whether the call was created by the current user.\n     */ get isCreatedByMe() {\n        return this.state.createdBy?.id === this.currentUserId;\n    }\n    async initCamera(options) {\n        // Wait for any in progress camera operation\n        if (this.camera.enablePromise) {\n            await this.camera.enablePromise;\n        }\n        if (this.camera.disablePromise) {\n            await this.camera.disablePromise;\n        }\n        if (this.state.localParticipant?.videoStream || !this.permissionsContext.hasPermission(\"send-video\")) {\n            return;\n        }\n        // Set camera direction if it's not yet set\n        if (!this.camera.state.direction && !this.camera.state.selectedDevice) {\n            let defaultDirection = \"front\";\n            const backendSetting = this.state.settings?.video.camera_facing;\n            if (backendSetting) {\n                defaultDirection = backendSetting === \"front\" ? \"front\" : \"back\";\n            }\n            this.camera.state.setDirection(defaultDirection);\n        }\n        // Set target resolution\n        const targetResolution = this.state.settings?.video.target_resolution;\n        if (targetResolution) {\n            await this.camera.selectTargetResolution(targetResolution);\n        }\n        if (options.setStatus) {\n            // Publish already that was set before we joined\n            if (this.camera.state.status === \"enabled\" && this.camera.state.mediaStream && !this.publisher?.isPublishing(TrackType.VIDEO)) {\n                await this.publishVideoStream(this.camera.state.mediaStream, {\n                    preferredCodec: this.camera.preferredCodec\n                });\n            }\n            // Start camera if backend config specifies, and there is no local setting\n            if (this.camera.state.status === undefined && this.state.settings?.video.camera_default_on) {\n                await this.camera.enable();\n            }\n        }\n    }\n    async initMic(options) {\n        // Wait for any in progress mic operation\n        if (this.microphone.enablePromise) {\n            await this.microphone.enablePromise;\n        }\n        if (this.microphone.disablePromise) {\n            await this.microphone.disablePromise;\n        }\n        if (this.state.localParticipant?.audioStream || !this.permissionsContext.hasPermission(\"send-audio\")) {\n            return;\n        }\n        if (options.setStatus) {\n            // Publish media stream that was set before we joined\n            if (this.microphone.state.status === \"enabled\" && this.microphone.state.mediaStream && !this.publisher?.isPublishing(TrackType.AUDIO)) {\n                await this.publishAudioStream(this.microphone.state.mediaStream);\n            }\n            // Start mic if backend config specifies, and there is no local setting\n            if (this.microphone.state.status === undefined && this.state.settings?.audio.mic_default_on) {\n                await this.microphone.enable();\n            }\n        }\n    }\n}\nclass InsightMetrics {\n    constructor(){\n        this.connectionStartTimestamp = null;\n        this.wsTotalFailures = 0;\n        this.wsConsecutiveFailures = 0;\n        this.instanceClientId = randomId();\n    }\n}\n/**\n * postInsights is not supposed to be used by end users directly within chat application, and thus is kept isolated\n * from all the client/connection code/logic.\n *\n * @param insightType\n * @param insights\n */ const postInsights = async (insightType, insights)=>{\n    const maxAttempts = 3;\n    for(let i = 0; i < maxAttempts; i++){\n        try {\n            await axios__WEBPACK_IMPORTED_MODULE_35__[\"default\"].post(`https://chat-insights.getstream.io/insights/${insightType}`, insights);\n        } catch (e) {\n            await sleep((i + 1) * 3000);\n            continue;\n        }\n        break;\n    }\n};\nfunction buildWsFatalInsight(connection, event) {\n    return {\n        ...event,\n        ...buildWsBaseInsight(connection)\n    };\n}\nfunction buildWsBaseInsight(connection) {\n    const { client } = connection;\n    return {\n        ready_state: connection.ws?.readyState,\n        url: connection._buildUrl(),\n        api_key: client.key,\n        start_ts: client.insightMetrics.connectionStartTimestamp,\n        end_ts: new Date().getTime(),\n        auth_type: client.getAuthType(),\n        token: client.tokenManager.token,\n        user_id: client.userID,\n        user_details: client._user,\n        // device: client.options.device,\n        device: \"browser\",\n        client_id: connection.connectionID,\n        ws_details: connection.ws,\n        ws_consecutive_failures: client.insightMetrics.wsConsecutiveFailures,\n        ws_total_failures: client.insightMetrics.wsTotalFailures,\n        request_id: connection.requestID,\n        online: typeof navigator !== \"undefined\" ? navigator?.onLine : null,\n        user_agent: typeof navigator !== \"undefined\" ? navigator?.userAgent : null,\n        instance_client_id: client.insightMetrics.instanceClientId\n    };\n}\nfunction buildWsSuccessAfterFailureInsight(connection) {\n    return buildWsBaseInsight(connection);\n}\n// Type guards to check WebSocket error type\nconst isCloseEvent = (res)=>res.code !== undefined;\nconst isErrorEvent = (res)=>res.error !== undefined;\n/**\n * StableWSConnection - A WS connection that reconnects upon failure.\n * - the browser will sometimes report that you're online or offline\n * - the WS connection can break and fail (there is a 30s health check)\n * - sometimes your WS connection will seem to work while the user is in fact offline\n * - to speed up online/offline detection you can use the window.addEventListener('offline');\n *\n * There are 4 ways in which a connection can become unhealthy:\n * - websocket.onerror is called\n * - websocket.onclose is called\n * - the health check fails and no event is received for ~40 seconds\n * - the browser indicates the connection is now offline\n *\n * There are 2 assumptions we make about the server:\n * - state can be recovered by querying the channel again\n * - if the servers fails to publish a message to the client, the WS connection is destroyed\n */ class StableWSConnection {\n    constructor(client){\n        this._log = (msg, extra = {}, level = \"info\")=>{\n            this.client.logger(level, \"connection:\" + msg, {\n                ...extra\n            });\n        };\n        this.setClient = (client)=>{\n            this.client = client;\n        };\n        /**\n         * Builds and returns the url for websocket.\n         * @private\n         * @returns url string\n         */ this._buildUrl = ()=>{\n            const params = new URLSearchParams();\n            // const qs = encodeURIComponent(this.client._buildWSPayload(this.requestID));\n            // params.set('json', qs);\n            params.set(\"api_key\", this.client.key);\n            params.set(\"stream-auth-type\", this.client.getAuthType());\n            params.set(\"X-Stream-Client\", this.client.getUserAgent());\n            // params.append('authorization', this.client._getToken()!);\n            return `${this.client.wsBaseURL}/connect?${params.toString()}`;\n        };\n        /**\n         * onlineStatusChanged - this function is called when the browser connects or disconnects from the internet.\n         *\n         * @param {Event} event Event with type online or offline\n         *\n         */ this.onlineStatusChanged = (event)=>{\n            if (event.type === \"offline\") {\n                // mark the connection as down\n                this._log(\"onlineStatusChanged() - Status changing to offline\");\n                // we know that the app is offline so dispatch the unhealthy connection event immediately\n                this._setHealth(false, true);\n            } else if (event.type === \"online\") {\n                // retry right now...\n                // We check this.isHealthy, not sure if it's always\n                // smart to create a new WS connection if the old one is still up and running.\n                // it's possible we didn't miss any messages, so this process is just expensive and not needed.\n                this._log(`onlineStatusChanged() - Status changing to online. isHealthy: ${this.isHealthy}`);\n                if (!this.isHealthy) {\n                    this._reconnect({\n                        interval: 10\n                    });\n                }\n            }\n        };\n        this.onopen = (wsID)=>{\n            if (this.wsID !== wsID) return;\n            const user = this.client.user;\n            if (!user) {\n                this.client.logger(\"error\", `User not set, can't connect to WS`);\n                return;\n            }\n            const token = this.client._getToken();\n            if (!token) {\n                this.client.logger(\"error\", `Token not set, can't connect authenticate`);\n                return;\n            }\n            const authMessage = {\n                token,\n                user_details: {\n                    id: user.id,\n                    name: user.name,\n                    image: user.image,\n                    custom: user.custom\n                }\n            };\n            this.authenticationSent = true;\n            this.ws?.send(JSON.stringify(authMessage));\n            this._log(\"onopen() - onopen callback\", {\n                wsID\n            });\n        };\n        this.onmessage = (wsID, event)=>{\n            if (this.wsID !== wsID) return;\n            this._log(\"onmessage() - onmessage callback\", {\n                event,\n                wsID\n            });\n            const data = typeof event.data === \"string\" ? JSON.parse(event.data) : null;\n            // we wait till the first message before we consider the connection open.\n            // the reason for this is that auth errors and similar errors trigger a ws.onopen and immediately\n            // after that a ws.onclose.\n            if (!this.isResolved && data && data.type === \"connection.error\") {\n                this.isResolved = true;\n                if (data.error) {\n                    // @ts-expect-error - the types of _errorFromWSEvent are incorrect\n                    this.rejectPromise?.(this._errorFromWSEvent(data, false));\n                    return;\n                }\n            }\n            // trigger the event..\n            this.lastEvent = new Date();\n            if (data && (data.type === \"health.check\" || data.type === \"connection.ok\")) {\n                // the initial health-check should come from the client\n                this.scheduleNextPing();\n            }\n            if (data && data.type === \"connection.ok\") {\n                this.resolvePromise?.(data);\n                this._setHealth(true);\n            }\n            if (data && data.type === \"connection.error\" && data.error) {\n                const { code } = data.error;\n                this.isHealthy = false;\n                this.isConnecting = false;\n                this.consecutiveFailures += 1;\n                if (code === KnownCodes.TOKEN_EXPIRED && !this.client.tokenManager.isStatic()) {\n                    clearTimeout(this.connectionCheckTimeoutRef);\n                    this._log(\"connect() - WS failure due to expired token, so going to try to reload token and reconnect\");\n                    this._reconnect({\n                        refreshToken: true\n                    });\n                }\n            }\n            if (data) {\n                this.client.dispatchEvent(data);\n            }\n            this.scheduleConnectionCheck();\n        };\n        this.onclose = (wsID, event)=>{\n            if (this.wsID !== wsID) return;\n            this._log(\"onclose() - onclose callback - \" + event.code, {\n                event,\n                wsID\n            });\n            if (event.code === KnownCodes.WS_CLOSED_SUCCESS) {\n                // this is a permanent error raised by stream..\n                // usually caused by invalid auth details\n                const error = new Error(`WS connection reject with error ${event.reason}`);\n                error.reason = event.reason;\n                error.code = event.code;\n                error.wasClean = event.wasClean;\n                error.target = event.target;\n                this.rejectPromise?.(error);\n                this._log(`onclose() - WS connection reject with error ${event.reason}`, {\n                    event\n                });\n            } else {\n                this.consecutiveFailures += 1;\n                this.totalFailures += 1;\n                this._setHealth(false);\n                this.isConnecting = false;\n                this.rejectPromise?.(this._errorFromWSEvent(event));\n                this._log(`onclose() - WS connection closed. Calling reconnect ...`, {\n                    event\n                });\n                // reconnect if its an abnormal failure\n                this._reconnect();\n            }\n        };\n        this.onerror = (wsID, event)=>{\n            if (this.wsID !== wsID) return;\n            this.consecutiveFailures += 1;\n            this.totalFailures += 1;\n            this._setHealth(false);\n            this.isConnecting = false;\n            this.rejectPromise?.(this._errorFromWSEvent(event));\n            this._log(`onerror() - WS connection resulted into error`, {\n                event\n            });\n            this._reconnect();\n        };\n        /**\n         * _setHealth - Sets the connection to healthy or unhealthy.\n         * Broadcasts an event in case the connection status changed.\n         *\n         * @param {boolean} healthy boolean indicating if the connection is healthy or not\n         * @param {boolean} dispatchImmediately boolean indicating to dispatch event immediately even if the connection is unhealthy\n         *\n         */ this._setHealth = (healthy, dispatchImmediately = false)=>{\n            if (healthy === this.isHealthy) return;\n            this.isHealthy = healthy;\n            if (this.isHealthy || dispatchImmediately) {\n                this.client.dispatchEvent({\n                    type: \"connection.changed\",\n                    online: this.isHealthy\n                });\n                return;\n            }\n            // we're offline, wait few seconds and fire and event if still offline\n            setTimeout(()=>{\n                if (this.isHealthy) return;\n                this.client.dispatchEvent({\n                    type: \"connection.changed\",\n                    online: this.isHealthy\n                });\n            }, 5000);\n        };\n        /**\n         * _errorFromWSEvent - Creates an error object for the WS event\n         *\n         */ this._errorFromWSEvent = (event, isWSFailure = true)=>{\n            let code;\n            let statusCode;\n            let message;\n            if (isCloseEvent(event)) {\n                code = event.code;\n                statusCode = \"unknown\";\n                message = event.reason;\n            }\n            if (isErrorEvent(event)) {\n                code = event.error.code;\n                statusCode = event.error.StatusCode;\n                message = event.error.message;\n            }\n            // Keeping this `warn` level log, to avoid cluttering of error logs from ws failures.\n            this._log(`_errorFromWSEvent() - WS failed with code ${code}`, {\n                event\n            }, \"warn\");\n            const error = new Error(`WS failed with code ${code} and reason - ${message}`);\n            error.code = code;\n            /**\n             * StatusCode does not exist on any event types but has been left\n             * as is to preserve JS functionality during the TS implementation\n             */ error.StatusCode = statusCode;\n            error.isWSFailure = isWSFailure;\n            return error;\n        };\n        /**\n         * _setupPromise - sets up the this.connectOpen promise\n         */ this._setupConnectionPromise = ()=>{\n            this.isResolved = false;\n            /** a promise that is resolved once ws.open is called */ this.connectionOpen = new Promise((resolve, reject)=>{\n                this.resolvePromise = resolve;\n                this.rejectPromise = reject;\n            });\n        };\n        /**\n         * Schedules a next health check ping for websocket.\n         */ this.scheduleNextPing = ()=>{\n            if (this.healthCheckTimeoutRef) {\n                clearTimeout(this.healthCheckTimeoutRef);\n            }\n            // 30 seconds is the recommended interval (messenger uses this)\n            this.healthCheckTimeoutRef = setTimeout(()=>{\n                // send the healthcheck..., server replies with a health check event\n                const data = [\n                    {\n                        type: \"health.check\",\n                        client_id: this.client.clientID\n                    }\n                ];\n                // try to send on the connection\n                try {\n                    this.ws?.send(JSON.stringify(data));\n                } catch (e) {\n                // error will already be detected elsewhere\n                }\n            }, this.pingInterval);\n        };\n        /**\n         * scheduleConnectionCheck - schedules a check for time difference between last received event and now.\n         * If the difference is more than 35 seconds, it means our health check logic has failed and websocket needs\n         * to be reconnected.\n         */ this.scheduleConnectionCheck = ()=>{\n            if (this.connectionCheckTimeoutRef) {\n                clearTimeout(this.connectionCheckTimeoutRef);\n            }\n            this.connectionCheckTimeoutRef = setTimeout(()=>{\n                const now = new Date();\n                if (this.lastEvent && now.getTime() - this.lastEvent.getTime() > this.connectionCheckTimeout) {\n                    this._log(\"scheduleConnectionCheck - going to reconnect\");\n                    this._setHealth(false);\n                    this._reconnect();\n                }\n            }, this.connectionCheckTimeout);\n        };\n        this.client = client;\n        /** consecutive failures influence the duration of the timeout */ this.consecutiveFailures = 0;\n        /** keep track of the total number of failures */ this.totalFailures = 0;\n        /** We only make 1 attempt to reconnect at the same time.. */ this.isConnecting = false;\n        /** True after the auth payload is sent to the server */ this.authenticationSent = false;\n        /** To avoid reconnect if client is disconnected */ this.isDisconnected = false;\n        /** Boolean that indicates if the connection promise is resolved */ this.isResolved = false;\n        /** Boolean that indicates if we have a working connection to the server */ this.isHealthy = false;\n        /** Incremented when a new WS connection is made */ this.wsID = 1;\n        /** Store the last event time for health checks */ this.lastEvent = null;\n        /** Send a health check message every 25 seconds */ this.pingInterval = 25 * 1000;\n        this.connectionCheckTimeout = this.pingInterval + 10 * 1000;\n        addConnectionEventListeners(this.onlineStatusChanged);\n    }\n    /**\n     * connect - Connect to the WS URL\n     * the default 15s timeout allows between 2~3 tries\n     * @return {ConnectAPIResponse<ConnectedEvent>} Promise that completes once the first health check message is received\n     */ async connect(timeout = 15000) {\n        if (this.isConnecting) {\n            throw Error(`You've called connect twice, can only attempt 1 connection at the time`);\n        }\n        this.isDisconnected = false;\n        try {\n            const healthCheck = await this._connect();\n            this.consecutiveFailures = 0;\n            this._log(`connect() - Established ws connection with healthcheck: ${healthCheck}`);\n        } catch (error) {\n            this.isHealthy = false;\n            this.consecutiveFailures += 1;\n            if (// @ts-ignore\n            error.code === KnownCodes.TOKEN_EXPIRED && !this.client.tokenManager.isStatic()) {\n                this._log(\"connect() - WS failure due to expired token, so going to try to reload token and reconnect\");\n                this._reconnect({\n                    refreshToken: true\n                });\n            } else {\n                // @ts-ignore\n                if (!error.isWSFailure) {\n                    // API rejected the connection and we should not retry\n                    throw new Error(JSON.stringify({\n                        // @ts-ignore\n                        code: error.code,\n                        // @ts-ignore\n                        StatusCode: error.StatusCode,\n                        // @ts-ignore\n                        message: error.message,\n                        // @ts-ignore\n                        isWSFailure: error.isWSFailure\n                    }));\n                }\n            }\n        }\n        return await this._waitForHealthy(timeout);\n    }\n    /**\n     * _waitForHealthy polls the promise connection to see if its resolved until it times out\n     * the default 15s timeout allows between 2~3 tries\n     * @param timeout duration(ms)\n     */ async _waitForHealthy(timeout = 15000) {\n        return Promise.race([\n            (async ()=>{\n                const interval = 50; // ms\n                for(let i = 0; i <= timeout; i += interval){\n                    try {\n                        return await this.connectionOpen;\n                    } catch (error) {\n                        if (i === timeout) {\n                            throw new Error(JSON.stringify({\n                                code: error.code,\n                                StatusCode: error.StatusCode,\n                                message: error.message,\n                                isWSFailure: error.isWSFailure\n                            }));\n                        }\n                        await sleep(interval);\n                    }\n                }\n            })(),\n            (async ()=>{\n                await sleep(timeout);\n                this.isConnecting = false;\n                throw new Error(JSON.stringify({\n                    code: \"\",\n                    StatusCode: \"\",\n                    message: \"initial WS connection could not be established\",\n                    isWSFailure: true\n                }));\n            })()\n        ]);\n    }\n    /**\n     * disconnect - Disconnect the connection and doesn't recover...\n     *\n     */ disconnect(timeout) {\n        this._log(`disconnect() - Closing the websocket connection for wsID ${this.wsID}`);\n        this.wsID += 1;\n        this.isConnecting = false;\n        this.isDisconnected = true;\n        // start by removing all the listeners\n        if (this.healthCheckTimeoutRef) {\n            clearInterval(this.healthCheckTimeoutRef);\n        }\n        if (this.connectionCheckTimeoutRef) {\n            clearInterval(this.connectionCheckTimeoutRef);\n        }\n        removeConnectionEventListeners(this.onlineStatusChanged);\n        this.isHealthy = false;\n        // remove ws handlers...\n        if (this.ws && this.ws.removeAllListeners) {\n            this.ws.removeAllListeners();\n        }\n        let isClosedPromise;\n        // and finally close...\n        // Assigning to local here because we will remove it from this before the\n        // promise resolves.\n        const { ws } = this;\n        if (ws && ws.close && ws.readyState === ws.OPEN) {\n            isClosedPromise = new Promise((resolve)=>{\n                const onclose = (event)=>{\n                    this._log(`disconnect() - resolving isClosedPromise ${event ? \"with\" : \"without\"} close frame`, {\n                        event\n                    });\n                    resolve();\n                };\n                ws.onclose = onclose;\n                // In case we don't receive close frame websocket server in time,\n                // lets not wait for more than 1 second.\n                setTimeout(onclose, timeout != null ? timeout : 1000);\n            });\n            this._log(`disconnect() - Manually closed connection by calling client.disconnect()`);\n            ws.close(KnownCodes.WS_CLOSED_SUCCESS, \"Manually closed connection by calling client.disconnect()\");\n        } else {\n            this._log(`disconnect() - ws connection doesn't exist or it is already closed.`);\n            isClosedPromise = Promise.resolve();\n        }\n        delete this.ws;\n        return isClosedPromise;\n    }\n    /**\n     * _connect - Connect to the WS endpoint\n     *\n     * @return {ConnectAPIResponse<ConnectedEvent>} Promise that completes once the first health check message is received\n     */ async _connect() {\n        if (this.isConnecting || this.isDisconnected && this.client.options.enableWSFallback) return; // simply ignore _connect if it's currently trying to connect\n        this.isConnecting = true;\n        this.requestID = randomId();\n        this.client.insightMetrics.connectionStartTimestamp = new Date().getTime();\n        let isTokenReady = false;\n        try {\n            this._log(`_connect() - waiting for token`);\n            await this.client.tokenManager.tokenReady();\n            isTokenReady = true;\n        } catch (e) {\n        // token provider has failed before, so try again\n        }\n        try {\n            if (!isTokenReady) {\n                this._log(`_connect() - tokenProvider failed before, so going to retry`);\n                await this.client.tokenManager.loadToken();\n            }\n            this._setupConnectionPromise();\n            const wsURL = this._buildUrl();\n            this._log(`_connect() - Connecting to ${wsURL}`, {\n                wsURL,\n                requestID: this.requestID\n            });\n            this.ws = new (isomorphic_ws__WEBPACK_IMPORTED_MODULE_4___default())(wsURL);\n            this.ws.onopen = this.onopen.bind(this, this.wsID);\n            this.ws.onclose = this.onclose.bind(this, this.wsID);\n            this.ws.onerror = this.onerror.bind(this, this.wsID);\n            this.ws.onmessage = this.onmessage.bind(this, this.wsID);\n            const response = await this.connectionOpen;\n            this.isConnecting = false;\n            if (response) {\n                this.connectionID = response.connection_id;\n                this.client.resolveConnectionId?.(this.connectionID);\n                if (this.client.insightMetrics.wsConsecutiveFailures > 0 && this.client.options.enableInsights) {\n                    postInsights(\"ws_success_after_failure\", buildWsSuccessAfterFailureInsight(this));\n                    this.client.insightMetrics.wsConsecutiveFailures = 0;\n                }\n                return response;\n            }\n        } catch (err) {\n            this.isConnecting = false;\n            // @ts-ignore\n            this._log(`_connect() - Error - `, err);\n            if (this.client.options.enableInsights) {\n                this.client.insightMetrics.wsConsecutiveFailures++;\n                this.client.insightMetrics.wsTotalFailures++;\n                const insights = buildWsFatalInsight(this, convertErrorToJson(err));\n                postInsights?.(\"ws_fatal\", insights);\n            }\n            this.client.rejectConnectionId?.();\n            throw err;\n        }\n    }\n    /**\n     * _reconnect - Retry the connection to WS endpoint\n     *\n     * @param {{ interval?: number; refreshToken?: boolean }} options Following options are available\n     *\n     * - `interval`\t{int}\t\t\tnumber of ms that function should wait before reconnecting\n     * - `refreshToken` {boolean}\treload/refresh user token be refreshed before attempting reconnection.\n     */ async _reconnect(options = {}) {\n        this._log(\"_reconnect() - Initiating the reconnect\");\n        // only allow 1 connection at the time\n        if (this.isConnecting || this.isHealthy) {\n            this._log(\"_reconnect() - Abort (1) since already connecting or healthy\");\n            return;\n        }\n        // reconnect in case of on error or on close\n        // also reconnect if the health check cycle fails\n        let interval = options.interval;\n        if (!interval) {\n            interval = retryInterval(this.consecutiveFailures);\n        }\n        // reconnect, or try again after a little while...\n        await sleep(interval);\n        // Check once again if by some other call to _reconnect is active or connection is\n        // already restored, then no need to proceed.\n        if (this.isConnecting || this.isHealthy) {\n            this._log(\"_reconnect() - Abort (2) since already connecting or healthy\");\n            return;\n        }\n        if (this.isDisconnected && this.client.options.enableWSFallback) {\n            this._log(\"_reconnect() - Abort (3) since disconnect() is called\");\n            return;\n        }\n        this._log(\"_reconnect() - Destroying current WS connection\");\n        // cleanup the old connection\n        this._destroyCurrentWSConnection();\n        if (options.refreshToken) {\n            await this.client.tokenManager.loadToken();\n        }\n        try {\n            await this._connect();\n            this._log(\"_reconnect() - Waiting for recoverCallBack\");\n            // await this.client.recoverState();\n            this._log(\"_reconnect() - Finished recoverCallBack\");\n            this.consecutiveFailures = 0;\n        } catch (error) {\n            this.isHealthy = false;\n            this.consecutiveFailures += 1;\n            if (error.code === KnownCodes.TOKEN_EXPIRED && !this.client.tokenManager.isStatic()) {\n                this._log(\"_reconnect() - WS failure due to expired token, so going to try to reload token and reconnect\");\n                return this._reconnect({\n                    refreshToken: true\n                });\n            }\n            // reconnect on WS failures, don't reconnect if there is a code bug\n            if (error.isWSFailure) {\n                this._log(\"_reconnect() - WS failure, so going to try to reconnect\");\n                this._reconnect();\n            }\n        }\n        this._log(\"_reconnect() - == END ==\");\n    }\n    /**\n     * _destroyCurrentWSConnection - Removes the current WS connection\n     *\n     */ _destroyCurrentWSConnection() {\n        // increment the ID, meaning we will ignore all messages from the old\n        // ws connection from now on.\n        this.wsID += 1;\n        try {\n            this?.ws?.removeAllListeners();\n            this?.ws?.close();\n        } catch (e) {\n        // we don't care\n        }\n    }\n}\nfunction isString(arrayOrString) {\n    return typeof arrayOrString === \"string\";\n}\nfunction isMapStringCallback(arrayOrString, callback) {\n    return !!callback && isString(arrayOrString);\n}\nfunction map(arrayOrString, callback) {\n    const res = [];\n    if (isString(arrayOrString) && isMapStringCallback(arrayOrString, callback)) {\n        for(let k = 0, len = arrayOrString.length; k < len; k++){\n            if (arrayOrString.charAt(k)) {\n                const kValue = arrayOrString.charAt(k);\n                const mappedValue = callback(kValue, k, arrayOrString);\n                res[k] = mappedValue;\n            }\n        }\n    } else if (!isString(arrayOrString) && !isMapStringCallback(arrayOrString, callback)) {\n        for(let k = 0, len = arrayOrString.length; k < len; k++){\n            if (k in arrayOrString) {\n                const kValue = arrayOrString[k];\n                const mappedValue = callback(kValue, k, arrayOrString);\n                res[k] = mappedValue;\n            }\n        }\n    }\n    return res;\n}\nconst encodeBase64 = (data)=>(0,base64_js__WEBPACK_IMPORTED_MODULE_8__.fromByteArray)(new Uint8Array(map(data, (char)=>char.charCodeAt(0))));\n// base-64 decoder throws exception if encoded string is not padded by '=' to make string length\n// in multiples of 4. So gonna use our own method for this purpose to keep backwards compatibility\n// https://github.com/beatgammit/base64-js/blob/master/index.js#L26\nconst decodeBase64 = (s)=>{\n    const e = {}, w = String.fromCharCode, L = s.length;\n    let i, b = 0, c, x, l = 0, a, r = \"\";\n    const A = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n    for(i = 0; i < 64; i++){\n        e[A.charAt(i)] = i;\n    }\n    for(x = 0; x < L; x++){\n        c = e[s.charAt(x)];\n        b = (b << 6) + c;\n        l += 6;\n        while(l >= 8){\n            ((a = b >>> (l -= 8) & 0xff) || x < L - 2) && (r += w(a));\n        }\n    }\n    return r;\n};\n/**\n * Creates the JWT token that can be used for a UserSession\n * @method JWTUserToken\n * @memberof signing\n * @private\n * @param {Secret} apiSecret - API Secret key\n * @param {string} userId - The user_id key in the JWT payload\n * @param {UR} [extraData] - Extra that should be part of the JWT token\n * @param {SignOptions} [jwtOptions] - Options that can be past to jwt.sign\n * @return {string} JWT Token\n */ function JWTUserToken(apiSecret, userId, extraData = {}, jwtOptions = {}) {\n    if (typeof userId !== \"string\") {\n        throw new TypeError(\"userId should be a string\");\n    }\n    const payload = {\n        user_id: userId,\n        ...extraData\n    };\n    // make sure we return a clear error when jwt is shimmed (ie. browser build)\n    if ((jsonwebtoken__WEBPACK_IMPORTED_MODULE_6___default()) == null || (jsonwebtoken__WEBPACK_IMPORTED_MODULE_6___default().sign) == null) {\n        throw Error(`Unable to find jwt crypto, if you are getting this error is probably because you are trying to generate tokens on browser or React Native (or other environment where crypto functions are not available). Please Note: token should only be generated server-side.`);\n    }\n    const opts = Object.assign({\n        algorithm: \"HS256\",\n        noTimestamp: true\n    }, jwtOptions);\n    if (payload.iat) {\n        opts.noTimestamp = false;\n    }\n    return jsonwebtoken__WEBPACK_IMPORTED_MODULE_6___default().sign(payload, apiSecret, opts);\n}\nfunction JWTServerToken(apiSecret, jwtOptions = {}) {\n    const payload = {\n        server: true\n    };\n    const opts = Object.assign({\n        algorithm: \"HS256\",\n        noTimestamp: true\n    }, jwtOptions);\n    return jsonwebtoken__WEBPACK_IMPORTED_MODULE_6___default().sign(payload, apiSecret, opts);\n}\nfunction UserFromToken(token) {\n    const fragments = token.split(\".\");\n    if (fragments.length !== 3) {\n        return \"\";\n    }\n    const b64Payload = fragments[1];\n    const payload = decodeBase64(b64Payload);\n    const data = JSON.parse(payload);\n    return data.user_id;\n}\n/**\n *\n * @param {string} userId the id of the user\n * @return {string}\n */ function DevToken(userId) {\n    return [\n        \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9\",\n        encodeBase64(JSON.stringify({\n            user_id: userId\n        })),\n        \"devtoken\"\n    ].join(\".\");\n}\n/**\n * TokenManager\n *\n * Handles all the operations around user token.\n */ class TokenManager {\n    /**\n     * Constructor\n     *\n     * @param {Secret} secret\n     */ constructor(secret){\n        /**\n         * Set the static string token or token provider.\n         * Token provider should return a token string or a promise which resolves to string token.\n         *\n         * @param {TokenOrProvider} tokenOrProvider - the token or token provider.\n         * @param {UserResponse} user - the user object.\n         * @param {boolean} isAnonymous - whether the user is anonymous or not.\n         */ this.setTokenOrProvider = async (tokenOrProvider, user, isAnonymous)=>{\n            this.validateToken(tokenOrProvider, user, isAnonymous);\n            this.user = user;\n            if (isFunction(tokenOrProvider)) {\n                this.tokenProvider = tokenOrProvider;\n                this.type = \"provider\";\n            }\n            if (typeof tokenOrProvider === \"string\") {\n                this.token = tokenOrProvider;\n                this.type = \"static\";\n            }\n            if (!tokenOrProvider && this.user && this.secret) {\n                this.token = JWTUserToken(this.secret, user.id, {}, {});\n                this.type = \"static\";\n            }\n            await this.loadToken();\n        };\n        /**\n         * Resets the token manager.\n         * Useful for client disconnection or switching user.\n         */ this.reset = ()=>{\n            this.token = undefined;\n            this.user = undefined;\n            this.loadTokenPromise = null;\n        };\n        // Validates the user token.\n        this.validateToken = (tokenOrProvider, user, isAnonymous)=>{\n            // allow empty token for anon user\n            if (user && isAnonymous && !tokenOrProvider) return;\n            // Don't allow empty token for non-server side client.\n            if (!this.secret && !tokenOrProvider) {\n                throw new Error(\"UserWithId token can not be empty\");\n            }\n            if (tokenOrProvider && typeof tokenOrProvider !== \"string\" && !isFunction(tokenOrProvider)) {\n                throw new Error(\"user token should either be a string or a function\");\n            }\n            if (typeof tokenOrProvider === \"string\") {\n                // Allow empty token for anonymous users\n                if (isAnonymous && tokenOrProvider === \"\") return;\n                const tokenUserId = UserFromToken(tokenOrProvider);\n                if (tokenOrProvider != null && (tokenUserId == null || tokenUserId === \"\" || !isAnonymous && tokenUserId !== user.id)) {\n                    throw new Error(\"userToken does not have a user_id or is not matching with user.id\");\n                }\n            }\n        };\n        // Resolves when token is ready. This function is simply to check if loadToken is in progress, in which\n        // case a function should wait.\n        this.tokenReady = ()=>this.loadTokenPromise;\n        // Fetches a token from tokenProvider function and sets in tokenManager.\n        // In case of static token, it will simply resolve to static token.\n        this.loadToken = ()=>{\n            // eslint-disable-next-line no-async-promise-executor\n            this.loadTokenPromise = new Promise(async (resolve, reject)=>{\n                if (this.type === \"static\") {\n                    return resolve(this.token);\n                }\n                if (this.tokenProvider && typeof this.tokenProvider !== \"string\") {\n                    try {\n                        this.token = await this.tokenProvider();\n                    } catch (e) {\n                        return reject(new Error(`Call to tokenProvider failed with message: ${e}`));\n                    }\n                    resolve(this.token);\n                }\n            });\n            return this.loadTokenPromise;\n        };\n        // Returns a current token\n        this.getToken = ()=>{\n            if (this.token) {\n                return this.token;\n            }\n            if (this.user && !this.token) {\n                return this.token;\n            }\n            if (this.secret) {\n                return JWTServerToken(this.secret);\n            }\n            throw new Error(`Both secret and user tokens are not set. Either client.connectUser wasn't called or client.disconnect was called`);\n        };\n        this.isStatic = ()=>this.type === \"static\";\n        this.loadTokenPromise = null;\n        if (secret) {\n            this.secret = secret;\n        }\n        this.type = \"static\";\n        if (this.secret) {\n            this.token = JWTServerToken(this.secret);\n        }\n    }\n}\nconst APIErrorCodes = {\n    \"-1\": {\n        name: \"InternalSystemError\",\n        retryable: true\n    },\n    \"2\": {\n        name: \"AccessKeyError\",\n        retryable: false\n    },\n    \"3\": {\n        name: \"AuthenticationFailedError\",\n        retryable: true\n    },\n    \"4\": {\n        name: \"InputError\",\n        retryable: false\n    },\n    \"6\": {\n        name: \"DuplicateUsernameError\",\n        retryable: false\n    },\n    \"9\": {\n        name: \"RateLimitError\",\n        retryable: true\n    },\n    \"16\": {\n        name: \"DoesNotExistError\",\n        retryable: false\n    },\n    \"17\": {\n        name: \"NotAllowedError\",\n        retryable: false\n    },\n    \"18\": {\n        name: \"EventNotSupportedError\",\n        retryable: false\n    },\n    \"19\": {\n        name: \"ChannelFeatureNotSupportedError\",\n        retryable: false\n    },\n    \"20\": {\n        name: \"MessageTooLongError\",\n        retryable: false\n    },\n    \"21\": {\n        name: \"MultipleNestingLevelError\",\n        retryable: false\n    },\n    \"22\": {\n        name: \"PayloadTooBigError\",\n        retryable: false\n    },\n    \"23\": {\n        name: \"RequestTimeoutError\",\n        retryable: true\n    },\n    \"24\": {\n        name: \"MaxHeaderSizeExceededError\",\n        retryable: false\n    },\n    \"40\": {\n        name: \"AuthErrorTokenExpired\",\n        retryable: false\n    },\n    \"41\": {\n        name: \"AuthErrorTokenNotValidYet\",\n        retryable: false\n    },\n    \"42\": {\n        name: \"AuthErrorTokenUsedBeforeIssuedAt\",\n        retryable: false\n    },\n    \"43\": {\n        name: \"AuthErrorTokenSignatureInvalid\",\n        retryable: false\n    },\n    \"44\": {\n        name: \"CustomCommandEndpointMissingError\",\n        retryable: false\n    },\n    \"45\": {\n        name: \"CustomCommandEndpointCallError\",\n        retryable: true\n    },\n    \"46\": {\n        name: \"ConnectionIDNotFoundError\",\n        retryable: false\n    },\n    \"60\": {\n        name: \"CoolDownError\",\n        retryable: true\n    },\n    \"69\": {\n        name: \"ErrWrongRegion\",\n        retryable: false\n    },\n    \"70\": {\n        name: \"ErrQueryChannelPermissions\",\n        retryable: false\n    },\n    \"71\": {\n        name: \"ErrTooManyConnections\",\n        retryable: true\n    },\n    \"99\": {\n        name: \"AppSuspendedError\",\n        retryable: false\n    }\n};\nfunction isAPIError(error) {\n    return error.code !== undefined;\n}\nfunction isErrorRetryable(error) {\n    if (!error.code) return false;\n    const err = APIErrorCodes[`${error.code}`];\n    if (!err) return false;\n    return err.retryable;\n}\nfunction isConnectionIDError(error) {\n    return error.code === 46; // ConnectionIDNotFoundError\n}\nfunction isWSFailure(err) {\n    if (typeof err.isWSFailure === \"boolean\") {\n        return err.isWSFailure;\n    }\n    try {\n        return JSON.parse(err.message).isWSFailure;\n    } catch (_) {\n        return false;\n    }\n}\nfunction isErrorResponse(res) {\n    return !res.status || res.status < 200 || 300 <= res.status;\n}\nvar ConnectionState;\n(function(ConnectionState) {\n    ConnectionState[\"Closed\"] = \"CLOSED\";\n    ConnectionState[\"Connected\"] = \"CONNECTED\";\n    ConnectionState[\"Connecting\"] = \"CONNECTING\";\n    ConnectionState[\"Disconnected\"] = \"DISCONNECTED\";\n    ConnectionState[\"Init\"] = \"INIT\";\n})(ConnectionState || (ConnectionState = {}));\nclass WSConnectionFallback {\n    constructor(client){\n        /** @private */ this._onlineStatusChanged = (event)=>{\n            this._log(`_onlineStatusChanged() - ${event.type}`);\n            if (event.type === \"offline\") {\n                this._setState(ConnectionState.Closed);\n                this.cancelToken?.cancel(\"disconnect() is called\");\n                this.cancelToken = undefined;\n                return;\n            }\n            if (event.type === \"online\" && this.state === ConnectionState.Closed) {\n                this.connect(true);\n            }\n        };\n        /** @private */ this._req = async (params, config, retry)=>{\n            if (!this.cancelToken && !params.close) {\n                this.cancelToken = axios__WEBPACK_IMPORTED_MODULE_35__[\"default\"].CancelToken.source();\n            }\n            try {\n                const res = await this.client.doAxiosRequest(\"get\", this.client.baseURL.replace(\":3030\", \":8900\") + \"/longpoll\", undefined, {\n                    config: {\n                        ...config,\n                        cancelToken: this.cancelToken?.token\n                    },\n                    params,\n                    publicEndpoint: true\n                });\n                this.consecutiveFailures = 0; // always reset in case of no error\n                return res;\n            } catch (err) {\n                this.consecutiveFailures += 1;\n                // @ts-ignore\n                if (retry && isErrorRetryable(err)) {\n                    this._log(`_req() - Retryable error, retrying request`);\n                    await sleep(retryInterval(this.consecutiveFailures));\n                    return this._req(params, config, retry);\n                }\n                throw err;\n            }\n        };\n        /** @private */ this._poll = async ()=>{\n            while(this.state === ConnectionState.Connected){\n                try {\n                    const data = await this._req({}, {\n                        timeout: 30000\n                    }, true); // 30s => API responds in 20s if there is no event\n                    if (data.events?.length) {\n                        for(let i = 0; i < data.events.length; i++){\n                            this.client.dispatchEvent(data.events[i]);\n                        }\n                    }\n                } catch (err) {\n                    if (axios__WEBPACK_IMPORTED_MODULE_35__[\"default\"].isCancel(err)) {\n                        this._log(`_poll() - axios canceled request`);\n                        return;\n                    }\n                    /** client.doAxiosRequest will take care of TOKEN_EXPIRED error */ // @ts-ignore\n                    if (isConnectionIDError(err)) {\n                        this._log(`_poll() - ConnectionID error, connecting without ID...`);\n                        this._setState(ConnectionState.Disconnected);\n                        this.connect(true);\n                        return;\n                    }\n                    // @ts-ignore\n                    if (isAPIError(err) && !isErrorRetryable(err)) {\n                        this._setState(ConnectionState.Closed);\n                        return;\n                    }\n                    await sleep(retryInterval(this.consecutiveFailures));\n                }\n            }\n        };\n        /**\n         * connect try to open a longpoll request\n         * @param reconnect should be false for first call and true for subsequent calls to keep the connection alive and call recoverState\n         */ this.connect = async (reconnect = false)=>{\n            if (this.state === ConnectionState.Connecting) {\n                this._log(\"connect() - connecting already in progress\", {\n                    reconnect\n                }, \"warn\");\n                return;\n            }\n            if (this.state === ConnectionState.Connected) {\n                this._log(\"connect() - already connected and polling\", {\n                    reconnect\n                }, \"warn\");\n                return;\n            }\n            this._setState(ConnectionState.Connecting);\n            this.connectionID = undefined; // connect should be sent with empty connection_id so API creates one\n            try {\n                const { event } = await this._req({\n                    json: this.client._buildWSPayload()\n                }, {\n                    timeout: 8000\n                }, reconnect);\n                this._setState(ConnectionState.Connected);\n                this.connectionID = event.connection_id;\n                this.client.resolveConnectionId?.();\n                // @ts-expect-error\n                this.client.dispatchEvent(event);\n                this._poll();\n                return event;\n            } catch (err) {\n                this._setState(ConnectionState.Closed);\n                this.client.rejectConnectionId?.();\n                throw err;\n            }\n        };\n        /**\n         * isHealthy checks if there is a connectionID and connection is in Connected state\n         */ this.isHealthy = ()=>{\n            return !!this.connectionID && this.state === ConnectionState.Connected;\n        };\n        this.disconnect = async (timeout = 2000)=>{\n            removeConnectionEventListeners(this._onlineStatusChanged);\n            this._setState(ConnectionState.Disconnected);\n            this.cancelToken?.cancel(\"disconnect() is called\");\n            this.cancelToken = undefined;\n            const connection_id = this.connectionID;\n            this.connectionID = undefined;\n            try {\n                await this._req({\n                    close: true,\n                    connection_id\n                }, {\n                    timeout\n                }, false);\n                this._log(`disconnect() - Closed connectionID`);\n            } catch (err) {\n                this._log(`disconnect() - Failed`, {\n                    err\n                }, \"error\");\n            }\n        };\n        this.client = client;\n        this.state = ConnectionState.Init;\n        this.consecutiveFailures = 0;\n        addConnectionEventListeners(this._onlineStatusChanged);\n    }\n    _log(msg, extra = {}, level = \"info\") {\n        this.client.logger(level, \"WSConnectionFallback:\" + msg, {\n            ...extra\n        });\n    }\n    _setState(state) {\n        this._log(`_setState() - ${state}`);\n        // transition from connecting => connected\n        if (this.state === ConnectionState.Connecting && state === ConnectionState.Connected) {\n            this.client.dispatchEvent({\n                type: \"connection.changed\",\n                online: true\n            });\n        }\n        if (state === ConnectionState.Closed || state === ConnectionState.Disconnected) {\n            this.client.dispatchEvent({\n                type: \"connection.changed\",\n                online: false\n            });\n        }\n        this.state = state;\n    }\n}\nconst logger = getLogger([\n    \"location\"\n]);\nconst HINT_URL = `https://hint.stream-io-video.com/`;\nconst getLocationHint = async (hintUrl = HINT_URL, timeout = 2000)=>{\n    const abortController = new AbortController();\n    const timeoutId = setTimeout(()=>abortController.abort(), timeout);\n    try {\n        const response = await fetch(HINT_URL, {\n            method: \"HEAD\",\n            signal: abortController.signal\n        });\n        const awsPop = response.headers.get(\"x-amz-cf-pop\") || \"ERR\";\n        logger(\"debug\", `Location header: ${awsPop}`);\n        return awsPop.substring(0, 3); // AMS1-P2 -> AMS\n    } catch (e) {\n        logger(\"warn\", `Failed to get location hint from ${HINT_URL}`, e);\n        return \"ERR\";\n    } finally{\n        clearTimeout(timeoutId);\n    }\n};\nclass StreamClient {\n    /**\n     * Initialize a client.\n     *\n     * @param {string} key - the api key\n     * @param {StreamClientOptions} [options] - additional options, here you can pass custom options to axios instance\n     * @param {string} [options.secret] - the api secret\n     * @param {boolean} [options.browser] - enforce the client to be in browser mode\n     * @param {boolean} [options.warmUp] - default to false, if true, client will open a connection as soon as possible to speed up following requests\n     * @param {Logger} [options.Logger] - custom logger\n     * @param {number} [options.timeout] - default to 3000\n     * @param {httpsAgent} [options.httpsAgent] - custom httpsAgent, in node it's default to https.agent()\n     */ constructor(key, options){\n        this.listeners = {};\n        this.nextRequestAbortController = null;\n        this.devToken = (userID)=>{\n            return DevToken(userID);\n        };\n        this.getAuthType = ()=>{\n            return this.anonymous ? \"anonymous\" : \"jwt\";\n        };\n        this.setBaseURL = (baseURL)=>{\n            this.baseURL = baseURL;\n            this.wsBaseURL = this.baseURL.replace(\"http\", \"ws\").replace(\":3030\", \":8800\");\n        };\n        this.getLocationHint = async (hintUrl, timeout)=>{\n            const hint = await this.locationHint;\n            if (!hint || hint === \"ERR\") {\n                this.locationHint = getLocationHint(hintUrl ?? this.options.locationHintUrl, timeout ?? this.options.locationHintTimeout);\n                return this.locationHint;\n            }\n            return hint;\n        };\n        this._getConnectionID = ()=>this.wsConnection?.connectionID || this.wsFallback?.connectionID;\n        this._hasConnectionID = ()=>Boolean(this._getConnectionID());\n        /**\n         * connectUser - Set the current user and open a WebSocket connection\n         *\n         * @param user Data about this user. IE {name: \"john\"}\n         * @param {TokenOrProvider} userTokenOrProvider Token or provider\n         *\n         * @return {ConnectAPIResponse} Returns a promise that resolves when the connection is setup\n         */ this.connectUser = async (user, userTokenOrProvider)=>{\n            if (!user.id) {\n                throw new Error('The \"id\" field on the user is missing');\n            }\n            /**\n             * Calling connectUser multiple times is potentially the result of a  bad integration, however,\n             * If the user id remains the same we don't throw error\n             */ if (this.userID === user.id && this.setUserPromise) {\n                this.logger(\"warn\", \"Consecutive calls to connectUser is detected, ideally you should only call this function once in your app.\");\n                return this.setUserPromise;\n            }\n            if (this.userID) {\n                throw new Error(\"Use client.disconnect() before trying to connect as a different user. connectUser was called twice.\");\n            }\n            if ((this._isUsingServerAuth() || this.node) && !this.options.allowServerSideConnect) {\n                this.logger(\"warn\", 'Please do not use connectUser server side. connectUser impacts MAU and concurrent connection usage and thus your bill. If you have a valid use-case, add \"allowServerSideConnect: true\" to the client options to disable this warning.');\n            }\n            // we generate the client id client side\n            this.userID = user.id;\n            this.anonymous = false;\n            const setTokenPromise = this._setToken(user, userTokenOrProvider, this.anonymous);\n            this._setUser(user);\n            const wsPromise = this.openConnection();\n            this.setUserPromise = Promise.all([\n                setTokenPromise,\n                wsPromise\n            ]).then((result)=>result[1]);\n            try {\n                return await this.setUserPromise;\n            } catch (err) {\n                if (this.persistUserOnConnectionFailure) {\n                    // cleanup client to allow the user to retry connectUser again\n                    this.closeConnection();\n                } else {\n                    this.disconnectUser();\n                }\n                throw err;\n            }\n        };\n        this._setToken = (user, userTokenOrProvider, isAnonymous)=>this.tokenManager.setTokenOrProvider(userTokenOrProvider, user, isAnonymous);\n        this._setUser = (user)=>{\n            /**\n             * This one is used by the frontend. This is a copy of the current user object stored on backend.\n             * It contains reserved properties and own user properties which are not present in `this._user`.\n             */ this.user = user;\n            this.userID = user.id;\n            // this one is actually used for requests. This is a copy of current user provided to `connectUser` function.\n            this._user = {\n                ...user\n            };\n        };\n        /**\n         * Disconnects the websocket connection, without removing the user set on client.\n         * client.closeConnection will not trigger default auto-retry mechanism for reconnection. You need\n         * to call client.openConnection to reconnect to websocket.\n         *\n         * This is mainly useful on mobile side. You can only receive push notifications\n         * if you don't have active websocket connection.\n         * So when your app goes to background, you can call `client.closeConnection`.\n         * And when app comes back to foreground, call `client.openConnection`.\n         *\n         * @param timeout Max number of ms, to wait for close event of websocket, before forcefully assuming succesful disconnection.\n         *                https://developer.mozilla.org/en-US/docs/Web/API/CloseEvent\n         */ this.closeConnection = async (timeout)=>{\n            if (this.cleaningIntervalRef != null) {\n                clearInterval(this.cleaningIntervalRef);\n                this.cleaningIntervalRef = undefined;\n            }\n            await Promise.all([\n                this.wsConnection?.disconnect(timeout),\n                this.wsFallback?.disconnect(timeout)\n            ]);\n            return Promise.resolve();\n        };\n        /**\n         * Creates a new WebSocket connection with the current user. Returns empty promise, if there is an active connection\n         */ this.openConnection = async ()=>{\n            if (!this.userID) {\n                throw Error(\"UserWithId is not set on client, use client.connectUser or client.connectAnonymousUser instead\");\n            }\n            if (this.wsConnection?.isConnecting && this.wsPromise) {\n                this.logger(\"info\", \"client:openConnection() - connection already in progress\");\n                return this.wsPromise;\n            }\n            if ((this.wsConnection?.isHealthy || this.wsFallback?.isHealthy()) && this._hasConnectionID()) {\n                this.logger(\"info\", \"client:openConnection() - openConnection called twice, healthy connection already exists\");\n                return Promise.resolve();\n            }\n            this.connectionIdPromise = new Promise((resolve, reject)=>{\n                this.resolveConnectionId = resolve;\n                this.rejectConnectionId = reject;\n            });\n            this.clientID = `${this.userID}--${randomId()}`;\n            this.wsPromise = this.connect();\n            return this.wsPromise;\n        };\n        this._normalizeDate = (before)=>{\n            if (before instanceof Date) {\n                before = before.toISOString();\n            }\n            if (before === \"\") {\n                throw new Error(\"Don't pass blank string for since, use null instead if resetting the token revoke\");\n            }\n            return before;\n        };\n        /**\n         * Disconnects the websocket and removes the user from client.\n         *\n         * @param timeout Max number of ms, to wait for close event of websocket, before forcefully assuming successful disconnection.\n         *                https://developer.mozilla.org/en-US/docs/Web/API/CloseEvent\n         */ this.disconnectUser = async (timeout)=>{\n            this.logger(\"info\", \"client:disconnect() - Disconnecting the client\");\n            // remove the user specific fields\n            delete this.user;\n            delete this._user;\n            delete this.userID;\n            this.anonymous = false;\n            await this.closeConnection(timeout);\n            this.tokenManager.reset();\n            this.connectionIdPromise = undefined;\n            this.rejectConnectionId = undefined;\n            this.resolveConnectionId = undefined;\n        };\n        this.connectGuestUser = async (user)=>{\n            this.guestUserCreatePromise = this.doAxiosRequest(\"post\", \"/guest\", {\n                user: {\n                    ...user,\n                    role: \"guest\"\n                }\n            }, {\n                publicEndpoint: true\n            });\n            const response = await this.guestUserCreatePromise;\n            this.guestUserCreatePromise.finally(()=>this.guestUserCreatePromise = undefined);\n            return this.connectUser(response.user, response.access_token);\n        };\n        /**\n         * connectAnonymousUser - Set an anonymous user and open a WebSocket connection\n         */ this.connectAnonymousUser = async (user, tokenOrProvider)=>{\n            this.connectionIdPromise = new Promise((resolve, reject)=>{\n                this.resolveConnectionId = resolve;\n                this.rejectConnectionId = reject;\n            });\n            this.anonymous = true;\n            await this._setToken(user, tokenOrProvider, this.anonymous);\n            this._setUser(user);\n            // some endpoints require a connection_id to be resolved.\n            // as anonymous users aren't allowed to open WS connections, we just\n            // resolve the connection_id here.\n            this.resolveConnectionId?.();\n        };\n        /**\n         * on - Listen to events on all channels and users your watching\n         *\n         * client.on('message.new', event => {console.log(\"my new message\", event, channel.state.messages)})\n         *\n         * @param eventName The event type to listen for (optional)\n         * @param callback The callback to call\n         *\n         * @return  Returns a function which, when called, unsubscribes the event handler.\n         */ this.on = (eventName, callback)=>{\n            if (!this.listeners[eventName]) {\n                this.listeners[eventName] = [];\n            }\n            this.logger(\"debug\", `Adding listener for ${eventName} event`);\n            this.listeners[eventName]?.push(callback);\n            return ()=>{\n                this.off(eventName, callback);\n            };\n        };\n        /**\n         * off - Remove the event handler\n         */ this.off = (eventName, callback)=>{\n            if (!this.listeners[eventName]) {\n                this.listeners[eventName] = [];\n            }\n            this.logger(\"debug\", `Removing listener for ${eventName} event`);\n            this.listeners[eventName] = this.listeners[eventName]?.filter((value)=>value !== callback);\n        };\n        this._logApiRequest = (type, url, data, config)=>{\n            this.logger(\"trace\", `client: ${type} - Request - ${url}`, {\n                payload: data,\n                config\n            });\n        };\n        this._logApiResponse = (type, url, response)=>{\n            this.logger(\"trace\", `client:${type} - Response - url: ${url} > status ${response.status}`, {\n                response\n            });\n        };\n        this._logApiError = (type, url, error)=>{\n            this.logger(\"error\", `client:${type} - Error - url: ${url}`, {\n                url,\n                error\n            });\n        };\n        this.doAxiosRequest = async (type, url, data, options = {})=>{\n            if (!options.publicEndpoint) {\n                await Promise.all([\n                    this.tokenManager.tokenReady(),\n                    this.guestUserCreatePromise,\n                    this.connectionIdPromise\n                ]);\n            }\n            const requestConfig = this._enrichAxiosOptions(options);\n            try {\n                let response;\n                this._logApiRequest(type, url, data, requestConfig);\n                switch(type){\n                    case \"get\":\n                        response = await this.axiosInstance.get(url, requestConfig);\n                        break;\n                    case \"delete\":\n                        response = await this.axiosInstance.delete(url, requestConfig);\n                        break;\n                    case \"post\":\n                        response = await this.axiosInstance.post(url, data, requestConfig);\n                        break;\n                    case \"put\":\n                        response = await this.axiosInstance.put(url, data, requestConfig);\n                        break;\n                    case \"patch\":\n                        response = await this.axiosInstance.patch(url, data, requestConfig);\n                        break;\n                    case \"options\":\n                        response = await this.axiosInstance.options(url, requestConfig);\n                        break;\n                    default:\n                        throw new Error(\"Invalid request type\");\n                }\n                this._logApiResponse(type, url, response);\n                this.consecutiveFailures = 0;\n                return this.handleResponse(response);\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            } catch (e /**TODO: generalize error types  */ ) {\n                e.client_request_id = requestConfig.headers?.[\"x-client-request-id\"];\n                this.consecutiveFailures += 1;\n                if (e.response) {\n                    this._logApiError(type, url, e.response);\n                    /** connection_fallback depends on this token expiration logic */ if (e.response.data.code === KnownCodes.TOKEN_EXPIRED && !this.tokenManager.isStatic()) {\n                        if (this.consecutiveFailures > 1) {\n                            await sleep(retryInterval(this.consecutiveFailures));\n                        }\n                        await this.tokenManager.loadToken();\n                        return await this.doAxiosRequest(type, url, data, options);\n                    }\n                    return this.handleResponse(e.response);\n                } else {\n                    this._logApiError(type, url, e);\n                    // eslint-disable-next-line no-throw-literal\n                    throw e;\n                }\n            }\n        };\n        this.get = (url, params)=>{\n            return this.doAxiosRequest(\"get\", url, null, {\n                params\n            });\n        };\n        this.put = (url, data, params)=>{\n            return this.doAxiosRequest(\"put\", url, data, {\n                params\n            });\n        };\n        this.post = (url, data, params)=>{\n            return this.doAxiosRequest(\"post\", url, data, {\n                params\n            });\n        };\n        this.patch = (url, data, params)=>{\n            return this.doAxiosRequest(\"patch\", url, data, {\n                params\n            });\n        };\n        this.delete = (url, params)=>{\n            return this.doAxiosRequest(\"delete\", url, null, {\n                params\n            });\n        };\n        this.errorFromResponse = (response)=>{\n            let err;\n            err = new ErrorFromResponse(`Stream error HTTP code: ${response.status}`);\n            if (response.data && response.data.code) {\n                err = new Error(`Stream error code ${response.data.code}: ${response.data.message}`);\n                err.code = response.data.code;\n            }\n            err.response = response;\n            err.status = response.status;\n            return err;\n        };\n        this.handleResponse = (response)=>{\n            const data = response.data;\n            if (isErrorResponse(response)) {\n                throw this.errorFromResponse(response);\n            }\n            return data;\n        };\n        this.dispatchEvent = (event)=>{\n            if (!event.received_at) event.received_at = new Date();\n            this.logger(\"debug\", `Dispatching event: ${event.type}`, event);\n            if (!this.listeners) return;\n            // call generic listeners\n            for (const listener of this.listeners.all || []){\n                listener(event);\n            }\n            // call type specific listeners\n            for (const listener of this.listeners[event.type] || []){\n                listener(event);\n            }\n        };\n        /**\n         * @private\n         */ this.connect = async ()=>{\n            if (!this.userID || !this._user) {\n                throw Error(\"Call connectUser or connectAnonymousUser before starting the connection\");\n            }\n            if (!this.wsBaseURL) {\n                throw Error(\"Websocket base url not set\");\n            }\n            if (!this.clientID) {\n                throw Error(\"clientID is not set\");\n            }\n            if (!this.wsConnection && (this.options.warmUp || this.options.enableInsights)) {\n                this._sayHi();\n            }\n            // The StableWSConnection handles all the reconnection logic.\n            if (this.options.wsConnection && this.node) {\n                // Intentionally avoiding adding ts generics on wsConnection in options since its only useful for unit test purpose.\n                this.options.wsConnection.setClient(this);\n                this.wsConnection = this.options.wsConnection;\n            } else {\n                this.wsConnection = new StableWSConnection(this);\n            }\n            try {\n                // if fallback is used before, continue using it instead of waiting for WS to fail\n                if (this.wsFallback) {\n                    return await this.wsFallback.connect();\n                }\n                this.logger(\"info\", \"StreamClient.connect: this.wsConnection.connect()\");\n                // if WSFallback is enabled, ws connect should timeout faster so fallback can try\n                return await this.wsConnection.connect(this.options.enableWSFallback ? this.defaultWSTimeoutWithFallback : this.defaultWSTimeout);\n            } catch (err) {\n                // run fallback only if it's WS/Network error and not a normal API error\n                // make sure browser is online before even trying the longpoll\n                if (this.options.enableWSFallback && // @ts-ignore\n                isWSFailure(err) && isOnline(this.logger)) {\n                    this.logger(\"warn\", \"client:connect() - WS failed, fallback to longpoll\");\n                    this.dispatchEvent({\n                        type: \"transport.changed\",\n                        mode: \"longpoll\"\n                    });\n                    this.wsConnection._destroyCurrentWSConnection();\n                    this.wsConnection.disconnect().then(); // close WS so no retry\n                    this.wsFallback = new WSConnectionFallback(this);\n                    return await this.wsFallback.connect();\n                }\n                throw err;\n            }\n        };\n        /**\n         * Check the connectivity with server for warmup purpose.\n         *\n         * @private\n         */ this._sayHi = ()=>{\n            const client_request_id = randomId();\n            const opts = {\n                headers: axios__WEBPACK_IMPORTED_MODULE_1__.AxiosHeaders.from({\n                    \"x-client-request-id\": client_request_id\n                })\n            };\n            this.doAxiosRequest(\"get\", this.baseURL + \"/hi\", null, opts).catch((e)=>{\n                if (this.options.enableInsights) {\n                    postInsights(\"http_hi_failed\", {\n                        api_key: this.key,\n                        err: e,\n                        client_request_id\n                    });\n                }\n            });\n        };\n        this.getUserAgent = ()=>{\n            const version = \"0.6.0\";\n            return this.userAgent || `stream-video-javascript-client-${this.node ? \"node\" : \"browser\"}-${version}`;\n        };\n        this.setUserAgent = (userAgent)=>{\n            this.userAgent = userAgent;\n        };\n        /**\n         * _isUsingServerAuth - Returns true if we're using server side auth\n         */ this._isUsingServerAuth = ()=>!!this.secret;\n        this._enrichAxiosOptions = (options = {\n            params: {},\n            headers: {},\n            config: {}\n        })=>{\n            const token = options.publicEndpoint && !this.user ? undefined : this._getToken();\n            const authorization = token ? {\n                Authorization: token\n            } : undefined;\n            let signal = null;\n            if (this.nextRequestAbortController !== null) {\n                signal = this.nextRequestAbortController.signal;\n                this.nextRequestAbortController = null;\n            }\n            if (!options.headers?.[\"x-client-request-id\"]) {\n                options.headers = {\n                    ...options.headers,\n                    \"x-client-request-id\": randomId()\n                };\n            }\n            return {\n                params: {\n                    user_id: this.userID,\n                    connection_id: this._getConnectionID(),\n                    api_key: this.key,\n                    ...options.params\n                },\n                headers: {\n                    ...authorization,\n                    \"stream-auth-type\": options.publicEndpoint && !this.user ? \"anonymous\" : this.getAuthType(),\n                    \"X-Stream-Client\": this.getUserAgent(),\n                    ...options.headers\n                },\n                ...signal ? {\n                    signal\n                } : {},\n                ...options.config,\n                ...this.options.axiosRequestConfig\n            };\n        };\n        this._getToken = ()=>{\n            if (!this.tokenManager) return null;\n            return this.tokenManager.getToken();\n        };\n        /**\n         * encode ws url payload\n         * @private\n         * @returns json string\n         */ this._buildWSPayload = (client_request_id)=>{\n            return JSON.stringify({\n                user_id: this.userID,\n                user_details: this._user,\n                client_request_id\n            });\n        };\n        /**\n         * creates an abort controller that will be used by the next HTTP Request.\n         */ this.createAbortControllerForNextRequest = ()=>{\n            return this.nextRequestAbortController = new AbortController();\n        };\n        /**\n         * createToken - Creates a token to authenticate this user. This function is used server side.\n         * The resulting token should be passed to the client side when the users registers or logs in.\n         *\n         * @param {string} userID The UserWithId ID\n         * @param {number} [exp] The expiration time for the token expressed in the number of seconds since the epoch\n         * @param call_cids for anonymous tokens you have to provide the call cids the use can join\n         *\n         * @return {string} Returns a token\n         */ this.createToken = (userID, exp, iat, call_cids)=>{\n            if (this.secret == null) {\n                throw Error(`tokens can only be created server-side using the API Secret`);\n            }\n            const extra = {};\n            if (exp) {\n                extra.exp = exp;\n            }\n            if (iat) {\n                extra.iat = iat;\n            }\n            if (call_cids) {\n                extra.call_cids = call_cids;\n            }\n            return JWTUserToken(this.secret, userID, extra, {});\n        };\n        // set the key\n        this.key = key;\n        // set the secret\n        this.secret = options?.secret;\n        // set the options... and figure out defaults...\n        const inputOptions = options ? options : {\n            browser: \"undefined\" !== \"undefined\"\n        };\n        this.browser = inputOptions.browser || \"undefined\" !== \"undefined\";\n        this.node = !this.browser;\n        if (this.browser) {\n            this.locationHint = getLocationHint(options?.locationHintUrl, options?.locationHintTimeout);\n        }\n        this.options = {\n            timeout: 5000,\n            withCredentials: false,\n            warmUp: false,\n            ...inputOptions\n        };\n        if (this.node && !this.options.httpsAgent) {\n            this.options.httpsAgent = new (https__WEBPACK_IMPORTED_MODULE_5___default().Agent)({\n                keepAlive: true,\n                keepAliveMsecs: 3000\n            });\n        }\n        this.setBaseURL(this.options.baseURL || \"https://video.stream-io-api.com/video\");\n        if (typeof process !== \"undefined\" && process.env.STREAM_LOCAL_TEST_RUN) {\n            this.setBaseURL(\"http://localhost:3030/video\");\n        }\n        if (typeof process !== \"undefined\" && process.env.STREAM_LOCAL_TEST_HOST) {\n            this.setBaseURL(`http://${process.env.STREAM_LOCAL_TEST_HOST}/video`);\n        }\n        this.axiosInstance = axios__WEBPACK_IMPORTED_MODULE_35__[\"default\"].create({\n            ...this.options,\n            baseURL: this.baseURL\n        });\n        // WS connection is initialized when setUser is called\n        this.wsConnection = null;\n        this.wsPromise = null;\n        this.setUserPromise = null;\n        // mapping between channel groups and configs\n        this.anonymous = false;\n        this.persistUserOnConnectionFailure = this.options?.persistUserOnConnectionFailure;\n        // If it is a server-side client, then lets initialize the tokenManager, since token will be\n        // generated from secret.\n        this.tokenManager = new TokenManager(this.secret);\n        this.consecutiveFailures = 0;\n        this.insightMetrics = new InsightMetrics();\n        this.defaultWSTimeoutWithFallback = 6000;\n        this.defaultWSTimeout = 15000;\n        this.logger = isFunction(inputOptions.logger) ? inputOptions.logger : ()=>null;\n    }\n}\n/**\n * A `StreamVideoClient` instance lets you communicate with our API, and authenticate users.\n */ class StreamVideoClient {\n    constructor(apiKeyOrArgs, opts){\n        this.logLevel = \"warn\";\n        this.eventHandlersToUnregister = [];\n        /**\n         * Disconnects the currently connected user from the client.\n         *\n         * If the connection is successfully disconnected, the connected user [state variable](#readonlystatestore) will be updated accordingly\n         *\n         * @param timeout Max number of ms, to wait for close event of websocket, before forcefully assuming successful disconnection.\n         *                https://developer.mozilla.org/en-US/docs/Web/API/CloseEvent\n         */ this.disconnectUser = async (timeout)=>{\n            if (!this.streamClient.user && !this.connectionPromise) {\n                return;\n            }\n            const disconnectUser = ()=>this.streamClient.disconnectUser(timeout);\n            this.disconnectionPromise = this.connectionPromise ? this.connectionPromise.then(()=>disconnectUser()) : disconnectUser();\n            this.disconnectionPromise.finally(()=>this.disconnectionPromise = undefined);\n            await this.disconnectionPromise;\n            this.eventHandlersToUnregister.forEach((unregister)=>unregister());\n            this.eventHandlersToUnregister = [];\n            this.writeableStateStore.setConnectedUser(undefined);\n        };\n        /**\n         * You can subscribe to WebSocket events provided by the API.\n         * To remove a subscription, call the `off` method or, execute the returned unsubscribe function.\n         * Please note that subscribing to WebSocket events is an advanced use-case, for most use-cases it should be enough to watch for changes in the reactive [state store](#readonlystatestore).\n         *\n         * @param eventName the event name or 'all'.\n         * @param callback the callback which will be called when the event is emitted.\n         * @returns an unsubscribe function.\n         */ this.on = (eventName, callback)=>{\n            return this.streamClient.on(eventName, callback);\n        };\n        /**\n         * Remove subscription for WebSocket events that were created by the `on` method.\n         *\n         * @param eventName the event name.\n         * @param callback the callback which was passed to the `on` method.\n         */ this.off = (eventName, callback)=>{\n            return this.streamClient.off(eventName, callback);\n        };\n        /**\n         * Creates a new call.\n         *\n         * @param type the type of the call.\n         * @param id the id of the call, if not provided a unique random value is used\n         */ this.call = (type, id)=>{\n            return new Call({\n                streamClient: this.streamClient,\n                id: id,\n                type: type,\n                clientStore: this.writeableStateStore\n            });\n        };\n        /**\n         * Creates a new guest user with the given data.\n         *\n         * @param data the data for the guest user.\n         */ this.createGuestUser = async (data)=>{\n            return this.streamClient.doAxiosRequest(\"post\", \"/guest\", data, {\n                publicEndpoint: true\n            });\n        };\n        /**\n         * Will query the API for calls matching the given filters.\n         *\n         * @param data the query data.\n         */ this.queryCalls = async (data = {})=>{\n            const response = await this.streamClient.post(\"/calls\", data);\n            const calls = response.calls.map((c)=>{\n                const call = new Call({\n                    streamClient: this.streamClient,\n                    id: c.call.id,\n                    type: c.call.type,\n                    members: c.members,\n                    ownCapabilities: c.own_capabilities,\n                    watching: data.watch,\n                    clientStore: this.writeableStateStore\n                });\n                call.state.updateFromCallResponse(c.call);\n                call.applyDeviceConfig();\n                if (data.watch) {\n                    this.writeableStateStore.registerCall(call);\n                }\n                return call;\n            });\n            return {\n                ...response,\n                calls: calls\n            };\n        };\n        /**\n         * Returns a list of available data centers available for hosting calls.\n         */ this.edges = async ()=>{\n            return this.streamClient.get(`/edges`);\n        };\n        /**\n         * addDevice - Adds a push device for a user.\n         *\n         * @param {string} id the device id\n         * @param {string} push_provider the push provider name (eg. apn, firebase)\n         * @param {string} push_provider_name user provided push provider name\n         * @param {string} [userID] the user id (defaults to current user)\n         * @param {boolean} [voip_token] enables use of VoIP token for push notifications on iOS platform\n         */ this.addDevice = async (id, push_provider, push_provider_name, userID, voip_token)=>{\n            return await this.streamClient.post(\"/devices\", {\n                id,\n                push_provider,\n                voip_token,\n                ...userID != null ? {\n                    user_id: userID\n                } : {},\n                ...push_provider_name != null ? {\n                    push_provider_name\n                } : {}\n            });\n        };\n        /**\n         * getDevices - Returns the devices associated with a current user\n         * @param {string} [userID] User ID. Only works on serverside\n         */ this.getDevices = async (userID)=>{\n            return await this.streamClient.get(\"/devices\", userID ? {\n                user_id: userID\n            } : {});\n        };\n        /**\n         * removeDevice - Removes the device with the given id.\n         *\n         * @param {string} id The device id\n         * @param {string} [userID] The user id. Only specify this for serverside requests\n         */ this.removeDevice = async (id, userID)=>{\n            return await this.streamClient.delete(\"/devices\", {\n                id,\n                ...userID ? {\n                    user_id: userID\n                } : {}\n            });\n        };\n        /**\n         * A callback that can be used to create ringing calls from push notifications. If the call already exists, it will do nothing.\n         * @param call_cid\n         * @returns\n         */ this.onRingingCall = async (call_cid)=>{\n            // if we find the call and is already ringing, we don't need to create a new call\n            // as client would have received the call.ring state because the app had WS alive when receiving push notifications\n            let call = this.readOnlyStateStore.calls.find((c)=>c.cid === call_cid && c.ringing);\n            if (!call) {\n                // if not it means that WS is not alive when receiving the push notifications and we need to fetch the call\n                const [callType, callId] = call_cid.split(\":\");\n                call = new Call({\n                    streamClient: this.streamClient,\n                    type: callType,\n                    id: callId,\n                    clientStore: this.writeableStateStore,\n                    ringing: true\n                });\n                await call.get();\n            }\n            return call;\n        };\n        /**\n         * Connects the given anonymous user to the client.\n         *\n         * @param user the user to connect.\n         * @param tokenOrProvider a token or a function that returns a token.\n         */ this.connectAnonymousUser = async (user, tokenOrProvider)=>{\n            const connectAnonymousUser = ()=>this.streamClient.connectAnonymousUser(user, tokenOrProvider);\n            this.connectionPromise = this.disconnectionPromise ? this.disconnectionPromise.then(()=>connectAnonymousUser()) : connectAnonymousUser();\n            this.connectionPromise.finally(()=>this.connectionPromise = undefined);\n            return this.connectionPromise;\n        };\n        let logger = logToConsole;\n        let logLevel = \"warn\";\n        if (typeof apiKeyOrArgs === \"string\") {\n            logLevel = opts?.logLevel || logLevel;\n            logger = opts?.logger || logger;\n        } else {\n            logLevel = apiKeyOrArgs.options?.logLevel || logLevel;\n            logger = apiKeyOrArgs.options?.logger || logger;\n        }\n        setLogger(logger, logLevel);\n        this.logger = getLogger([\n            \"client\"\n        ]);\n        if (typeof apiKeyOrArgs === \"string\") {\n            this.streamClient = new StreamClient(apiKeyOrArgs, {\n                persistUserOnConnectionFailure: true,\n                ...opts,\n                logLevel,\n                logger: this.logger\n            });\n        } else {\n            this.streamClient = new StreamClient(apiKeyOrArgs.apiKey, {\n                persistUserOnConnectionFailure: true,\n                ...apiKeyOrArgs.options,\n                logLevel,\n                logger: this.logger\n            });\n            const sdkInfo = getSdkInfo();\n            if (sdkInfo) {\n                this.streamClient.setUserAgent(this.streamClient.getUserAgent() + `-video-${SdkType[sdkInfo.type].toLowerCase()}-sdk-${sdkInfo.major}.${sdkInfo.minor}.${sdkInfo.patch}`);\n            }\n        }\n        this.writeableStateStore = new StreamVideoWriteableStateStore();\n        this.readOnlyStateStore = new StreamVideoReadOnlyStateStore(this.writeableStateStore);\n        if (typeof apiKeyOrArgs !== \"string\") {\n            const user = apiKeyOrArgs.user;\n            const token = apiKeyOrArgs.token || apiKeyOrArgs.tokenProvider;\n            if (user) {\n                this.connectUser(user, token);\n            }\n        }\n    }\n    /**\n     * Return the reactive state store, use this if you want to be notified about changes to the client state\n     */ get state() {\n        return this.readOnlyStateStore;\n    }\n    /**\n     * Connects the given user to the client.\n     * Only one user can connect at a time, if you want to change users, call `disconnectUser` before connecting a new user.\n     * If the connection is successful, the connected user [state variable](#readonlystatestore) will be updated accordingly.\n     *\n     * @param user the user to connect.\n     * @param token a token or a function that returns a token.\n     */ async connectUser(user, token) {\n        if (user.type === \"anonymous\") {\n            user.id = \"!anon\";\n            return this.connectAnonymousUser(user, token);\n        }\n        let connectUser = ()=>{\n            return this.streamClient.connectUser(user, token);\n        };\n        if (user.type === \"guest\") {\n            connectUser = async ()=>{\n                return this.streamClient.connectGuestUser(user);\n            };\n        }\n        this.connectionPromise = this.disconnectionPromise ? this.disconnectionPromise.then(()=>connectUser()) : connectUser();\n        this.connectionPromise?.finally(()=>this.connectionPromise = undefined);\n        const connectUserResponse = await this.connectionPromise;\n        // connectUserResponse will be void if connectUser called twice for the same user\n        if (connectUserResponse?.me) {\n            this.writeableStateStore.setConnectedUser(connectUserResponse.me);\n        }\n        this.eventHandlersToUnregister.push(this.on(\"connection.changed\", (event)=>{\n            if (event.online) {\n                const callsToReWatch = this.writeableStateStore.calls.filter((call)=>call.watching).map((call)=>call.cid);\n                this.logger(\"info\", `Rewatching calls after connection changed ${callsToReWatch.join(\", \")}`);\n                if (callsToReWatch.length > 0) {\n                    this.queryCalls({\n                        watch: true,\n                        filter_conditions: {\n                            cid: {\n                                $in: callsToReWatch\n                            }\n                        },\n                        sort: [\n                            {\n                                field: \"cid\",\n                                direction: 1\n                            }\n                        ]\n                    }).catch((err)=>{\n                        this.logger(\"error\", \"Failed to re-watch calls\", err);\n                    });\n                }\n            }\n        }));\n        this.eventHandlersToUnregister.push(this.on(\"call.created\", (event)=>{\n            const { call, members } = event;\n            if (user.id === call.created_by.id) {\n                this.logger(\"warn\", \"Received `call.created` sent by the current user\");\n                return;\n            }\n            this.logger(\"info\", `New call created and registered: ${call.cid}`);\n            const newCall = new Call({\n                streamClient: this.streamClient,\n                type: call.type,\n                id: call.id,\n                members,\n                clientStore: this.writeableStateStore\n            });\n            newCall.state.updateFromCallResponse(call);\n            this.writeableStateStore.registerCall(newCall);\n        }));\n        this.eventHandlersToUnregister.push(this.on(\"call.ring\", async (event)=>{\n            const { call, members } = event;\n            if (user.id === call.created_by.id) {\n                this.logger(\"debug\", \"Received `call.ring` sent by the current user so ignoring the event\");\n                return;\n            }\n            // The call might already be tracked by the client,\n            // if `call.created` was received before `call.ring`.\n            // In that case, we cleanup the already tracked call.\n            const prevCall = this.writeableStateStore.findCall(call.type, call.id);\n            await prevCall?.leave();\n            // we create a new call\n            const theCall = new Call({\n                streamClient: this.streamClient,\n                type: call.type,\n                id: call.id,\n                members,\n                clientStore: this.writeableStateStore,\n                ringing: true\n            });\n            theCall.state.updateFromCallResponse(call);\n            // we fetch the latest metadata for the call from the server\n            await theCall.get();\n            this.writeableStateStore.registerCall(theCall);\n        }));\n        return connectUserResponse;\n    }\n    /**\n     * addDevice - Adds a push device for a user.\n     *\n     * @param {string} id the device id\n     * @param {string} push_provider the push provider name (eg. apn, firebase)\n     * @param {string} push_provider_name user provided push provider name\n     * @param {string} [userID] the user id (defaults to current user)\n     */ async addVoipDevice(id, push_provider, push_provider_name, userID) {\n        return await this.addDevice(id, push_provider, push_provider_name, userID, true);\n    }\n}\n/**\n * @deprecated Please use the `@stream-io/node-sdk` package instead.\n *\n * @see https://getstream.io/video/docs/api/\n */ class StreamVideoServerClient extends StreamVideoClient {\n    constructor(apiKey, options){\n        super({\n            apiKey,\n            options\n        });\n        this.getCallTypes = ()=>{\n            return this.streamClient.get(\"/calltypes\");\n        };\n        this.getCallType = (name)=>{\n            return this.streamClient.get(`/calltypes/${name}`);\n        };\n        this.createCallType = (data)=>{\n            return this.streamClient.post(\"/calltypes\", data);\n        };\n        this.deleteCallType = (name)=>{\n            return this.streamClient.delete(`/calltypes/${name}`);\n        };\n        this.updateCallType = (name, data)=>{\n            return this.streamClient.put(`/calltypes/${name}`, data);\n        };\n        this.listExternalStorage = ()=>{\n            return this.streamClient.get(\"/external_storage\");\n        };\n        this.createExternalStorage = (request)=>{\n            return this.streamClient.post(\"/external_storage\", request);\n        };\n        this.deleteExternalStorage = (name)=>{\n            return this.streamClient.delete(`/external_storage/${name}`);\n        };\n        this.updateExternalStorage = (name, request)=>{\n            return this.streamClient.put(`/external_storage/${name}`, request);\n        };\n        this.checkExternalStorage = (name)=>{\n            return this.streamClient.get(`/external_storage/${name}/check`);\n        };\n    }\n    /**\n     * createToken - Creates a token to authenticate this user. This function is used server side.\n     * The resulting token should be passed to the client side when the users register or logs in.\n     *\n     * @param {string} userID The User ID\n     * @param {number} [exp] The expiration time for the token expressed in the number of seconds since the epoch\n     * @param {number} [iat] The timestamp when a token has been issued\n     * @param call_cids for anonymous tokens you have to provide the call cids the use can join\n     *\n     * @return {string} Returns a token\n     */ createToken(userID, exp, iat, call_cids) {\n        return this.streamClient.createToken(userID, exp, iat, call_cids);\n    }\n}\n //# sourceMappingURL=index.es.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHN0cmVhbS1pby92aWRlby1jbGllbnQvZGlzdC9pbmRleC5lcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBa0pBOztDQUVHLEdBQ1UsTUFBQUEsaUNBQWlDO0lBQzVDQyxTQUFTO0lBQ1RDLFVBQVU7O0FBaURaOztDQUVHLEdBQ1UsTUFBQUMsd0NBQXdDO0lBQ25ERixTQUFTO0lBQ1RDLFVBQVU7O0FBK3NEWjs7Q0FFRyxHQUNVLE1BQUFFLHNDQUFzQztJQUNqREMsVUFBVTtJQUNWQyxLQUFLO0lBQ0xDLFFBQVE7SUFDUkMsUUFBUTs7QUFnMEJWOztDQUVHLEdBQ1UsTUFBQUMseUJBQXlCO0lBQ3BDQyxXQUFXO0lBQ1hDLE1BQU07SUFDTkMsb0JBQW9CO0lBQ3BCQyxRQUFRO0lBQ1JDLFFBQVE7O0FBcUNWOztDQUVHLEdBQ1UsTUFBQUMsZ0NBQWdDO0lBQzNDTCxXQUFXO0lBQ1hDLE1BQU07SUFDTkMsb0JBQW9CO0lBQ3BCQyxRQUFRO0lBQ1JDLFFBQVE7O0FBMlFWOzs7Q0FHRyxHQUNVLE1BQUFFLGdCQUFnQjtJQUMzQkMsYUFBYTtJQUNiQyxhQUFhO0lBQ2JDLGlCQUFpQjtJQUNqQkMsVUFBVTtJQUNWQyxnQkFBZ0I7SUFDaEJDLFdBQVc7SUFDWEMsaUJBQWlCO0lBQ2pCQyxZQUFZO0lBQ1pDLGtCQUFrQjtJQUNsQkMsV0FBVztJQUNYQyxvQkFBb0I7SUFDcEJDLGFBQWE7SUFDYkMsWUFBWTtJQUNaQyxZQUFZO0lBQ1pDLHNCQUFzQjtJQUN0QkMsbUJBQW1CO0lBQ25CQywwQkFBMEI7SUFDMUJDLHFCQUFxQjtJQUNyQkMsa0JBQWtCO0lBQ2xCQyx5QkFBeUI7SUFDekJDLGFBQWE7SUFD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QU8sSUFBSSxDQUFDcWUsWUFBWSxDQUFDK1UsR0FBRyxDQUMxQixDQUFjLGFBQUE3dkQsS0FBTSxHQUNwQnk4QjtRQUVKO1FBRUEsSUFBbUIsQ0FBQW8zQixtQkFBQSxHQUFHO1lBQ3BCLE9BQU8sSUFBSSxDQUFDL1ksWUFBWSxDQUFDdmhCLEdBQUcsQ0FDMUI7UUFFSjtRQUVBLEtBQUF1NkIscUJBQXFCLEdBQUcsQ0FBQzl0QjtZQUN2QixPQUFPLElBQUksQ0FBQzhVLFlBQVksQ0FBQzdVLElBQUksQ0FHM0IscUJBQXFCRDtRQUN6QjtRQUVBLEtBQUErdEIscUJBQXFCLEdBQUcsQ0FBQy96RDtZQUN2QixPQUFPLElBQUksQ0FBQzg2QyxZQUFZLENBQUMxZixNQUFNLENBQzdCLENBQXFCLG9CQUFBcDdCLEtBQU07UUFFL0I7UUFFQSxLQUFBZzBELHFCQUFxQixHQUFHLENBQ3RCaDBELE1BQ0FnbUM7WUFFQSxPQUFPLElBQUksQ0FBQzhVLFlBQVksQ0FBQytVLEdBQUcsQ0FHMUIsQ0FBcUIsb0JBQUE3dkQsS0FBTSxHQUFFZ21DO1FBQ2pDO1FBRUEsS0FBQWl1QixvQkFBb0IsR0FBRyxDQUFDajBEO1lBQ3RCLE9BQU8sSUFBSSxDQUFDODZDLFlBQVksQ0FBQ3ZoQixHQUFHLENBQzFCLENBQXFCLG9CQUFBdjVCLEtBQVk7UUFFckM7O0lBNUVBOzs7Ozs7Ozs7O0tBVUcsR0FDSDZ3RCxZQUNFaE4sTUFBYyxFQUNkaU4sR0FBWSxFQUNaM0csR0FBWSxFQUNaNEcsU0FBb0I7UUFFcEIsT0FBTyxJQUFJLENBQUNqVyxZQUFZLENBQUMrVixXQUFXLENBQUNoTixRQUFRaU4sS0FBSzNHLEtBQUs0Rzs7QUE0RDFEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vSGFNZWV0ei8uLi8uLi9zcmMvZ2VuL2Nvb3JkaW5hdG9yL2luZGV4LnRzPzdjZWEiLCJ3ZWJwYWNrOi8vSGFNZWV0ei8uLi8uLi9zcmMvY29vcmRpbmF0b3IvY29ubmVjdGlvbi90eXBlcy50cz83YzI3Iiwid2VicGFjazovL0hhTWVldHovLi4vLi4vc3JjL2dlbi9nb29nbGUvcHJvdG9idWYvc3RydWN0LnRzP2RmNjciLCJ3ZWJwYWNrOi8vSGFNZWV0ei8uLi8uLi9zcmMvZ2VuL2dvb2dsZS9wcm90b2J1Zi90aW1lc3RhbXAudHM/MmUxYyIsIndlYnBhY2s6Ly9IYU1lZXR6Ly4uLy4uL3NyYy9nZW4vdmlkZW8vc2Z1L21vZGVscy9tb2RlbHMudHM/MmRkZSIsIndlYnBhY2s6Ly9IYU1lZXR6Ly4uLy4uL3NyYy9nZW4vdmlkZW8vc2Z1L3NpZ25hbF9ycGMvc2lnbmFsLnRzP2NjOTYiLCJ3ZWJwYWNrOi8vSGFNZWV0ei8uLi8uLi9zcmMvZ2VuL3ZpZGVvL3NmdS9ldmVudC9ldmVudHMudHM/N2M3YSIsIndlYnBhY2s6Ly9IYU1lZXR6Ly4uLy4uL3NyYy90eXBlcy50cz80NzlkIiwid2VicGFjazovL0hhTWVldHovLi4vLi4vc3JjL2dlbi92aWRlby9zZnUvc2lnbmFsX3JwYy9zaWduYWwuY2xpZW50LnRzP2FmZWQiLCJ3ZWJwYWNrOi8vSGFNZWV0ei8uLi8uLi9zcmMvcnBjL2NyZWF0ZUNsaWVudC50cz9jNmE4Iiwid2VicGFjazovL0hhTWVldHovLi4vLi4vc3JjL2hlbHBlcnMvcGxhdGZvcm1zLnRzPzNkMzAiLCJ3ZWJwYWNrOi8vSGFNZWV0ei8uLi8uLi9zcmMvbG9nZ2VyLnRzPzg3NDYiLCJ3ZWJwYWNrOi8vSGFNZWV0ei8uLi8uLi9zcmMvcnRjL2NvZGVjcy50cz9kZWI1Iiwid2VicGFjazovL0hhTWVldHovLi4vLi4vc3JjL3J0Yy9EaXNwYXRjaGVyLnRzP2QwMWUiLCJ3ZWJwYWNrOi8vSGFNZWV0ei8uLi8uLi9zcmMvcnRjL0ljZVRyaWNrbGVCdWZmZXIudHM/ZmY2ZSIsIndlYnBhY2s6Ly9IYU1lZXR6Ly4uLy4uL3NyYy9ydGMvaGVscGVycy9pY2VDYW5kaWRhdGUudHM/MTFiMyIsIndlYnBhY2s6Ly9IYU1lZXR6Ly4uLy4uL3NyYy9jbGllbnQtZGV0YWlscy50cz8zNzhlIiwid2VicGFjazovL0hhTWVldHovLi4vLi4vc3JjL3J0Yy92aWRlb0xheWVycy50cz9iYjcwIiwid2VicGFjazovL0hhTWVldHovLi4vLi4vc3JjL3J0Yy9oZWxwZXJzL3RyYWNrcy50cz9lNjk4Iiwid2VicGFjazovL0hhTWVldHovLi4vLi4vc3JjL3N0b3JlL3J4VXRpbHMudHM/Nzk0MSIsIndlYnBhY2s6Ly9IYU1lZXR6Ly4uLy4uL3NyYy9zb3J0aW5nL2NvbXBhcmF0b3IudHM/OGE3MiIsIndlYnBhY2s6Ly9IYU1lZXR6Ly4uLy4uL3NyYy9zb3J0aW5nL3BhcnRpY2lwYW50cy50cz81ODViIiwid2VicGFjazovL0hhTWVldHovLi4vLi4vc3JjL3NvcnRpbmcvcHJlc2V0cy50cz9iYzQ4Iiwid2VicGFjazovL0hhTWVldHovLi4vLi4vc3JjL3N0b3JlL0NhbGxTdGF0ZS50cz81N2I4Iiwid2VicGFjazovL0hhTWVldHovLi4vLi4vc3JjL3N0b3JlL3N0YXRlU3RvcmUudHM/MDE4YSIsIndlYnBhY2s6Ly9IYU1lZXR6Ly4uLy4uL3NyYy9oZWxwZXJzL3NkcC1tdW5naW5nLnRzP2ZkY2YiLCJ3ZWJwYWNrOi8vSGFNZWV0ei8uLi8uLi9zcmMvcnRjL1B1Ymxpc2hlci50cz80MGJkIiwid2VicGFjazovL0hhTWVldHovLi4vLi4vc3JjL3J0Yy9TdWJzY3JpYmVyLnRzPzY4ZDMiLCJ3ZWJwYWNrOi8vSGFNZWV0ei8uLi8uLi9zcmMvcnRjL3NpZ25hbC50cz9kNzFiIiwid2VicGFjazovL0hhTWVldHovLi4vLi4vc3JjL2Nvb3JkaW5hdG9yL2Nvbm5lY3Rpb24vdXRpbHMudHM/Njg2NiIsIndlYnBhY2s6Ly9IYU1lZXR6Ly4uLy4uL3NyYy9TdHJlYW1TZnVDbGllbnQudHM/NWQyMyIsIndlYnBhY2s6Ly9IYU1lZXR6Ly4uLy4uL3NyYy9ldmVudHMvY2FsbC50cz83NGYzIiwid2VicGFjazovL0hhTWVldHovLi4vLi4vc3JjL2V2ZW50cy9jYWxsLXBlcm1pc3Npb25zLnRzPzk5ZjAiLCJ3ZWJwYWNrOi8vSGFNZWV0ei8uLi8uLi9zcmMvZXZlbnRzL2ludGVybmFsLnRzP2FlN2IiLCJ3ZWJwYWNrOi8vSGFNZWV0ei8uLi8uLi9zcmMvZXZlbnRzL211dGVzLnRzPzIwOGYiLCJ3ZWJwYWNrOi8vSGFNZWV0ei8uLi8uLi9zcmMvZXZlbnRzL3BhcnRpY2lwYW50LnRzPzlmNWMiLCJ3ZWJwYWNrOi8vSGFNZWV0ei8uLi8uLi9zcmMvZXZlbnRzL3NwZWFrZXIudHM/NjYwMyIsIndlYnBhY2s6Ly9IYU1lZXR6Ly4uLy4uL3NyYy9ldmVudHMvY2FsbEV2ZW50SGFuZGxlcnMudHM/MjU5YiIsIndlYnBhY2s6Ly9IYU1lZXR6Ly4uLy4uL3NyYy9ydGMvZmxvd3Mvam9pbi50cz9lNmE3Iiwid2VicGFjazovL0hhTWVldHovLi4vLi4vc3JjL3N0YXRzL3N0YXRlLXN0b3JlLXN0YXRzLXJlcG9ydGVyLnRzPzdmMTEiLCJ3ZWJwYWNrOi8vSGFNZWV0ei8uLi8uLi9zcmMvaGVscGVycy9WaWV3cG9ydFRyYWNrZXIudHM/Nzg0YyIsIndlYnBhY2s6Ly9IYU1lZXR6Ly4uLy4uL3NyYy9oZWxwZXJzL2Jyb3dzZXJzLnRzP2E4NDYiLCJ3ZWJwYWNrOi8vSGFNZWV0ei8uLi8uLi9zcmMvaGVscGVycy9EeW5hc2NhbGVNYW5hZ2VyLnRzPzQxNzgiLCJ3ZWJwYWNrOi8vSGFNZWV0ei8uLi8uLi9zcmMvcGVybWlzc2lvbnMvUGVybWlzc2lvbnNDb250ZXh0LnRzPzhhOGUiLCJ3ZWJwYWNrOi8vSGFNZWV0ei8uLi8uLi9zcmMvQ2FsbFR5cGUudHM/YWI5NyIsIndlYnBhY2s6Ly9IYU1lZXR6Ly4uLy4uL3NyYy9kZXZpY2VzL2RldmljZXMudHM/YjQ3ZiIsIndlYnBhY2s6Ly9IYU1lZXR6Ly4uLy4uL3NyYy9kZXZpY2VzL0lucHV0TWVkaWFEZXZpY2VNYW5hZ2VyLnRzP2U2MTAiLCJ3ZWJwYWNrOi8vSGFNZWV0ei8uLi8uLi9zcmMvZGV2aWNlcy9JbnB1dE1lZGlhRGV2aWNlTWFuYWdlclN0YXRlLnRzP2VhNzciLCJ3ZWJwYWNrOi8vSGFNZWV0ei8uLi8uLi9zcmMvZGV2aWNlcy9DYW1lcmFNYW5hZ2VyU3RhdGUudHM/MmM2MiIsIndlYnBhY2s6Ly9IYU1lZXR6Ly4uLy4uL3NyYy9kZXZpY2VzL0NhbWVyYU1hbmFnZXIudHM/ZThhMiIsIndlYnBhY2s6Ly9IYU1lZXR6Ly4uLy4uL3NyYy9kZXZpY2VzL01pY3JvcGhvbmVNYW5hZ2VyU3RhdGUudHM/M2YxMyIsIndlYnBhY2s6Ly9IYU1lZXR6Ly4uLy4uL3NyYy9oZWxwZXJzL3NvdW5kLWRldGVjdG9yLnRzP2NiMmYiLCJ3ZWJwYWNrOi8vSGFNZWV0ei8uLi8uLi9zcmMvaGVscGVycy9STlNwZWVjaERldGVjdG9yLnRzPzZlYjUiLCJ3ZWJwYWNrOi8vSGFNZWV0ei8uLi8uLi9zcmMvZGV2aWNlcy9NaWNyb3Bob25lTWFuYWdlci50cz9mNzZmIiwid2VicGFjazovL0hhTWVldHovLi4vLi4vc3JjL2RldmljZXMvU2NyZWVuU2hhcmVTdGF0ZS50cz83OWRmIiwid2VicGFjazovL0hhTWVldHovLi4vLi4vc3JjL2RldmljZXMvU2NyZWVuU2hhcmVNYW5hZ2VyLnRzPzEwODMiLCJ3ZWJwYWNrOi8vSGFNZWV0ei8uLi8uLi9zcmMvZGV2aWNlcy9TcGVha2VyU3RhdGUudHM/Mjk2OCIsIndlYnBhY2s6Ly9IYU1lZXR6Ly4uLy4uL3NyYy9kZXZpY2VzL1NwZWFrZXJNYW5hZ2VyLnRzPzIxNDUiLCJ3ZWJwYWNrOi8vSGFNZWV0ei8uLi8uLi9zcmMvQ2FsbC50cz83YjVlIiwid2VicGFjazovL0hhTWVldHovLi4vLi4vc3JjL2Nvb3JkaW5hdG9yL2Nvbm5lY3Rpb24vaW5zaWdodHMudHM/NWU5YyIsIndlYnBhY2s6Ly9IYU1lZXR6Ly4uLy4uL3NyYy9jb29yZGluYXRvci9jb25uZWN0aW9uL2Nvbm5lY3Rpb24udHM/NjA2ZiIsIndlYnBhY2s6Ly9IYU1lZXR6Ly4uLy4uL3NyYy9jb29yZGluYXRvci9jb25uZWN0aW9uL2Jhc2U2NC50cz8wNWY2Iiwid2VicGFjazovL0hhTWVldHovLi4vLi4vc3JjL2Nvb3JkaW5hdG9yL2Nvbm5lY3Rpb24vc2lnbmluZy50cz85ZWMzIiwid2VicGFjazovL0hhTWVldHovLi4vLi4vc3JjL2Nvb3JkaW5hdG9yL2Nvbm5lY3Rpb24vdG9rZW5fbWFuYWdlci50cz8wM2UyIiwid2VicGFjazovL0hhTWVldHovLi4vLi4vc3JjL2Nvb3JkaW5hdG9yL2Nvbm5lY3Rpb24vZXJyb3JzLnRzPzIxMjYiLCJ3ZWJwYWNrOi8vSGFNZWV0ei8uLi8uLi9zcmMvY29vcmRpbmF0b3IvY29ubmVjdGlvbi9jb25uZWN0aW9uX2ZhbGxiYWNrLnRzPzU0YzAiLCJ3ZWJwYWNrOi8vSGFNZWV0ei8uLi8uLi9zcmMvY29vcmRpbmF0b3IvY29ubmVjdGlvbi9sb2NhdGlvbi50cz9jZjA5Iiwid2VicGFjazovL0hhTWVldHovLi4vLi4vc3JjL2Nvb3JkaW5hdG9yL2Nvbm5lY3Rpb24vY2xpZW50LnRzPzNmMWYiLCJ3ZWJwYWNrOi8vSGFNZWV0ei8uLi8uLi9zcmMvU3RyZWFtVmlkZW9DbGllbnQudHM/MTQ0NSIsIndlYnBhY2s6Ly9IYU1lZXR6Ly4uLy4uL3NyYy9TdHJlYW1WaWRlb1NlcnZlckNsaWVudC50cz85MzkyIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIHRzbGludDpkaXNhYmxlICovXG4vKiBlc2xpbnQtZGlzYWJsZSAqL1xuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBBUElFcnJvclxuICovXG5leHBvcnQgaW50ZXJmYWNlIEFQSUVycm9yIHtcbiAgLyoqXG4gICAqIFJlc3BvbnNlIEhUVFAgc3RhdHVzIGNvZGVcbiAgICogQHR5cGUge251bWJlcn1cbiAgICogQG1lbWJlcm9mIEFQSUVycm9yXG4gICAqL1xuICBTdGF0dXNDb2RlOiBudW1iZXI7XG4gIC8qKlxuICAgKiBBUEkgZXJyb3IgY29kZVxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKiBAbWVtYmVyb2YgQVBJRXJyb3JcbiAgICovXG4gIGNvZGU6IG51bWJlcjtcbiAgLyoqXG4gICAqIEFkZGl0aW9uYWwgZXJyb3Itc3BlY2lmaWMgaW5mb3JtYXRpb25cbiAgICogQHR5cGUge0FycmF5PG51bWJlcj59XG4gICAqIEBtZW1iZXJvZiBBUElFcnJvclxuICAgKi9cbiAgZGV0YWlsczogQXJyYXk8bnVtYmVyPjtcbiAgLyoqXG4gICAqIFJlcXVlc3QgZHVyYXRpb25cbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIEFQSUVycm9yXG4gICAqL1xuICBkdXJhdGlvbjogc3RyaW5nO1xuICAvKipcbiAgICogQWRkaXRpb25hbCBlcnJvciBpbmZvXG4gICAqIEB0eXBlIHt7IFtrZXk6IHN0cmluZ106IHN0cmluZzsgfX1cbiAgICogQG1lbWJlcm9mIEFQSUVycm9yXG4gICAqL1xuICBleGNlcHRpb25fZmllbGRzPzogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfTtcbiAgLyoqXG4gICAqIE1lc3NhZ2UgZGVzY3JpYmluZyBhbiBlcnJvclxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQVBJRXJyb3JcbiAgICovXG4gIG1lc3NhZ2U6IHN0cmluZztcbiAgLyoqXG4gICAqIFVSTCB3aXRoIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIEFQSUVycm9yXG4gICAqL1xuICBtb3JlX2luZm86IHN0cmluZztcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgQVBOU1xuICovXG5leHBvcnQgaW50ZXJmYWNlIEFQTlMge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIEFQTlNcbiAgICovXG4gIGJvZHk6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBBUE5TXG4gICAqL1xuICB0aXRsZTogc3RyaW5nO1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBBUE5TUmVxdWVzdFxuICovXG5leHBvcnQgaW50ZXJmYWNlIEFQTlNSZXF1ZXN0IHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBBUE5TUmVxdWVzdFxuICAgKi9cbiAgYm9keT86IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBBUE5TUmVxdWVzdFxuICAgKi9cbiAgdGl0bGU/OiBzdHJpbmc7XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIEFjY2VwdENhbGxSZXNwb25zZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIEFjY2VwdENhbGxSZXNwb25zZSB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQWNjZXB0Q2FsbFJlc3BvbnNlXG4gICAqL1xuICBkdXJhdGlvbjogc3RyaW5nO1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBBdWRpb1NldHRpbmdzXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQXVkaW9TZXR0aW5ncyB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIEF1ZGlvU2V0dGluZ3NcbiAgICovXG4gIGFjY2Vzc19yZXF1ZXN0X2VuYWJsZWQ6IGJvb2xlYW47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQXVkaW9TZXR0aW5nc1xuICAgKi9cbiAgZGVmYXVsdF9kZXZpY2U6IEF1ZGlvU2V0dGluZ3NEZWZhdWx0RGV2aWNlRW51bTtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAbWVtYmVyb2YgQXVkaW9TZXR0aW5nc1xuICAgKi9cbiAgbWljX2RlZmF1bHRfb246IGJvb2xlYW47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIEF1ZGlvU2V0dGluZ3NcbiAgICovXG4gIG9wdXNfZHR4X2VuYWJsZWQ6IGJvb2xlYW47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIEF1ZGlvU2V0dGluZ3NcbiAgICovXG4gIHJlZHVuZGFudF9jb2RpbmdfZW5hYmxlZDogYm9vbGVhbjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAbWVtYmVyb2YgQXVkaW9TZXR0aW5nc1xuICAgKi9cbiAgc3BlYWtlcl9kZWZhdWx0X29uOiBib29sZWFuO1xufVxuXG4vKipcbiAqIEBleHBvcnRcbiAqL1xuZXhwb3J0IGNvbnN0IEF1ZGlvU2V0dGluZ3NEZWZhdWx0RGV2aWNlRW51bSA9IHtcbiAgU1BFQUtFUjogJ3NwZWFrZXInLFxuICBFQVJQSUVDRTogJ2VhcnBpZWNlJyxcbn0gYXMgY29uc3Q7XG5leHBvcnQgdHlwZSBBdWRpb1NldHRpbmdzRGVmYXVsdERldmljZUVudW0gPVxuICAodHlwZW9mIEF1ZGlvU2V0dGluZ3NEZWZhdWx0RGV2aWNlRW51bSlba2V5b2YgdHlwZW9mIEF1ZGlvU2V0dGluZ3NEZWZhdWx0RGV2aWNlRW51bV07XG5cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgQXVkaW9TZXR0aW5nc1JlcXVlc3RcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBBdWRpb1NldHRpbmdzUmVxdWVzdCB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIEF1ZGlvU2V0dGluZ3NSZXF1ZXN0XG4gICAqL1xuICBhY2Nlc3NfcmVxdWVzdF9lbmFibGVkPzogYm9vbGVhbjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBBdWRpb1NldHRpbmdzUmVxdWVzdFxuICAgKi9cbiAgZGVmYXVsdF9kZXZpY2U6IEF1ZGlvU2V0dGluZ3NSZXF1ZXN0RGVmYXVsdERldmljZUVudW07XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIEF1ZGlvU2V0dGluZ3NSZXF1ZXN0XG4gICAqL1xuICBtaWNfZGVmYXVsdF9vbj86IGJvb2xlYW47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIEF1ZGlvU2V0dGluZ3NSZXF1ZXN0XG4gICAqL1xuICBvcHVzX2R0eF9lbmFibGVkPzogYm9vbGVhbjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAbWVtYmVyb2YgQXVkaW9TZXR0aW5nc1JlcXVlc3RcbiAgICovXG4gIHJlZHVuZGFudF9jb2RpbmdfZW5hYmxlZD86IGJvb2xlYW47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIEF1ZGlvU2V0dGluZ3NSZXF1ZXN0XG4gICAqL1xuICBzcGVha2VyX2RlZmF1bHRfb24/OiBib29sZWFuO1xufVxuXG4vKipcbiAqIEBleHBvcnRcbiAqL1xuZXhwb3J0IGNvbnN0IEF1ZGlvU2V0dGluZ3NSZXF1ZXN0RGVmYXVsdERldmljZUVudW0gPSB7XG4gIFNQRUFLRVI6ICdzcGVha2VyJyxcbiAgRUFSUElFQ0U6ICdlYXJwaWVjZScsXG59IGFzIGNvbnN0O1xuZXhwb3J0IHR5cGUgQXVkaW9TZXR0aW5nc1JlcXVlc3REZWZhdWx0RGV2aWNlRW51bSA9XG4gICh0eXBlb2YgQXVkaW9TZXR0aW5nc1JlcXVlc3REZWZhdWx0RGV2aWNlRW51bSlba2V5b2YgdHlwZW9mIEF1ZGlvU2V0dGluZ3NSZXF1ZXN0RGVmYXVsdERldmljZUVudW1dO1xuXG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIEJhY2tzdGFnZVNldHRpbmdzXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQmFja3N0YWdlU2V0dGluZ3Mge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBCYWNrc3RhZ2VTZXR0aW5nc1xuICAgKi9cbiAgZW5hYmxlZDogYm9vbGVhbjtcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgQmFja3N0YWdlU2V0dGluZ3NSZXF1ZXN0XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQmFja3N0YWdlU2V0dGluZ3NSZXF1ZXN0IHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAbWVtYmVyb2YgQmFja3N0YWdlU2V0dGluZ3NSZXF1ZXN0XG4gICAqL1xuICBlbmFibGVkPzogYm9vbGVhbjtcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgQmxvY2tVc2VyUmVxdWVzdFxuICovXG5leHBvcnQgaW50ZXJmYWNlIEJsb2NrVXNlclJlcXVlc3Qge1xuICAvKipcbiAgICogdGhlIHVzZXIgdG8gYmxvY2tcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIEJsb2NrVXNlclJlcXVlc3RcbiAgICovXG4gIHVzZXJfaWQ6IHN0cmluZztcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgQmxvY2tVc2VyUmVzcG9uc2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBCbG9ja1VzZXJSZXNwb25zZSB7XG4gIC8qKlxuICAgKiBEdXJhdGlvbiBvZiB0aGUgcmVxdWVzdCBpbiBodW1hbi1yZWFkYWJsZSBmb3JtYXRcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIEJsb2NrVXNlclJlc3BvbnNlXG4gICAqL1xuICBkdXJhdGlvbjogc3RyaW5nO1xufVxuLyoqXG4gKiBUaGlzIGV2ZW50IGlzIHNlbnQgdG8gY2FsbCBwYXJ0aWNpcGFudHMgdG8gbm90aWZ5IHdoZW4gYSB1c2VyIGlzIGJsb2NrZWQgb24gYSBjYWxsLCBjbGllbnRzIGNhbiB1c2UgdGhpcyBldmVudCB0byBzaG93IGEgbm90aWZpY2F0aW9uLlxuICogSWYgdGhlIHVzZXIgaXMgdGhlIGN1cnJlbnQgdXNlciwgdGhlIGNsaWVudCBzaG91bGQgbGVhdmUgdGhlIGNhbGwgc2NyZWVuIGFzIHdlbGxcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgQmxvY2tlZFVzZXJFdmVudFxuICovXG5leHBvcnQgaW50ZXJmYWNlIEJsb2NrZWRVc2VyRXZlbnQge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge1VzZXJSZXNwb25zZX1cbiAgICogQG1lbWJlcm9mIEJsb2NrZWRVc2VyRXZlbnRcbiAgICovXG4gIGJsb2NrZWRfYnlfdXNlcj86IFVzZXJSZXNwb25zZTtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBCbG9ja2VkVXNlckV2ZW50XG4gICAqL1xuICBjYWxsX2NpZDogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIEJsb2NrZWRVc2VyRXZlbnRcbiAgICovXG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbiAgLyoqXG4gICAqIFRoZSB0eXBlIG9mIGV2ZW50OiBcImNhbGwuYmxvY2tlZF91c2VyXCIgaW4gdGhpcyBjYXNlXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBCbG9ja2VkVXNlckV2ZW50XG4gICAqL1xuICB0eXBlOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7VXNlclJlc3BvbnNlfVxuICAgKiBAbWVtYmVyb2YgQmxvY2tlZFVzZXJFdmVudFxuICAgKi9cbiAgdXNlcjogVXNlclJlc3BvbnNlO1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBCcm9hZGNhc3RTZXR0aW5nc1JlcXVlc3RcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBCcm9hZGNhc3RTZXR0aW5nc1JlcXVlc3Qge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBCcm9hZGNhc3RTZXR0aW5nc1JlcXVlc3RcbiAgICovXG4gIGVuYWJsZWQ/OiBib29sZWFuO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0hMU1NldHRpbmdzUmVxdWVzdH1cbiAgICogQG1lbWJlcm9mIEJyb2FkY2FzdFNldHRpbmdzUmVxdWVzdFxuICAgKi9cbiAgaGxzPzogSExTU2V0dGluZ3NSZXF1ZXN0O1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBCcm9hZGNhc3RTZXR0aW5nc1Jlc3BvbnNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQnJvYWRjYXN0U2V0dGluZ3NSZXNwb25zZSB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIEJyb2FkY2FzdFNldHRpbmdzUmVzcG9uc2VcbiAgICovXG4gIGVuYWJsZWQ6IGJvb2xlYW47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7SExTU2V0dGluZ3NSZXNwb25zZX1cbiAgICogQG1lbWJlcm9mIEJyb2FkY2FzdFNldHRpbmdzUmVzcG9uc2VcbiAgICovXG4gIGhsczogSExTU2V0dGluZ3NSZXNwb25zZTtcbn1cbi8qKlxuICogVGhpcyBldmVudCBpcyBzZW50IHdoZW4gYSB1c2VyIGFjY2VwdHMgYSBub3RpZmljYXRpb24gdG8gam9pbiBhIGNhbGwuXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIENhbGxBY2NlcHRlZEV2ZW50XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ2FsbEFjY2VwdGVkRXZlbnQge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0NhbGxSZXNwb25zZX1cbiAgICogQG1lbWJlcm9mIENhbGxBY2NlcHRlZEV2ZW50XG4gICAqL1xuICBjYWxsOiBDYWxsUmVzcG9uc2U7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbEFjY2VwdGVkRXZlbnRcbiAgICovXG4gIGNhbGxfY2lkOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbEFjY2VwdGVkRXZlbnRcbiAgICovXG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbiAgLyoqXG4gICAqIFRoZSB0eXBlIG9mIGV2ZW50OiBcImNhbGwuYWNjZXB0ZWRcIiBpbiB0aGlzIGNhc2VcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxBY2NlcHRlZEV2ZW50XG4gICAqL1xuICB0eXBlOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7VXNlclJlc3BvbnNlfVxuICAgKiBAbWVtYmVyb2YgQ2FsbEFjY2VwdGVkRXZlbnRcbiAgICovXG4gIHVzZXI6IFVzZXJSZXNwb25zZTtcbn1cbi8qKlxuICogVGhpcyBldmVudCBpcyBzZW50IHdoZW4gYSBjYWxsIGlzIGNyZWF0ZWQuIENsaWVudHMgcmVjZWl2aW5nIHRoaXMgZXZlbnQgc2hvdWxkIGNoZWNrIGlmIHRoZSByaW5naW5nXG4gKiBmaWVsZCBpcyBzZXQgdG8gdHJ1ZSBhbmQgaWYgc28sIHNob3cgdGhlIGNhbGwgc2NyZWVuXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIENhbGxDcmVhdGVkRXZlbnRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDYWxsQ3JlYXRlZEV2ZW50IHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtDYWxsUmVzcG9uc2V9XG4gICAqIEBtZW1iZXJvZiBDYWxsQ3JlYXRlZEV2ZW50XG4gICAqL1xuICBjYWxsOiBDYWxsUmVzcG9uc2U7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbENyZWF0ZWRFdmVudFxuICAgKi9cbiAgY2FsbF9jaWQ6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsQ3JlYXRlZEV2ZW50XG4gICAqL1xuICBjcmVhdGVkX2F0OiBzdHJpbmc7XG4gIC8qKlxuICAgKiB0aGUgbWVtYmVycyBhZGRlZCB0byB0aGlzIGNhbGxcbiAgICogQHR5cGUge0FycmF5PE1lbWJlclJlc3BvbnNlPn1cbiAgICogQG1lbWJlcm9mIENhbGxDcmVhdGVkRXZlbnRcbiAgICovXG4gIG1lbWJlcnM6IEFycmF5PE1lbWJlclJlc3BvbnNlPjtcbiAgLyoqXG4gICAqIFRoZSB0eXBlIG9mIGV2ZW50OiBcImNhbGwuY3JlYXRlZFwiIGluIHRoaXMgY2FzZVxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbENyZWF0ZWRFdmVudFxuICAgKi9cbiAgdHlwZTogc3RyaW5nO1xufVxuLyoqXG4gKiBUaGlzIGV2ZW50IGlzIHNlbnQgd2hlbiBhIGNhbGwgaXMgbWFyayBhcyBlbmRlZCBmb3IgYWxsIGl0cyBwYXJ0aWNpcGFudHMuIENsaWVudHMgcmVjZWl2aW5nIHRoaXMgZXZlbnQgc2hvdWxkIGxlYXZlIHRoZSBjYWxsIHNjcmVlblxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBDYWxsRW5kZWRFdmVudFxuICovXG5leHBvcnQgaW50ZXJmYWNlIENhbGxFbmRlZEV2ZW50IHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtDYWxsUmVzcG9uc2V9XG4gICAqIEBtZW1iZXJvZiBDYWxsRW5kZWRFdmVudFxuICAgKi9cbiAgY2FsbDogQ2FsbFJlc3BvbnNlO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxFbmRlZEV2ZW50XG4gICAqL1xuICBjYWxsX2NpZDogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxFbmRlZEV2ZW50XG4gICAqL1xuICBjcmVhdGVkX2F0OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBUaGUgdHlwZSBvZiBldmVudDogXCJjYWxsLmVuZGVkXCIgaW4gdGhpcyBjYXNlXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsRW5kZWRFdmVudFxuICAgKi9cbiAgdHlwZTogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge1VzZXJSZXNwb25zZX1cbiAgICogQG1lbWJlcm9mIENhbGxFbmRlZEV2ZW50XG4gICAqL1xuICB1c2VyPzogVXNlclJlc3BvbnNlO1xufVxuLyoqXG4gKiBUaGlzIGV2ZW50IGlzIHNlbnQgd2hlbiBITFMgYnJvYWRjYXN0aW5nIGhhcyBmYWlsZWRcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgQ2FsbEhMU0Jyb2FkY2FzdGluZ0ZhaWxlZEV2ZW50XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ2FsbEhMU0Jyb2FkY2FzdGluZ0ZhaWxlZEV2ZW50IHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsSExTQnJvYWRjYXN0aW5nRmFpbGVkRXZlbnRcbiAgICovXG4gIGNhbGxfY2lkOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbEhMU0Jyb2FkY2FzdGluZ0ZhaWxlZEV2ZW50XG4gICAqL1xuICBjcmVhdGVkX2F0OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBUaGUgdHlwZSBvZiBldmVudDogXCJjYWxsLmhsc19icm9hZGNhc3RpbmdfZmFpbGVkXCIgaW4gdGhpcyBjYXNlXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsSExTQnJvYWRjYXN0aW5nRmFpbGVkRXZlbnRcbiAgICovXG4gIHR5cGU6IHN0cmluZztcbn1cbi8qKlxuICogVGhpcyBldmVudCBpcyBzZW50IHdoZW4gSExTIGJyb2FkY2FzdGluZyBoYXMgc3RhcnRlZFxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBDYWxsSExTQnJvYWRjYXN0aW5nU3RhcnRlZEV2ZW50XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ2FsbEhMU0Jyb2FkY2FzdGluZ1N0YXJ0ZWRFdmVudCB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbEhMU0Jyb2FkY2FzdGluZ1N0YXJ0ZWRFdmVudFxuICAgKi9cbiAgY2FsbF9jaWQ6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsSExTQnJvYWRjYXN0aW5nU3RhcnRlZEV2ZW50XG4gICAqL1xuICBjcmVhdGVkX2F0OiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbEhMU0Jyb2FkY2FzdGluZ1N0YXJ0ZWRFdmVudFxuICAgKi9cbiAgaGxzX3BsYXlsaXN0X3VybDogc3RyaW5nO1xuICAvKipcbiAgICogVGhlIHR5cGUgb2YgZXZlbnQ6IFwiY2FsbC5obHNfYnJvYWRjYXN0aW5nX3N0YXJ0ZWRcIiBpbiB0aGlzIGNhc2VcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxITFNCcm9hZGNhc3RpbmdTdGFydGVkRXZlbnRcbiAgICovXG4gIHR5cGU6IHN0cmluZztcbn1cbi8qKlxuICogVGhpcyBldmVudCBpcyBzZW50IHdoZW4gSExTIGJyb2FkY2FzdGluZyBoYXMgc3RvcHBlZFxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBDYWxsSExTQnJvYWRjYXN0aW5nU3RvcHBlZEV2ZW50XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ2FsbEhMU0Jyb2FkY2FzdGluZ1N0b3BwZWRFdmVudCB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbEhMU0Jyb2FkY2FzdGluZ1N0b3BwZWRFdmVudFxuICAgKi9cbiAgY2FsbF9jaWQ6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsSExTQnJvYWRjYXN0aW5nU3RvcHBlZEV2ZW50XG4gICAqL1xuICBjcmVhdGVkX2F0OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBUaGUgdHlwZSBvZiBldmVudDogXCJjYWxsLmhsc19icm9hZGNhc3Rpbmdfc3RvcHBlZFwiIGluIHRoaXMgY2FzZVxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbEhMU0Jyb2FkY2FzdGluZ1N0b3BwZWRFdmVudFxuICAgKi9cbiAgdHlwZTogc3RyaW5nO1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBDYWxsSW5ncmVzc1Jlc3BvbnNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ2FsbEluZ3Jlc3NSZXNwb25zZSB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7UlRNUEluZ3Jlc3N9XG4gICAqIEBtZW1iZXJvZiBDYWxsSW5ncmVzc1Jlc3BvbnNlXG4gICAqL1xuICBydG1wOiBSVE1QSW5ncmVzcztcbn1cbi8qKlxuICogVGhpcyBldmVudCBpcyBzZW50IHdoZW4gYSBjYWxsIGlzIHN0YXJ0ZWQuIENsaWVudHMgcmVjZWl2aW5nIHRoaXMgZXZlbnQgc2hvdWxkIHN0YXJ0IHRoZSBjYWxsLlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBDYWxsTGl2ZVN0YXJ0ZWRFdmVudFxuICovXG5leHBvcnQgaW50ZXJmYWNlIENhbGxMaXZlU3RhcnRlZEV2ZW50IHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtDYWxsUmVzcG9uc2V9XG4gICAqIEBtZW1iZXJvZiBDYWxsTGl2ZVN0YXJ0ZWRFdmVudFxuICAgKi9cbiAgY2FsbDogQ2FsbFJlc3BvbnNlO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxMaXZlU3RhcnRlZEV2ZW50XG4gICAqL1xuICBjYWxsX2NpZDogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxMaXZlU3RhcnRlZEV2ZW50XG4gICAqL1xuICBjcmVhdGVkX2F0OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBUaGUgdHlwZSBvZiBldmVudDogXCJjYWxsLmxpdmVfc3RhcnRlZFwiIGluIHRoaXMgY2FzZVxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbExpdmVTdGFydGVkRXZlbnRcbiAgICovXG4gIHR5cGU6IHN0cmluZztcbn1cbi8qKlxuICogVGhpcyBldmVudCBpcyBzZW50IHdoZW4gb25lIG9yIG1vcmUgbWVtYmVycyBhcmUgYWRkZWQgdG8gYSBjYWxsXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIENhbGxNZW1iZXJBZGRlZEV2ZW50XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ2FsbE1lbWJlckFkZGVkRXZlbnQge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0NhbGxSZXNwb25zZX1cbiAgICogQG1lbWJlcm9mIENhbGxNZW1iZXJBZGRlZEV2ZW50XG4gICAqL1xuICBjYWxsOiBDYWxsUmVzcG9uc2U7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbE1lbWJlckFkZGVkRXZlbnRcbiAgICovXG4gIGNhbGxfY2lkOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbE1lbWJlckFkZGVkRXZlbnRcbiAgICovXG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbiAgLyoqXG4gICAqIHRoZSBtZW1iZXJzIGFkZGVkIHRvIHRoaXMgY2FsbFxuICAgKiBAdHlwZSB7QXJyYXk8TWVtYmVyUmVzcG9uc2U+fVxuICAgKiBAbWVtYmVyb2YgQ2FsbE1lbWJlckFkZGVkRXZlbnRcbiAgICovXG4gIG1lbWJlcnM6IEFycmF5PE1lbWJlclJlc3BvbnNlPjtcbiAgLyoqXG4gICAqIFRoZSB0eXBlIG9mIGV2ZW50OiBcImNhbGwubWVtYmVyX2FkZGVkXCIgaW4gdGhpcyBjYXNlXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsTWVtYmVyQWRkZWRFdmVudFxuICAgKi9cbiAgdHlwZTogc3RyaW5nO1xufVxuLyoqXG4gKiBUaGlzIGV2ZW50IGlzIHNlbnQgd2hlbiBvbmUgb3IgbW9yZSBtZW1iZXJzIGFyZSByZW1vdmVkIGZyb20gYSBjYWxsXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIENhbGxNZW1iZXJSZW1vdmVkRXZlbnRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDYWxsTWVtYmVyUmVtb3ZlZEV2ZW50IHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtDYWxsUmVzcG9uc2V9XG4gICAqIEBtZW1iZXJvZiBDYWxsTWVtYmVyUmVtb3ZlZEV2ZW50XG4gICAqL1xuICBjYWxsOiBDYWxsUmVzcG9uc2U7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbE1lbWJlclJlbW92ZWRFdmVudFxuICAgKi9cbiAgY2FsbF9jaWQ6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsTWVtYmVyUmVtb3ZlZEV2ZW50XG4gICAqL1xuICBjcmVhdGVkX2F0OiBzdHJpbmc7XG4gIC8qKlxuICAgKiB0aGUgbGlzdCBvZiBtZW1iZXIgSURzIHJlbW92ZWQgZnJvbSB0aGUgY2FsbFxuICAgKiBAdHlwZSB7QXJyYXk8c3RyaW5nPn1cbiAgICogQG1lbWJlcm9mIENhbGxNZW1iZXJSZW1vdmVkRXZlbnRcbiAgICovXG4gIG1lbWJlcnM6IEFycmF5PHN0cmluZz47XG4gIC8qKlxuICAgKiBUaGUgdHlwZSBvZiBldmVudDogXCJjYWxsLm1lbWJlcl9yZW1vdmVkXCIgaW4gdGhpcyBjYXNlXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsTWVtYmVyUmVtb3ZlZEV2ZW50XG4gICAqL1xuICB0eXBlOiBzdHJpbmc7XG59XG4vKipcbiAqIFRoaXMgZXZlbnQgaXMgc2VudCB3aGVuIG9uZSBvciBtb3JlIG1lbWJlcnMgYXJlIHVwZGF0ZWRcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgQ2FsbE1lbWJlclVwZGF0ZWRFdmVudFxuICovXG5leHBvcnQgaW50ZXJmYWNlIENhbGxNZW1iZXJVcGRhdGVkRXZlbnQge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0NhbGxSZXNwb25zZX1cbiAgICogQG1lbWJlcm9mIENhbGxNZW1iZXJVcGRhdGVkRXZlbnRcbiAgICovXG4gIGNhbGw6IENhbGxSZXNwb25zZTtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsTWVtYmVyVXBkYXRlZEV2ZW50XG4gICAqL1xuICBjYWxsX2NpZDogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxNZW1iZXJVcGRhdGVkRXZlbnRcbiAgICovXG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbiAgLyoqXG4gICAqIFRoZSBsaXN0IG9mIG1lbWJlcnMgdGhhdCB3ZXJlIHVwZGF0ZWRcbiAgICogQHR5cGUge0FycmF5PE1lbWJlclJlc3BvbnNlPn1cbiAgICogQG1lbWJlcm9mIENhbGxNZW1iZXJVcGRhdGVkRXZlbnRcbiAgICovXG4gIG1lbWJlcnM6IEFycmF5PE1lbWJlclJlc3BvbnNlPjtcbiAgLyoqXG4gICAqIFRoZSB0eXBlIG9mIGV2ZW50OiBcImNhbGwubWVtYmVyX3VwZGF0ZWRcIiBpbiB0aGlzIGNhc2VcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxNZW1iZXJVcGRhdGVkRXZlbnRcbiAgICovXG4gIHR5cGU6IHN0cmluZztcbn1cbi8qKlxuICogVGhpcyBldmVudCBpcyBzZW50IHdoZW4gb25lIG9yIG1vcmUgbWVtYmVycyBnZXQgaXRzIHJvbGUgdXBkYXRlZFxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBDYWxsTWVtYmVyVXBkYXRlZFBlcm1pc3Npb25FdmVudFxuICovXG5leHBvcnQgaW50ZXJmYWNlIENhbGxNZW1iZXJVcGRhdGVkUGVybWlzc2lvbkV2ZW50IHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtDYWxsUmVzcG9uc2V9XG4gICAqIEBtZW1iZXJvZiBDYWxsTWVtYmVyVXBkYXRlZFBlcm1pc3Npb25FdmVudFxuICAgKi9cbiAgY2FsbDogQ2FsbFJlc3BvbnNlO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxNZW1iZXJVcGRhdGVkUGVybWlzc2lvbkV2ZW50XG4gICAqL1xuICBjYWxsX2NpZDogc3RyaW5nO1xuICAvKipcbiAgICogVGhlIGNhcGFiaWxpdGllcyBieSByb2xlIGZvciB0aGlzIGNhbGxcbiAgICogQHR5cGUge3sgW2tleTogc3RyaW5nXTogQXJyYXk8c3RyaW5nPjsgfX1cbiAgICogQG1lbWJlcm9mIENhbGxNZW1iZXJVcGRhdGVkUGVybWlzc2lvbkV2ZW50XG4gICAqL1xuICBjYXBhYmlsaXRpZXNfYnlfcm9sZTogeyBba2V5OiBzdHJpbmddOiBBcnJheTxzdHJpbmc+IH07XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbE1lbWJlclVwZGF0ZWRQZXJtaXNzaW9uRXZlbnRcbiAgICovXG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbiAgLyoqXG4gICAqIFRoZSBsaXN0IG9mIG1lbWJlcnMgdGhhdCB3ZXJlIHVwZGF0ZWRcbiAgICogQHR5cGUge0FycmF5PE1lbWJlclJlc3BvbnNlPn1cbiAgICogQG1lbWJlcm9mIENhbGxNZW1iZXJVcGRhdGVkUGVybWlzc2lvbkV2ZW50XG4gICAqL1xuICBtZW1iZXJzOiBBcnJheTxNZW1iZXJSZXNwb25zZT47XG4gIC8qKlxuICAgKiBUaGUgdHlwZSBvZiBldmVudDogXCJjYWxsLm1lbWJlcl9hZGRlZFwiIGluIHRoaXMgY2FzZVxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbE1lbWJlclVwZGF0ZWRQZXJtaXNzaW9uRXZlbnRcbiAgICovXG4gIHR5cGU6IHN0cmluZztcbn1cbi8qKlxuICogVGhpcyBldmVudCBpcyBzZW50IHRvIGFsbCBjYWxsIG1lbWJlcnMgdG8gbm90aWZ5IHRoZXkgYXJlIGdldHRpbmcgY2FsbGVkXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIENhbGxOb3RpZmljYXRpb25FdmVudFxuICovXG5leHBvcnQgaW50ZXJmYWNlIENhbGxOb3RpZmljYXRpb25FdmVudCB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Q2FsbFJlc3BvbnNlfVxuICAgKiBAbWVtYmVyb2YgQ2FsbE5vdGlmaWNhdGlvbkV2ZW50XG4gICAqL1xuICBjYWxsOiBDYWxsUmVzcG9uc2U7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbE5vdGlmaWNhdGlvbkV2ZW50XG4gICAqL1xuICBjYWxsX2NpZDogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxOb3RpZmljYXRpb25FdmVudFxuICAgKi9cbiAgY3JlYXRlZF9hdDogc3RyaW5nO1xuICAvKipcbiAgICogQ2FsbCBtZW1iZXJzXG4gICAqIEB0eXBlIHtBcnJheTxNZW1iZXJSZXNwb25zZT59XG4gICAqIEBtZW1iZXJvZiBDYWxsTm90aWZpY2F0aW9uRXZlbnRcbiAgICovXG4gIG1lbWJlcnM6IEFycmF5PE1lbWJlclJlc3BvbnNlPjtcbiAgLyoqXG4gICAqIENhbGwgc2Vzc2lvbiBJRFxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbE5vdGlmaWNhdGlvbkV2ZW50XG4gICAqL1xuICBzZXNzaW9uX2lkOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBUaGUgdHlwZSBvZiBldmVudDogXCJjYWxsLm5vdGlmaWNhdGlvblwiIGluIHRoaXMgY2FzZVxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbE5vdGlmaWNhdGlvbkV2ZW50XG4gICAqL1xuICB0eXBlOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7VXNlclJlc3BvbnNlfVxuICAgKiBAbWVtYmVyb2YgQ2FsbE5vdGlmaWNhdGlvbkV2ZW50XG4gICAqL1xuICB1c2VyOiBVc2VyUmVzcG9uc2U7XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIENhbGxQYXJ0aWNpcGFudFJlc3BvbnNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ2FsbFBhcnRpY2lwYW50UmVzcG9uc2Uge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxQYXJ0aWNpcGFudFJlc3BvbnNlXG4gICAqL1xuICBqb2luZWRfYXQ6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsUGFydGljaXBhbnRSZXNwb25zZVxuICAgKi9cbiAgcm9sZTogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge1VzZXJSZXNwb25zZX1cbiAgICogQG1lbWJlcm9mIENhbGxQYXJ0aWNpcGFudFJlc3BvbnNlXG4gICAqL1xuICB1c2VyOiBVc2VyUmVzcG9uc2U7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFBhcnRpY2lwYW50UmVzcG9uc2VcbiAgICovXG4gIHVzZXJfc2Vzc2lvbl9pZDogc3RyaW5nO1xufVxuLyoqXG4gKiBUaGlzIGV2ZW50IGlzIHNlbnQgd2hlbiBhIHJlYWN0aW9uIGlzIHNlbnQgaW4gYSBjYWxsLCBjbGllbnRzIHNob3VsZCB1c2UgdGhpcyB0byBzaG93IHRoZSByZWFjdGlvbiBpbiB0aGUgY2FsbCBzY3JlZW5cbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgQ2FsbFJlYWN0aW9uRXZlbnRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDYWxsUmVhY3Rpb25FdmVudCB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFJlYWN0aW9uRXZlbnRcbiAgICovXG4gIGNhbGxfY2lkOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFJlYWN0aW9uRXZlbnRcbiAgICovXG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtSZWFjdGlvblJlc3BvbnNlfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFJlYWN0aW9uRXZlbnRcbiAgICovXG4gIHJlYWN0aW9uOiBSZWFjdGlvblJlc3BvbnNlO1xuICAvKipcbiAgICogVGhlIHR5cGUgb2YgZXZlbnQ6IFwiY2FsbC5yZWFjdGlvbl9uZXdcIiBpbiB0aGlzIGNhc2VcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxSZWFjdGlvbkV2ZW50XG4gICAqL1xuICB0eXBlOiBzdHJpbmc7XG59XG4vKipcbiAqIENhbGxSZWNvcmRpbmcgcmVwcmVzZW50cyBhIHJlY29yZGluZyBvZiBhIGNhbGwuXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIENhbGxSZWNvcmRpbmdcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDYWxsUmVjb3JkaW5nIHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsUmVjb3JkaW5nXG4gICAqL1xuICBlbmRfdGltZTogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxSZWNvcmRpbmdcbiAgICovXG4gIGZpbGVuYW1lOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFJlY29yZGluZ1xuICAgKi9cbiAgc3RhcnRfdGltZTogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxSZWNvcmRpbmdcbiAgICovXG4gIHVybDogc3RyaW5nO1xufVxuLyoqXG4gKiBUaGlzIGV2ZW50IGlzIHNlbnQgd2hlbiBjYWxsIHJlY29yZGluZyBoYXMgZmFpbGVkXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIENhbGxSZWNvcmRpbmdGYWlsZWRFdmVudFxuICovXG5leHBvcnQgaW50ZXJmYWNlIENhbGxSZWNvcmRpbmdGYWlsZWRFdmVudCB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFJlY29yZGluZ0ZhaWxlZEV2ZW50XG4gICAqL1xuICBjYWxsX2NpZDogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxSZWNvcmRpbmdGYWlsZWRFdmVudFxuICAgKi9cbiAgY3JlYXRlZF9hdDogc3RyaW5nO1xuICAvKipcbiAgICogVGhlIHR5cGUgb2YgZXZlbnQ6IFwiY2FsbC5yZWNvcmRpbmdfZmFpbGVkXCIgaW4gdGhpcyBjYXNlXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsUmVjb3JkaW5nRmFpbGVkRXZlbnRcbiAgICovXG4gIHR5cGU6IHN0cmluZztcbn1cbi8qKlxuICogVGhpcyBldmVudCBpcyBzZW50IHdoZW4gY2FsbCByZWNvcmRpbmcgaXMgcmVhZHlcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgQ2FsbFJlY29yZGluZ1JlYWR5RXZlbnRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDYWxsUmVjb3JkaW5nUmVhZHlFdmVudCB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFJlY29yZGluZ1JlYWR5RXZlbnRcbiAgICovXG4gIGNhbGxfY2lkOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Q2FsbFJlY29yZGluZ31cbiAgICogQG1lbWJlcm9mIENhbGxSZWNvcmRpbmdSZWFkeUV2ZW50XG4gICAqL1xuICBjYWxsX3JlY29yZGluZzogQ2FsbFJlY29yZGluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsUmVjb3JkaW5nUmVhZHlFdmVudFxuICAgKi9cbiAgY3JlYXRlZF9hdDogc3RyaW5nO1xuICAvKipcbiAgICogVGhlIHR5cGUgb2YgZXZlbnQ6IFwiY2FsbC5yZWNvcmRpbmdfcmVhZHlcIiBpbiB0aGlzIGNhc2VcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxSZWNvcmRpbmdSZWFkeUV2ZW50XG4gICAqL1xuICB0eXBlOiBzdHJpbmc7XG59XG4vKipcbiAqIFRoaXMgZXZlbnQgaXMgc2VudCB3aGVuIGNhbGwgcmVjb3JkaW5nIGhhcyBzdGFydGVkXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIENhbGxSZWNvcmRpbmdTdGFydGVkRXZlbnRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDYWxsUmVjb3JkaW5nU3RhcnRlZEV2ZW50IHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsUmVjb3JkaW5nU3RhcnRlZEV2ZW50XG4gICAqL1xuICBjYWxsX2NpZDogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxSZWNvcmRpbmdTdGFydGVkRXZlbnRcbiAgICovXG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbiAgLyoqXG4gICAqIFRoZSB0eXBlIG9mIGV2ZW50OiBcImNhbGwucmVjb3JkaW5nX3N0YXJ0ZWRcIiBpbiB0aGlzIGNhc2VcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxSZWNvcmRpbmdTdGFydGVkRXZlbnRcbiAgICovXG4gIHR5cGU6IHN0cmluZztcbn1cbi8qKlxuICogVGhpcyBldmVudCBpcyBzZW50IHdoZW4gY2FsbCByZWNvcmRpbmcgaGFzIHN0b3BwZWRcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgQ2FsbFJlY29yZGluZ1N0b3BwZWRFdmVudFxuICovXG5leHBvcnQgaW50ZXJmYWNlIENhbGxSZWNvcmRpbmdTdG9wcGVkRXZlbnQge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxSZWNvcmRpbmdTdG9wcGVkRXZlbnRcbiAgICovXG4gIGNhbGxfY2lkOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFJlY29yZGluZ1N0b3BwZWRFdmVudFxuICAgKi9cbiAgY3JlYXRlZF9hdDogc3RyaW5nO1xuICAvKipcbiAgICogVGhlIHR5cGUgb2YgZXZlbnQ6IFwiY2FsbC5yZWNvcmRpbmdfc3RvcHBlZFwiIGluIHRoaXMgY2FzZVxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFJlY29yZGluZ1N0b3BwZWRFdmVudFxuICAgKi9cbiAgdHlwZTogc3RyaW5nO1xufVxuLyoqXG4gKiBUaGlzIGV2ZW50IGlzIHNlbnQgd2hlbiBhIHVzZXIgcmVqZWN0cyBhIG5vdGlmaWNhdGlvbiB0byBqb2luIGEgY2FsbC5cbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgQ2FsbFJlamVjdGVkRXZlbnRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDYWxsUmVqZWN0ZWRFdmVudCB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Q2FsbFJlc3BvbnNlfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFJlamVjdGVkRXZlbnRcbiAgICovXG4gIGNhbGw6IENhbGxSZXNwb25zZTtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsUmVqZWN0ZWRFdmVudFxuICAgKi9cbiAgY2FsbF9jaWQ6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsUmVqZWN0ZWRFdmVudFxuICAgKi9cbiAgY3JlYXRlZF9hdDogc3RyaW5nO1xuICAvKipcbiAgICogVGhlIHR5cGUgb2YgZXZlbnQ6IFwiY2FsbC5yZWplY3RlZFwiIGluIHRoaXMgY2FzZVxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFJlamVjdGVkRXZlbnRcbiAgICovXG4gIHR5cGU6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtVc2VyUmVzcG9uc2V9XG4gICAqIEBtZW1iZXJvZiBDYWxsUmVqZWN0ZWRFdmVudFxuICAgKi9cbiAgdXNlcjogVXNlclJlc3BvbnNlO1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBDYWxsUmVxdWVzdFxuICovXG5leHBvcnQgaW50ZXJmYWNlIENhbGxSZXF1ZXN0IHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtVc2VyUmVxdWVzdH1cbiAgICogQG1lbWJlcm9mIENhbGxSZXF1ZXN0XG4gICAqL1xuICBjcmVhdGVkX2J5PzogVXNlclJlcXVlc3Q7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFJlcXVlc3RcbiAgICovXG4gIGNyZWF0ZWRfYnlfaWQ/OiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7eyBba2V5OiBzdHJpbmddOiBhbnk7IH19XG4gICAqIEBtZW1iZXJvZiBDYWxsUmVxdWVzdFxuICAgKi9cbiAgY3VzdG9tPzogeyBba2V5OiBzdHJpbmddOiBhbnkgfTtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtBcnJheTxNZW1iZXJSZXF1ZXN0Pn1cbiAgICogQG1lbWJlcm9mIENhbGxSZXF1ZXN0XG4gICAqL1xuICBtZW1iZXJzPzogQXJyYXk8TWVtYmVyUmVxdWVzdD47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Q2FsbFNldHRpbmdzUmVxdWVzdH1cbiAgICogQG1lbWJlcm9mIENhbGxSZXF1ZXN0XG4gICAqL1xuICBzZXR0aW5nc19vdmVycmlkZT86IENhbGxTZXR0aW5nc1JlcXVlc3Q7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFJlcXVlc3RcbiAgICovXG4gIHN0YXJ0c19hdD86IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsUmVxdWVzdFxuICAgKi9cbiAgdGVhbT86IHN0cmluZztcbn1cbi8qKlxuICogUmVwcmVzZW50cyBhIGNhbGxcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgQ2FsbFJlc3BvbnNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ2FsbFJlc3BvbnNlIHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAbWVtYmVyb2YgQ2FsbFJlc3BvbnNlXG4gICAqL1xuICBiYWNrc3RhZ2U6IGJvb2xlYW47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7QXJyYXk8c3RyaW5nPn1cbiAgICogQG1lbWJlcm9mIENhbGxSZXNwb25zZVxuICAgKi9cbiAgYmxvY2tlZF91c2VyX2lkczogQXJyYXk8c3RyaW5nPjtcbiAgLyoqXG4gICAqIFRoZSB1bmlxdWUgaWRlbnRpZmllciBmb3IgYSBjYWxsICg8dHlwZT46PGlkPilcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxSZXNwb25zZVxuICAgKi9cbiAgY2lkOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBEYXRlL3RpbWUgb2YgY3JlYXRpb25cbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxSZXNwb25zZVxuICAgKi9cbiAgY3JlYXRlZF9hdDogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge1VzZXJSZXNwb25zZX1cbiAgICogQG1lbWJlcm9mIENhbGxSZXNwb25zZVxuICAgKi9cbiAgY3JlYXRlZF9ieTogVXNlclJlc3BvbnNlO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxSZXNwb25zZVxuICAgKi9cbiAgY3VycmVudF9zZXNzaW9uX2lkOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBDdXN0b20gZGF0YSBmb3IgdGhpcyBvYmplY3RcbiAgICogQHR5cGUge3sgW2tleTogc3RyaW5nXTogYW55OyB9fVxuICAgKiBAbWVtYmVyb2YgQ2FsbFJlc3BvbnNlXG4gICAqL1xuICBjdXN0b206IHsgW2tleTogc3RyaW5nXTogYW55IH07XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7RWdyZXNzUmVzcG9uc2V9XG4gICAqIEBtZW1iZXJvZiBDYWxsUmVzcG9uc2VcbiAgICovXG4gIGVncmVzczogRWdyZXNzUmVzcG9uc2U7XG4gIC8qKlxuICAgKiBEYXRlL3RpbWUgd2hlbiB0aGUgY2FsbCBlbmRlZFxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFJlc3BvbnNlXG4gICAqL1xuICBlbmRlZF9hdD86IHN0cmluZztcbiAgLyoqXG4gICAqIENhbGwgSURcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxSZXNwb25zZVxuICAgKi9cbiAgaWQ6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtDYWxsSW5ncmVzc1Jlc3BvbnNlfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFJlc3BvbnNlXG4gICAqL1xuICBpbmdyZXNzOiBDYWxsSW5ncmVzc1Jlc3BvbnNlO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBDYWxsUmVzcG9uc2VcbiAgICovXG4gIHJlY29yZGluZzogYm9vbGVhbjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtDYWxsU2Vzc2lvblJlc3BvbnNlfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFJlc3BvbnNlXG4gICAqL1xuICBzZXNzaW9uPzogQ2FsbFNlc3Npb25SZXNwb25zZTtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtDYWxsU2V0dGluZ3NSZXNwb25zZX1cbiAgICogQG1lbWJlcm9mIENhbGxSZXNwb25zZVxuICAgKi9cbiAgc2V0dGluZ3M6IENhbGxTZXR0aW5nc1Jlc3BvbnNlO1xuICAvKipcbiAgICogRGF0ZS90aW1lIHdoZW4gdGhlIGNhbGwgd2lsbCBzdGFydFxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFJlc3BvbnNlXG4gICAqL1xuICBzdGFydHNfYXQ/OiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFJlc3BvbnNlXG4gICAqL1xuICB0ZWFtPzogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge1RodW1ibmFpbFJlc3BvbnNlfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFJlc3BvbnNlXG4gICAqL1xuICB0aHVtYm5haWxzPzogVGh1bWJuYWlsUmVzcG9uc2U7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIENhbGxSZXNwb25zZVxuICAgKi9cbiAgdHJhbnNjcmliaW5nOiBib29sZWFuO1xuICAvKipcbiAgICogVGhlIHR5cGUgb2YgY2FsbFxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFJlc3BvbnNlXG4gICAqL1xuICB0eXBlOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBEYXRlL3RpbWUgb2YgdGhlIGxhc3QgdXBkYXRlXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsUmVzcG9uc2VcbiAgICovXG4gIHVwZGF0ZWRfYXQ6IHN0cmluZztcbn1cbi8qKlxuICogVGhpcyBldmVudCBpcyBzZW50IHRvIGFsbCBjYWxsIG1lbWJlcnMgdG8gbm90aWZ5IHRoZXkgYXJlIGdldHRpbmcgY2FsbGVkXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIENhbGxSaW5nRXZlbnRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDYWxsUmluZ0V2ZW50IHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtDYWxsUmVzcG9uc2V9XG4gICAqIEBtZW1iZXJvZiBDYWxsUmluZ0V2ZW50XG4gICAqL1xuICBjYWxsOiBDYWxsUmVzcG9uc2U7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFJpbmdFdmVudFxuICAgKi9cbiAgY2FsbF9jaWQ6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsUmluZ0V2ZW50XG4gICAqL1xuICBjcmVhdGVkX2F0OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBDYWxsIG1lbWJlcnNcbiAgICogQHR5cGUge0FycmF5PE1lbWJlclJlc3BvbnNlPn1cbiAgICogQG1lbWJlcm9mIENhbGxSaW5nRXZlbnRcbiAgICovXG4gIG1lbWJlcnM6IEFycmF5PE1lbWJlclJlc3BvbnNlPjtcbiAgLyoqXG4gICAqIENhbGwgc2Vzc2lvbiBJRFxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFJpbmdFdmVudFxuICAgKi9cbiAgc2Vzc2lvbl9pZDogc3RyaW5nO1xuICAvKipcbiAgICogVGhlIHR5cGUgb2YgZXZlbnQ6IFwiY2FsbC5ub3RpZmljYXRpb25cIiBpbiB0aGlzIGNhc2VcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxSaW5nRXZlbnRcbiAgICovXG4gIHR5cGU6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtVc2VyUmVzcG9uc2V9XG4gICAqIEBtZW1iZXJvZiBDYWxsUmluZ0V2ZW50XG4gICAqL1xuICB1c2VyOiBVc2VyUmVzcG9uc2U7XG59XG4vKipcbiAqIFRoaXMgZXZlbnQgaXMgc2VudCB3aGVuIGEgY2FsbCBzZXNzaW9uIGVuZHNcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgQ2FsbFNlc3Npb25FbmRlZEV2ZW50XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ2FsbFNlc3Npb25FbmRlZEV2ZW50IHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtDYWxsUmVzcG9uc2V9XG4gICAqIEBtZW1iZXJvZiBDYWxsU2Vzc2lvbkVuZGVkRXZlbnRcbiAgICovXG4gIGNhbGw6IENhbGxSZXNwb25zZTtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsU2Vzc2lvbkVuZGVkRXZlbnRcbiAgICovXG4gIGNhbGxfY2lkOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFNlc3Npb25FbmRlZEV2ZW50XG4gICAqL1xuICBjcmVhdGVkX2F0OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBDYWxsIHNlc3Npb24gSURcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxTZXNzaW9uRW5kZWRFdmVudFxuICAgKi9cbiAgc2Vzc2lvbl9pZDogc3RyaW5nO1xuICAvKipcbiAgICogVGhlIHR5cGUgb2YgZXZlbnQ6IFwiY2FsbC5zZXNzaW9uX2VuZGVkXCIgaW4gdGhpcyBjYXNlXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsU2Vzc2lvbkVuZGVkRXZlbnRcbiAgICovXG4gIHR5cGU6IHN0cmluZztcbn1cbi8qKlxuICogVGhpcyBldmVudCBpcyBzZW50IHdoZW4gYSBwYXJ0aWNpcGFudCBqb2lucyBhIGNhbGwgc2Vzc2lvblxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBDYWxsU2Vzc2lvblBhcnRpY2lwYW50Sm9pbmVkRXZlbnRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDYWxsU2Vzc2lvblBhcnRpY2lwYW50Sm9pbmVkRXZlbnQge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxTZXNzaW9uUGFydGljaXBhbnRKb2luZWRFdmVudFxuICAgKi9cbiAgY2FsbF9jaWQ6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsU2Vzc2lvblBhcnRpY2lwYW50Sm9pbmVkRXZlbnRcbiAgICovXG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtDYWxsUGFydGljaXBhbnRSZXNwb25zZX1cbiAgICogQG1lbWJlcm9mIENhbGxTZXNzaW9uUGFydGljaXBhbnRKb2luZWRFdmVudFxuICAgKi9cbiAgcGFydGljaXBhbnQ6IENhbGxQYXJ0aWNpcGFudFJlc3BvbnNlO1xuICAvKipcbiAgICogQ2FsbCBzZXNzaW9uIElEXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsU2Vzc2lvblBhcnRpY2lwYW50Sm9pbmVkRXZlbnRcbiAgICovXG4gIHNlc3Npb25faWQ6IHN0cmluZztcbiAgLyoqXG4gICAqIFRoZSB0eXBlIG9mIGV2ZW50OiBcImNhbGwuc2Vzc2lvbl9wYXJ0aWNpcGFudF9qb2luZWRcIiBpbiB0aGlzIGNhc2VcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxTZXNzaW9uUGFydGljaXBhbnRKb2luZWRFdmVudFxuICAgKi9cbiAgdHlwZTogc3RyaW5nO1xufVxuLyoqXG4gKiBUaGlzIGV2ZW50IGlzIHNlbnQgd2hlbiBhIHBhcnRpY2lwYW50IGxlYXZlcyBhIGNhbGwgc2Vzc2lvblxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBDYWxsU2Vzc2lvblBhcnRpY2lwYW50TGVmdEV2ZW50XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ2FsbFNlc3Npb25QYXJ0aWNpcGFudExlZnRFdmVudCB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFNlc3Npb25QYXJ0aWNpcGFudExlZnRFdmVudFxuICAgKi9cbiAgY2FsbF9jaWQ6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsU2Vzc2lvblBhcnRpY2lwYW50TGVmdEV2ZW50XG4gICAqL1xuICBjcmVhdGVkX2F0OiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Q2FsbFBhcnRpY2lwYW50UmVzcG9uc2V9XG4gICAqIEBtZW1iZXJvZiBDYWxsU2Vzc2lvblBhcnRpY2lwYW50TGVmdEV2ZW50XG4gICAqL1xuICBwYXJ0aWNpcGFudDogQ2FsbFBhcnRpY2lwYW50UmVzcG9uc2U7XG4gIC8qKlxuICAgKiBDYWxsIHNlc3Npb24gSURcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxTZXNzaW9uUGFydGljaXBhbnRMZWZ0RXZlbnRcbiAgICovXG4gIHNlc3Npb25faWQ6IHN0cmluZztcbiAgLyoqXG4gICAqIFRoZSB0eXBlIG9mIGV2ZW50OiBcImNhbGwuc2Vzc2lvbl9wYXJ0aWNpcGFudF9sZWZ0XCIgaW4gdGhpcyBjYXNlXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsU2Vzc2lvblBhcnRpY2lwYW50TGVmdEV2ZW50XG4gICAqL1xuICB0eXBlOiBzdHJpbmc7XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIENhbGxTZXNzaW9uUmVzcG9uc2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDYWxsU2Vzc2lvblJlc3BvbnNlIHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHt7IFtrZXk6IHN0cmluZ106IHN0cmluZzsgfX1cbiAgICogQG1lbWJlcm9mIENhbGxTZXNzaW9uUmVzcG9uc2VcbiAgICovXG4gIGFjY2VwdGVkX2J5OiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9O1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxTZXNzaW9uUmVzcG9uc2VcbiAgICovXG4gIGVuZGVkX2F0Pzogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxTZXNzaW9uUmVzcG9uc2VcbiAgICovXG4gIGlkOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFNlc3Npb25SZXNwb25zZVxuICAgKi9cbiAgbGl2ZV9lbmRlZF9hdD86IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsU2Vzc2lvblJlc3BvbnNlXG4gICAqL1xuICBsaXZlX3N0YXJ0ZWRfYXQ/OiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7QXJyYXk8Q2FsbFBhcnRpY2lwYW50UmVzcG9uc2U+fVxuICAgKiBAbWVtYmVyb2YgQ2FsbFNlc3Npb25SZXNwb25zZVxuICAgKi9cbiAgcGFydGljaXBhbnRzOiBBcnJheTxDYWxsUGFydGljaXBhbnRSZXNwb25zZT47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7eyBba2V5OiBzdHJpbmddOiBudW1iZXI7IH19XG4gICAqIEBtZW1iZXJvZiBDYWxsU2Vzc2lvblJlc3BvbnNlXG4gICAqL1xuICBwYXJ0aWNpcGFudHNfY291bnRfYnlfcm9sZTogeyBba2V5OiBzdHJpbmddOiBudW1iZXIgfTtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHt7IFtrZXk6IHN0cmluZ106IHN0cmluZzsgfX1cbiAgICogQG1lbWJlcm9mIENhbGxTZXNzaW9uUmVzcG9uc2VcbiAgICovXG4gIHJlamVjdGVkX2J5OiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9O1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxTZXNzaW9uUmVzcG9uc2VcbiAgICovXG4gIHN0YXJ0ZWRfYXQ/OiBzdHJpbmc7XG59XG4vKipcbiAqIFRoaXMgZXZlbnQgaXMgc2VudCB3aGVuIGEgY2FsbCBzZXNzaW9uIHN0YXJ0c1xuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBDYWxsU2Vzc2lvblN0YXJ0ZWRFdmVudFxuICovXG5leHBvcnQgaW50ZXJmYWNlIENhbGxTZXNzaW9uU3RhcnRlZEV2ZW50IHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtDYWxsUmVzcG9uc2V9XG4gICAqIEBtZW1iZXJvZiBDYWxsU2Vzc2lvblN0YXJ0ZWRFdmVudFxuICAgKi9cbiAgY2FsbDogQ2FsbFJlc3BvbnNlO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxTZXNzaW9uU3RhcnRlZEV2ZW50XG4gICAqL1xuICBjYWxsX2NpZDogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxTZXNzaW9uU3RhcnRlZEV2ZW50XG4gICAqL1xuICBjcmVhdGVkX2F0OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBDYWxsIHNlc3Npb24gSURcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxTZXNzaW9uU3RhcnRlZEV2ZW50XG4gICAqL1xuICBzZXNzaW9uX2lkOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBUaGUgdHlwZSBvZiBldmVudDogXCJjYWxsLnNlc3Npb25fc3RhcnRlZFwiIGluIHRoaXMgY2FzZVxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFNlc3Npb25TdGFydGVkRXZlbnRcbiAgICovXG4gIHR5cGU6IHN0cmluZztcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgQ2FsbFNldHRpbmdzUmVxdWVzdFxuICovXG5leHBvcnQgaW50ZXJmYWNlIENhbGxTZXR0aW5nc1JlcXVlc3Qge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0F1ZGlvU2V0dGluZ3NSZXF1ZXN0fVxuICAgKiBAbWVtYmVyb2YgQ2FsbFNldHRpbmdzUmVxdWVzdFxuICAgKi9cbiAgYXVkaW8/OiBBdWRpb1NldHRpbmdzUmVxdWVzdDtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtCYWNrc3RhZ2VTZXR0aW5nc1JlcXVlc3R9XG4gICAqIEBtZW1iZXJvZiBDYWxsU2V0dGluZ3NSZXF1ZXN0XG4gICAqL1xuICBiYWNrc3RhZ2U/OiBCYWNrc3RhZ2VTZXR0aW5nc1JlcXVlc3Q7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7QnJvYWRjYXN0U2V0dGluZ3NSZXF1ZXN0fVxuICAgKiBAbWVtYmVyb2YgQ2FsbFNldHRpbmdzUmVxdWVzdFxuICAgKi9cbiAgYnJvYWRjYXN0aW5nPzogQnJvYWRjYXN0U2V0dGluZ3NSZXF1ZXN0O1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0dlb2ZlbmNlU2V0dGluZ3NSZXF1ZXN0fVxuICAgKiBAbWVtYmVyb2YgQ2FsbFNldHRpbmdzUmVxdWVzdFxuICAgKi9cbiAgZ2VvZmVuY2luZz86IEdlb2ZlbmNlU2V0dGluZ3NSZXF1ZXN0O1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge1JlY29yZFNldHRpbmdzUmVxdWVzdH1cbiAgICogQG1lbWJlcm9mIENhbGxTZXR0aW5nc1JlcXVlc3RcbiAgICovXG4gIHJlY29yZGluZz86IFJlY29yZFNldHRpbmdzUmVxdWVzdDtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtSaW5nU2V0dGluZ3NSZXF1ZXN0fVxuICAgKiBAbWVtYmVyb2YgQ2FsbFNldHRpbmdzUmVxdWVzdFxuICAgKi9cbiAgcmluZz86IFJpbmdTZXR0aW5nc1JlcXVlc3Q7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7U2NyZWVuc2hhcmluZ1NldHRpbmdzUmVxdWVzdH1cbiAgICogQG1lbWJlcm9mIENhbGxTZXR0aW5nc1JlcXVlc3RcbiAgICovXG4gIHNjcmVlbnNoYXJpbmc/OiBTY3JlZW5zaGFyaW5nU2V0dGluZ3NSZXF1ZXN0O1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge1RodW1ibmFpbHNTZXR0aW5nc1JlcXVlc3R9XG4gICAqIEBtZW1iZXJvZiBDYWxsU2V0dGluZ3NSZXF1ZXN0XG4gICAqL1xuICB0aHVtYm5haWxzPzogVGh1bWJuYWlsc1NldHRpbmdzUmVxdWVzdDtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtUcmFuc2NyaXB0aW9uU2V0dGluZ3NSZXF1ZXN0fVxuICAgKiBAbWVtYmVyb2YgQ2FsbFNldHRpbmdzUmVxdWVzdFxuICAgKi9cbiAgdHJhbnNjcmlwdGlvbj86IFRyYW5zY3JpcHRpb25TZXR0aW5nc1JlcXVlc3Q7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7VmlkZW9TZXR0aW5nc1JlcXVlc3R9XG4gICAqIEBtZW1iZXJvZiBDYWxsU2V0dGluZ3NSZXF1ZXN0XG4gICAqL1xuICB2aWRlbz86IFZpZGVvU2V0dGluZ3NSZXF1ZXN0O1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBDYWxsU2V0dGluZ3NSZXNwb25zZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIENhbGxTZXR0aW5nc1Jlc3BvbnNlIHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtBdWRpb1NldHRpbmdzfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFNldHRpbmdzUmVzcG9uc2VcbiAgICovXG4gIGF1ZGlvOiBBdWRpb1NldHRpbmdzO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0JhY2tzdGFnZVNldHRpbmdzfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFNldHRpbmdzUmVzcG9uc2VcbiAgICovXG4gIGJhY2tzdGFnZTogQmFja3N0YWdlU2V0dGluZ3M7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7QnJvYWRjYXN0U2V0dGluZ3NSZXNwb25zZX1cbiAgICogQG1lbWJlcm9mIENhbGxTZXR0aW5nc1Jlc3BvbnNlXG4gICAqL1xuICBicm9hZGNhc3Rpbmc6IEJyb2FkY2FzdFNldHRpbmdzUmVzcG9uc2U7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7R2VvZmVuY2VTZXR0aW5nc31cbiAgICogQG1lbWJlcm9mIENhbGxTZXR0aW5nc1Jlc3BvbnNlXG4gICAqL1xuICBnZW9mZW5jaW5nOiBHZW9mZW5jZVNldHRpbmdzO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge1JlY29yZFNldHRpbmdzUmVzcG9uc2V9XG4gICAqIEBtZW1iZXJvZiBDYWxsU2V0dGluZ3NSZXNwb25zZVxuICAgKi9cbiAgcmVjb3JkaW5nOiBSZWNvcmRTZXR0aW5nc1Jlc3BvbnNlO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge1JpbmdTZXR0aW5nc31cbiAgICogQG1lbWJlcm9mIENhbGxTZXR0aW5nc1Jlc3BvbnNlXG4gICAqL1xuICByaW5nOiBSaW5nU2V0dGluZ3M7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7U2NyZWVuc2hhcmluZ1NldHRpbmdzfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFNldHRpbmdzUmVzcG9uc2VcbiAgICovXG4gIHNjcmVlbnNoYXJpbmc6IFNjcmVlbnNoYXJpbmdTZXR0aW5ncztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtUaHVtYm5haWxzU2V0dGluZ3N9XG4gICAqIEBtZW1iZXJvZiBDYWxsU2V0dGluZ3NSZXNwb25zZVxuICAgKi9cbiAgdGh1bWJuYWlsczogVGh1bWJuYWlsc1NldHRpbmdzO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge1RyYW5zY3JpcHRpb25TZXR0aW5nc31cbiAgICogQG1lbWJlcm9mIENhbGxTZXR0aW5nc1Jlc3BvbnNlXG4gICAqL1xuICB0cmFuc2NyaXB0aW9uOiBUcmFuc2NyaXB0aW9uU2V0dGluZ3M7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7VmlkZW9TZXR0aW5nc31cbiAgICogQG1lbWJlcm9mIENhbGxTZXR0aW5nc1Jlc3BvbnNlXG4gICAqL1xuICB2aWRlbzogVmlkZW9TZXR0aW5ncztcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgQ2FsbFN0YXRlUmVzcG9uc2VGaWVsZHNcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDYWxsU3RhdGVSZXNwb25zZUZpZWxkcyB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Q2FsbFJlc3BvbnNlfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFN0YXRlUmVzcG9uc2VGaWVsZHNcbiAgICovXG4gIGNhbGw6IENhbGxSZXNwb25zZTtcbiAgLyoqXG4gICAqIExpc3Qgb2YgY2FsbCBtZW1iZXJzXG4gICAqIEB0eXBlIHtBcnJheTxNZW1iZXJSZXNwb25zZT59XG4gICAqIEBtZW1iZXJvZiBDYWxsU3RhdGVSZXNwb25zZUZpZWxkc1xuICAgKi9cbiAgbWVtYmVyczogQXJyYXk8TWVtYmVyUmVzcG9uc2U+O1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge01lbWJlclJlc3BvbnNlfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFN0YXRlUmVzcG9uc2VGaWVsZHNcbiAgICovXG4gIG1lbWJlcnNoaXA/OiBNZW1iZXJSZXNwb25zZTtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtBcnJheTxPd25DYXBhYmlsaXR5Pn1cbiAgICogQG1lbWJlcm9mIENhbGxTdGF0ZVJlc3BvbnNlRmllbGRzXG4gICAqL1xuICBvd25fY2FwYWJpbGl0aWVzOiBBcnJheTxPd25DYXBhYmlsaXR5Pjtcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgQ2FsbFR5cGVSZXNwb25zZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIENhbGxUeXBlUmVzcG9uc2Uge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxUeXBlUmVzcG9uc2VcbiAgICovXG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHt7IFtrZXk6IHN0cmluZ106IEFycmF5PHN0cmluZz47IH19XG4gICAqIEBtZW1iZXJvZiBDYWxsVHlwZVJlc3BvbnNlXG4gICAqL1xuICBncmFudHM6IHsgW2tleTogc3RyaW5nXTogQXJyYXk8c3RyaW5nPiB9O1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxUeXBlUmVzcG9uc2VcbiAgICovXG4gIG5hbWU6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtOb3RpZmljYXRpb25TZXR0aW5nc31cbiAgICogQG1lbWJlcm9mIENhbGxUeXBlUmVzcG9uc2VcbiAgICovXG4gIG5vdGlmaWNhdGlvbl9zZXR0aW5nczogTm90aWZpY2F0aW9uU2V0dGluZ3M7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Q2FsbFNldHRpbmdzUmVzcG9uc2V9XG4gICAqIEBtZW1iZXJvZiBDYWxsVHlwZVJlc3BvbnNlXG4gICAqL1xuICBzZXR0aW5nczogQ2FsbFNldHRpbmdzUmVzcG9uc2U7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFR5cGVSZXNwb25zZVxuICAgKi9cbiAgdXBkYXRlZF9hdDogc3RyaW5nO1xufVxuLyoqXG4gKiBUaGlzIGV2ZW50IGlzIHNlbnQgd2hlbiBhIGNhbGwgaXMgdXBkYXRlZCwgY2xpZW50cyBzaG91bGQgdXNlIHRoaXMgdXBkYXRlIHRoZSBsb2NhbCBzdGF0ZSBvZiB0aGUgY2FsbC5cbiAqIFRoaXMgZXZlbnQgYWxzbyBjb250YWlucyB0aGUgY2FwYWJpbGl0aWVzIGJ5IHJvbGUgZm9yIHRoZSBjYWxsLCBjbGllbnRzIHNob3VsZCB1cGRhdGUgdGhlIG93bl9jYXBhYmlsaXR5IGZvciB0aGUgY3VycmVudC5cbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgQ2FsbFVwZGF0ZWRFdmVudFxuICovXG5leHBvcnQgaW50ZXJmYWNlIENhbGxVcGRhdGVkRXZlbnQge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0NhbGxSZXNwb25zZX1cbiAgICogQG1lbWJlcm9mIENhbGxVcGRhdGVkRXZlbnRcbiAgICovXG4gIGNhbGw6IENhbGxSZXNwb25zZTtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsVXBkYXRlZEV2ZW50XG4gICAqL1xuICBjYWxsX2NpZDogc3RyaW5nO1xuICAvKipcbiAgICogVGhlIGNhcGFiaWxpdGllcyBieSByb2xlIGZvciB0aGlzIGNhbGxcbiAgICogQHR5cGUge3sgW2tleTogc3RyaW5nXTogQXJyYXk8c3RyaW5nPjsgfX1cbiAgICogQG1lbWJlcm9mIENhbGxVcGRhdGVkRXZlbnRcbiAgICovXG4gIGNhcGFiaWxpdGllc19ieV9yb2xlOiB7IFtrZXk6IHN0cmluZ106IEFycmF5PHN0cmluZz4gfTtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsVXBkYXRlZEV2ZW50XG4gICAqL1xuICBjcmVhdGVkX2F0OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBUaGUgdHlwZSBvZiBldmVudDogXCJjYWxsLmVuZGVkXCIgaW4gdGhpcyBjYXNlXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDYWxsVXBkYXRlZEV2ZW50XG4gICAqL1xuICB0eXBlOiBzdHJpbmc7XG59XG4vKipcbiAqIFRoaXMgZXZlbnQgaXMgc2VudCB3aGVuIGEgY2FsbCBtZW1iZXIgaXMgbXV0ZWRcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgQ2FsbFVzZXJNdXRlZFxuICovXG5leHBvcnQgaW50ZXJmYWNlIENhbGxVc2VyTXV0ZWQge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxVc2VyTXV0ZWRcbiAgICovXG4gIGNhbGxfY2lkOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFVzZXJNdXRlZFxuICAgKi9cbiAgY3JlYXRlZF9hdDogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENhbGxVc2VyTXV0ZWRcbiAgICovXG4gIGZyb21fdXNlcl9pZDogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0FycmF5PHN0cmluZz59XG4gICAqIEBtZW1iZXJvZiBDYWxsVXNlck11dGVkXG4gICAqL1xuICBtdXRlZF91c2VyX2lkczogQXJyYXk8c3RyaW5nPjtcbiAgLyoqXG4gICAqIFRoZSB0eXBlIG9mIGV2ZW50OiBcImNhbGwudXNlcl9tdXRlZFwiIGluIHRoaXMgY2FzZVxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ2FsbFVzZXJNdXRlZFxuICAgKi9cbiAgdHlwZTogc3RyaW5nO1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBDb25uZWN0VXNlckRldGFpbHNSZXF1ZXN0XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ29ubmVjdFVzZXJEZXRhaWxzUmVxdWVzdCB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7eyBba2V5OiBzdHJpbmddOiBhbnk7IH19XG4gICAqIEBtZW1iZXJvZiBDb25uZWN0VXNlckRldGFpbHNSZXF1ZXN0XG4gICAqL1xuICBjdXN0b20/OiB7IFtrZXk6IHN0cmluZ106IGFueSB9O1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENvbm5lY3RVc2VyRGV0YWlsc1JlcXVlc3RcbiAgICovXG4gIGlkOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ29ubmVjdFVzZXJEZXRhaWxzUmVxdWVzdFxuICAgKi9cbiAgaW1hZ2U/OiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ29ubmVjdFVzZXJEZXRhaWxzUmVxdWVzdFxuICAgKi9cbiAgbmFtZT86IHN0cmluZztcbn1cbi8qKlxuICogVGhpcyBldmVudCBpcyBzZW50IHdoZW4gdGhlIFdTIGNvbm5lY3Rpb24gaXMgZXN0YWJsaXNoZWQgYW5kIGF1dGhlbnRpY2F0ZWQsIHRoaXMgZXZlbnQgY29udGFpbnMgdGhlIGZ1bGwgdXNlciBvYmplY3QgYXMgaXQgaXMgc3RvcmVkIG9uIHRoZSBzZXJ2ZXJcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgQ29ubmVjdGVkRXZlbnRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDb25uZWN0ZWRFdmVudCB7XG4gIC8qKlxuICAgKiBUaGUgY29ubmVjdGlvbl9pZCBmb3IgdGhpcyBjbGllbnRcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENvbm5lY3RlZEV2ZW50XG4gICAqL1xuICBjb25uZWN0aW9uX2lkOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ29ubmVjdGVkRXZlbnRcbiAgICovXG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtPd25Vc2VyUmVzcG9uc2V9XG4gICAqIEBtZW1iZXJvZiBDb25uZWN0ZWRFdmVudFxuICAgKi9cbiAgbWU6IE93blVzZXJSZXNwb25zZTtcbiAgLyoqXG4gICAqIFRoZSB0eXBlIG9mIGV2ZW50OiBcImNvbm5lY3Rpb24ub2tcIiBpbiB0aGlzIGNhc2VcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENvbm5lY3RlZEV2ZW50XG4gICAqL1xuICB0eXBlOiBzdHJpbmc7XG59XG4vKipcbiAqIFRoaXMgZXZlbnQgaXMgc2VudCB3aGVuIHRoZSBXUyBjb25uZWN0aW9uIGZhaWxzXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIENvbm5lY3Rpb25FcnJvckV2ZW50XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ29ubmVjdGlvbkVycm9yRXZlbnQge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENvbm5lY3Rpb25FcnJvckV2ZW50XG4gICAqL1xuICBjb25uZWN0aW9uX2lkOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ29ubmVjdGlvbkVycm9yRXZlbnRcbiAgICovXG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtBUElFcnJvcn1cbiAgICogQG1lbWJlcm9mIENvbm5lY3Rpb25FcnJvckV2ZW50XG4gICAqL1xuICBlcnJvcjogQVBJRXJyb3IgfCBudWxsO1xuICAvKipcbiAgICogVGhlIHR5cGUgb2YgZXZlbnQ6IFwiY29ubmVjdGlvbi5va1wiIGluIHRoaXMgY2FzZVxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ29ubmVjdGlvbkVycm9yRXZlbnRcbiAgICovXG4gIHR5cGU6IHN0cmluZztcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgQ3JlYXRlQ2FsbFR5cGVSZXF1ZXN0XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ3JlYXRlQ2FsbFR5cGVSZXF1ZXN0IHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHt7IFtrZXk6IHN0cmluZ106IEFycmF5PHN0cmluZz47IH19XG4gICAqIEBtZW1iZXJvZiBDcmVhdGVDYWxsVHlwZVJlcXVlc3RcbiAgICovXG4gIGdyYW50cz86IHsgW2tleTogc3RyaW5nXTogQXJyYXk8c3RyaW5nPiB9O1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENyZWF0ZUNhbGxUeXBlUmVxdWVzdFxuICAgKi9cbiAgbmFtZTogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge05vdGlmaWNhdGlvblNldHRpbmdzUmVxdWVzdH1cbiAgICogQG1lbWJlcm9mIENyZWF0ZUNhbGxUeXBlUmVxdWVzdFxuICAgKi9cbiAgbm90aWZpY2F0aW9uX3NldHRpbmdzPzogTm90aWZpY2F0aW9uU2V0dGluZ3NSZXF1ZXN0O1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0NhbGxTZXR0aW5nc1JlcXVlc3R9XG4gICAqIEBtZW1iZXJvZiBDcmVhdGVDYWxsVHlwZVJlcXVlc3RcbiAgICovXG4gIHNldHRpbmdzPzogQ2FsbFNldHRpbmdzUmVxdWVzdDtcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgQ3JlYXRlQ2FsbFR5cGVSZXNwb25zZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIENyZWF0ZUNhbGxUeXBlUmVzcG9uc2Uge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENyZWF0ZUNhbGxUeXBlUmVzcG9uc2VcbiAgICovXG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDcmVhdGVDYWxsVHlwZVJlc3BvbnNlXG4gICAqL1xuICBkdXJhdGlvbjogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3sgW2tleTogc3RyaW5nXTogQXJyYXk8c3RyaW5nPjsgfX1cbiAgICogQG1lbWJlcm9mIENyZWF0ZUNhbGxUeXBlUmVzcG9uc2VcbiAgICovXG4gIGdyYW50czogeyBba2V5OiBzdHJpbmddOiBBcnJheTxzdHJpbmc+IH07XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ3JlYXRlQ2FsbFR5cGVSZXNwb25zZVxuICAgKi9cbiAgbmFtZTogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge05vdGlmaWNhdGlvblNldHRpbmdzfVxuICAgKiBAbWVtYmVyb2YgQ3JlYXRlQ2FsbFR5cGVSZXNwb25zZVxuICAgKi9cbiAgbm90aWZpY2F0aW9uX3NldHRpbmdzOiBOb3RpZmljYXRpb25TZXR0aW5ncztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtDYWxsU2V0dGluZ3NSZXNwb25zZX1cbiAgICogQG1lbWJlcm9mIENyZWF0ZUNhbGxUeXBlUmVzcG9uc2VcbiAgICovXG4gIHNldHRpbmdzOiBDYWxsU2V0dGluZ3NSZXNwb25zZTtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDcmVhdGVDYWxsVHlwZVJlc3BvbnNlXG4gICAqL1xuICB1cGRhdGVkX2F0OiBzdHJpbmc7XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIENyZWF0ZURldmljZVJlcXVlc3RcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDcmVhdGVEZXZpY2VSZXF1ZXN0IHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDcmVhdGVEZXZpY2VSZXF1ZXN0XG4gICAqL1xuICBpZD86IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDcmVhdGVEZXZpY2VSZXF1ZXN0XG4gICAqL1xuICBwdXNoX3Byb3ZpZGVyPzogQ3JlYXRlRGV2aWNlUmVxdWVzdFB1c2hQcm92aWRlckVudW07XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ3JlYXRlRGV2aWNlUmVxdWVzdFxuICAgKi9cbiAgcHVzaF9wcm92aWRlcl9uYW1lPzogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge1VzZXJSZXF1ZXN0fVxuICAgKiBAbWVtYmVyb2YgQ3JlYXRlRGV2aWNlUmVxdWVzdFxuICAgKi9cbiAgdXNlcj86IFVzZXJSZXF1ZXN0O1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENyZWF0ZURldmljZVJlcXVlc3RcbiAgICovXG4gIHVzZXJfaWQ/OiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIENyZWF0ZURldmljZVJlcXVlc3RcbiAgICovXG4gIHZvaXBfdG9rZW4/OiBib29sZWFuO1xufVxuXG4vKipcbiAqIEBleHBvcnRcbiAqL1xuZXhwb3J0IGNvbnN0IENyZWF0ZURldmljZVJlcXVlc3RQdXNoUHJvdmlkZXJFbnVtID0ge1xuICBGSVJFQkFTRTogJ2ZpcmViYXNlJyxcbiAgQVBOOiAnYXBuJyxcbiAgSFVBV0VJOiAnaHVhd2VpJyxcbiAgWElBT01JOiAneGlhb21pJyxcbn0gYXMgY29uc3Q7XG5leHBvcnQgdHlwZSBDcmVhdGVEZXZpY2VSZXF1ZXN0UHVzaFByb3ZpZGVyRW51bSA9XG4gICh0eXBlb2YgQ3JlYXRlRGV2aWNlUmVxdWVzdFB1c2hQcm92aWRlckVudW0pW2tleW9mIHR5cGVvZiBDcmVhdGVEZXZpY2VSZXF1ZXN0UHVzaFByb3ZpZGVyRW51bV07XG5cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgQ3JlYXRlR3Vlc3RSZXF1ZXN0XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ3JlYXRlR3Vlc3RSZXF1ZXN0IHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtVc2VyUmVxdWVzdH1cbiAgICogQG1lbWJlcm9mIENyZWF0ZUd1ZXN0UmVxdWVzdFxuICAgKi9cbiAgdXNlcjogVXNlclJlcXVlc3Q7XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIENyZWF0ZUd1ZXN0UmVzcG9uc2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDcmVhdGVHdWVzdFJlc3BvbnNlIHtcbiAgLyoqXG4gICAqIHRoZSBhY2Nlc3MgdG9rZW4gdG8gYXV0aGVudGljYXRlIHRoZSB1c2VyXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDcmVhdGVHdWVzdFJlc3BvbnNlXG4gICAqL1xuICBhY2Nlc3NfdG9rZW46IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDcmVhdGVHdWVzdFJlc3BvbnNlXG4gICAqL1xuICBkdXJhdGlvbjogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge1VzZXJSZXNwb25zZX1cbiAgICogQG1lbWJlcm9mIENyZWF0ZUd1ZXN0UmVzcG9uc2VcbiAgICovXG4gIHVzZXI6IFVzZXJSZXNwb25zZTtcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgQ3JlZGVudGlhbHNcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDcmVkZW50aWFscyB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7QXJyYXk8SUNFU2VydmVyPn1cbiAgICogQG1lbWJlcm9mIENyZWRlbnRpYWxzXG4gICAqL1xuICBpY2Vfc2VydmVyczogQXJyYXk8SUNFU2VydmVyPjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtTRlVSZXNwb25zZX1cbiAgICogQG1lbWJlcm9mIENyZWRlbnRpYWxzXG4gICAqL1xuICBzZXJ2ZXI6IFNGVVJlc3BvbnNlO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENyZWRlbnRpYWxzXG4gICAqL1xuICB0b2tlbjogc3RyaW5nO1xufVxuLyoqXG4gKiBBIGN1c3RvbSBldmVudCwgdGhpcyBldmVudCBpcyB1c2VkIHRvIHNlbmQgY3VzdG9tIGV2ZW50cyB0byBvdGhlciBwYXJ0aWNpcGFudHMgaW4gdGhlIGNhbGwuXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIEN1c3RvbVZpZGVvRXZlbnRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDdXN0b21WaWRlb0V2ZW50IHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDdXN0b21WaWRlb0V2ZW50XG4gICAqL1xuICBjYWxsX2NpZDogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIEN1c3RvbVZpZGVvRXZlbnRcbiAgICovXG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbiAgLyoqXG4gICAqIEN1c3RvbSBkYXRhIGZvciB0aGlzIG9iamVjdFxuICAgKiBAdHlwZSB7eyBba2V5OiBzdHJpbmddOiBhbnk7IH19XG4gICAqIEBtZW1iZXJvZiBDdXN0b21WaWRlb0V2ZW50XG4gICAqL1xuICBjdXN0b206IHsgW2tleTogc3RyaW5nXTogYW55IH07XG4gIC8qKlxuICAgKiBUaGUgdHlwZSBvZiBldmVudCwgXCJjdXN0b21cIiBpbiB0aGlzIGNhc2VcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIEN1c3RvbVZpZGVvRXZlbnRcbiAgICovXG4gIHR5cGU6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtVc2VyUmVzcG9uc2V9XG4gICAqIEBtZW1iZXJvZiBDdXN0b21WaWRlb0V2ZW50XG4gICAqL1xuICB1c2VyOiBVc2VyUmVzcG9uc2U7XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIERldmljZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIERldmljZSB7XG4gIC8qKlxuICAgKiBEYXRlL3RpbWUgb2YgY3JlYXRpb25cbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIERldmljZVxuICAgKi9cbiAgY3JlYXRlZF9hdDogc3RyaW5nO1xuICAvKipcbiAgICogV2hldGhlciBkZXZpY2UgaXMgZGlzYWJsZWQgb3Igbm90XG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAbWVtYmVyb2YgRGV2aWNlXG4gICAqL1xuICBkaXNhYmxlZD86IGJvb2xlYW47XG4gIC8qKlxuICAgKiBSZWFzb24gZXhwbGFpbmluZyB3aHkgZGV2aWNlIGhhZCBiZWVuIGRpc2FibGVkXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBEZXZpY2VcbiAgICovXG4gIGRpc2FibGVkX3JlYXNvbj86IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBEZXZpY2VcbiAgICovXG4gIGlkOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgRGV2aWNlXG4gICAqL1xuICBwdXNoX3Byb3ZpZGVyOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgRGV2aWNlXG4gICAqL1xuICBwdXNoX3Byb3ZpZGVyX25hbWU/OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBXaGVuIHRydWUgdGhlIHRva2VuIGlzIGZvciBBcHBsZSBWb0lQIHB1c2ggbm90aWZpY2F0aW9uc1xuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIERldmljZVxuICAgKi9cbiAgdm9pcD86IGJvb2xlYW47XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIEVkZ2VSZXNwb25zZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIEVkZ2VSZXNwb25zZSB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgRWRnZVJlc3BvbnNlXG4gICAqL1xuICBjb250aW5lbnRfY29kZTogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIEVkZ2VSZXNwb25zZVxuICAgKi9cbiAgY291bnRyeV9pc29fY29kZTogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge251bWJlcn1cbiAgICogQG1lbWJlcm9mIEVkZ2VSZXNwb25zZVxuICAgKi9cbiAgZ3JlZW46IG51bWJlcjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBFZGdlUmVzcG9uc2VcbiAgICovXG4gIGlkOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgRWRnZVJlc3BvbnNlXG4gICAqL1xuICBsYXRlbmN5X3Rlc3RfdXJsOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKiBAbWVtYmVyb2YgRWRnZVJlc3BvbnNlXG4gICAqL1xuICBsYXRpdHVkZTogbnVtYmVyO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge251bWJlcn1cbiAgICogQG1lbWJlcm9mIEVkZ2VSZXNwb25zZVxuICAgKi9cbiAgbG9uZ2l0dWRlOiBudW1iZXI7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKiBAbWVtYmVyb2YgRWRnZVJlc3BvbnNlXG4gICAqL1xuICByZWQ6IG51bWJlcjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBFZGdlUmVzcG9uc2VcbiAgICovXG4gIHN1YmRpdmlzaW9uX2lzb19jb2RlOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKiBAbWVtYmVyb2YgRWRnZVJlc3BvbnNlXG4gICAqL1xuICB5ZWxsb3c6IG51bWJlcjtcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgRWdyZXNzSExTUmVzcG9uc2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBFZ3Jlc3NITFNSZXNwb25zZSB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgRWdyZXNzSExTUmVzcG9uc2VcbiAgICovXG4gIHBsYXlsaXN0X3VybDogc3RyaW5nO1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBFZ3Jlc3NSVE1QUmVzcG9uc2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBFZ3Jlc3NSVE1QUmVzcG9uc2Uge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIEVncmVzc1JUTVBSZXNwb25zZVxuICAgKi9cbiAgbmFtZTogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIEVncmVzc1JUTVBSZXNwb25zZVxuICAgKi9cbiAgc3RyZWFtX2tleTogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIEVncmVzc1JUTVBSZXNwb25zZVxuICAgKi9cbiAgdXJsOiBzdHJpbmc7XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIEVncmVzc1Jlc3BvbnNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRWdyZXNzUmVzcG9uc2Uge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBFZ3Jlc3NSZXNwb25zZVxuICAgKi9cbiAgYnJvYWRjYXN0aW5nOiBib29sZWFuO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0VncmVzc0hMU1Jlc3BvbnNlfVxuICAgKiBAbWVtYmVyb2YgRWdyZXNzUmVzcG9uc2VcbiAgICovXG4gIGhscz86IEVncmVzc0hMU1Jlc3BvbnNlO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0FycmF5PEVncmVzc1JUTVBSZXNwb25zZT59XG4gICAqIEBtZW1iZXJvZiBFZ3Jlc3NSZXNwb25zZVxuICAgKi9cbiAgcnRtcHM6IEFycmF5PEVncmVzc1JUTVBSZXNwb25zZT47XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIEVuZENhbGxSZXNwb25zZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIEVuZENhbGxSZXNwb25zZSB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgRW5kQ2FsbFJlc3BvbnNlXG4gICAqL1xuICBkdXJhdGlvbjogc3RyaW5nO1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBFdmVudE5vdGlmaWNhdGlvblNldHRpbmdzXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRXZlbnROb3RpZmljYXRpb25TZXR0aW5ncyB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7QVBOU31cbiAgICogQG1lbWJlcm9mIEV2ZW50Tm90aWZpY2F0aW9uU2V0dGluZ3NcbiAgICovXG4gIGFwbnM6IEFQTlM7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIEV2ZW50Tm90aWZpY2F0aW9uU2V0dGluZ3NcbiAgICovXG4gIGVuYWJsZWQ6IGJvb2xlYW47XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIEV2ZW50Tm90aWZpY2F0aW9uU2V0dGluZ3NSZXF1ZXN0XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRXZlbnROb3RpZmljYXRpb25TZXR0aW5nc1JlcXVlc3Qge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0FQTlNSZXF1ZXN0fVxuICAgKiBAbWVtYmVyb2YgRXZlbnROb3RpZmljYXRpb25TZXR0aW5nc1JlcXVlc3RcbiAgICovXG4gIGFwbnM/OiBBUE5TUmVxdWVzdDtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAbWVtYmVyb2YgRXZlbnROb3RpZmljYXRpb25TZXR0aW5nc1JlcXVlc3RcbiAgICovXG4gIGVuYWJsZWQ/OiBib29sZWFuO1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBHZW9mZW5jZVNldHRpbmdzXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgR2VvZmVuY2VTZXR0aW5ncyB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7QXJyYXk8c3RyaW5nPn1cbiAgICogQG1lbWJlcm9mIEdlb2ZlbmNlU2V0dGluZ3NcbiAgICovXG4gIG5hbWVzOiBBcnJheTxzdHJpbmc+O1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBHZW9mZW5jZVNldHRpbmdzUmVxdWVzdFxuICovXG5leHBvcnQgaW50ZXJmYWNlIEdlb2ZlbmNlU2V0dGluZ3NSZXF1ZXN0IHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtBcnJheTxzdHJpbmc+fVxuICAgKiBAbWVtYmVyb2YgR2VvZmVuY2VTZXR0aW5nc1JlcXVlc3RcbiAgICovXG4gIG5hbWVzPzogQXJyYXk8c3RyaW5nPjtcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgR2V0Q2FsbFJlc3BvbnNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgR2V0Q2FsbFJlc3BvbnNlIHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtDYWxsUmVzcG9uc2V9XG4gICAqIEBtZW1iZXJvZiBHZXRDYWxsUmVzcG9uc2VcbiAgICovXG4gIGNhbGw6IENhbGxSZXNwb25zZTtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBHZXRDYWxsUmVzcG9uc2VcbiAgICovXG4gIGR1cmF0aW9uOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7QXJyYXk8TWVtYmVyUmVzcG9uc2U+fVxuICAgKiBAbWVtYmVyb2YgR2V0Q2FsbFJlc3BvbnNlXG4gICAqL1xuICBtZW1iZXJzOiBBcnJheTxNZW1iZXJSZXNwb25zZT47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7TWVtYmVyUmVzcG9uc2V9XG4gICAqIEBtZW1iZXJvZiBHZXRDYWxsUmVzcG9uc2VcbiAgICovXG4gIG1lbWJlcnNoaXA/OiBNZW1iZXJSZXNwb25zZTtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtBcnJheTxPd25DYXBhYmlsaXR5Pn1cbiAgICogQG1lbWJlcm9mIEdldENhbGxSZXNwb25zZVxuICAgKi9cbiAgb3duX2NhcGFiaWxpdGllczogQXJyYXk8T3duQ2FwYWJpbGl0eT47XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIEdldENhbGxUeXBlUmVzcG9uc2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBHZXRDYWxsVHlwZVJlc3BvbnNlIHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBHZXRDYWxsVHlwZVJlc3BvbnNlXG4gICAqL1xuICBjcmVhdGVkX2F0OiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgR2V0Q2FsbFR5cGVSZXNwb25zZVxuICAgKi9cbiAgZHVyYXRpb246IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHt7IFtrZXk6IHN0cmluZ106IEFycmF5PHN0cmluZz47IH19XG4gICAqIEBtZW1iZXJvZiBHZXRDYWxsVHlwZVJlc3BvbnNlXG4gICAqL1xuICBncmFudHM6IHsgW2tleTogc3RyaW5nXTogQXJyYXk8c3RyaW5nPiB9O1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIEdldENhbGxUeXBlUmVzcG9uc2VcbiAgICovXG4gIG5hbWU6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtOb3RpZmljYXRpb25TZXR0aW5nc31cbiAgICogQG1lbWJlcm9mIEdldENhbGxUeXBlUmVzcG9uc2VcbiAgICovXG4gIG5vdGlmaWNhdGlvbl9zZXR0aW5nczogTm90aWZpY2F0aW9uU2V0dGluZ3M7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Q2FsbFNldHRpbmdzUmVzcG9uc2V9XG4gICAqIEBtZW1iZXJvZiBHZXRDYWxsVHlwZVJlc3BvbnNlXG4gICAqL1xuICBzZXR0aW5nczogQ2FsbFNldHRpbmdzUmVzcG9uc2U7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgR2V0Q2FsbFR5cGVSZXNwb25zZVxuICAgKi9cbiAgdXBkYXRlZF9hdDogc3RyaW5nO1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBHZXRFZGdlc1Jlc3BvbnNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgR2V0RWRnZXNSZXNwb25zZSB7XG4gIC8qKlxuICAgKiBEdXJhdGlvbiBvZiB0aGUgcmVxdWVzdCBpbiBodW1hbi1yZWFkYWJsZSBmb3JtYXRcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIEdldEVkZ2VzUmVzcG9uc2VcbiAgICovXG4gIGR1cmF0aW9uOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7QXJyYXk8RWRnZVJlc3BvbnNlPn1cbiAgICogQG1lbWJlcm9mIEdldEVkZ2VzUmVzcG9uc2VcbiAgICovXG4gIGVkZ2VzOiBBcnJheTxFZGdlUmVzcG9uc2U+O1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBHZXRPckNyZWF0ZUNhbGxSZXF1ZXN0XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgR2V0T3JDcmVhdGVDYWxsUmVxdWVzdCB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Q2FsbFJlcXVlc3R9XG4gICAqIEBtZW1iZXJvZiBHZXRPckNyZWF0ZUNhbGxSZXF1ZXN0XG4gICAqL1xuICBkYXRhPzogQ2FsbFJlcXVlc3Q7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKiBAbWVtYmVyb2YgR2V0T3JDcmVhdGVDYWxsUmVxdWVzdFxuICAgKi9cbiAgbWVtYmVyc19saW1pdD86IG51bWJlcjtcbiAgLyoqXG4gICAqIGlmIHByb3ZpZGVkIGl0IHNlbmRzIGEgbm90aWZpY2F0aW9uIGV2ZW50IHRvIHRoZSBtZW1iZXJzIGZvciB0aGlzIGNhbGxcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBHZXRPckNyZWF0ZUNhbGxSZXF1ZXN0XG4gICAqL1xuICBub3RpZnk/OiBib29sZWFuO1xuICAvKipcbiAgICogaWYgcHJvdmlkZWQgaXQgc2VuZHMgYSByaW5nIGV2ZW50IHRvIHRoZSBtZW1iZXJzIGZvciB0aGlzIGNhbGxcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBHZXRPckNyZWF0ZUNhbGxSZXF1ZXN0XG4gICAqL1xuICByaW5nPzogYm9vbGVhbjtcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgR2V0T3JDcmVhdGVDYWxsUmVzcG9uc2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBHZXRPckNyZWF0ZUNhbGxSZXNwb25zZSB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Q2FsbFJlc3BvbnNlfVxuICAgKiBAbWVtYmVyb2YgR2V0T3JDcmVhdGVDYWxsUmVzcG9uc2VcbiAgICovXG4gIGNhbGw6IENhbGxSZXNwb25zZTtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAbWVtYmVyb2YgR2V0T3JDcmVhdGVDYWxsUmVzcG9uc2VcbiAgICovXG4gIGNyZWF0ZWQ6IGJvb2xlYW47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgR2V0T3JDcmVhdGVDYWxsUmVzcG9uc2VcbiAgICovXG4gIGR1cmF0aW9uOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7QXJyYXk8TWVtYmVyUmVzcG9uc2U+fVxuICAgKiBAbWVtYmVyb2YgR2V0T3JDcmVhdGVDYWxsUmVzcG9uc2VcbiAgICovXG4gIG1lbWJlcnM6IEFycmF5PE1lbWJlclJlc3BvbnNlPjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtNZW1iZXJSZXNwb25zZX1cbiAgICogQG1lbWJlcm9mIEdldE9yQ3JlYXRlQ2FsbFJlc3BvbnNlXG4gICAqL1xuICBtZW1iZXJzaGlwPzogTWVtYmVyUmVzcG9uc2U7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7QXJyYXk8T3duQ2FwYWJpbGl0eT59XG4gICAqIEBtZW1iZXJvZiBHZXRPckNyZWF0ZUNhbGxSZXNwb25zZVxuICAgKi9cbiAgb3duX2NhcGFiaWxpdGllczogQXJyYXk8T3duQ2FwYWJpbGl0eT47XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIEdvTGl2ZVJlcXVlc3RcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBHb0xpdmVSZXF1ZXN0IHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBHb0xpdmVSZXF1ZXN0XG4gICAqL1xuICByZWNvcmRpbmdfc3RvcmFnZV9uYW1lPzogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBHb0xpdmVSZXF1ZXN0XG4gICAqL1xuICBzdGFydF9obHM/OiBib29sZWFuO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBHb0xpdmVSZXF1ZXN0XG4gICAqL1xuICBzdGFydF9yZWNvcmRpbmc/OiBib29sZWFuO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBHb0xpdmVSZXF1ZXN0XG4gICAqL1xuICBzdGFydF90cmFuc2NyaXB0aW9uPzogYm9vbGVhbjtcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgR29MaXZlUmVzcG9uc2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBHb0xpdmVSZXNwb25zZSB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Q2FsbFJlc3BvbnNlfVxuICAgKiBAbWVtYmVyb2YgR29MaXZlUmVzcG9uc2VcbiAgICovXG4gIGNhbGw6IENhbGxSZXNwb25zZTtcbiAgLyoqXG4gICAqIER1cmF0aW9uIG9mIHRoZSByZXF1ZXN0IGluIGh1bWFuLXJlYWRhYmxlIGZvcm1hdFxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgR29MaXZlUmVzcG9uc2VcbiAgICovXG4gIGR1cmF0aW9uOiBzdHJpbmc7XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIEhMU1NldHRpbmdzUmVxdWVzdFxuICovXG5leHBvcnQgaW50ZXJmYWNlIEhMU1NldHRpbmdzUmVxdWVzdCB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIEhMU1NldHRpbmdzUmVxdWVzdFxuICAgKi9cbiAgYXV0b19vbj86IGJvb2xlYW47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIEhMU1NldHRpbmdzUmVxdWVzdFxuICAgKi9cbiAgZW5hYmxlZD86IGJvb2xlYW47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7TGF5b3V0U2V0dGluZ3NSZXF1ZXN0fVxuICAgKiBAbWVtYmVyb2YgSExTU2V0dGluZ3NSZXF1ZXN0XG4gICAqL1xuICBsYXlvdXQ/OiBMYXlvdXRTZXR0aW5nc1JlcXVlc3Q7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7QXJyYXk8c3RyaW5nPn1cbiAgICogQG1lbWJlcm9mIEhMU1NldHRpbmdzUmVxdWVzdFxuICAgKi9cbiAgcXVhbGl0eV90cmFja3M/OiBBcnJheTxzdHJpbmc+O1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBITFNTZXR0aW5nc1Jlc3BvbnNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSExTU2V0dGluZ3NSZXNwb25zZSB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIEhMU1NldHRpbmdzUmVzcG9uc2VcbiAgICovXG4gIGF1dG9fb246IGJvb2xlYW47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIEhMU1NldHRpbmdzUmVzcG9uc2VcbiAgICovXG4gIGVuYWJsZWQ6IGJvb2xlYW47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7TGF5b3V0U2V0dGluZ3N9XG4gICAqIEBtZW1iZXJvZiBITFNTZXR0aW5nc1Jlc3BvbnNlXG4gICAqL1xuICBsYXlvdXQ6IExheW91dFNldHRpbmdzO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0FycmF5PHN0cmluZz59XG4gICAqIEBtZW1iZXJvZiBITFNTZXR0aW5nc1Jlc3BvbnNlXG4gICAqL1xuICBxdWFsaXR5X3RyYWNrczogQXJyYXk8c3RyaW5nPjtcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgSGVhbHRoQ2hlY2tFdmVudFxuICovXG5leHBvcnQgaW50ZXJmYWNlIEhlYWx0aENoZWNrRXZlbnQge1xuICAvKipcbiAgICogVGhlIGNvbm5lY3Rpb25faWQgZm9yIHRoaXMgY2xpZW50XG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBIZWFsdGhDaGVja0V2ZW50XG4gICAqL1xuICBjb25uZWN0aW9uX2lkOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgSGVhbHRoQ2hlY2tFdmVudFxuICAgKi9cbiAgY3JlYXRlZF9hdDogc3RyaW5nO1xuICAvKipcbiAgICogVGhlIHR5cGUgb2YgZXZlbnQ6IFwiaGVhbHRoLmNoZWNrXCIgaW4gdGhpcyBjYXNlXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBIZWFsdGhDaGVja0V2ZW50XG4gICAqL1xuICB0eXBlOiBzdHJpbmc7XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIElDRVNlcnZlclxuICovXG5leHBvcnQgaW50ZXJmYWNlIElDRVNlcnZlciB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgSUNFU2VydmVyXG4gICAqL1xuICBwYXNzd29yZDogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0FycmF5PHN0cmluZz59XG4gICAqIEBtZW1iZXJvZiBJQ0VTZXJ2ZXJcbiAgICovXG4gIHVybHM6IEFycmF5PHN0cmluZz47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgSUNFU2VydmVyXG4gICAqL1xuICB1c2VybmFtZTogc3RyaW5nO1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBKb2luQ2FsbFJlcXVlc3RcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBKb2luQ2FsbFJlcXVlc3Qge1xuICAvKipcbiAgICogaWYgdHJ1ZSB0aGUgY2FsbCB3aWxsIGJlIGNyZWF0ZWQgaWYgaXQgZG9lc24ndCBleGlzdFxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIEpvaW5DYWxsUmVxdWVzdFxuICAgKi9cbiAgY3JlYXRlPzogYm9vbGVhbjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtDYWxsUmVxdWVzdH1cbiAgICogQG1lbWJlcm9mIEpvaW5DYWxsUmVxdWVzdFxuICAgKi9cbiAgZGF0YT86IENhbGxSZXF1ZXN0O1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIEpvaW5DYWxsUmVxdWVzdFxuICAgKi9cbiAgbG9jYXRpb246IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqIEBtZW1iZXJvZiBKb2luQ2FsbFJlcXVlc3RcbiAgICovXG4gIG1lbWJlcnNfbGltaXQ/OiBudW1iZXI7XG4gIC8qKlxuICAgKiBJZiB0aGUgcGFydGljaXBhbnQgaXMgbWlncmF0aW5nIGZyb20gYW5vdGhlciBTRlUsIHRoZW4gdGhpcyBpcyB0aGUgSUQgb2YgdGhlIHByZXZpb3VzIFNGVVxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgSm9pbkNhbGxSZXF1ZXN0XG4gICAqL1xuICBtaWdyYXRpbmdfZnJvbT86IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAbWVtYmVyb2YgSm9pbkNhbGxSZXF1ZXN0XG4gICAqL1xuICBub3RpZnk/OiBib29sZWFuO1xuICAvKipcbiAgICogaWYgdHJ1ZSBhbmQgdGhlIGNhbGwgaXMgY3JlYXRlZCwgdGhlIG5vdGlmaWNhdGlvbiB3aWxsIGluY2x1ZGUgcmluZz10cnVlXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAbWVtYmVyb2YgSm9pbkNhbGxSZXF1ZXN0XG4gICAqL1xuICByaW5nPzogYm9vbGVhbjtcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgSm9pbkNhbGxSZXNwb25zZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIEpvaW5DYWxsUmVzcG9uc2Uge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0NhbGxSZXNwb25zZX1cbiAgICogQG1lbWJlcm9mIEpvaW5DYWxsUmVzcG9uc2VcbiAgICovXG4gIGNhbGw6IENhbGxSZXNwb25zZTtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAbWVtYmVyb2YgSm9pbkNhbGxSZXNwb25zZVxuICAgKi9cbiAgY3JlYXRlZDogYm9vbGVhbjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtDcmVkZW50aWFsc31cbiAgICogQG1lbWJlcm9mIEpvaW5DYWxsUmVzcG9uc2VcbiAgICovXG4gIGNyZWRlbnRpYWxzOiBDcmVkZW50aWFscztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBKb2luQ2FsbFJlc3BvbnNlXG4gICAqL1xuICBkdXJhdGlvbjogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0FycmF5PE1lbWJlclJlc3BvbnNlPn1cbiAgICogQG1lbWJlcm9mIEpvaW5DYWxsUmVzcG9uc2VcbiAgICovXG4gIG1lbWJlcnM6IEFycmF5PE1lbWJlclJlc3BvbnNlPjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtNZW1iZXJSZXNwb25zZX1cbiAgICogQG1lbWJlcm9mIEpvaW5DYWxsUmVzcG9uc2VcbiAgICovXG4gIG1lbWJlcnNoaXA/OiBNZW1iZXJSZXNwb25zZTtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtBcnJheTxPd25DYXBhYmlsaXR5Pn1cbiAgICogQG1lbWJlcm9mIEpvaW5DYWxsUmVzcG9uc2VcbiAgICovXG4gIG93bl9jYXBhYmlsaXRpZXM6IEFycmF5PE93bkNhcGFiaWxpdHk+O1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBMYXlvdXRTZXR0aW5nc1xuICovXG5leHBvcnQgaW50ZXJmYWNlIExheW91dFNldHRpbmdzIHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBMYXlvdXRTZXR0aW5nc1xuICAgKi9cbiAgZXh0ZXJuYWxfYXBwX3VybDogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIExheW91dFNldHRpbmdzXG4gICAqL1xuICBleHRlcm5hbF9jc3NfdXJsOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgTGF5b3V0U2V0dGluZ3NcbiAgICovXG4gIG5hbWU6IExheW91dFNldHRpbmdzTmFtZUVudW07XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7eyBba2V5OiBzdHJpbmddOiBhbnk7IH19XG4gICAqIEBtZW1iZXJvZiBMYXlvdXRTZXR0aW5nc1xuICAgKi9cbiAgb3B0aW9ucz86IHsgW2tleTogc3RyaW5nXTogYW55IH07XG59XG5cbi8qKlxuICogQGV4cG9ydFxuICovXG5leHBvcnQgY29uc3QgTGF5b3V0U2V0dGluZ3NOYW1lRW51bSA9IHtcbiAgU1BPVExJR0hUOiAnc3BvdGxpZ2h0JyxcbiAgR1JJRDogJ2dyaWQnLFxuICBTSU5HTEVfUEFSVElDSVBBTlQ6ICdzaW5nbGUtcGFydGljaXBhbnQnLFxuICBNT0JJTEU6ICdtb2JpbGUnLFxuICBDVVNUT006ICdjdXN0b20nLFxufSBhcyBjb25zdDtcbmV4cG9ydCB0eXBlIExheW91dFNldHRpbmdzTmFtZUVudW0gPVxuICAodHlwZW9mIExheW91dFNldHRpbmdzTmFtZUVudW0pW2tleW9mIHR5cGVvZiBMYXlvdXRTZXR0aW5nc05hbWVFbnVtXTtcblxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBMYXlvdXRTZXR0aW5nc1JlcXVlc3RcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBMYXlvdXRTZXR0aW5nc1JlcXVlc3Qge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIExheW91dFNldHRpbmdzUmVxdWVzdFxuICAgKi9cbiAgZXh0ZXJuYWxfYXBwX3VybD86IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBMYXlvdXRTZXR0aW5nc1JlcXVlc3RcbiAgICovXG4gIGV4dGVybmFsX2Nzc191cmw/OiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgTGF5b3V0U2V0dGluZ3NSZXF1ZXN0XG4gICAqL1xuICBuYW1lOiBMYXlvdXRTZXR0aW5nc1JlcXVlc3ROYW1lRW51bTtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHt7IFtrZXk6IHN0cmluZ106IGFueTsgfX1cbiAgICogQG1lbWJlcm9mIExheW91dFNldHRpbmdzUmVxdWVzdFxuICAgKi9cbiAgb3B0aW9ucz86IHsgW2tleTogc3RyaW5nXTogYW55IH07XG59XG5cbi8qKlxuICogQGV4cG9ydFxuICovXG5leHBvcnQgY29uc3QgTGF5b3V0U2V0dGluZ3NSZXF1ZXN0TmFtZUVudW0gPSB7XG4gIFNQT1RMSUdIVDogJ3Nwb3RsaWdodCcsXG4gIEdSSUQ6ICdncmlkJyxcbiAgU0lOR0xFX1BBUlRJQ0lQQU5UOiAnc2luZ2xlLXBhcnRpY2lwYW50JyxcbiAgTU9CSUxFOiAnbW9iaWxlJyxcbiAgQ1VTVE9NOiAnY3VzdG9tJyxcbn0gYXMgY29uc3Q7XG5leHBvcnQgdHlwZSBMYXlvdXRTZXR0aW5nc1JlcXVlc3ROYW1lRW51bSA9XG4gICh0eXBlb2YgTGF5b3V0U2V0dGluZ3NSZXF1ZXN0TmFtZUVudW0pW2tleW9mIHR5cGVvZiBMYXlvdXRTZXR0aW5nc1JlcXVlc3ROYW1lRW51bV07XG5cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgTGlzdENhbGxUeXBlUmVzcG9uc2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBMaXN0Q2FsbFR5cGVSZXNwb25zZSB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7eyBba2V5OiBzdHJpbmddOiBDYWxsVHlwZVJlc3BvbnNlOyB9fVxuICAgKiBAbWVtYmVyb2YgTGlzdENhbGxUeXBlUmVzcG9uc2VcbiAgICovXG4gIGNhbGxfdHlwZXM6IHsgW2tleTogc3RyaW5nXTogQ2FsbFR5cGVSZXNwb25zZSB9O1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIExpc3RDYWxsVHlwZVJlc3BvbnNlXG4gICAqL1xuICBkdXJhdGlvbjogc3RyaW5nO1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBMaXN0RGV2aWNlc1Jlc3BvbnNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgTGlzdERldmljZXNSZXNwb25zZSB7XG4gIC8qKlxuICAgKiBMaXN0IG9mIGRldmljZXNcbiAgICogQHR5cGUge0FycmF5PERldmljZT59XG4gICAqIEBtZW1iZXJvZiBMaXN0RGV2aWNlc1Jlc3BvbnNlXG4gICAqL1xuICBkZXZpY2VzOiBBcnJheTxEZXZpY2U+O1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIExpc3REZXZpY2VzUmVzcG9uc2VcbiAgICovXG4gIGR1cmF0aW9uOiBzdHJpbmc7XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIExpc3RSZWNvcmRpbmdzUmVzcG9uc2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBMaXN0UmVjb3JkaW5nc1Jlc3BvbnNlIHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBMaXN0UmVjb3JkaW5nc1Jlc3BvbnNlXG4gICAqL1xuICBkdXJhdGlvbjogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0FycmF5PENhbGxSZWNvcmRpbmc+fVxuICAgKiBAbWVtYmVyb2YgTGlzdFJlY29yZGluZ3NSZXNwb25zZVxuICAgKi9cbiAgcmVjb3JkaW5nczogQXJyYXk8Q2FsbFJlY29yZGluZz47XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIE1lbWJlclJlcXVlc3RcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBNZW1iZXJSZXF1ZXN0IHtcbiAgLyoqXG4gICAqIEN1c3RvbSBkYXRhIGZvciB0aGlzIG9iamVjdFxuICAgKiBAdHlwZSB7eyBba2V5OiBzdHJpbmddOiBhbnk7IH19XG4gICAqIEBtZW1iZXJvZiBNZW1iZXJSZXF1ZXN0XG4gICAqL1xuICBjdXN0b20/OiB7IFtrZXk6IHN0cmluZ106IGFueSB9O1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIE1lbWJlclJlcXVlc3RcbiAgICovXG4gIHJvbGU/OiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgTWVtYmVyUmVxdWVzdFxuICAgKi9cbiAgdXNlcl9pZDogc3RyaW5nO1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBNZW1iZXJSZXNwb25zZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIE1lbWJlclJlc3BvbnNlIHtcbiAgLyoqXG4gICAqIERhdGUvdGltZSBvZiBjcmVhdGlvblxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgTWVtYmVyUmVzcG9uc2VcbiAgICovXG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbiAgLyoqXG4gICAqIEN1c3RvbSBtZW1iZXIgcmVzcG9uc2UgZGF0YVxuICAgKiBAdHlwZSB7eyBba2V5OiBzdHJpbmddOiBhbnk7IH19XG4gICAqIEBtZW1iZXJvZiBNZW1iZXJSZXNwb25zZVxuICAgKi9cbiAgY3VzdG9tOiB7IFtrZXk6IHN0cmluZ106IGFueSB9O1xuICAvKipcbiAgICogRGF0ZS90aW1lIG9mIGRlbGV0aW9uXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBNZW1iZXJSZXNwb25zZVxuICAgKi9cbiAgZGVsZXRlZF9hdD86IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBNZW1iZXJSZXNwb25zZVxuICAgKi9cbiAgcm9sZT86IHN0cmluZztcbiAgLyoqXG4gICAqIERhdGUvdGltZSBvZiB0aGUgbGFzdCB1cGRhdGVcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIE1lbWJlclJlc3BvbnNlXG4gICAqL1xuICB1cGRhdGVkX2F0OiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7VXNlclJlc3BvbnNlfVxuICAgKiBAbWVtYmVyb2YgTWVtYmVyUmVzcG9uc2VcbiAgICovXG4gIHVzZXI6IFVzZXJSZXNwb25zZTtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBNZW1iZXJSZXNwb25zZVxuICAgKi9cbiAgdXNlcl9pZDogc3RyaW5nO1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBNdXRlVXNlcnNSZXF1ZXN0XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgTXV0ZVVzZXJzUmVxdWVzdCB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIE11dGVVc2Vyc1JlcXVlc3RcbiAgICovXG4gIGF1ZGlvPzogYm9vbGVhbjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAbWVtYmVyb2YgTXV0ZVVzZXJzUmVxdWVzdFxuICAgKi9cbiAgbXV0ZV9hbGxfdXNlcnM/OiBib29sZWFuO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBNdXRlVXNlcnNSZXF1ZXN0XG4gICAqL1xuICBzY3JlZW5zaGFyZT86IGJvb2xlYW47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIE11dGVVc2Vyc1JlcXVlc3RcbiAgICovXG4gIHNjcmVlbnNoYXJlX2F1ZGlvPzogYm9vbGVhbjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtBcnJheTxzdHJpbmc+fVxuICAgKiBAbWVtYmVyb2YgTXV0ZVVzZXJzUmVxdWVzdFxuICAgKi9cbiAgdXNlcl9pZHM/OiBBcnJheTxzdHJpbmc+O1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBNdXRlVXNlcnNSZXF1ZXN0XG4gICAqL1xuICB2aWRlbz86IGJvb2xlYW47XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIE11dGVVc2Vyc1Jlc3BvbnNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgTXV0ZVVzZXJzUmVzcG9uc2Uge1xuICAvKipcbiAgICogRHVyYXRpb24gb2YgdGhlIHJlcXVlc3QgaW4gaHVtYW4tcmVhZGFibGUgZm9ybWF0XG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBNdXRlVXNlcnNSZXNwb25zZVxuICAgKi9cbiAgZHVyYXRpb246IHN0cmluZztcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgTm90aWZpY2F0aW9uU2V0dGluZ3NcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBOb3RpZmljYXRpb25TZXR0aW5ncyB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7RXZlbnROb3RpZmljYXRpb25TZXR0aW5nc31cbiAgICogQG1lbWJlcm9mIE5vdGlmaWNhdGlvblNldHRpbmdzXG4gICAqL1xuICBjYWxsX2xpdmVfc3RhcnRlZDogRXZlbnROb3RpZmljYXRpb25TZXR0aW5ncztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtFdmVudE5vdGlmaWNhdGlvblNldHRpbmdzfVxuICAgKiBAbWVtYmVyb2YgTm90aWZpY2F0aW9uU2V0dGluZ3NcbiAgICovXG4gIGNhbGxfbm90aWZpY2F0aW9uOiBFdmVudE5vdGlmaWNhdGlvblNldHRpbmdzO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0V2ZW50Tm90aWZpY2F0aW9uU2V0dGluZ3N9XG4gICAqIEBtZW1iZXJvZiBOb3RpZmljYXRpb25TZXR0aW5nc1xuICAgKi9cbiAgY2FsbF9yaW5nOiBFdmVudE5vdGlmaWNhdGlvblNldHRpbmdzO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBOb3RpZmljYXRpb25TZXR0aW5nc1xuICAgKi9cbiAgZW5hYmxlZDogYm9vbGVhbjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtFdmVudE5vdGlmaWNhdGlvblNldHRpbmdzfVxuICAgKiBAbWVtYmVyb2YgTm90aWZpY2F0aW9uU2V0dGluZ3NcbiAgICovXG4gIHNlc3Npb25fc3RhcnRlZDogRXZlbnROb3RpZmljYXRpb25TZXR0aW5ncztcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgTm90aWZpY2F0aW9uU2V0dGluZ3NSZXF1ZXN0XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgTm90aWZpY2F0aW9uU2V0dGluZ3NSZXF1ZXN0IHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtFdmVudE5vdGlmaWNhdGlvblNldHRpbmdzUmVxdWVzdH1cbiAgICogQG1lbWJlcm9mIE5vdGlmaWNhdGlvblNldHRpbmdzUmVxdWVzdFxuICAgKi9cbiAgY2FsbF9saXZlX3N0YXJ0ZWQ/OiBFdmVudE5vdGlmaWNhdGlvblNldHRpbmdzUmVxdWVzdDtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtFdmVudE5vdGlmaWNhdGlvblNldHRpbmdzUmVxdWVzdH1cbiAgICogQG1lbWJlcm9mIE5vdGlmaWNhdGlvblNldHRpbmdzUmVxdWVzdFxuICAgKi9cbiAgY2FsbF9ub3RpZmljYXRpb24/OiBFdmVudE5vdGlmaWNhdGlvblNldHRpbmdzUmVxdWVzdDtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtFdmVudE5vdGlmaWNhdGlvblNldHRpbmdzUmVxdWVzdH1cbiAgICogQG1lbWJlcm9mIE5vdGlmaWNhdGlvblNldHRpbmdzUmVxdWVzdFxuICAgKi9cbiAgY2FsbF9yaW5nPzogRXZlbnROb3RpZmljYXRpb25TZXR0aW5nc1JlcXVlc3Q7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIE5vdGlmaWNhdGlvblNldHRpbmdzUmVxdWVzdFxuICAgKi9cbiAgZW5hYmxlZD86IGJvb2xlYW47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7RXZlbnROb3RpZmljYXRpb25TZXR0aW5nc1JlcXVlc3R9XG4gICAqIEBtZW1iZXJvZiBOb3RpZmljYXRpb25TZXR0aW5nc1JlcXVlc3RcbiAgICovXG4gIHNlc3Npb25fc3RhcnRlZD86IEV2ZW50Tm90aWZpY2F0aW9uU2V0dGluZ3NSZXF1ZXN0O1xufVxuXG4vKipcbiAqIEFsbCBwb3NzaWJpbGl0eSBvZiBzdHJpbmcgdG8gdXNlXG4gKiBAZXhwb3J0XG4gKi9cbmV4cG9ydCBjb25zdCBPd25DYXBhYmlsaXR5ID0ge1xuICBCTE9DS19VU0VSUzogJ2Jsb2NrLXVzZXJzJyxcbiAgQ1JFQVRFX0NBTEw6ICdjcmVhdGUtY2FsbCcsXG4gIENSRUFURV9SRUFDVElPTjogJ2NyZWF0ZS1yZWFjdGlvbicsXG4gIEVORF9DQUxMOiAnZW5kLWNhbGwnLFxuICBKT0lOX0JBQ0tTVEFHRTogJ2pvaW4tYmFja3N0YWdlJyxcbiAgSk9JTl9DQUxMOiAnam9pbi1jYWxsJyxcbiAgSk9JTl9FTkRFRF9DQUxMOiAnam9pbi1lbmRlZC1jYWxsJyxcbiAgTVVURV9VU0VSUzogJ211dGUtdXNlcnMnLFxuICBQSU5fRk9SX0VWRVJZT05FOiAncGluLWZvci1ldmVyeW9uZScsXG4gIFJFQURfQ0FMTDogJ3JlYWQtY2FsbCcsXG4gIFJFTU9WRV9DQUxMX01FTUJFUjogJ3JlbW92ZS1jYWxsLW1lbWJlcicsXG4gIFNDUkVFTlNIQVJFOiAnc2NyZWVuc2hhcmUnLFxuICBTRU5EX0FVRElPOiAnc2VuZC1hdWRpbycsXG4gIFNFTkRfVklERU86ICdzZW5kLXZpZGVvJyxcbiAgU1RBUlRfQlJPQURDQVNUX0NBTEw6ICdzdGFydC1icm9hZGNhc3QtY2FsbCcsXG4gIFNUQVJUX1JFQ09SRF9DQUxMOiAnc3RhcnQtcmVjb3JkLWNhbGwnLFxuICBTVEFSVF9UUkFOU0NSSVBUSU9OX0NBTEw6ICdzdGFydC10cmFuc2NyaXB0aW9uLWNhbGwnLFxuICBTVE9QX0JST0FEQ0FTVF9DQUxMOiAnc3RvcC1icm9hZGNhc3QtY2FsbCcsXG4gIFNUT1BfUkVDT1JEX0NBTEw6ICdzdG9wLXJlY29yZC1jYWxsJyxcbiAgU1RPUF9UUkFOU0NSSVBUSU9OX0NBTEw6ICdzdG9wLXRyYW5zY3JpcHRpb24tY2FsbCcsXG4gIFVQREFURV9DQUxMOiAndXBkYXRlLWNhbGwnLFxuICBVUERBVEVfQ0FMTF9NRU1CRVI6ICd1cGRhdGUtY2FsbC1tZW1iZXInLFxuICBVUERBVEVfQ0FMTF9QRVJNSVNTSU9OUzogJ3VwZGF0ZS1jYWxsLXBlcm1pc3Npb25zJyxcbiAgVVBEQVRFX0NBTExfU0VUVElOR1M6ICd1cGRhdGUtY2FsbC1zZXR0aW5ncycsXG59IGFzIGNvbnN0O1xuZXhwb3J0IHR5cGUgT3duQ2FwYWJpbGl0eSA9ICh0eXBlb2YgT3duQ2FwYWJpbGl0eSlba2V5b2YgdHlwZW9mIE93bkNhcGFiaWxpdHldO1xuXG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIE93blVzZXJSZXNwb25zZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIE93blVzZXJSZXNwb25zZSB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgT3duVXNlclJlc3BvbnNlXG4gICAqL1xuICBjcmVhdGVkX2F0OiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7eyBba2V5OiBzdHJpbmddOiBhbnk7IH19XG4gICAqIEBtZW1iZXJvZiBPd25Vc2VyUmVzcG9uc2VcbiAgICovXG4gIGN1c3RvbTogeyBba2V5OiBzdHJpbmddOiBhbnkgfTtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBPd25Vc2VyUmVzcG9uc2VcbiAgICovXG4gIGRlbGV0ZWRfYXQ/OiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7QXJyYXk8RGV2aWNlPn1cbiAgICogQG1lbWJlcm9mIE93blVzZXJSZXNwb25zZVxuICAgKi9cbiAgZGV2aWNlczogQXJyYXk8RGV2aWNlPjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBPd25Vc2VyUmVzcG9uc2VcbiAgICovXG4gIGlkOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgT3duVXNlclJlc3BvbnNlXG4gICAqL1xuICBpbWFnZT86IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBPd25Vc2VyUmVzcG9uc2VcbiAgICovXG4gIG5hbWU/OiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgT3duVXNlclJlc3BvbnNlXG4gICAqL1xuICByb2xlOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7QXJyYXk8c3RyaW5nPn1cbiAgICogQG1lbWJlcm9mIE93blVzZXJSZXNwb25zZVxuICAgKi9cbiAgdGVhbXM6IEFycmF5PHN0cmluZz47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgT3duVXNlclJlc3BvbnNlXG4gICAqL1xuICB1cGRhdGVkX2F0OiBzdHJpbmc7XG59XG4vKipcbiAqIFRoaXMgZXZlbnQgaXMgc2VudCB3aGVuIGEgdXNlciByZXF1ZXN0cyBhY2Nlc3MgdG8gYSBmZWF0dXJlIG9uIGEgY2FsbCxcbiAqIGNsaWVudHMgcmVjZWl2aW5nIHRoaXMgZXZlbnQgc2hvdWxkIGRpc3BsYXkgYSBwZXJtaXNzaW9uIHJlcXVlc3QgdG8gdGhlIHVzZXJcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgUGVybWlzc2lvblJlcXVlc3RFdmVudFxuICovXG5leHBvcnQgaW50ZXJmYWNlIFBlcm1pc3Npb25SZXF1ZXN0RXZlbnQge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFBlcm1pc3Npb25SZXF1ZXN0RXZlbnRcbiAgICovXG4gIGNhbGxfY2lkOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgUGVybWlzc2lvblJlcXVlc3RFdmVudFxuICAgKi9cbiAgY3JlYXRlZF9hdDogc3RyaW5nO1xuICAvKipcbiAgICogVGhlIGxpc3Qgb2YgcGVybWlzc2lvbnMgcmVxdWVzdGVkIGJ5IHRoZSB1c2VyXG4gICAqIEB0eXBlIHtBcnJheTxzdHJpbmc+fVxuICAgKiBAbWVtYmVyb2YgUGVybWlzc2lvblJlcXVlc3RFdmVudFxuICAgKi9cbiAgcGVybWlzc2lvbnM6IEFycmF5PHN0cmluZz47XG4gIC8qKlxuICAgKiBUaGUgdHlwZSBvZiBldmVudDogXCJjYWxsLnBlcm1pc3Npb25fcmVxdWVzdFwiIGluIHRoaXMgY2FzZVxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgUGVybWlzc2lvblJlcXVlc3RFdmVudFxuICAgKi9cbiAgdHlwZTogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge1VzZXJSZXNwb25zZX1cbiAgICogQG1lbWJlcm9mIFBlcm1pc3Npb25SZXF1ZXN0RXZlbnRcbiAgICovXG4gIHVzZXI6IFVzZXJSZXNwb25zZTtcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgUGluUmVxdWVzdFxuICovXG5leHBvcnQgaW50ZXJmYWNlIFBpblJlcXVlc3Qge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFBpblJlcXVlc3RcbiAgICovXG4gIHNlc3Npb25faWQ6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBQaW5SZXF1ZXN0XG4gICAqL1xuICB1c2VyX2lkOiBzdHJpbmc7XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIFBpblJlc3BvbnNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUGluUmVzcG9uc2Uge1xuICAvKipcbiAgICogRHVyYXRpb24gb2YgdGhlIHJlcXVlc3QgaW4gaHVtYW4tcmVhZGFibGUgZm9ybWF0XG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBQaW5SZXNwb25zZVxuICAgKi9cbiAgZHVyYXRpb246IHN0cmluZztcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgUXVlcnlDYWxsc1JlcXVlc3RcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBRdWVyeUNhbGxzUmVxdWVzdCB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7eyBba2V5OiBzdHJpbmddOiBhbnk7IH19XG4gICAqIEBtZW1iZXJvZiBRdWVyeUNhbGxzUmVxdWVzdFxuICAgKi9cbiAgZmlsdGVyX2NvbmRpdGlvbnM/OiB7IFtrZXk6IHN0cmluZ106IGFueSB9O1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge251bWJlcn1cbiAgICogQG1lbWJlcm9mIFF1ZXJ5Q2FsbHNSZXF1ZXN0XG4gICAqL1xuICBsaW1pdD86IG51bWJlcjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBRdWVyeUNhbGxzUmVxdWVzdFxuICAgKi9cbiAgbmV4dD86IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBRdWVyeUNhbGxzUmVxdWVzdFxuICAgKi9cbiAgcHJldj86IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtBcnJheTxTb3J0UGFyYW1SZXF1ZXN0Pn1cbiAgICogQG1lbWJlcm9mIFF1ZXJ5Q2FsbHNSZXF1ZXN0XG4gICAqL1xuICBzb3J0PzogQXJyYXk8U29ydFBhcmFtUmVxdWVzdD47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIFF1ZXJ5Q2FsbHNSZXF1ZXN0XG4gICAqL1xuICB3YXRjaD86IGJvb2xlYW47XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIFF1ZXJ5Q2FsbHNSZXNwb25zZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIFF1ZXJ5Q2FsbHNSZXNwb25zZSB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7QXJyYXk8Q2FsbFN0YXRlUmVzcG9uc2VGaWVsZHM+fVxuICAgKiBAbWVtYmVyb2YgUXVlcnlDYWxsc1Jlc3BvbnNlXG4gICAqL1xuICBjYWxsczogQXJyYXk8Q2FsbFN0YXRlUmVzcG9uc2VGaWVsZHM+O1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFF1ZXJ5Q2FsbHNSZXNwb25zZVxuICAgKi9cbiAgZHVyYXRpb246IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBRdWVyeUNhbGxzUmVzcG9uc2VcbiAgICovXG4gIG5leHQ/OiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgUXVlcnlDYWxsc1Jlc3BvbnNlXG4gICAqL1xuICBwcmV2Pzogc3RyaW5nO1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBRdWVyeU1lbWJlcnNSZXF1ZXN0XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUXVlcnlNZW1iZXJzUmVxdWVzdCB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7eyBba2V5OiBzdHJpbmddOiBhbnk7IH19XG4gICAqIEBtZW1iZXJvZiBRdWVyeU1lbWJlcnNSZXF1ZXN0XG4gICAqL1xuICBmaWx0ZXJfY29uZGl0aW9ucz86IHsgW2tleTogc3RyaW5nXTogYW55IH07XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgUXVlcnlNZW1iZXJzUmVxdWVzdFxuICAgKi9cbiAgaWQ6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqIEBtZW1iZXJvZiBRdWVyeU1lbWJlcnNSZXF1ZXN0XG4gICAqL1xuICBsaW1pdD86IG51bWJlcjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBRdWVyeU1lbWJlcnNSZXF1ZXN0XG4gICAqL1xuICBuZXh0Pzogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFF1ZXJ5TWVtYmVyc1JlcXVlc3RcbiAgICovXG4gIHByZXY/OiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7QXJyYXk8U29ydFBhcmFtUmVxdWVzdD59XG4gICAqIEBtZW1iZXJvZiBRdWVyeU1lbWJlcnNSZXF1ZXN0XG4gICAqL1xuICBzb3J0PzogQXJyYXk8U29ydFBhcmFtUmVxdWVzdD47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgUXVlcnlNZW1iZXJzUmVxdWVzdFxuICAgKi9cbiAgdHlwZTogc3RyaW5nO1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBRdWVyeU1lbWJlcnNSZXNwb25zZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIFF1ZXJ5TWVtYmVyc1Jlc3BvbnNlIHtcbiAgLyoqXG4gICAqIER1cmF0aW9uIG9mIHRoZSByZXF1ZXN0IGluIGh1bWFuLXJlYWRhYmxlIGZvcm1hdFxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgUXVlcnlNZW1iZXJzUmVzcG9uc2VcbiAgICovXG4gIGR1cmF0aW9uOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7QXJyYXk8TWVtYmVyUmVzcG9uc2U+fVxuICAgKiBAbWVtYmVyb2YgUXVlcnlNZW1iZXJzUmVzcG9uc2VcbiAgICovXG4gIG1lbWJlcnM6IEFycmF5PE1lbWJlclJlc3BvbnNlPjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBRdWVyeU1lbWJlcnNSZXNwb25zZVxuICAgKi9cbiAgbmV4dD86IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBRdWVyeU1lbWJlcnNSZXNwb25zZVxuICAgKi9cbiAgcHJldj86IHN0cmluZztcbn1cbi8qKlxuICogUlRNUCBpbnB1dCBzZXR0aW5nc1xuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBSVE1QSW5ncmVzc1xuICovXG5leHBvcnQgaW50ZXJmYWNlIFJUTVBJbmdyZXNzIHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBSVE1QSW5ncmVzc1xuICAgKi9cbiAgYWRkcmVzczogc3RyaW5nO1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBSZWFjdGlvblJlc3BvbnNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUmVhY3Rpb25SZXNwb25zZSB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7eyBba2V5OiBzdHJpbmddOiBhbnk7IH19XG4gICAqIEBtZW1iZXJvZiBSZWFjdGlvblJlc3BvbnNlXG4gICAqL1xuICBjdXN0b20/OiB7IFtrZXk6IHN0cmluZ106IGFueSB9O1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFJlYWN0aW9uUmVzcG9uc2VcbiAgICovXG4gIGVtb2ppX2NvZGU/OiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgUmVhY3Rpb25SZXNwb25zZVxuICAgKi9cbiAgdHlwZTogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge1VzZXJSZXNwb25zZX1cbiAgICogQG1lbWJlcm9mIFJlYWN0aW9uUmVzcG9uc2VcbiAgICovXG4gIHVzZXI6IFVzZXJSZXNwb25zZTtcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgUmVjb3JkU2V0dGluZ3NSZXF1ZXN0XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUmVjb3JkU2V0dGluZ3NSZXF1ZXN0IHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAbWVtYmVyb2YgUmVjb3JkU2V0dGluZ3NSZXF1ZXN0XG4gICAqL1xuICBhdWRpb19vbmx5PzogYm9vbGVhbjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtMYXlvdXRTZXR0aW5nc1JlcXVlc3R9XG4gICAqIEBtZW1iZXJvZiBSZWNvcmRTZXR0aW5nc1JlcXVlc3RcbiAgICovXG4gIGxheW91dD86IExheW91dFNldHRpbmdzUmVxdWVzdDtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBSZWNvcmRTZXR0aW5nc1JlcXVlc3RcbiAgICovXG4gIG1vZGU6IFJlY29yZFNldHRpbmdzUmVxdWVzdE1vZGVFbnVtO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFJlY29yZFNldHRpbmdzUmVxdWVzdFxuICAgKi9cbiAgcXVhbGl0eT86IFJlY29yZFNldHRpbmdzUmVxdWVzdFF1YWxpdHlFbnVtO1xufVxuXG4vKipcbiAqIEBleHBvcnRcbiAqL1xuZXhwb3J0IGNvbnN0IFJlY29yZFNldHRpbmdzUmVxdWVzdE1vZGVFbnVtID0ge1xuICBBVkFJTEFCTEU6ICdhdmFpbGFibGUnLFxuICBESVNBQkxFRDogJ2Rpc2FibGVkJyxcbiAgQVVUT19PTjogJ2F1dG8tb24nLFxufSBhcyBjb25zdDtcbmV4cG9ydCB0eXBlIFJlY29yZFNldHRpbmdzUmVxdWVzdE1vZGVFbnVtID1cbiAgKHR5cGVvZiBSZWNvcmRTZXR0aW5nc1JlcXVlc3RNb2RlRW51bSlba2V5b2YgdHlwZW9mIFJlY29yZFNldHRpbmdzUmVxdWVzdE1vZGVFbnVtXTtcblxuLyoqXG4gKiBAZXhwb3J0XG4gKi9cbmV4cG9ydCBjb25zdCBSZWNvcmRTZXR0aW5nc1JlcXVlc3RRdWFsaXR5RW51bSA9IHtcbiAgXzM2MFA6ICczNjBwJyxcbiAgXzQ4MFA6ICc0ODBwJyxcbiAgXzcyMFA6ICc3MjBwJyxcbiAgXzEwODBQOiAnMTA4MHAnLFxuICBfMTQ0MFA6ICcxNDQwcCcsXG59IGFzIGNvbnN0O1xuZXhwb3J0IHR5cGUgUmVjb3JkU2V0dGluZ3NSZXF1ZXN0UXVhbGl0eUVudW0gPVxuICAodHlwZW9mIFJlY29yZFNldHRpbmdzUmVxdWVzdFF1YWxpdHlFbnVtKVtrZXlvZiB0eXBlb2YgUmVjb3JkU2V0dGluZ3NSZXF1ZXN0UXVhbGl0eUVudW1dO1xuXG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIFJlY29yZFNldHRpbmdzUmVzcG9uc2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBSZWNvcmRTZXR0aW5nc1Jlc3BvbnNlIHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAbWVtYmVyb2YgUmVjb3JkU2V0dGluZ3NSZXNwb25zZVxuICAgKi9cbiAgYXVkaW9fb25seTogYm9vbGVhbjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtMYXlvdXRTZXR0aW5nc31cbiAgICogQG1lbWJlcm9mIFJlY29yZFNldHRpbmdzUmVzcG9uc2VcbiAgICovXG4gIGxheW91dDogTGF5b3V0U2V0dGluZ3M7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgUmVjb3JkU2V0dGluZ3NSZXNwb25zZVxuICAgKi9cbiAgbW9kZTogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFJlY29yZFNldHRpbmdzUmVzcG9uc2VcbiAgICovXG4gIHF1YWxpdHk6IHN0cmluZztcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgUmVqZWN0Q2FsbFJlc3BvbnNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUmVqZWN0Q2FsbFJlc3BvbnNlIHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBSZWplY3RDYWxsUmVzcG9uc2VcbiAgICovXG4gIGR1cmF0aW9uOiBzdHJpbmc7XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIFJlcXVlc3RQZXJtaXNzaW9uUmVxdWVzdFxuICovXG5leHBvcnQgaW50ZXJmYWNlIFJlcXVlc3RQZXJtaXNzaW9uUmVxdWVzdCB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7QXJyYXk8c3RyaW5nPn1cbiAgICogQG1lbWJlcm9mIFJlcXVlc3RQZXJtaXNzaW9uUmVxdWVzdFxuICAgKi9cbiAgcGVybWlzc2lvbnM6IEFycmF5PHN0cmluZz47XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIFJlcXVlc3RQZXJtaXNzaW9uUmVzcG9uc2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBSZXF1ZXN0UGVybWlzc2lvblJlc3BvbnNlIHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBSZXF1ZXN0UGVybWlzc2lvblJlc3BvbnNlXG4gICAqL1xuICBkdXJhdGlvbjogc3RyaW5nO1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBSZXNwb25zZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIFJlc3BvbnNlIHtcbiAgLyoqXG4gICAqIER1cmF0aW9uIG9mIHRoZSByZXF1ZXN0IGluIGh1bWFuLXJlYWRhYmxlIGZvcm1hdFxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgUmVzcG9uc2VcbiAgICovXG4gIGR1cmF0aW9uOiBzdHJpbmc7XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIFJpbmdTZXR0aW5nc1xuICovXG5leHBvcnQgaW50ZXJmYWNlIFJpbmdTZXR0aW5ncyB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKiBAbWVtYmVyb2YgUmluZ1NldHRpbmdzXG4gICAqL1xuICBhdXRvX2NhbmNlbF90aW1lb3V0X21zOiBudW1iZXI7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKiBAbWVtYmVyb2YgUmluZ1NldHRpbmdzXG4gICAqL1xuICBpbmNvbWluZ19jYWxsX3RpbWVvdXRfbXM6IG51bWJlcjtcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgUmluZ1NldHRpbmdzUmVxdWVzdFxuICovXG5leHBvcnQgaW50ZXJmYWNlIFJpbmdTZXR0aW5nc1JlcXVlc3Qge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge251bWJlcn1cbiAgICogQG1lbWJlcm9mIFJpbmdTZXR0aW5nc1JlcXVlc3RcbiAgICovXG4gIGF1dG9fY2FuY2VsX3RpbWVvdXRfbXM/OiBudW1iZXI7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKiBAbWVtYmVyb2YgUmluZ1NldHRpbmdzUmVxdWVzdFxuICAgKi9cbiAgaW5jb21pbmdfY2FsbF90aW1lb3V0X21zPzogbnVtYmVyO1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBTRlVSZXNwb25zZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIFNGVVJlc3BvbnNlIHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBTRlVSZXNwb25zZVxuICAgKi9cbiAgZWRnZV9uYW1lOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgU0ZVUmVzcG9uc2VcbiAgICovXG4gIHVybDogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFNGVVJlc3BvbnNlXG4gICAqL1xuICB3c19lbmRwb2ludDogc3RyaW5nO1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBTY3JlZW5zaGFyaW5nU2V0dGluZ3NcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBTY3JlZW5zaGFyaW5nU2V0dGluZ3Mge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBTY3JlZW5zaGFyaW5nU2V0dGluZ3NcbiAgICovXG4gIGFjY2Vzc19yZXF1ZXN0X2VuYWJsZWQ6IGJvb2xlYW47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIFNjcmVlbnNoYXJpbmdTZXR0aW5nc1xuICAgKi9cbiAgZW5hYmxlZDogYm9vbGVhbjtcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgU2NyZWVuc2hhcmluZ1NldHRpbmdzUmVxdWVzdFxuICovXG5leHBvcnQgaW50ZXJmYWNlIFNjcmVlbnNoYXJpbmdTZXR0aW5nc1JlcXVlc3Qge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBtZW1iZXJvZiBTY3JlZW5zaGFyaW5nU2V0dGluZ3NSZXF1ZXN0XG4gICAqL1xuICBhY2Nlc3NfcmVxdWVzdF9lbmFibGVkPzogYm9vbGVhbjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAbWVtYmVyb2YgU2NyZWVuc2hhcmluZ1NldHRpbmdzUmVxdWVzdFxuICAgKi9cbiAgZW5hYmxlZD86IGJvb2xlYW47XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIFNlbmRFdmVudFJlcXVlc3RcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBTZW5kRXZlbnRSZXF1ZXN0IHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHt7IFtrZXk6IHN0cmluZ106IGFueTsgfX1cbiAgICogQG1lbWJlcm9mIFNlbmRFdmVudFJlcXVlc3RcbiAgICovXG4gIGN1c3RvbT86IHsgW2tleTogc3RyaW5nXTogYW55IH07XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIFNlbmRFdmVudFJlc3BvbnNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU2VuZEV2ZW50UmVzcG9uc2Uge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFNlbmRFdmVudFJlc3BvbnNlXG4gICAqL1xuICBkdXJhdGlvbjogc3RyaW5nO1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBTZW5kUmVhY3Rpb25SZXF1ZXN0XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU2VuZFJlYWN0aW9uUmVxdWVzdCB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7eyBba2V5OiBzdHJpbmddOiBhbnk7IH19XG4gICAqIEBtZW1iZXJvZiBTZW5kUmVhY3Rpb25SZXF1ZXN0XG4gICAqL1xuICBjdXN0b20/OiB7IFtrZXk6IHN0cmluZ106IGFueSB9O1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFNlbmRSZWFjdGlvblJlcXVlc3RcbiAgICovXG4gIGVtb2ppX2NvZGU/OiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgU2VuZFJlYWN0aW9uUmVxdWVzdFxuICAgKi9cbiAgdHlwZTogc3RyaW5nO1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBTZW5kUmVhY3Rpb25SZXNwb25zZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIFNlbmRSZWFjdGlvblJlc3BvbnNlIHtcbiAgLyoqXG4gICAqIER1cmF0aW9uIG9mIHRoZSByZXF1ZXN0IGluIGh1bWFuLXJlYWRhYmxlIGZvcm1hdFxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgU2VuZFJlYWN0aW9uUmVzcG9uc2VcbiAgICovXG4gIGR1cmF0aW9uOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7UmVhY3Rpb25SZXNwb25zZX1cbiAgICogQG1lbWJlcm9mIFNlbmRSZWFjdGlvblJlc3BvbnNlXG4gICAqL1xuICByZWFjdGlvbjogUmVhY3Rpb25SZXNwb25zZTtcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgU29ydFBhcmFtUmVxdWVzdFxuICovXG5leHBvcnQgaW50ZXJmYWNlIFNvcnRQYXJhbVJlcXVlc3Qge1xuICAvKipcbiAgICogRGlyZWN0aW9uIG9mIHNvcnRpbmcsIC0xIGZvciBkZXNjZW5kaW5nLCAxIGZvciBhc2NlbmRpbmdcbiAgICogQHR5cGUge251bWJlcn1cbiAgICogQG1lbWJlcm9mIFNvcnRQYXJhbVJlcXVlc3RcbiAgICovXG4gIGRpcmVjdGlvbj86IG51bWJlcjtcbiAgLyoqXG4gICAqIE5hbWUgb2YgZmllbGQgdG8gc29ydCBieVxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgU29ydFBhcmFtUmVxdWVzdFxuICAgKi9cbiAgZmllbGQ/OiBzdHJpbmc7XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIFN0YXJ0SExTQnJvYWRjYXN0aW5nUmVzcG9uc2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBTdGFydEhMU0Jyb2FkY2FzdGluZ1Jlc3BvbnNlIHtcbiAgLyoqXG4gICAqIER1cmF0aW9uIG9mIHRoZSByZXF1ZXN0IGluIGh1bWFuLXJlYWRhYmxlIGZvcm1hdFxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgU3RhcnRITFNCcm9hZGNhc3RpbmdSZXNwb25zZVxuICAgKi9cbiAgZHVyYXRpb246IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBTdGFydEhMU0Jyb2FkY2FzdGluZ1Jlc3BvbnNlXG4gICAqL1xuICBwbGF5bGlzdF91cmw6IHN0cmluZztcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgU3RhcnRSZWNvcmRpbmdSZXF1ZXN0XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU3RhcnRSZWNvcmRpbmdSZXF1ZXN0IHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBTdGFydFJlY29yZGluZ1JlcXVlc3RcbiAgICovXG4gIHJlY29yZGluZ19leHRlcm5hbF9zdG9yYWdlPzogc3RyaW5nO1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBTdGFydFJlY29yZGluZ1Jlc3BvbnNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU3RhcnRSZWNvcmRpbmdSZXNwb25zZSB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgU3RhcnRSZWNvcmRpbmdSZXNwb25zZVxuICAgKi9cbiAgZHVyYXRpb246IHN0cmluZztcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgU3RhcnRUcmFuc2NyaXB0aW9uUmVzcG9uc2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBTdGFydFRyYW5zY3JpcHRpb25SZXNwb25zZSB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgU3RhcnRUcmFuc2NyaXB0aW9uUmVzcG9uc2VcbiAgICovXG4gIGR1cmF0aW9uOiBzdHJpbmc7XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIFN0b3BITFNCcm9hZGNhc3RpbmdSZXNwb25zZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIFN0b3BITFNCcm9hZGNhc3RpbmdSZXNwb25zZSB7XG4gIC8qKlxuICAgKiBEdXJhdGlvbiBvZiB0aGUgcmVxdWVzdCBpbiBodW1hbi1yZWFkYWJsZSBmb3JtYXRcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFN0b3BITFNCcm9hZGNhc3RpbmdSZXNwb25zZVxuICAgKi9cbiAgZHVyYXRpb246IHN0cmluZztcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgU3RvcExpdmVSZXNwb25zZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIFN0b3BMaXZlUmVzcG9uc2Uge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0NhbGxSZXNwb25zZX1cbiAgICogQG1lbWJlcm9mIFN0b3BMaXZlUmVzcG9uc2VcbiAgICovXG4gIGNhbGw6IENhbGxSZXNwb25zZTtcbiAgLyoqXG4gICAqIER1cmF0aW9uIG9mIHRoZSByZXF1ZXN0IGluIGh1bWFuLXJlYWRhYmxlIGZvcm1hdFxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgU3RvcExpdmVSZXNwb25zZVxuICAgKi9cbiAgZHVyYXRpb246IHN0cmluZztcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgU3RvcFJlY29yZGluZ1Jlc3BvbnNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU3RvcFJlY29yZGluZ1Jlc3BvbnNlIHtcbiAgLyoqXG4gICAqIER1cmF0aW9uIG9mIHRoZSByZXF1ZXN0IGluIGh1bWFuLXJlYWRhYmxlIGZvcm1hdFxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgU3RvcFJlY29yZGluZ1Jlc3BvbnNlXG4gICAqL1xuICBkdXJhdGlvbjogc3RyaW5nO1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBTdG9wVHJhbnNjcmlwdGlvblJlc3BvbnNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU3RvcFRyYW5zY3JpcHRpb25SZXNwb25zZSB7XG4gIC8qKlxuICAgKiBEdXJhdGlvbiBvZiB0aGUgcmVxdWVzdCBpbiBodW1hbi1yZWFkYWJsZSBmb3JtYXRcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFN0b3BUcmFuc2NyaXB0aW9uUmVzcG9uc2VcbiAgICovXG4gIGR1cmF0aW9uOiBzdHJpbmc7XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIFRhcmdldFJlc29sdXRpb25cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBUYXJnZXRSZXNvbHV0aW9uIHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqIEBtZW1iZXJvZiBUYXJnZXRSZXNvbHV0aW9uXG4gICAqL1xuICBiaXRyYXRlOiBudW1iZXI7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKiBAbWVtYmVyb2YgVGFyZ2V0UmVzb2x1dGlvblxuICAgKi9cbiAgaGVpZ2h0OiBudW1iZXI7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKiBAbWVtYmVyb2YgVGFyZ2V0UmVzb2x1dGlvblxuICAgKi9cbiAgd2lkdGg6IG51bWJlcjtcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgVGFyZ2V0UmVzb2x1dGlvblJlcXVlc3RcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBUYXJnZXRSZXNvbHV0aW9uUmVxdWVzdCB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKiBAbWVtYmVyb2YgVGFyZ2V0UmVzb2x1dGlvblJlcXVlc3RcbiAgICovXG4gIGJpdHJhdGU/OiBudW1iZXI7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKiBAbWVtYmVyb2YgVGFyZ2V0UmVzb2x1dGlvblJlcXVlc3RcbiAgICovXG4gIGhlaWdodD86IG51bWJlcjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqIEBtZW1iZXJvZiBUYXJnZXRSZXNvbHV0aW9uUmVxdWVzdFxuICAgKi9cbiAgd2lkdGg/OiBudW1iZXI7XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIFRodW1ibmFpbFJlc3BvbnNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVGh1bWJuYWlsUmVzcG9uc2Uge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFRodW1ibmFpbFJlc3BvbnNlXG4gICAqL1xuICBpbWFnZV91cmw6IHN0cmluZztcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgVGh1bWJuYWlsc1NldHRpbmdzXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVGh1bWJuYWlsc1NldHRpbmdzIHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAbWVtYmVyb2YgVGh1bWJuYWlsc1NldHRpbmdzXG4gICAqL1xuICBlbmFibGVkOiBib29sZWFuO1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBUaHVtYm5haWxzU2V0dGluZ3NSZXF1ZXN0XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVGh1bWJuYWlsc1NldHRpbmdzUmVxdWVzdCB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIFRodW1ibmFpbHNTZXR0aW5nc1JlcXVlc3RcbiAgICovXG4gIGVuYWJsZWQ/OiBib29sZWFuO1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBUcmFuc2NyaXB0aW9uU2V0dGluZ3NcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBUcmFuc2NyaXB0aW9uU2V0dGluZ3Mge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFRyYW5zY3JpcHRpb25TZXR0aW5nc1xuICAgKi9cbiAgY2xvc2VkX2NhcHRpb25fbW9kZTogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFRyYW5zY3JpcHRpb25TZXR0aW5nc1xuICAgKi9cbiAgbW9kZTogVHJhbnNjcmlwdGlvblNldHRpbmdzTW9kZUVudW07XG59XG5cbi8qKlxuICogQGV4cG9ydFxuICovXG5leHBvcnQgY29uc3QgVHJhbnNjcmlwdGlvblNldHRpbmdzTW9kZUVudW0gPSB7XG4gIEFWQUlMQUJMRTogJ2F2YWlsYWJsZScsXG4gIERJU0FCTEVEOiAnZGlzYWJsZWQnLFxuICBBVVRPX09OOiAnYXV0by1vbicsXG59IGFzIGNvbnN0O1xuZXhwb3J0IHR5cGUgVHJhbnNjcmlwdGlvblNldHRpbmdzTW9kZUVudW0gPVxuICAodHlwZW9mIFRyYW5zY3JpcHRpb25TZXR0aW5nc01vZGVFbnVtKVtrZXlvZiB0eXBlb2YgVHJhbnNjcmlwdGlvblNldHRpbmdzTW9kZUVudW1dO1xuXG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIFRyYW5zY3JpcHRpb25TZXR0aW5nc1JlcXVlc3RcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBUcmFuc2NyaXB0aW9uU2V0dGluZ3NSZXF1ZXN0IHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBUcmFuc2NyaXB0aW9uU2V0dGluZ3NSZXF1ZXN0XG4gICAqL1xuICBjbG9zZWRfY2FwdGlvbl9tb2RlPzogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFRyYW5zY3JpcHRpb25TZXR0aW5nc1JlcXVlc3RcbiAgICovXG4gIG1vZGU/OiBUcmFuc2NyaXB0aW9uU2V0dGluZ3NSZXF1ZXN0TW9kZUVudW07XG59XG5cbi8qKlxuICogQGV4cG9ydFxuICovXG5leHBvcnQgY29uc3QgVHJhbnNjcmlwdGlvblNldHRpbmdzUmVxdWVzdE1vZGVFbnVtID0ge1xuICBBVkFJTEFCTEU6ICdhdmFpbGFibGUnLFxuICBESVNBQkxFRDogJ2Rpc2FibGVkJyxcbiAgQVVUT19PTjogJ2F1dG8tb24nLFxufSBhcyBjb25zdDtcbmV4cG9ydCB0eXBlIFRyYW5zY3JpcHRpb25TZXR0aW5nc1JlcXVlc3RNb2RlRW51bSA9XG4gICh0eXBlb2YgVHJhbnNjcmlwdGlvblNldHRpbmdzUmVxdWVzdE1vZGVFbnVtKVtrZXlvZiB0eXBlb2YgVHJhbnNjcmlwdGlvblNldHRpbmdzUmVxdWVzdE1vZGVFbnVtXTtcblxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBVbmJsb2NrVXNlclJlcXVlc3RcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBVbmJsb2NrVXNlclJlcXVlc3Qge1xuICAvKipcbiAgICogdGhlIHVzZXIgdG8gdW5ibG9ja1xuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgVW5ibG9ja1VzZXJSZXF1ZXN0XG4gICAqL1xuICB1c2VyX2lkOiBzdHJpbmc7XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIFVuYmxvY2tVc2VyUmVzcG9uc2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBVbmJsb2NrVXNlclJlc3BvbnNlIHtcbiAgLyoqXG4gICAqIER1cmF0aW9uIG9mIHRoZSByZXF1ZXN0IGluIGh1bWFuLXJlYWRhYmxlIGZvcm1hdFxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgVW5ibG9ja1VzZXJSZXNwb25zZVxuICAgKi9cbiAgZHVyYXRpb246IHN0cmluZztcbn1cbi8qKlxuICogVGhpcyBldmVudCBpcyBzZW50IHdoZW4gYSB1c2VyIGlzIHVuYmxvY2tlZCBvbiBhIGNhbGwsXG4gKiB0aGlzIGNhbiBiZSB1c2VmdWwgdG8gbm90aWZ5IHRoZSB1c2VyIHRoYXQgdGhleSBjYW4gbm93IGpvaW4gdGhlIGNhbGwgYWdhaW5cbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgVW5ibG9ja2VkVXNlckV2ZW50XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVW5ibG9ja2VkVXNlckV2ZW50IHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBVbmJsb2NrZWRVc2VyRXZlbnRcbiAgICovXG4gIGNhbGxfY2lkOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgVW5ibG9ja2VkVXNlckV2ZW50XG4gICAqL1xuICBjcmVhdGVkX2F0OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBUaGUgdHlwZSBvZiBldmVudDogXCJjYWxsLnVuYmxvY2tlZF91c2VyXCIgaW4gdGhpcyBjYXNlXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBVbmJsb2NrZWRVc2VyRXZlbnRcbiAgICovXG4gIHR5cGU6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtVc2VyUmVzcG9uc2V9XG4gICAqIEBtZW1iZXJvZiBVbmJsb2NrZWRVc2VyRXZlbnRcbiAgICovXG4gIHVzZXI6IFVzZXJSZXNwb25zZTtcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgVW5waW5SZXF1ZXN0XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVW5waW5SZXF1ZXN0IHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBVbnBpblJlcXVlc3RcbiAgICovXG4gIHNlc3Npb25faWQ6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBVbnBpblJlcXVlc3RcbiAgICovXG4gIHVzZXJfaWQ6IHN0cmluZztcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgVW5waW5SZXNwb25zZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIFVucGluUmVzcG9uc2Uge1xuICAvKipcbiAgICogRHVyYXRpb24gb2YgdGhlIHJlcXVlc3QgaW4gaHVtYW4tcmVhZGFibGUgZm9ybWF0XG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBVbnBpblJlc3BvbnNlXG4gICAqL1xuICBkdXJhdGlvbjogc3RyaW5nO1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBVcGRhdGVDYWxsTWVtYmVyc1JlcXVlc3RcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBVcGRhdGVDYWxsTWVtYmVyc1JlcXVlc3Qge1xuICAvKipcbiAgICogTGlzdCBvZiB1c2VySUQgdG8gcmVtb3ZlXG4gICAqIEB0eXBlIHtBcnJheTxzdHJpbmc+fVxuICAgKiBAbWVtYmVyb2YgVXBkYXRlQ2FsbE1lbWJlcnNSZXF1ZXN0XG4gICAqL1xuICByZW1vdmVfbWVtYmVycz86IEFycmF5PHN0cmluZz47XG4gIC8qKlxuICAgKiBMaXN0IG9mIG1lbWJlcnMgdG8gdXBkYXRlIG9yIGluc2VydFxuICAgKiBAdHlwZSB7QXJyYXk8TWVtYmVyUmVxdWVzdD59XG4gICAqIEBtZW1iZXJvZiBVcGRhdGVDYWxsTWVtYmVyc1JlcXVlc3RcbiAgICovXG4gIHVwZGF0ZV9tZW1iZXJzPzogQXJyYXk8TWVtYmVyUmVxdWVzdD47XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIFVwZGF0ZUNhbGxNZW1iZXJzUmVzcG9uc2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBVcGRhdGVDYWxsTWVtYmVyc1Jlc3BvbnNlIHtcbiAgLyoqXG4gICAqIER1cmF0aW9uIG9mIHRoZSByZXF1ZXN0IGluIGh1bWFuLXJlYWRhYmxlIGZvcm1hdFxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgVXBkYXRlQ2FsbE1lbWJlcnNSZXNwb25zZVxuICAgKi9cbiAgZHVyYXRpb246IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtBcnJheTxNZW1iZXJSZXNwb25zZT59XG4gICAqIEBtZW1iZXJvZiBVcGRhdGVDYWxsTWVtYmVyc1Jlc3BvbnNlXG4gICAqL1xuICBtZW1iZXJzOiBBcnJheTxNZW1iZXJSZXNwb25zZT47XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIFVwZGF0ZUNhbGxSZXF1ZXN0XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVXBkYXRlQ2FsbFJlcXVlc3Qge1xuICAvKipcbiAgICogQ3VzdG9tIGRhdGEgZm9yIHRoaXMgb2JqZWN0XG4gICAqIEB0eXBlIHt7IFtrZXk6IHN0cmluZ106IGFueTsgfX1cbiAgICogQG1lbWJlcm9mIFVwZGF0ZUNhbGxSZXF1ZXN0XG4gICAqL1xuICBjdXN0b20/OiB7IFtrZXk6IHN0cmluZ106IGFueSB9O1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0NhbGxTZXR0aW5nc1JlcXVlc3R9XG4gICAqIEBtZW1iZXJvZiBVcGRhdGVDYWxsUmVxdWVzdFxuICAgKi9cbiAgc2V0dGluZ3Nfb3ZlcnJpZGU/OiBDYWxsU2V0dGluZ3NSZXF1ZXN0O1xuICAvKipcbiAgICogdGhlIHRpbWUgdGhlIGNhbGwgaXMgc2NoZWR1bGVkIHRvIHN0YXJ0XG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBVcGRhdGVDYWxsUmVxdWVzdFxuICAgKi9cbiAgc3RhcnRzX2F0Pzogc3RyaW5nO1xufVxuLyoqXG4gKiBSZXByZXNlbnRzIGEgY2FsbFxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBVcGRhdGVDYWxsUmVzcG9uc2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBVcGRhdGVDYWxsUmVzcG9uc2Uge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0NhbGxSZXNwb25zZX1cbiAgICogQG1lbWJlcm9mIFVwZGF0ZUNhbGxSZXNwb25zZVxuICAgKi9cbiAgY2FsbDogQ2FsbFJlc3BvbnNlO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFVwZGF0ZUNhbGxSZXNwb25zZVxuICAgKi9cbiAgZHVyYXRpb246IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtBcnJheTxNZW1iZXJSZXNwb25zZT59XG4gICAqIEBtZW1iZXJvZiBVcGRhdGVDYWxsUmVzcG9uc2VcbiAgICovXG4gIG1lbWJlcnM6IEFycmF5PE1lbWJlclJlc3BvbnNlPjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtNZW1iZXJSZXNwb25zZX1cbiAgICogQG1lbWJlcm9mIFVwZGF0ZUNhbGxSZXNwb25zZVxuICAgKi9cbiAgbWVtYmVyc2hpcD86IE1lbWJlclJlc3BvbnNlO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0FycmF5PE93bkNhcGFiaWxpdHk+fVxuICAgKiBAbWVtYmVyb2YgVXBkYXRlQ2FsbFJlc3BvbnNlXG4gICAqL1xuICBvd25fY2FwYWJpbGl0aWVzOiBBcnJheTxPd25DYXBhYmlsaXR5Pjtcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgVXBkYXRlQ2FsbFR5cGVSZXF1ZXN0XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVXBkYXRlQ2FsbFR5cGVSZXF1ZXN0IHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHt7IFtrZXk6IHN0cmluZ106IEFycmF5PHN0cmluZz47IH19XG4gICAqIEBtZW1iZXJvZiBVcGRhdGVDYWxsVHlwZVJlcXVlc3RcbiAgICovXG4gIGdyYW50cz86IHsgW2tleTogc3RyaW5nXTogQXJyYXk8c3RyaW5nPiB9O1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge05vdGlmaWNhdGlvblNldHRpbmdzUmVxdWVzdH1cbiAgICogQG1lbWJlcm9mIFVwZGF0ZUNhbGxUeXBlUmVxdWVzdFxuICAgKi9cbiAgbm90aWZpY2F0aW9uX3NldHRpbmdzPzogTm90aWZpY2F0aW9uU2V0dGluZ3NSZXF1ZXN0O1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0NhbGxTZXR0aW5nc1JlcXVlc3R9XG4gICAqIEBtZW1iZXJvZiBVcGRhdGVDYWxsVHlwZVJlcXVlc3RcbiAgICovXG4gIHNldHRpbmdzPzogQ2FsbFNldHRpbmdzUmVxdWVzdDtcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgVXBkYXRlQ2FsbFR5cGVSZXNwb25zZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIFVwZGF0ZUNhbGxUeXBlUmVzcG9uc2Uge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFVwZGF0ZUNhbGxUeXBlUmVzcG9uc2VcbiAgICovXG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBVcGRhdGVDYWxsVHlwZVJlc3BvbnNlXG4gICAqL1xuICBkdXJhdGlvbjogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3sgW2tleTogc3RyaW5nXTogQXJyYXk8c3RyaW5nPjsgfX1cbiAgICogQG1lbWJlcm9mIFVwZGF0ZUNhbGxUeXBlUmVzcG9uc2VcbiAgICovXG4gIGdyYW50czogeyBba2V5OiBzdHJpbmddOiBBcnJheTxzdHJpbmc+IH07XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgVXBkYXRlQ2FsbFR5cGVSZXNwb25zZVxuICAgKi9cbiAgbmFtZTogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge05vdGlmaWNhdGlvblNldHRpbmdzfVxuICAgKiBAbWVtYmVyb2YgVXBkYXRlQ2FsbFR5cGVSZXNwb25zZVxuICAgKi9cbiAgbm90aWZpY2F0aW9uX3NldHRpbmdzOiBOb3RpZmljYXRpb25TZXR0aW5ncztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtDYWxsU2V0dGluZ3NSZXNwb25zZX1cbiAgICogQG1lbWJlcm9mIFVwZGF0ZUNhbGxUeXBlUmVzcG9uc2VcbiAgICovXG4gIHNldHRpbmdzOiBDYWxsU2V0dGluZ3NSZXNwb25zZTtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBVcGRhdGVDYWxsVHlwZVJlc3BvbnNlXG4gICAqL1xuICB1cGRhdGVkX2F0OiBzdHJpbmc7XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIFVwZGF0ZVVzZXJQZXJtaXNzaW9uc1JlcXVlc3RcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBVcGRhdGVVc2VyUGVybWlzc2lvbnNSZXF1ZXN0IHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtBcnJheTxzdHJpbmc+fVxuICAgKiBAbWVtYmVyb2YgVXBkYXRlVXNlclBlcm1pc3Npb25zUmVxdWVzdFxuICAgKi9cbiAgZ3JhbnRfcGVybWlzc2lvbnM/OiBBcnJheTxzdHJpbmc+O1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0FycmF5PHN0cmluZz59XG4gICAqIEBtZW1iZXJvZiBVcGRhdGVVc2VyUGVybWlzc2lvbnNSZXF1ZXN0XG4gICAqL1xuICByZXZva2VfcGVybWlzc2lvbnM/OiBBcnJheTxzdHJpbmc+O1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFVwZGF0ZVVzZXJQZXJtaXNzaW9uc1JlcXVlc3RcbiAgICovXG4gIHVzZXJfaWQ6IHN0cmluZztcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgVXBkYXRlVXNlclBlcm1pc3Npb25zUmVzcG9uc2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBVcGRhdGVVc2VyUGVybWlzc2lvbnNSZXNwb25zZSB7XG4gIC8qKlxuICAgKiBEdXJhdGlvbiBvZiB0aGUgcmVxdWVzdCBpbiBodW1hbi1yZWFkYWJsZSBmb3JtYXRcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFVwZGF0ZVVzZXJQZXJtaXNzaW9uc1Jlc3BvbnNlXG4gICAqL1xuICBkdXJhdGlvbjogc3RyaW5nO1xufVxuLyoqXG4gKiBUaGlzIGV2ZW50IGlzIHNlbnQgdG8gbm90aWZ5IGFib3V0IHBlcm1pc3Npb24gY2hhbmdlcyBmb3IgYSB1c2VyLCBjbGllbnRzIHJlY2VpdmluZyB0aGlzIGV2ZW50IHNob3VsZCB1cGRhdGUgdGhlaXIgVUkgYWNjb3JkaW5nbHlcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgVXBkYXRlZENhbGxQZXJtaXNzaW9uc0V2ZW50XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVXBkYXRlZENhbGxQZXJtaXNzaW9uc0V2ZW50IHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBVcGRhdGVkQ2FsbFBlcm1pc3Npb25zRXZlbnRcbiAgICovXG4gIGNhbGxfY2lkOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgVXBkYXRlZENhbGxQZXJtaXNzaW9uc0V2ZW50XG4gICAqL1xuICBjcmVhdGVkX2F0OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBUaGUgY2FwYWJpbGl0aWVzIG9mIHRoZSBjdXJyZW50IHVzZXJcbiAgICogQHR5cGUge0FycmF5PE93bkNhcGFiaWxpdHk+fVxuICAgKiBAbWVtYmVyb2YgVXBkYXRlZENhbGxQZXJtaXNzaW9uc0V2ZW50XG4gICAqL1xuICBvd25fY2FwYWJpbGl0aWVzOiBBcnJheTxPd25DYXBhYmlsaXR5PjtcbiAgLyoqXG4gICAqIFRoZSB0eXBlIG9mIGV2ZW50OiBcImNhbGwucGVybWlzc2lvbnNfdXBkYXRlZFwiIGluIHRoaXMgY2FzZVxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgVXBkYXRlZENhbGxQZXJtaXNzaW9uc0V2ZW50XG4gICAqL1xuICB0eXBlOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7VXNlclJlc3BvbnNlfVxuICAgKiBAbWVtYmVyb2YgVXBkYXRlZENhbGxQZXJtaXNzaW9uc0V2ZW50XG4gICAqL1xuICB1c2VyOiBVc2VyUmVzcG9uc2U7XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIFVzZXJSZXF1ZXN0XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVXNlclJlcXVlc3Qge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3sgW2tleTogc3RyaW5nXTogYW55OyB9fVxuICAgKiBAbWVtYmVyb2YgVXNlclJlcXVlc3RcbiAgICovXG4gIGN1c3RvbT86IHsgW2tleTogc3RyaW5nXTogYW55IH07XG4gIC8qKlxuICAgKiBVc2VyIElEXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBVc2VyUmVxdWVzdFxuICAgKi9cbiAgaWQ6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBVc2VyUmVxdWVzdFxuICAgKi9cbiAgaW1hZ2U/OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBPcHRpb25hbCBuYW1lIG9mIHVzZXJcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFVzZXJSZXF1ZXN0XG4gICAqL1xuICBuYW1lPzogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFVzZXJSZXF1ZXN0XG4gICAqL1xuICByb2xlPzogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0FycmF5PHN0cmluZz59XG4gICAqIEBtZW1iZXJvZiBVc2VyUmVxdWVzdFxuICAgKi9cbiAgdGVhbXM/OiBBcnJheTxzdHJpbmc+O1xufVxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBVc2VyUmVzcG9uc2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBVc2VyUmVzcG9uc2Uge1xuICAvKipcbiAgICogRGF0ZS90aW1lIG9mIGNyZWF0aW9uXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBVc2VyUmVzcG9uc2VcbiAgICovXG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHt7IFtrZXk6IHN0cmluZ106IGFueTsgfX1cbiAgICogQG1lbWJlcm9mIFVzZXJSZXNwb25zZVxuICAgKi9cbiAgY3VzdG9tOiB7IFtrZXk6IHN0cmluZ106IGFueSB9O1xuICAvKipcbiAgICogRGF0ZS90aW1lIG9mIGRlbGV0aW9uXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBVc2VyUmVzcG9uc2VcbiAgICovXG4gIGRlbGV0ZWRfYXQ/OiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgVXNlclJlc3BvbnNlXG4gICAqL1xuICBpZDogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFVzZXJSZXNwb25zZVxuICAgKi9cbiAgaW1hZ2U/OiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgVXNlclJlc3BvbnNlXG4gICAqL1xuICBuYW1lPzogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFVzZXJSZXNwb25zZVxuICAgKi9cbiAgcm9sZTogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge0FycmF5PHN0cmluZz59XG4gICAqIEBtZW1iZXJvZiBVc2VyUmVzcG9uc2VcbiAgICovXG4gIHRlYW1zOiBBcnJheTxzdHJpbmc+O1xuICAvKipcbiAgICogRGF0ZS90aW1lIG9mIHRoZSBsYXN0IHVwZGF0ZVxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgVXNlclJlc3BvbnNlXG4gICAqL1xuICB1cGRhdGVkX2F0OiBzdHJpbmc7XG59XG4vKipcbiAqIEB0eXBlIFZpZGVvRXZlbnRcbiAqIFRoZSBkaXNjcmltaW5hdG9yIG9iamVjdCBmb3IgYWxsIHdlYnNvY2tldCBldmVudHMsIHlvdSBzaG91bGQgdXNlIHRoaXMgdG8gbWFwIGV2ZW50IHBheWxvYWRzIHRvIHRoZWlyIG93biB0eXBlXG4gKiBAZXhwb3J0XG4gKi9cbmV4cG9ydCB0eXBlIFZpZGVvRXZlbnQgPVxuICB8ICh7IHR5cGU6ICdjYWxsLmFjY2VwdGVkJyB9ICYgQ2FsbEFjY2VwdGVkRXZlbnQpXG4gIHwgKHsgdHlwZTogJ2NhbGwuYmxvY2tlZF91c2VyJyB9ICYgQmxvY2tlZFVzZXJFdmVudClcbiAgfCAoeyB0eXBlOiAnY2FsbC5jcmVhdGVkJyB9ICYgQ2FsbENyZWF0ZWRFdmVudClcbiAgfCAoeyB0eXBlOiAnY2FsbC5lbmRlZCcgfSAmIENhbGxFbmRlZEV2ZW50KVxuICB8ICh7IHR5cGU6ICdjYWxsLmhsc19icm9hZGNhc3RpbmdfZmFpbGVkJyB9ICYgQ2FsbEhMU0Jyb2FkY2FzdGluZ0ZhaWxlZEV2ZW50KVxuICB8ICh7XG4gICAgICB0eXBlOiAnY2FsbC5obHNfYnJvYWRjYXN0aW5nX3N0YXJ0ZWQnO1xuICAgIH0gJiBDYWxsSExTQnJvYWRjYXN0aW5nU3RhcnRlZEV2ZW50KVxuICB8ICh7XG4gICAgICB0eXBlOiAnY2FsbC5obHNfYnJvYWRjYXN0aW5nX3N0b3BwZWQnO1xuICAgIH0gJiBDYWxsSExTQnJvYWRjYXN0aW5nU3RvcHBlZEV2ZW50KVxuICB8ICh7IHR5cGU6ICdjYWxsLmxpdmVfc3RhcnRlZCcgfSAmIENhbGxMaXZlU3RhcnRlZEV2ZW50KVxuICB8ICh7IHR5cGU6ICdjYWxsLm1lbWJlcl9hZGRlZCcgfSAmIENhbGxNZW1iZXJBZGRlZEV2ZW50KVxuICB8ICh7IHR5cGU6ICdjYWxsLm1lbWJlcl9yZW1vdmVkJyB9ICYgQ2FsbE1lbWJlclJlbW92ZWRFdmVudClcbiAgfCAoeyB0eXBlOiAnY2FsbC5tZW1iZXJfdXBkYXRlZCcgfSAmIENhbGxNZW1iZXJVcGRhdGVkRXZlbnQpXG4gIHwgKHtcbiAgICAgIHR5cGU6ICdjYWxsLm1lbWJlcl91cGRhdGVkX3Blcm1pc3Npb24nO1xuICAgIH0gJiBDYWxsTWVtYmVyVXBkYXRlZFBlcm1pc3Npb25FdmVudClcbiAgfCAoeyB0eXBlOiAnY2FsbC5ub3RpZmljYXRpb24nIH0gJiBDYWxsTm90aWZpY2F0aW9uRXZlbnQpXG4gIHwgKHsgdHlwZTogJ2NhbGwucGVybWlzc2lvbl9yZXF1ZXN0JyB9ICYgUGVybWlzc2lvblJlcXVlc3RFdmVudClcbiAgfCAoeyB0eXBlOiAnY2FsbC5wZXJtaXNzaW9uc191cGRhdGVkJyB9ICYgVXBkYXRlZENhbGxQZXJtaXNzaW9uc0V2ZW50KVxuICB8ICh7IHR5cGU6ICdjYWxsLnJlYWN0aW9uX25ldycgfSAmIENhbGxSZWFjdGlvbkV2ZW50KVxuICB8ICh7IHR5cGU6ICdjYWxsLnJlY29yZGluZ19mYWlsZWQnIH0gJiBDYWxsUmVjb3JkaW5nRmFpbGVkRXZlbnQpXG4gIHwgKHsgdHlwZTogJ2NhbGwucmVjb3JkaW5nX3JlYWR5JyB9ICYgQ2FsbFJlY29yZGluZ1JlYWR5RXZlbnQpXG4gIHwgKHsgdHlwZTogJ2NhbGwucmVjb3JkaW5nX3N0YXJ0ZWQnIH0gJiBDYWxsUmVjb3JkaW5nU3RhcnRlZEV2ZW50KVxuICB8ICh7IHR5cGU6ICdjYWxsLnJlY29yZGluZ19zdG9wcGVkJyB9ICYgQ2FsbFJlY29yZGluZ1N0b3BwZWRFdmVudClcbiAgfCAoeyB0eXBlOiAnY2FsbC5yZWplY3RlZCcgfSAmIENhbGxSZWplY3RlZEV2ZW50KVxuICB8ICh7IHR5cGU6ICdjYWxsLnJpbmcnIH0gJiBDYWxsUmluZ0V2ZW50KVxuICB8ICh7IHR5cGU6ICdjYWxsLnNlc3Npb25fZW5kZWQnIH0gJiBDYWxsU2Vzc2lvbkVuZGVkRXZlbnQpXG4gIHwgKHtcbiAgICAgIHR5cGU6ICdjYWxsLnNlc3Npb25fcGFydGljaXBhbnRfam9pbmVkJztcbiAgICB9ICYgQ2FsbFNlc3Npb25QYXJ0aWNpcGFudEpvaW5lZEV2ZW50KVxuICB8ICh7XG4gICAgICB0eXBlOiAnY2FsbC5zZXNzaW9uX3BhcnRpY2lwYW50X2xlZnQnO1xuICAgIH0gJiBDYWxsU2Vzc2lvblBhcnRpY2lwYW50TGVmdEV2ZW50KVxuICB8ICh7IHR5cGU6ICdjYWxsLnNlc3Npb25fc3RhcnRlZCcgfSAmIENhbGxTZXNzaW9uU3RhcnRlZEV2ZW50KVxuICB8ICh7IHR5cGU6ICdjYWxsLnVuYmxvY2tlZF91c2VyJyB9ICYgVW5ibG9ja2VkVXNlckV2ZW50KVxuICB8ICh7IHR5cGU6ICdjYWxsLnVwZGF0ZWQnIH0gJiBDYWxsVXBkYXRlZEV2ZW50KVxuICB8ICh7IHR5cGU6ICdjYWxsLnVzZXJfbXV0ZWQnIH0gJiBDYWxsVXNlck11dGVkKVxuICB8ICh7IHR5cGU6ICdjb25uZWN0aW9uLmVycm9yJyB9ICYgQ29ubmVjdGlvbkVycm9yRXZlbnQpXG4gIHwgKHsgdHlwZTogJ2Nvbm5lY3Rpb24ub2snIH0gJiBDb25uZWN0ZWRFdmVudClcbiAgfCAoeyB0eXBlOiAnY3VzdG9tJyB9ICYgQ3VzdG9tVmlkZW9FdmVudClcbiAgfCAoeyB0eXBlOiAnaGVhbHRoLmNoZWNrJyB9ICYgSGVhbHRoQ2hlY2tFdmVudCk7XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIFZpZGVvU2V0dGluZ3NcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBWaWRlb1NldHRpbmdzIHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAbWVtYmVyb2YgVmlkZW9TZXR0aW5nc1xuICAgKi9cbiAgYWNjZXNzX3JlcXVlc3RfZW5hYmxlZDogYm9vbGVhbjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAbWVtYmVyb2YgVmlkZW9TZXR0aW5nc1xuICAgKi9cbiAgY2FtZXJhX2RlZmF1bHRfb246IGJvb2xlYW47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgVmlkZW9TZXR0aW5nc1xuICAgKi9cbiAgY2FtZXJhX2ZhY2luZzogVmlkZW9TZXR0aW5nc0NhbWVyYUZhY2luZ0VudW07XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIFZpZGVvU2V0dGluZ3NcbiAgICovXG4gIGVuYWJsZWQ6IGJvb2xlYW47XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7VGFyZ2V0UmVzb2x1dGlvbn1cbiAgICogQG1lbWJlcm9mIFZpZGVvU2V0dGluZ3NcbiAgICovXG4gIHRhcmdldF9yZXNvbHV0aW9uOiBUYXJnZXRSZXNvbHV0aW9uO1xufVxuXG4vKipcbiAqIEBleHBvcnRcbiAqL1xuZXhwb3J0IGNvbnN0IFZpZGVvU2V0dGluZ3NDYW1lcmFGYWNpbmdFbnVtID0ge1xuICBGUk9OVDogJ2Zyb250JyxcbiAgQkFDSzogJ2JhY2snLFxuICBFWFRFUk5BTDogJ2V4dGVybmFsJyxcbn0gYXMgY29uc3Q7XG5leHBvcnQgdHlwZSBWaWRlb1NldHRpbmdzQ2FtZXJhRmFjaW5nRW51bSA9XG4gICh0eXBlb2YgVmlkZW9TZXR0aW5nc0NhbWVyYUZhY2luZ0VudW0pW2tleW9mIHR5cGVvZiBWaWRlb1NldHRpbmdzQ2FtZXJhRmFjaW5nRW51bV07XG5cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgVmlkZW9TZXR0aW5nc1JlcXVlc3RcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBWaWRlb1NldHRpbmdzUmVxdWVzdCB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQG1lbWJlcm9mIFZpZGVvU2V0dGluZ3NSZXF1ZXN0XG4gICAqL1xuICBhY2Nlc3NfcmVxdWVzdF9lbmFibGVkPzogYm9vbGVhbjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAbWVtYmVyb2YgVmlkZW9TZXR0aW5nc1JlcXVlc3RcbiAgICovXG4gIGNhbWVyYV9kZWZhdWx0X29uPzogYm9vbGVhbjtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBWaWRlb1NldHRpbmdzUmVxdWVzdFxuICAgKi9cbiAgY2FtZXJhX2ZhY2luZz86IFZpZGVvU2V0dGluZ3NSZXF1ZXN0Q2FtZXJhRmFjaW5nRW51bTtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKiBAbWVtYmVyb2YgVmlkZW9TZXR0aW5nc1JlcXVlc3RcbiAgICovXG4gIGVuYWJsZWQ/OiBib29sZWFuO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge1RhcmdldFJlc29sdXRpb25SZXF1ZXN0fVxuICAgKiBAbWVtYmVyb2YgVmlkZW9TZXR0aW5nc1JlcXVlc3RcbiAgICovXG4gIHRhcmdldF9yZXNvbHV0aW9uPzogVGFyZ2V0UmVzb2x1dGlvblJlcXVlc3Q7XG59XG5cbi8qKlxuICogQGV4cG9ydFxuICovXG5leHBvcnQgY29uc3QgVmlkZW9TZXR0aW5nc1JlcXVlc3RDYW1lcmFGYWNpbmdFbnVtID0ge1xuICBGUk9OVDogJ2Zyb250JyxcbiAgQkFDSzogJ2JhY2snLFxuICBFWFRFUk5BTDogJ2V4dGVybmFsJyxcbn0gYXMgY29uc3Q7XG5leHBvcnQgdHlwZSBWaWRlb1NldHRpbmdzUmVxdWVzdENhbWVyYUZhY2luZ0VudW0gPVxuICAodHlwZW9mIFZpZGVvU2V0dGluZ3NSZXF1ZXN0Q2FtZXJhRmFjaW5nRW51bSlba2V5b2YgdHlwZW9mIFZpZGVvU2V0dGluZ3NSZXF1ZXN0Q2FtZXJhRmFjaW5nRW51bV07XG5cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgV1NBdXRoTWVzc2FnZVJlcXVlc3RcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBXU0F1dGhNZXNzYWdlUmVxdWVzdCB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgV1NBdXRoTWVzc2FnZVJlcXVlc3RcbiAgICovXG4gIHRva2VuOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7Q29ubmVjdFVzZXJEZXRhaWxzUmVxdWVzdH1cbiAgICogQG1lbWJlcm9mIFdTQXV0aE1lc3NhZ2VSZXF1ZXN0XG4gICAqL1xuICB1c2VyX2RldGFpbHM6IENvbm5lY3RVc2VyRGV0YWlsc1JlcXVlc3Q7XG59XG4vKipcbiAqIFRoaXMgaXMganVzdCBhIHBsYWNlaG9sZGVyIGZvciBhbGwgY2xpZW50IGV2ZW50c1xuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBXU0NhbGxFdmVudFxuICovXG5leHBvcnQgaW50ZXJmYWNlIFdTQ2FsbEV2ZW50IHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBXU0NhbGxFdmVudFxuICAgKi9cbiAgY2FsbF9jaWQ/OiBzdHJpbmc7XG59XG4vKipcbiAqIFRoaXMgaXMganVzdCBhIHBsYWNlaG9sZGVyIGZvciBhbGwgY2xpZW50IGV2ZW50c1xuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBXU0NsaWVudEV2ZW50XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgV1NDbGllbnRFdmVudCB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgV1NDbGllbnRFdmVudFxuICAgKi9cbiAgY29ubmVjdGlvbl9pZD86IHN0cmluZztcbn1cblxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBBenVyZVJlcXVlc3RcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBBenVyZVJlcXVlc3Qge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIEF6dXJlUmVxdWVzdFxuICAgKi9cbiAgYWJzX2FjY291bnRfbmFtZTogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIEF6dXJlUmVxdWVzdFxuICAgKi9cbiAgYWJzX2NsaWVudF9pZDogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIEF6dXJlUmVxdWVzdFxuICAgKi9cbiAgYWJzX2NsaWVudF9zZWNyZXQ6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBBenVyZVJlcXVlc3RcbiAgICovXG4gIGFic190ZW5hbnRfaWQ6IHN0cmluZztcbn1cblxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBDaGVja0V4dGVybmFsU3RvcmFnZVJlc3BvbnNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ2hlY2tFeHRlcm5hbFN0b3JhZ2VSZXNwb25zZSB7XG4gIC8qKlxuICAgKiBEdXJhdGlvbiBvZiB0aGUgcmVxdWVzdCBpbiBodW1hbi1yZWFkYWJsZSBmb3JtYXRcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENoZWNrRXh0ZXJuYWxTdG9yYWdlUmVzcG9uc2VcbiAgICovXG4gIGR1cmF0aW9uOiBzdHJpbmc7XG59XG5cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgQ3JlYXRlRXh0ZXJuYWxTdG9yYWdlUmVxdWVzdFxuICovXG5leHBvcnQgaW50ZXJmYWNlIENyZWF0ZUV4dGVybmFsU3RvcmFnZVJlcXVlc3Qge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge1MzUmVxdWVzdH1cbiAgICogQG1lbWJlcm9mIENyZWF0ZUV4dGVybmFsU3RvcmFnZVJlcXVlc3RcbiAgICovXG4gIGF3c19zMz86IFMzUmVxdWVzdDtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtBenVyZVJlcXVlc3R9XG4gICAqIEBtZW1iZXJvZiBDcmVhdGVFeHRlcm5hbFN0b3JhZ2VSZXF1ZXN0XG4gICAqL1xuICBhenVyZV9ibG9iPzogQXp1cmVSZXF1ZXN0O1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENyZWF0ZUV4dGVybmFsU3RvcmFnZVJlcXVlc3RcbiAgICovXG4gIGJ1Y2tldDogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIENyZWF0ZUV4dGVybmFsU3RvcmFnZVJlcXVlc3RcbiAgICovXG4gIGdjc19jcmVkZW50aWFscz86IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDcmVhdGVFeHRlcm5hbFN0b3JhZ2VSZXF1ZXN0XG4gICAqL1xuICBuYW1lOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ3JlYXRlRXh0ZXJuYWxTdG9yYWdlUmVxdWVzdFxuICAgKi9cbiAgcGF0aD86IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBDcmVhdGVFeHRlcm5hbFN0b3JhZ2VSZXF1ZXN0XG4gICAqL1xuICBzdG9yYWdlX3R5cGU6IHN0cmluZztcbn1cblxuLyoqXG4gKlxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBDcmVhdGVFeHRlcm5hbFN0b3JhZ2VSZXNwb25zZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIENyZWF0ZUV4dGVybmFsU3RvcmFnZVJlc3BvbnNlIHtcbiAgLyoqXG4gICAqIER1cmF0aW9uIG9mIHRoZSByZXF1ZXN0IGluIGh1bWFuLXJlYWRhYmxlIGZvcm1hdFxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgQ3JlYXRlRXh0ZXJuYWxTdG9yYWdlUmVzcG9uc2VcbiAgICovXG4gIGR1cmF0aW9uOiBzdHJpbmc7XG59XG5cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgRGVsZXRlRXh0ZXJuYWxTdG9yYWdlUmVzcG9uc2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBEZWxldGVFeHRlcm5hbFN0b3JhZ2VSZXNwb25zZSB7XG4gIC8qKlxuICAgKiBEdXJhdGlvbiBvZiB0aGUgcmVxdWVzdCBpbiBodW1hbi1yZWFkYWJsZSBmb3JtYXRcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIERlbGV0ZUV4dGVybmFsU3RvcmFnZVJlc3BvbnNlXG4gICAqL1xuICBkdXJhdGlvbjogc3RyaW5nO1xufVxuXG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIEV4dGVybmFsU3RvcmFnZVJlc3BvbnNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRXh0ZXJuYWxTdG9yYWdlUmVzcG9uc2Uge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIEV4dGVybmFsU3RvcmFnZVJlc3BvbnNlXG4gICAqL1xuICBidWNrZXQ6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBFeHRlcm5hbFN0b3JhZ2VSZXNwb25zZVxuICAgKi9cbiAgbmFtZTogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIEV4dGVybmFsU3RvcmFnZVJlc3BvbnNlXG4gICAqL1xuICBwYXRoOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgRXh0ZXJuYWxTdG9yYWdlUmVzcG9uc2VcbiAgICovXG4gIHR5cGU6IHN0cmluZztcbn1cbi8qKlxuICpcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgTGlzdEV4dGVybmFsU3RvcmFnZVJlc3BvbnNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgTGlzdEV4dGVybmFsU3RvcmFnZVJlc3BvbnNlIHtcbiAgLyoqXG4gICAqIER1cmF0aW9uIG9mIHRoZSByZXF1ZXN0IGluIGh1bWFuLXJlYWRhYmxlIGZvcm1hdFxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgTGlzdEV4dGVybmFsU3RvcmFnZVJlc3BvbnNlXG4gICAqL1xuICBkdXJhdGlvbjogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3sgW2tleTogc3RyaW5nXTogRXh0ZXJuYWxTdG9yYWdlUmVzcG9uc2U7IH19XG4gICAqIEBtZW1iZXJvZiBMaXN0RXh0ZXJuYWxTdG9yYWdlUmVzcG9uc2VcbiAgICovXG4gIGV4dGVybmFsX3N0b3JhZ2VzOiB7IFtrZXk6IHN0cmluZ106IEV4dGVybmFsU3RvcmFnZVJlc3BvbnNlIH07XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIFMzUmVxdWVzdFxuICovXG5leHBvcnQgaW50ZXJmYWNlIFMzUmVxdWVzdCB7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgUzNSZXF1ZXN0XG4gICAqL1xuICBzM19hcGlfa2V5Pzogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFMzUmVxdWVzdFxuICAgKi9cbiAgczNfcmVnaW9uOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgUzNSZXF1ZXN0XG4gICAqL1xuICBzM19zZWNyZXQ/OiBzdHJpbmc7XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIFVwZGF0ZUV4dGVybmFsU3RvcmFnZVJlc3BvbnNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVXBkYXRlRXh0ZXJuYWxTdG9yYWdlUmVzcG9uc2Uge1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFVwZGF0ZUV4dGVybmFsU3RvcmFnZVJlc3BvbnNlXG4gICAqL1xuICBidWNrZXQ6IHN0cmluZztcbiAgLyoqXG4gICAqIER1cmF0aW9uIG9mIHRoZSByZXF1ZXN0IGluIGh1bWFuLXJlYWRhYmxlIGZvcm1hdFxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgVXBkYXRlRXh0ZXJuYWxTdG9yYWdlUmVzcG9uc2VcbiAgICovXG4gIGR1cmF0aW9uOiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgVXBkYXRlRXh0ZXJuYWxTdG9yYWdlUmVzcG9uc2VcbiAgICovXG4gIG5hbWU6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBVcGRhdGVFeHRlcm5hbFN0b3JhZ2VSZXNwb25zZVxuICAgKi9cbiAgcGF0aDogc3RyaW5nO1xuICAvKipcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICogQG1lbWJlcm9mIFVwZGF0ZUV4dGVybmFsU3RvcmFnZVJlc3BvbnNlXG4gICAqL1xuICB0eXBlOiBzdHJpbmc7XG59XG4vKipcbiAqXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIFVwZGF0ZUV4dGVybmFsU3RvcmFnZVJlcXVlc3RcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBVcGRhdGVFeHRlcm5hbFN0b3JhZ2VSZXF1ZXN0IHtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtTM1JlcXVlc3R9XG4gICAqIEBtZW1iZXJvZiBVcGRhdGVFeHRlcm5hbFN0b3JhZ2VSZXF1ZXN0XG4gICAqL1xuICBhd3NfczM/OiBTM1JlcXVlc3Q7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7QXp1cmVSZXF1ZXN0fVxuICAgKiBAbWVtYmVyb2YgVXBkYXRlRXh0ZXJuYWxTdG9yYWdlUmVxdWVzdFxuICAgKi9cbiAgYXp1cmVfYmxvYj86IEF6dXJlUmVxdWVzdDtcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBVcGRhdGVFeHRlcm5hbFN0b3JhZ2VSZXF1ZXN0XG4gICAqL1xuICBidWNrZXQ6IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBVcGRhdGVFeHRlcm5hbFN0b3JhZ2VSZXF1ZXN0XG4gICAqL1xuICBnY3NfY3JlZGVudGlhbHM/OiBzdHJpbmc7XG4gIC8qKlxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAbWVtYmVyb2YgVXBkYXRlRXh0ZXJuYWxTdG9yYWdlUmVxdWVzdFxuICAgKi9cbiAgcGF0aD86IHN0cmluZztcbiAgLyoqXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqIEBtZW1iZXJvZiBVcGRhdGVFeHRlcm5hbFN0b3JhZ2VSZXF1ZXN0XG4gICAqL1xuICBzdG9yYWdlX3R5cGU6IHN0cmluZztcbn1cbiIsImltcG9ydCB7IEF4aW9zUmVxdWVzdENvbmZpZywgQXhpb3NSZXNwb25zZSB9IGZyb20gJ2F4aW9zJztcbmltcG9ydCB7IFN0YWJsZVdTQ29ubmVjdGlvbiB9IGZyb20gJy4vY29ubmVjdGlvbic7XG5pbXBvcnQgeyBDb25uZWN0ZWRFdmVudCwgVXNlclJlcXVlc3QsIFZpZGVvRXZlbnQgfSBmcm9tICcuLi8uLi9nZW4vY29vcmRpbmF0b3InO1xuaW1wb3J0IHsgQWxsU2Z1RXZlbnRzIH0gZnJvbSAnLi4vLi4vcnRjJztcblxuZXhwb3J0IHR5cGUgVVIgPSBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPjtcblxuZXhwb3J0IHR5cGUgVXNlciA9XG4gIHwgKE9taXQ8VXNlclJlcXVlc3QsICdyb2xlJz4gJiB7IHR5cGU/OiAnYXV0aGVudGljYXRlZCcgfSlcbiAgfCAoT21pdDxVc2VyUmVxdWVzdCwgJ3JvbGUnPiAmIHsgdHlwZTogJ2d1ZXN0JyB9KVxuICB8IChPbWl0PFVzZXJSZXF1ZXN0LCAnaWQnIHwgJ3JvbGUnPiAmIHtcbiAgICAgIGlkPzogJyFhbm9uJztcbiAgICAgIHR5cGU6ICdhbm9ueW1vdXMnO1xuICAgIH0pO1xuXG5leHBvcnQgdHlwZSBVc2VyV2l0aElkID1cbiAgfCAoVXNlclJlcXVlc3QgJiB7IHR5cGU/OiAnYXV0aGVudGljYXRlZCcgfSlcbiAgfCAoVXNlclJlcXVlc3QgJiB7IHR5cGU6ICdndWVzdCcgfSlcbiAgfCAoVXNlclJlcXVlc3QgJiB7XG4gICAgICBpZDogJyFhbm9uJztcbiAgICAgIHR5cGU6ICdhbm9ueW1vdXMnO1xuICAgIH0pO1xuXG5leHBvcnQgdHlwZSB7IE93blVzZXJSZXNwb25zZSB9IGZyb20gJy4uLy4uL2dlbi9jb29yZGluYXRvcic7XG5cbmV4cG9ydCB0eXBlIENvbm5lY3RBUElSZXNwb25zZSA9IFByb21pc2U8dm9pZCB8IENvbm5lY3RlZEV2ZW50PjtcblxuZXhwb3J0IHR5cGUgTG9nTGV2ZWwgPSAndHJhY2UnIHwgJ2RlYnVnJyB8ICdpbmZvJyB8ICd3YXJuJyB8ICdlcnJvcic7XG5cbnR5cGUgRXJyb3JSZXNwb25zZURldGFpbHMgPSB7XG4gIGNvZGU6IG51bWJlcjtcbiAgbWVzc2FnZXM6IHN0cmluZ1tdO1xufTtcblxuZXhwb3J0IHR5cGUgQVBJRXJyb3JSZXNwb25zZSA9IHtcbiAgY29kZTogbnVtYmVyO1xuICBkdXJhdGlvbjogc3RyaW5nO1xuICBtZXNzYWdlOiBzdHJpbmc7XG4gIG1vcmVfaW5mbzogc3RyaW5nO1xuICBTdGF0dXNDb2RlOiBudW1iZXI7XG4gIGRldGFpbHM/OiBFcnJvclJlc3BvbnNlRGV0YWlscztcbn07XG5cbmV4cG9ydCBjbGFzcyBFcnJvckZyb21SZXNwb25zZTxUPiBleHRlbmRzIEVycm9yIHtcbiAgY29kZT86IG51bWJlcjtcbiAgcmVzcG9uc2U/OiBBeGlvc1Jlc3BvbnNlPFQ+O1xuICBzdGF0dXM/OiBudW1iZXI7XG59XG5cbmV4cG9ydCB0eXBlIENvbm5lY3Rpb25DaGFuZ2VkRXZlbnQgPSB7XG4gIHR5cGU6ICdjb25uZWN0aW9uLmNoYW5nZWQnO1xuICBvbmxpbmU6IGJvb2xlYW47XG59O1xuXG5leHBvcnQgdHlwZSBUcmFuc3BvcnRDaGFuZ2VkRXZlbnQgPSB7XG4gIHR5cGU6ICd0cmFuc3BvcnQuY2hhbmdlZCc7XG4gIG1vZGU6ICdsb25ncG9sbCc7XG59O1xuXG5leHBvcnQgdHlwZSBDb25uZWN0aW9uUmVjb3ZlcmVkRXZlbnQgPSB7XG4gIHR5cGU6ICdjb25uZWN0aW9uLnJlY292ZXJlZCc7XG59O1xuXG5leHBvcnQgdHlwZSBTdHJlYW1WaWRlb0V2ZW50ID0gKFxuICB8IFZpZGVvRXZlbnRcbiAgfCBDb25uZWN0aW9uQ2hhbmdlZEV2ZW50XG4gIHwgVHJhbnNwb3J0Q2hhbmdlZEV2ZW50XG4gIHwgQ29ubmVjdGlvblJlY292ZXJlZEV2ZW50XG4pICYgeyByZWNlaXZlZF9hdD86IHN0cmluZyB8IERhdGUgfTtcblxuLy8gVE9ETzogd2Ugc2hvdWxkIHVzZSBXU0NhbGxFdmVudCBoZXJlIGJ1dCB0aGF0IG5lZWRzIGZpeGluZ1xuZXhwb3J0IHR5cGUgU3RyZWFtQ2FsbEV2ZW50ID0gRXh0cmFjdDxTdHJlYW1WaWRlb0V2ZW50LCB7IGNhbGxfY2lkOiBzdHJpbmcgfT47XG5leHBvcnQgdHlwZSBFdmVudFR5cGVzID0gJ2FsbCcgfCBWaWRlb0V2ZW50Wyd0eXBlJ107XG5cbmV4cG9ydCB0eXBlIEFsbENsaWVudEV2ZW50VHlwZXMgPSAnYWxsJyB8IFN0cmVhbVZpZGVvRXZlbnRbJ3R5cGUnXTtcbmV4cG9ydCB0eXBlIEFsbENsaWVudEV2ZW50cyA9IHtcbiAgW0sgaW4gQWxsQ2xpZW50RXZlbnRUeXBlc106IEV4dHJhY3Q8U3RyZWFtVmlkZW9FdmVudCwgeyB0eXBlOiBLIH0+O1xufTtcbmV4cG9ydCB0eXBlIENsaWVudEV2ZW50TGlzdGVuZXI8RSBleHRlbmRzIGtleW9mIEFsbENsaWVudEV2ZW50cz4gPSAoXG4gIGV2ZW50OiBBbGxDbGllbnRFdmVudHNbRV0sXG4pID0+IHZvaWQ7XG5cbmV4cG9ydCB0eXBlIEFsbENsaWVudENhbGxFdmVudHMgPSB7XG4gIFtLIGluIEV2ZW50VHlwZXNdOiBFeHRyYWN0PFZpZGVvRXZlbnQsIHsgdHlwZTogSyB9Pjtcbn07XG5cbmV4cG9ydCB0eXBlIEFsbENhbGxFdmVudHMgPSBBbGxDbGllbnRDYWxsRXZlbnRzICYgQWxsU2Z1RXZlbnRzO1xuZXhwb3J0IHR5cGUgQ2FsbEV2ZW50TGlzdGVuZXI8RSBleHRlbmRzIGtleW9mIEFsbENhbGxFdmVudHM+ID0gKFxuICBldmVudDogQWxsQ2FsbEV2ZW50c1tFXSxcbikgPT4gdm9pZDtcblxuZXhwb3J0IHR5cGUgTG9nZ2VyID0gKFxuICBsb2dMZXZlbDogTG9nTGV2ZWwsXG4gIG1lc3NhZ2U6IHN0cmluZyxcbiAgLi4uYXJnczogdW5rbm93bltdXG4pID0+IHZvaWQ7XG5cbmV4cG9ydCB0eXBlIFN0cmVhbUNsaWVudE9wdGlvbnMgPSBQYXJ0aWFsPEF4aW9zUmVxdWVzdENvbmZpZz4gJiB7XG4gIC8qKlxuICAgKiBVc2VkIHRvIGRpc2FibGUgd2FybmluZ3MgdGhhdCBhcmUgdHJpZ2dlcmVkIGJ5IHVzaW5nIGNvbm5lY3RVc2VyIG9yIGNvbm5lY3RBbm9ueW1vdXNVc2VyIHNlcnZlci1zaWRlLlxuICAgKi9cbiAgYWxsb3dTZXJ2ZXJTaWRlQ29ubmVjdD86IGJvb2xlYW47XG4gIGF4aW9zUmVxdWVzdENvbmZpZz86IEF4aW9zUmVxdWVzdENvbmZpZztcbiAgLyoqXG4gICAqIEJhc2UgdXJsIHRvIHVzZSBmb3IgQVBJXG4gICAqIHN1Y2ggYXMgaHR0cHM6Ly9jaGF0LXByb3h5LWR1Ymxpbi5zdHJlYW0taW8tYXBpLmNvbVxuICAgKi9cbiAgYmFzZVVSTD86IHN0cmluZztcbiAgYnJvd3Nlcj86IGJvb2xlYW47XG4gIC8vIGRldmljZT86IEJhc2VEZXZpY2VGaWVsZHM7XG4gIGVuYWJsZUluc2lnaHRzPzogYm9vbGVhbjtcbiAgLyoqIGV4cGVyaW1lbnRhbCBmZWF0dXJlLCBwbGVhc2UgY29udGFjdCBzdXBwb3J0IGlmIHlvdSB3YW50IHRoaXMgZmVhdHVyZSBlbmFibGVkIGZvciB5b3UgKi9cbiAgZW5hYmxlV1NGYWxsYmFjaz86IGJvb2xlYW47XG4gIGxvZ2dlcj86IExvZ2dlcjtcbiAgbG9nTGV2ZWw/OiBMb2dMZXZlbDtcbiAgLyoqXG4gICAqIFRoZSBVUkwgdG8gdXNlIGZvciB0aGUgbG9jYXRpb24gaGludC5cbiAgICovXG4gIGxvY2F0aW9uSGludFVybD86IHN0cmluZztcbiAgLyoqXG4gICAqIFRoZSBkZWZhdWx0IHRpbWVvdXQgZm9yIHJlcXVlc3RpbmcgYSBsb2NhdGlvbiBoaW50LlxuICAgKi9cbiAgbG9jYXRpb25IaW50VGltZW91dD86IG51bWJlcjtcbiAgLyoqXG4gICAqIFdoZW4gdHJ1ZSwgdXNlciB3aWxsIGJlIHBlcnNpc3RlZCBvbiBjbGllbnQuIE90aGVyd2lzZSBpZiBgY29ubmVjdFVzZXJgIGNhbGwgZmFpbHMsIHRoZW4geW91IG5lZWQgdG9cbiAgICogY2FsbCBgY29ubmVjdFVzZXJgIGFnYWluIHRvIHJldHJ5LlxuICAgKiBUaGlzIGlzIG1haW5seSB1c2VmdWwgZm9yIGNoYXQgYXBwbGljYXRpb24gd29ya2luZyBpbiBvZmZsaW5lIG1vZGUsIHdoZXJlIHlvdSB3aWxsIG5lZWQgY2xpZW50LnVzZXIgdG9cbiAgICogcGVyc2lzdCBldmVuIGlmIGNvbm5lY3RVc2VyIGNhbGwgZmFpbHMuXG4gICAqL1xuICBwZXJzaXN0VXNlck9uQ29ubmVjdGlvbkZhaWx1cmU/OiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBUaGUgc2VjcmV0IGtleSBmb3IgdGhlIEFQSSBrZXkuIFRoaXMgaXMgb25seSBuZWVkZWQgZm9yIHNlcnZlciBzaWRlIGF1dGhlbnRpY2F0aW9uLlxuICAgKi9cbiAgc2VjcmV0Pzogc3RyaW5nO1xuXG4gIHdhcm1VcD86IGJvb2xlYW47XG4gIC8vIFNldCB0aGUgaW5zdGFuY2Ugb2YgU3RhYmxlV1NDb25uZWN0aW9uIG9uIGNoYXQgY2xpZW50LiBJdHMgcHVyZWx5IGZvciB0ZXN0aW5nIHB1cnBvc2UgYW5kIHNob3VsZFxuICAvLyBub3QgYmUgdXNlZCBpbiBwcm9kdWN0aW9uIGFwcHMuXG4gIHdzQ29ubmVjdGlvbj86IFN0YWJsZVdTQ29ubmVjdGlvbjtcbn07XG5cbmV4cG9ydCB0eXBlIFRva2VuUHJvdmlkZXIgPSAoKSA9PiBQcm9taXNlPHN0cmluZz47XG5leHBvcnQgdHlwZSBUb2tlbk9yUHJvdmlkZXIgPSBudWxsIHwgc3RyaW5nIHwgVG9rZW5Qcm92aWRlciB8IHVuZGVmaW5lZDtcbiIsIi8qIGVzbGludC1kaXNhYmxlICovXG4vLyBAZ2VuZXJhdGVkIGJ5IHByb3RvYnVmLXRzIDIuOS4zIHdpdGggcGFyYW1ldGVyIGxvbmdfdHlwZV9zdHJpbmcsY2xpZW50X2dlbmVyaWMsc2VydmVyX25vbmUsZXNsaW50X2Rpc2FibGVcbi8vIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWxlIFwiZ29vZ2xlL3Byb3RvYnVmL3N0cnVjdC5wcm90b1wiIChwYWNrYWdlIFwiZ29vZ2xlLnByb3RvYnVmXCIsIHN5bnRheCBwcm90bzMpXG4vLyB0c2xpbnQ6ZGlzYWJsZVxuLy9cbi8vIFByb3RvY29sIEJ1ZmZlcnMgLSBHb29nbGUncyBkYXRhIGludGVyY2hhbmdlIGZvcm1hdFxuLy8gQ29weXJpZ2h0IDIwMDggR29vZ2xlIEluYy4gIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9wcm90b2NvbC1idWZmZXJzL1xuLy9cbi8vIFJlZGlzdHJpYnV0aW9uIGFuZCB1c2UgaW4gc291cmNlIGFuZCBiaW5hcnkgZm9ybXMsIHdpdGggb3Igd2l0aG91dFxuLy8gbW9kaWZpY2F0aW9uLCBhcmUgcGVybWl0dGVkIHByb3ZpZGVkIHRoYXQgdGhlIGZvbGxvd2luZyBjb25kaXRpb25zIGFyZVxuLy8gbWV0OlxuLy9cbi8vICAgICAqIFJlZGlzdHJpYnV0aW9ucyBvZiBzb3VyY2UgY29kZSBtdXN0IHJldGFpbiB0aGUgYWJvdmUgY29weXJpZ2h0XG4vLyBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuXG4vLyAgICAgKiBSZWRpc3RyaWJ1dGlvbnMgaW4gYmluYXJ5IGZvcm0gbXVzdCByZXByb2R1Y2UgdGhlIGFib3ZlXG4vLyBjb3B5cmlnaHQgbm90aWNlLCB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyXG4vLyBpbiB0aGUgZG9jdW1lbnRhdGlvbiBhbmQvb3Igb3RoZXIgbWF0ZXJpYWxzIHByb3ZpZGVkIHdpdGggdGhlXG4vLyBkaXN0cmlidXRpb24uXG4vLyAgICAgKiBOZWl0aGVyIHRoZSBuYW1lIG9mIEdvb2dsZSBJbmMuIG5vciB0aGUgbmFtZXMgb2YgaXRzXG4vLyBjb250cmlidXRvcnMgbWF5IGJlIHVzZWQgdG8gZW5kb3JzZSBvciBwcm9tb3RlIHByb2R1Y3RzIGRlcml2ZWQgZnJvbVxuLy8gdGhpcyBzb2Z0d2FyZSB3aXRob3V0IHNwZWNpZmljIHByaW9yIHdyaXR0ZW4gcGVybWlzc2lvbi5cbi8vXG4vLyBUSElTIFNPRlRXQVJFIElTIFBST1ZJREVEIEJZIFRIRSBDT1BZUklHSFQgSE9MREVSUyBBTkQgQ09OVFJJQlVUT1JTXG4vLyBcIkFTIElTXCIgQU5EIEFOWSBFWFBSRVNTIE9SIElNUExJRUQgV0FSUkFOVElFUywgSU5DTFVESU5HLCBCVVQgTk9UXG4vLyBMSU1JVEVEIFRPLCBUSEUgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSBBTkQgRklUTkVTUyBGT1Jcbi8vIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFSRSBESVNDTEFJTUVELiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQ09QWVJJR0hUXG4vLyBPV05FUiBPUiBDT05UUklCVVRPUlMgQkUgTElBQkxFIEZPUiBBTlkgRElSRUNULCBJTkRJUkVDVCwgSU5DSURFTlRBTCxcbi8vIFNQRUNJQUwsIEVYRU1QTEFSWSwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIChJTkNMVURJTkcsIEJVVCBOT1Rcbi8vIExJTUlURUQgVE8sIFBST0NVUkVNRU5UIE9GIFNVQlNUSVRVVEUgR09PRFMgT1IgU0VSVklDRVM7IExPU1MgT0YgVVNFLFxuLy8gREFUQSwgT1IgUFJPRklUUzsgT1IgQlVTSU5FU1MgSU5URVJSVVBUSU9OKSBIT1dFVkVSIENBVVNFRCBBTkQgT04gQU5ZXG4vLyBUSEVPUlkgT0YgTElBQklMSVRZLCBXSEVUSEVSIElOIENPTlRSQUNULCBTVFJJQ1QgTElBQklMSVRZLCBPUiBUT1JUXG4vLyAoSU5DTFVESU5HIE5FR0xJR0VOQ0UgT1IgT1RIRVJXSVNFKSBBUklTSU5HIElOIEFOWSBXQVkgT1VUIE9GIFRIRSBVU0Vcbi8vIE9GIFRISVMgU09GVFdBUkUsIEVWRU4gSUYgQURWSVNFRCBPRiBUSEUgUE9TU0lCSUxJVFkgT0YgU1VDSCBEQU1BR0UuXG4vL1xuaW1wb3J0IHR5cGUge1xuICBCaW5hcnlSZWFkT3B0aW9ucyxcbiAgQmluYXJ5V3JpdGVPcHRpb25zLFxuICBJQmluYXJ5UmVhZGVyLFxuICBJQmluYXJ5V3JpdGVyLFxuICBKc29uT2JqZWN0LFxuICBKc29uUmVhZE9wdGlvbnMsXG4gIEpzb25WYWx1ZSxcbiAgSnNvbldyaXRlT3B0aW9ucyxcbiAgUGFydGlhbE1lc3NhZ2UsXG59IGZyb20gJ0Bwcm90b2J1Zi10cy9ydW50aW1lJztcbmltcG9ydCB7XG4gIGlzSnNvbk9iamVjdCxcbiAgTWVzc2FnZVR5cGUsXG4gIHJlZmxlY3Rpb25NZXJnZVBhcnRpYWwsXG4gIHR5cGVvZkpzb25WYWx1ZSxcbiAgVW5rbm93bkZpZWxkSGFuZGxlcixcbiAgV2lyZVR5cGUsXG59IGZyb20gJ0Bwcm90b2J1Zi10cy9ydW50aW1lJztcblxuLyoqXG4gKiBgU3RydWN0YCByZXByZXNlbnRzIGEgc3RydWN0dXJlZCBkYXRhIHZhbHVlLCBjb25zaXN0aW5nIG9mIGZpZWxkc1xuICogd2hpY2ggbWFwIHRvIGR5bmFtaWNhbGx5IHR5cGVkIHZhbHVlcy4gSW4gc29tZSBsYW5ndWFnZXMsIGBTdHJ1Y3RgXG4gKiBtaWdodCBiZSBzdXBwb3J0ZWQgYnkgYSBuYXRpdmUgcmVwcmVzZW50YXRpb24uIEZvciBleGFtcGxlLCBpblxuICogc2NyaXB0aW5nIGxhbmd1YWdlcyBsaWtlIEpTIGEgc3RydWN0IGlzIHJlcHJlc2VudGVkIGFzIGFuXG4gKiBvYmplY3QuIFRoZSBkZXRhaWxzIG9mIHRoYXQgcmVwcmVzZW50YXRpb24gYXJlIGRlc2NyaWJlZCB0b2dldGhlclxuICogd2l0aCB0aGUgcHJvdG8gc3VwcG9ydCBmb3IgdGhlIGxhbmd1YWdlLlxuICpcbiAqIFRoZSBKU09OIHJlcHJlc2VudGF0aW9uIGZvciBgU3RydWN0YCBpcyBKU09OIG9iamVjdC5cbiAqXG4gKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgbWVzc2FnZSBnb29nbGUucHJvdG9idWYuU3RydWN0XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU3RydWN0IHtcbiAgLyoqXG4gICAqIFVub3JkZXJlZCBtYXAgb2YgZHluYW1pY2FsbHkgdHlwZWQgdmFsdWVzLlxuICAgKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IG1hcDxzdHJpbmcsIGdvb2dsZS5wcm90b2J1Zi5WYWx1ZT4gZmllbGRzID0gMTtcbiAgICovXG4gIGZpZWxkczoge1xuICAgIFtrZXk6IHN0cmluZ106IFZhbHVlO1xuICB9O1xufVxuLyoqXG4gKiBgVmFsdWVgIHJlcHJlc2VudHMgYSBkeW5hbWljYWxseSB0eXBlZCB2YWx1ZSB3aGljaCBjYW4gYmUgZWl0aGVyXG4gKiBudWxsLCBhIG51bWJlciwgYSBzdHJpbmcsIGEgYm9vbGVhbiwgYSByZWN1cnNpdmUgc3RydWN0IHZhbHVlLCBvciBhXG4gKiBsaXN0IG9mIHZhbHVlcy4gQSBwcm9kdWNlciBvZiB2YWx1ZSBpcyBleHBlY3RlZCB0byBzZXQgb25lIG9mIHRoZXNlXG4gKiB2YXJpYW50cy4gQWJzZW5jZSBvZiBhbnkgdmFyaWFudCBpbmRpY2F0ZXMgYW4gZXJyb3IuXG4gKlxuICogVGhlIEpTT04gcmVwcmVzZW50YXRpb24gZm9yIGBWYWx1ZWAgaXMgSlNPTiB2YWx1ZS5cbiAqXG4gKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgbWVzc2FnZSBnb29nbGUucHJvdG9idWYuVmFsdWVcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBWYWx1ZSB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgb25lb2Y6IGtpbmRcbiAgICovXG4gIGtpbmQ6XG4gICAgfCB7XG4gICAgICAgIG9uZW9mS2luZDogJ251bGxWYWx1ZSc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXByZXNlbnRzIGEgbnVsbCB2YWx1ZS5cbiAgICAgICAgICpcbiAgICAgICAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBnb29nbGUucHJvdG9idWYuTnVsbFZhbHVlIG51bGxfdmFsdWUgPSAxO1xuICAgICAgICAgKi9cbiAgICAgICAgbnVsbFZhbHVlOiBOdWxsVmFsdWU7XG4gICAgICB9XG4gICAgfCB7XG4gICAgICAgIG9uZW9mS2luZDogJ251bWJlclZhbHVlJztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlcHJlc2VudHMgYSBkb3VibGUgdmFsdWUuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogZG91YmxlIG51bWJlcl92YWx1ZSA9IDI7XG4gICAgICAgICAqL1xuICAgICAgICBudW1iZXJWYWx1ZTogbnVtYmVyO1xuICAgICAgfVxuICAgIHwge1xuICAgICAgICBvbmVvZktpbmQ6ICdzdHJpbmdWYWx1ZSc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXByZXNlbnRzIGEgc3RyaW5nIHZhbHVlLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmluZyBzdHJpbmdfdmFsdWUgPSAzO1xuICAgICAgICAgKi9cbiAgICAgICAgc3RyaW5nVmFsdWU6IHN0cmluZztcbiAgICAgIH1cbiAgICB8IHtcbiAgICAgICAgb25lb2ZLaW5kOiAnYm9vbFZhbHVlJztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlcHJlc2VudHMgYSBib29sZWFuIHZhbHVlLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IGJvb2wgYm9vbF92YWx1ZSA9IDQ7XG4gICAgICAgICAqL1xuICAgICAgICBib29sVmFsdWU6IGJvb2xlYW47XG4gICAgICB9XG4gICAgfCB7XG4gICAgICAgIG9uZW9mS2luZDogJ3N0cnVjdFZhbHVlJztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlcHJlc2VudHMgYSBzdHJ1Y3R1cmVkIHZhbHVlLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IGdvb2dsZS5wcm90b2J1Zi5TdHJ1Y3Qgc3RydWN0X3ZhbHVlID0gNTtcbiAgICAgICAgICovXG4gICAgICAgIHN0cnVjdFZhbHVlOiBTdHJ1Y3Q7XG4gICAgICB9XG4gICAgfCB7XG4gICAgICAgIG9uZW9mS2luZDogJ2xpc3RWYWx1ZSc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXByZXNlbnRzIGEgcmVwZWF0ZWQgYFZhbHVlYC5cbiAgICAgICAgICpcbiAgICAgICAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBnb29nbGUucHJvdG9idWYuTGlzdFZhbHVlIGxpc3RfdmFsdWUgPSA2O1xuICAgICAgICAgKi9cbiAgICAgICAgbGlzdFZhbHVlOiBMaXN0VmFsdWU7XG4gICAgICB9XG4gICAgfCB7XG4gICAgICAgIG9uZW9mS2luZDogdW5kZWZpbmVkO1xuICAgICAgfTtcbn1cbi8qKlxuICogYExpc3RWYWx1ZWAgaXMgYSB3cmFwcGVyIGFyb3VuZCBhIHJlcGVhdGVkIGZpZWxkIG9mIHZhbHVlcy5cbiAqXG4gKiBUaGUgSlNPTiByZXByZXNlbnRhdGlvbiBmb3IgYExpc3RWYWx1ZWAgaXMgSlNPTiBhcnJheS5cbiAqXG4gKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgbWVzc2FnZSBnb29nbGUucHJvdG9idWYuTGlzdFZhbHVlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgTGlzdFZhbHVlIHtcbiAgLyoqXG4gICAqIFJlcGVhdGVkIGZpZWxkIG9mIGR5bmFtaWNhbGx5IHR5cGVkIHZhbHVlcy5cbiAgICpcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiByZXBlYXRlZCBnb29nbGUucHJvdG9idWYuVmFsdWUgdmFsdWVzID0gMTtcbiAgICovXG4gIHZhbHVlczogVmFsdWVbXTtcbn1cbi8qKlxuICogYE51bGxWYWx1ZWAgaXMgYSBzaW5nbGV0b24gZW51bWVyYXRpb24gdG8gcmVwcmVzZW50IHRoZSBudWxsIHZhbHVlIGZvciB0aGVcbiAqIGBWYWx1ZWAgdHlwZSB1bmlvbi5cbiAqXG4gKiAgVGhlIEpTT04gcmVwcmVzZW50YXRpb24gZm9yIGBOdWxsVmFsdWVgIGlzIEpTT04gYG51bGxgLlxuICpcbiAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBlbnVtIGdvb2dsZS5wcm90b2J1Zi5OdWxsVmFsdWVcbiAqL1xuZXhwb3J0IGVudW0gTnVsbFZhbHVlIHtcbiAgLyoqXG4gICAqIE51bGwgdmFsdWUuXG4gICAqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBlbnVtIHZhbHVlOiBOVUxMX1ZBTFVFID0gMDtcbiAgICovXG4gIE5VTExfVkFMVUUgPSAwLFxufVxuLy8gQGdlbmVyYXRlZCBtZXNzYWdlIHR5cGUgd2l0aCByZWZsZWN0aW9uIGluZm9ybWF0aW9uLCBtYXkgcHJvdmlkZSBzcGVlZCBvcHRpbWl6ZWQgbWV0aG9kc1xuY2xhc3MgU3RydWN0JFR5cGUgZXh0ZW5kcyBNZXNzYWdlVHlwZTxTdHJ1Y3Q+IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoJ2dvb2dsZS5wcm90b2J1Zi5TdHJ1Y3QnLCBbXG4gICAgICB7XG4gICAgICAgIG5vOiAxLFxuICAgICAgICBuYW1lOiAnZmllbGRzJyxcbiAgICAgICAga2luZDogJ21hcCcsXG4gICAgICAgIEs6IDkgLypTY2FsYXJUeXBlLlNUUklORyovLFxuICAgICAgICBWOiB7IGtpbmQ6ICdtZXNzYWdlJywgVDogKCkgPT4gVmFsdWUgfSxcbiAgICAgIH0sXG4gICAgXSk7XG4gIH1cbiAgLyoqXG4gICAqIEVuY29kZSBgU3RydWN0YCB0byBKU09OIG9iamVjdC5cbiAgICovXG4gIGludGVybmFsSnNvbldyaXRlKG1lc3NhZ2U6IFN0cnVjdCwgb3B0aW9uczogSnNvbldyaXRlT3B0aW9ucyk6IEpzb25WYWx1ZSB7XG4gICAgbGV0IGpzb246IEpzb25PYmplY3QgPSB7fTtcbiAgICBmb3IgKGxldCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMobWVzc2FnZS5maWVsZHMpKSB7XG4gICAgICBqc29uW2tdID0gVmFsdWUudG9Kc29uKHYpO1xuICAgIH1cbiAgICByZXR1cm4ganNvbjtcbiAgfVxuICAvKipcbiAgICogRGVjb2RlIGBTdHJ1Y3RgIGZyb20gSlNPTiBvYmplY3QuXG4gICAqL1xuICBpbnRlcm5hbEpzb25SZWFkKFxuICAgIGpzb246IEpzb25WYWx1ZSxcbiAgICBvcHRpb25zOiBKc29uUmVhZE9wdGlvbnMsXG4gICAgdGFyZ2V0PzogU3RydWN0LFxuICApOiBTdHJ1Y3Qge1xuICAgIGlmICghaXNKc29uT2JqZWN0KGpzb24pKVxuICAgICAgdGhyb3cgbmV3IGdsb2JhbFRoaXMuRXJyb3IoXG4gICAgICAgICdVbmFibGUgdG8gcGFyc2UgbWVzc2FnZSAnICtcbiAgICAgICAgICB0aGlzLnR5cGVOYW1lICtcbiAgICAgICAgICAnIGZyb20gSlNPTiAnICtcbiAgICAgICAgICB0eXBlb2ZKc29uVmFsdWUoanNvbikgK1xuICAgICAgICAgICcuJyxcbiAgICAgICk7XG4gICAgaWYgKCF0YXJnZXQpIHRhcmdldCA9IHRoaXMuY3JlYXRlKCk7XG4gICAgZm9yIChsZXQgW2ssIHZdIG9mIGdsb2JhbFRoaXMuT2JqZWN0LmVudHJpZXMoanNvbikpIHtcbiAgICAgIHRhcmdldC5maWVsZHNba10gPSBWYWx1ZS5mcm9tSnNvbih2KTtcbiAgICB9XG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfVxuICBjcmVhdGUodmFsdWU/OiBQYXJ0aWFsTWVzc2FnZTxTdHJ1Y3Q+KTogU3RydWN0IHtcbiAgICBjb25zdCBtZXNzYWdlID0gZ2xvYmFsVGhpcy5PYmplY3QuY3JlYXRlKHRoaXMubWVzc2FnZVByb3RvdHlwZSEpO1xuICAgIG1lc3NhZ2UuZmllbGRzID0ge307XG4gICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpXG4gICAgICByZWZsZWN0aW9uTWVyZ2VQYXJ0aWFsPFN0cnVjdD4odGhpcywgbWVzc2FnZSwgdmFsdWUpO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG4gIGludGVybmFsQmluYXJ5UmVhZChcbiAgICByZWFkZXI6IElCaW5hcnlSZWFkZXIsXG4gICAgbGVuZ3RoOiBudW1iZXIsXG4gICAgb3B0aW9uczogQmluYXJ5UmVhZE9wdGlvbnMsXG4gICAgdGFyZ2V0PzogU3RydWN0LFxuICApOiBTdHJ1Y3Qge1xuICAgIGxldCBtZXNzYWdlID0gdGFyZ2V0ID8/IHRoaXMuY3JlYXRlKCksXG4gICAgICBlbmQgPSByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBsZXQgW2ZpZWxkTm8sIHdpcmVUeXBlXSA9IHJlYWRlci50YWcoKTtcbiAgICAgIHN3aXRjaCAoZmllbGRObykge1xuICAgICAgICBjYXNlIC8qIG1hcDxzdHJpbmcsIGdvb2dsZS5wcm90b2J1Zi5WYWx1ZT4gZmllbGRzICovIDE6XG4gICAgICAgICAgdGhpcy5iaW5hcnlSZWFkTWFwMShtZXNzYWdlLmZpZWxkcywgcmVhZGVyLCBvcHRpb25zKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBsZXQgdSA9IG9wdGlvbnMucmVhZFVua25vd25GaWVsZDtcbiAgICAgICAgICBpZiAodSA9PT0gJ3Rocm93JylcbiAgICAgICAgICAgIHRocm93IG5ldyBnbG9iYWxUaGlzLkVycm9yKFxuICAgICAgICAgICAgICBgVW5rbm93biBmaWVsZCAke2ZpZWxkTm99ICh3aXJlIHR5cGUgJHt3aXJlVHlwZX0pIGZvciAke3RoaXMudHlwZU5hbWV9YCxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgbGV0IGQgPSByZWFkZXIuc2tpcCh3aXJlVHlwZSk7XG4gICAgICAgICAgaWYgKHUgIT09IGZhbHNlKVxuICAgICAgICAgICAgKHUgPT09IHRydWUgPyBVbmtub3duRmllbGRIYW5kbGVyLm9uUmVhZCA6IHUpKFxuICAgICAgICAgICAgICB0aGlzLnR5cGVOYW1lLFxuICAgICAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICAgICAgICBmaWVsZE5vLFxuICAgICAgICAgICAgICB3aXJlVHlwZSxcbiAgICAgICAgICAgICAgZCxcbiAgICAgICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG4gIHByaXZhdGUgYmluYXJ5UmVhZE1hcDEoXG4gICAgbWFwOiBTdHJ1Y3RbJ2ZpZWxkcyddLFxuICAgIHJlYWRlcjogSUJpbmFyeVJlYWRlcixcbiAgICBvcHRpb25zOiBCaW5hcnlSZWFkT3B0aW9ucyxcbiAgKTogdm9pZCB7XG4gICAgbGV0IGxlbiA9IHJlYWRlci51aW50MzIoKSxcbiAgICAgIGVuZCA9IHJlYWRlci5wb3MgKyBsZW4sXG4gICAgICBrZXk6IGtleW9mIFN0cnVjdFsnZmllbGRzJ10gfCB1bmRlZmluZWQsXG4gICAgICB2YWw6IFN0cnVjdFsnZmllbGRzJ11bYW55XSB8IHVuZGVmaW5lZDtcbiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgbGV0IFtmaWVsZE5vLCB3aXJlVHlwZV0gPSByZWFkZXIudGFnKCk7XG4gICAgICBzd2l0Y2ggKGZpZWxkTm8pIHtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgIGtleSA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgIHZhbCA9IFZhbHVlLmludGVybmFsQmluYXJ5UmVhZChyZWFkZXIsIHJlYWRlci51aW50MzIoKSwgb3B0aW9ucyk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgdGhyb3cgbmV3IGdsb2JhbFRoaXMuRXJyb3IoXG4gICAgICAgICAgICAndW5rbm93biBtYXAgZW50cnkgZmllbGQgZm9yIGZpZWxkIGdvb2dsZS5wcm90b2J1Zi5TdHJ1Y3QuZmllbGRzJyxcbiAgICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgICBtYXBba2V5ID8/ICcnXSA9IHZhbCA/PyBWYWx1ZS5jcmVhdGUoKTtcbiAgfVxuICBpbnRlcm5hbEJpbmFyeVdyaXRlKFxuICAgIG1lc3NhZ2U6IFN0cnVjdCxcbiAgICB3cml0ZXI6IElCaW5hcnlXcml0ZXIsXG4gICAgb3B0aW9uczogQmluYXJ5V3JpdGVPcHRpb25zLFxuICApOiBJQmluYXJ5V3JpdGVyIHtcbiAgICAvKiBtYXA8c3RyaW5nLCBnb29nbGUucHJvdG9idWYuVmFsdWU+IGZpZWxkcyA9IDE7ICovXG4gICAgZm9yIChsZXQgayBvZiBnbG9iYWxUaGlzLk9iamVjdC5rZXlzKG1lc3NhZ2UuZmllbGRzKSkge1xuICAgICAgd3JpdGVyXG4gICAgICAgIC50YWcoMSwgV2lyZVR5cGUuTGVuZ3RoRGVsaW1pdGVkKVxuICAgICAgICAuZm9yaygpXG4gICAgICAgIC50YWcoMSwgV2lyZVR5cGUuTGVuZ3RoRGVsaW1pdGVkKVxuICAgICAgICAuc3RyaW5nKGspO1xuICAgICAgd3JpdGVyLnRhZygyLCBXaXJlVHlwZS5MZW5ndGhEZWxpbWl0ZWQpLmZvcmsoKTtcbiAgICAgIFZhbHVlLmludGVybmFsQmluYXJ5V3JpdGUobWVzc2FnZS5maWVsZHNba10sIHdyaXRlciwgb3B0aW9ucyk7XG4gICAgICB3cml0ZXIuam9pbigpLmpvaW4oKTtcbiAgICB9XG4gICAgbGV0IHUgPSBvcHRpb25zLndyaXRlVW5rbm93bkZpZWxkcztcbiAgICBpZiAodSAhPT0gZmFsc2UpXG4gICAgICAodSA9PSB0cnVlID8gVW5rbm93bkZpZWxkSGFuZGxlci5vbldyaXRlIDogdSkoXG4gICAgICAgIHRoaXMudHlwZU5hbWUsXG4gICAgICAgIG1lc3NhZ2UsXG4gICAgICAgIHdyaXRlcixcbiAgICAgICk7XG4gICAgcmV0dXJuIHdyaXRlcjtcbiAgfVxufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIE1lc3NhZ2VUeXBlIGZvciBwcm90b2J1ZiBtZXNzYWdlIGdvb2dsZS5wcm90b2J1Zi5TdHJ1Y3RcbiAqL1xuZXhwb3J0IGNvbnN0IFN0cnVjdCA9IG5ldyBTdHJ1Y3QkVHlwZSgpO1xuLy8gQGdlbmVyYXRlZCBtZXNzYWdlIHR5cGUgd2l0aCByZWZsZWN0aW9uIGluZm9ybWF0aW9uLCBtYXkgcHJvdmlkZSBzcGVlZCBvcHRpbWl6ZWQgbWV0aG9kc1xuY2xhc3MgVmFsdWUkVHlwZSBleHRlbmRzIE1lc3NhZ2VUeXBlPFZhbHVlPiB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCdnb29nbGUucHJvdG9idWYuVmFsdWUnLCBbXG4gICAgICB7XG4gICAgICAgIG5vOiAxLFxuICAgICAgICBuYW1lOiAnbnVsbF92YWx1ZScsXG4gICAgICAgIGtpbmQ6ICdlbnVtJyxcbiAgICAgICAgb25lb2Y6ICdraW5kJyxcbiAgICAgICAgVDogKCkgPT4gWydnb29nbGUucHJvdG9idWYuTnVsbFZhbHVlJywgTnVsbFZhbHVlXSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5vOiAyLFxuICAgICAgICBuYW1lOiAnbnVtYmVyX3ZhbHVlJyxcbiAgICAgICAga2luZDogJ3NjYWxhcicsXG4gICAgICAgIG9uZW9mOiAna2luZCcsXG4gICAgICAgIFQ6IDEgLypTY2FsYXJUeXBlLkRPVUJMRSovLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbm86IDMsXG4gICAgICAgIG5hbWU6ICdzdHJpbmdfdmFsdWUnLFxuICAgICAgICBraW5kOiAnc2NhbGFyJyxcbiAgICAgICAgb25lb2Y6ICdraW5kJyxcbiAgICAgICAgVDogOSAvKlNjYWxhclR5cGUuU1RSSU5HKi8sXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBubzogNCxcbiAgICAgICAgbmFtZTogJ2Jvb2xfdmFsdWUnLFxuICAgICAgICBraW5kOiAnc2NhbGFyJyxcbiAgICAgICAgb25lb2Y6ICdraW5kJyxcbiAgICAgICAgVDogOCAvKlNjYWxhclR5cGUuQk9PTCovLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbm86IDUsXG4gICAgICAgIG5hbWU6ICdzdHJ1Y3RfdmFsdWUnLFxuICAgICAgICBraW5kOiAnbWVzc2FnZScsXG4gICAgICAgIG9uZW9mOiAna2luZCcsXG4gICAgICAgIFQ6ICgpID0+IFN0cnVjdCxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5vOiA2LFxuICAgICAgICBuYW1lOiAnbGlzdF92YWx1ZScsXG4gICAgICAgIGtpbmQ6ICdtZXNzYWdlJyxcbiAgICAgICAgb25lb2Y6ICdraW5kJyxcbiAgICAgICAgVDogKCkgPT4gTGlzdFZhbHVlLFxuICAgICAgfSxcbiAgICBdKTtcbiAgfVxuICAvKipcbiAgICogRW5jb2RlIGBWYWx1ZWAgdG8gSlNPTiB2YWx1ZS5cbiAgICovXG4gIGludGVybmFsSnNvbldyaXRlKG1lc3NhZ2U6IFZhbHVlLCBvcHRpb25zOiBKc29uV3JpdGVPcHRpb25zKTogSnNvblZhbHVlIHtcbiAgICBpZiAobWVzc2FnZS5raW5kLm9uZW9mS2luZCA9PT0gdW5kZWZpbmVkKSB0aHJvdyBuZXcgZ2xvYmFsVGhpcy5FcnJvcigpO1xuICAgIHN3aXRjaCAobWVzc2FnZS5raW5kLm9uZW9mS2luZCkge1xuICAgICAgY2FzZSB1bmRlZmluZWQ6XG4gICAgICAgIHRocm93IG5ldyBnbG9iYWxUaGlzLkVycm9yKCk7XG4gICAgICBjYXNlICdib29sVmFsdWUnOlxuICAgICAgICByZXR1cm4gbWVzc2FnZS5raW5kLmJvb2xWYWx1ZTtcbiAgICAgIGNhc2UgJ251bGxWYWx1ZSc6XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgY2FzZSAnbnVtYmVyVmFsdWUnOlxuICAgICAgICBsZXQgbnVtYmVyVmFsdWUgPSBtZXNzYWdlLmtpbmQubnVtYmVyVmFsdWU7XG4gICAgICAgIGlmICh0eXBlb2YgbnVtYmVyVmFsdWUgPT0gJ251bWJlcicgJiYgIU51bWJlci5pc0Zpbml0ZShudW1iZXJWYWx1ZSkpXG4gICAgICAgICAgdGhyb3cgbmV3IGdsb2JhbFRoaXMuRXJyb3IoKTtcbiAgICAgICAgcmV0dXJuIG51bWJlclZhbHVlO1xuICAgICAgY2FzZSAnc3RyaW5nVmFsdWUnOlxuICAgICAgICByZXR1cm4gbWVzc2FnZS5raW5kLnN0cmluZ1ZhbHVlO1xuICAgICAgY2FzZSAnbGlzdFZhbHVlJzpcbiAgICAgICAgbGV0IGxpc3RWYWx1ZUZpZWxkID0gdGhpcy5maWVsZHMuZmluZCgoZikgPT4gZi5ubyA9PT0gNik7XG4gICAgICAgIGlmIChsaXN0VmFsdWVGaWVsZD8ua2luZCAhPT0gJ21lc3NhZ2UnKSB0aHJvdyBuZXcgZ2xvYmFsVGhpcy5FcnJvcigpO1xuICAgICAgICByZXR1cm4gbGlzdFZhbHVlRmllbGQuVCgpLnRvSnNvbihtZXNzYWdlLmtpbmQubGlzdFZhbHVlKTtcbiAgICAgIGNhc2UgJ3N0cnVjdFZhbHVlJzpcbiAgICAgICAgbGV0IHN0cnVjdFZhbHVlRmllbGQgPSB0aGlzLmZpZWxkcy5maW5kKChmKSA9PiBmLm5vID09PSA1KTtcbiAgICAgICAgaWYgKHN0cnVjdFZhbHVlRmllbGQ/LmtpbmQgIT09ICdtZXNzYWdlJykgdGhyb3cgbmV3IGdsb2JhbFRoaXMuRXJyb3IoKTtcbiAgICAgICAgcmV0dXJuIHN0cnVjdFZhbHVlRmllbGQuVCgpLnRvSnNvbihtZXNzYWdlLmtpbmQuc3RydWN0VmFsdWUpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogRGVjb2RlIGBWYWx1ZWAgZnJvbSBKU09OIHZhbHVlLlxuICAgKi9cbiAgaW50ZXJuYWxKc29uUmVhZChcbiAgICBqc29uOiBKc29uVmFsdWUsXG4gICAgb3B0aW9uczogSnNvblJlYWRPcHRpb25zLFxuICAgIHRhcmdldD86IFZhbHVlLFxuICApOiBWYWx1ZSB7XG4gICAgaWYgKCF0YXJnZXQpIHRhcmdldCA9IHRoaXMuY3JlYXRlKCk7XG4gICAgc3dpdGNoICh0eXBlb2YganNvbikge1xuICAgICAgY2FzZSAnbnVtYmVyJzpcbiAgICAgICAgdGFyZ2V0LmtpbmQgPSB7IG9uZW9mS2luZDogJ251bWJlclZhbHVlJywgbnVtYmVyVmFsdWU6IGpzb24gfTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdzdHJpbmcnOlxuICAgICAgICB0YXJnZXQua2luZCA9IHsgb25lb2ZLaW5kOiAnc3RyaW5nVmFsdWUnLCBzdHJpbmdWYWx1ZToganNvbiB9O1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2Jvb2xlYW4nOlxuICAgICAgICB0YXJnZXQua2luZCA9IHsgb25lb2ZLaW5kOiAnYm9vbFZhbHVlJywgYm9vbFZhbHVlOiBqc29uIH07XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnb2JqZWN0JzpcbiAgICAgICAgaWYgKGpzb24gPT09IG51bGwpIHtcbiAgICAgICAgICB0YXJnZXQua2luZCA9IHtcbiAgICAgICAgICAgIG9uZW9mS2luZDogJ251bGxWYWx1ZScsXG4gICAgICAgICAgICBudWxsVmFsdWU6IE51bGxWYWx1ZS5OVUxMX1ZBTFVFLFxuICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSBpZiAoZ2xvYmFsVGhpcy5BcnJheS5pc0FycmF5KGpzb24pKSB7XG4gICAgICAgICAgdGFyZ2V0LmtpbmQgPSB7XG4gICAgICAgICAgICBvbmVvZktpbmQ6ICdsaXN0VmFsdWUnLFxuICAgICAgICAgICAgbGlzdFZhbHVlOiBMaXN0VmFsdWUuZnJvbUpzb24oanNvbiksXG4gICAgICAgICAgfTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0YXJnZXQua2luZCA9IHtcbiAgICAgICAgICAgIG9uZW9mS2luZDogJ3N0cnVjdFZhbHVlJyxcbiAgICAgICAgICAgIHN0cnVjdFZhbHVlOiBTdHJ1Y3QuZnJvbUpzb24oanNvbiksXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IG5ldyBnbG9iYWxUaGlzLkVycm9yKFxuICAgICAgICAgICdVbmFibGUgdG8gcGFyc2UgJyArXG4gICAgICAgICAgICB0aGlzLnR5cGVOYW1lICtcbiAgICAgICAgICAgICcgZnJvbSBKU09OICcgK1xuICAgICAgICAgICAgdHlwZW9mSnNvblZhbHVlKGpzb24pLFxuICAgICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9XG4gIGNyZWF0ZSh2YWx1ZT86IFBhcnRpYWxNZXNzYWdlPFZhbHVlPik6IFZhbHVlIHtcbiAgICBjb25zdCBtZXNzYWdlID0gZ2xvYmFsVGhpcy5PYmplY3QuY3JlYXRlKHRoaXMubWVzc2FnZVByb3RvdHlwZSEpO1xuICAgIG1lc3NhZ2Uua2luZCA9IHsgb25lb2ZLaW5kOiB1bmRlZmluZWQgfTtcbiAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZClcbiAgICAgIHJlZmxlY3Rpb25NZXJnZVBhcnRpYWw8VmFsdWU+KHRoaXMsIG1lc3NhZ2UsIHZhbHVlKTtcbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxuICBpbnRlcm5hbEJpbmFyeVJlYWQoXG4gICAgcmVhZGVyOiBJQmluYXJ5UmVhZGVyLFxuICAgIGxlbmd0aDogbnVtYmVyLFxuICAgIG9wdGlvbnM6IEJpbmFyeVJlYWRPcHRpb25zLFxuICAgIHRhcmdldD86IFZhbHVlLFxuICApOiBWYWx1ZSB7XG4gICAgbGV0IG1lc3NhZ2UgPSB0YXJnZXQgPz8gdGhpcy5jcmVhdGUoKSxcbiAgICAgIGVuZCA9IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgIGxldCBbZmllbGRObywgd2lyZVR5cGVdID0gcmVhZGVyLnRhZygpO1xuICAgICAgc3dpdGNoIChmaWVsZE5vKSB7XG4gICAgICAgIGNhc2UgLyogZ29vZ2xlLnByb3RvYnVmLk51bGxWYWx1ZSBudWxsX3ZhbHVlICovIDE6XG4gICAgICAgICAgbWVzc2FnZS5raW5kID0ge1xuICAgICAgICAgICAgb25lb2ZLaW5kOiAnbnVsbFZhbHVlJyxcbiAgICAgICAgICAgIG51bGxWYWx1ZTogcmVhZGVyLmludDMyKCksXG4gICAgICAgICAgfTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAvKiBkb3VibGUgbnVtYmVyX3ZhbHVlICovIDI6XG4gICAgICAgICAgbWVzc2FnZS5raW5kID0ge1xuICAgICAgICAgICAgb25lb2ZLaW5kOiAnbnVtYmVyVmFsdWUnLFxuICAgICAgICAgICAgbnVtYmVyVmFsdWU6IHJlYWRlci5kb3VibGUoKSxcbiAgICAgICAgICB9O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIC8qIHN0cmluZyBzdHJpbmdfdmFsdWUgKi8gMzpcbiAgICAgICAgICBtZXNzYWdlLmtpbmQgPSB7XG4gICAgICAgICAgICBvbmVvZktpbmQ6ICdzdHJpbmdWYWx1ZScsXG4gICAgICAgICAgICBzdHJpbmdWYWx1ZTogcmVhZGVyLnN0cmluZygpLFxuICAgICAgICAgIH07XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgLyogYm9vbCBib29sX3ZhbHVlICovIDQ6XG4gICAgICAgICAgbWVzc2FnZS5raW5kID0ge1xuICAgICAgICAgICAgb25lb2ZLaW5kOiAnYm9vbFZhbHVlJyxcbiAgICAgICAgICAgIGJvb2xWYWx1ZTogcmVhZGVyLmJvb2woKSxcbiAgICAgICAgICB9O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIC8qIGdvb2dsZS5wcm90b2J1Zi5TdHJ1Y3Qgc3RydWN0X3ZhbHVlICovIDU6XG4gICAgICAgICAgbWVzc2FnZS5raW5kID0ge1xuICAgICAgICAgICAgb25lb2ZLaW5kOiAnc3RydWN0VmFsdWUnLFxuICAgICAgICAgICAgc3RydWN0VmFsdWU6IFN0cnVjdC5pbnRlcm5hbEJpbmFyeVJlYWQoXG4gICAgICAgICAgICAgIHJlYWRlcixcbiAgICAgICAgICAgICAgcmVhZGVyLnVpbnQzMigpLFxuICAgICAgICAgICAgICBvcHRpb25zLFxuICAgICAgICAgICAgICAobWVzc2FnZS5raW5kIGFzIGFueSkuc3RydWN0VmFsdWUsXG4gICAgICAgICAgICApLFxuICAgICAgICAgIH07XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgLyogZ29vZ2xlLnByb3RvYnVmLkxpc3RWYWx1ZSBsaXN0X3ZhbHVlICovIDY6XG4gICAgICAgICAgbWVzc2FnZS5raW5kID0ge1xuICAgICAgICAgICAgb25lb2ZLaW5kOiAnbGlzdFZhbHVlJyxcbiAgICAgICAgICAgIGxpc3RWYWx1ZTogTGlzdFZhbHVlLmludGVybmFsQmluYXJ5UmVhZChcbiAgICAgICAgICAgICAgcmVhZGVyLFxuICAgICAgICAgICAgICByZWFkZXIudWludDMyKCksXG4gICAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICAgIChtZXNzYWdlLmtpbmQgYXMgYW55KS5saXN0VmFsdWUsXG4gICAgICAgICAgICApLFxuICAgICAgICAgIH07XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgbGV0IHUgPSBvcHRpb25zLnJlYWRVbmtub3duRmllbGQ7XG4gICAgICAgICAgaWYgKHUgPT09ICd0aHJvdycpXG4gICAgICAgICAgICB0aHJvdyBuZXcgZ2xvYmFsVGhpcy5FcnJvcihcbiAgICAgICAgICAgICAgYFVua25vd24gZmllbGQgJHtmaWVsZE5vfSAod2lyZSB0eXBlICR7d2lyZVR5cGV9KSBmb3IgJHt0aGlzLnR5cGVOYW1lfWAsXG4gICAgICAgICAgICApO1xuICAgICAgICAgIGxldCBkID0gcmVhZGVyLnNraXAod2lyZVR5cGUpO1xuICAgICAgICAgIGlmICh1ICE9PSBmYWxzZSlcbiAgICAgICAgICAgICh1ID09PSB0cnVlID8gVW5rbm93bkZpZWxkSGFuZGxlci5vblJlYWQgOiB1KShcbiAgICAgICAgICAgICAgdGhpcy50eXBlTmFtZSxcbiAgICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgICAgZmllbGRObyxcbiAgICAgICAgICAgICAgd2lyZVR5cGUsXG4gICAgICAgICAgICAgIGQsXG4gICAgICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxuICBpbnRlcm5hbEJpbmFyeVdyaXRlKFxuICAgIG1lc3NhZ2U6IFZhbHVlLFxuICAgIHdyaXRlcjogSUJpbmFyeVdyaXRlcixcbiAgICBvcHRpb25zOiBCaW5hcnlXcml0ZU9wdGlvbnMsXG4gICk6IElCaW5hcnlXcml0ZXIge1xuICAgIC8qIGdvb2dsZS5wcm90b2J1Zi5OdWxsVmFsdWUgbnVsbF92YWx1ZSA9IDE7ICovXG4gICAgaWYgKG1lc3NhZ2Uua2luZC5vbmVvZktpbmQgPT09ICdudWxsVmFsdWUnKVxuICAgICAgd3JpdGVyLnRhZygxLCBXaXJlVHlwZS5WYXJpbnQpLmludDMyKG1lc3NhZ2Uua2luZC5udWxsVmFsdWUpO1xuICAgIC8qIGRvdWJsZSBudW1iZXJfdmFsdWUgPSAyOyAqL1xuICAgIGlmIChtZXNzYWdlLmtpbmQub25lb2ZLaW5kID09PSAnbnVtYmVyVmFsdWUnKVxuICAgICAgd3JpdGVyLnRhZygyLCBXaXJlVHlwZS5CaXQ2NCkuZG91YmxlKG1lc3NhZ2Uua2luZC5udW1iZXJWYWx1ZSk7XG4gICAgLyogc3RyaW5nIHN0cmluZ192YWx1ZSA9IDM7ICovXG4gICAgaWYgKG1lc3NhZ2Uua2luZC5vbmVvZktpbmQgPT09ICdzdHJpbmdWYWx1ZScpXG4gICAgICB3cml0ZXIudGFnKDMsIFdpcmVUeXBlLkxlbmd0aERlbGltaXRlZCkuc3RyaW5nKG1lc3NhZ2Uua2luZC5zdHJpbmdWYWx1ZSk7XG4gICAgLyogYm9vbCBib29sX3ZhbHVlID0gNDsgKi9cbiAgICBpZiAobWVzc2FnZS5raW5kLm9uZW9mS2luZCA9PT0gJ2Jvb2xWYWx1ZScpXG4gICAgICB3cml0ZXIudGFnKDQsIFdpcmVUeXBlLlZhcmludCkuYm9vbChtZXNzYWdlLmtpbmQuYm9vbFZhbHVlKTtcbiAgICAvKiBnb29nbGUucHJvdG9idWYuU3RydWN0IHN0cnVjdF92YWx1ZSA9IDU7ICovXG4gICAgaWYgKG1lc3NhZ2Uua2luZC5vbmVvZktpbmQgPT09ICdzdHJ1Y3RWYWx1ZScpXG4gICAgICBTdHJ1Y3QuaW50ZXJuYWxCaW5hcnlXcml0ZShcbiAgICAgICAgbWVzc2FnZS5raW5kLnN0cnVjdFZhbHVlLFxuICAgICAgICB3cml0ZXIudGFnKDUsIFdpcmVUeXBlLkxlbmd0aERlbGltaXRlZCkuZm9yaygpLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgKS5qb2luKCk7XG4gICAgLyogZ29vZ2xlLnByb3RvYnVmLkxpc3RWYWx1ZSBsaXN0X3ZhbHVlID0gNjsgKi9cbiAgICBpZiAobWVzc2FnZS5raW5kLm9uZW9mS2luZCA9PT0gJ2xpc3RWYWx1ZScpXG4gICAgICBMaXN0VmFsdWUuaW50ZXJuYWxCaW5hcnlXcml0ZShcbiAgICAgICAgbWVzc2FnZS5raW5kLmxpc3RWYWx1ZSxcbiAgICAgICAgd3JpdGVyLnRhZyg2LCBXaXJlVHlwZS5MZW5ndGhEZWxpbWl0ZWQpLmZvcmsoKSxcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICkuam9pbigpO1xuICAgIGxldCB1ID0gb3B0aW9ucy53cml0ZVVua25vd25GaWVsZHM7XG4gICAgaWYgKHUgIT09IGZhbHNlKVxuICAgICAgKHUgPT0gdHJ1ZSA/IFVua25vd25GaWVsZEhhbmRsZXIub25Xcml0ZSA6IHUpKFxuICAgICAgICB0aGlzLnR5cGVOYW1lLFxuICAgICAgICBtZXNzYWdlLFxuICAgICAgICB3cml0ZXIsXG4gICAgICApO1xuICAgIHJldHVybiB3cml0ZXI7XG4gIH1cbn1cbi8qKlxuICogQGdlbmVyYXRlZCBNZXNzYWdlVHlwZSBmb3IgcHJvdG9idWYgbWVzc2FnZSBnb29nbGUucHJvdG9idWYuVmFsdWVcbiAqL1xuZXhwb3J0IGNvbnN0IFZhbHVlID0gbmV3IFZhbHVlJFR5cGUoKTtcbi8vIEBnZW5lcmF0ZWQgbWVzc2FnZSB0eXBlIHdpdGggcmVmbGVjdGlvbiBpbmZvcm1hdGlvbiwgbWF5IHByb3ZpZGUgc3BlZWQgb3B0aW1pemVkIG1ldGhvZHNcbmNsYXNzIExpc3RWYWx1ZSRUeXBlIGV4dGVuZHMgTWVzc2FnZVR5cGU8TGlzdFZhbHVlPiB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCdnb29nbGUucHJvdG9idWYuTGlzdFZhbHVlJywgW1xuICAgICAge1xuICAgICAgICBubzogMSxcbiAgICAgICAgbmFtZTogJ3ZhbHVlcycsXG4gICAgICAgIGtpbmQ6ICdtZXNzYWdlJyxcbiAgICAgICAgcmVwZWF0OiAxIC8qUmVwZWF0VHlwZS5QQUNLRUQqLyxcbiAgICAgICAgVDogKCkgPT4gVmFsdWUsXG4gICAgICB9LFxuICAgIF0pO1xuICB9XG4gIC8qKlxuICAgKiBFbmNvZGUgYExpc3RWYWx1ZWAgdG8gSlNPTiBhcnJheS5cbiAgICovXG4gIGludGVybmFsSnNvbldyaXRlKG1lc3NhZ2U6IExpc3RWYWx1ZSwgb3B0aW9uczogSnNvbldyaXRlT3B0aW9ucyk6IEpzb25WYWx1ZSB7XG4gICAgcmV0dXJuIG1lc3NhZ2UudmFsdWVzLm1hcCgodikgPT4gVmFsdWUudG9Kc29uKHYpKTtcbiAgfVxuICAvKipcbiAgICogRGVjb2RlIGBMaXN0VmFsdWVgIGZyb20gSlNPTiBhcnJheS5cbiAgICovXG4gIGludGVybmFsSnNvblJlYWQoXG4gICAganNvbjogSnNvblZhbHVlLFxuICAgIG9wdGlvbnM6IEpzb25SZWFkT3B0aW9ucyxcbiAgICB0YXJnZXQ/OiBMaXN0VmFsdWUsXG4gICk6IExpc3RWYWx1ZSB7XG4gICAgaWYgKCFnbG9iYWxUaGlzLkFycmF5LmlzQXJyYXkoanNvbikpXG4gICAgICB0aHJvdyBuZXcgZ2xvYmFsVGhpcy5FcnJvcihcbiAgICAgICAgJ1VuYWJsZSB0byBwYXJzZSAnICtcbiAgICAgICAgICB0aGlzLnR5cGVOYW1lICtcbiAgICAgICAgICAnIGZyb20gSlNPTiAnICtcbiAgICAgICAgICB0eXBlb2ZKc29uVmFsdWUoanNvbiksXG4gICAgICApO1xuICAgIGlmICghdGFyZ2V0KSB0YXJnZXQgPSB0aGlzLmNyZWF0ZSgpO1xuICAgIGxldCB2YWx1ZXMgPSBqc29uLm1hcCgodikgPT4gVmFsdWUuZnJvbUpzb24odikpO1xuICAgIHRhcmdldC52YWx1ZXMucHVzaCguLi52YWx1ZXMpO1xuICAgIHJldHVybiB0YXJnZXQ7XG4gIH1cbiAgY3JlYXRlKHZhbHVlPzogUGFydGlhbE1lc3NhZ2U8TGlzdFZhbHVlPik6IExpc3RWYWx1ZSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGdsb2JhbFRoaXMuT2JqZWN0LmNyZWF0ZSh0aGlzLm1lc3NhZ2VQcm90b3R5cGUhKTtcbiAgICBtZXNzYWdlLnZhbHVlcyA9IFtdO1xuICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKVxuICAgICAgcmVmbGVjdGlvbk1lcmdlUGFydGlhbDxMaXN0VmFsdWU+KHRoaXMsIG1lc3NhZ2UsIHZhbHVlKTtcbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxuICBpbnRlcm5hbEJpbmFyeVJlYWQoXG4gICAgcmVhZGVyOiBJQmluYXJ5UmVhZGVyLFxuICAgIGxlbmd0aDogbnVtYmVyLFxuICAgIG9wdGlvbnM6IEJpbmFyeVJlYWRPcHRpb25zLFxuICAgIHRhcmdldD86IExpc3RWYWx1ZSxcbiAgKTogTGlzdFZhbHVlIHtcbiAgICBsZXQgbWVzc2FnZSA9IHRhcmdldCA/PyB0aGlzLmNyZWF0ZSgpLFxuICAgICAgZW5kID0gcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgbGV0IFtmaWVsZE5vLCB3aXJlVHlwZV0gPSByZWFkZXIudGFnKCk7XG4gICAgICBzd2l0Y2ggKGZpZWxkTm8pIHtcbiAgICAgICAgY2FzZSAvKiByZXBlYXRlZCBnb29nbGUucHJvdG9idWYuVmFsdWUgdmFsdWVzICovIDE6XG4gICAgICAgICAgbWVzc2FnZS52YWx1ZXMucHVzaChcbiAgICAgICAgICAgIFZhbHVlLmludGVybmFsQmluYXJ5UmVhZChyZWFkZXIsIHJlYWRlci51aW50MzIoKSwgb3B0aW9ucyksXG4gICAgICAgICAgKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBsZXQgdSA9IG9wdGlvbnMucmVhZFVua25vd25GaWVsZDtcbiAgICAgICAgICBpZiAodSA9PT0gJ3Rocm93JylcbiAgICAgICAgICAgIHRocm93IG5ldyBnbG9iYWxUaGlzLkVycm9yKFxuICAgICAgICAgICAgICBgVW5rbm93biBmaWVsZCAke2ZpZWxkTm99ICh3aXJlIHR5cGUgJHt3aXJlVHlwZX0pIGZvciAke3RoaXMudHlwZU5hbWV9YCxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgbGV0IGQgPSByZWFkZXIuc2tpcCh3aXJlVHlwZSk7XG4gICAgICAgICAgaWYgKHUgIT09IGZhbHNlKVxuICAgICAgICAgICAgKHUgPT09IHRydWUgPyBVbmtub3duRmllbGRIYW5kbGVyLm9uUmVhZCA6IHUpKFxuICAgICAgICAgICAgICB0aGlzLnR5cGVOYW1lLFxuICAgICAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICAgICAgICBmaWVsZE5vLFxuICAgICAgICAgICAgICB3aXJlVHlwZSxcbiAgICAgICAgICAgICAgZCxcbiAgICAgICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG4gIGludGVybmFsQmluYXJ5V3JpdGUoXG4gICAgbWVzc2FnZTogTGlzdFZhbHVlLFxuICAgIHdyaXRlcjogSUJpbmFyeVdyaXRlcixcbiAgICBvcHRpb25zOiBCaW5hcnlXcml0ZU9wdGlvbnMsXG4gICk6IElCaW5hcnlXcml0ZXIge1xuICAgIC8qIHJlcGVhdGVkIGdvb2dsZS5wcm90b2J1Zi5WYWx1ZSB2YWx1ZXMgPSAxOyAqL1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWVzc2FnZS52YWx1ZXMubGVuZ3RoOyBpKyspXG4gICAgICBWYWx1ZS5pbnRlcm5hbEJpbmFyeVdyaXRlKFxuICAgICAgICBtZXNzYWdlLnZhbHVlc1tpXSxcbiAgICAgICAgd3JpdGVyLnRhZygxLCBXaXJlVHlwZS5MZW5ndGhEZWxpbWl0ZWQpLmZvcmsoKSxcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICkuam9pbigpO1xuICAgIGxldCB1ID0gb3B0aW9ucy53cml0ZVVua25vd25GaWVsZHM7XG4gICAgaWYgKHUgIT09IGZhbHNlKVxuICAgICAgKHUgPT0gdHJ1ZSA/IFVua25vd25GaWVsZEhhbmRsZXIub25Xcml0ZSA6IHUpKFxuICAgICAgICB0aGlzLnR5cGVOYW1lLFxuICAgICAgICBtZXNzYWdlLFxuICAgICAgICB3cml0ZXIsXG4gICAgICApO1xuICAgIHJldHVybiB3cml0ZXI7XG4gIH1cbn1cbi8qKlxuICogQGdlbmVyYXRlZCBNZXNzYWdlVHlwZSBmb3IgcHJvdG9idWYgbWVzc2FnZSBnb29nbGUucHJvdG9idWYuTGlzdFZhbHVlXG4gKi9cbmV4cG9ydCBjb25zdCBMaXN0VmFsdWUgPSBuZXcgTGlzdFZhbHVlJFR5cGUoKTtcbiIsIi8qIGVzbGludC1kaXNhYmxlICovXG4vLyBAZ2VuZXJhdGVkIGJ5IHByb3RvYnVmLXRzIDIuOS4zIHdpdGggcGFyYW1ldGVyIGxvbmdfdHlwZV9zdHJpbmcsY2xpZW50X2dlbmVyaWMsc2VydmVyX25vbmUsZXNsaW50X2Rpc2FibGVcbi8vIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWxlIFwiZ29vZ2xlL3Byb3RvYnVmL3RpbWVzdGFtcC5wcm90b1wiIChwYWNrYWdlIFwiZ29vZ2xlLnByb3RvYnVmXCIsIHN5bnRheCBwcm90bzMpXG4vLyB0c2xpbnQ6ZGlzYWJsZVxuLy9cbi8vIFByb3RvY29sIEJ1ZmZlcnMgLSBHb29nbGUncyBkYXRhIGludGVyY2hhbmdlIGZvcm1hdFxuLy8gQ29weXJpZ2h0IDIwMDggR29vZ2xlIEluYy4gIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9wcm90b2NvbC1idWZmZXJzL1xuLy9cbi8vIFJlZGlzdHJpYnV0aW9uIGFuZCB1c2UgaW4gc291cmNlIGFuZCBiaW5hcnkgZm9ybXMsIHdpdGggb3Igd2l0aG91dFxuLy8gbW9kaWZpY2F0aW9uLCBhcmUgcGVybWl0dGVkIHByb3ZpZGVkIHRoYXQgdGhlIGZvbGxvd2luZyBjb25kaXRpb25zIGFyZVxuLy8gbWV0OlxuLy9cbi8vICAgICAqIFJlZGlzdHJpYnV0aW9ucyBvZiBzb3VyY2UgY29kZSBtdXN0IHJldGFpbiB0aGUgYWJvdmUgY29weXJpZ2h0XG4vLyBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuXG4vLyAgICAgKiBSZWRpc3RyaWJ1dGlvbnMgaW4gYmluYXJ5IGZvcm0gbXVzdCByZXByb2R1Y2UgdGhlIGFib3ZlXG4vLyBjb3B5cmlnaHQgbm90aWNlLCB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyXG4vLyBpbiB0aGUgZG9jdW1lbnRhdGlvbiBhbmQvb3Igb3RoZXIgbWF0ZXJpYWxzIHByb3ZpZGVkIHdpdGggdGhlXG4vLyBkaXN0cmlidXRpb24uXG4vLyAgICAgKiBOZWl0aGVyIHRoZSBuYW1lIG9mIEdvb2dsZSBJbmMuIG5vciB0aGUgbmFtZXMgb2YgaXRzXG4vLyBjb250cmlidXRvcnMgbWF5IGJlIHVzZWQgdG8gZW5kb3JzZSBvciBwcm9tb3RlIHByb2R1Y3RzIGRlcml2ZWQgZnJvbVxuLy8gdGhpcyBzb2Z0d2FyZSB3aXRob3V0IHNwZWNpZmljIHByaW9yIHdyaXR0ZW4gcGVybWlzc2lvbi5cbi8vXG4vLyBUSElTIFNPRlRXQVJFIElTIFBST1ZJREVEIEJZIFRIRSBDT1BZUklHSFQgSE9MREVSUyBBTkQgQ09OVFJJQlVUT1JTXG4vLyBcIkFTIElTXCIgQU5EIEFOWSBFWFBSRVNTIE9SIElNUExJRUQgV0FSUkFOVElFUywgSU5DTFVESU5HLCBCVVQgTk9UXG4vLyBMSU1JVEVEIFRPLCBUSEUgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSBBTkQgRklUTkVTUyBGT1Jcbi8vIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFSRSBESVNDTEFJTUVELiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQ09QWVJJR0hUXG4vLyBPV05FUiBPUiBDT05UUklCVVRPUlMgQkUgTElBQkxFIEZPUiBBTlkgRElSRUNULCBJTkRJUkVDVCwgSU5DSURFTlRBTCxcbi8vIFNQRUNJQUwsIEVYRU1QTEFSWSwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIChJTkNMVURJTkcsIEJVVCBOT1Rcbi8vIExJTUlURUQgVE8sIFBST0NVUkVNRU5UIE9GIFNVQlNUSVRVVEUgR09PRFMgT1IgU0VSVklDRVM7IExPU1MgT0YgVVNFLFxuLy8gREFUQSwgT1IgUFJPRklUUzsgT1IgQlVTSU5FU1MgSU5URVJSVVBUSU9OKSBIT1dFVkVSIENBVVNFRCBBTkQgT04gQU5ZXG4vLyBUSEVPUlkgT0YgTElBQklMSVRZLCBXSEVUSEVSIElOIENPTlRSQUNULCBTVFJJQ1QgTElBQklMSVRZLCBPUiBUT1JUXG4vLyAoSU5DTFVESU5HIE5FR0xJR0VOQ0UgT1IgT1RIRVJXSVNFKSBBUklTSU5HIElOIEFOWSBXQVkgT1VUIE9GIFRIRSBVU0Vcbi8vIE9GIFRISVMgU09GVFdBUkUsIEVWRU4gSUYgQURWSVNFRCBPRiBUSEUgUE9TU0lCSUxJVFkgT0YgU1VDSCBEQU1BR0UuXG4vL1xuaW1wb3J0IHR5cGUge1xuICBCaW5hcnlSZWFkT3B0aW9ucyxcbiAgQmluYXJ5V3JpdGVPcHRpb25zLFxuICBJQmluYXJ5UmVhZGVyLFxuICBJQmluYXJ5V3JpdGVyLFxuICBKc29uUmVhZE9wdGlvbnMsXG4gIEpzb25WYWx1ZSxcbiAgSnNvbldyaXRlT3B0aW9ucyxcbiAgUGFydGlhbE1lc3NhZ2UsXG59IGZyb20gJ0Bwcm90b2J1Zi10cy9ydW50aW1lJztcbmltcG9ydCB7XG4gIE1lc3NhZ2VUeXBlLFxuICBQYkxvbmcsXG4gIHJlZmxlY3Rpb25NZXJnZVBhcnRpYWwsXG4gIHR5cGVvZkpzb25WYWx1ZSxcbiAgVW5rbm93bkZpZWxkSGFuZGxlcixcbiAgV2lyZVR5cGUsXG59IGZyb20gJ0Bwcm90b2J1Zi10cy9ydW50aW1lJztcblxuLyoqXG4gKiBBIFRpbWVzdGFtcCByZXByZXNlbnRzIGEgcG9pbnQgaW4gdGltZSBpbmRlcGVuZGVudCBvZiBhbnkgdGltZSB6b25lIG9yIGxvY2FsXG4gKiBjYWxlbmRhciwgZW5jb2RlZCBhcyBhIGNvdW50IG9mIHNlY29uZHMgYW5kIGZyYWN0aW9ucyBvZiBzZWNvbmRzIGF0XG4gKiBuYW5vc2Vjb25kIHJlc29sdXRpb24uIFRoZSBjb3VudCBpcyByZWxhdGl2ZSB0byBhbiBlcG9jaCBhdCBVVEMgbWlkbmlnaHQgb25cbiAqIEphbnVhcnkgMSwgMTk3MCwgaW4gdGhlIHByb2xlcHRpYyBHcmVnb3JpYW4gY2FsZW5kYXIgd2hpY2ggZXh0ZW5kcyB0aGVcbiAqIEdyZWdvcmlhbiBjYWxlbmRhciBiYWNrd2FyZHMgdG8geWVhciBvbmUuXG4gKlxuICogQWxsIG1pbnV0ZXMgYXJlIDYwIHNlY29uZHMgbG9uZy4gTGVhcCBzZWNvbmRzIGFyZSBcInNtZWFyZWRcIiBzbyB0aGF0IG5vIGxlYXBcbiAqIHNlY29uZCB0YWJsZSBpcyBuZWVkZWQgZm9yIGludGVycHJldGF0aW9uLCB1c2luZyBhIFsyNC1ob3VyIGxpbmVhclxuICogc21lYXJdKGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL3RpbWUvc21lYXIpLlxuICpcbiAqIFRoZSByYW5nZSBpcyBmcm9tIDAwMDEtMDEtMDFUMDA6MDA6MDBaIHRvIDk5OTktMTItMzFUMjM6NTk6NTkuOTk5OTk5OTk5Wi4gQnlcbiAqIHJlc3RyaWN0aW5nIHRvIHRoYXQgcmFuZ2UsIHdlIGVuc3VyZSB0aGF0IHdlIGNhbiBjb252ZXJ0IHRvIGFuZCBmcm9tIFtSRkNcbiAqIDMzMzldKGh0dHBzOi8vd3d3LmlldGYub3JnL3JmYy9yZmMzMzM5LnR4dCkgZGF0ZSBzdHJpbmdzLlxuICpcbiAqICMgRXhhbXBsZXNcbiAqXG4gKiBFeGFtcGxlIDE6IENvbXB1dGUgVGltZXN0YW1wIGZyb20gUE9TSVggYHRpbWUoKWAuXG4gKlxuICogICAgIFRpbWVzdGFtcCB0aW1lc3RhbXA7XG4gKiAgICAgdGltZXN0YW1wLnNldF9zZWNvbmRzKHRpbWUoTlVMTCkpO1xuICogICAgIHRpbWVzdGFtcC5zZXRfbmFub3MoMCk7XG4gKlxuICogRXhhbXBsZSAyOiBDb21wdXRlIFRpbWVzdGFtcCBmcm9tIFBPU0lYIGBnZXR0aW1lb2ZkYXkoKWAuXG4gKlxuICogICAgIHN0cnVjdCB0aW1ldmFsIHR2O1xuICogICAgIGdldHRpbWVvZmRheSgmdHYsIE5VTEwpO1xuICpcbiAqICAgICBUaW1lc3RhbXAgdGltZXN0YW1wO1xuICogICAgIHRpbWVzdGFtcC5zZXRfc2Vjb25kcyh0di50dl9zZWMpO1xuICogICAgIHRpbWVzdGFtcC5zZXRfbmFub3ModHYudHZfdXNlYyAqIDEwMDApO1xuICpcbiAqIEV4YW1wbGUgMzogQ29tcHV0ZSBUaW1lc3RhbXAgZnJvbSBXaW4zMiBgR2V0U3lzdGVtVGltZUFzRmlsZVRpbWUoKWAuXG4gKlxuICogICAgIEZJTEVUSU1FIGZ0O1xuICogICAgIEdldFN5c3RlbVRpbWVBc0ZpbGVUaW1lKCZmdCk7XG4gKiAgICAgVUlOVDY0IHRpY2tzID0gKCgoVUlOVDY0KWZ0LmR3SGlnaERhdGVUaW1lKSA8PCAzMikgfCBmdC5kd0xvd0RhdGVUaW1lO1xuICpcbiAqICAgICAvLyBBIFdpbmRvd3MgdGljayBpcyAxMDAgbmFub3NlY29uZHMuIFdpbmRvd3MgZXBvY2ggMTYwMS0wMS0wMVQwMDowMDowMFpcbiAqICAgICAvLyBpcyAxMTY0NDQ3MzYwMCBzZWNvbmRzIGJlZm9yZSBVbml4IGVwb2NoIDE5NzAtMDEtMDFUMDA6MDA6MDBaLlxuICogICAgIFRpbWVzdGFtcCB0aW1lc3RhbXA7XG4gKiAgICAgdGltZXN0YW1wLnNldF9zZWNvbmRzKChJTlQ2NCkgKCh0aWNrcyAvIDEwMDAwMDAwKSAtIDExNjQ0NDczNjAwTEwpKTtcbiAqICAgICB0aW1lc3RhbXAuc2V0X25hbm9zKChJTlQzMikgKCh0aWNrcyAlIDEwMDAwMDAwKSAqIDEwMCkpO1xuICpcbiAqIEV4YW1wbGUgNDogQ29tcHV0ZSBUaW1lc3RhbXAgZnJvbSBKYXZhIGBTeXN0ZW0uY3VycmVudFRpbWVNaWxsaXMoKWAuXG4gKlxuICogICAgIGxvbmcgbWlsbGlzID0gU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzKCk7XG4gKlxuICogICAgIFRpbWVzdGFtcCB0aW1lc3RhbXAgPSBUaW1lc3RhbXAubmV3QnVpbGRlcigpLnNldFNlY29uZHMobWlsbGlzIC8gMTAwMClcbiAqICAgICAgICAgLnNldE5hbm9zKChpbnQpICgobWlsbGlzICUgMTAwMCkgKiAxMDAwMDAwKSkuYnVpbGQoKTtcbiAqXG4gKlxuICogRXhhbXBsZSA1OiBDb21wdXRlIFRpbWVzdGFtcCBmcm9tIEphdmEgYEluc3RhbnQubm93KClgLlxuICpcbiAqICAgICBJbnN0YW50IG5vdyA9IEluc3RhbnQubm93KCk7XG4gKlxuICogICAgIFRpbWVzdGFtcCB0aW1lc3RhbXAgPVxuICogICAgICAgICBUaW1lc3RhbXAubmV3QnVpbGRlcigpLnNldFNlY29uZHMobm93LmdldEVwb2NoU2Vjb25kKCkpXG4gKiAgICAgICAgICAgICAuc2V0TmFub3Mobm93LmdldE5hbm8oKSkuYnVpbGQoKTtcbiAqXG4gKlxuICogRXhhbXBsZSA2OiBDb21wdXRlIFRpbWVzdGFtcCBmcm9tIGN1cnJlbnQgdGltZSBpbiBQeXRob24uXG4gKlxuICogICAgIHRpbWVzdGFtcCA9IFRpbWVzdGFtcCgpXG4gKiAgICAgdGltZXN0YW1wLkdldEN1cnJlbnRUaW1lKClcbiAqXG4gKiAjIEpTT04gTWFwcGluZ1xuICpcbiAqIEluIEpTT04gZm9ybWF0LCB0aGUgVGltZXN0YW1wIHR5cGUgaXMgZW5jb2RlZCBhcyBhIHN0cmluZyBpbiB0aGVcbiAqIFtSRkMgMzMzOV0oaHR0cHM6Ly93d3cuaWV0Zi5vcmcvcmZjL3JmYzMzMzkudHh0KSBmb3JtYXQuIFRoYXQgaXMsIHRoZVxuICogZm9ybWF0IGlzIFwie3llYXJ9LXttb250aH0te2RheX1Ue2hvdXJ9OnttaW59OntzZWN9Wy57ZnJhY19zZWN9XVpcIlxuICogd2hlcmUge3llYXJ9IGlzIGFsd2F5cyBleHByZXNzZWQgdXNpbmcgZm91ciBkaWdpdHMgd2hpbGUge21vbnRofSwge2RheX0sXG4gKiB7aG91cn0sIHttaW59LCBhbmQge3NlY30gYXJlIHplcm8tcGFkZGVkIHRvIHR3byBkaWdpdHMgZWFjaC4gVGhlIGZyYWN0aW9uYWxcbiAqIHNlY29uZHMsIHdoaWNoIGNhbiBnbyB1cCB0byA5IGRpZ2l0cyAoaS5lLiB1cCB0byAxIG5hbm9zZWNvbmQgcmVzb2x1dGlvbiksXG4gKiBhcmUgb3B0aW9uYWwuIFRoZSBcIlpcIiBzdWZmaXggaW5kaWNhdGVzIHRoZSB0aW1lem9uZSAoXCJVVENcIik7IHRoZSB0aW1lem9uZVxuICogaXMgcmVxdWlyZWQuIEEgcHJvdG8zIEpTT04gc2VyaWFsaXplciBzaG91bGQgYWx3YXlzIHVzZSBVVEMgKGFzIGluZGljYXRlZCBieVxuICogXCJaXCIpIHdoZW4gcHJpbnRpbmcgdGhlIFRpbWVzdGFtcCB0eXBlIGFuZCBhIHByb3RvMyBKU09OIHBhcnNlciBzaG91bGQgYmVcbiAqIGFibGUgdG8gYWNjZXB0IGJvdGggVVRDIGFuZCBvdGhlciB0aW1lem9uZXMgKGFzIGluZGljYXRlZCBieSBhbiBvZmZzZXQpLlxuICpcbiAqIEZvciBleGFtcGxlLCBcIjIwMTctMDEtMTVUMDE6MzA6MTUuMDFaXCIgZW5jb2RlcyAxNS4wMSBzZWNvbmRzIHBhc3RcbiAqIDAxOjMwIFVUQyBvbiBKYW51YXJ5IDE1LCAyMDE3LlxuICpcbiAqIEluIEphdmFTY3JpcHQsIG9uZSBjYW4gY29udmVydCBhIERhdGUgb2JqZWN0IHRvIHRoaXMgZm9ybWF0IHVzaW5nIHRoZVxuICogc3RhbmRhcmRcbiAqIFt0b0lTT1N0cmluZygpXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9EYXRlL3RvSVNPU3RyaW5nKVxuICogbWV0aG9kLiBJbiBQeXRob24sIGEgc3RhbmRhcmQgYGRhdGV0aW1lLmRhdGV0aW1lYCBvYmplY3QgY2FuIGJlIGNvbnZlcnRlZFxuICogdG8gdGhpcyBmb3JtYXQgdXNpbmdcbiAqIFtgc3RyZnRpbWVgXShodHRwczovL2RvY3MucHl0aG9uLm9yZy8yL2xpYnJhcnkvdGltZS5odG1sI3RpbWUuc3RyZnRpbWUpIHdpdGhcbiAqIHRoZSB0aW1lIGZvcm1hdCBzcGVjICclWS0lbS0lZFQlSDolTTolUy4lZlonLiBMaWtld2lzZSwgaW4gSmF2YSwgb25lIGNhbiB1c2VcbiAqIHRoZSBKb2RhIFRpbWUncyBbYElTT0RhdGVUaW1lRm9ybWF0LmRhdGVUaW1lKClgXShcbiAqIGh0dHA6Ly93d3cuam9kYS5vcmcvam9kYS10aW1lL2FwaWRvY3Mvb3JnL2pvZGEvdGltZS9mb3JtYXQvSVNPRGF0ZVRpbWVGb3JtYXQuaHRtbCNkYXRlVGltZSUyRCUyRFxuICogKSB0byBvYnRhaW4gYSBmb3JtYXR0ZXIgY2FwYWJsZSBvZiBnZW5lcmF0aW5nIHRpbWVzdGFtcHMgaW4gdGhpcyBmb3JtYXQuXG4gKlxuICpcbiAqXG4gKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgbWVzc2FnZSBnb29nbGUucHJvdG9idWYuVGltZXN0YW1wXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVGltZXN0YW1wIHtcbiAgLyoqXG4gICAqIFJlcHJlc2VudHMgc2Vjb25kcyBvZiBVVEMgdGltZSBzaW5jZSBVbml4IGVwb2NoXG4gICAqIDE5NzAtMDEtMDFUMDA6MDA6MDBaLiBNdXN0IGJlIGZyb20gMDAwMS0wMS0wMVQwMDowMDowMFogdG9cbiAgICogOTk5OS0xMi0zMVQyMzo1OTo1OVogaW5jbHVzaXZlLlxuICAgKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IGludDY0IHNlY29uZHMgPSAxO1xuICAgKi9cbiAgc2Vjb25kczogc3RyaW5nO1xuICAvKipcbiAgICogTm9uLW5lZ2F0aXZlIGZyYWN0aW9ucyBvZiBhIHNlY29uZCBhdCBuYW5vc2Vjb25kIHJlc29sdXRpb24uIE5lZ2F0aXZlXG4gICAqIHNlY29uZCB2YWx1ZXMgd2l0aCBmcmFjdGlvbnMgbXVzdCBzdGlsbCBoYXZlIG5vbi1uZWdhdGl2ZSBuYW5vcyB2YWx1ZXNcbiAgICogdGhhdCBjb3VudCBmb3J3YXJkIGluIHRpbWUuIE11c3QgYmUgZnJvbSAwIHRvIDk5OSw5OTksOTk5XG4gICAqIGluY2x1c2l2ZS5cbiAgICpcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBpbnQzMiBuYW5vcyA9IDI7XG4gICAqL1xuICBuYW5vczogbnVtYmVyO1xufVxuLy8gQGdlbmVyYXRlZCBtZXNzYWdlIHR5cGUgd2l0aCByZWZsZWN0aW9uIGluZm9ybWF0aW9uLCBtYXkgcHJvdmlkZSBzcGVlZCBvcHRpbWl6ZWQgbWV0aG9kc1xuY2xhc3MgVGltZXN0YW1wJFR5cGUgZXh0ZW5kcyBNZXNzYWdlVHlwZTxUaW1lc3RhbXA+IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoJ2dvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXAnLCBbXG4gICAgICB7IG5vOiAxLCBuYW1lOiAnc2Vjb25kcycsIGtpbmQ6ICdzY2FsYXInLCBUOiAzIC8qU2NhbGFyVHlwZS5JTlQ2NCovIH0sXG4gICAgICB7IG5vOiAyLCBuYW1lOiAnbmFub3MnLCBraW5kOiAnc2NhbGFyJywgVDogNSAvKlNjYWxhclR5cGUuSU5UMzIqLyB9LFxuICAgIF0pO1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IGBUaW1lc3RhbXBgIGZvciB0aGUgY3VycmVudCB0aW1lLlxuICAgKi9cbiAgbm93KCk6IFRpbWVzdGFtcCB7XG4gICAgY29uc3QgbXNnID0gdGhpcy5jcmVhdGUoKTtcbiAgICBjb25zdCBtcyA9IERhdGUubm93KCk7XG4gICAgbXNnLnNlY29uZHMgPSBQYkxvbmcuZnJvbShNYXRoLmZsb29yKG1zIC8gMTAwMCkpLnRvU3RyaW5nKCk7XG4gICAgbXNnLm5hbm9zID0gKG1zICUgMTAwMCkgKiAxMDAwMDAwO1xuICAgIHJldHVybiBtc2c7XG4gIH1cbiAgLyoqXG4gICAqIENvbnZlcnRzIGEgYFRpbWVzdGFtcGAgdG8gYSBKYXZhU2NyaXB0IERhdGUuXG4gICAqL1xuICB0b0RhdGUobWVzc2FnZTogVGltZXN0YW1wKTogRGF0ZSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKFxuICAgICAgUGJMb25nLmZyb20obWVzc2FnZS5zZWNvbmRzKS50b051bWJlcigpICogMTAwMCArXG4gICAgICAgIE1hdGguY2VpbChtZXNzYWdlLm5hbm9zIC8gMTAwMDAwMCksXG4gICAgKTtcbiAgfVxuICAvKipcbiAgICogQ29udmVydHMgYSBKYXZhU2NyaXB0IERhdGUgdG8gYSBgVGltZXN0YW1wYC5cbiAgICovXG4gIGZyb21EYXRlKGRhdGU6IERhdGUpOiBUaW1lc3RhbXAge1xuICAgIGNvbnN0IG1zZyA9IHRoaXMuY3JlYXRlKCk7XG4gICAgY29uc3QgbXMgPSBkYXRlLmdldFRpbWUoKTtcbiAgICBtc2cuc2Vjb25kcyA9IFBiTG9uZy5mcm9tKE1hdGguZmxvb3IobXMgLyAxMDAwKSkudG9TdHJpbmcoKTtcbiAgICBtc2cubmFub3MgPSAobXMgJSAxMDAwKSAqIDEwMDAwMDA7XG4gICAgcmV0dXJuIG1zZztcbiAgfVxuICAvKipcbiAgICogSW4gSlNPTiBmb3JtYXQsIHRoZSBgVGltZXN0YW1wYCB0eXBlIGlzIGVuY29kZWQgYXMgYSBzdHJpbmdcbiAgICogaW4gdGhlIFJGQyAzMzM5IGZvcm1hdC5cbiAgICovXG4gIGludGVybmFsSnNvbldyaXRlKG1lc3NhZ2U6IFRpbWVzdGFtcCwgb3B0aW9uczogSnNvbldyaXRlT3B0aW9ucyk6IEpzb25WYWx1ZSB7XG4gICAgbGV0IG1zID0gUGJMb25nLmZyb20obWVzc2FnZS5zZWNvbmRzKS50b051bWJlcigpICogMTAwMDtcbiAgICBpZiAoXG4gICAgICBtcyA8IERhdGUucGFyc2UoJzAwMDEtMDEtMDFUMDA6MDA6MDBaJykgfHxcbiAgICAgIG1zID4gRGF0ZS5wYXJzZSgnOTk5OS0xMi0zMVQyMzo1OTo1OVonKVxuICAgIClcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ1VuYWJsZSB0byBlbmNvZGUgVGltZXN0YW1wIHRvIEpTT04uIE11c3QgYmUgZnJvbSAwMDAxLTAxLTAxVDAwOjAwOjAwWiB0byA5OTk5LTEyLTMxVDIzOjU5OjU5WiBpbmNsdXNpdmUuJyxcbiAgICAgICk7XG4gICAgaWYgKG1lc3NhZ2UubmFub3MgPCAwKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnVW5hYmxlIHRvIGVuY29kZSBpbnZhbGlkIFRpbWVzdGFtcCB0byBKU09OLiBOYW5vcyBtdXN0IG5vdCBiZSBuZWdhdGl2ZS4nLFxuICAgICAgKTtcbiAgICBsZXQgeiA9ICdaJztcbiAgICBpZiAobWVzc2FnZS5uYW5vcyA+IDApIHtcbiAgICAgIGxldCBuYW5vc1N0ciA9IChtZXNzYWdlLm5hbm9zICsgMTAwMDAwMDAwMCkudG9TdHJpbmcoKS5zdWJzdHJpbmcoMSk7XG4gICAgICBpZiAobmFub3NTdHIuc3Vic3RyaW5nKDMpID09PSAnMDAwMDAwJylcbiAgICAgICAgeiA9ICcuJyArIG5hbm9zU3RyLnN1YnN0cmluZygwLCAzKSArICdaJztcbiAgICAgIGVsc2UgaWYgKG5hbm9zU3RyLnN1YnN0cmluZyg2KSA9PT0gJzAwMCcpXG4gICAgICAgIHogPSAnLicgKyBuYW5vc1N0ci5zdWJzdHJpbmcoMCwgNikgKyAnWic7XG4gICAgICBlbHNlIHogPSAnLicgKyBuYW5vc1N0ciArICdaJztcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBEYXRlKG1zKS50b0lTT1N0cmluZygpLnJlcGxhY2UoJy4wMDBaJywgeik7XG4gIH1cbiAgLyoqXG4gICAqIEluIEpTT04gZm9ybWF0LCB0aGUgYFRpbWVzdGFtcGAgdHlwZSBpcyBlbmNvZGVkIGFzIGEgc3RyaW5nXG4gICAqIGluIHRoZSBSRkMgMzMzOSBmb3JtYXQuXG4gICAqL1xuICBpbnRlcm5hbEpzb25SZWFkKFxuICAgIGpzb246IEpzb25WYWx1ZSxcbiAgICBvcHRpb25zOiBKc29uUmVhZE9wdGlvbnMsXG4gICAgdGFyZ2V0PzogVGltZXN0YW1wLFxuICApOiBUaW1lc3RhbXAge1xuICAgIGlmICh0eXBlb2YganNvbiAhPT0gJ3N0cmluZycpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdVbmFibGUgdG8gcGFyc2UgVGltZXN0YW1wIGZyb20gSlNPTiAnICsgdHlwZW9mSnNvblZhbHVlKGpzb24pICsgJy4nLFxuICAgICAgKTtcbiAgICBsZXQgbWF0Y2hlcyA9IGpzb24ubWF0Y2goXG4gICAgICAvXihbMC05XXs0fSktKFswLTldezJ9KS0oWzAtOV17Mn0pVChbMC05XXsyfSk6KFswLTldezJ9KTooWzAtOV17Mn0pKD86WnxcXC4oWzAtOV17Myw5fSlafChbKy1dWzAtOV1bMC05XTpbMC05XVswLTldKSkkLyxcbiAgICApO1xuICAgIGlmICghbWF0Y2hlcylcbiAgICAgIHRocm93IG5ldyBFcnJvcignVW5hYmxlIHRvIHBhcnNlIFRpbWVzdGFtcCBmcm9tIEpTT04uIEludmFsaWQgZm9ybWF0LicpO1xuICAgIGxldCBtcyA9IERhdGUucGFyc2UoXG4gICAgICBtYXRjaGVzWzFdICtcbiAgICAgICAgJy0nICtcbiAgICAgICAgbWF0Y2hlc1syXSArXG4gICAgICAgICctJyArXG4gICAgICAgIG1hdGNoZXNbM10gK1xuICAgICAgICAnVCcgK1xuICAgICAgICBtYXRjaGVzWzRdICtcbiAgICAgICAgJzonICtcbiAgICAgICAgbWF0Y2hlc1s1XSArXG4gICAgICAgICc6JyArXG4gICAgICAgIG1hdGNoZXNbNl0gK1xuICAgICAgICAobWF0Y2hlc1s4XSA/IG1hdGNoZXNbOF0gOiAnWicpLFxuICAgICk7XG4gICAgaWYgKE51bWJlci5pc05hTihtcykpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuYWJsZSB0byBwYXJzZSBUaW1lc3RhbXAgZnJvbSBKU09OLiBJbnZhbGlkIHZhbHVlLicpO1xuICAgIGlmIChcbiAgICAgIG1zIDwgRGF0ZS5wYXJzZSgnMDAwMS0wMS0wMVQwMDowMDowMFonKSB8fFxuICAgICAgbXMgPiBEYXRlLnBhcnNlKCc5OTk5LTEyLTMxVDIzOjU5OjU5WicpXG4gICAgKVxuICAgICAgdGhyb3cgbmV3IGdsb2JhbFRoaXMuRXJyb3IoXG4gICAgICAgICdVbmFibGUgdG8gcGFyc2UgVGltZXN0YW1wIGZyb20gSlNPTi4gTXVzdCBiZSBmcm9tIDAwMDEtMDEtMDFUMDA6MDA6MDBaIHRvIDk5OTktMTItMzFUMjM6NTk6NTlaIGluY2x1c2l2ZS4nLFxuICAgICAgKTtcbiAgICBpZiAoIXRhcmdldCkgdGFyZ2V0ID0gdGhpcy5jcmVhdGUoKTtcbiAgICB0YXJnZXQuc2Vjb25kcyA9IFBiTG9uZy5mcm9tKG1zIC8gMTAwMCkudG9TdHJpbmcoKTtcbiAgICB0YXJnZXQubmFub3MgPSAwO1xuICAgIGlmIChtYXRjaGVzWzddKVxuICAgICAgdGFyZ2V0Lm5hbm9zID1cbiAgICAgICAgcGFyc2VJbnQoJzEnICsgbWF0Y2hlc1s3XSArICcwJy5yZXBlYXQoOSAtIG1hdGNoZXNbN10ubGVuZ3RoKSkgLVxuICAgICAgICAxMDAwMDAwMDAwO1xuICAgIHJldHVybiB0YXJnZXQ7XG4gIH1cbiAgY3JlYXRlKHZhbHVlPzogUGFydGlhbE1lc3NhZ2U8VGltZXN0YW1wPik6IFRpbWVzdGFtcCB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGdsb2JhbFRoaXMuT2JqZWN0LmNyZWF0ZSh0aGlzLm1lc3NhZ2VQcm90b3R5cGUhKTtcbiAgICBtZXNzYWdlLnNlY29uZHMgPSAnMCc7XG4gICAgbWVzc2FnZS5uYW5vcyA9IDA7XG4gICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpXG4gICAgICByZWZsZWN0aW9uTWVyZ2VQYXJ0aWFsPFRpbWVzdGFtcD4odGhpcywgbWVzc2FnZSwgdmFsdWUpO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG4gIGludGVybmFsQmluYXJ5UmVhZChcbiAgICByZWFkZXI6IElCaW5hcnlSZWFkZXIsXG4gICAgbGVuZ3RoOiBudW1iZXIsXG4gICAgb3B0aW9uczogQmluYXJ5UmVhZE9wdGlvbnMsXG4gICAgdGFyZ2V0PzogVGltZXN0YW1wLFxuICApOiBUaW1lc3RhbXAge1xuICAgIGxldCBtZXNzYWdlID0gdGFyZ2V0ID8/IHRoaXMuY3JlYXRlKCksXG4gICAgICBlbmQgPSByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBsZXQgW2ZpZWxkTm8sIHdpcmVUeXBlXSA9IHJlYWRlci50YWcoKTtcbiAgICAgIHN3aXRjaCAoZmllbGRObykge1xuICAgICAgICBjYXNlIC8qIGludDY0IHNlY29uZHMgKi8gMTpcbiAgICAgICAgICBtZXNzYWdlLnNlY29uZHMgPSByZWFkZXIuaW50NjQoKS50b1N0cmluZygpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIC8qIGludDMyIG5hbm9zICovIDI6XG4gICAgICAgICAgbWVzc2FnZS5uYW5vcyA9IHJlYWRlci5pbnQzMigpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGxldCB1ID0gb3B0aW9ucy5yZWFkVW5rbm93bkZpZWxkO1xuICAgICAgICAgIGlmICh1ID09PSAndGhyb3cnKVxuICAgICAgICAgICAgdGhyb3cgbmV3IGdsb2JhbFRoaXMuRXJyb3IoXG4gICAgICAgICAgICAgIGBVbmtub3duIGZpZWxkICR7ZmllbGROb30gKHdpcmUgdHlwZSAke3dpcmVUeXBlfSkgZm9yICR7dGhpcy50eXBlTmFtZX1gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICBsZXQgZCA9IHJlYWRlci5za2lwKHdpcmVUeXBlKTtcbiAgICAgICAgICBpZiAodSAhPT0gZmFsc2UpXG4gICAgICAgICAgICAodSA9PT0gdHJ1ZSA/IFVua25vd25GaWVsZEhhbmRsZXIub25SZWFkIDogdSkoXG4gICAgICAgICAgICAgIHRoaXMudHlwZU5hbWUsXG4gICAgICAgICAgICAgIG1lc3NhZ2UsXG4gICAgICAgICAgICAgIGZpZWxkTm8sXG4gICAgICAgICAgICAgIHdpcmVUeXBlLFxuICAgICAgICAgICAgICBkLFxuICAgICAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH1cbiAgaW50ZXJuYWxCaW5hcnlXcml0ZShcbiAgICBtZXNzYWdlOiBUaW1lc3RhbXAsXG4gICAgd3JpdGVyOiBJQmluYXJ5V3JpdGVyLFxuICAgIG9wdGlvbnM6IEJpbmFyeVdyaXRlT3B0aW9ucyxcbiAgKTogSUJpbmFyeVdyaXRlciB7XG4gICAgLyogaW50NjQgc2Vjb25kcyA9IDE7ICovXG4gICAgaWYgKG1lc3NhZ2Uuc2Vjb25kcyAhPT0gJzAnKVxuICAgICAgd3JpdGVyLnRhZygxLCBXaXJlVHlwZS5WYXJpbnQpLmludDY0KG1lc3NhZ2Uuc2Vjb25kcyk7XG4gICAgLyogaW50MzIgbmFub3MgPSAyOyAqL1xuICAgIGlmIChtZXNzYWdlLm5hbm9zICE9PSAwKVxuICAgICAgd3JpdGVyLnRhZygyLCBXaXJlVHlwZS5WYXJpbnQpLmludDMyKG1lc3NhZ2UubmFub3MpO1xuICAgIGxldCB1ID0gb3B0aW9ucy53cml0ZVVua25vd25GaWVsZHM7XG4gICAgaWYgKHUgIT09IGZhbHNlKVxuICAgICAgKHUgPT0gdHJ1ZSA/IFVua25vd25GaWVsZEhhbmRsZXIub25Xcml0ZSA6IHUpKFxuICAgICAgICB0aGlzLnR5cGVOYW1lLFxuICAgICAgICBtZXNzYWdlLFxuICAgICAgICB3cml0ZXIsXG4gICAgICApO1xuICAgIHJldHVybiB3cml0ZXI7XG4gIH1cbn1cbi8qKlxuICogQGdlbmVyYXRlZCBNZXNzYWdlVHlwZSBmb3IgcHJvdG9idWYgbWVzc2FnZSBnb29nbGUucHJvdG9idWYuVGltZXN0YW1wXG4gKi9cbmV4cG9ydCBjb25zdCBUaW1lc3RhbXAgPSBuZXcgVGltZXN0YW1wJFR5cGUoKTtcbiIsIi8qIGVzbGludC1kaXNhYmxlICovXG4vLyBAZ2VuZXJhdGVkIGJ5IHByb3RvYnVmLXRzIDIuOS4zIHdpdGggcGFyYW1ldGVyIGxvbmdfdHlwZV9zdHJpbmcsY2xpZW50X2dlbmVyaWMsc2VydmVyX25vbmUsZXNsaW50X2Rpc2FibGVcbi8vIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWxlIFwidmlkZW8vc2Z1L21vZGVscy9tb2RlbHMucHJvdG9cIiAocGFja2FnZSBcInN0cmVhbS52aWRlby5zZnUubW9kZWxzXCIsIHN5bnRheCBwcm90bzMpXG4vLyB0c2xpbnQ6ZGlzYWJsZVxuaW1wb3J0IHR5cGUge1xuICBCaW5hcnlSZWFkT3B0aW9ucyxcbiAgQmluYXJ5V3JpdGVPcHRpb25zLFxuICBJQmluYXJ5UmVhZGVyLFxuICBJQmluYXJ5V3JpdGVyLFxuICBQYXJ0aWFsTWVzc2FnZSxcbn0gZnJvbSAnQHByb3RvYnVmLXRzL3J1bnRpbWUnO1xuaW1wb3J0IHtcbiAgTWVzc2FnZVR5cGUsXG4gIHJlZmxlY3Rpb25NZXJnZVBhcnRpYWwsXG4gIFVua25vd25GaWVsZEhhbmRsZXIsXG4gIFdpcmVUeXBlLFxufSBmcm9tICdAcHJvdG9idWYtdHMvcnVudGltZSc7XG5pbXBvcnQgeyBTdHJ1Y3QgfSBmcm9tICcuLi8uLi8uLi9nb29nbGUvcHJvdG9idWYvc3RydWN0JztcbmltcG9ydCB7IFRpbWVzdGFtcCB9IGZyb20gJy4uLy4uLy4uL2dvb2dsZS9wcm90b2J1Zi90aW1lc3RhbXAnO1xuXG4vKipcbiAqIENhbGxTdGF0ZSBpcyB0aGUgY3VycmVudCBzdGF0ZSBvZiB0aGUgY2FsbFxuICogYXMgc2VlbiBieSBhbiBTRlUuXG4gKlxuICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuQ2FsbFN0YXRlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ2FsbFN0YXRlIHtcbiAgLyoqXG4gICAqIHBhcnRpY2lwYW50cyBpcyB0aGUgbGlzdCBvZiBwYXJ0aWNpcGFudHMgaW4gdGhlIGNhbGwuXG4gICAqIEluIGxhcmdlIGNhbGxzLCB0aGUgbGlzdCBjb3VsZCBiZSB0cnVuY2F0ZWQgaW4gd2hpY2hcbiAgICogY2FzZSwgdGhlIGxpc3Qgb2YgcGFydGljaXBhbnRzIGNvbnRhaW5zIGZld2VyIHBhcnRpY2lwYW50c1xuICAgKiB0aGFuIHRoZSBjb3VudHMgcmV0dXJuZWQgaW4gcGFydGljaXBhbnRfY291bnQuIEFub255bW91c1xuICAgKiBwYXJ0aWNpcGFudHMgYXJlICoqTk9UKiogaW5jbHVkZWQgaW4gdGhlIGxpc3QuXG4gICAqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogcmVwZWF0ZWQgc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuUGFydGljaXBhbnQgcGFydGljaXBhbnRzID0gMTtcbiAgICovXG4gIHBhcnRpY2lwYW50czogUGFydGljaXBhbnRbXTtcbiAgLyoqXG4gICAqIHN0YXJ0ZWRfYXQgaXMgdGhlIHRpbWUgdGhlIGNhbGwgc2Vzc2lvbiBhY3R1YWxseSBzdGFydGVkLlxuICAgKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IGdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXAgc3RhcnRlZF9hdCA9IDI7XG4gICAqL1xuICBzdGFydGVkQXQ/OiBUaW1lc3RhbXA7XG4gIC8qKlxuICAgKiBwYXJ0aWNpcGFudF9jb3VudCBjb250YWlucyB0aGUgc3VtbWFyeSBvZiB0aGUgY291bnRzLlxuICAgKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmVhbS52aWRlby5zZnUubW9kZWxzLlBhcnRpY2lwYW50Q291bnQgcGFydGljaXBhbnRfY291bnQgPSAzO1xuICAgKi9cbiAgcGFydGljaXBhbnRDb3VudD86IFBhcnRpY2lwYW50Q291bnQ7XG4gIC8qKlxuICAgKiB0aGUgbGlzdCBvZiBwaW5zIGluIHRoZSBjYWxsLlxuICAgKiBQaW5zIGFyZSBvcmRlcmVkIGluIGRlc2NlbmRpbmcgb3JkZXIgKG1vc3QgaW1wb3J0YW50IGZpcnN0KS5cbiAgICpcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiByZXBlYXRlZCBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5QaW4gcGlucyA9IDQ7XG4gICAqL1xuICBwaW5zOiBQaW5bXTtcbn1cbi8qKlxuICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuUGFydGljaXBhbnRDb3VudFxuICovXG5leHBvcnQgaW50ZXJmYWNlIFBhcnRpY2lwYW50Q291bnQge1xuICAvKipcbiAgICogVG90YWwgbnVtYmVyIG9mIHBhcnRpY2lwYW50cyBpbiB0aGUgY2FsbCBpbmNsdWRpbmdcbiAgICogdGhlIGFub255bW91cyBwYXJ0aWNpcGFudHMuXG4gICAqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogdWludDMyIHRvdGFsID0gMTtcbiAgICovXG4gIHRvdGFsOiBudW1iZXI7XG4gIC8qKlxuICAgKiBUb3RhbCBudW1iZXIgb2YgYW5vbnltb3VzIHBhcnRpY2lwYW50cyBpbiB0aGUgY2FsbC5cbiAgICpcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiB1aW50MzIgYW5vbnltb3VzID0gMjtcbiAgICovXG4gIGFub255bW91czogbnVtYmVyO1xufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5QaW5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQaW4ge1xuICAvKipcbiAgICogdGhlIHVzZXIgdG8gcGluXG4gICAqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyaW5nIHVzZXJfaWQgPSAxO1xuICAgKi9cbiAgdXNlcklkOiBzdHJpbmc7XG4gIC8qKlxuICAgKiB0aGUgdXNlciBzZXNpb25faWQgdG8gcGluLCBpZiBub3QgcHJvdmlkZWQsIGFwcGxpZXMgdG8gYWxsIHNlc3Npb25zXG4gICAqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyaW5nIHNlc3Npb25faWQgPSAyO1xuICAgKi9cbiAgc2Vzc2lvbklkOiBzdHJpbmc7XG59XG4vKipcbiAqIHRob3NlIHdobyBhcmUgb25saW5lIGluIHRoZSBjYWxsXG4gKlxuICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuUGFydGljaXBhbnRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQYXJ0aWNpcGFudCB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmluZyB1c2VyX2lkID0gMTtcbiAgICovXG4gIHVzZXJJZDogc3RyaW5nO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJpbmcgc2Vzc2lvbl9pZCA9IDI7XG4gICAqL1xuICBzZXNzaW9uSWQ6IHN0cmluZztcbiAgLyoqXG4gICAqIG1hcCBvZiB0cmFjayBpZCB0byB0cmFjayB0eXBlXG4gICAqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogcmVwZWF0ZWQgc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuVHJhY2tUeXBlIHB1Ymxpc2hlZF90cmFja3MgPSAzO1xuICAgKi9cbiAgcHVibGlzaGVkVHJhY2tzOiBUcmFja1R5cGVbXTtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcCBqb2luZWRfYXQgPSA0O1xuICAgKi9cbiAgam9pbmVkQXQ/OiBUaW1lc3RhbXA7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmluZyB0cmFja19sb29rdXBfcHJlZml4ID0gNTtcbiAgICovXG4gIHRyYWNrTG9va3VwUHJlZml4OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmVhbS52aWRlby5zZnUubW9kZWxzLkNvbm5lY3Rpb25RdWFsaXR5IGNvbm5lY3Rpb25fcXVhbGl0eSA9IDY7XG4gICAqL1xuICBjb25uZWN0aW9uUXVhbGl0eTogQ29ubmVjdGlvblF1YWxpdHk7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IGJvb2wgaXNfc3BlYWtpbmcgPSA3O1xuICAgKi9cbiAgaXNTcGVha2luZzogYm9vbGVhbjtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogYm9vbCBpc19kb21pbmFudF9zcGVha2VyID0gODtcbiAgICovXG4gIGlzRG9taW5hbnRTcGVha2VyOiBib29sZWFuO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBmbG9hdCBhdWRpb19sZXZlbCA9IDk7XG4gICAqL1xuICBhdWRpb0xldmVsOiBudW1iZXI7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmluZyBuYW1lID0gMTA7XG4gICAqL1xuICBuYW1lOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmluZyBpbWFnZSA9IDExO1xuICAgKi9cbiAgaW1hZ2U6IHN0cmluZztcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogZ29vZ2xlLnByb3RvYnVmLlN0cnVjdCBjdXN0b20gPSAxMjtcbiAgICovXG4gIGN1c3RvbT86IFN0cnVjdDtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogcmVwZWF0ZWQgc3RyaW5nIHJvbGVzID0gMTM7XG4gICAqL1xuICByb2xlczogc3RyaW5nW107XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUubW9kZWxzLlN0cmVhbVF1YWxpdHlcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBTdHJlYW1RdWFsaXR5IHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuVmlkZW9RdWFsaXR5IHZpZGVvX3F1YWxpdHkgPSAxO1xuICAgKi9cbiAgdmlkZW9RdWFsaXR5OiBWaWRlb1F1YWxpdHk7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmluZyB1c2VyX2lkID0gMjtcbiAgICovXG4gIHVzZXJJZDogc3RyaW5nO1xufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5WaWRlb0RpbWVuc2lvblxuICovXG5leHBvcnQgaW50ZXJmYWNlIFZpZGVvRGltZW5zaW9uIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogdWludDMyIHdpZHRoID0gMTtcbiAgICovXG4gIHdpZHRoOiBudW1iZXI7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHVpbnQzMiBoZWlnaHQgPSAyO1xuICAgKi9cbiAgaGVpZ2h0OiBudW1iZXI7XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUubW9kZWxzLlZpZGVvTGF5ZXJcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBWaWRlb0xheWVyIHtcbiAgLyoqXG4gICAqIGZvciB0cmFja3Mgd2l0aCBhIHNpbmdsZSBsYXllciwgdGhpcyBzaG91bGQgYmUgSElHSFxuICAgKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmluZyByaWQgPSAxO1xuICAgKi9cbiAgcmlkOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmVhbS52aWRlby5zZnUubW9kZWxzLlZpZGVvRGltZW5zaW9uIHZpZGVvX2RpbWVuc2lvbiA9IDI7XG4gICAqL1xuICB2aWRlb0RpbWVuc2lvbj86IFZpZGVvRGltZW5zaW9uO1xuICAvKipcbiAgICogdGFyZ2V0IGJpdHJhdGUsIHNlcnZlciB3aWxsIG1lYXN1cmUgYWN0dWFsXG4gICAqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogdWludDMyIGJpdHJhdGUgPSA0O1xuICAgKi9cbiAgYml0cmF0ZTogbnVtYmVyO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiB1aW50MzIgZnBzID0gNTtcbiAgICovXG4gIGZwczogbnVtYmVyO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5WaWRlb1F1YWxpdHkgcXVhbGl0eSA9IDY7XG4gICAqL1xuICBxdWFsaXR5OiBWaWRlb1F1YWxpdHk7XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUubW9kZWxzLkNvZGVjXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ29kZWMge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiB1aW50MzIgcGF5bG9hZF90eXBlID0gMTtcbiAgICovXG4gIHBheWxvYWRUeXBlOiBudW1iZXI7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmluZyBuYW1lID0gMjtcbiAgICovXG4gIG5hbWU6IHN0cmluZztcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyaW5nIGZtdHBfbGluZSA9IDM7XG4gICAqL1xuICBmbXRwTGluZTogc3RyaW5nO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiB1aW50MzIgY2xvY2tfcmF0ZSA9IDQ7XG4gICAqL1xuICBjbG9ja1JhdGU6IG51bWJlcjtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyaW5nIGVuY29kaW5nX3BhcmFtZXRlcnMgPSA1O1xuICAgKi9cbiAgZW5jb2RpbmdQYXJhbWV0ZXJzOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHJlcGVhdGVkIHN0cmluZyBmZWVkYmFja3MgPSA2O1xuICAgKi9cbiAgZmVlZGJhY2tzOiBzdHJpbmdbXTtcbn1cbi8qKlxuICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuSUNFVHJpY2tsZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIElDRVRyaWNrbGUge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5QZWVyVHlwZSBwZWVyX3R5cGUgPSAxO1xuICAgKi9cbiAgcGVlclR5cGU6IFBlZXJUeXBlO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJpbmcgaWNlX2NhbmRpZGF0ZSA9IDI7XG4gICAqL1xuICBpY2VDYW5kaWRhdGU6IHN0cmluZztcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyaW5nIHNlc3Npb25faWQgPSAzO1xuICAgKi9cbiAgc2Vzc2lvbklkOiBzdHJpbmc7XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUubW9kZWxzLlRyYWNrSW5mb1xuICovXG5leHBvcnQgaW50ZXJmYWNlIFRyYWNrSW5mbyB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmluZyB0cmFja19pZCA9IDE7XG4gICAqL1xuICB0cmFja0lkOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmVhbS52aWRlby5zZnUubW9kZWxzLlRyYWNrVHlwZSB0cmFja190eXBlID0gMjtcbiAgICovXG4gIHRyYWNrVHlwZTogVHJhY2tUeXBlO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiByZXBlYXRlZCBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5WaWRlb0xheWVyIGxheWVycyA9IDU7XG4gICAqL1xuICBsYXllcnM6IFZpZGVvTGF5ZXJbXTtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyaW5nIG1pZCA9IDY7XG4gICAqL1xuICBtaWQ6IHN0cmluZztcbiAgLyoqXG4gICAqIGZvciBhdWRpbyB0cmFja3NcbiAgICpcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBib29sIGR0eCA9IDc7XG4gICAqL1xuICBkdHg6IGJvb2xlYW47XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IGJvb2wgc3RlcmVvID0gODtcbiAgICovXG4gIHN0ZXJlbzogYm9vbGVhbjtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogYm9vbCByZWQgPSA5O1xuICAgKi9cbiAgcmVkOiBib29sZWFuO1xufVxuLyoqXG4gKiB0b2RvIHJlbW92ZSB0aGlzXG4gKlxuICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuQ2FsbFxuICovXG5leHBvcnQgaW50ZXJmYWNlIENhbGwge1xuICAvKipcbiAgICogdGhlIGNhbGwgdHlwZVxuICAgKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmluZyB0eXBlID0gMTtcbiAgICovXG4gIHR5cGU6IHN0cmluZztcbiAgLyoqXG4gICAqIHRoZSBjYWxsIGlkXG4gICAqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyaW5nIGlkID0gMjtcbiAgICovXG4gIGlkOiBzdHJpbmc7XG4gIC8qKlxuICAgKiB0aGUgaWQgb2YgdGhlIHVzZXIgdGhhdCBjcmVhdGVkIHRoaXMgY2FsbFxuICAgKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmluZyBjcmVhdGVkX2J5X3VzZXJfaWQgPSAzO1xuICAgKi9cbiAgY3JlYXRlZEJ5VXNlcklkOiBzdHJpbmc7XG4gIC8qKlxuICAgKiB0aGUgaWQgb2YgdGhlIGN1cnJlbnQgaG9zdCBmb3IgdGhpcyBjYWxsXG4gICAqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyaW5nIGhvc3RfdXNlcl9pZCA9IDQ7XG4gICAqL1xuICBob3N0VXNlcklkOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IGdvb2dsZS5wcm90b2J1Zi5TdHJ1Y3QgY3VzdG9tID0gNTtcbiAgICovXG4gIGN1c3RvbT86IFN0cnVjdDtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcCBjcmVhdGVkX2F0ID0gNjtcbiAgICovXG4gIGNyZWF0ZWRBdD86IFRpbWVzdGFtcDtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcCB1cGRhdGVkX2F0ID0gNztcbiAgICovXG4gIHVwZGF0ZWRBdD86IFRpbWVzdGFtcDtcbn1cbi8qKlxuICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuRXJyb3JcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBFcnJvciB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmVhbS52aWRlby5zZnUubW9kZWxzLkVycm9yQ29kZSBjb2RlID0gMTtcbiAgICovXG4gIGNvZGU6IEVycm9yQ29kZTtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyaW5nIG1lc3NhZ2UgPSAyO1xuICAgKi9cbiAgbWVzc2FnZTogc3RyaW5nO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBib29sIHNob3VsZF9yZXRyeSA9IDM7XG4gICAqL1xuICBzaG91bGRSZXRyeTogYm9vbGVhbjtcbn1cbi8qKlxuICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuQ2xpZW50RGV0YWlsc1xuICovXG5leHBvcnQgaW50ZXJmYWNlIENsaWVudERldGFpbHMge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5TZGsgc2RrID0gMTtcbiAgICovXG4gIHNkaz86IFNkaztcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuT1Mgb3MgPSAyO1xuICAgKi9cbiAgb3M/OiBPUztcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuQnJvd3NlciBicm93c2VyID0gMztcbiAgICovXG4gIGJyb3dzZXI/OiBCcm93c2VyO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5EZXZpY2UgZGV2aWNlID0gNDtcbiAgICovXG4gIGRldmljZT86IERldmljZTtcbn1cbi8qKlxuICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuU2RrXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU2RrIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuU2RrVHlwZSB0eXBlID0gMTtcbiAgICovXG4gIHR5cGU6IFNka1R5cGU7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmluZyBtYWpvciA9IDI7XG4gICAqL1xuICBtYWpvcjogc3RyaW5nO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJpbmcgbWlub3IgPSAzO1xuICAgKi9cbiAgbWlub3I6IHN0cmluZztcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyaW5nIHBhdGNoID0gNDtcbiAgICovXG4gIHBhdGNoOiBzdHJpbmc7XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUubW9kZWxzLk9TXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgT1Mge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJpbmcgbmFtZSA9IDE7XG4gICAqL1xuICBuYW1lOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmluZyB2ZXJzaW9uID0gMjtcbiAgICovXG4gIHZlcnNpb246IHN0cmluZztcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyaW5nIGFyY2hpdGVjdHVyZSA9IDM7XG4gICAqL1xuICBhcmNoaXRlY3R1cmU6IHN0cmluZztcbn1cbi8qKlxuICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuQnJvd3NlclxuICovXG5leHBvcnQgaW50ZXJmYWNlIEJyb3dzZXIge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJpbmcgbmFtZSA9IDE7XG4gICAqL1xuICBuYW1lOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmluZyB2ZXJzaW9uID0gMjtcbiAgICovXG4gIHZlcnNpb246IHN0cmluZztcbn1cbi8qKlxuICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuRGV2aWNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRGV2aWNlIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyaW5nIG5hbWUgPSAxO1xuICAgKi9cbiAgbmFtZTogc3RyaW5nO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJpbmcgdmVyc2lvbiA9IDI7XG4gICAqL1xuICB2ZXJzaW9uOiBzdHJpbmc7XG59XG4vKipcbiAqIENhbGxHcmFudHMgcmVwcmVzZW50cyB0aGUgc2V0IG9mIHBlcm1pc3Npb25zIGdpdmVuXG4gKiB0byB0aGUgdXNlciBmb3IgdGhlIGN1cnJlbnQgY2FsbC5cbiAqXG4gKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5DYWxsR3JhbnRzXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ2FsbEdyYW50cyB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IGJvb2wgY2FuX3B1Ymxpc2hfYXVkaW8gPSAxO1xuICAgKi9cbiAgY2FuUHVibGlzaEF1ZGlvOiBib29sZWFuO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBib29sIGNhbl9wdWJsaXNoX3ZpZGVvID0gMjtcbiAgICovXG4gIGNhblB1Ymxpc2hWaWRlbzogYm9vbGVhbjtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogYm9vbCBjYW5fc2NyZWVuc2hhcmUgPSAzO1xuICAgKi9cbiAgY2FuU2NyZWVuc2hhcmU6IGJvb2xlYW47XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBlbnVtIHN0cmVhbS52aWRlby5zZnUubW9kZWxzLlBlZXJUeXBlXG4gKi9cbmV4cG9ydCBlbnVtIFBlZXJUeXBlIHtcbiAgLyoqXG4gICAqIHRvZG8gZml4IG1lIChtYXJjZWxvKVxuICAgKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZW51bSB2YWx1ZTogUEVFUl9UWVBFX1BVQkxJU0hFUl9VTlNQRUNJRklFRCA9IDA7XG4gICAqL1xuICBQVUJMSVNIRVJfVU5TUEVDSUZJRUQgPSAwLFxuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGVudW0gdmFsdWU6IFBFRVJfVFlQRV9TVUJTQ1JJQkVSID0gMTtcbiAgICovXG4gIFNVQlNDUklCRVIgPSAxLFxufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZW51bSBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5Db25uZWN0aW9uUXVhbGl0eVxuICovXG5leHBvcnQgZW51bSBDb25uZWN0aW9uUXVhbGl0eSB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZW51bSB2YWx1ZTogQ09OTkVDVElPTl9RVUFMSVRZX1VOU1BFQ0lGSUVEID0gMDtcbiAgICovXG4gIFVOU1BFQ0lGSUVEID0gMCxcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBlbnVtIHZhbHVlOiBDT05ORUNUSU9OX1FVQUxJVFlfUE9PUiA9IDE7XG4gICAqL1xuICBQT09SID0gMSxcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBlbnVtIHZhbHVlOiBDT05ORUNUSU9OX1FVQUxJVFlfR09PRCA9IDI7XG4gICAqL1xuICBHT09EID0gMixcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBlbnVtIHZhbHVlOiBDT05ORUNUSU9OX1FVQUxJVFlfRVhDRUxMRU5UID0gMztcbiAgICovXG4gIEVYQ0VMTEVOVCA9IDMsXG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBlbnVtIHN0cmVhbS52aWRlby5zZnUubW9kZWxzLlZpZGVvUXVhbGl0eVxuICovXG5leHBvcnQgZW51bSBWaWRlb1F1YWxpdHkge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGVudW0gdmFsdWU6IFZJREVPX1FVQUxJVFlfTE9XX1VOU1BFQ0lGSUVEID0gMDtcbiAgICovXG4gIExPV19VTlNQRUNJRklFRCA9IDAsXG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZW51bSB2YWx1ZTogVklERU9fUVVBTElUWV9NSUQgPSAxO1xuICAgKi9cbiAgTUlEID0gMSxcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBlbnVtIHZhbHVlOiBWSURFT19RVUFMSVRZX0hJR0ggPSAyO1xuICAgKi9cbiAgSElHSCA9IDIsXG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZW51bSB2YWx1ZTogVklERU9fUVVBTElUWV9PRkYgPSAzO1xuICAgKi9cbiAgT0ZGID0gMyxcbn1cbi8qKlxuICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGVudW0gc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuVHJhY2tUeXBlXG4gKi9cbmV4cG9ydCBlbnVtIFRyYWNrVHlwZSB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZW51bSB2YWx1ZTogVFJBQ0tfVFlQRV9VTlNQRUNJRklFRCA9IDA7XG4gICAqL1xuICBVTlNQRUNJRklFRCA9IDAsXG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZW51bSB2YWx1ZTogVFJBQ0tfVFlQRV9BVURJTyA9IDE7XG4gICAqL1xuICBBVURJTyA9IDEsXG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZW51bSB2YWx1ZTogVFJBQ0tfVFlQRV9WSURFTyA9IDI7XG4gICAqL1xuICBWSURFTyA9IDIsXG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZW51bSB2YWx1ZTogVFJBQ0tfVFlQRV9TQ1JFRU5fU0hBUkUgPSAzO1xuICAgKi9cbiAgU0NSRUVOX1NIQVJFID0gMyxcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBlbnVtIHZhbHVlOiBUUkFDS19UWVBFX1NDUkVFTl9TSEFSRV9BVURJTyA9IDQ7XG4gICAqL1xuICBTQ1JFRU5fU0hBUkVfQVVESU8gPSA0LFxufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZW51bSBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5FcnJvckNvZGVcbiAqL1xuZXhwb3J0IGVudW0gRXJyb3JDb2RlIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBlbnVtIHZhbHVlOiBFUlJPUl9DT0RFX1VOU1BFQ0lGSUVEID0gMDtcbiAgICovXG4gIFVOU1BFQ0lGSUVEID0gMCxcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBlbnVtIHZhbHVlOiBFUlJPUl9DT0RFX1BVQkxJU0hfVFJBQ0tfTk9UX0ZPVU5EID0gMTAwO1xuICAgKi9cbiAgUFVCTElTSF9UUkFDS19OT1RfRk9VTkQgPSAxMDAsXG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZW51bSB2YWx1ZTogRVJST1JfQ09ERV9QVUJMSVNIX1RSQUNLU19NSVNNQVRDSCA9IDEwMTtcbiAgICovXG4gIFBVQkxJU0hfVFJBQ0tTX01JU01BVENIID0gMTAxLFxuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGVudW0gdmFsdWU6IEVSUk9SX0NPREVfUFVCTElTSF9UUkFDS19PVVRfT0ZfT1JERVIgPSAxMDI7XG4gICAqL1xuICBQVUJMSVNIX1RSQUNLX09VVF9PRl9PUkRFUiA9IDEwMixcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBlbnVtIHZhbHVlOiBFUlJPUl9DT0RFX1BVQkxJU0hfVFJBQ0tfVklERU9fTEFZRVJfTk9UX0ZPVU5EID0gMTAzO1xuICAgKi9cbiAgUFVCTElTSF9UUkFDS19WSURFT19MQVlFUl9OT1RfRk9VTkQgPSAxMDMsXG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZW51bSB2YWx1ZTogRVJST1JfQ09ERV9MSVZFX0VOREVEID0gMTA0O1xuICAgKi9cbiAgTElWRV9FTkRFRCA9IDEwNCxcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBlbnVtIHZhbHVlOiBFUlJPUl9DT0RFX1BBUlRJQ0lQQU5UX05PVF9GT1VORCA9IDIwMDtcbiAgICovXG4gIFBBUlRJQ0lQQU5UX05PVF9GT1VORCA9IDIwMCxcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBlbnVtIHZhbHVlOiBFUlJPUl9DT0RFX1BBUlRJQ0lQQU5UX01JR1JBVElOR19PVVQgPSAyMDE7XG4gICAqL1xuICBQQVJUSUNJUEFOVF9NSUdSQVRJTkdfT1VUID0gMjAxLFxuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGVudW0gdmFsdWU6IEVSUk9SX0NPREVfUEFSVElDSVBBTlRfTUlHUkFUSU9OX0ZBSUxFRCA9IDIwMjtcbiAgICovXG4gIFBBUlRJQ0lQQU5UX01JR1JBVElPTl9GQUlMRUQgPSAyMDIsXG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZW51bSB2YWx1ZTogRVJST1JfQ09ERV9QQVJUSUNJUEFOVF9NSUdSQVRJTkcgPSAyMDM7XG4gICAqL1xuICBQQVJUSUNJUEFOVF9NSUdSQVRJTkcgPSAyMDMsXG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZW51bSB2YWx1ZTogRVJST1JfQ09ERV9QQVJUSUNJUEFOVF9SRUNPTk5FQ1RfRkFJTEVEID0gMjA0O1xuICAgKi9cbiAgUEFSVElDSVBBTlRfUkVDT05ORUNUX0ZBSUxFRCA9IDIwNCxcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBlbnVtIHZhbHVlOiBFUlJPUl9DT0RFX1BBUlRJQ0lQQU5UX01FRElBX1RSQU5TUE9SVF9GQUlMVVJFID0gMjA1O1xuICAgKi9cbiAgUEFSVElDSVBBTlRfTUVESUFfVFJBTlNQT1JUX0ZBSUxVUkUgPSAyMDUsXG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZW51bSB2YWx1ZTogRVJST1JfQ09ERV9DQUxMX05PVF9GT1VORCA9IDMwMDtcbiAgICovXG4gIENBTExfTk9UX0ZPVU5EID0gMzAwLFxuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGVudW0gdmFsdWU6IEVSUk9SX0NPREVfUkVRVUVTVF9WQUxJREFUSU9OX0ZBSUxFRCA9IDQwMDtcbiAgICovXG4gIFJFUVVFU1RfVkFMSURBVElPTl9GQUlMRUQgPSA0MDAsXG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZW51bSB2YWx1ZTogRVJST1JfQ09ERV9VTkFVVEhFTlRJQ0FURUQgPSA0MDE7XG4gICAqL1xuICBVTkFVVEhFTlRJQ0FURUQgPSA0MDEsXG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZW51bSB2YWx1ZTogRVJST1JfQ09ERV9QRVJNSVNTSU9OX0RFTklFRCA9IDQwMztcbiAgICovXG4gIFBFUk1JU1NJT05fREVOSUVEID0gNDAzLFxuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGVudW0gdmFsdWU6IEVSUk9SX0NPREVfVE9PX01BTllfUkVRVUVTVFMgPSA0Mjk7XG4gICAqL1xuICBUT09fTUFOWV9SRVFVRVNUUyA9IDQyOSxcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBlbnVtIHZhbHVlOiBFUlJPUl9DT0RFX0lOVEVSTkFMX1NFUlZFUl9FUlJPUiA9IDUwMDtcbiAgICovXG4gIElOVEVSTkFMX1NFUlZFUl9FUlJPUiA9IDUwMCxcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBlbnVtIHZhbHVlOiBFUlJPUl9DT0RFX1NGVV9TSFVUVElOR19ET1dOID0gNjAwO1xuICAgKi9cbiAgU0ZVX1NIVVRUSU5HX0RPV04gPSA2MDAsXG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZW51bSB2YWx1ZTogRVJST1JfQ09ERV9TRlVfRlVMTCA9IDcwMDtcbiAgICovXG4gIFNGVV9GVUxMID0gNzAwLFxufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZW51bSBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5TZGtUeXBlXG4gKi9cbmV4cG9ydCBlbnVtIFNka1R5cGUge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGVudW0gdmFsdWU6IFNES19UWVBFX1VOU1BFQ0lGSUVEID0gMDtcbiAgICovXG4gIFVOU1BFQ0lGSUVEID0gMCxcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBlbnVtIHZhbHVlOiBTREtfVFlQRV9SRUFDVCA9IDE7XG4gICAqL1xuICBSRUFDVCA9IDEsXG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZW51bSB2YWx1ZTogU0RLX1RZUEVfQU5HVUxBUiA9IDI7XG4gICAqL1xuICBBTkdVTEFSID0gMixcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBlbnVtIHZhbHVlOiBTREtfVFlQRV9BTkRST0lEID0gMztcbiAgICovXG4gIEFORFJPSUQgPSAzLFxuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGVudW0gdmFsdWU6IFNES19UWVBFX0lPUyA9IDQ7XG4gICAqL1xuICBJT1MgPSA0LFxuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGVudW0gdmFsdWU6IFNES19UWVBFX0ZMVVRURVIgPSA1O1xuICAgKi9cbiAgRkxVVFRFUiA9IDUsXG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZW51bSB2YWx1ZTogU0RLX1RZUEVfUkVBQ1RfTkFUSVZFID0gNjtcbiAgICovXG4gIFJFQUNUX05BVElWRSA9IDYsXG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZW51bSB2YWx1ZTogU0RLX1RZUEVfVU5JVFkgPSA3O1xuICAgKi9cbiAgVU5JVFkgPSA3LFxufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZW51bSBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5UcmFja1VucHVibGlzaFJlYXNvblxuICovXG5leHBvcnQgZW51bSBUcmFja1VucHVibGlzaFJlYXNvbiB7XG4gIC8qKlxuICAgKiBEZWZhdWx0IHZhbHVlIHdoaWNoIGlzIHVzZWQgd2hlbiB0aGUgc3BlY2lmaWMgcmVhc29uXG4gICAqIGZvciBtdXRpbmcgdGhlIHRyYWNrIGlzIG5vdCBrbm93bi5cbiAgICpcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGVudW0gdmFsdWU6IFRSQUNLX1VOUFVCTElTSF9SRUFTT05fVU5TUEVDSUZJRUQgPSAwO1xuICAgKi9cbiAgVU5TUEVDSUZJRUQgPSAwLFxuICAvKipcbiAgICogUmVwcmVzZW50cyB1c2VyIG11dGluZyB0aGVpciB0cmFja3MuXG4gICAqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBlbnVtIHZhbHVlOiBUUkFDS19VTlBVQkxJU0hfUkVBU09OX1VTRVJfTVVURUQgPSAxO1xuICAgKi9cbiAgVVNFUl9NVVRFRCA9IDEsXG4gIC8qKlxuICAgKiBSZXByZXNlbnRzIG11dGluZyB0aGUgdHJhY2sgYmVjYXVzZSB0aGUgcGVybWlzc2lvbiB0b1xuICAgKiBwdWJsaXNoIHRoZSB0cmFjayBoYXMgYmVlbiByZXZva2VkLlxuICAgKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZW51bSB2YWx1ZTogVFJBQ0tfVU5QVUJMSVNIX1JFQVNPTl9QRVJNSVNTSU9OX1JFVk9LRUQgPSAyO1xuICAgKi9cbiAgUEVSTUlTU0lPTl9SRVZPS0VEID0gMixcbiAgLyoqXG4gICAqIFJlcHJlc2VudHMgbXV0aW5nIHRoZSB0cmFjayBkdWUgdG8gbW9kZXJhdGlvbiBhY3Rpb25zLlxuICAgKiBUaGlzIGlzIGRpZmZlcmVudCBmcm9tIHBlcm1pc3Npb24gcmV2b2tlZCBiZWNhdXNlIHRoZVxuICAgKiBwYXJ0aWNpcGFudCBjYW4gdW5tdXRlIHRoZW1zZWx2ZXMgaGVyZSB3aGVyZWFzIGluIGNhc2VcbiAgICogb2YgXCJwZXJtaXNzaW9uIHJldm9rZVwiIGl0IGlzIG5vdCBwb3NzaWJsZSB1bnRpbCB0aGVcbiAgICogY2FsbCBwZXJtaXNzaW9ucyBhcmUgdXBkYXRlZC5cbiAgICpcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGVudW0gdmFsdWU6IFRSQUNLX1VOUFVCTElTSF9SRUFTT05fTU9ERVJBVElPTiA9IDM7XG4gICAqL1xuICBNT0RFUkFUSU9OID0gMyxcbn1cbi8qKlxuICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGVudW0gc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuR29Bd2F5UmVhc29uXG4gKi9cbmV4cG9ydCBlbnVtIEdvQXdheVJlYXNvbiB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZW51bSB2YWx1ZTogR09fQVdBWV9SRUFTT05fVU5TUEVDSUZJRUQgPSAwO1xuICAgKi9cbiAgVU5TUEVDSUZJRUQgPSAwLFxuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGVudW0gdmFsdWU6IEdPX0FXQVlfUkVBU09OX1NIVVRUSU5HX0RPV04gPSAxO1xuICAgKi9cbiAgU0hVVFRJTkdfRE9XTiA9IDEsXG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZW51bSB2YWx1ZTogR09fQVdBWV9SRUFTT05fUkVCQUxBTkNFID0gMjtcbiAgICovXG4gIFJFQkFMQU5DRSA9IDIsXG59XG4vLyBAZ2VuZXJhdGVkIG1lc3NhZ2UgdHlwZSB3aXRoIHJlZmxlY3Rpb24gaW5mb3JtYXRpb24sIG1heSBwcm92aWRlIHNwZWVkIG9wdGltaXplZCBtZXRob2RzXG5jbGFzcyBDYWxsU3RhdGUkVHlwZSBleHRlbmRzIE1lc3NhZ2VUeXBlPENhbGxTdGF0ZT4ge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcignc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuQ2FsbFN0YXRlJywgW1xuICAgICAge1xuICAgICAgICBubzogMSxcbiAgICAgICAgbmFtZTogJ3BhcnRpY2lwYW50cycsXG4gICAgICAgIGtpbmQ6ICdtZXNzYWdlJyxcbiAgICAgICAgcmVwZWF0OiAxIC8qUmVwZWF0VHlwZS5QQUNLRUQqLyxcbiAgICAgICAgVDogKCkgPT4gUGFydGljaXBhbnQsXG4gICAgICB9LFxuICAgICAgeyBubzogMiwgbmFtZTogJ3N0YXJ0ZWRfYXQnLCBraW5kOiAnbWVzc2FnZScsIFQ6ICgpID0+IFRpbWVzdGFtcCB9LFxuICAgICAge1xuICAgICAgICBubzogMyxcbiAgICAgICAgbmFtZTogJ3BhcnRpY2lwYW50X2NvdW50JyxcbiAgICAgICAga2luZDogJ21lc3NhZ2UnLFxuICAgICAgICBUOiAoKSA9PiBQYXJ0aWNpcGFudENvdW50LFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbm86IDQsXG4gICAgICAgIG5hbWU6ICdwaW5zJyxcbiAgICAgICAga2luZDogJ21lc3NhZ2UnLFxuICAgICAgICByZXBlYXQ6IDEgLypSZXBlYXRUeXBlLlBBQ0tFRCovLFxuICAgICAgICBUOiAoKSA9PiBQaW4sXG4gICAgICB9LFxuICAgIF0pO1xuICB9XG4gIGNyZWF0ZSh2YWx1ZT86IFBhcnRpYWxNZXNzYWdlPENhbGxTdGF0ZT4pOiBDYWxsU3RhdGUge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBnbG9iYWxUaGlzLk9iamVjdC5jcmVhdGUodGhpcy5tZXNzYWdlUHJvdG90eXBlISk7XG4gICAgbWVzc2FnZS5wYXJ0aWNpcGFudHMgPSBbXTtcbiAgICBtZXNzYWdlLnBpbnMgPSBbXTtcbiAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZClcbiAgICAgIHJlZmxlY3Rpb25NZXJnZVBhcnRpYWw8Q2FsbFN0YXRlPih0aGlzLCBtZXNzYWdlLCB2YWx1ZSk7XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH1cbiAgaW50ZXJuYWxCaW5hcnlSZWFkKFxuICAgIHJlYWRlcjogSUJpbmFyeVJlYWRlcixcbiAgICBsZW5ndGg6IG51bWJlcixcbiAgICBvcHRpb25zOiBCaW5hcnlSZWFkT3B0aW9ucyxcbiAgICB0YXJnZXQ/OiBDYWxsU3RhdGUsXG4gICk6IENhbGxTdGF0ZSB7XG4gICAgbGV0IG1lc3NhZ2UgPSB0YXJnZXQgPz8gdGhpcy5jcmVhdGUoKSxcbiAgICAgIGVuZCA9IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgIGxldCBbZmllbGRObywgd2lyZVR5cGVdID0gcmVhZGVyLnRhZygpO1xuICAgICAgc3dpdGNoIChmaWVsZE5vKSB7XG4gICAgICAgIGNhc2UgLyogcmVwZWF0ZWQgc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuUGFydGljaXBhbnQgcGFydGljaXBhbnRzICovIDE6XG4gICAgICAgICAgbWVzc2FnZS5wYXJ0aWNpcGFudHMucHVzaChcbiAgICAgICAgICAgIFBhcnRpY2lwYW50LmludGVybmFsQmluYXJ5UmVhZChyZWFkZXIsIHJlYWRlci51aW50MzIoKSwgb3B0aW9ucyksXG4gICAgICAgICAgKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAvKiBnb29nbGUucHJvdG9idWYuVGltZXN0YW1wIHN0YXJ0ZWRfYXQgKi8gMjpcbiAgICAgICAgICBtZXNzYWdlLnN0YXJ0ZWRBdCA9IFRpbWVzdGFtcC5pbnRlcm5hbEJpbmFyeVJlYWQoXG4gICAgICAgICAgICByZWFkZXIsXG4gICAgICAgICAgICByZWFkZXIudWludDMyKCksXG4gICAgICAgICAgICBvcHRpb25zLFxuICAgICAgICAgICAgbWVzc2FnZS5zdGFydGVkQXQsXG4gICAgICAgICAgKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAvKiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5QYXJ0aWNpcGFudENvdW50IHBhcnRpY2lwYW50X2NvdW50ICovIDM6XG4gICAgICAgICAgbWVzc2FnZS5wYXJ0aWNpcGFudENvdW50ID0gUGFydGljaXBhbnRDb3VudC5pbnRlcm5hbEJpbmFyeVJlYWQoXG4gICAgICAgICAgICByZWFkZXIsXG4gICAgICAgICAgICByZWFkZXIudWludDMyKCksXG4gICAgICAgICAgICBvcHRpb25zLFxuICAgICAgICAgICAgbWVzc2FnZS5wYXJ0aWNpcGFudENvdW50LFxuICAgICAgICAgICk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgLyogcmVwZWF0ZWQgc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuUGluIHBpbnMgKi8gNDpcbiAgICAgICAgICBtZXNzYWdlLnBpbnMucHVzaChcbiAgICAgICAgICAgIFBpbi5pbnRlcm5hbEJpbmFyeVJlYWQocmVhZGVyLCByZWFkZXIudWludDMyKCksIG9wdGlvbnMpLFxuICAgICAgICAgICk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgbGV0IHUgPSBvcHRpb25zLnJlYWRVbmtub3duRmllbGQ7XG4gICAgICAgICAgaWYgKHUgPT09ICd0aHJvdycpXG4gICAgICAgICAgICB0aHJvdyBuZXcgZ2xvYmFsVGhpcy5FcnJvcihcbiAgICAgICAgICAgICAgYFVua25vd24gZmllbGQgJHtmaWVsZE5vfSAod2lyZSB0eXBlICR7d2lyZVR5cGV9KSBmb3IgJHt0aGlzLnR5cGVOYW1lfWAsXG4gICAgICAgICAgICApO1xuICAgICAgICAgIGxldCBkID0gcmVhZGVyLnNraXAod2lyZVR5cGUpO1xuICAgICAgICAgIGlmICh1ICE9PSBmYWxzZSlcbiAgICAgICAgICAgICh1ID09PSB0cnVlID8gVW5rbm93bkZpZWxkSGFuZGxlci5vblJlYWQgOiB1KShcbiAgICAgICAgICAgICAgdGhpcy50eXBlTmFtZSxcbiAgICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgICAgZmllbGRObyxcbiAgICAgICAgICAgICAgd2lyZVR5cGUsXG4gICAgICAgICAgICAgIGQsXG4gICAgICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxuICBpbnRlcm5hbEJpbmFyeVdyaXRlKFxuICAgIG1lc3NhZ2U6IENhbGxTdGF0ZSxcbiAgICB3cml0ZXI6IElCaW5hcnlXcml0ZXIsXG4gICAgb3B0aW9uczogQmluYXJ5V3JpdGVPcHRpb25zLFxuICApOiBJQmluYXJ5V3JpdGVyIHtcbiAgICAvKiByZXBlYXRlZCBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5QYXJ0aWNpcGFudCBwYXJ0aWNpcGFudHMgPSAxOyAqL1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWVzc2FnZS5wYXJ0aWNpcGFudHMubGVuZ3RoOyBpKyspXG4gICAgICBQYXJ0aWNpcGFudC5pbnRlcm5hbEJpbmFyeVdyaXRlKFxuICAgICAgICBtZXNzYWdlLnBhcnRpY2lwYW50c1tpXSxcbiAgICAgICAgd3JpdGVyLnRhZygxLCBXaXJlVHlwZS5MZW5ndGhEZWxpbWl0ZWQpLmZvcmsoKSxcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICkuam9pbigpO1xuICAgIC8qIGdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXAgc3RhcnRlZF9hdCA9IDI7ICovXG4gICAgaWYgKG1lc3NhZ2Uuc3RhcnRlZEF0KVxuICAgICAgVGltZXN0YW1wLmludGVybmFsQmluYXJ5V3JpdGUoXG4gICAgICAgIG1lc3NhZ2Uuc3RhcnRlZEF0LFxuICAgICAgICB3cml0ZXIudGFnKDIsIFdpcmVUeXBlLkxlbmd0aERlbGltaXRlZCkuZm9yaygpLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgKS5qb2luKCk7XG4gICAgLyogc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuUGFydGljaXBhbnRDb3VudCBwYXJ0aWNpcGFudF9jb3VudCA9IDM7ICovXG4gICAgaWYgKG1lc3NhZ2UucGFydGljaXBhbnRDb3VudClcbiAgICAgIFBhcnRpY2lwYW50Q291bnQuaW50ZXJuYWxCaW5hcnlXcml0ZShcbiAgICAgICAgbWVzc2FnZS5wYXJ0aWNpcGFudENvdW50LFxuICAgICAgICB3cml0ZXIudGFnKDMsIFdpcmVUeXBlLkxlbmd0aERlbGltaXRlZCkuZm9yaygpLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgKS5qb2luKCk7XG4gICAgLyogcmVwZWF0ZWQgc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuUGluIHBpbnMgPSA0OyAqL1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWVzc2FnZS5waW5zLmxlbmd0aDsgaSsrKVxuICAgICAgUGluLmludGVybmFsQmluYXJ5V3JpdGUoXG4gICAgICAgIG1lc3NhZ2UucGluc1tpXSxcbiAgICAgICAgd3JpdGVyLnRhZyg0LCBXaXJlVHlwZS5MZW5ndGhEZWxpbWl0ZWQpLmZvcmsoKSxcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICkuam9pbigpO1xuICAgIGxldCB1ID0gb3B0aW9ucy53cml0ZVVua25vd25GaWVsZHM7XG4gICAgaWYgKHUgIT09IGZhbHNlKVxuICAgICAgKHUgPT0gdHJ1ZSA/IFVua25vd25GaWVsZEhhbmRsZXIub25Xcml0ZSA6IHUpKFxuICAgICAgICB0aGlzLnR5cGVOYW1lLFxuICAgICAgICBtZXNzYWdlLFxuICAgICAgICB3cml0ZXIsXG4gICAgICApO1xuICAgIHJldHVybiB3cml0ZXI7XG4gIH1cbn1cbi8qKlxuICogQGdlbmVyYXRlZCBNZXNzYWdlVHlwZSBmb3IgcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5DYWxsU3RhdGVcbiAqL1xuZXhwb3J0IGNvbnN0IENhbGxTdGF0ZSA9IG5ldyBDYWxsU3RhdGUkVHlwZSgpO1xuLy8gQGdlbmVyYXRlZCBtZXNzYWdlIHR5cGUgd2l0aCByZWZsZWN0aW9uIGluZm9ybWF0aW9uLCBtYXkgcHJvdmlkZSBzcGVlZCBvcHRpbWl6ZWQgbWV0aG9kc1xuY2xhc3MgUGFydGljaXBhbnRDb3VudCRUeXBlIGV4dGVuZHMgTWVzc2FnZVR5cGU8UGFydGljaXBhbnRDb3VudD4ge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcignc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuUGFydGljaXBhbnRDb3VudCcsIFtcbiAgICAgIHsgbm86IDEsIG5hbWU6ICd0b3RhbCcsIGtpbmQ6ICdzY2FsYXInLCBUOiAxMyAvKlNjYWxhclR5cGUuVUlOVDMyKi8gfSxcbiAgICAgIHsgbm86IDIsIG5hbWU6ICdhbm9ueW1vdXMnLCBraW5kOiAnc2NhbGFyJywgVDogMTMgLypTY2FsYXJUeXBlLlVJTlQzMiovIH0sXG4gICAgXSk7XG4gIH1cbiAgY3JlYXRlKHZhbHVlPzogUGFydGlhbE1lc3NhZ2U8UGFydGljaXBhbnRDb3VudD4pOiBQYXJ0aWNpcGFudENvdW50IHtcbiAgICBjb25zdCBtZXNzYWdlID0gZ2xvYmFsVGhpcy5PYmplY3QuY3JlYXRlKHRoaXMubWVzc2FnZVByb3RvdHlwZSEpO1xuICAgIG1lc3NhZ2UudG90YWwgPSAwO1xuICAgIG1lc3NhZ2UuYW5vbnltb3VzID0gMDtcbiAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZClcbiAgICAgIHJlZmxlY3Rpb25NZXJnZVBhcnRpYWw8UGFydGljaXBhbnRDb3VudD4odGhpcywgbWVzc2FnZSwgdmFsdWUpO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG4gIGludGVybmFsQmluYXJ5UmVhZChcbiAgICByZWFkZXI6IElCaW5hcnlSZWFkZXIsXG4gICAgbGVuZ3RoOiBudW1iZXIsXG4gICAgb3B0aW9uczogQmluYXJ5UmVhZE9wdGlvbnMsXG4gICAgdGFyZ2V0PzogUGFydGljaXBhbnRDb3VudCxcbiAgKTogUGFydGljaXBhbnRDb3VudCB7XG4gICAgbGV0IG1lc3NhZ2UgPSB0YXJnZXQgPz8gdGhpcy5jcmVhdGUoKSxcbiAgICAgIGVuZCA9IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgIGxldCBbZmllbGRObywgd2lyZVR5cGVdID0gcmVhZGVyLnRhZygpO1xuICAgICAgc3dpdGNoIChmaWVsZE5vKSB7XG4gICAgICAgIGNhc2UgLyogdWludDMyIHRvdGFsICovIDE6XG4gICAgICAgICAgbWVzc2FnZS50b3RhbCA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAvKiB1aW50MzIgYW5vbnltb3VzICovIDI6XG4gICAgICAgICAgbWVzc2FnZS5hbm9ueW1vdXMgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgbGV0IHUgPSBvcHRpb25zLnJlYWRVbmtub3duRmllbGQ7XG4gICAgICAgICAgaWYgKHUgPT09ICd0aHJvdycpXG4gICAgICAgICAgICB0aHJvdyBuZXcgZ2xvYmFsVGhpcy5FcnJvcihcbiAgICAgICAgICAgICAgYFVua25vd24gZmllbGQgJHtmaWVsZE5vfSAod2lyZSB0eXBlICR7d2lyZVR5cGV9KSBmb3IgJHt0aGlzLnR5cGVOYW1lfWAsXG4gICAgICAgICAgICApO1xuICAgICAgICAgIGxldCBkID0gcmVhZGVyLnNraXAod2lyZVR5cGUpO1xuICAgICAgICAgIGlmICh1ICE9PSBmYWxzZSlcbiAgICAgICAgICAgICh1ID09PSB0cnVlID8gVW5rbm93bkZpZWxkSGFuZGxlci5vblJlYWQgOiB1KShcbiAgICAgICAgICAgICAgdGhpcy50eXBlTmFtZSxcbiAgICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgICAgZmllbGRObyxcbiAgICAgICAgICAgICAgd2lyZVR5cGUsXG4gICAgICAgICAgICAgIGQsXG4gICAgICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxuICBpbnRlcm5hbEJpbmFyeVdyaXRlKFxuICAgIG1lc3NhZ2U6IFBhcnRpY2lwYW50Q291bnQsXG4gICAgd3JpdGVyOiBJQmluYXJ5V3JpdGVyLFxuICAgIG9wdGlvbnM6IEJpbmFyeVdyaXRlT3B0aW9ucyxcbiAgKTogSUJpbmFyeVdyaXRlciB7XG4gICAgLyogdWludDMyIHRvdGFsID0gMTsgKi9cbiAgICBpZiAobWVzc2FnZS50b3RhbCAhPT0gMClcbiAgICAgIHdyaXRlci50YWcoMSwgV2lyZVR5cGUuVmFyaW50KS51aW50MzIobWVzc2FnZS50b3RhbCk7XG4gICAgLyogdWludDMyIGFub255bW91cyA9IDI7ICovXG4gICAgaWYgKG1lc3NhZ2UuYW5vbnltb3VzICE9PSAwKVxuICAgICAgd3JpdGVyLnRhZygyLCBXaXJlVHlwZS5WYXJpbnQpLnVpbnQzMihtZXNzYWdlLmFub255bW91cyk7XG4gICAgbGV0IHUgPSBvcHRpb25zLndyaXRlVW5rbm93bkZpZWxkcztcbiAgICBpZiAodSAhPT0gZmFsc2UpXG4gICAgICAodSA9PSB0cnVlID8gVW5rbm93bkZpZWxkSGFuZGxlci5vbldyaXRlIDogdSkoXG4gICAgICAgIHRoaXMudHlwZU5hbWUsXG4gICAgICAgIG1lc3NhZ2UsXG4gICAgICAgIHdyaXRlcixcbiAgICAgICk7XG4gICAgcmV0dXJuIHdyaXRlcjtcbiAgfVxufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIE1lc3NhZ2VUeXBlIGZvciBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUubW9kZWxzLlBhcnRpY2lwYW50Q291bnRcbiAqL1xuZXhwb3J0IGNvbnN0IFBhcnRpY2lwYW50Q291bnQgPSBuZXcgUGFydGljaXBhbnRDb3VudCRUeXBlKCk7XG4vLyBAZ2VuZXJhdGVkIG1lc3NhZ2UgdHlwZSB3aXRoIHJlZmxlY3Rpb24gaW5mb3JtYXRpb24sIG1heSBwcm92aWRlIHNwZWVkIG9wdGltaXplZCBtZXRob2RzXG5jbGFzcyBQaW4kVHlwZSBleHRlbmRzIE1lc3NhZ2VUeXBlPFBpbj4ge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcignc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuUGluJywgW1xuICAgICAgeyBubzogMSwgbmFtZTogJ3VzZXJfaWQnLCBraW5kOiAnc2NhbGFyJywgVDogOSAvKlNjYWxhclR5cGUuU1RSSU5HKi8gfSxcbiAgICAgIHsgbm86IDIsIG5hbWU6ICdzZXNzaW9uX2lkJywga2luZDogJ3NjYWxhcicsIFQ6IDkgLypTY2FsYXJUeXBlLlNUUklORyovIH0sXG4gICAgXSk7XG4gIH1cbiAgY3JlYXRlKHZhbHVlPzogUGFydGlhbE1lc3NhZ2U8UGluPik6IFBpbiB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGdsb2JhbFRoaXMuT2JqZWN0LmNyZWF0ZSh0aGlzLm1lc3NhZ2VQcm90b3R5cGUhKTtcbiAgICBtZXNzYWdlLnVzZXJJZCA9ICcnO1xuICAgIG1lc3NhZ2Uuc2Vzc2lvbklkID0gJyc7XG4gICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHJlZmxlY3Rpb25NZXJnZVBhcnRpYWw8UGluPih0aGlzLCBtZXNzYWdlLCB2YWx1ZSk7XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH1cbiAgaW50ZXJuYWxCaW5hcnlSZWFkKFxuICAgIHJlYWRlcjogSUJpbmFyeVJlYWRlcixcbiAgICBsZW5ndGg6IG51bWJlcixcbiAgICBvcHRpb25zOiBCaW5hcnlSZWFkT3B0aW9ucyxcbiAgICB0YXJnZXQ/OiBQaW4sXG4gICk6IFBpbiB7XG4gICAgbGV0IG1lc3NhZ2UgPSB0YXJnZXQgPz8gdGhpcy5jcmVhdGUoKSxcbiAgICAgIGVuZCA9IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgIGxldCBbZmllbGRObywgd2lyZVR5cGVdID0gcmVhZGVyLnRhZygpO1xuICAgICAgc3dpdGNoIChmaWVsZE5vKSB7XG4gICAgICAgIGNhc2UgLyogc3RyaW5nIHVzZXJfaWQgKi8gMTpcbiAgICAgICAgICBtZXNzYWdlLnVzZXJJZCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAvKiBzdHJpbmcgc2Vzc2lvbl9pZCAqLyAyOlxuICAgICAgICAgIG1lc3NhZ2Uuc2Vzc2lvbklkID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGxldCB1ID0gb3B0aW9ucy5yZWFkVW5rbm93bkZpZWxkO1xuICAgICAgICAgIGlmICh1ID09PSAndGhyb3cnKVxuICAgICAgICAgICAgdGhyb3cgbmV3IGdsb2JhbFRoaXMuRXJyb3IoXG4gICAgICAgICAgICAgIGBVbmtub3duIGZpZWxkICR7ZmllbGROb30gKHdpcmUgdHlwZSAke3dpcmVUeXBlfSkgZm9yICR7dGhpcy50eXBlTmFtZX1gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICBsZXQgZCA9IHJlYWRlci5za2lwKHdpcmVUeXBlKTtcbiAgICAgICAgICBpZiAodSAhPT0gZmFsc2UpXG4gICAgICAgICAgICAodSA9PT0gdHJ1ZSA/IFVua25vd25GaWVsZEhhbmRsZXIub25SZWFkIDogdSkoXG4gICAgICAgICAgICAgIHRoaXMudHlwZU5hbWUsXG4gICAgICAgICAgICAgIG1lc3NhZ2UsXG4gICAgICAgICAgICAgIGZpZWxkTm8sXG4gICAgICAgICAgICAgIHdpcmVUeXBlLFxuICAgICAgICAgICAgICBkLFxuICAgICAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH1cbiAgaW50ZXJuYWxCaW5hcnlXcml0ZShcbiAgICBtZXNzYWdlOiBQaW4sXG4gICAgd3JpdGVyOiBJQmluYXJ5V3JpdGVyLFxuICAgIG9wdGlvbnM6IEJpbmFyeVdyaXRlT3B0aW9ucyxcbiAgKTogSUJpbmFyeVdyaXRlciB7XG4gICAgLyogc3RyaW5nIHVzZXJfaWQgPSAxOyAqL1xuICAgIGlmIChtZXNzYWdlLnVzZXJJZCAhPT0gJycpXG4gICAgICB3cml0ZXIudGFnKDEsIFdpcmVUeXBlLkxlbmd0aERlbGltaXRlZCkuc3RyaW5nKG1lc3NhZ2UudXNlcklkKTtcbiAgICAvKiBzdHJpbmcgc2Vzc2lvbl9pZCA9IDI7ICovXG4gICAgaWYgKG1lc3NhZ2Uuc2Vzc2lvbklkICE9PSAnJylcbiAgICAgIHdyaXRlci50YWcoMiwgV2lyZVR5cGUuTGVuZ3RoRGVsaW1pdGVkKS5zdHJpbmcobWVzc2FnZS5zZXNzaW9uSWQpO1xuICAgIGxldCB1ID0gb3B0aW9ucy53cml0ZVVua25vd25GaWVsZHM7XG4gICAgaWYgKHUgIT09IGZhbHNlKVxuICAgICAgKHUgPT0gdHJ1ZSA/IFVua25vd25GaWVsZEhhbmRsZXIub25Xcml0ZSA6IHUpKFxuICAgICAgICB0aGlzLnR5cGVOYW1lLFxuICAgICAgICBtZXNzYWdlLFxuICAgICAgICB3cml0ZXIsXG4gICAgICApO1xuICAgIHJldHVybiB3cml0ZXI7XG4gIH1cbn1cbi8qKlxuICogQGdlbmVyYXRlZCBNZXNzYWdlVHlwZSBmb3IgcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5QaW5cbiAqL1xuZXhwb3J0IGNvbnN0IFBpbiA9IG5ldyBQaW4kVHlwZSgpO1xuLy8gQGdlbmVyYXRlZCBtZXNzYWdlIHR5cGUgd2l0aCByZWZsZWN0aW9uIGluZm9ybWF0aW9uLCBtYXkgcHJvdmlkZSBzcGVlZCBvcHRpbWl6ZWQgbWV0aG9kc1xuY2xhc3MgUGFydGljaXBhbnQkVHlwZSBleHRlbmRzIE1lc3NhZ2VUeXBlPFBhcnRpY2lwYW50PiB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCdzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5QYXJ0aWNpcGFudCcsIFtcbiAgICAgIHsgbm86IDEsIG5hbWU6ICd1c2VyX2lkJywga2luZDogJ3NjYWxhcicsIFQ6IDkgLypTY2FsYXJUeXBlLlNUUklORyovIH0sXG4gICAgICB7IG5vOiAyLCBuYW1lOiAnc2Vzc2lvbl9pZCcsIGtpbmQ6ICdzY2FsYXInLCBUOiA5IC8qU2NhbGFyVHlwZS5TVFJJTkcqLyB9LFxuICAgICAge1xuICAgICAgICBubzogMyxcbiAgICAgICAgbmFtZTogJ3B1Ymxpc2hlZF90cmFja3MnLFxuICAgICAgICBraW5kOiAnZW51bScsXG4gICAgICAgIHJlcGVhdDogMSAvKlJlcGVhdFR5cGUuUEFDS0VEKi8sXG4gICAgICAgIFQ6ICgpID0+IFtcbiAgICAgICAgICAnc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuVHJhY2tUeXBlJyxcbiAgICAgICAgICBUcmFja1R5cGUsXG4gICAgICAgICAgJ1RSQUNLX1RZUEVfJyxcbiAgICAgICAgXSxcbiAgICAgIH0sXG4gICAgICB7IG5vOiA0LCBuYW1lOiAnam9pbmVkX2F0Jywga2luZDogJ21lc3NhZ2UnLCBUOiAoKSA9PiBUaW1lc3RhbXAgfSxcbiAgICAgIHtcbiAgICAgICAgbm86IDUsXG4gICAgICAgIG5hbWU6ICd0cmFja19sb29rdXBfcHJlZml4JyxcbiAgICAgICAga2luZDogJ3NjYWxhcicsXG4gICAgICAgIFQ6IDkgLypTY2FsYXJUeXBlLlNUUklORyovLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbm86IDYsXG4gICAgICAgIG5hbWU6ICdjb25uZWN0aW9uX3F1YWxpdHknLFxuICAgICAgICBraW5kOiAnZW51bScsXG4gICAgICAgIFQ6ICgpID0+IFtcbiAgICAgICAgICAnc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuQ29ubmVjdGlvblF1YWxpdHknLFxuICAgICAgICAgIENvbm5lY3Rpb25RdWFsaXR5LFxuICAgICAgICAgICdDT05ORUNUSU9OX1FVQUxJVFlfJyxcbiAgICAgICAgXSxcbiAgICAgIH0sXG4gICAgICB7IG5vOiA3LCBuYW1lOiAnaXNfc3BlYWtpbmcnLCBraW5kOiAnc2NhbGFyJywgVDogOCAvKlNjYWxhclR5cGUuQk9PTCovIH0sXG4gICAgICB7XG4gICAgICAgIG5vOiA4LFxuICAgICAgICBuYW1lOiAnaXNfZG9taW5hbnRfc3BlYWtlcicsXG4gICAgICAgIGtpbmQ6ICdzY2FsYXInLFxuICAgICAgICBUOiA4IC8qU2NhbGFyVHlwZS5CT09MKi8sXG4gICAgICB9LFxuICAgICAgeyBubzogOSwgbmFtZTogJ2F1ZGlvX2xldmVsJywga2luZDogJ3NjYWxhcicsIFQ6IDIgLypTY2FsYXJUeXBlLkZMT0FUKi8gfSxcbiAgICAgIHsgbm86IDEwLCBuYW1lOiAnbmFtZScsIGtpbmQ6ICdzY2FsYXInLCBUOiA5IC8qU2NhbGFyVHlwZS5TVFJJTkcqLyB9LFxuICAgICAgeyBubzogMTEsIG5hbWU6ICdpbWFnZScsIGtpbmQ6ICdzY2FsYXInLCBUOiA5IC8qU2NhbGFyVHlwZS5TVFJJTkcqLyB9LFxuICAgICAgeyBubzogMTIsIG5hbWU6ICdjdXN0b20nLCBraW5kOiAnbWVzc2FnZScsIFQ6ICgpID0+IFN0cnVjdCB9LFxuICAgICAge1xuICAgICAgICBubzogMTMsXG4gICAgICAgIG5hbWU6ICdyb2xlcycsXG4gICAgICAgIGtpbmQ6ICdzY2FsYXInLFxuICAgICAgICByZXBlYXQ6IDIgLypSZXBlYXRUeXBlLlVOUEFDS0VEKi8sXG4gICAgICAgIFQ6IDkgLypTY2FsYXJUeXBlLlNUUklORyovLFxuICAgICAgfSxcbiAgICBdKTtcbiAgfVxuICBjcmVhdGUodmFsdWU/OiBQYXJ0aWFsTWVzc2FnZTxQYXJ0aWNpcGFudD4pOiBQYXJ0aWNpcGFudCB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGdsb2JhbFRoaXMuT2JqZWN0LmNyZWF0ZSh0aGlzLm1lc3NhZ2VQcm90b3R5cGUhKTtcbiAgICBtZXNzYWdlLnVzZXJJZCA9ICcnO1xuICAgIG1lc3NhZ2Uuc2Vzc2lvbklkID0gJyc7XG4gICAgbWVzc2FnZS5wdWJsaXNoZWRUcmFja3MgPSBbXTtcbiAgICBtZXNzYWdlLnRyYWNrTG9va3VwUHJlZml4ID0gJyc7XG4gICAgbWVzc2FnZS5jb25uZWN0aW9uUXVhbGl0eSA9IDA7XG4gICAgbWVzc2FnZS5pc1NwZWFraW5nID0gZmFsc2U7XG4gICAgbWVzc2FnZS5pc0RvbWluYW50U3BlYWtlciA9IGZhbHNlO1xuICAgIG1lc3NhZ2UuYXVkaW9MZXZlbCA9IDA7XG4gICAgbWVzc2FnZS5uYW1lID0gJyc7XG4gICAgbWVzc2FnZS5pbWFnZSA9ICcnO1xuICAgIG1lc3NhZ2Uucm9sZXMgPSBbXTtcbiAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZClcbiAgICAgIHJlZmxlY3Rpb25NZXJnZVBhcnRpYWw8UGFydGljaXBhbnQ+KHRoaXMsIG1lc3NhZ2UsIHZhbHVlKTtcbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxuICBpbnRlcm5hbEJpbmFyeVJlYWQoXG4gICAgcmVhZGVyOiBJQmluYXJ5UmVhZGVyLFxuICAgIGxlbmd0aDogbnVtYmVyLFxuICAgIG9wdGlvbnM6IEJpbmFyeVJlYWRPcHRpb25zLFxuICAgIHRhcmdldD86IFBhcnRpY2lwYW50LFxuICApOiBQYXJ0aWNpcGFudCB7XG4gICAgbGV0IG1lc3NhZ2UgPSB0YXJnZXQgPz8gdGhpcy5jcmVhdGUoKSxcbiAgICAgIGVuZCA9IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgIGxldCBbZmllbGRObywgd2lyZVR5cGVdID0gcmVhZGVyLnRhZygpO1xuICAgICAgc3dpdGNoIChmaWVsZE5vKSB7XG4gICAgICAgIGNhc2UgLyogc3RyaW5nIHVzZXJfaWQgKi8gMTpcbiAgICAgICAgICBtZXNzYWdlLnVzZXJJZCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAvKiBzdHJpbmcgc2Vzc2lvbl9pZCAqLyAyOlxuICAgICAgICAgIG1lc3NhZ2Uuc2Vzc2lvbklkID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIC8qIHJlcGVhdGVkIHN0cmVhbS52aWRlby5zZnUubW9kZWxzLlRyYWNrVHlwZSBwdWJsaXNoZWRfdHJhY2tzICovIDM6XG4gICAgICAgICAgaWYgKHdpcmVUeXBlID09PSBXaXJlVHlwZS5MZW5ndGhEZWxpbWl0ZWQpXG4gICAgICAgICAgICBmb3IgKGxldCBlID0gcmVhZGVyLmludDMyKCkgKyByZWFkZXIucG9zOyByZWFkZXIucG9zIDwgZTsgKVxuICAgICAgICAgICAgICBtZXNzYWdlLnB1Ymxpc2hlZFRyYWNrcy5wdXNoKHJlYWRlci5pbnQzMigpKTtcbiAgICAgICAgICBlbHNlIG1lc3NhZ2UucHVibGlzaGVkVHJhY2tzLnB1c2gocmVhZGVyLmludDMyKCkpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIC8qIGdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXAgam9pbmVkX2F0ICovIDQ6XG4gICAgICAgICAgbWVzc2FnZS5qb2luZWRBdCA9IFRpbWVzdGFtcC5pbnRlcm5hbEJpbmFyeVJlYWQoXG4gICAgICAgICAgICByZWFkZXIsXG4gICAgICAgICAgICByZWFkZXIudWludDMyKCksXG4gICAgICAgICAgICBvcHRpb25zLFxuICAgICAgICAgICAgbWVzc2FnZS5qb2luZWRBdCxcbiAgICAgICAgICApO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIC8qIHN0cmluZyB0cmFja19sb29rdXBfcHJlZml4ICovIDU6XG4gICAgICAgICAgbWVzc2FnZS50cmFja0xvb2t1cFByZWZpeCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAvKiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5Db25uZWN0aW9uUXVhbGl0eSBjb25uZWN0aW9uX3F1YWxpdHkgKi8gNjpcbiAgICAgICAgICBtZXNzYWdlLmNvbm5lY3Rpb25RdWFsaXR5ID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgLyogYm9vbCBpc19zcGVha2luZyAqLyA3OlxuICAgICAgICAgIG1lc3NhZ2UuaXNTcGVha2luZyA9IHJlYWRlci5ib29sKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgLyogYm9vbCBpc19kb21pbmFudF9zcGVha2VyICovIDg6XG4gICAgICAgICAgbWVzc2FnZS5pc0RvbWluYW50U3BlYWtlciA9IHJlYWRlci5ib29sKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgLyogZmxvYXQgYXVkaW9fbGV2ZWwgKi8gOTpcbiAgICAgICAgICBtZXNzYWdlLmF1ZGlvTGV2ZWwgPSByZWFkZXIuZmxvYXQoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAvKiBzdHJpbmcgbmFtZSAqLyAxMDpcbiAgICAgICAgICBtZXNzYWdlLm5hbWUgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgLyogc3RyaW5nIGltYWdlICovIDExOlxuICAgICAgICAgIG1lc3NhZ2UuaW1hZ2UgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgLyogZ29vZ2xlLnByb3RvYnVmLlN0cnVjdCBjdXN0b20gKi8gMTI6XG4gICAgICAgICAgbWVzc2FnZS5jdXN0b20gPSBTdHJ1Y3QuaW50ZXJuYWxCaW5hcnlSZWFkKFxuICAgICAgICAgICAgcmVhZGVyLFxuICAgICAgICAgICAgcmVhZGVyLnVpbnQzMigpLFxuICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICAgIG1lc3NhZ2UuY3VzdG9tLFxuICAgICAgICAgICk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgLyogcmVwZWF0ZWQgc3RyaW5nIHJvbGVzICovIDEzOlxuICAgICAgICAgIG1lc3NhZ2Uucm9sZXMucHVzaChyZWFkZXIuc3RyaW5nKCkpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGxldCB1ID0gb3B0aW9ucy5yZWFkVW5rbm93bkZpZWxkO1xuICAgICAgICAgIGlmICh1ID09PSAndGhyb3cnKVxuICAgICAgICAgICAgdGhyb3cgbmV3IGdsb2JhbFRoaXMuRXJyb3IoXG4gICAgICAgICAgICAgIGBVbmtub3duIGZpZWxkICR7ZmllbGROb30gKHdpcmUgdHlwZSAke3dpcmVUeXBlfSkgZm9yICR7dGhpcy50eXBlTmFtZX1gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICBsZXQgZCA9IHJlYWRlci5za2lwKHdpcmVUeXBlKTtcbiAgICAgICAgICBpZiAodSAhPT0gZmFsc2UpXG4gICAgICAgICAgICAodSA9PT0gdHJ1ZSA/IFVua25vd25GaWVsZEhhbmRsZXIub25SZWFkIDogdSkoXG4gICAgICAgICAgICAgIHRoaXMudHlwZU5hbWUsXG4gICAgICAgICAgICAgIG1lc3NhZ2UsXG4gICAgICAgICAgICAgIGZpZWxkTm8sXG4gICAgICAgICAgICAgIHdpcmVUeXBlLFxuICAgICAgICAgICAgICBkLFxuICAgICAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH1cbiAgaW50ZXJuYWxCaW5hcnlXcml0ZShcbiAgICBtZXNzYWdlOiBQYXJ0aWNpcGFudCxcbiAgICB3cml0ZXI6IElCaW5hcnlXcml0ZXIsXG4gICAgb3B0aW9uczogQmluYXJ5V3JpdGVPcHRpb25zLFxuICApOiBJQmluYXJ5V3JpdGVyIHtcbiAgICAvKiBzdHJpbmcgdXNlcl9pZCA9IDE7ICovXG4gICAgaWYgKG1lc3NhZ2UudXNlcklkICE9PSAnJylcbiAgICAgIHdyaXRlci50YWcoMSwgV2lyZVR5cGUuTGVuZ3RoRGVsaW1pdGVkKS5zdHJpbmcobWVzc2FnZS51c2VySWQpO1xuICAgIC8qIHN0cmluZyBzZXNzaW9uX2lkID0gMjsgKi9cbiAgICBpZiAobWVzc2FnZS5zZXNzaW9uSWQgIT09ICcnKVxuICAgICAgd3JpdGVyLnRhZygyLCBXaXJlVHlwZS5MZW5ndGhEZWxpbWl0ZWQpLnN0cmluZyhtZXNzYWdlLnNlc3Npb25JZCk7XG4gICAgLyogcmVwZWF0ZWQgc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuVHJhY2tUeXBlIHB1Ymxpc2hlZF90cmFja3MgPSAzOyAqL1xuICAgIGlmIChtZXNzYWdlLnB1Ymxpc2hlZFRyYWNrcy5sZW5ndGgpIHtcbiAgICAgIHdyaXRlci50YWcoMywgV2lyZVR5cGUuTGVuZ3RoRGVsaW1pdGVkKS5mb3JrKCk7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1lc3NhZ2UucHVibGlzaGVkVHJhY2tzLmxlbmd0aDsgaSsrKVxuICAgICAgICB3cml0ZXIuaW50MzIobWVzc2FnZS5wdWJsaXNoZWRUcmFja3NbaV0pO1xuICAgICAgd3JpdGVyLmpvaW4oKTtcbiAgICB9XG4gICAgLyogZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcCBqb2luZWRfYXQgPSA0OyAqL1xuICAgIGlmIChtZXNzYWdlLmpvaW5lZEF0KVxuICAgICAgVGltZXN0YW1wLmludGVybmFsQmluYXJ5V3JpdGUoXG4gICAgICAgIG1lc3NhZ2Uuam9pbmVkQXQsXG4gICAgICAgIHdyaXRlci50YWcoNCwgV2lyZVR5cGUuTGVuZ3RoRGVsaW1pdGVkKS5mb3JrKCksXG4gICAgICAgIG9wdGlvbnMsXG4gICAgICApLmpvaW4oKTtcbiAgICAvKiBzdHJpbmcgdHJhY2tfbG9va3VwX3ByZWZpeCA9IDU7ICovXG4gICAgaWYgKG1lc3NhZ2UudHJhY2tMb29rdXBQcmVmaXggIT09ICcnKVxuICAgICAgd3JpdGVyLnRhZyg1LCBXaXJlVHlwZS5MZW5ndGhEZWxpbWl0ZWQpLnN0cmluZyhtZXNzYWdlLnRyYWNrTG9va3VwUHJlZml4KTtcbiAgICAvKiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5Db25uZWN0aW9uUXVhbGl0eSBjb25uZWN0aW9uX3F1YWxpdHkgPSA2OyAqL1xuICAgIGlmIChtZXNzYWdlLmNvbm5lY3Rpb25RdWFsaXR5ICE9PSAwKVxuICAgICAgd3JpdGVyLnRhZyg2LCBXaXJlVHlwZS5WYXJpbnQpLmludDMyKG1lc3NhZ2UuY29ubmVjdGlvblF1YWxpdHkpO1xuICAgIC8qIGJvb2wgaXNfc3BlYWtpbmcgPSA3OyAqL1xuICAgIGlmIChtZXNzYWdlLmlzU3BlYWtpbmcgIT09IGZhbHNlKVxuICAgICAgd3JpdGVyLnRhZyg3LCBXaXJlVHlwZS5WYXJpbnQpLmJvb2wobWVzc2FnZS5pc1NwZWFraW5nKTtcbiAgICAvKiBib29sIGlzX2RvbWluYW50X3NwZWFrZXIgPSA4OyAqL1xuICAgIGlmIChtZXNzYWdlLmlzRG9taW5hbnRTcGVha2VyICE9PSBmYWxzZSlcbiAgICAgIHdyaXRlci50YWcoOCwgV2lyZVR5cGUuVmFyaW50KS5ib29sKG1lc3NhZ2UuaXNEb21pbmFudFNwZWFrZXIpO1xuICAgIC8qIGZsb2F0IGF1ZGlvX2xldmVsID0gOTsgKi9cbiAgICBpZiAobWVzc2FnZS5hdWRpb0xldmVsICE9PSAwKVxuICAgICAgd3JpdGVyLnRhZyg5LCBXaXJlVHlwZS5CaXQzMikuZmxvYXQobWVzc2FnZS5hdWRpb0xldmVsKTtcbiAgICAvKiBzdHJpbmcgbmFtZSA9IDEwOyAqL1xuICAgIGlmIChtZXNzYWdlLm5hbWUgIT09ICcnKVxuICAgICAgd3JpdGVyLnRhZygxMCwgV2lyZVR5cGUuTGVuZ3RoRGVsaW1pdGVkKS5zdHJpbmcobWVzc2FnZS5uYW1lKTtcbiAgICAvKiBzdHJpbmcgaW1hZ2UgPSAxMTsgKi9cbiAgICBpZiAobWVzc2FnZS5pbWFnZSAhPT0gJycpXG4gICAgICB3cml0ZXIudGFnKDExLCBXaXJlVHlwZS5MZW5ndGhEZWxpbWl0ZWQpLnN0cmluZyhtZXNzYWdlLmltYWdlKTtcbiAgICAvKiBnb29nbGUucHJvdG9idWYuU3RydWN0IGN1c3RvbSA9IDEyOyAqL1xuICAgIGlmIChtZXNzYWdlLmN1c3RvbSlcbiAgICAgIFN0cnVjdC5pbnRlcm5hbEJpbmFyeVdyaXRlKFxuICAgICAgICBtZXNzYWdlLmN1c3RvbSxcbiAgICAgICAgd3JpdGVyLnRhZygxMiwgV2lyZVR5cGUuTGVuZ3RoRGVsaW1pdGVkKS5mb3JrKCksXG4gICAgICAgIG9wdGlvbnMsXG4gICAgICApLmpvaW4oKTtcbiAgICAvKiByZXBlYXRlZCBzdHJpbmcgcm9sZXMgPSAxMzsgKi9cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1lc3NhZ2Uucm9sZXMubGVuZ3RoOyBpKyspXG4gICAgICB3cml0ZXIudGFnKDEzLCBXaXJlVHlwZS5MZW5ndGhEZWxpbWl0ZWQpLnN0cmluZyhtZXNzYWdlLnJvbGVzW2ldKTtcbiAgICBsZXQgdSA9IG9wdGlvbnMud3JpdGVVbmtub3duRmllbGRzO1xuICAgIGlmICh1ICE9PSBmYWxzZSlcbiAgICAgICh1ID09IHRydWUgPyBVbmtub3duRmllbGRIYW5kbGVyLm9uV3JpdGUgOiB1KShcbiAgICAgICAgdGhpcy50eXBlTmFtZSxcbiAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgd3JpdGVyLFxuICAgICAgKTtcbiAgICByZXR1cm4gd3JpdGVyO1xuICB9XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgTWVzc2FnZVR5cGUgZm9yIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuUGFydGljaXBhbnRcbiAqL1xuZXhwb3J0IGNvbnN0IFBhcnRpY2lwYW50ID0gbmV3IFBhcnRpY2lwYW50JFR5cGUoKTtcbi8vIEBnZW5lcmF0ZWQgbWVzc2FnZSB0eXBlIHdpdGggcmVmbGVjdGlvbiBpbmZvcm1hdGlvbiwgbWF5IHByb3ZpZGUgc3BlZWQgb3B0aW1pemVkIG1ldGhvZHNcbmNsYXNzIFN0cmVhbVF1YWxpdHkkVHlwZSBleHRlbmRzIE1lc3NhZ2VUeXBlPFN0cmVhbVF1YWxpdHk+IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoJ3N0cmVhbS52aWRlby5zZnUubW9kZWxzLlN0cmVhbVF1YWxpdHknLCBbXG4gICAgICB7XG4gICAgICAgIG5vOiAxLFxuICAgICAgICBuYW1lOiAndmlkZW9fcXVhbGl0eScsXG4gICAgICAgIGtpbmQ6ICdlbnVtJyxcbiAgICAgICAgVDogKCkgPT4gW1xuICAgICAgICAgICdzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5WaWRlb1F1YWxpdHknLFxuICAgICAgICAgIFZpZGVvUXVhbGl0eSxcbiAgICAgICAgICAnVklERU9fUVVBTElUWV8nLFxuICAgICAgICBdLFxuICAgICAgfSxcbiAgICAgIHsgbm86IDIsIG5hbWU6ICd1c2VyX2lkJywga2luZDogJ3NjYWxhcicsIFQ6IDkgLypTY2FsYXJUeXBlLlNUUklORyovIH0sXG4gICAgXSk7XG4gIH1cbiAgY3JlYXRlKHZhbHVlPzogUGFydGlhbE1lc3NhZ2U8U3RyZWFtUXVhbGl0eT4pOiBTdHJlYW1RdWFsaXR5IHtcbiAgICBjb25zdCBtZXNzYWdlID0gZ2xvYmFsVGhpcy5PYmplY3QuY3JlYXRlKHRoaXMubWVzc2FnZVByb3RvdHlwZSEpO1xuICAgIG1lc3NhZ2UudmlkZW9RdWFsaXR5ID0gMDtcbiAgICBtZXNzYWdlLnVzZXJJZCA9ICcnO1xuICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKVxuICAgICAgcmVmbGVjdGlvbk1lcmdlUGFydGlhbDxTdHJlYW1RdWFsaXR5Pih0aGlzLCBtZXNzYWdlLCB2YWx1ZSk7XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH1cbiAgaW50ZXJuYWxCaW5hcnlSZWFkKFxuICAgIHJlYWRlcjogSUJpbmFyeVJlYWRlcixcbiAgICBsZW5ndGg6IG51bWJlcixcbiAgICBvcHRpb25zOiBCaW5hcnlSZWFkT3B0aW9ucyxcbiAgICB0YXJnZXQ/OiBTdHJlYW1RdWFsaXR5LFxuICApOiBTdHJlYW1RdWFsaXR5IHtcbiAgICBsZXQgbWVzc2FnZSA9IHRhcmdldCA/PyB0aGlzLmNyZWF0ZSgpLFxuICAgICAgZW5kID0gcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgbGV0IFtmaWVsZE5vLCB3aXJlVHlwZV0gPSByZWFkZXIudGFnKCk7XG4gICAgICBzd2l0Y2ggKGZpZWxkTm8pIHtcbiAgICAgICAgY2FzZSAvKiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5WaWRlb1F1YWxpdHkgdmlkZW9fcXVhbGl0eSAqLyAxOlxuICAgICAgICAgIG1lc3NhZ2UudmlkZW9RdWFsaXR5ID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgLyogc3RyaW5nIHVzZXJfaWQgKi8gMjpcbiAgICAgICAgICBtZXNzYWdlLnVzZXJJZCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBsZXQgdSA9IG9wdGlvbnMucmVhZFVua25vd25GaWVsZDtcbiAgICAgICAgICBpZiAodSA9PT0gJ3Rocm93JylcbiAgICAgICAgICAgIHRocm93IG5ldyBnbG9iYWxUaGlzLkVycm9yKFxuICAgICAgICAgICAgICBgVW5rbm93biBmaWVsZCAke2ZpZWxkTm99ICh3aXJlIHR5cGUgJHt3aXJlVHlwZX0pIGZvciAke3RoaXMudHlwZU5hbWV9YCxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgbGV0IGQgPSByZWFkZXIuc2tpcCh3aXJlVHlwZSk7XG4gICAgICAgICAgaWYgKHUgIT09IGZhbHNlKVxuICAgICAgICAgICAgKHUgPT09IHRydWUgPyBVbmtub3duRmllbGRIYW5kbGVyLm9uUmVhZCA6IHUpKFxuICAgICAgICAgICAgICB0aGlzLnR5cGVOYW1lLFxuICAgICAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICAgICAgICBmaWVsZE5vLFxuICAgICAgICAgICAgICB3aXJlVHlwZSxcbiAgICAgICAgICAgICAgZCxcbiAgICAgICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG4gIGludGVybmFsQmluYXJ5V3JpdGUoXG4gICAgbWVzc2FnZTogU3RyZWFtUXVhbGl0eSxcbiAgICB3cml0ZXI6IElCaW5hcnlXcml0ZXIsXG4gICAgb3B0aW9uczogQmluYXJ5V3JpdGVPcHRpb25zLFxuICApOiBJQmluYXJ5V3JpdGVyIHtcbiAgICAvKiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5WaWRlb1F1YWxpdHkgdmlkZW9fcXVhbGl0eSA9IDE7ICovXG4gICAgaWYgKG1lc3NhZ2UudmlkZW9RdWFsaXR5ICE9PSAwKVxuICAgICAgd3JpdGVyLnRhZygxLCBXaXJlVHlwZS5WYXJpbnQpLmludDMyKG1lc3NhZ2UudmlkZW9RdWFsaXR5KTtcbiAgICAvKiBzdHJpbmcgdXNlcl9pZCA9IDI7ICovXG4gICAgaWYgKG1lc3NhZ2UudXNlcklkICE9PSAnJylcbiAgICAgIHdyaXRlci50YWcoMiwgV2lyZVR5cGUuTGVuZ3RoRGVsaW1pdGVkKS5zdHJpbmcobWVzc2FnZS51c2VySWQpO1xuICAgIGxldCB1ID0gb3B0aW9ucy53cml0ZVVua25vd25GaWVsZHM7XG4gICAgaWYgKHUgIT09IGZhbHNlKVxuICAgICAgKHUgPT0gdHJ1ZSA/IFVua25vd25GaWVsZEhhbmRsZXIub25Xcml0ZSA6IHUpKFxuICAgICAgICB0aGlzLnR5cGVOYW1lLFxuICAgICAgICBtZXNzYWdlLFxuICAgICAgICB3cml0ZXIsXG4gICAgICApO1xuICAgIHJldHVybiB3cml0ZXI7XG4gIH1cbn1cbi8qKlxuICogQGdlbmVyYXRlZCBNZXNzYWdlVHlwZSBmb3IgcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5TdHJlYW1RdWFsaXR5XG4gKi9cbmV4cG9ydCBjb25zdCBTdHJlYW1RdWFsaXR5ID0gbmV3IFN0cmVhbVF1YWxpdHkkVHlwZSgpO1xuLy8gQGdlbmVyYXRlZCBtZXNzYWdlIHR5cGUgd2l0aCByZWZsZWN0aW9uIGluZm9ybWF0aW9uLCBtYXkgcHJvdmlkZSBzcGVlZCBvcHRpbWl6ZWQgbWV0aG9kc1xuY2xhc3MgVmlkZW9EaW1lbnNpb24kVHlwZSBleHRlbmRzIE1lc3NhZ2VUeXBlPFZpZGVvRGltZW5zaW9uPiB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCdzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5WaWRlb0RpbWVuc2lvbicsIFtcbiAgICAgIHsgbm86IDEsIG5hbWU6ICd3aWR0aCcsIGtpbmQ6ICdzY2FsYXInLCBUOiAxMyAvKlNjYWxhclR5cGUuVUlOVDMyKi8gfSxcbiAgICAgIHsgbm86IDIsIG5hbWU6ICdoZWlnaHQnLCBraW5kOiAnc2NhbGFyJywgVDogMTMgLypTY2FsYXJUeXBlLlVJTlQzMiovIH0sXG4gICAgXSk7XG4gIH1cbiAgY3JlYXRlKHZhbHVlPzogUGFydGlhbE1lc3NhZ2U8VmlkZW9EaW1lbnNpb24+KTogVmlkZW9EaW1lbnNpb24ge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBnbG9iYWxUaGlzLk9iamVjdC5jcmVhdGUodGhpcy5tZXNzYWdlUHJvdG90eXBlISk7XG4gICAgbWVzc2FnZS53aWR0aCA9IDA7XG4gICAgbWVzc2FnZS5oZWlnaHQgPSAwO1xuICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKVxuICAgICAgcmVmbGVjdGlvbk1lcmdlUGFydGlhbDxWaWRlb0RpbWVuc2lvbj4odGhpcywgbWVzc2FnZSwgdmFsdWUpO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG4gIGludGVybmFsQmluYXJ5UmVhZChcbiAgICByZWFkZXI6IElCaW5hcnlSZWFkZXIsXG4gICAgbGVuZ3RoOiBudW1iZXIsXG4gICAgb3B0aW9uczogQmluYXJ5UmVhZE9wdGlvbnMsXG4gICAgdGFyZ2V0PzogVmlkZW9EaW1lbnNpb24sXG4gICk6IFZpZGVvRGltZW5zaW9uIHtcbiAgICBsZXQgbWVzc2FnZSA9IHRhcmdldCA/PyB0aGlzLmNyZWF0ZSgpLFxuICAgICAgZW5kID0gcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgbGV0IFtmaWVsZE5vLCB3aXJlVHlwZV0gPSByZWFkZXIudGFnKCk7XG4gICAgICBzd2l0Y2ggKGZpZWxkTm8pIHtcbiAgICAgICAgY2FzZSAvKiB1aW50MzIgd2lkdGggKi8gMTpcbiAgICAgICAgICBtZXNzYWdlLndpZHRoID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIC8qIHVpbnQzMiBoZWlnaHQgKi8gMjpcbiAgICAgICAgICBtZXNzYWdlLmhlaWdodCA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBsZXQgdSA9IG9wdGlvbnMucmVhZFVua25vd25GaWVsZDtcbiAgICAgICAgICBpZiAodSA9PT0gJ3Rocm93JylcbiAgICAgICAgICAgIHRocm93IG5ldyBnbG9iYWxUaGlzLkVycm9yKFxuICAgICAgICAgICAgICBgVW5rbm93biBmaWVsZCAke2ZpZWxkTm99ICh3aXJlIHR5cGUgJHt3aXJlVHlwZX0pIGZvciAke3RoaXMudHlwZU5hbWV9YCxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgbGV0IGQgPSByZWFkZXIuc2tpcCh3aXJlVHlwZSk7XG4gICAgICAgICAgaWYgKHUgIT09IGZhbHNlKVxuICAgICAgICAgICAgKHUgPT09IHRydWUgPyBVbmtub3duRmllbGRIYW5kbGVyLm9uUmVhZCA6IHUpKFxuICAgICAgICAgICAgICB0aGlzLnR5cGVOYW1lLFxuICAgICAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICAgICAgICBmaWVsZE5vLFxuICAgICAgICAgICAgICB3aXJlVHlwZSxcbiAgICAgICAgICAgICAgZCxcbiAgICAgICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG4gIGludGVybmFsQmluYXJ5V3JpdGUoXG4gICAgbWVzc2FnZTogVmlkZW9EaW1lbnNpb24sXG4gICAgd3JpdGVyOiBJQmluYXJ5V3JpdGVyLFxuICAgIG9wdGlvbnM6IEJpbmFyeVdyaXRlT3B0aW9ucyxcbiAgKTogSUJpbmFyeVdyaXRlciB7XG4gICAgLyogdWludDMyIHdpZHRoID0gMTsgKi9cbiAgICBpZiAobWVzc2FnZS53aWR0aCAhPT0gMClcbiAgICAgIHdyaXRlci50YWcoMSwgV2lyZVR5cGUuVmFyaW50KS51aW50MzIobWVzc2FnZS53aWR0aCk7XG4gICAgLyogdWludDMyIGhlaWdodCA9IDI7ICovXG4gICAgaWYgKG1lc3NhZ2UuaGVpZ2h0ICE9PSAwKVxuICAgICAgd3JpdGVyLnRhZygyLCBXaXJlVHlwZS5WYXJpbnQpLnVpbnQzMihtZXNzYWdlLmhlaWdodCk7XG4gICAgbGV0IHUgPSBvcHRpb25zLndyaXRlVW5rbm93bkZpZWxkcztcbiAgICBpZiAodSAhPT0gZmFsc2UpXG4gICAgICAodSA9PSB0cnVlID8gVW5rbm93bkZpZWxkSGFuZGxlci5vbldyaXRlIDogdSkoXG4gICAgICAgIHRoaXMudHlwZU5hbWUsXG4gICAgICAgIG1lc3NhZ2UsXG4gICAgICAgIHdyaXRlcixcbiAgICAgICk7XG4gICAgcmV0dXJuIHdyaXRlcjtcbiAgfVxufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIE1lc3NhZ2VUeXBlIGZvciBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUubW9kZWxzLlZpZGVvRGltZW5zaW9uXG4gKi9cbmV4cG9ydCBjb25zdCBWaWRlb0RpbWVuc2lvbiA9IG5ldyBWaWRlb0RpbWVuc2lvbiRUeXBlKCk7XG4vLyBAZ2VuZXJhdGVkIG1lc3NhZ2UgdHlwZSB3aXRoIHJlZmxlY3Rpb24gaW5mb3JtYXRpb24sIG1heSBwcm92aWRlIHNwZWVkIG9wdGltaXplZCBtZXRob2RzXG5jbGFzcyBWaWRlb0xheWVyJFR5cGUgZXh0ZW5kcyBNZXNzYWdlVHlwZTxWaWRlb0xheWVyPiB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCdzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5WaWRlb0xheWVyJywgW1xuICAgICAgeyBubzogMSwgbmFtZTogJ3JpZCcsIGtpbmQ6ICdzY2FsYXInLCBUOiA5IC8qU2NhbGFyVHlwZS5TVFJJTkcqLyB9LFxuICAgICAge1xuICAgICAgICBubzogMixcbiAgICAgICAgbmFtZTogJ3ZpZGVvX2RpbWVuc2lvbicsXG4gICAgICAgIGtpbmQ6ICdtZXNzYWdlJyxcbiAgICAgICAgVDogKCkgPT4gVmlkZW9EaW1lbnNpb24sXG4gICAgICB9LFxuICAgICAgeyBubzogNCwgbmFtZTogJ2JpdHJhdGUnLCBraW5kOiAnc2NhbGFyJywgVDogMTMgLypTY2FsYXJUeXBlLlVJTlQzMiovIH0sXG4gICAgICB7IG5vOiA1LCBuYW1lOiAnZnBzJywga2luZDogJ3NjYWxhcicsIFQ6IDEzIC8qU2NhbGFyVHlwZS5VSU5UMzIqLyB9LFxuICAgICAge1xuICAgICAgICBubzogNixcbiAgICAgICAgbmFtZTogJ3F1YWxpdHknLFxuICAgICAgICBraW5kOiAnZW51bScsXG4gICAgICAgIFQ6ICgpID0+IFtcbiAgICAgICAgICAnc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuVmlkZW9RdWFsaXR5JyxcbiAgICAgICAgICBWaWRlb1F1YWxpdHksXG4gICAgICAgICAgJ1ZJREVPX1FVQUxJVFlfJyxcbiAgICAgICAgXSxcbiAgICAgIH0sXG4gICAgXSk7XG4gIH1cbiAgY3JlYXRlKHZhbHVlPzogUGFydGlhbE1lc3NhZ2U8VmlkZW9MYXllcj4pOiBWaWRlb0xheWVyIHtcbiAgICBjb25zdCBtZXNzYWdlID0gZ2xvYmFsVGhpcy5PYmplY3QuY3JlYXRlKHRoaXMubWVzc2FnZVByb3RvdHlwZSEpO1xuICAgIG1lc3NhZ2UucmlkID0gJyc7XG4gICAgbWVzc2FnZS5iaXRyYXRlID0gMDtcbiAgICBtZXNzYWdlLmZwcyA9IDA7XG4gICAgbWVzc2FnZS5xdWFsaXR5ID0gMDtcbiAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZClcbiAgICAgIHJlZmxlY3Rpb25NZXJnZVBhcnRpYWw8VmlkZW9MYXllcj4odGhpcywgbWVzc2FnZSwgdmFsdWUpO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG4gIGludGVybmFsQmluYXJ5UmVhZChcbiAgICByZWFkZXI6IElCaW5hcnlSZWFkZXIsXG4gICAgbGVuZ3RoOiBudW1iZXIsXG4gICAgb3B0aW9uczogQmluYXJ5UmVhZE9wdGlvbnMsXG4gICAgdGFyZ2V0PzogVmlkZW9MYXllcixcbiAgKTogVmlkZW9MYXllciB7XG4gICAgbGV0IG1lc3NhZ2UgPSB0YXJnZXQgPz8gdGhpcy5jcmVhdGUoKSxcbiAgICAgIGVuZCA9IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgIGxldCBbZmllbGRObywgd2lyZVR5cGVdID0gcmVhZGVyLnRhZygpO1xuICAgICAgc3dpdGNoIChmaWVsZE5vKSB7XG4gICAgICAgIGNhc2UgLyogc3RyaW5nIHJpZCAqLyAxOlxuICAgICAgICAgIG1lc3NhZ2UucmlkID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIC8qIHN0cmVhbS52aWRlby5zZnUubW9kZWxzLlZpZGVvRGltZW5zaW9uIHZpZGVvX2RpbWVuc2lvbiAqLyAyOlxuICAgICAgICAgIG1lc3NhZ2UudmlkZW9EaW1lbnNpb24gPSBWaWRlb0RpbWVuc2lvbi5pbnRlcm5hbEJpbmFyeVJlYWQoXG4gICAgICAgICAgICByZWFkZXIsXG4gICAgICAgICAgICByZWFkZXIudWludDMyKCksXG4gICAgICAgICAgICBvcHRpb25zLFxuICAgICAgICAgICAgbWVzc2FnZS52aWRlb0RpbWVuc2lvbixcbiAgICAgICAgICApO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIC8qIHVpbnQzMiBiaXRyYXRlICovIDQ6XG4gICAgICAgICAgbWVzc2FnZS5iaXRyYXRlID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIC8qIHVpbnQzMiBmcHMgKi8gNTpcbiAgICAgICAgICBtZXNzYWdlLmZwcyA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAvKiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5WaWRlb1F1YWxpdHkgcXVhbGl0eSAqLyA2OlxuICAgICAgICAgIG1lc3NhZ2UucXVhbGl0eSA9IHJlYWRlci5pbnQzMigpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGxldCB1ID0gb3B0aW9ucy5yZWFkVW5rbm93bkZpZWxkO1xuICAgICAgICAgIGlmICh1ID09PSAndGhyb3cnKVxuICAgICAgICAgICAgdGhyb3cgbmV3IGdsb2JhbFRoaXMuRXJyb3IoXG4gICAgICAgICAgICAgIGBVbmtub3duIGZpZWxkICR7ZmllbGROb30gKHdpcmUgdHlwZSAke3dpcmVUeXBlfSkgZm9yICR7dGhpcy50eXBlTmFtZX1gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICBsZXQgZCA9IHJlYWRlci5za2lwKHdpcmVUeXBlKTtcbiAgICAgICAgICBpZiAodSAhPT0gZmFsc2UpXG4gICAgICAgICAgICAodSA9PT0gdHJ1ZSA/IFVua25vd25GaWVsZEhhbmRsZXIub25SZWFkIDogdSkoXG4gICAgICAgICAgICAgIHRoaXMudHlwZU5hbWUsXG4gICAgICAgICAgICAgIG1lc3NhZ2UsXG4gICAgICAgICAgICAgIGZpZWxkTm8sXG4gICAgICAgICAgICAgIHdpcmVUeXBlLFxuICAgICAgICAgICAgICBkLFxuICAgICAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH1cbiAgaW50ZXJuYWxCaW5hcnlXcml0ZShcbiAgICBtZXNzYWdlOiBWaWRlb0xheWVyLFxuICAgIHdyaXRlcjogSUJpbmFyeVdyaXRlcixcbiAgICBvcHRpb25zOiBCaW5hcnlXcml0ZU9wdGlvbnMsXG4gICk6IElCaW5hcnlXcml0ZXIge1xuICAgIC8qIHN0cmluZyByaWQgPSAxOyAqL1xuICAgIGlmIChtZXNzYWdlLnJpZCAhPT0gJycpXG4gICAgICB3cml0ZXIudGFnKDEsIFdpcmVUeXBlLkxlbmd0aERlbGltaXRlZCkuc3RyaW5nKG1lc3NhZ2UucmlkKTtcbiAgICAvKiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5WaWRlb0RpbWVuc2lvbiB2aWRlb19kaW1lbnNpb24gPSAyOyAqL1xuICAgIGlmIChtZXNzYWdlLnZpZGVvRGltZW5zaW9uKVxuICAgICAgVmlkZW9EaW1lbnNpb24uaW50ZXJuYWxCaW5hcnlXcml0ZShcbiAgICAgICAgbWVzc2FnZS52aWRlb0RpbWVuc2lvbixcbiAgICAgICAgd3JpdGVyLnRhZygyLCBXaXJlVHlwZS5MZW5ndGhEZWxpbWl0ZWQpLmZvcmsoKSxcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICkuam9pbigpO1xuICAgIC8qIHVpbnQzMiBiaXRyYXRlID0gNDsgKi9cbiAgICBpZiAobWVzc2FnZS5iaXRyYXRlICE9PSAwKVxuICAgICAgd3JpdGVyLnRhZyg0LCBXaXJlVHlwZS5WYXJpbnQpLnVpbnQzMihtZXNzYWdlLmJpdHJhdGUpO1xuICAgIC8qIHVpbnQzMiBmcHMgPSA1OyAqL1xuICAgIGlmIChtZXNzYWdlLmZwcyAhPT0gMCkgd3JpdGVyLnRhZyg1LCBXaXJlVHlwZS5WYXJpbnQpLnVpbnQzMihtZXNzYWdlLmZwcyk7XG4gICAgLyogc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuVmlkZW9RdWFsaXR5IHF1YWxpdHkgPSA2OyAqL1xuICAgIGlmIChtZXNzYWdlLnF1YWxpdHkgIT09IDApXG4gICAgICB3cml0ZXIudGFnKDYsIFdpcmVUeXBlLlZhcmludCkuaW50MzIobWVzc2FnZS5xdWFsaXR5KTtcbiAgICBsZXQgdSA9IG9wdGlvbnMud3JpdGVVbmtub3duRmllbGRzO1xuICAgIGlmICh1ICE9PSBmYWxzZSlcbiAgICAgICh1ID09IHRydWUgPyBVbmtub3duRmllbGRIYW5kbGVyLm9uV3JpdGUgOiB1KShcbiAgICAgICAgdGhpcy50eXBlTmFtZSxcbiAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgd3JpdGVyLFxuICAgICAgKTtcbiAgICByZXR1cm4gd3JpdGVyO1xuICB9XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgTWVzc2FnZVR5cGUgZm9yIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuVmlkZW9MYXllclxuICovXG5leHBvcnQgY29uc3QgVmlkZW9MYXllciA9IG5ldyBWaWRlb0xheWVyJFR5cGUoKTtcbi8vIEBnZW5lcmF0ZWQgbWVzc2FnZSB0eXBlIHdpdGggcmVmbGVjdGlvbiBpbmZvcm1hdGlvbiwgbWF5IHByb3ZpZGUgc3BlZWQgb3B0aW1pemVkIG1ldGhvZHNcbmNsYXNzIENvZGVjJFR5cGUgZXh0ZW5kcyBNZXNzYWdlVHlwZTxDb2RlYz4ge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcignc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuQ29kZWMnLCBbXG4gICAgICB7XG4gICAgICAgIG5vOiAxLFxuICAgICAgICBuYW1lOiAncGF5bG9hZF90eXBlJyxcbiAgICAgICAga2luZDogJ3NjYWxhcicsXG4gICAgICAgIFQ6IDEzIC8qU2NhbGFyVHlwZS5VSU5UMzIqLyxcbiAgICAgIH0sXG4gICAgICB7IG5vOiAyLCBuYW1lOiAnbmFtZScsIGtpbmQ6ICdzY2FsYXInLCBUOiA5IC8qU2NhbGFyVHlwZS5TVFJJTkcqLyB9LFxuICAgICAgeyBubzogMywgbmFtZTogJ2ZtdHBfbGluZScsIGtpbmQ6ICdzY2FsYXInLCBUOiA5IC8qU2NhbGFyVHlwZS5TVFJJTkcqLyB9LFxuICAgICAge1xuICAgICAgICBubzogNCxcbiAgICAgICAgbmFtZTogJ2Nsb2NrX3JhdGUnLFxuICAgICAgICBraW5kOiAnc2NhbGFyJyxcbiAgICAgICAgVDogMTMgLypTY2FsYXJUeXBlLlVJTlQzMiovLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbm86IDUsXG4gICAgICAgIG5hbWU6ICdlbmNvZGluZ19wYXJhbWV0ZXJzJyxcbiAgICAgICAga2luZDogJ3NjYWxhcicsXG4gICAgICAgIFQ6IDkgLypTY2FsYXJUeXBlLlNUUklORyovLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbm86IDYsXG4gICAgICAgIG5hbWU6ICdmZWVkYmFja3MnLFxuICAgICAgICBraW5kOiAnc2NhbGFyJyxcbiAgICAgICAgcmVwZWF0OiAyIC8qUmVwZWF0VHlwZS5VTlBBQ0tFRCovLFxuICAgICAgICBUOiA5IC8qU2NhbGFyVHlwZS5TVFJJTkcqLyxcbiAgICAgIH0sXG4gICAgXSk7XG4gIH1cbiAgY3JlYXRlKHZhbHVlPzogUGFydGlhbE1lc3NhZ2U8Q29kZWM+KTogQ29kZWMge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBnbG9iYWxUaGlzLk9iamVjdC5jcmVhdGUodGhpcy5tZXNzYWdlUHJvdG90eXBlISk7XG4gICAgbWVzc2FnZS5wYXlsb2FkVHlwZSA9IDA7XG4gICAgbWVzc2FnZS5uYW1lID0gJyc7XG4gICAgbWVzc2FnZS5mbXRwTGluZSA9ICcnO1xuICAgIG1lc3NhZ2UuY2xvY2tSYXRlID0gMDtcbiAgICBtZXNzYWdlLmVuY29kaW5nUGFyYW1ldGVycyA9ICcnO1xuICAgIG1lc3NhZ2UuZmVlZGJhY2tzID0gW107XG4gICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpXG4gICAgICByZWZsZWN0aW9uTWVyZ2VQYXJ0aWFsPENvZGVjPih0aGlzLCBtZXNzYWdlLCB2YWx1ZSk7XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH1cbiAgaW50ZXJuYWxCaW5hcnlSZWFkKFxuICAgIHJlYWRlcjogSUJpbmFyeVJlYWRlcixcbiAgICBsZW5ndGg6IG51bWJlcixcbiAgICBvcHRpb25zOiBCaW5hcnlSZWFkT3B0aW9ucyxcbiAgICB0YXJnZXQ/OiBDb2RlYyxcbiAgKTogQ29kZWMge1xuICAgIGxldCBtZXNzYWdlID0gdGFyZ2V0ID8/IHRoaXMuY3JlYXRlKCksXG4gICAgICBlbmQgPSByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBsZXQgW2ZpZWxkTm8sIHdpcmVUeXBlXSA9IHJlYWRlci50YWcoKTtcbiAgICAgIHN3aXRjaCAoZmllbGRObykge1xuICAgICAgICBjYXNlIC8qIHVpbnQzMiBwYXlsb2FkX3R5cGUgKi8gMTpcbiAgICAgICAgICBtZXNzYWdlLnBheWxvYWRUeXBlID0gcmVhZGVyLnVpbnQzMigpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIC8qIHN0cmluZyBuYW1lICovIDI6XG4gICAgICAgICAgbWVzc2FnZS5uYW1lID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIC8qIHN0cmluZyBmbXRwX2xpbmUgKi8gMzpcbiAgICAgICAgICBtZXNzYWdlLmZtdHBMaW5lID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIC8qIHVpbnQzMiBjbG9ja19yYXRlICovIDQ6XG4gICAgICAgICAgbWVzc2FnZS5jbG9ja1JhdGUgPSByZWFkZXIudWludDMyKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgLyogc3RyaW5nIGVuY29kaW5nX3BhcmFtZXRlcnMgKi8gNTpcbiAgICAgICAgICBtZXNzYWdlLmVuY29kaW5nUGFyYW1ldGVycyA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAvKiByZXBlYXRlZCBzdHJpbmcgZmVlZGJhY2tzICovIDY6XG4gICAgICAgICAgbWVzc2FnZS5mZWVkYmFja3MucHVzaChyZWFkZXIuc3RyaW5nKCkpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGxldCB1ID0gb3B0aW9ucy5yZWFkVW5rbm93bkZpZWxkO1xuICAgICAgICAgIGlmICh1ID09PSAndGhyb3cnKVxuICAgICAgICAgICAgdGhyb3cgbmV3IGdsb2JhbFRoaXMuRXJyb3IoXG4gICAgICAgICAgICAgIGBVbmtub3duIGZpZWxkICR7ZmllbGROb30gKHdpcmUgdHlwZSAke3dpcmVUeXBlfSkgZm9yICR7dGhpcy50eXBlTmFtZX1gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICBsZXQgZCA9IHJlYWRlci5za2lwKHdpcmVUeXBlKTtcbiAgICAgICAgICBpZiAodSAhPT0gZmFsc2UpXG4gICAgICAgICAgICAodSA9PT0gdHJ1ZSA/IFVua25vd25GaWVsZEhhbmRsZXIub25SZWFkIDogdSkoXG4gICAgICAgICAgICAgIHRoaXMudHlwZU5hbWUsXG4gICAgICAgICAgICAgIG1lc3NhZ2UsXG4gICAgICAgICAgICAgIGZpZWxkTm8sXG4gICAgICAgICAgICAgIHdpcmVUeXBlLFxuICAgICAgICAgICAgICBkLFxuICAgICAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH1cbiAgaW50ZXJuYWxCaW5hcnlXcml0ZShcbiAgICBtZXNzYWdlOiBDb2RlYyxcbiAgICB3cml0ZXI6IElCaW5hcnlXcml0ZXIsXG4gICAgb3B0aW9uczogQmluYXJ5V3JpdGVPcHRpb25zLFxuICApOiBJQmluYXJ5V3JpdGVyIHtcbiAgICAvKiB1aW50MzIgcGF5bG9hZF90eXBlID0gMTsgKi9cbiAgICBpZiAobWVzc2FnZS5wYXlsb2FkVHlwZSAhPT0gMClcbiAgICAgIHdyaXRlci50YWcoMSwgV2lyZVR5cGUuVmFyaW50KS51aW50MzIobWVzc2FnZS5wYXlsb2FkVHlwZSk7XG4gICAgLyogc3RyaW5nIG5hbWUgPSAyOyAqL1xuICAgIGlmIChtZXNzYWdlLm5hbWUgIT09ICcnKVxuICAgICAgd3JpdGVyLnRhZygyLCBXaXJlVHlwZS5MZW5ndGhEZWxpbWl0ZWQpLnN0cmluZyhtZXNzYWdlLm5hbWUpO1xuICAgIC8qIHN0cmluZyBmbXRwX2xpbmUgPSAzOyAqL1xuICAgIGlmIChtZXNzYWdlLmZtdHBMaW5lICE9PSAnJylcbiAgICAgIHdyaXRlci50YWcoMywgV2lyZVR5cGUuTGVuZ3RoRGVsaW1pdGVkKS5zdHJpbmcobWVzc2FnZS5mbXRwTGluZSk7XG4gICAgLyogdWludDMyIGNsb2NrX3JhdGUgPSA0OyAqL1xuICAgIGlmIChtZXNzYWdlLmNsb2NrUmF0ZSAhPT0gMClcbiAgICAgIHdyaXRlci50YWcoNCwgV2lyZVR5cGUuVmFyaW50KS51aW50MzIobWVzc2FnZS5jbG9ja1JhdGUpO1xuICAgIC8qIHN0cmluZyBlbmNvZGluZ19wYXJhbWV0ZXJzID0gNTsgKi9cbiAgICBpZiAobWVzc2FnZS5lbmNvZGluZ1BhcmFtZXRlcnMgIT09ICcnKVxuICAgICAgd3JpdGVyXG4gICAgICAgIC50YWcoNSwgV2lyZVR5cGUuTGVuZ3RoRGVsaW1pdGVkKVxuICAgICAgICAuc3RyaW5nKG1lc3NhZ2UuZW5jb2RpbmdQYXJhbWV0ZXJzKTtcbiAgICAvKiByZXBlYXRlZCBzdHJpbmcgZmVlZGJhY2tzID0gNjsgKi9cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1lc3NhZ2UuZmVlZGJhY2tzLmxlbmd0aDsgaSsrKVxuICAgICAgd3JpdGVyLnRhZyg2LCBXaXJlVHlwZS5MZW5ndGhEZWxpbWl0ZWQpLnN0cmluZyhtZXNzYWdlLmZlZWRiYWNrc1tpXSk7XG4gICAgbGV0IHUgPSBvcHRpb25zLndyaXRlVW5rbm93bkZpZWxkcztcbiAgICBpZiAodSAhPT0gZmFsc2UpXG4gICAgICAodSA9PSB0cnVlID8gVW5rbm93bkZpZWxkSGFuZGxlci5vbldyaXRlIDogdSkoXG4gICAgICAgIHRoaXMudHlwZU5hbWUsXG4gICAgICAgIG1lc3NhZ2UsXG4gICAgICAgIHdyaXRlcixcbiAgICAgICk7XG4gICAgcmV0dXJuIHdyaXRlcjtcbiAgfVxufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIE1lc3NhZ2VUeXBlIGZvciBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUubW9kZWxzLkNvZGVjXG4gKi9cbmV4cG9ydCBjb25zdCBDb2RlYyA9IG5ldyBDb2RlYyRUeXBlKCk7XG4vLyBAZ2VuZXJhdGVkIG1lc3NhZ2UgdHlwZSB3aXRoIHJlZmxlY3Rpb24gaW5mb3JtYXRpb24sIG1heSBwcm92aWRlIHNwZWVkIG9wdGltaXplZCBtZXRob2RzXG5jbGFzcyBJQ0VUcmlja2xlJFR5cGUgZXh0ZW5kcyBNZXNzYWdlVHlwZTxJQ0VUcmlja2xlPiB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCdzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5JQ0VUcmlja2xlJywgW1xuICAgICAge1xuICAgICAgICBubzogMSxcbiAgICAgICAgbmFtZTogJ3BlZXJfdHlwZScsXG4gICAgICAgIGtpbmQ6ICdlbnVtJyxcbiAgICAgICAgVDogKCkgPT4gWydzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5QZWVyVHlwZScsIFBlZXJUeXBlLCAnUEVFUl9UWVBFXyddLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbm86IDIsXG4gICAgICAgIG5hbWU6ICdpY2VfY2FuZGlkYXRlJyxcbiAgICAgICAga2luZDogJ3NjYWxhcicsXG4gICAgICAgIFQ6IDkgLypTY2FsYXJUeXBlLlNUUklORyovLFxuICAgICAgfSxcbiAgICAgIHsgbm86IDMsIG5hbWU6ICdzZXNzaW9uX2lkJywga2luZDogJ3NjYWxhcicsIFQ6IDkgLypTY2FsYXJUeXBlLlNUUklORyovIH0sXG4gICAgXSk7XG4gIH1cbiAgY3JlYXRlKHZhbHVlPzogUGFydGlhbE1lc3NhZ2U8SUNFVHJpY2tsZT4pOiBJQ0VUcmlja2xlIHtcbiAgICBjb25zdCBtZXNzYWdlID0gZ2xvYmFsVGhpcy5PYmplY3QuY3JlYXRlKHRoaXMubWVzc2FnZVByb3RvdHlwZSEpO1xuICAgIG1lc3NhZ2UucGVlclR5cGUgPSAwO1xuICAgIG1lc3NhZ2UuaWNlQ2FuZGlkYXRlID0gJyc7XG4gICAgbWVzc2FnZS5zZXNzaW9uSWQgPSAnJztcbiAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZClcbiAgICAgIHJlZmxlY3Rpb25NZXJnZVBhcnRpYWw8SUNFVHJpY2tsZT4odGhpcywgbWVzc2FnZSwgdmFsdWUpO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG4gIGludGVybmFsQmluYXJ5UmVhZChcbiAgICByZWFkZXI6IElCaW5hcnlSZWFkZXIsXG4gICAgbGVuZ3RoOiBudW1iZXIsXG4gICAgb3B0aW9uczogQmluYXJ5UmVhZE9wdGlvbnMsXG4gICAgdGFyZ2V0PzogSUNFVHJpY2tsZSxcbiAgKTogSUNFVHJpY2tsZSB7XG4gICAgbGV0IG1lc3NhZ2UgPSB0YXJnZXQgPz8gdGhpcy5jcmVhdGUoKSxcbiAgICAgIGVuZCA9IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgIGxldCBbZmllbGRObywgd2lyZVR5cGVdID0gcmVhZGVyLnRhZygpO1xuICAgICAgc3dpdGNoIChmaWVsZE5vKSB7XG4gICAgICAgIGNhc2UgLyogc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuUGVlclR5cGUgcGVlcl90eXBlICovIDE6XG4gICAgICAgICAgbWVzc2FnZS5wZWVyVHlwZSA9IHJlYWRlci5pbnQzMigpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIC8qIHN0cmluZyBpY2VfY2FuZGlkYXRlICovIDI6XG4gICAgICAgICAgbWVzc2FnZS5pY2VDYW5kaWRhdGUgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgLyogc3RyaW5nIHNlc3Npb25faWQgKi8gMzpcbiAgICAgICAgICBtZXNzYWdlLnNlc3Npb25JZCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBsZXQgdSA9IG9wdGlvbnMucmVhZFVua25vd25GaWVsZDtcbiAgICAgICAgICBpZiAodSA9PT0gJ3Rocm93JylcbiAgICAgICAgICAgIHRocm93IG5ldyBnbG9iYWxUaGlzLkVycm9yKFxuICAgICAgICAgICAgICBgVW5rbm93biBmaWVsZCAke2ZpZWxkTm99ICh3aXJlIHR5cGUgJHt3aXJlVHlwZX0pIGZvciAke3RoaXMudHlwZU5hbWV9YCxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgbGV0IGQgPSByZWFkZXIuc2tpcCh3aXJlVHlwZSk7XG4gICAgICAgICAgaWYgKHUgIT09IGZhbHNlKVxuICAgICAgICAgICAgKHUgPT09IHRydWUgPyBVbmtub3duRmllbGRIYW5kbGVyLm9uUmVhZCA6IHUpKFxuICAgICAgICAgICAgICB0aGlzLnR5cGVOYW1lLFxuICAgICAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICAgICAgICBmaWVsZE5vLFxuICAgICAgICAgICAgICB3aXJlVHlwZSxcbiAgICAgICAgICAgICAgZCxcbiAgICAgICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG4gIGludGVybmFsQmluYXJ5V3JpdGUoXG4gICAgbWVzc2FnZTogSUNFVHJpY2tsZSxcbiAgICB3cml0ZXI6IElCaW5hcnlXcml0ZXIsXG4gICAgb3B0aW9uczogQmluYXJ5V3JpdGVPcHRpb25zLFxuICApOiBJQmluYXJ5V3JpdGVyIHtcbiAgICAvKiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5QZWVyVHlwZSBwZWVyX3R5cGUgPSAxOyAqL1xuICAgIGlmIChtZXNzYWdlLnBlZXJUeXBlICE9PSAwKVxuICAgICAgd3JpdGVyLnRhZygxLCBXaXJlVHlwZS5WYXJpbnQpLmludDMyKG1lc3NhZ2UucGVlclR5cGUpO1xuICAgIC8qIHN0cmluZyBpY2VfY2FuZGlkYXRlID0gMjsgKi9cbiAgICBpZiAobWVzc2FnZS5pY2VDYW5kaWRhdGUgIT09ICcnKVxuICAgICAgd3JpdGVyLnRhZygyLCBXaXJlVHlwZS5MZW5ndGhEZWxpbWl0ZWQpLnN0cmluZyhtZXNzYWdlLmljZUNhbmRpZGF0ZSk7XG4gICAgLyogc3RyaW5nIHNlc3Npb25faWQgPSAzOyAqL1xuICAgIGlmIChtZXNzYWdlLnNlc3Npb25JZCAhPT0gJycpXG4gICAgICB3cml0ZXIudGFnKDMsIFdpcmVUeXBlLkxlbmd0aERlbGltaXRlZCkuc3RyaW5nKG1lc3NhZ2Uuc2Vzc2lvbklkKTtcbiAgICBsZXQgdSA9IG9wdGlvbnMud3JpdGVVbmtub3duRmllbGRzO1xuICAgIGlmICh1ICE9PSBmYWxzZSlcbiAgICAgICh1ID09IHRydWUgPyBVbmtub3duRmllbGRIYW5kbGVyLm9uV3JpdGUgOiB1KShcbiAgICAgICAgdGhpcy50eXBlTmFtZSxcbiAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgd3JpdGVyLFxuICAgICAgKTtcbiAgICByZXR1cm4gd3JpdGVyO1xuICB9XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgTWVzc2FnZVR5cGUgZm9yIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuSUNFVHJpY2tsZVxuICovXG5leHBvcnQgY29uc3QgSUNFVHJpY2tsZSA9IG5ldyBJQ0VUcmlja2xlJFR5cGUoKTtcbi8vIEBnZW5lcmF0ZWQgbWVzc2FnZSB0eXBlIHdpdGggcmVmbGVjdGlvbiBpbmZvcm1hdGlvbiwgbWF5IHByb3ZpZGUgc3BlZWQgb3B0aW1pemVkIG1ldGhvZHNcbmNsYXNzIFRyYWNrSW5mbyRUeXBlIGV4dGVuZHMgTWVzc2FnZVR5cGU8VHJhY2tJbmZvPiB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCdzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5UcmFja0luZm8nLCBbXG4gICAgICB7IG5vOiAxLCBuYW1lOiAndHJhY2tfaWQnLCBraW5kOiAnc2NhbGFyJywgVDogOSAvKlNjYWxhclR5cGUuU1RSSU5HKi8gfSxcbiAgICAgIHtcbiAgICAgICAgbm86IDIsXG4gICAgICAgIG5hbWU6ICd0cmFja190eXBlJyxcbiAgICAgICAga2luZDogJ2VudW0nLFxuICAgICAgICBUOiAoKSA9PiBbXG4gICAgICAgICAgJ3N0cmVhbS52aWRlby5zZnUubW9kZWxzLlRyYWNrVHlwZScsXG4gICAgICAgICAgVHJhY2tUeXBlLFxuICAgICAgICAgICdUUkFDS19UWVBFXycsXG4gICAgICAgIF0sXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBubzogNSxcbiAgICAgICAgbmFtZTogJ2xheWVycycsXG4gICAgICAgIGtpbmQ6ICdtZXNzYWdlJyxcbiAgICAgICAgcmVwZWF0OiAxIC8qUmVwZWF0VHlwZS5QQUNLRUQqLyxcbiAgICAgICAgVDogKCkgPT4gVmlkZW9MYXllcixcbiAgICAgIH0sXG4gICAgICB7IG5vOiA2LCBuYW1lOiAnbWlkJywga2luZDogJ3NjYWxhcicsIFQ6IDkgLypTY2FsYXJUeXBlLlNUUklORyovIH0sXG4gICAgICB7IG5vOiA3LCBuYW1lOiAnZHR4Jywga2luZDogJ3NjYWxhcicsIFQ6IDggLypTY2FsYXJUeXBlLkJPT0wqLyB9LFxuICAgICAgeyBubzogOCwgbmFtZTogJ3N0ZXJlbycsIGtpbmQ6ICdzY2FsYXInLCBUOiA4IC8qU2NhbGFyVHlwZS5CT09MKi8gfSxcbiAgICAgIHsgbm86IDksIG5hbWU6ICdyZWQnLCBraW5kOiAnc2NhbGFyJywgVDogOCAvKlNjYWxhclR5cGUuQk9PTCovIH0sXG4gICAgXSk7XG4gIH1cbiAgY3JlYXRlKHZhbHVlPzogUGFydGlhbE1lc3NhZ2U8VHJhY2tJbmZvPik6IFRyYWNrSW5mbyB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGdsb2JhbFRoaXMuT2JqZWN0LmNyZWF0ZSh0aGlzLm1lc3NhZ2VQcm90b3R5cGUhKTtcbiAgICBtZXNzYWdlLnRyYWNrSWQgPSAnJztcbiAgICBtZXNzYWdlLnRyYWNrVHlwZSA9IDA7XG4gICAgbWVzc2FnZS5sYXllcnMgPSBbXTtcbiAgICBtZXNzYWdlLm1pZCA9ICcnO1xuICAgIG1lc3NhZ2UuZHR4ID0gZmFsc2U7XG4gICAgbWVzc2FnZS5zdGVyZW8gPSBmYWxzZTtcbiAgICBtZXNzYWdlLnJlZCA9IGZhbHNlO1xuICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKVxuICAgICAgcmVmbGVjdGlvbk1lcmdlUGFydGlhbDxUcmFja0luZm8+KHRoaXMsIG1lc3NhZ2UsIHZhbHVlKTtcbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxuICBpbnRlcm5hbEJpbmFyeVJlYWQoXG4gICAgcmVhZGVyOiBJQmluYXJ5UmVhZGVyLFxuICAgIGxlbmd0aDogbnVtYmVyLFxuICAgIG9wdGlvbnM6IEJpbmFyeVJlYWRPcHRpb25zLFxuICAgIHRhcmdldD86IFRyYWNrSW5mbyxcbiAgKTogVHJhY2tJbmZvIHtcbiAgICBsZXQgbWVzc2FnZSA9IHRhcmdldCA/PyB0aGlzLmNyZWF0ZSgpLFxuICAgICAgZW5kID0gcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgbGV0IFtmaWVsZE5vLCB3aXJlVHlwZV0gPSByZWFkZXIudGFnKCk7XG4gICAgICBzd2l0Y2ggKGZpZWxkTm8pIHtcbiAgICAgICAgY2FzZSAvKiBzdHJpbmcgdHJhY2tfaWQgKi8gMTpcbiAgICAgICAgICBtZXNzYWdlLnRyYWNrSWQgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgLyogc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuVHJhY2tUeXBlIHRyYWNrX3R5cGUgKi8gMjpcbiAgICAgICAgICBtZXNzYWdlLnRyYWNrVHlwZSA9IHJlYWRlci5pbnQzMigpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIC8qIHJlcGVhdGVkIHN0cmVhbS52aWRlby5zZnUubW9kZWxzLlZpZGVvTGF5ZXIgbGF5ZXJzICovIDU6XG4gICAgICAgICAgbWVzc2FnZS5sYXllcnMucHVzaChcbiAgICAgICAgICAgIFZpZGVvTGF5ZXIuaW50ZXJuYWxCaW5hcnlSZWFkKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpLCBvcHRpb25zKSxcbiAgICAgICAgICApO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIC8qIHN0cmluZyBtaWQgKi8gNjpcbiAgICAgICAgICBtZXNzYWdlLm1pZCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAvKiBib29sIGR0eCAqLyA3OlxuICAgICAgICAgIG1lc3NhZ2UuZHR4ID0gcmVhZGVyLmJvb2woKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAvKiBib29sIHN0ZXJlbyAqLyA4OlxuICAgICAgICAgIG1lc3NhZ2Uuc3RlcmVvID0gcmVhZGVyLmJvb2woKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAvKiBib29sIHJlZCAqLyA5OlxuICAgICAgICAgIG1lc3NhZ2UucmVkID0gcmVhZGVyLmJvb2woKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBsZXQgdSA9IG9wdGlvbnMucmVhZFVua25vd25GaWVsZDtcbiAgICAgICAgICBpZiAodSA9PT0gJ3Rocm93JylcbiAgICAgICAgICAgIHRocm93IG5ldyBnbG9iYWxUaGlzLkVycm9yKFxuICAgICAgICAgICAgICBgVW5rbm93biBmaWVsZCAke2ZpZWxkTm99ICh3aXJlIHR5cGUgJHt3aXJlVHlwZX0pIGZvciAke3RoaXMudHlwZU5hbWV9YCxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgbGV0IGQgPSByZWFkZXIuc2tpcCh3aXJlVHlwZSk7XG4gICAgICAgICAgaWYgKHUgIT09IGZhbHNlKVxuICAgICAgICAgICAgKHUgPT09IHRydWUgPyBVbmtub3duRmllbGRIYW5kbGVyLm9uUmVhZCA6IHUpKFxuICAgICAgICAgICAgICB0aGlzLnR5cGVOYW1lLFxuICAgICAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICAgICAgICBmaWVsZE5vLFxuICAgICAgICAgICAgICB3aXJlVHlwZSxcbiAgICAgICAgICAgICAgZCxcbiAgICAgICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG4gIGludGVybmFsQmluYXJ5V3JpdGUoXG4gICAgbWVzc2FnZTogVHJhY2tJbmZvLFxuICAgIHdyaXRlcjogSUJpbmFyeVdyaXRlcixcbiAgICBvcHRpb25zOiBCaW5hcnlXcml0ZU9wdGlvbnMsXG4gICk6IElCaW5hcnlXcml0ZXIge1xuICAgIC8qIHN0cmluZyB0cmFja19pZCA9IDE7ICovXG4gICAgaWYgKG1lc3NhZ2UudHJhY2tJZCAhPT0gJycpXG4gICAgICB3cml0ZXIudGFnKDEsIFdpcmVUeXBlLkxlbmd0aERlbGltaXRlZCkuc3RyaW5nKG1lc3NhZ2UudHJhY2tJZCk7XG4gICAgLyogc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuVHJhY2tUeXBlIHRyYWNrX3R5cGUgPSAyOyAqL1xuICAgIGlmIChtZXNzYWdlLnRyYWNrVHlwZSAhPT0gMClcbiAgICAgIHdyaXRlci50YWcoMiwgV2lyZVR5cGUuVmFyaW50KS5pbnQzMihtZXNzYWdlLnRyYWNrVHlwZSk7XG4gICAgLyogcmVwZWF0ZWQgc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuVmlkZW9MYXllciBsYXllcnMgPSA1OyAqL1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWVzc2FnZS5sYXllcnMubGVuZ3RoOyBpKyspXG4gICAgICBWaWRlb0xheWVyLmludGVybmFsQmluYXJ5V3JpdGUoXG4gICAgICAgIG1lc3NhZ2UubGF5ZXJzW2ldLFxuICAgICAgICB3cml0ZXIudGFnKDUsIFdpcmVUeXBlLkxlbmd0aERlbGltaXRlZCkuZm9yaygpLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgKS5qb2luKCk7XG4gICAgLyogc3RyaW5nIG1pZCA9IDY7ICovXG4gICAgaWYgKG1lc3NhZ2UubWlkICE9PSAnJylcbiAgICAgIHdyaXRlci50YWcoNiwgV2lyZVR5cGUuTGVuZ3RoRGVsaW1pdGVkKS5zdHJpbmcobWVzc2FnZS5taWQpO1xuICAgIC8qIGJvb2wgZHR4ID0gNzsgKi9cbiAgICBpZiAobWVzc2FnZS5kdHggIT09IGZhbHNlKSB3cml0ZXIudGFnKDcsIFdpcmVUeXBlLlZhcmludCkuYm9vbChtZXNzYWdlLmR0eCk7XG4gICAgLyogYm9vbCBzdGVyZW8gPSA4OyAqL1xuICAgIGlmIChtZXNzYWdlLnN0ZXJlbyAhPT0gZmFsc2UpXG4gICAgICB3cml0ZXIudGFnKDgsIFdpcmVUeXBlLlZhcmludCkuYm9vbChtZXNzYWdlLnN0ZXJlbyk7XG4gICAgLyogYm9vbCByZWQgPSA5OyAqL1xuICAgIGlmIChtZXNzYWdlLnJlZCAhPT0gZmFsc2UpIHdyaXRlci50YWcoOSwgV2lyZVR5cGUuVmFyaW50KS5ib29sKG1lc3NhZ2UucmVkKTtcbiAgICBsZXQgdSA9IG9wdGlvbnMud3JpdGVVbmtub3duRmllbGRzO1xuICAgIGlmICh1ICE9PSBmYWxzZSlcbiAgICAgICh1ID09IHRydWUgPyBVbmtub3duRmllbGRIYW5kbGVyLm9uV3JpdGUgOiB1KShcbiAgICAgICAgdGhpcy50eXBlTmFtZSxcbiAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgd3JpdGVyLFxuICAgICAgKTtcbiAgICByZXR1cm4gd3JpdGVyO1xuICB9XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgTWVzc2FnZVR5cGUgZm9yIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuVHJhY2tJbmZvXG4gKi9cbmV4cG9ydCBjb25zdCBUcmFja0luZm8gPSBuZXcgVHJhY2tJbmZvJFR5cGUoKTtcbi8vIEBnZW5lcmF0ZWQgbWVzc2FnZSB0eXBlIHdpdGggcmVmbGVjdGlvbiBpbmZvcm1hdGlvbiwgbWF5IHByb3ZpZGUgc3BlZWQgb3B0aW1pemVkIG1ldGhvZHNcbmNsYXNzIENhbGwkVHlwZSBleHRlbmRzIE1lc3NhZ2VUeXBlPENhbGw+IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoJ3N0cmVhbS52aWRlby5zZnUubW9kZWxzLkNhbGwnLCBbXG4gICAgICB7IG5vOiAxLCBuYW1lOiAndHlwZScsIGtpbmQ6ICdzY2FsYXInLCBUOiA5IC8qU2NhbGFyVHlwZS5TVFJJTkcqLyB9LFxuICAgICAgeyBubzogMiwgbmFtZTogJ2lkJywga2luZDogJ3NjYWxhcicsIFQ6IDkgLypTY2FsYXJUeXBlLlNUUklORyovIH0sXG4gICAgICB7XG4gICAgICAgIG5vOiAzLFxuICAgICAgICBuYW1lOiAnY3JlYXRlZF9ieV91c2VyX2lkJyxcbiAgICAgICAga2luZDogJ3NjYWxhcicsXG4gICAgICAgIFQ6IDkgLypTY2FsYXJUeXBlLlNUUklORyovLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbm86IDQsXG4gICAgICAgIG5hbWU6ICdob3N0X3VzZXJfaWQnLFxuICAgICAgICBraW5kOiAnc2NhbGFyJyxcbiAgICAgICAgVDogOSAvKlNjYWxhclR5cGUuU1RSSU5HKi8sXG4gICAgICB9LFxuICAgICAgeyBubzogNSwgbmFtZTogJ2N1c3RvbScsIGtpbmQ6ICdtZXNzYWdlJywgVDogKCkgPT4gU3RydWN0IH0sXG4gICAgICB7IG5vOiA2LCBuYW1lOiAnY3JlYXRlZF9hdCcsIGtpbmQ6ICdtZXNzYWdlJywgVDogKCkgPT4gVGltZXN0YW1wIH0sXG4gICAgICB7IG5vOiA3LCBuYW1lOiAndXBkYXRlZF9hdCcsIGtpbmQ6ICdtZXNzYWdlJywgVDogKCkgPT4gVGltZXN0YW1wIH0sXG4gICAgXSk7XG4gIH1cbiAgY3JlYXRlKHZhbHVlPzogUGFydGlhbE1lc3NhZ2U8Q2FsbD4pOiBDYWxsIHtcbiAgICBjb25zdCBtZXNzYWdlID0gZ2xvYmFsVGhpcy5PYmplY3QuY3JlYXRlKHRoaXMubWVzc2FnZVByb3RvdHlwZSEpO1xuICAgIG1lc3NhZ2UudHlwZSA9ICcnO1xuICAgIG1lc3NhZ2UuaWQgPSAnJztcbiAgICBtZXNzYWdlLmNyZWF0ZWRCeVVzZXJJZCA9ICcnO1xuICAgIG1lc3NhZ2UuaG9zdFVzZXJJZCA9ICcnO1xuICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSByZWZsZWN0aW9uTWVyZ2VQYXJ0aWFsPENhbGw+KHRoaXMsIG1lc3NhZ2UsIHZhbHVlKTtcbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxuICBpbnRlcm5hbEJpbmFyeVJlYWQoXG4gICAgcmVhZGVyOiBJQmluYXJ5UmVhZGVyLFxuICAgIGxlbmd0aDogbnVtYmVyLFxuICAgIG9wdGlvbnM6IEJpbmFyeVJlYWRPcHRpb25zLFxuICAgIHRhcmdldD86IENhbGwsXG4gICk6IENhbGwge1xuICAgIGxldCBtZXNzYWdlID0gdGFyZ2V0ID8/IHRoaXMuY3JlYXRlKCksXG4gICAgICBlbmQgPSByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBsZXQgW2ZpZWxkTm8sIHdpcmVUeXBlXSA9IHJlYWRlci50YWcoKTtcbiAgICAgIHN3aXRjaCAoZmllbGRObykge1xuICAgICAgICBjYXNlIC8qIHN0cmluZyB0eXBlICovIDE6XG4gICAgICAgICAgbWVzc2FnZS50eXBlID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIC8qIHN0cmluZyBpZCAqLyAyOlxuICAgICAgICAgIG1lc3NhZ2UuaWQgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgLyogc3RyaW5nIGNyZWF0ZWRfYnlfdXNlcl9pZCAqLyAzOlxuICAgICAgICAgIG1lc3NhZ2UuY3JlYXRlZEJ5VXNlcklkID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIC8qIHN0cmluZyBob3N0X3VzZXJfaWQgKi8gNDpcbiAgICAgICAgICBtZXNzYWdlLmhvc3RVc2VySWQgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgLyogZ29vZ2xlLnByb3RvYnVmLlN0cnVjdCBjdXN0b20gKi8gNTpcbiAgICAgICAgICBtZXNzYWdlLmN1c3RvbSA9IFN0cnVjdC5pbnRlcm5hbEJpbmFyeVJlYWQoXG4gICAgICAgICAgICByZWFkZXIsXG4gICAgICAgICAgICByZWFkZXIudWludDMyKCksXG4gICAgICAgICAgICBvcHRpb25zLFxuICAgICAgICAgICAgbWVzc2FnZS5jdXN0b20sXG4gICAgICAgICAgKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAvKiBnb29nbGUucHJvdG9idWYuVGltZXN0YW1wIGNyZWF0ZWRfYXQgKi8gNjpcbiAgICAgICAgICBtZXNzYWdlLmNyZWF0ZWRBdCA9IFRpbWVzdGFtcC5pbnRlcm5hbEJpbmFyeVJlYWQoXG4gICAgICAgICAgICByZWFkZXIsXG4gICAgICAgICAgICByZWFkZXIudWludDMyKCksXG4gICAgICAgICAgICBvcHRpb25zLFxuICAgICAgICAgICAgbWVzc2FnZS5jcmVhdGVkQXQsXG4gICAgICAgICAgKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAvKiBnb29nbGUucHJvdG9idWYuVGltZXN0YW1wIHVwZGF0ZWRfYXQgKi8gNzpcbiAgICAgICAgICBtZXNzYWdlLnVwZGF0ZWRBdCA9IFRpbWVzdGFtcC5pbnRlcm5hbEJpbmFyeVJlYWQoXG4gICAgICAgICAgICByZWFkZXIsXG4gICAgICAgICAgICByZWFkZXIudWludDMyKCksXG4gICAgICAgICAgICBvcHRpb25zLFxuICAgICAgICAgICAgbWVzc2FnZS51cGRhdGVkQXQsXG4gICAgICAgICAgKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBsZXQgdSA9IG9wdGlvbnMucmVhZFVua25vd25GaWVsZDtcbiAgICAgICAgICBpZiAodSA9PT0gJ3Rocm93JylcbiAgICAgICAgICAgIHRocm93IG5ldyBnbG9iYWxUaGlzLkVycm9yKFxuICAgICAgICAgICAgICBgVW5rbm93biBmaWVsZCAke2ZpZWxkTm99ICh3aXJlIHR5cGUgJHt3aXJlVHlwZX0pIGZvciAke3RoaXMudHlwZU5hbWV9YCxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgbGV0IGQgPSByZWFkZXIuc2tpcCh3aXJlVHlwZSk7XG4gICAgICAgICAgaWYgKHUgIT09IGZhbHNlKVxuICAgICAgICAgICAgKHUgPT09IHRydWUgPyBVbmtub3duRmllbGRIYW5kbGVyLm9uUmVhZCA6IHUpKFxuICAgICAgICAgICAgICB0aGlzLnR5cGVOYW1lLFxuICAgICAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICAgICAgICBmaWVsZE5vLFxuICAgICAgICAgICAgICB3aXJlVHlwZSxcbiAgICAgICAgICAgICAgZCxcbiAgICAgICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG4gIGludGVybmFsQmluYXJ5V3JpdGUoXG4gICAgbWVzc2FnZTogQ2FsbCxcbiAgICB3cml0ZXI6IElCaW5hcnlXcml0ZXIsXG4gICAgb3B0aW9uczogQmluYXJ5V3JpdGVPcHRpb25zLFxuICApOiBJQmluYXJ5V3JpdGVyIHtcbiAgICAvKiBzdHJpbmcgdHlwZSA9IDE7ICovXG4gICAgaWYgKG1lc3NhZ2UudHlwZSAhPT0gJycpXG4gICAgICB3cml0ZXIudGFnKDEsIFdpcmVUeXBlLkxlbmd0aERlbGltaXRlZCkuc3RyaW5nKG1lc3NhZ2UudHlwZSk7XG4gICAgLyogc3RyaW5nIGlkID0gMjsgKi9cbiAgICBpZiAobWVzc2FnZS5pZCAhPT0gJycpXG4gICAgICB3cml0ZXIudGFnKDIsIFdpcmVUeXBlLkxlbmd0aERlbGltaXRlZCkuc3RyaW5nKG1lc3NhZ2UuaWQpO1xuICAgIC8qIHN0cmluZyBjcmVhdGVkX2J5X3VzZXJfaWQgPSAzOyAqL1xuICAgIGlmIChtZXNzYWdlLmNyZWF0ZWRCeVVzZXJJZCAhPT0gJycpXG4gICAgICB3cml0ZXIudGFnKDMsIFdpcmVUeXBlLkxlbmd0aERlbGltaXRlZCkuc3RyaW5nKG1lc3NhZ2UuY3JlYXRlZEJ5VXNlcklkKTtcbiAgICAvKiBzdHJpbmcgaG9zdF91c2VyX2lkID0gNDsgKi9cbiAgICBpZiAobWVzc2FnZS5ob3N0VXNlcklkICE9PSAnJylcbiAgICAgIHdyaXRlci50YWcoNCwgV2lyZVR5cGUuTGVuZ3RoRGVsaW1pdGVkKS5zdHJpbmcobWVzc2FnZS5ob3N0VXNlcklkKTtcbiAgICAvKiBnb29nbGUucHJvdG9idWYuU3RydWN0IGN1c3RvbSA9IDU7ICovXG4gICAgaWYgKG1lc3NhZ2UuY3VzdG9tKVxuICAgICAgU3RydWN0LmludGVybmFsQmluYXJ5V3JpdGUoXG4gICAgICAgIG1lc3NhZ2UuY3VzdG9tLFxuICAgICAgICB3cml0ZXIudGFnKDUsIFdpcmVUeXBlLkxlbmd0aERlbGltaXRlZCkuZm9yaygpLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgKS5qb2luKCk7XG4gICAgLyogZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcCBjcmVhdGVkX2F0ID0gNjsgKi9cbiAgICBpZiAobWVzc2FnZS5jcmVhdGVkQXQpXG4gICAgICBUaW1lc3RhbXAuaW50ZXJuYWxCaW5hcnlXcml0ZShcbiAgICAgICAgbWVzc2FnZS5jcmVhdGVkQXQsXG4gICAgICAgIHdyaXRlci50YWcoNiwgV2lyZVR5cGUuTGVuZ3RoRGVsaW1pdGVkKS5mb3JrKCksXG4gICAgICAgIG9wdGlvbnMsXG4gICAgICApLmpvaW4oKTtcbiAgICAvKiBnb29nbGUucHJvdG9idWYuVGltZXN0YW1wIHVwZGF0ZWRfYXQgPSA3OyAqL1xuICAgIGlmIChtZXNzYWdlLnVwZGF0ZWRBdClcbiAgICAgIFRpbWVzdGFtcC5pbnRlcm5hbEJpbmFyeVdyaXRlKFxuICAgICAgICBtZXNzYWdlLnVwZGF0ZWRBdCxcbiAgICAgICAgd3JpdGVyLnRhZyg3LCBXaXJlVHlwZS5MZW5ndGhEZWxpbWl0ZWQpLmZvcmsoKSxcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICkuam9pbigpO1xuICAgIGxldCB1ID0gb3B0aW9ucy53cml0ZVVua25vd25GaWVsZHM7XG4gICAgaWYgKHUgIT09IGZhbHNlKVxuICAgICAgKHUgPT0gdHJ1ZSA/IFVua25vd25GaWVsZEhhbmRsZXIub25Xcml0ZSA6IHUpKFxuICAgICAgICB0aGlzLnR5cGVOYW1lLFxuICAgICAgICBtZXNzYWdlLFxuICAgICAgICB3cml0ZXIsXG4gICAgICApO1xuICAgIHJldHVybiB3cml0ZXI7XG4gIH1cbn1cbi8qKlxuICogQGdlbmVyYXRlZCBNZXNzYWdlVHlwZSBmb3IgcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5DYWxsXG4gKi9cbmV4cG9ydCBjb25zdCBDYWxsID0gbmV3IENhbGwkVHlwZSgpO1xuLy8gQGdlbmVyYXRlZCBtZXNzYWdlIHR5cGUgd2l0aCByZWZsZWN0aW9uIGluZm9ybWF0aW9uLCBtYXkgcHJvdmlkZSBzcGVlZCBvcHRpbWl6ZWQgbWV0aG9kc1xuY2xhc3MgRXJyb3IkVHlwZSBleHRlbmRzIE1lc3NhZ2VUeXBlPEVycm9yPiB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCdzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5FcnJvcicsIFtcbiAgICAgIHtcbiAgICAgICAgbm86IDEsXG4gICAgICAgIG5hbWU6ICdjb2RlJyxcbiAgICAgICAga2luZDogJ2VudW0nLFxuICAgICAgICBUOiAoKSA9PiBbXG4gICAgICAgICAgJ3N0cmVhbS52aWRlby5zZnUubW9kZWxzLkVycm9yQ29kZScsXG4gICAgICAgICAgRXJyb3JDb2RlLFxuICAgICAgICAgICdFUlJPUl9DT0RFXycsXG4gICAgICAgIF0sXG4gICAgICB9LFxuICAgICAgeyBubzogMiwgbmFtZTogJ21lc3NhZ2UnLCBraW5kOiAnc2NhbGFyJywgVDogOSAvKlNjYWxhclR5cGUuU1RSSU5HKi8gfSxcbiAgICAgIHsgbm86IDMsIG5hbWU6ICdzaG91bGRfcmV0cnknLCBraW5kOiAnc2NhbGFyJywgVDogOCAvKlNjYWxhclR5cGUuQk9PTCovIH0sXG4gICAgXSk7XG4gIH1cbiAgY3JlYXRlKHZhbHVlPzogUGFydGlhbE1lc3NhZ2U8RXJyb3I+KTogRXJyb3Ige1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBnbG9iYWxUaGlzLk9iamVjdC5jcmVhdGUodGhpcy5tZXNzYWdlUHJvdG90eXBlISk7XG4gICAgbWVzc2FnZS5jb2RlID0gMDtcbiAgICBtZXNzYWdlLm1lc3NhZ2UgPSAnJztcbiAgICBtZXNzYWdlLnNob3VsZFJldHJ5ID0gZmFsc2U7XG4gICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpXG4gICAgICByZWZsZWN0aW9uTWVyZ2VQYXJ0aWFsPEVycm9yPih0aGlzLCBtZXNzYWdlLCB2YWx1ZSk7XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH1cbiAgaW50ZXJuYWxCaW5hcnlSZWFkKFxuICAgIHJlYWRlcjogSUJpbmFyeVJlYWRlcixcbiAgICBsZW5ndGg6IG51bWJlcixcbiAgICBvcHRpb25zOiBCaW5hcnlSZWFkT3B0aW9ucyxcbiAgICB0YXJnZXQ/OiBFcnJvcixcbiAgKTogRXJyb3Ige1xuICAgIGxldCBtZXNzYWdlID0gdGFyZ2V0ID8/IHRoaXMuY3JlYXRlKCksXG4gICAgICBlbmQgPSByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBsZXQgW2ZpZWxkTm8sIHdpcmVUeXBlXSA9IHJlYWRlci50YWcoKTtcbiAgICAgIHN3aXRjaCAoZmllbGRObykge1xuICAgICAgICBjYXNlIC8qIHN0cmVhbS52aWRlby5zZnUubW9kZWxzLkVycm9yQ29kZSBjb2RlICovIDE6XG4gICAgICAgICAgbWVzc2FnZS5jb2RlID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgLyogc3RyaW5nIG1lc3NhZ2UgKi8gMjpcbiAgICAgICAgICBtZXNzYWdlLm1lc3NhZ2UgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgLyogYm9vbCBzaG91bGRfcmV0cnkgKi8gMzpcbiAgICAgICAgICBtZXNzYWdlLnNob3VsZFJldHJ5ID0gcmVhZGVyLmJvb2woKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBsZXQgdSA9IG9wdGlvbnMucmVhZFVua25vd25GaWVsZDtcbiAgICAgICAgICBpZiAodSA9PT0gJ3Rocm93JylcbiAgICAgICAgICAgIHRocm93IG5ldyBnbG9iYWxUaGlzLkVycm9yKFxuICAgICAgICAgICAgICBgVW5rbm93biBmaWVsZCAke2ZpZWxkTm99ICh3aXJlIHR5cGUgJHt3aXJlVHlwZX0pIGZvciAke3RoaXMudHlwZU5hbWV9YCxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgbGV0IGQgPSByZWFkZXIuc2tpcCh3aXJlVHlwZSk7XG4gICAgICAgICAgaWYgKHUgIT09IGZhbHNlKVxuICAgICAgICAgICAgKHUgPT09IHRydWUgPyBVbmtub3duRmllbGRIYW5kbGVyLm9uUmVhZCA6IHUpKFxuICAgICAgICAgICAgICB0aGlzLnR5cGVOYW1lLFxuICAgICAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICAgICAgICBmaWVsZE5vLFxuICAgICAgICAgICAgICB3aXJlVHlwZSxcbiAgICAgICAgICAgICAgZCxcbiAgICAgICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG4gIGludGVybmFsQmluYXJ5V3JpdGUoXG4gICAgbWVzc2FnZTogRXJyb3IsXG4gICAgd3JpdGVyOiBJQmluYXJ5V3JpdGVyLFxuICAgIG9wdGlvbnM6IEJpbmFyeVdyaXRlT3B0aW9ucyxcbiAgKTogSUJpbmFyeVdyaXRlciB7XG4gICAgLyogc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuRXJyb3JDb2RlIGNvZGUgPSAxOyAqL1xuICAgIGlmIChtZXNzYWdlLmNvZGUgIT09IDApIHdyaXRlci50YWcoMSwgV2lyZVR5cGUuVmFyaW50KS5pbnQzMihtZXNzYWdlLmNvZGUpO1xuICAgIC8qIHN0cmluZyBtZXNzYWdlID0gMjsgKi9cbiAgICBpZiAobWVzc2FnZS5tZXNzYWdlICE9PSAnJylcbiAgICAgIHdyaXRlci50YWcoMiwgV2lyZVR5cGUuTGVuZ3RoRGVsaW1pdGVkKS5zdHJpbmcobWVzc2FnZS5tZXNzYWdlKTtcbiAgICAvKiBib29sIHNob3VsZF9yZXRyeSA9IDM7ICovXG4gICAgaWYgKG1lc3NhZ2Uuc2hvdWxkUmV0cnkgIT09IGZhbHNlKVxuICAgICAgd3JpdGVyLnRhZygzLCBXaXJlVHlwZS5WYXJpbnQpLmJvb2wobWVzc2FnZS5zaG91bGRSZXRyeSk7XG4gICAgbGV0IHUgPSBvcHRpb25zLndyaXRlVW5rbm93bkZpZWxkcztcbiAgICBpZiAodSAhPT0gZmFsc2UpXG4gICAgICAodSA9PSB0cnVlID8gVW5rbm93bkZpZWxkSGFuZGxlci5vbldyaXRlIDogdSkoXG4gICAgICAgIHRoaXMudHlwZU5hbWUsXG4gICAgICAgIG1lc3NhZ2UsXG4gICAgICAgIHdyaXRlcixcbiAgICAgICk7XG4gICAgcmV0dXJuIHdyaXRlcjtcbiAgfVxufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIE1lc3NhZ2VUeXBlIGZvciBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUubW9kZWxzLkVycm9yXG4gKi9cbmV4cG9ydCBjb25zdCBFcnJvciA9IG5ldyBFcnJvciRUeXBlKCk7XG4vLyBAZ2VuZXJhdGVkIG1lc3NhZ2UgdHlwZSB3aXRoIHJlZmxlY3Rpb24gaW5mb3JtYXRpb24sIG1heSBwcm92aWRlIHNwZWVkIG9wdGltaXplZCBtZXRob2RzXG5jbGFzcyBDbGllbnREZXRhaWxzJFR5cGUgZXh0ZW5kcyBNZXNzYWdlVHlwZTxDbGllbnREZXRhaWxzPiB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCdzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5DbGllbnREZXRhaWxzJywgW1xuICAgICAgeyBubzogMSwgbmFtZTogJ3NkaycsIGtpbmQ6ICdtZXNzYWdlJywgVDogKCkgPT4gU2RrIH0sXG4gICAgICB7IG5vOiAyLCBuYW1lOiAnb3MnLCBraW5kOiAnbWVzc2FnZScsIFQ6ICgpID0+IE9TIH0sXG4gICAgICB7IG5vOiAzLCBuYW1lOiAnYnJvd3NlcicsIGtpbmQ6ICdtZXNzYWdlJywgVDogKCkgPT4gQnJvd3NlciB9LFxuICAgICAgeyBubzogNCwgbmFtZTogJ2RldmljZScsIGtpbmQ6ICdtZXNzYWdlJywgVDogKCkgPT4gRGV2aWNlIH0sXG4gICAgXSk7XG4gIH1cbiAgY3JlYXRlKHZhbHVlPzogUGFydGlhbE1lc3NhZ2U8Q2xpZW50RGV0YWlscz4pOiBDbGllbnREZXRhaWxzIHtcbiAgICBjb25zdCBtZXNzYWdlID0gZ2xvYmFsVGhpcy5PYmplY3QuY3JlYXRlKHRoaXMubWVzc2FnZVByb3RvdHlwZSEpO1xuICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKVxuICAgICAgcmVmbGVjdGlvbk1lcmdlUGFydGlhbDxDbGllbnREZXRhaWxzPih0aGlzLCBtZXNzYWdlLCB2YWx1ZSk7XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH1cbiAgaW50ZXJuYWxCaW5hcnlSZWFkKFxuICAgIHJlYWRlcjogSUJpbmFyeVJlYWRlcixcbiAgICBsZW5ndGg6IG51bWJlcixcbiAgICBvcHRpb25zOiBCaW5hcnlSZWFkT3B0aW9ucyxcbiAgICB0YXJnZXQ/OiBDbGllbnREZXRhaWxzLFxuICApOiBDbGllbnREZXRhaWxzIHtcbiAgICBsZXQgbWVzc2FnZSA9IHRhcmdldCA/PyB0aGlzLmNyZWF0ZSgpLFxuICAgICAgZW5kID0gcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgbGV0IFtmaWVsZE5vLCB3aXJlVHlwZV0gPSByZWFkZXIudGFnKCk7XG4gICAgICBzd2l0Y2ggKGZpZWxkTm8pIHtcbiAgICAgICAgY2FzZSAvKiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5TZGsgc2RrICovIDE6XG4gICAgICAgICAgbWVzc2FnZS5zZGsgPSBTZGsuaW50ZXJuYWxCaW5hcnlSZWFkKFxuICAgICAgICAgICAgcmVhZGVyLFxuICAgICAgICAgICAgcmVhZGVyLnVpbnQzMigpLFxuICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICAgIG1lc3NhZ2Uuc2RrLFxuICAgICAgICAgICk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgLyogc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuT1Mgb3MgKi8gMjpcbiAgICAgICAgICBtZXNzYWdlLm9zID0gT1MuaW50ZXJuYWxCaW5hcnlSZWFkKFxuICAgICAgICAgICAgcmVhZGVyLFxuICAgICAgICAgICAgcmVhZGVyLnVpbnQzMigpLFxuICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICAgIG1lc3NhZ2Uub3MsXG4gICAgICAgICAgKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAvKiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5Ccm93c2VyIGJyb3dzZXIgKi8gMzpcbiAgICAgICAgICBtZXNzYWdlLmJyb3dzZXIgPSBCcm93c2VyLmludGVybmFsQmluYXJ5UmVhZChcbiAgICAgICAgICAgIHJlYWRlcixcbiAgICAgICAgICAgIHJlYWRlci51aW50MzIoKSxcbiAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICBtZXNzYWdlLmJyb3dzZXIsXG4gICAgICAgICAgKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAvKiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5EZXZpY2UgZGV2aWNlICovIDQ6XG4gICAgICAgICAgbWVzc2FnZS5kZXZpY2UgPSBEZXZpY2UuaW50ZXJuYWxCaW5hcnlSZWFkKFxuICAgICAgICAgICAgcmVhZGVyLFxuICAgICAgICAgICAgcmVhZGVyLnVpbnQzMigpLFxuICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICAgIG1lc3NhZ2UuZGV2aWNlLFxuICAgICAgICAgICk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgbGV0IHUgPSBvcHRpb25zLnJlYWRVbmtub3duRmllbGQ7XG4gICAgICAgICAgaWYgKHUgPT09ICd0aHJvdycpXG4gICAgICAgICAgICB0aHJvdyBuZXcgZ2xvYmFsVGhpcy5FcnJvcihcbiAgICAgICAgICAgICAgYFVua25vd24gZmllbGQgJHtmaWVsZE5vfSAod2lyZSB0eXBlICR7d2lyZVR5cGV9KSBmb3IgJHt0aGlzLnR5cGVOYW1lfWAsXG4gICAgICAgICAgICApO1xuICAgICAgICAgIGxldCBkID0gcmVhZGVyLnNraXAod2lyZVR5cGUpO1xuICAgICAgICAgIGlmICh1ICE9PSBmYWxzZSlcbiAgICAgICAgICAgICh1ID09PSB0cnVlID8gVW5rbm93bkZpZWxkSGFuZGxlci5vblJlYWQgOiB1KShcbiAgICAgICAgICAgICAgdGhpcy50eXBlTmFtZSxcbiAgICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgICAgZmllbGRObyxcbiAgICAgICAgICAgICAgd2lyZVR5cGUsXG4gICAgICAgICAgICAgIGQsXG4gICAgICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxuICBpbnRlcm5hbEJpbmFyeVdyaXRlKFxuICAgIG1lc3NhZ2U6IENsaWVudERldGFpbHMsXG4gICAgd3JpdGVyOiBJQmluYXJ5V3JpdGVyLFxuICAgIG9wdGlvbnM6IEJpbmFyeVdyaXRlT3B0aW9ucyxcbiAgKTogSUJpbmFyeVdyaXRlciB7XG4gICAgLyogc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuU2RrIHNkayA9IDE7ICovXG4gICAgaWYgKG1lc3NhZ2Uuc2RrKVxuICAgICAgU2RrLmludGVybmFsQmluYXJ5V3JpdGUoXG4gICAgICAgIG1lc3NhZ2Uuc2RrLFxuICAgICAgICB3cml0ZXIudGFnKDEsIFdpcmVUeXBlLkxlbmd0aERlbGltaXRlZCkuZm9yaygpLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgKS5qb2luKCk7XG4gICAgLyogc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuT1Mgb3MgPSAyOyAqL1xuICAgIGlmIChtZXNzYWdlLm9zKVxuICAgICAgT1MuaW50ZXJuYWxCaW5hcnlXcml0ZShcbiAgICAgICAgbWVzc2FnZS5vcyxcbiAgICAgICAgd3JpdGVyLnRhZygyLCBXaXJlVHlwZS5MZW5ndGhEZWxpbWl0ZWQpLmZvcmsoKSxcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICkuam9pbigpO1xuICAgIC8qIHN0cmVhbS52aWRlby5zZnUubW9kZWxzLkJyb3dzZXIgYnJvd3NlciA9IDM7ICovXG4gICAgaWYgKG1lc3NhZ2UuYnJvd3NlcilcbiAgICAgIEJyb3dzZXIuaW50ZXJuYWxCaW5hcnlXcml0ZShcbiAgICAgICAgbWVzc2FnZS5icm93c2VyLFxuICAgICAgICB3cml0ZXIudGFnKDMsIFdpcmVUeXBlLkxlbmd0aERlbGltaXRlZCkuZm9yaygpLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgKS5qb2luKCk7XG4gICAgLyogc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuRGV2aWNlIGRldmljZSA9IDQ7ICovXG4gICAgaWYgKG1lc3NhZ2UuZGV2aWNlKVxuICAgICAgRGV2aWNlLmludGVybmFsQmluYXJ5V3JpdGUoXG4gICAgICAgIG1lc3NhZ2UuZGV2aWNlLFxuICAgICAgICB3cml0ZXIudGFnKDQsIFdpcmVUeXBlLkxlbmd0aERlbGltaXRlZCkuZm9yaygpLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgKS5qb2luKCk7XG4gICAgbGV0IHUgPSBvcHRpb25zLndyaXRlVW5rbm93bkZpZWxkcztcbiAgICBpZiAodSAhPT0gZmFsc2UpXG4gICAgICAodSA9PSB0cnVlID8gVW5rbm93bkZpZWxkSGFuZGxlci5vbldyaXRlIDogdSkoXG4gICAgICAgIHRoaXMudHlwZU5hbWUsXG4gICAgICAgIG1lc3NhZ2UsXG4gICAgICAgIHdyaXRlcixcbiAgICAgICk7XG4gICAgcmV0dXJuIHdyaXRlcjtcbiAgfVxufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIE1lc3NhZ2VUeXBlIGZvciBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUubW9kZWxzLkNsaWVudERldGFpbHNcbiAqL1xuZXhwb3J0IGNvbnN0IENsaWVudERldGFpbHMgPSBuZXcgQ2xpZW50RGV0YWlscyRUeXBlKCk7XG4vLyBAZ2VuZXJhdGVkIG1lc3NhZ2UgdHlwZSB3aXRoIHJlZmxlY3Rpb24gaW5mb3JtYXRpb24sIG1heSBwcm92aWRlIHNwZWVkIG9wdGltaXplZCBtZXRob2RzXG5jbGFzcyBTZGskVHlwZSBleHRlbmRzIE1lc3NhZ2VUeXBlPFNkaz4ge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcignc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuU2RrJywgW1xuICAgICAge1xuICAgICAgICBubzogMSxcbiAgICAgICAgbmFtZTogJ3R5cGUnLFxuICAgICAgICBraW5kOiAnZW51bScsXG4gICAgICAgIFQ6ICgpID0+IFsnc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuU2RrVHlwZScsIFNka1R5cGUsICdTREtfVFlQRV8nXSxcbiAgICAgIH0sXG4gICAgICB7IG5vOiAyLCBuYW1lOiAnbWFqb3InLCBraW5kOiAnc2NhbGFyJywgVDogOSAvKlNjYWxhclR5cGUuU1RSSU5HKi8gfSxcbiAgICAgIHsgbm86IDMsIG5hbWU6ICdtaW5vcicsIGtpbmQ6ICdzY2FsYXInLCBUOiA5IC8qU2NhbGFyVHlwZS5TVFJJTkcqLyB9LFxuICAgICAgeyBubzogNCwgbmFtZTogJ3BhdGNoJywga2luZDogJ3NjYWxhcicsIFQ6IDkgLypTY2FsYXJUeXBlLlNUUklORyovIH0sXG4gICAgXSk7XG4gIH1cbiAgY3JlYXRlKHZhbHVlPzogUGFydGlhbE1lc3NhZ2U8U2RrPik6IFNkayB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGdsb2JhbFRoaXMuT2JqZWN0LmNyZWF0ZSh0aGlzLm1lc3NhZ2VQcm90b3R5cGUhKTtcbiAgICBtZXNzYWdlLnR5cGUgPSAwO1xuICAgIG1lc3NhZ2UubWFqb3IgPSAnJztcbiAgICBtZXNzYWdlLm1pbm9yID0gJyc7XG4gICAgbWVzc2FnZS5wYXRjaCA9ICcnO1xuICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSByZWZsZWN0aW9uTWVyZ2VQYXJ0aWFsPFNkaz4odGhpcywgbWVzc2FnZSwgdmFsdWUpO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG4gIGludGVybmFsQmluYXJ5UmVhZChcbiAgICByZWFkZXI6IElCaW5hcnlSZWFkZXIsXG4gICAgbGVuZ3RoOiBudW1iZXIsXG4gICAgb3B0aW9uczogQmluYXJ5UmVhZE9wdGlvbnMsXG4gICAgdGFyZ2V0PzogU2RrLFxuICApOiBTZGsge1xuICAgIGxldCBtZXNzYWdlID0gdGFyZ2V0ID8/IHRoaXMuY3JlYXRlKCksXG4gICAgICBlbmQgPSByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBsZXQgW2ZpZWxkTm8sIHdpcmVUeXBlXSA9IHJlYWRlci50YWcoKTtcbiAgICAgIHN3aXRjaCAoZmllbGRObykge1xuICAgICAgICBjYXNlIC8qIHN0cmVhbS52aWRlby5zZnUubW9kZWxzLlNka1R5cGUgdHlwZSAqLyAxOlxuICAgICAgICAgIG1lc3NhZ2UudHlwZSA9IHJlYWRlci5pbnQzMigpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIC8qIHN0cmluZyBtYWpvciAqLyAyOlxuICAgICAgICAgIG1lc3NhZ2UubWFqb3IgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgLyogc3RyaW5nIG1pbm9yICovIDM6XG4gICAgICAgICAgbWVzc2FnZS5taW5vciA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAvKiBzdHJpbmcgcGF0Y2ggKi8gNDpcbiAgICAgICAgICBtZXNzYWdlLnBhdGNoID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGxldCB1ID0gb3B0aW9ucy5yZWFkVW5rbm93bkZpZWxkO1xuICAgICAgICAgIGlmICh1ID09PSAndGhyb3cnKVxuICAgICAgICAgICAgdGhyb3cgbmV3IGdsb2JhbFRoaXMuRXJyb3IoXG4gICAgICAgICAgICAgIGBVbmtub3duIGZpZWxkICR7ZmllbGROb30gKHdpcmUgdHlwZSAke3dpcmVUeXBlfSkgZm9yICR7dGhpcy50eXBlTmFtZX1gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICBsZXQgZCA9IHJlYWRlci5za2lwKHdpcmVUeXBlKTtcbiAgICAgICAgICBpZiAodSAhPT0gZmFsc2UpXG4gICAgICAgICAgICAodSA9PT0gdHJ1ZSA/IFVua25vd25GaWVsZEhhbmRsZXIub25SZWFkIDogdSkoXG4gICAgICAgICAgICAgIHRoaXMudHlwZU5hbWUsXG4gICAgICAgICAgICAgIG1lc3NhZ2UsXG4gICAgICAgICAgICAgIGZpZWxkTm8sXG4gICAgICAgICAgICAgIHdpcmVUeXBlLFxuICAgICAgICAgICAgICBkLFxuICAgICAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH1cbiAgaW50ZXJuYWxCaW5hcnlXcml0ZShcbiAgICBtZXNzYWdlOiBTZGssXG4gICAgd3JpdGVyOiBJQmluYXJ5V3JpdGVyLFxuICAgIG9wdGlvbnM6IEJpbmFyeVdyaXRlT3B0aW9ucyxcbiAgKTogSUJpbmFyeVdyaXRlciB7XG4gICAgLyogc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuU2RrVHlwZSB0eXBlID0gMTsgKi9cbiAgICBpZiAobWVzc2FnZS50eXBlICE9PSAwKSB3cml0ZXIudGFnKDEsIFdpcmVUeXBlLlZhcmludCkuaW50MzIobWVzc2FnZS50eXBlKTtcbiAgICAvKiBzdHJpbmcgbWFqb3IgPSAyOyAqL1xuICAgIGlmIChtZXNzYWdlLm1ham9yICE9PSAnJylcbiAgICAgIHdyaXRlci50YWcoMiwgV2lyZVR5cGUuTGVuZ3RoRGVsaW1pdGVkKS5zdHJpbmcobWVzc2FnZS5tYWpvcik7XG4gICAgLyogc3RyaW5nIG1pbm9yID0gMzsgKi9cbiAgICBpZiAobWVzc2FnZS5taW5vciAhPT0gJycpXG4gICAgICB3cml0ZXIudGFnKDMsIFdpcmVUeXBlLkxlbmd0aERlbGltaXRlZCkuc3RyaW5nKG1lc3NhZ2UubWlub3IpO1xuICAgIC8qIHN0cmluZyBwYXRjaCA9IDQ7ICovXG4gICAgaWYgKG1lc3NhZ2UucGF0Y2ggIT09ICcnKVxuICAgICAgd3JpdGVyLnRhZyg0LCBXaXJlVHlwZS5MZW5ndGhEZWxpbWl0ZWQpLnN0cmluZyhtZXNzYWdlLnBhdGNoKTtcbiAgICBsZXQgdSA9IG9wdGlvbnMud3JpdGVVbmtub3duRmllbGRzO1xuICAgIGlmICh1ICE9PSBmYWxzZSlcbiAgICAgICh1ID09IHRydWUgPyBVbmtub3duRmllbGRIYW5kbGVyLm9uV3JpdGUgOiB1KShcbiAgICAgICAgdGhpcy50eXBlTmFtZSxcbiAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgd3JpdGVyLFxuICAgICAgKTtcbiAgICByZXR1cm4gd3JpdGVyO1xuICB9XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgTWVzc2FnZVR5cGUgZm9yIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuU2RrXG4gKi9cbmV4cG9ydCBjb25zdCBTZGsgPSBuZXcgU2RrJFR5cGUoKTtcbi8vIEBnZW5lcmF0ZWQgbWVzc2FnZSB0eXBlIHdpdGggcmVmbGVjdGlvbiBpbmZvcm1hdGlvbiwgbWF5IHByb3ZpZGUgc3BlZWQgb3B0aW1pemVkIG1ldGhvZHNcbmNsYXNzIE9TJFR5cGUgZXh0ZW5kcyBNZXNzYWdlVHlwZTxPUz4ge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcignc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuT1MnLCBbXG4gICAgICB7IG5vOiAxLCBuYW1lOiAnbmFtZScsIGtpbmQ6ICdzY2FsYXInLCBUOiA5IC8qU2NhbGFyVHlwZS5TVFJJTkcqLyB9LFxuICAgICAgeyBubzogMiwgbmFtZTogJ3ZlcnNpb24nLCBraW5kOiAnc2NhbGFyJywgVDogOSAvKlNjYWxhclR5cGUuU1RSSU5HKi8gfSxcbiAgICAgIHtcbiAgICAgICAgbm86IDMsXG4gICAgICAgIG5hbWU6ICdhcmNoaXRlY3R1cmUnLFxuICAgICAgICBraW5kOiAnc2NhbGFyJyxcbiAgICAgICAgVDogOSAvKlNjYWxhclR5cGUuU1RSSU5HKi8sXG4gICAgICB9LFxuICAgIF0pO1xuICB9XG4gIGNyZWF0ZSh2YWx1ZT86IFBhcnRpYWxNZXNzYWdlPE9TPik6IE9TIHtcbiAgICBjb25zdCBtZXNzYWdlID0gZ2xvYmFsVGhpcy5PYmplY3QuY3JlYXRlKHRoaXMubWVzc2FnZVByb3RvdHlwZSEpO1xuICAgIG1lc3NhZ2UubmFtZSA9ICcnO1xuICAgIG1lc3NhZ2UudmVyc2lvbiA9ICcnO1xuICAgIG1lc3NhZ2UuYXJjaGl0ZWN0dXJlID0gJyc7XG4gICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHJlZmxlY3Rpb25NZXJnZVBhcnRpYWw8T1M+KHRoaXMsIG1lc3NhZ2UsIHZhbHVlKTtcbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxuICBpbnRlcm5hbEJpbmFyeVJlYWQoXG4gICAgcmVhZGVyOiBJQmluYXJ5UmVhZGVyLFxuICAgIGxlbmd0aDogbnVtYmVyLFxuICAgIG9wdGlvbnM6IEJpbmFyeVJlYWRPcHRpb25zLFxuICAgIHRhcmdldD86IE9TLFxuICApOiBPUyB7XG4gICAgbGV0IG1lc3NhZ2UgPSB0YXJnZXQgPz8gdGhpcy5jcmVhdGUoKSxcbiAgICAgIGVuZCA9IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgIGxldCBbZmllbGRObywgd2lyZVR5cGVdID0gcmVhZGVyLnRhZygpO1xuICAgICAgc3dpdGNoIChmaWVsZE5vKSB7XG4gICAgICAgIGNhc2UgLyogc3RyaW5nIG5hbWUgKi8gMTpcbiAgICAgICAgICBtZXNzYWdlLm5hbWUgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgLyogc3RyaW5nIHZlcnNpb24gKi8gMjpcbiAgICAgICAgICBtZXNzYWdlLnZlcnNpb24gPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgLyogc3RyaW5nIGFyY2hpdGVjdHVyZSAqLyAzOlxuICAgICAgICAgIG1lc3NhZ2UuYXJjaGl0ZWN0dXJlID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGxldCB1ID0gb3B0aW9ucy5yZWFkVW5rbm93bkZpZWxkO1xuICAgICAgICAgIGlmICh1ID09PSAndGhyb3cnKVxuICAgICAgICAgICAgdGhyb3cgbmV3IGdsb2JhbFRoaXMuRXJyb3IoXG4gICAgICAgICAgICAgIGBVbmtub3duIGZpZWxkICR7ZmllbGROb30gKHdpcmUgdHlwZSAke3dpcmVUeXBlfSkgZm9yICR7dGhpcy50eXBlTmFtZX1gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICBsZXQgZCA9IHJlYWRlci5za2lwKHdpcmVUeXBlKTtcbiAgICAgICAgICBpZiAodSAhPT0gZmFsc2UpXG4gICAgICAgICAgICAodSA9PT0gdHJ1ZSA/IFVua25vd25GaWVsZEhhbmRsZXIub25SZWFkIDogdSkoXG4gICAgICAgICAgICAgIHRoaXMudHlwZU5hbWUsXG4gICAgICAgICAgICAgIG1lc3NhZ2UsXG4gICAgICAgICAgICAgIGZpZWxkTm8sXG4gICAgICAgICAgICAgIHdpcmVUeXBlLFxuICAgICAgICAgICAgICBkLFxuICAgICAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH1cbiAgaW50ZXJuYWxCaW5hcnlXcml0ZShcbiAgICBtZXNzYWdlOiBPUyxcbiAgICB3cml0ZXI6IElCaW5hcnlXcml0ZXIsXG4gICAgb3B0aW9uczogQmluYXJ5V3JpdGVPcHRpb25zLFxuICApOiBJQmluYXJ5V3JpdGVyIHtcbiAgICAvKiBzdHJpbmcgbmFtZSA9IDE7ICovXG4gICAgaWYgKG1lc3NhZ2UubmFtZSAhPT0gJycpXG4gICAgICB3cml0ZXIudGFnKDEsIFdpcmVUeXBlLkxlbmd0aERlbGltaXRlZCkuc3RyaW5nKG1lc3NhZ2UubmFtZSk7XG4gICAgLyogc3RyaW5nIHZlcnNpb24gPSAyOyAqL1xuICAgIGlmIChtZXNzYWdlLnZlcnNpb24gIT09ICcnKVxuICAgICAgd3JpdGVyLnRhZygyLCBXaXJlVHlwZS5MZW5ndGhEZWxpbWl0ZWQpLnN0cmluZyhtZXNzYWdlLnZlcnNpb24pO1xuICAgIC8qIHN0cmluZyBhcmNoaXRlY3R1cmUgPSAzOyAqL1xuICAgIGlmIChtZXNzYWdlLmFyY2hpdGVjdHVyZSAhPT0gJycpXG4gICAgICB3cml0ZXIudGFnKDMsIFdpcmVUeXBlLkxlbmd0aERlbGltaXRlZCkuc3RyaW5nKG1lc3NhZ2UuYXJjaGl0ZWN0dXJlKTtcbiAgICBsZXQgdSA9IG9wdGlvbnMud3JpdGVVbmtub3duRmllbGRzO1xuICAgIGlmICh1ICE9PSBmYWxzZSlcbiAgICAgICh1ID09IHRydWUgPyBVbmtub3duRmllbGRIYW5kbGVyLm9uV3JpdGUgOiB1KShcbiAgICAgICAgdGhpcy50eXBlTmFtZSxcbiAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgd3JpdGVyLFxuICAgICAgKTtcbiAgICByZXR1cm4gd3JpdGVyO1xuICB9XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgTWVzc2FnZVR5cGUgZm9yIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuT1NcbiAqL1xuZXhwb3J0IGNvbnN0IE9TID0gbmV3IE9TJFR5cGUoKTtcbi8vIEBnZW5lcmF0ZWQgbWVzc2FnZSB0eXBlIHdpdGggcmVmbGVjdGlvbiBpbmZvcm1hdGlvbiwgbWF5IHByb3ZpZGUgc3BlZWQgb3B0aW1pemVkIG1ldGhvZHNcbmNsYXNzIEJyb3dzZXIkVHlwZSBleHRlbmRzIE1lc3NhZ2VUeXBlPEJyb3dzZXI+IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoJ3N0cmVhbS52aWRlby5zZnUubW9kZWxzLkJyb3dzZXInLCBbXG4gICAgICB7IG5vOiAxLCBuYW1lOiAnbmFtZScsIGtpbmQ6ICdzY2FsYXInLCBUOiA5IC8qU2NhbGFyVHlwZS5TVFJJTkcqLyB9LFxuICAgICAgeyBubzogMiwgbmFtZTogJ3ZlcnNpb24nLCBraW5kOiAnc2NhbGFyJywgVDogOSAvKlNjYWxhclR5cGUuU1RSSU5HKi8gfSxcbiAgICBdKTtcbiAgfVxuICBjcmVhdGUodmFsdWU/OiBQYXJ0aWFsTWVzc2FnZTxCcm93c2VyPik6IEJyb3dzZXIge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBnbG9iYWxUaGlzLk9iamVjdC5jcmVhdGUodGhpcy5tZXNzYWdlUHJvdG90eXBlISk7XG4gICAgbWVzc2FnZS5uYW1lID0gJyc7XG4gICAgbWVzc2FnZS52ZXJzaW9uID0gJyc7XG4gICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpXG4gICAgICByZWZsZWN0aW9uTWVyZ2VQYXJ0aWFsPEJyb3dzZXI+KHRoaXMsIG1lc3NhZ2UsIHZhbHVlKTtcbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxuICBpbnRlcm5hbEJpbmFyeVJlYWQoXG4gICAgcmVhZGVyOiBJQmluYXJ5UmVhZGVyLFxuICAgIGxlbmd0aDogbnVtYmVyLFxuICAgIG9wdGlvbnM6IEJpbmFyeVJlYWRPcHRpb25zLFxuICAgIHRhcmdldD86IEJyb3dzZXIsXG4gICk6IEJyb3dzZXIge1xuICAgIGxldCBtZXNzYWdlID0gdGFyZ2V0ID8/IHRoaXMuY3JlYXRlKCksXG4gICAgICBlbmQgPSByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBsZXQgW2ZpZWxkTm8sIHdpcmVUeXBlXSA9IHJlYWRlci50YWcoKTtcbiAgICAgIHN3aXRjaCAoZmllbGRObykge1xuICAgICAgICBjYXNlIC8qIHN0cmluZyBuYW1lICovIDE6XG4gICAgICAgICAgbWVzc2FnZS5uYW1lID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIC8qIHN0cmluZyB2ZXJzaW9uICovIDI6XG4gICAgICAgICAgbWVzc2FnZS52ZXJzaW9uID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGxldCB1ID0gb3B0aW9ucy5yZWFkVW5rbm93bkZpZWxkO1xuICAgICAgICAgIGlmICh1ID09PSAndGhyb3cnKVxuICAgICAgICAgICAgdGhyb3cgbmV3IGdsb2JhbFRoaXMuRXJyb3IoXG4gICAgICAgICAgICAgIGBVbmtub3duIGZpZWxkICR7ZmllbGROb30gKHdpcmUgdHlwZSAke3dpcmVUeXBlfSkgZm9yICR7dGhpcy50eXBlTmFtZX1gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICBsZXQgZCA9IHJlYWRlci5za2lwKHdpcmVUeXBlKTtcbiAgICAgICAgICBpZiAodSAhPT0gZmFsc2UpXG4gICAgICAgICAgICAodSA9PT0gdHJ1ZSA/IFVua25vd25GaWVsZEhhbmRsZXIub25SZWFkIDogdSkoXG4gICAgICAgICAgICAgIHRoaXMudHlwZU5hbWUsXG4gICAgICAgICAgICAgIG1lc3NhZ2UsXG4gICAgICAgICAgICAgIGZpZWxkTm8sXG4gICAgICAgICAgICAgIHdpcmVUeXBlLFxuICAgICAgICAgICAgICBkLFxuICAgICAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH1cbiAgaW50ZXJuYWxCaW5hcnlXcml0ZShcbiAgICBtZXNzYWdlOiBCcm93c2VyLFxuICAgIHdyaXRlcjogSUJpbmFyeVdyaXRlcixcbiAgICBvcHRpb25zOiBCaW5hcnlXcml0ZU9wdGlvbnMsXG4gICk6IElCaW5hcnlXcml0ZXIge1xuICAgIC8qIHN0cmluZyBuYW1lID0gMTsgKi9cbiAgICBpZiAobWVzc2FnZS5uYW1lICE9PSAnJylcbiAgICAgIHdyaXRlci50YWcoMSwgV2lyZVR5cGUuTGVuZ3RoRGVsaW1pdGVkKS5zdHJpbmcobWVzc2FnZS5uYW1lKTtcbiAgICAvKiBzdHJpbmcgdmVyc2lvbiA9IDI7ICovXG4gICAgaWYgKG1lc3NhZ2UudmVyc2lvbiAhPT0gJycpXG4gICAgICB3cml0ZXIudGFnKDIsIFdpcmVUeXBlLkxlbmd0aERlbGltaXRlZCkuc3RyaW5nKG1lc3NhZ2UudmVyc2lvbik7XG4gICAgbGV0IHUgPSBvcHRpb25zLndyaXRlVW5rbm93bkZpZWxkcztcbiAgICBpZiAodSAhPT0gZmFsc2UpXG4gICAgICAodSA9PSB0cnVlID8gVW5rbm93bkZpZWxkSGFuZGxlci5vbldyaXRlIDogdSkoXG4gICAgICAgIHRoaXMudHlwZU5hbWUsXG4gICAgICAgIG1lc3NhZ2UsXG4gICAgICAgIHdyaXRlcixcbiAgICAgICk7XG4gICAgcmV0dXJuIHdyaXRlcjtcbiAgfVxufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIE1lc3NhZ2VUeXBlIGZvciBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUubW9kZWxzLkJyb3dzZXJcbiAqL1xuZXhwb3J0IGNvbnN0IEJyb3dzZXIgPSBuZXcgQnJvd3NlciRUeXBlKCk7XG4vLyBAZ2VuZXJhdGVkIG1lc3NhZ2UgdHlwZSB3aXRoIHJlZmxlY3Rpb24gaW5mb3JtYXRpb24sIG1heSBwcm92aWRlIHNwZWVkIG9wdGltaXplZCBtZXRob2RzXG5jbGFzcyBEZXZpY2UkVHlwZSBleHRlbmRzIE1lc3NhZ2VUeXBlPERldmljZT4ge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcignc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuRGV2aWNlJywgW1xuICAgICAgeyBubzogMSwgbmFtZTogJ25hbWUnLCBraW5kOiAnc2NhbGFyJywgVDogOSAvKlNjYWxhclR5cGUuU1RSSU5HKi8gfSxcbiAgICAgIHsgbm86IDIsIG5hbWU6ICd2ZXJzaW9uJywga2luZDogJ3NjYWxhcicsIFQ6IDkgLypTY2FsYXJUeXBlLlNUUklORyovIH0sXG4gICAgXSk7XG4gIH1cbiAgY3JlYXRlKHZhbHVlPzogUGFydGlhbE1lc3NhZ2U8RGV2aWNlPik6IERldmljZSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGdsb2JhbFRoaXMuT2JqZWN0LmNyZWF0ZSh0aGlzLm1lc3NhZ2VQcm90b3R5cGUhKTtcbiAgICBtZXNzYWdlLm5hbWUgPSAnJztcbiAgICBtZXNzYWdlLnZlcnNpb24gPSAnJztcbiAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZClcbiAgICAgIHJlZmxlY3Rpb25NZXJnZVBhcnRpYWw8RGV2aWNlPih0aGlzLCBtZXNzYWdlLCB2YWx1ZSk7XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH1cbiAgaW50ZXJuYWxCaW5hcnlSZWFkKFxuICAgIHJlYWRlcjogSUJpbmFyeVJlYWRlcixcbiAgICBsZW5ndGg6IG51bWJlcixcbiAgICBvcHRpb25zOiBCaW5hcnlSZWFkT3B0aW9ucyxcbiAgICB0YXJnZXQ/OiBEZXZpY2UsXG4gICk6IERldmljZSB7XG4gICAgbGV0IG1lc3NhZ2UgPSB0YXJnZXQgPz8gdGhpcy5jcmVhdGUoKSxcbiAgICAgIGVuZCA9IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgIGxldCBbZmllbGRObywgd2lyZVR5cGVdID0gcmVhZGVyLnRhZygpO1xuICAgICAgc3dpdGNoIChmaWVsZE5vKSB7XG4gICAgICAgIGNhc2UgLyogc3RyaW5nIG5hbWUgKi8gMTpcbiAgICAgICAgICBtZXNzYWdlLm5hbWUgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgLyogc3RyaW5nIHZlcnNpb24gKi8gMjpcbiAgICAgICAgICBtZXNzYWdlLnZlcnNpb24gPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgbGV0IHUgPSBvcHRpb25zLnJlYWRVbmtub3duRmllbGQ7XG4gICAgICAgICAgaWYgKHUgPT09ICd0aHJvdycpXG4gICAgICAgICAgICB0aHJvdyBuZXcgZ2xvYmFsVGhpcy5FcnJvcihcbiAgICAgICAgICAgICAgYFVua25vd24gZmllbGQgJHtmaWVsZE5vfSAod2lyZSB0eXBlICR7d2lyZVR5cGV9KSBmb3IgJHt0aGlzLnR5cGVOYW1lfWAsXG4gICAgICAgICAgICApO1xuICAgICAgICAgIGxldCBkID0gcmVhZGVyLnNraXAod2lyZVR5cGUpO1xuICAgICAgICAgIGlmICh1ICE9PSBmYWxzZSlcbiAgICAgICAgICAgICh1ID09PSB0cnVlID8gVW5rbm93bkZpZWxkSGFuZGxlci5vblJlYWQgOiB1KShcbiAgICAgICAgICAgICAgdGhpcy50eXBlTmFtZSxcbiAgICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgICAgZmllbGRObyxcbiAgICAgICAgICAgICAgd2lyZVR5cGUsXG4gICAgICAgICAgICAgIGQsXG4gICAgICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxuICBpbnRlcm5hbEJpbmFyeVdyaXRlKFxuICAgIG1lc3NhZ2U6IERldmljZSxcbiAgICB3cml0ZXI6IElCaW5hcnlXcml0ZXIsXG4gICAgb3B0aW9uczogQmluYXJ5V3JpdGVPcHRpb25zLFxuICApOiBJQmluYXJ5V3JpdGVyIHtcbiAgICAvKiBzdHJpbmcgbmFtZSA9IDE7ICovXG4gICAgaWYgKG1lc3NhZ2UubmFtZSAhPT0gJycpXG4gICAgICB3cml0ZXIudGFnKDEsIFdpcmVUeXBlLkxlbmd0aERlbGltaXRlZCkuc3RyaW5nKG1lc3NhZ2UubmFtZSk7XG4gICAgLyogc3RyaW5nIHZlcnNpb24gPSAyOyAqL1xuICAgIGlmIChtZXNzYWdlLnZlcnNpb24gIT09ICcnKVxuICAgICAgd3JpdGVyLnRhZygyLCBXaXJlVHlwZS5MZW5ndGhEZWxpbWl0ZWQpLnN0cmluZyhtZXNzYWdlLnZlcnNpb24pO1xuICAgIGxldCB1ID0gb3B0aW9ucy53cml0ZVVua25vd25GaWVsZHM7XG4gICAgaWYgKHUgIT09IGZhbHNlKVxuICAgICAgKHUgPT0gdHJ1ZSA/IFVua25vd25GaWVsZEhhbmRsZXIub25Xcml0ZSA6IHUpKFxuICAgICAgICB0aGlzLnR5cGVOYW1lLFxuICAgICAgICBtZXNzYWdlLFxuICAgICAgICB3cml0ZXIsXG4gICAgICApO1xuICAgIHJldHVybiB3cml0ZXI7XG4gIH1cbn1cbi8qKlxuICogQGdlbmVyYXRlZCBNZXNzYWdlVHlwZSBmb3IgcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5EZXZpY2VcbiAqL1xuZXhwb3J0IGNvbnN0IERldmljZSA9IG5ldyBEZXZpY2UkVHlwZSgpO1xuLy8gQGdlbmVyYXRlZCBtZXNzYWdlIHR5cGUgd2l0aCByZWZsZWN0aW9uIGluZm9ybWF0aW9uLCBtYXkgcHJvdmlkZSBzcGVlZCBvcHRpbWl6ZWQgbWV0aG9kc1xuY2xhc3MgQ2FsbEdyYW50cyRUeXBlIGV4dGVuZHMgTWVzc2FnZVR5cGU8Q2FsbEdyYW50cz4ge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcignc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuQ2FsbEdyYW50cycsIFtcbiAgICAgIHtcbiAgICAgICAgbm86IDEsXG4gICAgICAgIG5hbWU6ICdjYW5fcHVibGlzaF9hdWRpbycsXG4gICAgICAgIGtpbmQ6ICdzY2FsYXInLFxuICAgICAgICBUOiA4IC8qU2NhbGFyVHlwZS5CT09MKi8sXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBubzogMixcbiAgICAgICAgbmFtZTogJ2Nhbl9wdWJsaXNoX3ZpZGVvJyxcbiAgICAgICAga2luZDogJ3NjYWxhcicsXG4gICAgICAgIFQ6IDggLypTY2FsYXJUeXBlLkJPT0wqLyxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5vOiAzLFxuICAgICAgICBuYW1lOiAnY2FuX3NjcmVlbnNoYXJlJyxcbiAgICAgICAga2luZDogJ3NjYWxhcicsXG4gICAgICAgIFQ6IDggLypTY2FsYXJUeXBlLkJPT0wqLyxcbiAgICAgIH0sXG4gICAgXSk7XG4gIH1cbiAgY3JlYXRlKHZhbHVlPzogUGFydGlhbE1lc3NhZ2U8Q2FsbEdyYW50cz4pOiBDYWxsR3JhbnRzIHtcbiAgICBjb25zdCBtZXNzYWdlID0gZ2xvYmFsVGhpcy5PYmplY3QuY3JlYXRlKHRoaXMubWVzc2FnZVByb3RvdHlwZSEpO1xuICAgIG1lc3NhZ2UuY2FuUHVibGlzaEF1ZGlvID0gZmFsc2U7XG4gICAgbWVzc2FnZS5jYW5QdWJsaXNoVmlkZW8gPSBmYWxzZTtcbiAgICBtZXNzYWdlLmNhblNjcmVlbnNoYXJlID0gZmFsc2U7XG4gICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpXG4gICAgICByZWZsZWN0aW9uTWVyZ2VQYXJ0aWFsPENhbGxHcmFudHM+KHRoaXMsIG1lc3NhZ2UsIHZhbHVlKTtcbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxuICBpbnRlcm5hbEJpbmFyeVJlYWQoXG4gICAgcmVhZGVyOiBJQmluYXJ5UmVhZGVyLFxuICAgIGxlbmd0aDogbnVtYmVyLFxuICAgIG9wdGlvbnM6IEJpbmFyeVJlYWRPcHRpb25zLFxuICAgIHRhcmdldD86IENhbGxHcmFudHMsXG4gICk6IENhbGxHcmFudHMge1xuICAgIGxldCBtZXNzYWdlID0gdGFyZ2V0ID8/IHRoaXMuY3JlYXRlKCksXG4gICAgICBlbmQgPSByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBsZXQgW2ZpZWxkTm8sIHdpcmVUeXBlXSA9IHJlYWRlci50YWcoKTtcbiAgICAgIHN3aXRjaCAoZmllbGRObykge1xuICAgICAgICBjYXNlIC8qIGJvb2wgY2FuX3B1Ymxpc2hfYXVkaW8gKi8gMTpcbiAgICAgICAgICBtZXNzYWdlLmNhblB1Ymxpc2hBdWRpbyA9IHJlYWRlci5ib29sKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgLyogYm9vbCBjYW5fcHVibGlzaF92aWRlbyAqLyAyOlxuICAgICAgICAgIG1lc3NhZ2UuY2FuUHVibGlzaFZpZGVvID0gcmVhZGVyLmJvb2woKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAvKiBib29sIGNhbl9zY3JlZW5zaGFyZSAqLyAzOlxuICAgICAgICAgIG1lc3NhZ2UuY2FuU2NyZWVuc2hhcmUgPSByZWFkZXIuYm9vbCgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGxldCB1ID0gb3B0aW9ucy5yZWFkVW5rbm93bkZpZWxkO1xuICAgICAgICAgIGlmICh1ID09PSAndGhyb3cnKVxuICAgICAgICAgICAgdGhyb3cgbmV3IGdsb2JhbFRoaXMuRXJyb3IoXG4gICAgICAgICAgICAgIGBVbmtub3duIGZpZWxkICR7ZmllbGROb30gKHdpcmUgdHlwZSAke3dpcmVUeXBlfSkgZm9yICR7dGhpcy50eXBlTmFtZX1gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICBsZXQgZCA9IHJlYWRlci5za2lwKHdpcmVUeXBlKTtcbiAgICAgICAgICBpZiAodSAhPT0gZmFsc2UpXG4gICAgICAgICAgICAodSA9PT0gdHJ1ZSA/IFVua25vd25GaWVsZEhhbmRsZXIub25SZWFkIDogdSkoXG4gICAgICAgICAgICAgIHRoaXMudHlwZU5hbWUsXG4gICAgICAgICAgICAgIG1lc3NhZ2UsXG4gICAgICAgICAgICAgIGZpZWxkTm8sXG4gICAgICAgICAgICAgIHdpcmVUeXBlLFxuICAgICAgICAgICAgICBkLFxuICAgICAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH1cbiAgaW50ZXJuYWxCaW5hcnlXcml0ZShcbiAgICBtZXNzYWdlOiBDYWxsR3JhbnRzLFxuICAgIHdyaXRlcjogSUJpbmFyeVdyaXRlcixcbiAgICBvcHRpb25zOiBCaW5hcnlXcml0ZU9wdGlvbnMsXG4gICk6IElCaW5hcnlXcml0ZXIge1xuICAgIC8qIGJvb2wgY2FuX3B1Ymxpc2hfYXVkaW8gPSAxOyAqL1xuICAgIGlmIChtZXNzYWdlLmNhblB1Ymxpc2hBdWRpbyAhPT0gZmFsc2UpXG4gICAgICB3cml0ZXIudGFnKDEsIFdpcmVUeXBlLlZhcmludCkuYm9vbChtZXNzYWdlLmNhblB1Ymxpc2hBdWRpbyk7XG4gICAgLyogYm9vbCBjYW5fcHVibGlzaF92aWRlbyA9IDI7ICovXG4gICAgaWYgKG1lc3NhZ2UuY2FuUHVibGlzaFZpZGVvICE9PSBmYWxzZSlcbiAgICAgIHdyaXRlci50YWcoMiwgV2lyZVR5cGUuVmFyaW50KS5ib29sKG1lc3NhZ2UuY2FuUHVibGlzaFZpZGVvKTtcbiAgICAvKiBib29sIGNhbl9zY3JlZW5zaGFyZSA9IDM7ICovXG4gICAgaWYgKG1lc3NhZ2UuY2FuU2NyZWVuc2hhcmUgIT09IGZhbHNlKVxuICAgICAgd3JpdGVyLnRhZygzLCBXaXJlVHlwZS5WYXJpbnQpLmJvb2wobWVzc2FnZS5jYW5TY3JlZW5zaGFyZSk7XG4gICAgbGV0IHUgPSBvcHRpb25zLndyaXRlVW5rbm93bkZpZWxkcztcbiAgICBpZiAodSAhPT0gZmFsc2UpXG4gICAgICAodSA9PSB0cnVlID8gVW5rbm93bkZpZWxkSGFuZGxlci5vbldyaXRlIDogdSkoXG4gICAgICAgIHRoaXMudHlwZU5hbWUsXG4gICAgICAgIG1lc3NhZ2UsXG4gICAgICAgIHdyaXRlcixcbiAgICAgICk7XG4gICAgcmV0dXJuIHdyaXRlcjtcbiAgfVxufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIE1lc3NhZ2VUeXBlIGZvciBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUubW9kZWxzLkNhbGxHcmFudHNcbiAqL1xuZXhwb3J0IGNvbnN0IENhbGxHcmFudHMgPSBuZXcgQ2FsbEdyYW50cyRUeXBlKCk7XG4iLCIvKiBlc2xpbnQtZGlzYWJsZSAqL1xuLy8gQGdlbmVyYXRlZCBieSBwcm90b2J1Zi10cyAyLjkuMyB3aXRoIHBhcmFtZXRlciBsb25nX3R5cGVfc3RyaW5nLGNsaWVudF9nZW5lcmljLHNlcnZlcl9ub25lLGVzbGludF9kaXNhYmxlXG4vLyBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmlsZSBcInZpZGVvL3NmdS9zaWduYWxfcnBjL3NpZ25hbC5wcm90b1wiIChwYWNrYWdlIFwic3RyZWFtLnZpZGVvLnNmdS5zaWduYWxcIiwgc3ludGF4IHByb3RvMylcbi8vIHRzbGludDpkaXNhYmxlXG5pbXBvcnQge1xuICBFcnJvcixcbiAgSUNFVHJpY2tsZSxcbiAgUGVlclR5cGUsXG4gIFRyYWNrSW5mbyxcbiAgVHJhY2tUeXBlLFxuICBWaWRlb0RpbWVuc2lvbixcbn0gZnJvbSAnLi4vbW9kZWxzL21vZGVscyc7XG5pbXBvcnQgeyBTZXJ2aWNlVHlwZSB9IGZyb20gJ0Bwcm90b2J1Zi10cy9ydW50aW1lLXJwYyc7XG5pbXBvcnQgdHlwZSB7XG4gIEJpbmFyeVJlYWRPcHRpb25zLFxuICBCaW5hcnlXcml0ZU9wdGlvbnMsXG4gIElCaW5hcnlSZWFkZXIsXG4gIElCaW5hcnlXcml0ZXIsXG4gIFBhcnRpYWxNZXNzYWdlLFxufSBmcm9tICdAcHJvdG9idWYtdHMvcnVudGltZSc7XG5pbXBvcnQge1xuICBNZXNzYWdlVHlwZSxcbiAgcmVmbGVjdGlvbk1lcmdlUGFydGlhbCxcbiAgVW5rbm93bkZpZWxkSGFuZGxlcixcbiAgV2lyZVR5cGUsXG59IGZyb20gJ0Bwcm90b2J1Zi10cy9ydW50aW1lJztcblxuLyoqXG4gKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5JQ0VSZXN0YXJ0UmVxdWVzdFxuICovXG5leHBvcnQgaW50ZXJmYWNlIElDRVJlc3RhcnRSZXF1ZXN0IHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyaW5nIHNlc3Npb25faWQgPSAxO1xuICAgKi9cbiAgc2Vzc2lvbklkOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmVhbS52aWRlby5zZnUubW9kZWxzLlBlZXJUeXBlIHBlZXJfdHlwZSA9IDI7XG4gICAqL1xuICBwZWVyVHlwZTogUGVlclR5cGU7XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUuc2lnbmFsLklDRVJlc3RhcnRSZXNwb25zZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIElDRVJlc3RhcnRSZXNwb25zZSB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmVhbS52aWRlby5zZnUubW9kZWxzLkVycm9yIGVycm9yID0gMTtcbiAgICovXG4gIGVycm9yPzogRXJyb3I7XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUuc2lnbmFsLlVwZGF0ZU11dGVTdGF0ZXNSZXF1ZXN0XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVXBkYXRlTXV0ZVN0YXRlc1JlcXVlc3Qge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJpbmcgc2Vzc2lvbl9pZCA9IDE7XG4gICAqL1xuICBzZXNzaW9uSWQ6IHN0cmluZztcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogcmVwZWF0ZWQgc3RyZWFtLnZpZGVvLnNmdS5zaWduYWwuVHJhY2tNdXRlU3RhdGUgbXV0ZV9zdGF0ZXMgPSAzO1xuICAgKi9cbiAgbXV0ZVN0YXRlczogVHJhY2tNdXRlU3RhdGVbXTtcbn1cbi8qKlxuICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5zaWduYWwuVXBkYXRlTXV0ZVN0YXRlc1Jlc3BvbnNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVXBkYXRlTXV0ZVN0YXRlc1Jlc3BvbnNlIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuRXJyb3IgZXJyb3IgPSA0O1xuICAgKi9cbiAgZXJyb3I/OiBFcnJvcjtcbn1cbi8qKlxuICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5zaWduYWwuVHJhY2tNdXRlU3RhdGVcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBUcmFja011dGVTdGF0ZSB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmVhbS52aWRlby5zZnUubW9kZWxzLlRyYWNrVHlwZSB0cmFja190eXBlID0gMTtcbiAgICovXG4gIHRyYWNrVHlwZTogVHJhY2tUeXBlO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBib29sIG11dGVkID0gMjtcbiAgICovXG4gIG11dGVkOiBib29sZWFuO1xufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5BdWRpb011dGVDaGFuZ2VkXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQXVkaW9NdXRlQ2hhbmdlZCB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IGJvb2wgbXV0ZWQgPSAxO1xuICAgKi9cbiAgbXV0ZWQ6IGJvb2xlYW47XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUuc2lnbmFsLlZpZGVvTXV0ZUNoYW5nZWRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBWaWRlb011dGVDaGFuZ2VkIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogYm9vbCBtdXRlZCA9IDI7XG4gICAqL1xuICBtdXRlZDogYm9vbGVhbjtcbn1cbi8qKlxuICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5zaWduYWwuVXBkYXRlU3Vic2NyaXB0aW9uc1JlcXVlc3RcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBVcGRhdGVTdWJzY3JpcHRpb25zUmVxdWVzdCB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmluZyBzZXNzaW9uX2lkID0gMjtcbiAgICovXG4gIHNlc3Npb25JZDogc3RyaW5nO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiByZXBlYXRlZCBzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5UcmFja1N1YnNjcmlwdGlvbkRldGFpbHMgdHJhY2tzID0gMztcbiAgICovXG4gIHRyYWNrczogVHJhY2tTdWJzY3JpcHRpb25EZXRhaWxzW107XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUuc2lnbmFsLlVwZGF0ZVN1YnNjcmlwdGlvbnNSZXNwb25zZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIFVwZGF0ZVN1YnNjcmlwdGlvbnNSZXNwb25zZSB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmVhbS52aWRlby5zZnUubW9kZWxzLkVycm9yIGVycm9yID0gNDtcbiAgICovXG4gIGVycm9yPzogRXJyb3I7XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUuc2lnbmFsLlRyYWNrU3Vic2NyaXB0aW9uRGV0YWlsc1xuICovXG5leHBvcnQgaW50ZXJmYWNlIFRyYWNrU3Vic2NyaXB0aW9uRGV0YWlscyB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmluZyB1c2VyX2lkID0gMTtcbiAgICovXG4gIHVzZXJJZDogc3RyaW5nO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJpbmcgc2Vzc2lvbl9pZCA9IDI7XG4gICAqL1xuICBzZXNzaW9uSWQ6IHN0cmluZztcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuVHJhY2tUeXBlIHRyYWNrX3R5cGUgPSAzO1xuICAgKi9cbiAgdHJhY2tUeXBlOiBUcmFja1R5cGU7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmVhbS52aWRlby5zZnUubW9kZWxzLlZpZGVvRGltZW5zaW9uIGRpbWVuc2lvbiA9IDQ7XG4gICAqL1xuICBkaW1lbnNpb24/OiBWaWRlb0RpbWVuc2lvbjtcbn1cbi8qKlxuICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5zaWduYWwuU2VuZEFuc3dlclJlcXVlc3RcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBTZW5kQW5zd2VyUmVxdWVzdCB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmVhbS52aWRlby5zZnUubW9kZWxzLlBlZXJUeXBlIHBlZXJfdHlwZSA9IDE7XG4gICAqL1xuICBwZWVyVHlwZTogUGVlclR5cGU7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmluZyBzZHAgPSAyO1xuICAgKi9cbiAgc2RwOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmluZyBzZXNzaW9uX2lkID0gMztcbiAgICovXG4gIHNlc3Npb25JZDogc3RyaW5nO1xufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5TZW5kQW5zd2VyUmVzcG9uc2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBTZW5kQW5zd2VyUmVzcG9uc2Uge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5FcnJvciBlcnJvciA9IDQ7XG4gICAqL1xuICBlcnJvcj86IEVycm9yO1xufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5JQ0VUcmlja2xlUmVzcG9uc2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBJQ0VUcmlja2xlUmVzcG9uc2Uge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5FcnJvciBlcnJvciA9IDQ7XG4gICAqL1xuICBlcnJvcj86IEVycm9yO1xufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5TZXRQdWJsaXNoZXJSZXF1ZXN0XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU2V0UHVibGlzaGVyUmVxdWVzdCB7XG4gIC8qKlxuICAgKiBzZHAgb2ZmZXJcbiAgICpcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJpbmcgc2RwID0gMTtcbiAgICovXG4gIHNkcDogc3RyaW5nO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJpbmcgc2Vzc2lvbl9pZCA9IDI7XG4gICAqL1xuICBzZXNzaW9uSWQ6IHN0cmluZztcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogcmVwZWF0ZWQgc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuVHJhY2tJbmZvIHRyYWNrcyA9IDM7XG4gICAqL1xuICB0cmFja3M6IFRyYWNrSW5mb1tdO1xufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5TZXRQdWJsaXNoZXJSZXNwb25zZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIFNldFB1Ymxpc2hlclJlc3BvbnNlIHtcbiAgLyoqXG4gICAqIHNkcCBhbnN3ZXJcbiAgICpcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJpbmcgc2RwID0gMTtcbiAgICovXG4gIHNkcDogc3RyaW5nO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJpbmcgc2Vzc2lvbl9pZCA9IDI7XG4gICAqL1xuICBzZXNzaW9uSWQ6IHN0cmluZztcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogYm9vbCBpY2VfcmVzdGFydCA9IDM7XG4gICAqL1xuICBpY2VSZXN0YXJ0OiBib29sZWFuO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5FcnJvciBlcnJvciA9IDQ7XG4gICAqL1xuICBlcnJvcj86IEVycm9yO1xufVxuLy8gQGdlbmVyYXRlZCBtZXNzYWdlIHR5cGUgd2l0aCByZWZsZWN0aW9uIGluZm9ybWF0aW9uLCBtYXkgcHJvdmlkZSBzcGVlZCBvcHRpbWl6ZWQgbWV0aG9kc1xuY2xhc3MgSUNFUmVzdGFydFJlcXVlc3QkVHlwZSBleHRlbmRzIE1lc3NhZ2VUeXBlPElDRVJlc3RhcnRSZXF1ZXN0PiB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCdzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5JQ0VSZXN0YXJ0UmVxdWVzdCcsIFtcbiAgICAgIHsgbm86IDEsIG5hbWU6ICdzZXNzaW9uX2lkJywga2luZDogJ3NjYWxhcicsIFQ6IDkgLypTY2FsYXJUeXBlLlNUUklORyovIH0sXG4gICAgICB7XG4gICAgICAgIG5vOiAyLFxuICAgICAgICBuYW1lOiAncGVlcl90eXBlJyxcbiAgICAgICAga2luZDogJ2VudW0nLFxuICAgICAgICBUOiAoKSA9PiBbJ3N0cmVhbS52aWRlby5zZnUubW9kZWxzLlBlZXJUeXBlJywgUGVlclR5cGUsICdQRUVSX1RZUEVfJ10sXG4gICAgICB9LFxuICAgIF0pO1xuICB9XG4gIGNyZWF0ZSh2YWx1ZT86IFBhcnRpYWxNZXNzYWdlPElDRVJlc3RhcnRSZXF1ZXN0Pik6IElDRVJlc3RhcnRSZXF1ZXN0IHtcbiAgICBjb25zdCBtZXNzYWdlID0gZ2xvYmFsVGhpcy5PYmplY3QuY3JlYXRlKHRoaXMubWVzc2FnZVByb3RvdHlwZSEpO1xuICAgIG1lc3NhZ2Uuc2Vzc2lvbklkID0gJyc7XG4gICAgbWVzc2FnZS5wZWVyVHlwZSA9IDA7XG4gICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpXG4gICAgICByZWZsZWN0aW9uTWVyZ2VQYXJ0aWFsPElDRVJlc3RhcnRSZXF1ZXN0Pih0aGlzLCBtZXNzYWdlLCB2YWx1ZSk7XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH1cbiAgaW50ZXJuYWxCaW5hcnlSZWFkKFxuICAgIHJlYWRlcjogSUJpbmFyeVJlYWRlcixcbiAgICBsZW5ndGg6IG51bWJlcixcbiAgICBvcHRpb25zOiBCaW5hcnlSZWFkT3B0aW9ucyxcbiAgICB0YXJnZXQ/OiBJQ0VSZXN0YXJ0UmVxdWVzdCxcbiAgKTogSUNFUmVzdGFydFJlcXVlc3Qge1xuICAgIGxldCBtZXNzYWdlID0gdGFyZ2V0ID8/IHRoaXMuY3JlYXRlKCksXG4gICAgICBlbmQgPSByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBsZXQgW2ZpZWxkTm8sIHdpcmVUeXBlXSA9IHJlYWRlci50YWcoKTtcbiAgICAgIHN3aXRjaCAoZmllbGRObykge1xuICAgICAgICBjYXNlIC8qIHN0cmluZyBzZXNzaW9uX2lkICovIDE6XG4gICAgICAgICAgbWVzc2FnZS5zZXNzaW9uSWQgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgLyogc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuUGVlclR5cGUgcGVlcl90eXBlICovIDI6XG4gICAgICAgICAgbWVzc2FnZS5wZWVyVHlwZSA9IHJlYWRlci5pbnQzMigpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGxldCB1ID0gb3B0aW9ucy5yZWFkVW5rbm93bkZpZWxkO1xuICAgICAgICAgIGlmICh1ID09PSAndGhyb3cnKVxuICAgICAgICAgICAgdGhyb3cgbmV3IGdsb2JhbFRoaXMuRXJyb3IoXG4gICAgICAgICAgICAgIGBVbmtub3duIGZpZWxkICR7ZmllbGROb30gKHdpcmUgdHlwZSAke3dpcmVUeXBlfSkgZm9yICR7dGhpcy50eXBlTmFtZX1gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICBsZXQgZCA9IHJlYWRlci5za2lwKHdpcmVUeXBlKTtcbiAgICAgICAgICBpZiAodSAhPT0gZmFsc2UpXG4gICAgICAgICAgICAodSA9PT0gdHJ1ZSA/IFVua25vd25GaWVsZEhhbmRsZXIub25SZWFkIDogdSkoXG4gICAgICAgICAgICAgIHRoaXMudHlwZU5hbWUsXG4gICAgICAgICAgICAgIG1lc3NhZ2UsXG4gICAgICAgICAgICAgIGZpZWxkTm8sXG4gICAgICAgICAgICAgIHdpcmVUeXBlLFxuICAgICAgICAgICAgICBkLFxuICAgICAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH1cbiAgaW50ZXJuYWxCaW5hcnlXcml0ZShcbiAgICBtZXNzYWdlOiBJQ0VSZXN0YXJ0UmVxdWVzdCxcbiAgICB3cml0ZXI6IElCaW5hcnlXcml0ZXIsXG4gICAgb3B0aW9uczogQmluYXJ5V3JpdGVPcHRpb25zLFxuICApOiBJQmluYXJ5V3JpdGVyIHtcbiAgICAvKiBzdHJpbmcgc2Vzc2lvbl9pZCA9IDE7ICovXG4gICAgaWYgKG1lc3NhZ2Uuc2Vzc2lvbklkICE9PSAnJylcbiAgICAgIHdyaXRlci50YWcoMSwgV2lyZVR5cGUuTGVuZ3RoRGVsaW1pdGVkKS5zdHJpbmcobWVzc2FnZS5zZXNzaW9uSWQpO1xuICAgIC8qIHN0cmVhbS52aWRlby5zZnUubW9kZWxzLlBlZXJUeXBlIHBlZXJfdHlwZSA9IDI7ICovXG4gICAgaWYgKG1lc3NhZ2UucGVlclR5cGUgIT09IDApXG4gICAgICB3cml0ZXIudGFnKDIsIFdpcmVUeXBlLlZhcmludCkuaW50MzIobWVzc2FnZS5wZWVyVHlwZSk7XG4gICAgbGV0IHUgPSBvcHRpb25zLndyaXRlVW5rbm93bkZpZWxkcztcbiAgICBpZiAodSAhPT0gZmFsc2UpXG4gICAgICAodSA9PSB0cnVlID8gVW5rbm93bkZpZWxkSGFuZGxlci5vbldyaXRlIDogdSkoXG4gICAgICAgIHRoaXMudHlwZU5hbWUsXG4gICAgICAgIG1lc3NhZ2UsXG4gICAgICAgIHdyaXRlcixcbiAgICAgICk7XG4gICAgcmV0dXJuIHdyaXRlcjtcbiAgfVxufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIE1lc3NhZ2VUeXBlIGZvciBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUuc2lnbmFsLklDRVJlc3RhcnRSZXF1ZXN0XG4gKi9cbmV4cG9ydCBjb25zdCBJQ0VSZXN0YXJ0UmVxdWVzdCA9IG5ldyBJQ0VSZXN0YXJ0UmVxdWVzdCRUeXBlKCk7XG4vLyBAZ2VuZXJhdGVkIG1lc3NhZ2UgdHlwZSB3aXRoIHJlZmxlY3Rpb24gaW5mb3JtYXRpb24sIG1heSBwcm92aWRlIHNwZWVkIG9wdGltaXplZCBtZXRob2RzXG5jbGFzcyBJQ0VSZXN0YXJ0UmVzcG9uc2UkVHlwZSBleHRlbmRzIE1lc3NhZ2VUeXBlPElDRVJlc3RhcnRSZXNwb25zZT4ge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcignc3RyZWFtLnZpZGVvLnNmdS5zaWduYWwuSUNFUmVzdGFydFJlc3BvbnNlJywgW1xuICAgICAgeyBubzogMSwgbmFtZTogJ2Vycm9yJywga2luZDogJ21lc3NhZ2UnLCBUOiAoKSA9PiBFcnJvciB9LFxuICAgIF0pO1xuICB9XG4gIGNyZWF0ZSh2YWx1ZT86IFBhcnRpYWxNZXNzYWdlPElDRVJlc3RhcnRSZXNwb25zZT4pOiBJQ0VSZXN0YXJ0UmVzcG9uc2Uge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBnbG9iYWxUaGlzLk9iamVjdC5jcmVhdGUodGhpcy5tZXNzYWdlUHJvdG90eXBlISk7XG4gICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpXG4gICAgICByZWZsZWN0aW9uTWVyZ2VQYXJ0aWFsPElDRVJlc3RhcnRSZXNwb25zZT4odGhpcywgbWVzc2FnZSwgdmFsdWUpO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG4gIGludGVybmFsQmluYXJ5UmVhZChcbiAgICByZWFkZXI6IElCaW5hcnlSZWFkZXIsXG4gICAgbGVuZ3RoOiBudW1iZXIsXG4gICAgb3B0aW9uczogQmluYXJ5UmVhZE9wdGlvbnMsXG4gICAgdGFyZ2V0PzogSUNFUmVzdGFydFJlc3BvbnNlLFxuICApOiBJQ0VSZXN0YXJ0UmVzcG9uc2Uge1xuICAgIGxldCBtZXNzYWdlID0gdGFyZ2V0ID8/IHRoaXMuY3JlYXRlKCksXG4gICAgICBlbmQgPSByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBsZXQgW2ZpZWxkTm8sIHdpcmVUeXBlXSA9IHJlYWRlci50YWcoKTtcbiAgICAgIHN3aXRjaCAoZmllbGRObykge1xuICAgICAgICBjYXNlIC8qIHN0cmVhbS52aWRlby5zZnUubW9kZWxzLkVycm9yIGVycm9yICovIDE6XG4gICAgICAgICAgbWVzc2FnZS5lcnJvciA9IEVycm9yLmludGVybmFsQmluYXJ5UmVhZChcbiAgICAgICAgICAgIHJlYWRlcixcbiAgICAgICAgICAgIHJlYWRlci51aW50MzIoKSxcbiAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICBtZXNzYWdlLmVycm9yLFxuICAgICAgICAgICk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgbGV0IHUgPSBvcHRpb25zLnJlYWRVbmtub3duRmllbGQ7XG4gICAgICAgICAgaWYgKHUgPT09ICd0aHJvdycpXG4gICAgICAgICAgICB0aHJvdyBuZXcgZ2xvYmFsVGhpcy5FcnJvcihcbiAgICAgICAgICAgICAgYFVua25vd24gZmllbGQgJHtmaWVsZE5vfSAod2lyZSB0eXBlICR7d2lyZVR5cGV9KSBmb3IgJHt0aGlzLnR5cGVOYW1lfWAsXG4gICAgICAgICAgICApO1xuICAgICAgICAgIGxldCBkID0gcmVhZGVyLnNraXAod2lyZVR5cGUpO1xuICAgICAgICAgIGlmICh1ICE9PSBmYWxzZSlcbiAgICAgICAgICAgICh1ID09PSB0cnVlID8gVW5rbm93bkZpZWxkSGFuZGxlci5vblJlYWQgOiB1KShcbiAgICAgICAgICAgICAgdGhpcy50eXBlTmFtZSxcbiAgICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgICAgZmllbGRObyxcbiAgICAgICAgICAgICAgd2lyZVR5cGUsXG4gICAgICAgICAgICAgIGQsXG4gICAgICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxuICBpbnRlcm5hbEJpbmFyeVdyaXRlKFxuICAgIG1lc3NhZ2U6IElDRVJlc3RhcnRSZXNwb25zZSxcbiAgICB3cml0ZXI6IElCaW5hcnlXcml0ZXIsXG4gICAgb3B0aW9uczogQmluYXJ5V3JpdGVPcHRpb25zLFxuICApOiBJQmluYXJ5V3JpdGVyIHtcbiAgICAvKiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5FcnJvciBlcnJvciA9IDE7ICovXG4gICAgaWYgKG1lc3NhZ2UuZXJyb3IpXG4gICAgICBFcnJvci5pbnRlcm5hbEJpbmFyeVdyaXRlKFxuICAgICAgICBtZXNzYWdlLmVycm9yLFxuICAgICAgICB3cml0ZXIudGFnKDEsIFdpcmVUeXBlLkxlbmd0aERlbGltaXRlZCkuZm9yaygpLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgKS5qb2luKCk7XG4gICAgbGV0IHUgPSBvcHRpb25zLndyaXRlVW5rbm93bkZpZWxkcztcbiAgICBpZiAodSAhPT0gZmFsc2UpXG4gICAgICAodSA9PSB0cnVlID8gVW5rbm93bkZpZWxkSGFuZGxlci5vbldyaXRlIDogdSkoXG4gICAgICAgIHRoaXMudHlwZU5hbWUsXG4gICAgICAgIG1lc3NhZ2UsXG4gICAgICAgIHdyaXRlcixcbiAgICAgICk7XG4gICAgcmV0dXJuIHdyaXRlcjtcbiAgfVxufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIE1lc3NhZ2VUeXBlIGZvciBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUuc2lnbmFsLklDRVJlc3RhcnRSZXNwb25zZVxuICovXG5leHBvcnQgY29uc3QgSUNFUmVzdGFydFJlc3BvbnNlID0gbmV3IElDRVJlc3RhcnRSZXNwb25zZSRUeXBlKCk7XG4vLyBAZ2VuZXJhdGVkIG1lc3NhZ2UgdHlwZSB3aXRoIHJlZmxlY3Rpb24gaW5mb3JtYXRpb24sIG1heSBwcm92aWRlIHNwZWVkIG9wdGltaXplZCBtZXRob2RzXG5jbGFzcyBVcGRhdGVNdXRlU3RhdGVzUmVxdWVzdCRUeXBlIGV4dGVuZHMgTWVzc2FnZVR5cGU8VXBkYXRlTXV0ZVN0YXRlc1JlcXVlc3Q+IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoJ3N0cmVhbS52aWRlby5zZnUuc2lnbmFsLlVwZGF0ZU11dGVTdGF0ZXNSZXF1ZXN0JywgW1xuICAgICAgeyBubzogMSwgbmFtZTogJ3Nlc3Npb25faWQnLCBraW5kOiAnc2NhbGFyJywgVDogOSAvKlNjYWxhclR5cGUuU1RSSU5HKi8gfSxcbiAgICAgIHtcbiAgICAgICAgbm86IDMsXG4gICAgICAgIG5hbWU6ICdtdXRlX3N0YXRlcycsXG4gICAgICAgIGtpbmQ6ICdtZXNzYWdlJyxcbiAgICAgICAgcmVwZWF0OiAxIC8qUmVwZWF0VHlwZS5QQUNLRUQqLyxcbiAgICAgICAgVDogKCkgPT4gVHJhY2tNdXRlU3RhdGUsXG4gICAgICB9LFxuICAgIF0pO1xuICB9XG4gIGNyZWF0ZShcbiAgICB2YWx1ZT86IFBhcnRpYWxNZXNzYWdlPFVwZGF0ZU11dGVTdGF0ZXNSZXF1ZXN0PixcbiAgKTogVXBkYXRlTXV0ZVN0YXRlc1JlcXVlc3Qge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBnbG9iYWxUaGlzLk9iamVjdC5jcmVhdGUodGhpcy5tZXNzYWdlUHJvdG90eXBlISk7XG4gICAgbWVzc2FnZS5zZXNzaW9uSWQgPSAnJztcbiAgICBtZXNzYWdlLm11dGVTdGF0ZXMgPSBbXTtcbiAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZClcbiAgICAgIHJlZmxlY3Rpb25NZXJnZVBhcnRpYWw8VXBkYXRlTXV0ZVN0YXRlc1JlcXVlc3Q+KHRoaXMsIG1lc3NhZ2UsIHZhbHVlKTtcbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxuICBpbnRlcm5hbEJpbmFyeVJlYWQoXG4gICAgcmVhZGVyOiBJQmluYXJ5UmVhZGVyLFxuICAgIGxlbmd0aDogbnVtYmVyLFxuICAgIG9wdGlvbnM6IEJpbmFyeVJlYWRPcHRpb25zLFxuICAgIHRhcmdldD86IFVwZGF0ZU11dGVTdGF0ZXNSZXF1ZXN0LFxuICApOiBVcGRhdGVNdXRlU3RhdGVzUmVxdWVzdCB7XG4gICAgbGV0IG1lc3NhZ2UgPSB0YXJnZXQgPz8gdGhpcy5jcmVhdGUoKSxcbiAgICAgIGVuZCA9IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgIGxldCBbZmllbGRObywgd2lyZVR5cGVdID0gcmVhZGVyLnRhZygpO1xuICAgICAgc3dpdGNoIChmaWVsZE5vKSB7XG4gICAgICAgIGNhc2UgLyogc3RyaW5nIHNlc3Npb25faWQgKi8gMTpcbiAgICAgICAgICBtZXNzYWdlLnNlc3Npb25JZCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAvKiByZXBlYXRlZCBzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5UcmFja011dGVTdGF0ZSBtdXRlX3N0YXRlcyAqLyAzOlxuICAgICAgICAgIG1lc3NhZ2UubXV0ZVN0YXRlcy5wdXNoKFxuICAgICAgICAgICAgVHJhY2tNdXRlU3RhdGUuaW50ZXJuYWxCaW5hcnlSZWFkKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpLCBvcHRpb25zKSxcbiAgICAgICAgICApO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGxldCB1ID0gb3B0aW9ucy5yZWFkVW5rbm93bkZpZWxkO1xuICAgICAgICAgIGlmICh1ID09PSAndGhyb3cnKVxuICAgICAgICAgICAgdGhyb3cgbmV3IGdsb2JhbFRoaXMuRXJyb3IoXG4gICAgICAgICAgICAgIGBVbmtub3duIGZpZWxkICR7ZmllbGROb30gKHdpcmUgdHlwZSAke3dpcmVUeXBlfSkgZm9yICR7dGhpcy50eXBlTmFtZX1gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICBsZXQgZCA9IHJlYWRlci5za2lwKHdpcmVUeXBlKTtcbiAgICAgICAgICBpZiAodSAhPT0gZmFsc2UpXG4gICAgICAgICAgICAodSA9PT0gdHJ1ZSA/IFVua25vd25GaWVsZEhhbmRsZXIub25SZWFkIDogdSkoXG4gICAgICAgICAgICAgIHRoaXMudHlwZU5hbWUsXG4gICAgICAgICAgICAgIG1lc3NhZ2UsXG4gICAgICAgICAgICAgIGZpZWxkTm8sXG4gICAgICAgICAgICAgIHdpcmVUeXBlLFxuICAgICAgICAgICAgICBkLFxuICAgICAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH1cbiAgaW50ZXJuYWxCaW5hcnlXcml0ZShcbiAgICBtZXNzYWdlOiBVcGRhdGVNdXRlU3RhdGVzUmVxdWVzdCxcbiAgICB3cml0ZXI6IElCaW5hcnlXcml0ZXIsXG4gICAgb3B0aW9uczogQmluYXJ5V3JpdGVPcHRpb25zLFxuICApOiBJQmluYXJ5V3JpdGVyIHtcbiAgICAvKiBzdHJpbmcgc2Vzc2lvbl9pZCA9IDE7ICovXG4gICAgaWYgKG1lc3NhZ2Uuc2Vzc2lvbklkICE9PSAnJylcbiAgICAgIHdyaXRlci50YWcoMSwgV2lyZVR5cGUuTGVuZ3RoRGVsaW1pdGVkKS5zdHJpbmcobWVzc2FnZS5zZXNzaW9uSWQpO1xuICAgIC8qIHJlcGVhdGVkIHN0cmVhbS52aWRlby5zZnUuc2lnbmFsLlRyYWNrTXV0ZVN0YXRlIG11dGVfc3RhdGVzID0gMzsgKi9cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1lc3NhZ2UubXV0ZVN0YXRlcy5sZW5ndGg7IGkrKylcbiAgICAgIFRyYWNrTXV0ZVN0YXRlLmludGVybmFsQmluYXJ5V3JpdGUoXG4gICAgICAgIG1lc3NhZ2UubXV0ZVN0YXRlc1tpXSxcbiAgICAgICAgd3JpdGVyLnRhZygzLCBXaXJlVHlwZS5MZW5ndGhEZWxpbWl0ZWQpLmZvcmsoKSxcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICkuam9pbigpO1xuICAgIGxldCB1ID0gb3B0aW9ucy53cml0ZVVua25vd25GaWVsZHM7XG4gICAgaWYgKHUgIT09IGZhbHNlKVxuICAgICAgKHUgPT0gdHJ1ZSA/IFVua25vd25GaWVsZEhhbmRsZXIub25Xcml0ZSA6IHUpKFxuICAgICAgICB0aGlzLnR5cGVOYW1lLFxuICAgICAgICBtZXNzYWdlLFxuICAgICAgICB3cml0ZXIsXG4gICAgICApO1xuICAgIHJldHVybiB3cml0ZXI7XG4gIH1cbn1cbi8qKlxuICogQGdlbmVyYXRlZCBNZXNzYWdlVHlwZSBmb3IgcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5VcGRhdGVNdXRlU3RhdGVzUmVxdWVzdFxuICovXG5leHBvcnQgY29uc3QgVXBkYXRlTXV0ZVN0YXRlc1JlcXVlc3QgPSBuZXcgVXBkYXRlTXV0ZVN0YXRlc1JlcXVlc3QkVHlwZSgpO1xuLy8gQGdlbmVyYXRlZCBtZXNzYWdlIHR5cGUgd2l0aCByZWZsZWN0aW9uIGluZm9ybWF0aW9uLCBtYXkgcHJvdmlkZSBzcGVlZCBvcHRpbWl6ZWQgbWV0aG9kc1xuY2xhc3MgVXBkYXRlTXV0ZVN0YXRlc1Jlc3BvbnNlJFR5cGUgZXh0ZW5kcyBNZXNzYWdlVHlwZTxVcGRhdGVNdXRlU3RhdGVzUmVzcG9uc2U+IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoJ3N0cmVhbS52aWRlby5zZnUuc2lnbmFsLlVwZGF0ZU11dGVTdGF0ZXNSZXNwb25zZScsIFtcbiAgICAgIHsgbm86IDQsIG5hbWU6ICdlcnJvcicsIGtpbmQ6ICdtZXNzYWdlJywgVDogKCkgPT4gRXJyb3IgfSxcbiAgICBdKTtcbiAgfVxuICBjcmVhdGUoXG4gICAgdmFsdWU/OiBQYXJ0aWFsTWVzc2FnZTxVcGRhdGVNdXRlU3RhdGVzUmVzcG9uc2U+LFxuICApOiBVcGRhdGVNdXRlU3RhdGVzUmVzcG9uc2Uge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBnbG9iYWxUaGlzLk9iamVjdC5jcmVhdGUodGhpcy5tZXNzYWdlUHJvdG90eXBlISk7XG4gICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpXG4gICAgICByZWZsZWN0aW9uTWVyZ2VQYXJ0aWFsPFVwZGF0ZU11dGVTdGF0ZXNSZXNwb25zZT4odGhpcywgbWVzc2FnZSwgdmFsdWUpO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG4gIGludGVybmFsQmluYXJ5UmVhZChcbiAgICByZWFkZXI6IElCaW5hcnlSZWFkZXIsXG4gICAgbGVuZ3RoOiBudW1iZXIsXG4gICAgb3B0aW9uczogQmluYXJ5UmVhZE9wdGlvbnMsXG4gICAgdGFyZ2V0PzogVXBkYXRlTXV0ZVN0YXRlc1Jlc3BvbnNlLFxuICApOiBVcGRhdGVNdXRlU3RhdGVzUmVzcG9uc2Uge1xuICAgIGxldCBtZXNzYWdlID0gdGFyZ2V0ID8/IHRoaXMuY3JlYXRlKCksXG4gICAgICBlbmQgPSByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBsZXQgW2ZpZWxkTm8sIHdpcmVUeXBlXSA9IHJlYWRlci50YWcoKTtcbiAgICAgIHN3aXRjaCAoZmllbGRObykge1xuICAgICAgICBjYXNlIC8qIHN0cmVhbS52aWRlby5zZnUubW9kZWxzLkVycm9yIGVycm9yICovIDQ6XG4gICAgICAgICAgbWVzc2FnZS5lcnJvciA9IEVycm9yLmludGVybmFsQmluYXJ5UmVhZChcbiAgICAgICAgICAgIHJlYWRlcixcbiAgICAgICAgICAgIHJlYWRlci51aW50MzIoKSxcbiAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICBtZXNzYWdlLmVycm9yLFxuICAgICAgICAgICk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgbGV0IHUgPSBvcHRpb25zLnJlYWRVbmtub3duRmllbGQ7XG4gICAgICAgICAgaWYgKHUgPT09ICd0aHJvdycpXG4gICAgICAgICAgICB0aHJvdyBuZXcgZ2xvYmFsVGhpcy5FcnJvcihcbiAgICAgICAgICAgICAgYFVua25vd24gZmllbGQgJHtmaWVsZE5vfSAod2lyZSB0eXBlICR7d2lyZVR5cGV9KSBmb3IgJHt0aGlzLnR5cGVOYW1lfWAsXG4gICAgICAgICAgICApO1xuICAgICAgICAgIGxldCBkID0gcmVhZGVyLnNraXAod2lyZVR5cGUpO1xuICAgICAgICAgIGlmICh1ICE9PSBmYWxzZSlcbiAgICAgICAgICAgICh1ID09PSB0cnVlID8gVW5rbm93bkZpZWxkSGFuZGxlci5vblJlYWQgOiB1KShcbiAgICAgICAgICAgICAgdGhpcy50eXBlTmFtZSxcbiAgICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgICAgZmllbGRObyxcbiAgICAgICAgICAgICAgd2lyZVR5cGUsXG4gICAgICAgICAgICAgIGQsXG4gICAgICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxuICBpbnRlcm5hbEJpbmFyeVdyaXRlKFxuICAgIG1lc3NhZ2U6IFVwZGF0ZU11dGVTdGF0ZXNSZXNwb25zZSxcbiAgICB3cml0ZXI6IElCaW5hcnlXcml0ZXIsXG4gICAgb3B0aW9uczogQmluYXJ5V3JpdGVPcHRpb25zLFxuICApOiBJQmluYXJ5V3JpdGVyIHtcbiAgICAvKiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5FcnJvciBlcnJvciA9IDQ7ICovXG4gICAgaWYgKG1lc3NhZ2UuZXJyb3IpXG4gICAgICBFcnJvci5pbnRlcm5hbEJpbmFyeVdyaXRlKFxuICAgICAgICBtZXNzYWdlLmVycm9yLFxuICAgICAgICB3cml0ZXIudGFnKDQsIFdpcmVUeXBlLkxlbmd0aERlbGltaXRlZCkuZm9yaygpLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgKS5qb2luKCk7XG4gICAgbGV0IHUgPSBvcHRpb25zLndyaXRlVW5rbm93bkZpZWxkcztcbiAgICBpZiAodSAhPT0gZmFsc2UpXG4gICAgICAodSA9PSB0cnVlID8gVW5rbm93bkZpZWxkSGFuZGxlci5vbldyaXRlIDogdSkoXG4gICAgICAgIHRoaXMudHlwZU5hbWUsXG4gICAgICAgIG1lc3NhZ2UsXG4gICAgICAgIHdyaXRlcixcbiAgICAgICk7XG4gICAgcmV0dXJuIHdyaXRlcjtcbiAgfVxufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIE1lc3NhZ2VUeXBlIGZvciBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUuc2lnbmFsLlVwZGF0ZU11dGVTdGF0ZXNSZXNwb25zZVxuICovXG5leHBvcnQgY29uc3QgVXBkYXRlTXV0ZVN0YXRlc1Jlc3BvbnNlID0gbmV3IFVwZGF0ZU11dGVTdGF0ZXNSZXNwb25zZSRUeXBlKCk7XG4vLyBAZ2VuZXJhdGVkIG1lc3NhZ2UgdHlwZSB3aXRoIHJlZmxlY3Rpb24gaW5mb3JtYXRpb24sIG1heSBwcm92aWRlIHNwZWVkIG9wdGltaXplZCBtZXRob2RzXG5jbGFzcyBUcmFja011dGVTdGF0ZSRUeXBlIGV4dGVuZHMgTWVzc2FnZVR5cGU8VHJhY2tNdXRlU3RhdGU+IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoJ3N0cmVhbS52aWRlby5zZnUuc2lnbmFsLlRyYWNrTXV0ZVN0YXRlJywgW1xuICAgICAge1xuICAgICAgICBubzogMSxcbiAgICAgICAgbmFtZTogJ3RyYWNrX3R5cGUnLFxuICAgICAgICBraW5kOiAnZW51bScsXG4gICAgICAgIFQ6ICgpID0+IFtcbiAgICAgICAgICAnc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuVHJhY2tUeXBlJyxcbiAgICAgICAgICBUcmFja1R5cGUsXG4gICAgICAgICAgJ1RSQUNLX1RZUEVfJyxcbiAgICAgICAgXSxcbiAgICAgIH0sXG4gICAgICB7IG5vOiAyLCBuYW1lOiAnbXV0ZWQnLCBraW5kOiAnc2NhbGFyJywgVDogOCAvKlNjYWxhclR5cGUuQk9PTCovIH0sXG4gICAgXSk7XG4gIH1cbiAgY3JlYXRlKHZhbHVlPzogUGFydGlhbE1lc3NhZ2U8VHJhY2tNdXRlU3RhdGU+KTogVHJhY2tNdXRlU3RhdGUge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBnbG9iYWxUaGlzLk9iamVjdC5jcmVhdGUodGhpcy5tZXNzYWdlUHJvdG90eXBlISk7XG4gICAgbWVzc2FnZS50cmFja1R5cGUgPSAwO1xuICAgIG1lc3NhZ2UubXV0ZWQgPSBmYWxzZTtcbiAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZClcbiAgICAgIHJlZmxlY3Rpb25NZXJnZVBhcnRpYWw8VHJhY2tNdXRlU3RhdGU+KHRoaXMsIG1lc3NhZ2UsIHZhbHVlKTtcbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxuICBpbnRlcm5hbEJpbmFyeVJlYWQoXG4gICAgcmVhZGVyOiBJQmluYXJ5UmVhZGVyLFxuICAgIGxlbmd0aDogbnVtYmVyLFxuICAgIG9wdGlvbnM6IEJpbmFyeVJlYWRPcHRpb25zLFxuICAgIHRhcmdldD86IFRyYWNrTXV0ZVN0YXRlLFxuICApOiBUcmFja011dGVTdGF0ZSB7XG4gICAgbGV0IG1lc3NhZ2UgPSB0YXJnZXQgPz8gdGhpcy5jcmVhdGUoKSxcbiAgICAgIGVuZCA9IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgIGxldCBbZmllbGRObywgd2lyZVR5cGVdID0gcmVhZGVyLnRhZygpO1xuICAgICAgc3dpdGNoIChmaWVsZE5vKSB7XG4gICAgICAgIGNhc2UgLyogc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuVHJhY2tUeXBlIHRyYWNrX3R5cGUgKi8gMTpcbiAgICAgICAgICBtZXNzYWdlLnRyYWNrVHlwZSA9IHJlYWRlci5pbnQzMigpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIC8qIGJvb2wgbXV0ZWQgKi8gMjpcbiAgICAgICAgICBtZXNzYWdlLm11dGVkID0gcmVhZGVyLmJvb2woKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBsZXQgdSA9IG9wdGlvbnMucmVhZFVua25vd25GaWVsZDtcbiAgICAgICAgICBpZiAodSA9PT0gJ3Rocm93JylcbiAgICAgICAgICAgIHRocm93IG5ldyBnbG9iYWxUaGlzLkVycm9yKFxuICAgICAgICAgICAgICBgVW5rbm93biBmaWVsZCAke2ZpZWxkTm99ICh3aXJlIHR5cGUgJHt3aXJlVHlwZX0pIGZvciAke3RoaXMudHlwZU5hbWV9YCxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgbGV0IGQgPSByZWFkZXIuc2tpcCh3aXJlVHlwZSk7XG4gICAgICAgICAgaWYgKHUgIT09IGZhbHNlKVxuICAgICAgICAgICAgKHUgPT09IHRydWUgPyBVbmtub3duRmllbGRIYW5kbGVyLm9uUmVhZCA6IHUpKFxuICAgICAgICAgICAgICB0aGlzLnR5cGVOYW1lLFxuICAgICAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICAgICAgICBmaWVsZE5vLFxuICAgICAgICAgICAgICB3aXJlVHlwZSxcbiAgICAgICAgICAgICAgZCxcbiAgICAgICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG4gIGludGVybmFsQmluYXJ5V3JpdGUoXG4gICAgbWVzc2FnZTogVHJhY2tNdXRlU3RhdGUsXG4gICAgd3JpdGVyOiBJQmluYXJ5V3JpdGVyLFxuICAgIG9wdGlvbnM6IEJpbmFyeVdyaXRlT3B0aW9ucyxcbiAgKTogSUJpbmFyeVdyaXRlciB7XG4gICAgLyogc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuVHJhY2tUeXBlIHRyYWNrX3R5cGUgPSAxOyAqL1xuICAgIGlmIChtZXNzYWdlLnRyYWNrVHlwZSAhPT0gMClcbiAgICAgIHdyaXRlci50YWcoMSwgV2lyZVR5cGUuVmFyaW50KS5pbnQzMihtZXNzYWdlLnRyYWNrVHlwZSk7XG4gICAgLyogYm9vbCBtdXRlZCA9IDI7ICovXG4gICAgaWYgKG1lc3NhZ2UubXV0ZWQgIT09IGZhbHNlKVxuICAgICAgd3JpdGVyLnRhZygyLCBXaXJlVHlwZS5WYXJpbnQpLmJvb2wobWVzc2FnZS5tdXRlZCk7XG4gICAgbGV0IHUgPSBvcHRpb25zLndyaXRlVW5rbm93bkZpZWxkcztcbiAgICBpZiAodSAhPT0gZmFsc2UpXG4gICAgICAodSA9PSB0cnVlID8gVW5rbm93bkZpZWxkSGFuZGxlci5vbldyaXRlIDogdSkoXG4gICAgICAgIHRoaXMudHlwZU5hbWUsXG4gICAgICAgIG1lc3NhZ2UsXG4gICAgICAgIHdyaXRlcixcbiAgICAgICk7XG4gICAgcmV0dXJuIHdyaXRlcjtcbiAgfVxufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIE1lc3NhZ2VUeXBlIGZvciBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUuc2lnbmFsLlRyYWNrTXV0ZVN0YXRlXG4gKi9cbmV4cG9ydCBjb25zdCBUcmFja011dGVTdGF0ZSA9IG5ldyBUcmFja011dGVTdGF0ZSRUeXBlKCk7XG4vLyBAZ2VuZXJhdGVkIG1lc3NhZ2UgdHlwZSB3aXRoIHJlZmxlY3Rpb24gaW5mb3JtYXRpb24sIG1heSBwcm92aWRlIHNwZWVkIG9wdGltaXplZCBtZXRob2RzXG5jbGFzcyBBdWRpb011dGVDaGFuZ2VkJFR5cGUgZXh0ZW5kcyBNZXNzYWdlVHlwZTxBdWRpb011dGVDaGFuZ2VkPiB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCdzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5BdWRpb011dGVDaGFuZ2VkJywgW1xuICAgICAgeyBubzogMSwgbmFtZTogJ211dGVkJywga2luZDogJ3NjYWxhcicsIFQ6IDggLypTY2FsYXJUeXBlLkJPT0wqLyB9LFxuICAgIF0pO1xuICB9XG4gIGNyZWF0ZSh2YWx1ZT86IFBhcnRpYWxNZXNzYWdlPEF1ZGlvTXV0ZUNoYW5nZWQ+KTogQXVkaW9NdXRlQ2hhbmdlZCB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGdsb2JhbFRoaXMuT2JqZWN0LmNyZWF0ZSh0aGlzLm1lc3NhZ2VQcm90b3R5cGUhKTtcbiAgICBtZXNzYWdlLm11dGVkID0gZmFsc2U7XG4gICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpXG4gICAgICByZWZsZWN0aW9uTWVyZ2VQYXJ0aWFsPEF1ZGlvTXV0ZUNoYW5nZWQ+KHRoaXMsIG1lc3NhZ2UsIHZhbHVlKTtcbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxuICBpbnRlcm5hbEJpbmFyeVJlYWQoXG4gICAgcmVhZGVyOiBJQmluYXJ5UmVhZGVyLFxuICAgIGxlbmd0aDogbnVtYmVyLFxuICAgIG9wdGlvbnM6IEJpbmFyeVJlYWRPcHRpb25zLFxuICAgIHRhcmdldD86IEF1ZGlvTXV0ZUNoYW5nZWQsXG4gICk6IEF1ZGlvTXV0ZUNoYW5nZWQge1xuICAgIGxldCBtZXNzYWdlID0gdGFyZ2V0ID8/IHRoaXMuY3JlYXRlKCksXG4gICAgICBlbmQgPSByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBsZXQgW2ZpZWxkTm8sIHdpcmVUeXBlXSA9IHJlYWRlci50YWcoKTtcbiAgICAgIHN3aXRjaCAoZmllbGRObykge1xuICAgICAgICBjYXNlIC8qIGJvb2wgbXV0ZWQgKi8gMTpcbiAgICAgICAgICBtZXNzYWdlLm11dGVkID0gcmVhZGVyLmJvb2woKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBsZXQgdSA9IG9wdGlvbnMucmVhZFVua25vd25GaWVsZDtcbiAgICAgICAgICBpZiAodSA9PT0gJ3Rocm93JylcbiAgICAgICAgICAgIHRocm93IG5ldyBnbG9iYWxUaGlzLkVycm9yKFxuICAgICAgICAgICAgICBgVW5rbm93biBmaWVsZCAke2ZpZWxkTm99ICh3aXJlIHR5cGUgJHt3aXJlVHlwZX0pIGZvciAke3RoaXMudHlwZU5hbWV9YCxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgbGV0IGQgPSByZWFkZXIuc2tpcCh3aXJlVHlwZSk7XG4gICAgICAgICAgaWYgKHUgIT09IGZhbHNlKVxuICAgICAgICAgICAgKHUgPT09IHRydWUgPyBVbmtub3duRmllbGRIYW5kbGVyLm9uUmVhZCA6IHUpKFxuICAgICAgICAgICAgICB0aGlzLnR5cGVOYW1lLFxuICAgICAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICAgICAgICBmaWVsZE5vLFxuICAgICAgICAgICAgICB3aXJlVHlwZSxcbiAgICAgICAgICAgICAgZCxcbiAgICAgICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG4gIGludGVybmFsQmluYXJ5V3JpdGUoXG4gICAgbWVzc2FnZTogQXVkaW9NdXRlQ2hhbmdlZCxcbiAgICB3cml0ZXI6IElCaW5hcnlXcml0ZXIsXG4gICAgb3B0aW9uczogQmluYXJ5V3JpdGVPcHRpb25zLFxuICApOiBJQmluYXJ5V3JpdGVyIHtcbiAgICAvKiBib29sIG11dGVkID0gMTsgKi9cbiAgICBpZiAobWVzc2FnZS5tdXRlZCAhPT0gZmFsc2UpXG4gICAgICB3cml0ZXIudGFnKDEsIFdpcmVUeXBlLlZhcmludCkuYm9vbChtZXNzYWdlLm11dGVkKTtcbiAgICBsZXQgdSA9IG9wdGlvbnMud3JpdGVVbmtub3duRmllbGRzO1xuICAgIGlmICh1ICE9PSBmYWxzZSlcbiAgICAgICh1ID09IHRydWUgPyBVbmtub3duRmllbGRIYW5kbGVyLm9uV3JpdGUgOiB1KShcbiAgICAgICAgdGhpcy50eXBlTmFtZSxcbiAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgd3JpdGVyLFxuICAgICAgKTtcbiAgICByZXR1cm4gd3JpdGVyO1xuICB9XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgTWVzc2FnZVR5cGUgZm9yIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5zaWduYWwuQXVkaW9NdXRlQ2hhbmdlZFxuICovXG5leHBvcnQgY29uc3QgQXVkaW9NdXRlQ2hhbmdlZCA9IG5ldyBBdWRpb011dGVDaGFuZ2VkJFR5cGUoKTtcbi8vIEBnZW5lcmF0ZWQgbWVzc2FnZSB0eXBlIHdpdGggcmVmbGVjdGlvbiBpbmZvcm1hdGlvbiwgbWF5IHByb3ZpZGUgc3BlZWQgb3B0aW1pemVkIG1ldGhvZHNcbmNsYXNzIFZpZGVvTXV0ZUNoYW5nZWQkVHlwZSBleHRlbmRzIE1lc3NhZ2VUeXBlPFZpZGVvTXV0ZUNoYW5nZWQ+IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoJ3N0cmVhbS52aWRlby5zZnUuc2lnbmFsLlZpZGVvTXV0ZUNoYW5nZWQnLCBbXG4gICAgICB7IG5vOiAyLCBuYW1lOiAnbXV0ZWQnLCBraW5kOiAnc2NhbGFyJywgVDogOCAvKlNjYWxhclR5cGUuQk9PTCovIH0sXG4gICAgXSk7XG4gIH1cbiAgY3JlYXRlKHZhbHVlPzogUGFydGlhbE1lc3NhZ2U8VmlkZW9NdXRlQ2hhbmdlZD4pOiBWaWRlb011dGVDaGFuZ2VkIHtcbiAgICBjb25zdCBtZXNzYWdlID0gZ2xvYmFsVGhpcy5PYmplY3QuY3JlYXRlKHRoaXMubWVzc2FnZVByb3RvdHlwZSEpO1xuICAgIG1lc3NhZ2UubXV0ZWQgPSBmYWxzZTtcbiAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZClcbiAgICAgIHJlZmxlY3Rpb25NZXJnZVBhcnRpYWw8VmlkZW9NdXRlQ2hhbmdlZD4odGhpcywgbWVzc2FnZSwgdmFsdWUpO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG4gIGludGVybmFsQmluYXJ5UmVhZChcbiAgICByZWFkZXI6IElCaW5hcnlSZWFkZXIsXG4gICAgbGVuZ3RoOiBudW1iZXIsXG4gICAgb3B0aW9uczogQmluYXJ5UmVhZE9wdGlvbnMsXG4gICAgdGFyZ2V0PzogVmlkZW9NdXRlQ2hhbmdlZCxcbiAgKTogVmlkZW9NdXRlQ2hhbmdlZCB7XG4gICAgbGV0IG1lc3NhZ2UgPSB0YXJnZXQgPz8gdGhpcy5jcmVhdGUoKSxcbiAgICAgIGVuZCA9IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgIGxldCBbZmllbGRObywgd2lyZVR5cGVdID0gcmVhZGVyLnRhZygpO1xuICAgICAgc3dpdGNoIChmaWVsZE5vKSB7XG4gICAgICAgIGNhc2UgLyogYm9vbCBtdXRlZCAqLyAyOlxuICAgICAgICAgIG1lc3NhZ2UubXV0ZWQgPSByZWFkZXIuYm9vbCgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGxldCB1ID0gb3B0aW9ucy5yZWFkVW5rbm93bkZpZWxkO1xuICAgICAgICAgIGlmICh1ID09PSAndGhyb3cnKVxuICAgICAgICAgICAgdGhyb3cgbmV3IGdsb2JhbFRoaXMuRXJyb3IoXG4gICAgICAgICAgICAgIGBVbmtub3duIGZpZWxkICR7ZmllbGROb30gKHdpcmUgdHlwZSAke3dpcmVUeXBlfSkgZm9yICR7dGhpcy50eXBlTmFtZX1gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICBsZXQgZCA9IHJlYWRlci5za2lwKHdpcmVUeXBlKTtcbiAgICAgICAgICBpZiAodSAhPT0gZmFsc2UpXG4gICAgICAgICAgICAodSA9PT0gdHJ1ZSA/IFVua25vd25GaWVsZEhhbmRsZXIub25SZWFkIDogdSkoXG4gICAgICAgICAgICAgIHRoaXMudHlwZU5hbWUsXG4gICAgICAgICAgICAgIG1lc3NhZ2UsXG4gICAgICAgICAgICAgIGZpZWxkTm8sXG4gICAgICAgICAgICAgIHdpcmVUeXBlLFxuICAgICAgICAgICAgICBkLFxuICAgICAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH1cbiAgaW50ZXJuYWxCaW5hcnlXcml0ZShcbiAgICBtZXNzYWdlOiBWaWRlb011dGVDaGFuZ2VkLFxuICAgIHdyaXRlcjogSUJpbmFyeVdyaXRlcixcbiAgICBvcHRpb25zOiBCaW5hcnlXcml0ZU9wdGlvbnMsXG4gICk6IElCaW5hcnlXcml0ZXIge1xuICAgIC8qIGJvb2wgbXV0ZWQgPSAyOyAqL1xuICAgIGlmIChtZXNzYWdlLm11dGVkICE9PSBmYWxzZSlcbiAgICAgIHdyaXRlci50YWcoMiwgV2lyZVR5cGUuVmFyaW50KS5ib29sKG1lc3NhZ2UubXV0ZWQpO1xuICAgIGxldCB1ID0gb3B0aW9ucy53cml0ZVVua25vd25GaWVsZHM7XG4gICAgaWYgKHUgIT09IGZhbHNlKVxuICAgICAgKHUgPT0gdHJ1ZSA/IFVua25vd25GaWVsZEhhbmRsZXIub25Xcml0ZSA6IHUpKFxuICAgICAgICB0aGlzLnR5cGVOYW1lLFxuICAgICAgICBtZXNzYWdlLFxuICAgICAgICB3cml0ZXIsXG4gICAgICApO1xuICAgIHJldHVybiB3cml0ZXI7XG4gIH1cbn1cbi8qKlxuICogQGdlbmVyYXRlZCBNZXNzYWdlVHlwZSBmb3IgcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5WaWRlb011dGVDaGFuZ2VkXG4gKi9cbmV4cG9ydCBjb25zdCBWaWRlb011dGVDaGFuZ2VkID0gbmV3IFZpZGVvTXV0ZUNoYW5nZWQkVHlwZSgpO1xuLy8gQGdlbmVyYXRlZCBtZXNzYWdlIHR5cGUgd2l0aCByZWZsZWN0aW9uIGluZm9ybWF0aW9uLCBtYXkgcHJvdmlkZSBzcGVlZCBvcHRpbWl6ZWQgbWV0aG9kc1xuY2xhc3MgVXBkYXRlU3Vic2NyaXB0aW9uc1JlcXVlc3QkVHlwZSBleHRlbmRzIE1lc3NhZ2VUeXBlPFVwZGF0ZVN1YnNjcmlwdGlvbnNSZXF1ZXN0PiB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCdzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5VcGRhdGVTdWJzY3JpcHRpb25zUmVxdWVzdCcsIFtcbiAgICAgIHsgbm86IDIsIG5hbWU6ICdzZXNzaW9uX2lkJywga2luZDogJ3NjYWxhcicsIFQ6IDkgLypTY2FsYXJUeXBlLlNUUklORyovIH0sXG4gICAgICB7XG4gICAgICAgIG5vOiAzLFxuICAgICAgICBuYW1lOiAndHJhY2tzJyxcbiAgICAgICAga2luZDogJ21lc3NhZ2UnLFxuICAgICAgICByZXBlYXQ6IDEgLypSZXBlYXRUeXBlLlBBQ0tFRCovLFxuICAgICAgICBUOiAoKSA9PiBUcmFja1N1YnNjcmlwdGlvbkRldGFpbHMsXG4gICAgICB9LFxuICAgIF0pO1xuICB9XG4gIGNyZWF0ZShcbiAgICB2YWx1ZT86IFBhcnRpYWxNZXNzYWdlPFVwZGF0ZVN1YnNjcmlwdGlvbnNSZXF1ZXN0PixcbiAgKTogVXBkYXRlU3Vic2NyaXB0aW9uc1JlcXVlc3Qge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBnbG9iYWxUaGlzLk9iamVjdC5jcmVhdGUodGhpcy5tZXNzYWdlUHJvdG90eXBlISk7XG4gICAgbWVzc2FnZS5zZXNzaW9uSWQgPSAnJztcbiAgICBtZXNzYWdlLnRyYWNrcyA9IFtdO1xuICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKVxuICAgICAgcmVmbGVjdGlvbk1lcmdlUGFydGlhbDxVcGRhdGVTdWJzY3JpcHRpb25zUmVxdWVzdD4odGhpcywgbWVzc2FnZSwgdmFsdWUpO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG4gIGludGVybmFsQmluYXJ5UmVhZChcbiAgICByZWFkZXI6IElCaW5hcnlSZWFkZXIsXG4gICAgbGVuZ3RoOiBudW1iZXIsXG4gICAgb3B0aW9uczogQmluYXJ5UmVhZE9wdGlvbnMsXG4gICAgdGFyZ2V0PzogVXBkYXRlU3Vic2NyaXB0aW9uc1JlcXVlc3QsXG4gICk6IFVwZGF0ZVN1YnNjcmlwdGlvbnNSZXF1ZXN0IHtcbiAgICBsZXQgbWVzc2FnZSA9IHRhcmdldCA/PyB0aGlzLmNyZWF0ZSgpLFxuICAgICAgZW5kID0gcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgbGV0IFtmaWVsZE5vLCB3aXJlVHlwZV0gPSByZWFkZXIudGFnKCk7XG4gICAgICBzd2l0Y2ggKGZpZWxkTm8pIHtcbiAgICAgICAgY2FzZSAvKiBzdHJpbmcgc2Vzc2lvbl9pZCAqLyAyOlxuICAgICAgICAgIG1lc3NhZ2Uuc2Vzc2lvbklkID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIC8qIHJlcGVhdGVkIHN0cmVhbS52aWRlby5zZnUuc2lnbmFsLlRyYWNrU3Vic2NyaXB0aW9uRGV0YWlscyB0cmFja3MgKi8gMzpcbiAgICAgICAgICBtZXNzYWdlLnRyYWNrcy5wdXNoKFxuICAgICAgICAgICAgVHJhY2tTdWJzY3JpcHRpb25EZXRhaWxzLmludGVybmFsQmluYXJ5UmVhZChcbiAgICAgICAgICAgICAgcmVhZGVyLFxuICAgICAgICAgICAgICByZWFkZXIudWludDMyKCksXG4gICAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICApLFxuICAgICAgICAgICk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgbGV0IHUgPSBvcHRpb25zLnJlYWRVbmtub3duRmllbGQ7XG4gICAgICAgICAgaWYgKHUgPT09ICd0aHJvdycpXG4gICAgICAgICAgICB0aHJvdyBuZXcgZ2xvYmFsVGhpcy5FcnJvcihcbiAgICAgICAgICAgICAgYFVua25vd24gZmllbGQgJHtmaWVsZE5vfSAod2lyZSB0eXBlICR7d2lyZVR5cGV9KSBmb3IgJHt0aGlzLnR5cGVOYW1lfWAsXG4gICAgICAgICAgICApO1xuICAgICAgICAgIGxldCBkID0gcmVhZGVyLnNraXAod2lyZVR5cGUpO1xuICAgICAgICAgIGlmICh1ICE9PSBmYWxzZSlcbiAgICAgICAgICAgICh1ID09PSB0cnVlID8gVW5rbm93bkZpZWxkSGFuZGxlci5vblJlYWQgOiB1KShcbiAgICAgICAgICAgICAgdGhpcy50eXBlTmFtZSxcbiAgICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgICAgZmllbGRObyxcbiAgICAgICAgICAgICAgd2lyZVR5cGUsXG4gICAgICAgICAgICAgIGQsXG4gICAgICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxuICBpbnRlcm5hbEJpbmFyeVdyaXRlKFxuICAgIG1lc3NhZ2U6IFVwZGF0ZVN1YnNjcmlwdGlvbnNSZXF1ZXN0LFxuICAgIHdyaXRlcjogSUJpbmFyeVdyaXRlcixcbiAgICBvcHRpb25zOiBCaW5hcnlXcml0ZU9wdGlvbnMsXG4gICk6IElCaW5hcnlXcml0ZXIge1xuICAgIC8qIHN0cmluZyBzZXNzaW9uX2lkID0gMjsgKi9cbiAgICBpZiAobWVzc2FnZS5zZXNzaW9uSWQgIT09ICcnKVxuICAgICAgd3JpdGVyLnRhZygyLCBXaXJlVHlwZS5MZW5ndGhEZWxpbWl0ZWQpLnN0cmluZyhtZXNzYWdlLnNlc3Npb25JZCk7XG4gICAgLyogcmVwZWF0ZWQgc3RyZWFtLnZpZGVvLnNmdS5zaWduYWwuVHJhY2tTdWJzY3JpcHRpb25EZXRhaWxzIHRyYWNrcyA9IDM7ICovXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtZXNzYWdlLnRyYWNrcy5sZW5ndGg7IGkrKylcbiAgICAgIFRyYWNrU3Vic2NyaXB0aW9uRGV0YWlscy5pbnRlcm5hbEJpbmFyeVdyaXRlKFxuICAgICAgICBtZXNzYWdlLnRyYWNrc1tpXSxcbiAgICAgICAgd3JpdGVyLnRhZygzLCBXaXJlVHlwZS5MZW5ndGhEZWxpbWl0ZWQpLmZvcmsoKSxcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICkuam9pbigpO1xuICAgIGxldCB1ID0gb3B0aW9ucy53cml0ZVVua25vd25GaWVsZHM7XG4gICAgaWYgKHUgIT09IGZhbHNlKVxuICAgICAgKHUgPT0gdHJ1ZSA/IFVua25vd25GaWVsZEhhbmRsZXIub25Xcml0ZSA6IHUpKFxuICAgICAgICB0aGlzLnR5cGVOYW1lLFxuICAgICAgICBtZXNzYWdlLFxuICAgICAgICB3cml0ZXIsXG4gICAgICApO1xuICAgIHJldHVybiB3cml0ZXI7XG4gIH1cbn1cbi8qKlxuICogQGdlbmVyYXRlZCBNZXNzYWdlVHlwZSBmb3IgcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5VcGRhdGVTdWJzY3JpcHRpb25zUmVxdWVzdFxuICovXG5leHBvcnQgY29uc3QgVXBkYXRlU3Vic2NyaXB0aW9uc1JlcXVlc3QgPSBuZXcgVXBkYXRlU3Vic2NyaXB0aW9uc1JlcXVlc3QkVHlwZSgpO1xuLy8gQGdlbmVyYXRlZCBtZXNzYWdlIHR5cGUgd2l0aCByZWZsZWN0aW9uIGluZm9ybWF0aW9uLCBtYXkgcHJvdmlkZSBzcGVlZCBvcHRpbWl6ZWQgbWV0aG9kc1xuY2xhc3MgVXBkYXRlU3Vic2NyaXB0aW9uc1Jlc3BvbnNlJFR5cGUgZXh0ZW5kcyBNZXNzYWdlVHlwZTxVcGRhdGVTdWJzY3JpcHRpb25zUmVzcG9uc2U+IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoJ3N0cmVhbS52aWRlby5zZnUuc2lnbmFsLlVwZGF0ZVN1YnNjcmlwdGlvbnNSZXNwb25zZScsIFtcbiAgICAgIHsgbm86IDQsIG5hbWU6ICdlcnJvcicsIGtpbmQ6ICdtZXNzYWdlJywgVDogKCkgPT4gRXJyb3IgfSxcbiAgICBdKTtcbiAgfVxuICBjcmVhdGUoXG4gICAgdmFsdWU/OiBQYXJ0aWFsTWVzc2FnZTxVcGRhdGVTdWJzY3JpcHRpb25zUmVzcG9uc2U+LFxuICApOiBVcGRhdGVTdWJzY3JpcHRpb25zUmVzcG9uc2Uge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBnbG9iYWxUaGlzLk9iamVjdC5jcmVhdGUodGhpcy5tZXNzYWdlUHJvdG90eXBlISk7XG4gICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpXG4gICAgICByZWZsZWN0aW9uTWVyZ2VQYXJ0aWFsPFVwZGF0ZVN1YnNjcmlwdGlvbnNSZXNwb25zZT4odGhpcywgbWVzc2FnZSwgdmFsdWUpO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG4gIGludGVybmFsQmluYXJ5UmVhZChcbiAgICByZWFkZXI6IElCaW5hcnlSZWFkZXIsXG4gICAgbGVuZ3RoOiBudW1iZXIsXG4gICAgb3B0aW9uczogQmluYXJ5UmVhZE9wdGlvbnMsXG4gICAgdGFyZ2V0PzogVXBkYXRlU3Vic2NyaXB0aW9uc1Jlc3BvbnNlLFxuICApOiBVcGRhdGVTdWJzY3JpcHRpb25zUmVzcG9uc2Uge1xuICAgIGxldCBtZXNzYWdlID0gdGFyZ2V0ID8/IHRoaXMuY3JlYXRlKCksXG4gICAgICBlbmQgPSByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBsZXQgW2ZpZWxkTm8sIHdpcmVUeXBlXSA9IHJlYWRlci50YWcoKTtcbiAgICAgIHN3aXRjaCAoZmllbGRObykge1xuICAgICAgICBjYXNlIC8qIHN0cmVhbS52aWRlby5zZnUubW9kZWxzLkVycm9yIGVycm9yICovIDQ6XG4gICAgICAgICAgbWVzc2FnZS5lcnJvciA9IEVycm9yLmludGVybmFsQmluYXJ5UmVhZChcbiAgICAgICAgICAgIHJlYWRlcixcbiAgICAgICAgICAgIHJlYWRlci51aW50MzIoKSxcbiAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICBtZXNzYWdlLmVycm9yLFxuICAgICAgICAgICk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgbGV0IHUgPSBvcHRpb25zLnJlYWRVbmtub3duRmllbGQ7XG4gICAgICAgICAgaWYgKHUgPT09ICd0aHJvdycpXG4gICAgICAgICAgICB0aHJvdyBuZXcgZ2xvYmFsVGhpcy5FcnJvcihcbiAgICAgICAgICAgICAgYFVua25vd24gZmllbGQgJHtmaWVsZE5vfSAod2lyZSB0eXBlICR7d2lyZVR5cGV9KSBmb3IgJHt0aGlzLnR5cGVOYW1lfWAsXG4gICAgICAgICAgICApO1xuICAgICAgICAgIGxldCBkID0gcmVhZGVyLnNraXAod2lyZVR5cGUpO1xuICAgICAgICAgIGlmICh1ICE9PSBmYWxzZSlcbiAgICAgICAgICAgICh1ID09PSB0cnVlID8gVW5rbm93bkZpZWxkSGFuZGxlci5vblJlYWQgOiB1KShcbiAgICAgICAgICAgICAgdGhpcy50eXBlTmFtZSxcbiAgICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgICAgZmllbGRObyxcbiAgICAgICAgICAgICAgd2lyZVR5cGUsXG4gICAgICAgICAgICAgIGQsXG4gICAgICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxuICBpbnRlcm5hbEJpbmFyeVdyaXRlKFxuICAgIG1lc3NhZ2U6IFVwZGF0ZVN1YnNjcmlwdGlvbnNSZXNwb25zZSxcbiAgICB3cml0ZXI6IElCaW5hcnlXcml0ZXIsXG4gICAgb3B0aW9uczogQmluYXJ5V3JpdGVPcHRpb25zLFxuICApOiBJQmluYXJ5V3JpdGVyIHtcbiAgICAvKiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5FcnJvciBlcnJvciA9IDQ7ICovXG4gICAgaWYgKG1lc3NhZ2UuZXJyb3IpXG4gICAgICBFcnJvci5pbnRlcm5hbEJpbmFyeVdyaXRlKFxuICAgICAgICBtZXNzYWdlLmVycm9yLFxuICAgICAgICB3cml0ZXIudGFnKDQsIFdpcmVUeXBlLkxlbmd0aERlbGltaXRlZCkuZm9yaygpLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgKS5qb2luKCk7XG4gICAgbGV0IHUgPSBvcHRpb25zLndyaXRlVW5rbm93bkZpZWxkcztcbiAgICBpZiAodSAhPT0gZmFsc2UpXG4gICAgICAodSA9PSB0cnVlID8gVW5rbm93bkZpZWxkSGFuZGxlci5vbldyaXRlIDogdSkoXG4gICAgICAgIHRoaXMudHlwZU5hbWUsXG4gICAgICAgIG1lc3NhZ2UsXG4gICAgICAgIHdyaXRlcixcbiAgICAgICk7XG4gICAgcmV0dXJuIHdyaXRlcjtcbiAgfVxufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIE1lc3NhZ2VUeXBlIGZvciBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUuc2lnbmFsLlVwZGF0ZVN1YnNjcmlwdGlvbnNSZXNwb25zZVxuICovXG5leHBvcnQgY29uc3QgVXBkYXRlU3Vic2NyaXB0aW9uc1Jlc3BvbnNlID1cbiAgbmV3IFVwZGF0ZVN1YnNjcmlwdGlvbnNSZXNwb25zZSRUeXBlKCk7XG4vLyBAZ2VuZXJhdGVkIG1lc3NhZ2UgdHlwZSB3aXRoIHJlZmxlY3Rpb24gaW5mb3JtYXRpb24sIG1heSBwcm92aWRlIHNwZWVkIG9wdGltaXplZCBtZXRob2RzXG5jbGFzcyBUcmFja1N1YnNjcmlwdGlvbkRldGFpbHMkVHlwZSBleHRlbmRzIE1lc3NhZ2VUeXBlPFRyYWNrU3Vic2NyaXB0aW9uRGV0YWlscz4ge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcignc3RyZWFtLnZpZGVvLnNmdS5zaWduYWwuVHJhY2tTdWJzY3JpcHRpb25EZXRhaWxzJywgW1xuICAgICAgeyBubzogMSwgbmFtZTogJ3VzZXJfaWQnLCBraW5kOiAnc2NhbGFyJywgVDogOSAvKlNjYWxhclR5cGUuU1RSSU5HKi8gfSxcbiAgICAgIHsgbm86IDIsIG5hbWU6ICdzZXNzaW9uX2lkJywga2luZDogJ3NjYWxhcicsIFQ6IDkgLypTY2FsYXJUeXBlLlNUUklORyovIH0sXG4gICAgICB7XG4gICAgICAgIG5vOiAzLFxuICAgICAgICBuYW1lOiAndHJhY2tfdHlwZScsXG4gICAgICAgIGtpbmQ6ICdlbnVtJyxcbiAgICAgICAgVDogKCkgPT4gW1xuICAgICAgICAgICdzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5UcmFja1R5cGUnLFxuICAgICAgICAgIFRyYWNrVHlwZSxcbiAgICAgICAgICAnVFJBQ0tfVFlQRV8nLFxuICAgICAgICBdLFxuICAgICAgfSxcbiAgICAgIHsgbm86IDQsIG5hbWU6ICdkaW1lbnNpb24nLCBraW5kOiAnbWVzc2FnZScsIFQ6ICgpID0+IFZpZGVvRGltZW5zaW9uIH0sXG4gICAgXSk7XG4gIH1cbiAgY3JlYXRlKFxuICAgIHZhbHVlPzogUGFydGlhbE1lc3NhZ2U8VHJhY2tTdWJzY3JpcHRpb25EZXRhaWxzPixcbiAgKTogVHJhY2tTdWJzY3JpcHRpb25EZXRhaWxzIHtcbiAgICBjb25zdCBtZXNzYWdlID0gZ2xvYmFsVGhpcy5PYmplY3QuY3JlYXRlKHRoaXMubWVzc2FnZVByb3RvdHlwZSEpO1xuICAgIG1lc3NhZ2UudXNlcklkID0gJyc7XG4gICAgbWVzc2FnZS5zZXNzaW9uSWQgPSAnJztcbiAgICBtZXNzYWdlLnRyYWNrVHlwZSA9IDA7XG4gICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpXG4gICAgICByZWZsZWN0aW9uTWVyZ2VQYXJ0aWFsPFRyYWNrU3Vic2NyaXB0aW9uRGV0YWlscz4odGhpcywgbWVzc2FnZSwgdmFsdWUpO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG4gIGludGVybmFsQmluYXJ5UmVhZChcbiAgICByZWFkZXI6IElCaW5hcnlSZWFkZXIsXG4gICAgbGVuZ3RoOiBudW1iZXIsXG4gICAgb3B0aW9uczogQmluYXJ5UmVhZE9wdGlvbnMsXG4gICAgdGFyZ2V0PzogVHJhY2tTdWJzY3JpcHRpb25EZXRhaWxzLFxuICApOiBUcmFja1N1YnNjcmlwdGlvbkRldGFpbHMge1xuICAgIGxldCBtZXNzYWdlID0gdGFyZ2V0ID8/IHRoaXMuY3JlYXRlKCksXG4gICAgICBlbmQgPSByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBsZXQgW2ZpZWxkTm8sIHdpcmVUeXBlXSA9IHJlYWRlci50YWcoKTtcbiAgICAgIHN3aXRjaCAoZmllbGRObykge1xuICAgICAgICBjYXNlIC8qIHN0cmluZyB1c2VyX2lkICovIDE6XG4gICAgICAgICAgbWVzc2FnZS51c2VySWQgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgLyogc3RyaW5nIHNlc3Npb25faWQgKi8gMjpcbiAgICAgICAgICBtZXNzYWdlLnNlc3Npb25JZCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAvKiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5UcmFja1R5cGUgdHJhY2tfdHlwZSAqLyAzOlxuICAgICAgICAgIG1lc3NhZ2UudHJhY2tUeXBlID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgLyogc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuVmlkZW9EaW1lbnNpb24gZGltZW5zaW9uICovIDQ6XG4gICAgICAgICAgbWVzc2FnZS5kaW1lbnNpb24gPSBWaWRlb0RpbWVuc2lvbi5pbnRlcm5hbEJpbmFyeVJlYWQoXG4gICAgICAgICAgICByZWFkZXIsXG4gICAgICAgICAgICByZWFkZXIudWludDMyKCksXG4gICAgICAgICAgICBvcHRpb25zLFxuICAgICAgICAgICAgbWVzc2FnZS5kaW1lbnNpb24sXG4gICAgICAgICAgKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBsZXQgdSA9IG9wdGlvbnMucmVhZFVua25vd25GaWVsZDtcbiAgICAgICAgICBpZiAodSA9PT0gJ3Rocm93JylcbiAgICAgICAgICAgIHRocm93IG5ldyBnbG9iYWxUaGlzLkVycm9yKFxuICAgICAgICAgICAgICBgVW5rbm93biBmaWVsZCAke2ZpZWxkTm99ICh3aXJlIHR5cGUgJHt3aXJlVHlwZX0pIGZvciAke3RoaXMudHlwZU5hbWV9YCxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgbGV0IGQgPSByZWFkZXIuc2tpcCh3aXJlVHlwZSk7XG4gICAgICAgICAgaWYgKHUgIT09IGZhbHNlKVxuICAgICAgICAgICAgKHUgPT09IHRydWUgPyBVbmtub3duRmllbGRIYW5kbGVyLm9uUmVhZCA6IHUpKFxuICAgICAgICAgICAgICB0aGlzLnR5cGVOYW1lLFxuICAgICAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICAgICAgICBmaWVsZE5vLFxuICAgICAgICAgICAgICB3aXJlVHlwZSxcbiAgICAgICAgICAgICAgZCxcbiAgICAgICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG4gIGludGVybmFsQmluYXJ5V3JpdGUoXG4gICAgbWVzc2FnZTogVHJhY2tTdWJzY3JpcHRpb25EZXRhaWxzLFxuICAgIHdyaXRlcjogSUJpbmFyeVdyaXRlcixcbiAgICBvcHRpb25zOiBCaW5hcnlXcml0ZU9wdGlvbnMsXG4gICk6IElCaW5hcnlXcml0ZXIge1xuICAgIC8qIHN0cmluZyB1c2VyX2lkID0gMTsgKi9cbiAgICBpZiAobWVzc2FnZS51c2VySWQgIT09ICcnKVxuICAgICAgd3JpdGVyLnRhZygxLCBXaXJlVHlwZS5MZW5ndGhEZWxpbWl0ZWQpLnN0cmluZyhtZXNzYWdlLnVzZXJJZCk7XG4gICAgLyogc3RyaW5nIHNlc3Npb25faWQgPSAyOyAqL1xuICAgIGlmIChtZXNzYWdlLnNlc3Npb25JZCAhPT0gJycpXG4gICAgICB3cml0ZXIudGFnKDIsIFdpcmVUeXBlLkxlbmd0aERlbGltaXRlZCkuc3RyaW5nKG1lc3NhZ2Uuc2Vzc2lvbklkKTtcbiAgICAvKiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5UcmFja1R5cGUgdHJhY2tfdHlwZSA9IDM7ICovXG4gICAgaWYgKG1lc3NhZ2UudHJhY2tUeXBlICE9PSAwKVxuICAgICAgd3JpdGVyLnRhZygzLCBXaXJlVHlwZS5WYXJpbnQpLmludDMyKG1lc3NhZ2UudHJhY2tUeXBlKTtcbiAgICAvKiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5WaWRlb0RpbWVuc2lvbiBkaW1lbnNpb24gPSA0OyAqL1xuICAgIGlmIChtZXNzYWdlLmRpbWVuc2lvbilcbiAgICAgIFZpZGVvRGltZW5zaW9uLmludGVybmFsQmluYXJ5V3JpdGUoXG4gICAgICAgIG1lc3NhZ2UuZGltZW5zaW9uLFxuICAgICAgICB3cml0ZXIudGFnKDQsIFdpcmVUeXBlLkxlbmd0aERlbGltaXRlZCkuZm9yaygpLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgKS5qb2luKCk7XG4gICAgbGV0IHUgPSBvcHRpb25zLndyaXRlVW5rbm93bkZpZWxkcztcbiAgICBpZiAodSAhPT0gZmFsc2UpXG4gICAgICAodSA9PSB0cnVlID8gVW5rbm93bkZpZWxkSGFuZGxlci5vbldyaXRlIDogdSkoXG4gICAgICAgIHRoaXMudHlwZU5hbWUsXG4gICAgICAgIG1lc3NhZ2UsXG4gICAgICAgIHdyaXRlcixcbiAgICAgICk7XG4gICAgcmV0dXJuIHdyaXRlcjtcbiAgfVxufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIE1lc3NhZ2VUeXBlIGZvciBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUuc2lnbmFsLlRyYWNrU3Vic2NyaXB0aW9uRGV0YWlsc1xuICovXG5leHBvcnQgY29uc3QgVHJhY2tTdWJzY3JpcHRpb25EZXRhaWxzID0gbmV3IFRyYWNrU3Vic2NyaXB0aW9uRGV0YWlscyRUeXBlKCk7XG4vLyBAZ2VuZXJhdGVkIG1lc3NhZ2UgdHlwZSB3aXRoIHJlZmxlY3Rpb24gaW5mb3JtYXRpb24sIG1heSBwcm92aWRlIHNwZWVkIG9wdGltaXplZCBtZXRob2RzXG5jbGFzcyBTZW5kQW5zd2VyUmVxdWVzdCRUeXBlIGV4dGVuZHMgTWVzc2FnZVR5cGU8U2VuZEFuc3dlclJlcXVlc3Q+IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoJ3N0cmVhbS52aWRlby5zZnUuc2lnbmFsLlNlbmRBbnN3ZXJSZXF1ZXN0JywgW1xuICAgICAge1xuICAgICAgICBubzogMSxcbiAgICAgICAgbmFtZTogJ3BlZXJfdHlwZScsXG4gICAgICAgIGtpbmQ6ICdlbnVtJyxcbiAgICAgICAgVDogKCkgPT4gWydzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5QZWVyVHlwZScsIFBlZXJUeXBlLCAnUEVFUl9UWVBFXyddLFxuICAgICAgfSxcbiAgICAgIHsgbm86IDIsIG5hbWU6ICdzZHAnLCBraW5kOiAnc2NhbGFyJywgVDogOSAvKlNjYWxhclR5cGUuU1RSSU5HKi8gfSxcbiAgICAgIHsgbm86IDMsIG5hbWU6ICdzZXNzaW9uX2lkJywga2luZDogJ3NjYWxhcicsIFQ6IDkgLypTY2FsYXJUeXBlLlNUUklORyovIH0sXG4gICAgXSk7XG4gIH1cbiAgY3JlYXRlKHZhbHVlPzogUGFydGlhbE1lc3NhZ2U8U2VuZEFuc3dlclJlcXVlc3Q+KTogU2VuZEFuc3dlclJlcXVlc3Qge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBnbG9iYWxUaGlzLk9iamVjdC5jcmVhdGUodGhpcy5tZXNzYWdlUHJvdG90eXBlISk7XG4gICAgbWVzc2FnZS5wZWVyVHlwZSA9IDA7XG4gICAgbWVzc2FnZS5zZHAgPSAnJztcbiAgICBtZXNzYWdlLnNlc3Npb25JZCA9ICcnO1xuICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKVxuICAgICAgcmVmbGVjdGlvbk1lcmdlUGFydGlhbDxTZW5kQW5zd2VyUmVxdWVzdD4odGhpcywgbWVzc2FnZSwgdmFsdWUpO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG4gIGludGVybmFsQmluYXJ5UmVhZChcbiAgICByZWFkZXI6IElCaW5hcnlSZWFkZXIsXG4gICAgbGVuZ3RoOiBudW1iZXIsXG4gICAgb3B0aW9uczogQmluYXJ5UmVhZE9wdGlvbnMsXG4gICAgdGFyZ2V0PzogU2VuZEFuc3dlclJlcXVlc3QsXG4gICk6IFNlbmRBbnN3ZXJSZXF1ZXN0IHtcbiAgICBsZXQgbWVzc2FnZSA9IHRhcmdldCA/PyB0aGlzLmNyZWF0ZSgpLFxuICAgICAgZW5kID0gcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgbGV0IFtmaWVsZE5vLCB3aXJlVHlwZV0gPSByZWFkZXIudGFnKCk7XG4gICAgICBzd2l0Y2ggKGZpZWxkTm8pIHtcbiAgICAgICAgY2FzZSAvKiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5QZWVyVHlwZSBwZWVyX3R5cGUgKi8gMTpcbiAgICAgICAgICBtZXNzYWdlLnBlZXJUeXBlID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgLyogc3RyaW5nIHNkcCAqLyAyOlxuICAgICAgICAgIG1lc3NhZ2Uuc2RwID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIC8qIHN0cmluZyBzZXNzaW9uX2lkICovIDM6XG4gICAgICAgICAgbWVzc2FnZS5zZXNzaW9uSWQgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgbGV0IHUgPSBvcHRpb25zLnJlYWRVbmtub3duRmllbGQ7XG4gICAgICAgICAgaWYgKHUgPT09ICd0aHJvdycpXG4gICAgICAgICAgICB0aHJvdyBuZXcgZ2xvYmFsVGhpcy5FcnJvcihcbiAgICAgICAgICAgICAgYFVua25vd24gZmllbGQgJHtmaWVsZE5vfSAod2lyZSB0eXBlICR7d2lyZVR5cGV9KSBmb3IgJHt0aGlzLnR5cGVOYW1lfWAsXG4gICAgICAgICAgICApO1xuICAgICAgICAgIGxldCBkID0gcmVhZGVyLnNraXAod2lyZVR5cGUpO1xuICAgICAgICAgIGlmICh1ICE9PSBmYWxzZSlcbiAgICAgICAgICAgICh1ID09PSB0cnVlID8gVW5rbm93bkZpZWxkSGFuZGxlci5vblJlYWQgOiB1KShcbiAgICAgICAgICAgICAgdGhpcy50eXBlTmFtZSxcbiAgICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgICAgZmllbGRObyxcbiAgICAgICAgICAgICAgd2lyZVR5cGUsXG4gICAgICAgICAgICAgIGQsXG4gICAgICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxuICBpbnRlcm5hbEJpbmFyeVdyaXRlKFxuICAgIG1lc3NhZ2U6IFNlbmRBbnN3ZXJSZXF1ZXN0LFxuICAgIHdyaXRlcjogSUJpbmFyeVdyaXRlcixcbiAgICBvcHRpb25zOiBCaW5hcnlXcml0ZU9wdGlvbnMsXG4gICk6IElCaW5hcnlXcml0ZXIge1xuICAgIC8qIHN0cmVhbS52aWRlby5zZnUubW9kZWxzLlBlZXJUeXBlIHBlZXJfdHlwZSA9IDE7ICovXG4gICAgaWYgKG1lc3NhZ2UucGVlclR5cGUgIT09IDApXG4gICAgICB3cml0ZXIudGFnKDEsIFdpcmVUeXBlLlZhcmludCkuaW50MzIobWVzc2FnZS5wZWVyVHlwZSk7XG4gICAgLyogc3RyaW5nIHNkcCA9IDI7ICovXG4gICAgaWYgKG1lc3NhZ2Uuc2RwICE9PSAnJylcbiAgICAgIHdyaXRlci50YWcoMiwgV2lyZVR5cGUuTGVuZ3RoRGVsaW1pdGVkKS5zdHJpbmcobWVzc2FnZS5zZHApO1xuICAgIC8qIHN0cmluZyBzZXNzaW9uX2lkID0gMzsgKi9cbiAgICBpZiAobWVzc2FnZS5zZXNzaW9uSWQgIT09ICcnKVxuICAgICAgd3JpdGVyLnRhZygzLCBXaXJlVHlwZS5MZW5ndGhEZWxpbWl0ZWQpLnN0cmluZyhtZXNzYWdlLnNlc3Npb25JZCk7XG4gICAgbGV0IHUgPSBvcHRpb25zLndyaXRlVW5rbm93bkZpZWxkcztcbiAgICBpZiAodSAhPT0gZmFsc2UpXG4gICAgICAodSA9PSB0cnVlID8gVW5rbm93bkZpZWxkSGFuZGxlci5vbldyaXRlIDogdSkoXG4gICAgICAgIHRoaXMudHlwZU5hbWUsXG4gICAgICAgIG1lc3NhZ2UsXG4gICAgICAgIHdyaXRlcixcbiAgICAgICk7XG4gICAgcmV0dXJuIHdyaXRlcjtcbiAgfVxufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIE1lc3NhZ2VUeXBlIGZvciBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUuc2lnbmFsLlNlbmRBbnN3ZXJSZXF1ZXN0XG4gKi9cbmV4cG9ydCBjb25zdCBTZW5kQW5zd2VyUmVxdWVzdCA9IG5ldyBTZW5kQW5zd2VyUmVxdWVzdCRUeXBlKCk7XG4vLyBAZ2VuZXJhdGVkIG1lc3NhZ2UgdHlwZSB3aXRoIHJlZmxlY3Rpb24gaW5mb3JtYXRpb24sIG1heSBwcm92aWRlIHNwZWVkIG9wdGltaXplZCBtZXRob2RzXG5jbGFzcyBTZW5kQW5zd2VyUmVzcG9uc2UkVHlwZSBleHRlbmRzIE1lc3NhZ2VUeXBlPFNlbmRBbnN3ZXJSZXNwb25zZT4ge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcignc3RyZWFtLnZpZGVvLnNmdS5zaWduYWwuU2VuZEFuc3dlclJlc3BvbnNlJywgW1xuICAgICAgeyBubzogNCwgbmFtZTogJ2Vycm9yJywga2luZDogJ21lc3NhZ2UnLCBUOiAoKSA9PiBFcnJvciB9LFxuICAgIF0pO1xuICB9XG4gIGNyZWF0ZSh2YWx1ZT86IFBhcnRpYWxNZXNzYWdlPFNlbmRBbnN3ZXJSZXNwb25zZT4pOiBTZW5kQW5zd2VyUmVzcG9uc2Uge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBnbG9iYWxUaGlzLk9iamVjdC5jcmVhdGUodGhpcy5tZXNzYWdlUHJvdG90eXBlISk7XG4gICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpXG4gICAgICByZWZsZWN0aW9uTWVyZ2VQYXJ0aWFsPFNlbmRBbnN3ZXJSZXNwb25zZT4odGhpcywgbWVzc2FnZSwgdmFsdWUpO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG4gIGludGVybmFsQmluYXJ5UmVhZChcbiAgICByZWFkZXI6IElCaW5hcnlSZWFkZXIsXG4gICAgbGVuZ3RoOiBudW1iZXIsXG4gICAgb3B0aW9uczogQmluYXJ5UmVhZE9wdGlvbnMsXG4gICAgdGFyZ2V0PzogU2VuZEFuc3dlclJlc3BvbnNlLFxuICApOiBTZW5kQW5zd2VyUmVzcG9uc2Uge1xuICAgIGxldCBtZXNzYWdlID0gdGFyZ2V0ID8/IHRoaXMuY3JlYXRlKCksXG4gICAgICBlbmQgPSByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBsZXQgW2ZpZWxkTm8sIHdpcmVUeXBlXSA9IHJlYWRlci50YWcoKTtcbiAgICAgIHN3aXRjaCAoZmllbGRObykge1xuICAgICAgICBjYXNlIC8qIHN0cmVhbS52aWRlby5zZnUubW9kZWxzLkVycm9yIGVycm9yICovIDQ6XG4gICAgICAgICAgbWVzc2FnZS5lcnJvciA9IEVycm9yLmludGVybmFsQmluYXJ5UmVhZChcbiAgICAgICAgICAgIHJlYWRlcixcbiAgICAgICAgICAgIHJlYWRlci51aW50MzIoKSxcbiAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICBtZXNzYWdlLmVycm9yLFxuICAgICAgICAgICk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgbGV0IHUgPSBvcHRpb25zLnJlYWRVbmtub3duRmllbGQ7XG4gICAgICAgICAgaWYgKHUgPT09ICd0aHJvdycpXG4gICAgICAgICAgICB0aHJvdyBuZXcgZ2xvYmFsVGhpcy5FcnJvcihcbiAgICAgICAgICAgICAgYFVua25vd24gZmllbGQgJHtmaWVsZE5vfSAod2lyZSB0eXBlICR7d2lyZVR5cGV9KSBmb3IgJHt0aGlzLnR5cGVOYW1lfWAsXG4gICAgICAgICAgICApO1xuICAgICAgICAgIGxldCBkID0gcmVhZGVyLnNraXAod2lyZVR5cGUpO1xuICAgICAgICAgIGlmICh1ICE9PSBmYWxzZSlcbiAgICAgICAgICAgICh1ID09PSB0cnVlID8gVW5rbm93bkZpZWxkSGFuZGxlci5vblJlYWQgOiB1KShcbiAgICAgICAgICAgICAgdGhpcy50eXBlTmFtZSxcbiAgICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgICAgZmllbGRObyxcbiAgICAgICAgICAgICAgd2lyZVR5cGUsXG4gICAgICAgICAgICAgIGQsXG4gICAgICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxuICBpbnRlcm5hbEJpbmFyeVdyaXRlKFxuICAgIG1lc3NhZ2U6IFNlbmRBbnN3ZXJSZXNwb25zZSxcbiAgICB3cml0ZXI6IElCaW5hcnlXcml0ZXIsXG4gICAgb3B0aW9uczogQmluYXJ5V3JpdGVPcHRpb25zLFxuICApOiBJQmluYXJ5V3JpdGVyIHtcbiAgICAvKiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5FcnJvciBlcnJvciA9IDQ7ICovXG4gICAgaWYgKG1lc3NhZ2UuZXJyb3IpXG4gICAgICBFcnJvci5pbnRlcm5hbEJpbmFyeVdyaXRlKFxuICAgICAgICBtZXNzYWdlLmVycm9yLFxuICAgICAgICB3cml0ZXIudGFnKDQsIFdpcmVUeXBlLkxlbmd0aERlbGltaXRlZCkuZm9yaygpLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgKS5qb2luKCk7XG4gICAgbGV0IHUgPSBvcHRpb25zLndyaXRlVW5rbm93bkZpZWxkcztcbiAgICBpZiAodSAhPT0gZmFsc2UpXG4gICAgICAodSA9PSB0cnVlID8gVW5rbm93bkZpZWxkSGFuZGxlci5vbldyaXRlIDogdSkoXG4gICAgICAgIHRoaXMudHlwZU5hbWUsXG4gICAgICAgIG1lc3NhZ2UsXG4gICAgICAgIHdyaXRlcixcbiAgICAgICk7XG4gICAgcmV0dXJuIHdyaXRlcjtcbiAgfVxufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIE1lc3NhZ2VUeXBlIGZvciBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUuc2lnbmFsLlNlbmRBbnN3ZXJSZXNwb25zZVxuICovXG5leHBvcnQgY29uc3QgU2VuZEFuc3dlclJlc3BvbnNlID0gbmV3IFNlbmRBbnN3ZXJSZXNwb25zZSRUeXBlKCk7XG4vLyBAZ2VuZXJhdGVkIG1lc3NhZ2UgdHlwZSB3aXRoIHJlZmxlY3Rpb24gaW5mb3JtYXRpb24sIG1heSBwcm92aWRlIHNwZWVkIG9wdGltaXplZCBtZXRob2RzXG5jbGFzcyBJQ0VUcmlja2xlUmVzcG9uc2UkVHlwZSBleHRlbmRzIE1lc3NhZ2VUeXBlPElDRVRyaWNrbGVSZXNwb25zZT4ge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcignc3RyZWFtLnZpZGVvLnNmdS5zaWduYWwuSUNFVHJpY2tsZVJlc3BvbnNlJywgW1xuICAgICAgeyBubzogNCwgbmFtZTogJ2Vycm9yJywga2luZDogJ21lc3NhZ2UnLCBUOiAoKSA9PiBFcnJvciB9LFxuICAgIF0pO1xuICB9XG4gIGNyZWF0ZSh2YWx1ZT86IFBhcnRpYWxNZXNzYWdlPElDRVRyaWNrbGVSZXNwb25zZT4pOiBJQ0VUcmlja2xlUmVzcG9uc2Uge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBnbG9iYWxUaGlzLk9iamVjdC5jcmVhdGUodGhpcy5tZXNzYWdlUHJvdG90eXBlISk7XG4gICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpXG4gICAgICByZWZsZWN0aW9uTWVyZ2VQYXJ0aWFsPElDRVRyaWNrbGVSZXNwb25zZT4odGhpcywgbWVzc2FnZSwgdmFsdWUpO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG4gIGludGVybmFsQmluYXJ5UmVhZChcbiAgICByZWFkZXI6IElCaW5hcnlSZWFkZXIsXG4gICAgbGVuZ3RoOiBudW1iZXIsXG4gICAgb3B0aW9uczogQmluYXJ5UmVhZE9wdGlvbnMsXG4gICAgdGFyZ2V0PzogSUNFVHJpY2tsZVJlc3BvbnNlLFxuICApOiBJQ0VUcmlja2xlUmVzcG9uc2Uge1xuICAgIGxldCBtZXNzYWdlID0gdGFyZ2V0ID8/IHRoaXMuY3JlYXRlKCksXG4gICAgICBlbmQgPSByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBsZXQgW2ZpZWxkTm8sIHdpcmVUeXBlXSA9IHJlYWRlci50YWcoKTtcbiAgICAgIHN3aXRjaCAoZmllbGRObykge1xuICAgICAgICBjYXNlIC8qIHN0cmVhbS52aWRlby5zZnUubW9kZWxzLkVycm9yIGVycm9yICovIDQ6XG4gICAgICAgICAgbWVzc2FnZS5lcnJvciA9IEVycm9yLmludGVybmFsQmluYXJ5UmVhZChcbiAgICAgICAgICAgIHJlYWRlcixcbiAgICAgICAgICAgIHJlYWRlci51aW50MzIoKSxcbiAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICBtZXNzYWdlLmVycm9yLFxuICAgICAgICAgICk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgbGV0IHUgPSBvcHRpb25zLnJlYWRVbmtub3duRmllbGQ7XG4gICAgICAgICAgaWYgKHUgPT09ICd0aHJvdycpXG4gICAgICAgICAgICB0aHJvdyBuZXcgZ2xvYmFsVGhpcy5FcnJvcihcbiAgICAgICAgICAgICAgYFVua25vd24gZmllbGQgJHtmaWVsZE5vfSAod2lyZSB0eXBlICR7d2lyZVR5cGV9KSBmb3IgJHt0aGlzLnR5cGVOYW1lfWAsXG4gICAgICAgICAgICApO1xuICAgICAgICAgIGxldCBkID0gcmVhZGVyLnNraXAod2lyZVR5cGUpO1xuICAgICAgICAgIGlmICh1ICE9PSBmYWxzZSlcbiAgICAgICAgICAgICh1ID09PSB0cnVlID8gVW5rbm93bkZpZWxkSGFuZGxlci5vblJlYWQgOiB1KShcbiAgICAgICAgICAgICAgdGhpcy50eXBlTmFtZSxcbiAgICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgICAgZmllbGRObyxcbiAgICAgICAgICAgICAgd2lyZVR5cGUsXG4gICAgICAgICAgICAgIGQsXG4gICAgICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxuICBpbnRlcm5hbEJpbmFyeVdyaXRlKFxuICAgIG1lc3NhZ2U6IElDRVRyaWNrbGVSZXNwb25zZSxcbiAgICB3cml0ZXI6IElCaW5hcnlXcml0ZXIsXG4gICAgb3B0aW9uczogQmluYXJ5V3JpdGVPcHRpb25zLFxuICApOiBJQmluYXJ5V3JpdGVyIHtcbiAgICAvKiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5FcnJvciBlcnJvciA9IDQ7ICovXG4gICAgaWYgKG1lc3NhZ2UuZXJyb3IpXG4gICAgICBFcnJvci5pbnRlcm5hbEJpbmFyeVdyaXRlKFxuICAgICAgICBtZXNzYWdlLmVycm9yLFxuICAgICAgICB3cml0ZXIudGFnKDQsIFdpcmVUeXBlLkxlbmd0aERlbGltaXRlZCkuZm9yaygpLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgKS5qb2luKCk7XG4gICAgbGV0IHUgPSBvcHRpb25zLndyaXRlVW5rbm93bkZpZWxkcztcbiAgICBpZiAodSAhPT0gZmFsc2UpXG4gICAgICAodSA9PSB0cnVlID8gVW5rbm93bkZpZWxkSGFuZGxlci5vbldyaXRlIDogdSkoXG4gICAgICAgIHRoaXMudHlwZU5hbWUsXG4gICAgICAgIG1lc3NhZ2UsXG4gICAgICAgIHdyaXRlcixcbiAgICAgICk7XG4gICAgcmV0dXJuIHdyaXRlcjtcbiAgfVxufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIE1lc3NhZ2VUeXBlIGZvciBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUuc2lnbmFsLklDRVRyaWNrbGVSZXNwb25zZVxuICovXG5leHBvcnQgY29uc3QgSUNFVHJpY2tsZVJlc3BvbnNlID0gbmV3IElDRVRyaWNrbGVSZXNwb25zZSRUeXBlKCk7XG4vLyBAZ2VuZXJhdGVkIG1lc3NhZ2UgdHlwZSB3aXRoIHJlZmxlY3Rpb24gaW5mb3JtYXRpb24sIG1heSBwcm92aWRlIHNwZWVkIG9wdGltaXplZCBtZXRob2RzXG5jbGFzcyBTZXRQdWJsaXNoZXJSZXF1ZXN0JFR5cGUgZXh0ZW5kcyBNZXNzYWdlVHlwZTxTZXRQdWJsaXNoZXJSZXF1ZXN0PiB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCdzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5TZXRQdWJsaXNoZXJSZXF1ZXN0JywgW1xuICAgICAgeyBubzogMSwgbmFtZTogJ3NkcCcsIGtpbmQ6ICdzY2FsYXInLCBUOiA5IC8qU2NhbGFyVHlwZS5TVFJJTkcqLyB9LFxuICAgICAgeyBubzogMiwgbmFtZTogJ3Nlc3Npb25faWQnLCBraW5kOiAnc2NhbGFyJywgVDogOSAvKlNjYWxhclR5cGUuU1RSSU5HKi8gfSxcbiAgICAgIHtcbiAgICAgICAgbm86IDMsXG4gICAgICAgIG5hbWU6ICd0cmFja3MnLFxuICAgICAgICBraW5kOiAnbWVzc2FnZScsXG4gICAgICAgIHJlcGVhdDogMSAvKlJlcGVhdFR5cGUuUEFDS0VEKi8sXG4gICAgICAgIFQ6ICgpID0+IFRyYWNrSW5mbyxcbiAgICAgIH0sXG4gICAgXSk7XG4gIH1cbiAgY3JlYXRlKHZhbHVlPzogUGFydGlhbE1lc3NhZ2U8U2V0UHVibGlzaGVyUmVxdWVzdD4pOiBTZXRQdWJsaXNoZXJSZXF1ZXN0IHtcbiAgICBjb25zdCBtZXNzYWdlID0gZ2xvYmFsVGhpcy5PYmplY3QuY3JlYXRlKHRoaXMubWVzc2FnZVByb3RvdHlwZSEpO1xuICAgIG1lc3NhZ2Uuc2RwID0gJyc7XG4gICAgbWVzc2FnZS5zZXNzaW9uSWQgPSAnJztcbiAgICBtZXNzYWdlLnRyYWNrcyA9IFtdO1xuICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKVxuICAgICAgcmVmbGVjdGlvbk1lcmdlUGFydGlhbDxTZXRQdWJsaXNoZXJSZXF1ZXN0Pih0aGlzLCBtZXNzYWdlLCB2YWx1ZSk7XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH1cbiAgaW50ZXJuYWxCaW5hcnlSZWFkKFxuICAgIHJlYWRlcjogSUJpbmFyeVJlYWRlcixcbiAgICBsZW5ndGg6IG51bWJlcixcbiAgICBvcHRpb25zOiBCaW5hcnlSZWFkT3B0aW9ucyxcbiAgICB0YXJnZXQ/OiBTZXRQdWJsaXNoZXJSZXF1ZXN0LFxuICApOiBTZXRQdWJsaXNoZXJSZXF1ZXN0IHtcbiAgICBsZXQgbWVzc2FnZSA9IHRhcmdldCA/PyB0aGlzLmNyZWF0ZSgpLFxuICAgICAgZW5kID0gcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgbGV0IFtmaWVsZE5vLCB3aXJlVHlwZV0gPSByZWFkZXIudGFnKCk7XG4gICAgICBzd2l0Y2ggKGZpZWxkTm8pIHtcbiAgICAgICAgY2FzZSAvKiBzdHJpbmcgc2RwICovIDE6XG4gICAgICAgICAgbWVzc2FnZS5zZHAgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgLyogc3RyaW5nIHNlc3Npb25faWQgKi8gMjpcbiAgICAgICAgICBtZXNzYWdlLnNlc3Npb25JZCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAvKiByZXBlYXRlZCBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5UcmFja0luZm8gdHJhY2tzICovIDM6XG4gICAgICAgICAgbWVzc2FnZS50cmFja3MucHVzaChcbiAgICAgICAgICAgIFRyYWNrSW5mby5pbnRlcm5hbEJpbmFyeVJlYWQocmVhZGVyLCByZWFkZXIudWludDMyKCksIG9wdGlvbnMpLFxuICAgICAgICAgICk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgbGV0IHUgPSBvcHRpb25zLnJlYWRVbmtub3duRmllbGQ7XG4gICAgICAgICAgaWYgKHUgPT09ICd0aHJvdycpXG4gICAgICAgICAgICB0aHJvdyBuZXcgZ2xvYmFsVGhpcy5FcnJvcihcbiAgICAgICAgICAgICAgYFVua25vd24gZmllbGQgJHtmaWVsZE5vfSAod2lyZSB0eXBlICR7d2lyZVR5cGV9KSBmb3IgJHt0aGlzLnR5cGVOYW1lfWAsXG4gICAgICAgICAgICApO1xuICAgICAgICAgIGxldCBkID0gcmVhZGVyLnNraXAod2lyZVR5cGUpO1xuICAgICAgICAgIGlmICh1ICE9PSBmYWxzZSlcbiAgICAgICAgICAgICh1ID09PSB0cnVlID8gVW5rbm93bkZpZWxkSGFuZGxlci5vblJlYWQgOiB1KShcbiAgICAgICAgICAgICAgdGhpcy50eXBlTmFtZSxcbiAgICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgICAgZmllbGRObyxcbiAgICAgICAgICAgICAgd2lyZVR5cGUsXG4gICAgICAgICAgICAgIGQsXG4gICAgICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxuICBpbnRlcm5hbEJpbmFyeVdyaXRlKFxuICAgIG1lc3NhZ2U6IFNldFB1Ymxpc2hlclJlcXVlc3QsXG4gICAgd3JpdGVyOiBJQmluYXJ5V3JpdGVyLFxuICAgIG9wdGlvbnM6IEJpbmFyeVdyaXRlT3B0aW9ucyxcbiAgKTogSUJpbmFyeVdyaXRlciB7XG4gICAgLyogc3RyaW5nIHNkcCA9IDE7ICovXG4gICAgaWYgKG1lc3NhZ2Uuc2RwICE9PSAnJylcbiAgICAgIHdyaXRlci50YWcoMSwgV2lyZVR5cGUuTGVuZ3RoRGVsaW1pdGVkKS5zdHJpbmcobWVzc2FnZS5zZHApO1xuICAgIC8qIHN0cmluZyBzZXNzaW9uX2lkID0gMjsgKi9cbiAgICBpZiAobWVzc2FnZS5zZXNzaW9uSWQgIT09ICcnKVxuICAgICAgd3JpdGVyLnRhZygyLCBXaXJlVHlwZS5MZW5ndGhEZWxpbWl0ZWQpLnN0cmluZyhtZXNzYWdlLnNlc3Npb25JZCk7XG4gICAgLyogcmVwZWF0ZWQgc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuVHJhY2tJbmZvIHRyYWNrcyA9IDM7ICovXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtZXNzYWdlLnRyYWNrcy5sZW5ndGg7IGkrKylcbiAgICAgIFRyYWNrSW5mby5pbnRlcm5hbEJpbmFyeVdyaXRlKFxuICAgICAgICBtZXNzYWdlLnRyYWNrc1tpXSxcbiAgICAgICAgd3JpdGVyLnRhZygzLCBXaXJlVHlwZS5MZW5ndGhEZWxpbWl0ZWQpLmZvcmsoKSxcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICkuam9pbigpO1xuICAgIGxldCB1ID0gb3B0aW9ucy53cml0ZVVua25vd25GaWVsZHM7XG4gICAgaWYgKHUgIT09IGZhbHNlKVxuICAgICAgKHUgPT0gdHJ1ZSA/IFVua25vd25GaWVsZEhhbmRsZXIub25Xcml0ZSA6IHUpKFxuICAgICAgICB0aGlzLnR5cGVOYW1lLFxuICAgICAgICBtZXNzYWdlLFxuICAgICAgICB3cml0ZXIsXG4gICAgICApO1xuICAgIHJldHVybiB3cml0ZXI7XG4gIH1cbn1cbi8qKlxuICogQGdlbmVyYXRlZCBNZXNzYWdlVHlwZSBmb3IgcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5TZXRQdWJsaXNoZXJSZXF1ZXN0XG4gKi9cbmV4cG9ydCBjb25zdCBTZXRQdWJsaXNoZXJSZXF1ZXN0ID0gbmV3IFNldFB1Ymxpc2hlclJlcXVlc3QkVHlwZSgpO1xuLy8gQGdlbmVyYXRlZCBtZXNzYWdlIHR5cGUgd2l0aCByZWZsZWN0aW9uIGluZm9ybWF0aW9uLCBtYXkgcHJvdmlkZSBzcGVlZCBvcHRpbWl6ZWQgbWV0aG9kc1xuY2xhc3MgU2V0UHVibGlzaGVyUmVzcG9uc2UkVHlwZSBleHRlbmRzIE1lc3NhZ2VUeXBlPFNldFB1Ymxpc2hlclJlc3BvbnNlPiB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCdzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5TZXRQdWJsaXNoZXJSZXNwb25zZScsIFtcbiAgICAgIHsgbm86IDEsIG5hbWU6ICdzZHAnLCBraW5kOiAnc2NhbGFyJywgVDogOSAvKlNjYWxhclR5cGUuU1RSSU5HKi8gfSxcbiAgICAgIHsgbm86IDIsIG5hbWU6ICdzZXNzaW9uX2lkJywga2luZDogJ3NjYWxhcicsIFQ6IDkgLypTY2FsYXJUeXBlLlNUUklORyovIH0sXG4gICAgICB7IG5vOiAzLCBuYW1lOiAnaWNlX3Jlc3RhcnQnLCBraW5kOiAnc2NhbGFyJywgVDogOCAvKlNjYWxhclR5cGUuQk9PTCovIH0sXG4gICAgICB7IG5vOiA0LCBuYW1lOiAnZXJyb3InLCBraW5kOiAnbWVzc2FnZScsIFQ6ICgpID0+IEVycm9yIH0sXG4gICAgXSk7XG4gIH1cbiAgY3JlYXRlKHZhbHVlPzogUGFydGlhbE1lc3NhZ2U8U2V0UHVibGlzaGVyUmVzcG9uc2U+KTogU2V0UHVibGlzaGVyUmVzcG9uc2Uge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBnbG9iYWxUaGlzLk9iamVjdC5jcmVhdGUodGhpcy5tZXNzYWdlUHJvdG90eXBlISk7XG4gICAgbWVzc2FnZS5zZHAgPSAnJztcbiAgICBtZXNzYWdlLnNlc3Npb25JZCA9ICcnO1xuICAgIG1lc3NhZ2UuaWNlUmVzdGFydCA9IGZhbHNlO1xuICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKVxuICAgICAgcmVmbGVjdGlvbk1lcmdlUGFydGlhbDxTZXRQdWJsaXNoZXJSZXNwb25zZT4odGhpcywgbWVzc2FnZSwgdmFsdWUpO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG4gIGludGVybmFsQmluYXJ5UmVhZChcbiAgICByZWFkZXI6IElCaW5hcnlSZWFkZXIsXG4gICAgbGVuZ3RoOiBudW1iZXIsXG4gICAgb3B0aW9uczogQmluYXJ5UmVhZE9wdGlvbnMsXG4gICAgdGFyZ2V0PzogU2V0UHVibGlzaGVyUmVzcG9uc2UsXG4gICk6IFNldFB1Ymxpc2hlclJlc3BvbnNlIHtcbiAgICBsZXQgbWVzc2FnZSA9IHRhcmdldCA/PyB0aGlzLmNyZWF0ZSgpLFxuICAgICAgZW5kID0gcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgbGV0IFtmaWVsZE5vLCB3aXJlVHlwZV0gPSByZWFkZXIudGFnKCk7XG4gICAgICBzd2l0Y2ggKGZpZWxkTm8pIHtcbiAgICAgICAgY2FzZSAvKiBzdHJpbmcgc2RwICovIDE6XG4gICAgICAgICAgbWVzc2FnZS5zZHAgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgLyogc3RyaW5nIHNlc3Npb25faWQgKi8gMjpcbiAgICAgICAgICBtZXNzYWdlLnNlc3Npb25JZCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAvKiBib29sIGljZV9yZXN0YXJ0ICovIDM6XG4gICAgICAgICAgbWVzc2FnZS5pY2VSZXN0YXJ0ID0gcmVhZGVyLmJvb2woKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAvKiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5FcnJvciBlcnJvciAqLyA0OlxuICAgICAgICAgIG1lc3NhZ2UuZXJyb3IgPSBFcnJvci5pbnRlcm5hbEJpbmFyeVJlYWQoXG4gICAgICAgICAgICByZWFkZXIsXG4gICAgICAgICAgICByZWFkZXIudWludDMyKCksXG4gICAgICAgICAgICBvcHRpb25zLFxuICAgICAgICAgICAgbWVzc2FnZS5lcnJvcixcbiAgICAgICAgICApO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGxldCB1ID0gb3B0aW9ucy5yZWFkVW5rbm93bkZpZWxkO1xuICAgICAgICAgIGlmICh1ID09PSAndGhyb3cnKVxuICAgICAgICAgICAgdGhyb3cgbmV3IGdsb2JhbFRoaXMuRXJyb3IoXG4gICAgICAgICAgICAgIGBVbmtub3duIGZpZWxkICR7ZmllbGROb30gKHdpcmUgdHlwZSAke3dpcmVUeXBlfSkgZm9yICR7dGhpcy50eXBlTmFtZX1gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICBsZXQgZCA9IHJlYWRlci5za2lwKHdpcmVUeXBlKTtcbiAgICAgICAgICBpZiAodSAhPT0gZmFsc2UpXG4gICAgICAgICAgICAodSA9PT0gdHJ1ZSA/IFVua25vd25GaWVsZEhhbmRsZXIub25SZWFkIDogdSkoXG4gICAgICAgICAgICAgIHRoaXMudHlwZU5hbWUsXG4gICAgICAgICAgICAgIG1lc3NhZ2UsXG4gICAgICAgICAgICAgIGZpZWxkTm8sXG4gICAgICAgICAgICAgIHdpcmVUeXBlLFxuICAgICAgICAgICAgICBkLFxuICAgICAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH1cbiAgaW50ZXJuYWxCaW5hcnlXcml0ZShcbiAgICBtZXNzYWdlOiBTZXRQdWJsaXNoZXJSZXNwb25zZSxcbiAgICB3cml0ZXI6IElCaW5hcnlXcml0ZXIsXG4gICAgb3B0aW9uczogQmluYXJ5V3JpdGVPcHRpb25zLFxuICApOiBJQmluYXJ5V3JpdGVyIHtcbiAgICAvKiBzdHJpbmcgc2RwID0gMTsgKi9cbiAgICBpZiAobWVzc2FnZS5zZHAgIT09ICcnKVxuICAgICAgd3JpdGVyLnRhZygxLCBXaXJlVHlwZS5MZW5ndGhEZWxpbWl0ZWQpLnN0cmluZyhtZXNzYWdlLnNkcCk7XG4gICAgLyogc3RyaW5nIHNlc3Npb25faWQgPSAyOyAqL1xuICAgIGlmIChtZXNzYWdlLnNlc3Npb25JZCAhPT0gJycpXG4gICAgICB3cml0ZXIudGFnKDIsIFdpcmVUeXBlLkxlbmd0aERlbGltaXRlZCkuc3RyaW5nKG1lc3NhZ2Uuc2Vzc2lvbklkKTtcbiAgICAvKiBib29sIGljZV9yZXN0YXJ0ID0gMzsgKi9cbiAgICBpZiAobWVzc2FnZS5pY2VSZXN0YXJ0ICE9PSBmYWxzZSlcbiAgICAgIHdyaXRlci50YWcoMywgV2lyZVR5cGUuVmFyaW50KS5ib29sKG1lc3NhZ2UuaWNlUmVzdGFydCk7XG4gICAgLyogc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuRXJyb3IgZXJyb3IgPSA0OyAqL1xuICAgIGlmIChtZXNzYWdlLmVycm9yKVxuICAgICAgRXJyb3IuaW50ZXJuYWxCaW5hcnlXcml0ZShcbiAgICAgICAgbWVzc2FnZS5lcnJvcixcbiAgICAgICAgd3JpdGVyLnRhZyg0LCBXaXJlVHlwZS5MZW5ndGhEZWxpbWl0ZWQpLmZvcmsoKSxcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICkuam9pbigpO1xuICAgIGxldCB1ID0gb3B0aW9ucy53cml0ZVVua25vd25GaWVsZHM7XG4gICAgaWYgKHUgIT09IGZhbHNlKVxuICAgICAgKHUgPT0gdHJ1ZSA/IFVua25vd25GaWVsZEhhbmRsZXIub25Xcml0ZSA6IHUpKFxuICAgICAgICB0aGlzLnR5cGVOYW1lLFxuICAgICAgICBtZXNzYWdlLFxuICAgICAgICB3cml0ZXIsXG4gICAgICApO1xuICAgIHJldHVybiB3cml0ZXI7XG4gIH1cbn1cbi8qKlxuICogQGdlbmVyYXRlZCBNZXNzYWdlVHlwZSBmb3IgcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5TZXRQdWJsaXNoZXJSZXNwb25zZVxuICovXG5leHBvcnQgY29uc3QgU2V0UHVibGlzaGVyUmVzcG9uc2UgPSBuZXcgU2V0UHVibGlzaGVyUmVzcG9uc2UkVHlwZSgpO1xuLyoqXG4gKiBAZ2VuZXJhdGVkIFNlcnZpY2VUeXBlIGZvciBwcm90b2J1ZiBzZXJ2aWNlIHN0cmVhbS52aWRlby5zZnUuc2lnbmFsLlNpZ25hbFNlcnZlclxuICovXG5leHBvcnQgY29uc3QgU2lnbmFsU2VydmVyID0gbmV3IFNlcnZpY2VUeXBlKFxuICAnc3RyZWFtLnZpZGVvLnNmdS5zaWduYWwuU2lnbmFsU2VydmVyJyxcbiAgW1xuICAgIHtcbiAgICAgIG5hbWU6ICdTZXRQdWJsaXNoZXInLFxuICAgICAgb3B0aW9uczoge30sXG4gICAgICBJOiBTZXRQdWJsaXNoZXJSZXF1ZXN0LFxuICAgICAgTzogU2V0UHVibGlzaGVyUmVzcG9uc2UsXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiAnU2VuZEFuc3dlcicsXG4gICAgICBvcHRpb25zOiB7fSxcbiAgICAgIEk6IFNlbmRBbnN3ZXJSZXF1ZXN0LFxuICAgICAgTzogU2VuZEFuc3dlclJlc3BvbnNlLFxuICAgIH0sXG4gICAgeyBuYW1lOiAnSWNlVHJpY2tsZScsIG9wdGlvbnM6IHt9LCBJOiBJQ0VUcmlja2xlLCBPOiBJQ0VUcmlja2xlUmVzcG9uc2UgfSxcbiAgICB7XG4gICAgICBuYW1lOiAnVXBkYXRlU3Vic2NyaXB0aW9ucycsXG4gICAgICBvcHRpb25zOiB7fSxcbiAgICAgIEk6IFVwZGF0ZVN1YnNjcmlwdGlvbnNSZXF1ZXN0LFxuICAgICAgTzogVXBkYXRlU3Vic2NyaXB0aW9uc1Jlc3BvbnNlLFxuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ1VwZGF0ZU11dGVTdGF0ZXMnLFxuICAgICAgb3B0aW9uczoge30sXG4gICAgICBJOiBVcGRhdGVNdXRlU3RhdGVzUmVxdWVzdCxcbiAgICAgIE86IFVwZGF0ZU11dGVTdGF0ZXNSZXNwb25zZSxcbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6ICdJY2VSZXN0YXJ0JyxcbiAgICAgIG9wdGlvbnM6IHt9LFxuICAgICAgSTogSUNFUmVzdGFydFJlcXVlc3QsXG4gICAgICBPOiBJQ0VSZXN0YXJ0UmVzcG9uc2UsXG4gICAgfSxcbiAgXSxcbik7XG4iLCIvKiBlc2xpbnQtZGlzYWJsZSAqL1xuLy8gQGdlbmVyYXRlZCBieSBwcm90b2J1Zi10cyAyLjkuMyB3aXRoIHBhcmFtZXRlciBsb25nX3R5cGVfc3RyaW5nLGNsaWVudF9nZW5lcmljLHNlcnZlcl9ub25lLGVzbGludF9kaXNhYmxlXG4vLyBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmlsZSBcInZpZGVvL3NmdS9ldmVudC9ldmVudHMucHJvdG9cIiAocGFja2FnZSBcInN0cmVhbS52aWRlby5zZnUuZXZlbnRcIiwgc3ludGF4IHByb3RvMylcbi8vIHRzbGludDpkaXNhYmxlXG5pbXBvcnQgdHlwZSB7XG4gIEJpbmFyeVJlYWRPcHRpb25zLFxuICBCaW5hcnlXcml0ZU9wdGlvbnMsXG4gIElCaW5hcnlSZWFkZXIsXG4gIElCaW5hcnlXcml0ZXIsXG4gIFBhcnRpYWxNZXNzYWdlLFxufSBmcm9tICdAcHJvdG9idWYtdHMvcnVudGltZSc7XG5pbXBvcnQge1xuICBNZXNzYWdlVHlwZSxcbiAgcmVmbGVjdGlvbk1lcmdlUGFydGlhbCxcbiAgVW5rbm93bkZpZWxkSGFuZGxlcixcbiAgV2lyZVR5cGUsXG59IGZyb20gJ0Bwcm90b2J1Zi10cy9ydW50aW1lJztcbmltcG9ydCB7XG4gIENhbGxHcmFudHMsXG4gIENhbGxTdGF0ZSxcbiAgQ2xpZW50RGV0YWlscyxcbiAgQ29kZWMsXG4gIENvbm5lY3Rpb25RdWFsaXR5LFxuICBFcnJvciBhcyBFcnJvciQsXG4gIEdvQXdheVJlYXNvbixcbiAgSUNFVHJpY2tsZSBhcyBJQ0VUcmlja2xlJCxcbiAgUGFydGljaXBhbnQsXG4gIFBhcnRpY2lwYW50Q291bnQsXG4gIFBlZXJUeXBlLFxuICBQaW4sXG4gIFRyYWNrSW5mbyxcbiAgVHJhY2tUeXBlLFxuICBUcmFja1VucHVibGlzaFJlYXNvbixcbn0gZnJvbSAnLi4vbW9kZWxzL21vZGVscyc7XG5pbXBvcnQgeyBUcmFja1N1YnNjcmlwdGlvbkRldGFpbHMgfSBmcm9tICcuLi9zaWduYWxfcnBjL3NpZ25hbCc7XG5cbi8qKlxuICogU0ZVRXZlbnQgaXMgYSBtZXNzYWdlIHRoYXQgaXMgc2VudCBmcm9tIHRoZSBTRlUgdG8gdGhlIGNsaWVudC5cbiAqXG4gKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LlNmdUV2ZW50XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU2Z1RXZlbnQge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIG9uZW9mOiBldmVudF9wYXlsb2FkXG4gICAqL1xuICBldmVudFBheWxvYWQ6XG4gICAgfCB7XG4gICAgICAgIG9uZW9mS2luZDogJ3N1YnNjcmliZXJPZmZlcic7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTdWJzY3JpYmVyT2ZmZXIgc2VuZHMgdGhlIFNEUCBvZmZlciBmb3IgZXN0YWJsaXNoaW5nIHRoZVxuICAgICAgICAgKiBzdWJzY3JpYmVyIFBlZXJDb25uZWN0aW9uLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmVhbS52aWRlby5zZnUuZXZlbnQuU3Vic2NyaWJlck9mZmVyIHN1YnNjcmliZXJfb2ZmZXIgPSAxO1xuICAgICAgICAgKi9cbiAgICAgICAgc3Vic2NyaWJlck9mZmVyOiBTdWJzY3JpYmVyT2ZmZXI7XG4gICAgICB9XG4gICAgfCB7XG4gICAgICAgIG9uZW9mS2luZDogJ3B1Ymxpc2hlckFuc3dlcic7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQdWJsaXNoZXJBbnN3ZXIgc2VuZHMgdGhlIFNEUCBhbnN3ZXIgdG8gdGhlIG9mZmVyIHNlbnQgYnlcbiAgICAgICAgICogdGhlIGNsaWVudCBmb3IgZXN0YWJsaXNoaW5nIHRoZSBQdWJsaXNoZXIgUGVlckNvbm5lY3Rpb24uXG4gICAgICAgICAqXG4gICAgICAgICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5QdWJsaXNoZXJBbnN3ZXIgcHVibGlzaGVyX2Fuc3dlciA9IDI7XG4gICAgICAgICAqL1xuICAgICAgICBwdWJsaXNoZXJBbnN3ZXI6IFB1Ymxpc2hlckFuc3dlcjtcbiAgICAgIH1cbiAgICB8IHtcbiAgICAgICAgb25lb2ZLaW5kOiAnY29ubmVjdGlvblF1YWxpdHlDaGFuZ2VkJztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvbm5lY3Rpb25RdWFsaXR5Q2hhbmdlZCBpcyBzZW50IHRvIGluZm9ybSB0aGUgY29ubmVjdGlvblxuICAgICAgICAgKiBxdWFsaXR5IG9mIHRoZSBwYXJ0aWNpcGFudHMgaW4gdGhlIGNhbGwuIEl0IGRvZXMgbm90IGhhdmVcbiAgICAgICAgICogdG8gY29udGFpbiB0aGUgZnVsbCBsaXN0IG9mIGNhbGwgcGFydGljaXBhbnRzIGluIGl0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmVhbS52aWRlby5zZnUuZXZlbnQuQ29ubmVjdGlvblF1YWxpdHlDaGFuZ2VkIGNvbm5lY3Rpb25fcXVhbGl0eV9jaGFuZ2VkID0gMztcbiAgICAgICAgICovXG4gICAgICAgIGNvbm5lY3Rpb25RdWFsaXR5Q2hhbmdlZDogQ29ubmVjdGlvblF1YWxpdHlDaGFuZ2VkO1xuICAgICAgfVxuICAgIHwge1xuICAgICAgICBvbmVvZktpbmQ6ICdhdWRpb0xldmVsQ2hhbmdlZCc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBdWRpb0xldmVsQ2hhbmdlZCBpcyBzZW50IGZvciBjaGFuZ2UgaW4gYXVkaW8gbGV2ZWxzIG9mXG4gICAgICAgICAqIHRoZSBwYXJ0aWNpcGFudHMuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5BdWRpb0xldmVsQ2hhbmdlZCBhdWRpb19sZXZlbF9jaGFuZ2VkID0gNDtcbiAgICAgICAgICovXG4gICAgICAgIGF1ZGlvTGV2ZWxDaGFuZ2VkOiBBdWRpb0xldmVsQ2hhbmdlZDtcbiAgICAgIH1cbiAgICB8IHtcbiAgICAgICAgb25lb2ZLaW5kOiAnaWNlVHJpY2tsZSc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJQ0VUcmlja2xlIGNvbnRhaW5zIHRoZSBJQ0UgY2FuZGlkYXRlIHJlcXVpcmVkIHRvIGVzdGFibGlzaFxuICAgICAgICAgKiB0aGUgSUNFIHRyYW5zcG9ydDogcGFydCBvZiBlc3RhYmxpc2hpbmcgdGhlIFBlZXJDb25uZWN0aW9uXG4gICAgICAgICAqIGFuZCBhbHNvIGZvciBJQ0UgcmVzdGFydHMuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuSUNFVHJpY2tsZSBpY2VfdHJpY2tsZSA9IDU7XG4gICAgICAgICAqL1xuICAgICAgICBpY2VUcmlja2xlOiBJQ0VUcmlja2xlJDtcbiAgICAgIH1cbiAgICB8IHtcbiAgICAgICAgb25lb2ZLaW5kOiAnY2hhbmdlUHVibGlzaFF1YWxpdHknO1xuICAgICAgICAvKipcbiAgICAgICAgICogQ2hhbmdlUHVibGlzaFF1YWxpdHkgYWR2aXNlcyB0aGUgcHVibGlzaGVyIHRvIHN3aXRjaCBvbi9vZmZcbiAgICAgICAgICogdmFyaW91cyBxdWFsaXRpZXMgb2YgdGhlaXIgdmlkZW8gc3RyZWFtIGJhc2VkIG9uIHRoZSBzdWJzY3JpcHRpb24uXG4gICAgICAgICAqIFRoaXMgaXMgZG9uZSB0byBzYXZlIHRoZSBiYW5kd2lkdGggYW5kIHRoZSBDUFUgb2YgdGhlIHB1Ymxpc2hlci5cbiAgICAgICAgICpcbiAgICAgICAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LkNoYW5nZVB1Ymxpc2hRdWFsaXR5IGNoYW5nZV9wdWJsaXNoX3F1YWxpdHkgPSA2O1xuICAgICAgICAgKi9cbiAgICAgICAgY2hhbmdlUHVibGlzaFF1YWxpdHk6IENoYW5nZVB1Ymxpc2hRdWFsaXR5O1xuICAgICAgfVxuICAgIHwge1xuICAgICAgICBvbmVvZktpbmQ6ICdwYXJ0aWNpcGFudEpvaW5lZCc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQYXJ0aWNpcGFudEpvaW5lZCBub3RpZmllcyB0aGUgY2xpZW50IHRoYXQgYSBuZXcgcGFydGljaXBhbnRcbiAgICAgICAgICogaGFzIGpvaW5lZCB0aGUgY2FsbC4gVGhpcyBpcyBub3Qgc2VudCBmb3IgYW5vbnltb3VzIHVzZXJzLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmVhbS52aWRlby5zZnUuZXZlbnQuUGFydGljaXBhbnRKb2luZWQgcGFydGljaXBhbnRfam9pbmVkID0gMTA7XG4gICAgICAgICAqL1xuICAgICAgICBwYXJ0aWNpcGFudEpvaW5lZDogUGFydGljaXBhbnRKb2luZWQ7XG4gICAgICB9XG4gICAgfCB7XG4gICAgICAgIG9uZW9mS2luZDogJ3BhcnRpY2lwYW50TGVmdCc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQYXJ0aWNpcGFudExlZnQgbm90aWZpZXMgdGhlIGNsaWVudCB0aGF0IGEgY2FsbCBwYXJ0aWNpcGFudFxuICAgICAgICAgKiBoYXMgbGVmdCB0aGUgY2FsbC4gVGhpcyBpcyBub3Qgc2VudCBmb3IgYW5vbnltb3VzIHVzZXJzLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmVhbS52aWRlby5zZnUuZXZlbnQuUGFydGljaXBhbnRMZWZ0IHBhcnRpY2lwYW50X2xlZnQgPSAxMTtcbiAgICAgICAgICovXG4gICAgICAgIHBhcnRpY2lwYW50TGVmdDogUGFydGljaXBhbnRMZWZ0O1xuICAgICAgfVxuICAgIHwge1xuICAgICAgICBvbmVvZktpbmQ6ICdkb21pbmFudFNwZWFrZXJDaGFuZ2VkJztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIERvbWluYW50U3BlYWtlckNoYW5nZWQgbm90aWZpZXMgdGhlIGNsaWVudCBhYm91dCB0aGUgY3VycmVudFxuICAgICAgICAgKiBkb21pbmFudCBzcGVha2VyLiBUaGlzIGlzIHJlcXVpcmVkIGZvciBjZXJ0YWluIHVzZSBjYXNlcyBsaWtlXG4gICAgICAgICAqIHRoZSBzcG90bGlnaHQgdmlldy5cbiAgICAgICAgICpcbiAgICAgICAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LkRvbWluYW50U3BlYWtlckNoYW5nZWQgZG9taW5hbnRfc3BlYWtlcl9jaGFuZ2VkID0gMTI7XG4gICAgICAgICAqL1xuICAgICAgICBkb21pbmFudFNwZWFrZXJDaGFuZ2VkOiBEb21pbmFudFNwZWFrZXJDaGFuZ2VkO1xuICAgICAgfVxuICAgIHwge1xuICAgICAgICBvbmVvZktpbmQ6ICdqb2luUmVzcG9uc2UnO1xuICAgICAgICAvKipcbiAgICAgICAgICogSm9pblJlc3BvbnNlIGFja25vd2xlZGdlcyBhIHBhcnRpY2lwYW50IHN1Y2Nlc3NmdWxseSBqb2luaW5nXG4gICAgICAgICAqIHRoZSBjYWxsLiBUaGlzIGlzIHNlbnQgaW4gcmVzcG9uc2UgdG8gdGhlIEpvaW5SZXF1ZXN0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmVhbS52aWRlby5zZnUuZXZlbnQuSm9pblJlc3BvbnNlIGpvaW5fcmVzcG9uc2UgPSAxMztcbiAgICAgICAgICovXG4gICAgICAgIGpvaW5SZXNwb25zZTogSm9pblJlc3BvbnNlO1xuICAgICAgfVxuICAgIHwge1xuICAgICAgICBvbmVvZktpbmQ6ICdoZWFsdGhDaGVja1Jlc3BvbnNlJztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEhlYWx0aENoZWNrUmVzcG9uc2UgaXMgc2VudCBpbiByZXNwb25zZSB0byB0aGUgSGVhbHRoQ2hlY2tSZXF1ZXN0LlxuICAgICAgICAgKiBJdCBjb250YWlucyB0aGUgcGFydGljaXBhbnQgY291bnQgaW4gdGhlIGNhbGwuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5IZWFsdGhDaGVja1Jlc3BvbnNlIGhlYWx0aF9jaGVja19yZXNwb25zZSA9IDE0O1xuICAgICAgICAgKi9cbiAgICAgICAgaGVhbHRoQ2hlY2tSZXNwb25zZTogSGVhbHRoQ2hlY2tSZXNwb25zZTtcbiAgICAgIH1cbiAgICB8IHtcbiAgICAgICAgb25lb2ZLaW5kOiAndHJhY2tQdWJsaXNoZWQnO1xuICAgICAgICAvKipcbiAgICAgICAgICogVHJhY2tQdWJsaXNoZWQgaXMgc2VudCB3aGVuIGEgbmV3IHRyYWNrIChsaWtlIGF1ZGlvLCB2aWRlbywgc2NyZWVuc2hhcmUpXG4gICAgICAgICAqIGlzIHB1Ymxpc2hlZCBieSBhIHBhcnRpY2lwYW50IGluIHRoZSBjYWxsLiBJdCBpcyBhbHNvIHNlbnQgb24gbXV0ZS91bm11dGUuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5UcmFja1B1Ymxpc2hlZCB0cmFja19wdWJsaXNoZWQgPSAxNjtcbiAgICAgICAgICovXG4gICAgICAgIHRyYWNrUHVibGlzaGVkOiBUcmFja1B1Ymxpc2hlZDtcbiAgICAgIH1cbiAgICB8IHtcbiAgICAgICAgb25lb2ZLaW5kOiAndHJhY2tVbnB1Ymxpc2hlZCc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUcmFja1VucHVibGlzaGVkIGlzIHNlbnQgd2hlbiBhIHRyYWNrIChsaWtlIGF1ZGlvLCB2aWRlbywgc2NyZWVuc2hhcmUpXG4gICAgICAgICAqIGlzIG5vIGxvbmdlciBwdWJsaXNoZWQuIEl0IGlzIHNlbnQgb24gbXV0aW5nIGEgdHJhY2sgb3Igd2hlbiB0aGUgcGFydGljaXBhbnRcbiAgICAgICAgICogaXMgbGVhdmluZyB0aGUgY2FsbC5cbiAgICAgICAgICpcbiAgICAgICAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LlRyYWNrVW5wdWJsaXNoZWQgdHJhY2tfdW5wdWJsaXNoZWQgPSAxNztcbiAgICAgICAgICovXG4gICAgICAgIHRyYWNrVW5wdWJsaXNoZWQ6IFRyYWNrVW5wdWJsaXNoZWQ7XG4gICAgICB9XG4gICAgfCB7XG4gICAgICAgIG9uZW9mS2luZDogJ2Vycm9yJztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEVycm9yIGlzIHVzZWQgdG8gY29tbXVuaWNhdGUgYW55IGVycm9yIHJlbGF0ZWQgdG8gdGhlIHBhcnRpY2lwYW50LiBUaGVcbiAgICAgICAgICogZXJyb3IgY29kZSBhbmQgdGhlIG1lc3NhZ2UgZXhwbGFpbiB3aGF0IHdlbnQgd3JvbmcuIFdoZXRoZXIgdGhlIHBhcnRpY2lwYW50XG4gICAgICAgICAqIGNhbiByZXRyeSBpcyBhbHNvIGluZGljYXRlZC5cbiAgICAgICAgICpcbiAgICAgICAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LkVycm9yIGVycm9yID0gMTg7XG4gICAgICAgICAqL1xuICAgICAgICBlcnJvcjogRXJyb3I7XG4gICAgICB9XG4gICAgfCB7XG4gICAgICAgIG9uZW9mS2luZDogJ2NhbGxHcmFudHNVcGRhdGVkJztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENhbGxHcmFudHNVcGRhdGVkIHRlbGxzIHdoYXQgdHJhY2tzIGEgcGFydGljaXBhbnQgaXMgYWxsb3dlZCB0byBwdWJsaXNoLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmVhbS52aWRlby5zZnUuZXZlbnQuQ2FsbEdyYW50c1VwZGF0ZWQgY2FsbF9ncmFudHNfdXBkYXRlZCA9IDE5O1xuICAgICAgICAgKi9cbiAgICAgICAgY2FsbEdyYW50c1VwZGF0ZWQ6IENhbGxHcmFudHNVcGRhdGVkO1xuICAgICAgfVxuICAgIHwge1xuICAgICAgICBvbmVvZktpbmQ6ICdnb0F3YXknO1xuICAgICAgICAvKipcbiAgICAgICAgICogR29Bd2F5IHRlbGxzIHRoZSBjbGllbnQgdG8gbWlncmF0ZSBhd2F5IGZyb20gdGhlIFNGVSBpdCBpcyBjb25uZWN0ZWQgdG8uXG4gICAgICAgICAqIFRoZSByZWFzb24gZmllbGQgaW5kaWNhdGVzIHdoeSB0aGlzIG1lc3NhZ2Ugd2FzIHNlbnQuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5Hb0F3YXkgZ29fYXdheSA9IDIwO1xuICAgICAgICAgKi9cbiAgICAgICAgZ29Bd2F5OiBHb0F3YXk7XG4gICAgICB9XG4gICAgfCB7XG4gICAgICAgIG9uZW9mS2luZDogJ2ljZVJlc3RhcnQnO1xuICAgICAgICAvKipcbiAgICAgICAgICogSUNFUmVzdGFydCB0ZWxscyB0aGUgY2xpZW50IHRvIHBlcmZvcm0gSUNFIHJlc3RhcnQuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5JQ0VSZXN0YXJ0IGljZV9yZXN0YXJ0ID0gMjE7XG4gICAgICAgICAqL1xuICAgICAgICBpY2VSZXN0YXJ0OiBJQ0VSZXN0YXJ0O1xuICAgICAgfVxuICAgIHwge1xuICAgICAgICBvbmVvZktpbmQ6ICdwaW5zVXBkYXRlZCc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQaW5zQ2hhbmdlZCBpcyBzZW50IHRoZSBsaXN0IG9mIHBpbnMgaW4gdGhlIGNhbGwgY2hhbmdlcy4gVGhpcyBldmVudCBjb250YWlucyB0aGUgZW50aXJlIGxpc3Qgb2YgcGlucy5cbiAgICAgICAgICpcbiAgICAgICAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LlBpbnNDaGFuZ2VkIHBpbnNfdXBkYXRlZCA9IDIyO1xuICAgICAgICAgKi9cbiAgICAgICAgcGluc1VwZGF0ZWQ6IFBpbnNDaGFuZ2VkO1xuICAgICAgfVxuICAgIHwge1xuICAgICAgICBvbmVvZktpbmQ6IHVuZGVmaW5lZDtcbiAgICAgIH07XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUuZXZlbnQuUGluc0NoYW5nZWRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQaW5zQ2hhbmdlZCB7XG4gIC8qKlxuICAgKiB0aGUgbGlzdCBvZiBwaW5zIGluIHRoZSBjYWxsLlxuICAgKiBQaW5zIGFyZSBvcmRlcmVkIGluIGRlc2NlbmRpbmcgb3JkZXIgKG1vc3QgaW1wb3J0YW50IGZpcnN0KS5cbiAgICpcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiByZXBlYXRlZCBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5QaW4gcGlucyA9IDE7XG4gICAqL1xuICBwaW5zOiBQaW5bXTtcbn1cbi8qKlxuICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5FcnJvclxuICovXG5leHBvcnQgaW50ZXJmYWNlIEVycm9yIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuRXJyb3IgZXJyb3IgPSA0O1xuICAgKi9cbiAgZXJyb3I/OiBFcnJvciQ7XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUuZXZlbnQuSUNFVHJpY2tsZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIElDRVRyaWNrbGUge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5QZWVyVHlwZSBwZWVyX3R5cGUgPSAxO1xuICAgKi9cbiAgcGVlclR5cGU6IFBlZXJUeXBlO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJpbmcgaWNlX2NhbmRpZGF0ZSA9IDI7XG4gICAqL1xuICBpY2VDYW5kaWRhdGU6IHN0cmluZztcbn1cbi8qKlxuICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5JQ0VSZXN0YXJ0XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSUNFUmVzdGFydCB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmVhbS52aWRlby5zZnUubW9kZWxzLlBlZXJUeXBlIHBlZXJfdHlwZSA9IDE7XG4gICAqL1xuICBwZWVyVHlwZTogUGVlclR5cGU7XG59XG4vKipcbiAqIFNmdVJlcXVlc3QgaXMgYSBtZXNzYWdlIHRoYXQgaXMgc2VudCBmcm9tIHRoZSBjbGllbnQgdG8gdGhlIFNGVS5cbiAqXG4gKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LlNmdVJlcXVlc3RcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBTZnVSZXF1ZXN0IHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBvbmVvZjogcmVxdWVzdF9wYXlsb2FkXG4gICAqL1xuICByZXF1ZXN0UGF5bG9hZDpcbiAgICB8IHtcbiAgICAgICAgb25lb2ZLaW5kOiAnam9pblJlcXVlc3QnO1xuICAgICAgICAvKipcbiAgICAgICAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LkpvaW5SZXF1ZXN0IGpvaW5fcmVxdWVzdCA9IDE7XG4gICAgICAgICAqL1xuICAgICAgICBqb2luUmVxdWVzdDogSm9pblJlcXVlc3Q7XG4gICAgICB9XG4gICAgfCB7XG4gICAgICAgIG9uZW9mS2luZDogJ2hlYWx0aENoZWNrUmVxdWVzdCc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmVhbS52aWRlby5zZnUuZXZlbnQuSGVhbHRoQ2hlY2tSZXF1ZXN0IGhlYWx0aF9jaGVja19yZXF1ZXN0ID0gMjtcbiAgICAgICAgICovXG4gICAgICAgIGhlYWx0aENoZWNrUmVxdWVzdDogSGVhbHRoQ2hlY2tSZXF1ZXN0O1xuICAgICAgfVxuICAgIHwge1xuICAgICAgICBvbmVvZktpbmQ6IHVuZGVmaW5lZDtcbiAgICAgIH07XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUuZXZlbnQuSGVhbHRoQ2hlY2tSZXF1ZXN0XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSGVhbHRoQ2hlY2tSZXF1ZXN0IHt9XG4vKipcbiAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUuZXZlbnQuSGVhbHRoQ2hlY2tSZXNwb25zZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIEhlYWx0aENoZWNrUmVzcG9uc2Uge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5QYXJ0aWNpcGFudENvdW50IHBhcnRpY2lwYW50X2NvdW50ID0gMTtcbiAgICovXG4gIHBhcnRpY2lwYW50Q291bnQ/OiBQYXJ0aWNpcGFudENvdW50O1xufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LlRyYWNrUHVibGlzaGVkXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVHJhY2tQdWJsaXNoZWQge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJpbmcgdXNlcl9pZCA9IDE7XG4gICAqL1xuICB1c2VySWQ6IHN0cmluZztcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyaW5nIHNlc3Npb25faWQgPSAyO1xuICAgKi9cbiAgc2Vzc2lvbklkOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmVhbS52aWRlby5zZnUubW9kZWxzLlRyYWNrVHlwZSB0eXBlID0gMztcbiAgICovXG4gIHR5cGU6IFRyYWNrVHlwZTtcbiAgLyoqXG4gICAqIFBhcnRpY2lwYW50IGluZm9ybWF0aW9uIGhlcmUgaXMgaW5jbHVkZWQgYXMgYW4gb3B0aW1pc2F0aW9uXG4gICAqIGZvciBsYXJnZSBjYWxscyB3aGVyZSBicm9hZGNhc3Rpbmcgb24gZXZlcnkgcGFydGljaXBhbnQgam9pblxuICAgKiBpcyBleHBlbnNpdmUuIFlvdSBzaG91bGQgKipOT1QqKiBhc3N1bWUgdGhhdCB0aGlzIHdpbGwgYWx3YXlzXG4gICAqIGJlIGF2YWlsYWJsZSB0aG91Z2ggeW91IGNhbiB1c2UgaXQgdG8gdXBkYXRlIHRoZSBwYXJ0aWNpcGFudFxuICAgKiBsaXN0IHdoZW4gaXQgaXMgdGhlcmUuXG4gICAqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuUGFydGljaXBhbnQgcGFydGljaXBhbnQgPSA0O1xuICAgKi9cbiAgcGFydGljaXBhbnQ/OiBQYXJ0aWNpcGFudDtcbn1cbi8qKlxuICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5UcmFja1VucHVibGlzaGVkXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVHJhY2tVbnB1Ymxpc2hlZCB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmluZyB1c2VyX2lkID0gMTtcbiAgICovXG4gIHVzZXJJZDogc3RyaW5nO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJpbmcgc2Vzc2lvbl9pZCA9IDI7XG4gICAqL1xuICBzZXNzaW9uSWQ6IHN0cmluZztcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuVHJhY2tUeXBlIHR5cGUgPSAzO1xuICAgKi9cbiAgdHlwZTogVHJhY2tUeXBlO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5UcmFja1VucHVibGlzaFJlYXNvbiBjYXVzZSA9IDQ7XG4gICAqL1xuICBjYXVzZTogVHJhY2tVbnB1Ymxpc2hSZWFzb247XG4gIC8qKlxuICAgKiBQYXJ0aWNpcGFudCBpbmZvcm1hdGlvbiBoZXJlIGlzIGluY2x1ZGVkIGFzIGFuIG9wdGltaXNhdGlvblxuICAgKiBmb3IgbGFyZ2UgY2FsbHMgd2hlcmUgYnJvYWRjYXN0aW5nIG9uIGV2ZXJ5IHBhcnRpY2lwYW50IGpvaW5cbiAgICogaXMgZXhwZW5zaXZlLiBZb3Ugc2hvdWxkICoqTk9UKiogYXNzdW1lIHRoYXQgdGhpcyB3aWxsIGFsd2F5c1xuICAgKiBiZSBhdmFpbGFibGUgdGhvdWdoIHlvdSBjYW4gdXNlIGl0IHRvIHVwZGF0ZSB0aGUgcGFydGljaXBhbnRcbiAgICogbGlzdCB3aGVuIGl0IGlzIHRoZXJlLlxuICAgKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmVhbS52aWRlby5zZnUubW9kZWxzLlBhcnRpY2lwYW50IHBhcnRpY2lwYW50ID0gNTtcbiAgICovXG4gIHBhcnRpY2lwYW50PzogUGFydGljaXBhbnQ7XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUuZXZlbnQuSm9pblJlcXVlc3RcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBKb2luUmVxdWVzdCB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmluZyB0b2tlbiA9IDE7XG4gICAqL1xuICB0b2tlbjogc3RyaW5nO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJpbmcgc2Vzc2lvbl9pZCA9IDI7XG4gICAqL1xuICBzZXNzaW9uSWQ6IHN0cmluZztcbiAgLyoqXG4gICAqIGR1bWIgU0RQIHRoYXQgYWxsb3cgdXMgdG8gZXh0cmFjdCBzdWJzY3JpYmVyJ3MgZGVjb2RlIGNvZGVjc1xuICAgKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmluZyBzdWJzY3JpYmVyX3NkcCA9IDM7XG4gICAqL1xuICBzdWJzY3JpYmVyU2RwOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmVhbS52aWRlby5zZnUubW9kZWxzLkNsaWVudERldGFpbHMgY2xpZW50X2RldGFpbHMgPSA0O1xuICAgKi9cbiAgY2xpZW50RGV0YWlscz86IENsaWVudERldGFpbHM7XG4gIC8qKlxuICAgKiBUT0RPOiB3ZSBzaG91bGQga25vdyBpZiB0aGlzIGlzIGdvaW5nIHRvIGJlXG4gICAqIC0gcHVibGlzaGluZyBhbmQgc3Vic2NyaWJpbmcsIG9yIGp1c3Qgc3Vic2NyaWJpbmcgZm9yIGZ1dHVyZSByb3V0aW5nXG4gICAqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5NaWdyYXRpb24gbWlncmF0aW9uID0gNTtcbiAgICovXG4gIG1pZ3JhdGlvbj86IE1pZ3JhdGlvbjtcbiAgLyoqXG4gICAqIEZhc3QgcmVjb25uZWN0IGZsYWcgZXhwbGljaXRseSBpbmRpY2F0ZXMgdGhhdCBpZiB0aGUgcGFydGljaXBhbnQgc2Vzc2lvblxuICAgKiBhbmQgdGhlIGFzc29jaWF0ZWQgc3RhdGUgaXMgc3RpbGwgcHJlc2VudCBpbiB0aGUgU0ZVLCB0aGUgY2xpZW50IGlzIHJlYWR5XG4gICAqIHRvIHJlc3RvcmUgdGhlIFBlZXJDb25uZWN0aW9uIHdpdGggYW4gSUNFIHJlc3RhcnQuIElmIHRoZSBTRlUgcmVwbGllcyB3aXRoXG4gICAqIFwicmVjb25uZWN0ZWQ6IHRydWVcIiBpbiBpdHMgSm9pblJlc3BvbnNlLCB0aGVuIGl0IGlzIHNhZmUgdG8gcGVyZm9ybSBhbiBJQ0VcbiAgICogcmVzdGFydCBvciBlbHNlIHRoZSBleGlzdGluZyBQZWVyQ29ubmVjdGlvbnMgbXVzdCBiZSBjbGVhbmVkIHVwLlxuICAgKlxuICAgKiBGb3IgdGhlIFNGVSwgZmFzdF9yZWNvbm5lY3Q6ZmFsc2UgaW5kaWNhdGVzIHRoYXQgZXZlbiBpZiBpdCBoYXMgdGhlIHN0YXRlXG4gICAqIGNhY2hlZCwgdGhlIGNsaWVudCBzdGF0ZSBpcyBub3QgaW4gc3luYyBhbmQgaGVuY2UgaXQgbXVzdCBiZSBjbGVhbmVkIHVwIGJlZm9yZVxuICAgKiBwcm9jZWVkaW5nIGZ1cnRoZXIuXG4gICAqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogYm9vbCBmYXN0X3JlY29ubmVjdCA9IDY7XG4gICAqL1xuICBmYXN0UmVjb25uZWN0OiBib29sZWFuO1xufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50Lk1pZ3JhdGlvblxuICovXG5leHBvcnQgaW50ZXJmYWNlIE1pZ3JhdGlvbiB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmluZyBmcm9tX3NmdV9pZCA9IDE7XG4gICAqL1xuICBmcm9tU2Z1SWQ6IHN0cmluZztcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogcmVwZWF0ZWQgc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuVHJhY2tJbmZvIGFubm91bmNlZF90cmFja3MgPSAyO1xuICAgKi9cbiAgYW5ub3VuY2VkVHJhY2tzOiBUcmFja0luZm9bXTtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogcmVwZWF0ZWQgc3RyZWFtLnZpZGVvLnNmdS5zaWduYWwuVHJhY2tTdWJzY3JpcHRpb25EZXRhaWxzIHN1YnNjcmlwdGlvbnMgPSAzO1xuICAgKi9cbiAgc3Vic2NyaXB0aW9uczogVHJhY2tTdWJzY3JpcHRpb25EZXRhaWxzW107XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUuZXZlbnQuSm9pblJlc3BvbnNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSm9pblJlc3BvbnNlIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuQ2FsbFN0YXRlIGNhbGxfc3RhdGUgPSAxO1xuICAgKi9cbiAgY2FsbFN0YXRlPzogQ2FsbFN0YXRlO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBib29sIHJlY29ubmVjdGVkID0gMjtcbiAgICovXG4gIHJlY29ubmVjdGVkOiBib29sZWFuO1xufVxuLyoqXG4gKiBQYXJ0aWNpcGFudEpvaW5lZCBpcyBmaXJlZCB3aGVuIGEgdXNlciBqb2lucyBhIGNhbGxcbiAqXG4gKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LlBhcnRpY2lwYW50Sm9pbmVkXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUGFydGljaXBhbnRKb2luZWQge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJpbmcgY2FsbF9jaWQgPSAxO1xuICAgKi9cbiAgY2FsbENpZDogc3RyaW5nO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5QYXJ0aWNpcGFudCBwYXJ0aWNpcGFudCA9IDI7XG4gICAqL1xuICBwYXJ0aWNpcGFudD86IFBhcnRpY2lwYW50O1xufVxuLyoqXG4gKiBQYXJ0aWNpcGFudEpvaW5lZCBpcyBmaXJlZCB3aGVuIGEgdXNlciBsZWF2ZXMgYSBjYWxsXG4gKlxuICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5QYXJ0aWNpcGFudExlZnRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQYXJ0aWNpcGFudExlZnQge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJpbmcgY2FsbF9jaWQgPSAxO1xuICAgKi9cbiAgY2FsbENpZDogc3RyaW5nO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5QYXJ0aWNpcGFudCBwYXJ0aWNpcGFudCA9IDI7XG4gICAqL1xuICBwYXJ0aWNpcGFudD86IFBhcnRpY2lwYW50O1xufVxuLyoqXG4gKiBTdWJzY3JpYmVyT2ZmZXIgaXMgc2VudCB3aGVuIHRoZSBTRlUgYWRkcyB0cmFja3MgdG8gYSBzdWJzY3JpcHRpb25cbiAqXG4gKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LlN1YnNjcmliZXJPZmZlclxuICovXG5leHBvcnQgaW50ZXJmYWNlIFN1YnNjcmliZXJPZmZlciB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IGJvb2wgaWNlX3Jlc3RhcnQgPSAxO1xuICAgKi9cbiAgaWNlUmVzdGFydDogYm9vbGVhbjtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyaW5nIHNkcCA9IDI7XG4gICAqL1xuICBzZHA6IHN0cmluZztcbn1cbi8qKlxuICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5QdWJsaXNoZXJBbnN3ZXJcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQdWJsaXNoZXJBbnN3ZXIge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJpbmcgc2RwID0gMTtcbiAgICovXG4gIHNkcDogc3RyaW5nO1xufVxuLyoqXG4gKiBDb25uZWN0aW9uUXVhbGl0eSBpcyBzZW50IHRvIGluZm9ybSBhYm91dCBjb25uZWN0aW9uIHF1YWxpdHkgY2hhbmdlc1xuICogZWcuIHRoaWVycnkncyBjb25uZWN0aW9uIGlzIG5vdCBnb29kIC0+IHJlbmRlciBhIHJlZCBpY29uIFpvb20gc3R5bGVcbiAqXG4gKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LkNvbm5lY3Rpb25RdWFsaXR5Q2hhbmdlZFxuICovXG5leHBvcnQgaW50ZXJmYWNlIENvbm5lY3Rpb25RdWFsaXR5Q2hhbmdlZCB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHJlcGVhdGVkIHN0cmVhbS52aWRlby5zZnUuZXZlbnQuQ29ubmVjdGlvblF1YWxpdHlJbmZvIGNvbm5lY3Rpb25fcXVhbGl0eV91cGRhdGVzID0gMTtcbiAgICovXG4gIGNvbm5lY3Rpb25RdWFsaXR5VXBkYXRlczogQ29ubmVjdGlvblF1YWxpdHlJbmZvW107XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUuZXZlbnQuQ29ubmVjdGlvblF1YWxpdHlJbmZvXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ29ubmVjdGlvblF1YWxpdHlJbmZvIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyaW5nIHVzZXJfaWQgPSAxO1xuICAgKi9cbiAgdXNlcklkOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmluZyBzZXNzaW9uX2lkID0gMjtcbiAgICovXG4gIHNlc3Npb25JZDogc3RyaW5nO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5Db25uZWN0aW9uUXVhbGl0eSBjb25uZWN0aW9uX3F1YWxpdHkgPSAzO1xuICAgKi9cbiAgY29ubmVjdGlvblF1YWxpdHk6IENvbm5lY3Rpb25RdWFsaXR5O1xufVxuLyoqXG4gKiBEb21pbmFudFNwZWFrZXJDaGFuZ2VkIGlzIHNlbnQgYnkgdGhlIFNGVSB0byBub3RpZnkgd2hlbiB0aGVyZSBpcyBhIG5ldyBkb21pbmFudCBzcGVha2VyIGluIHRoZSBjYWxsXG4gKlxuICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5Eb21pbmFudFNwZWFrZXJDaGFuZ2VkXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRG9taW5hbnRTcGVha2VyQ2hhbmdlZCB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmluZyB1c2VyX2lkID0gMTtcbiAgICovXG4gIHVzZXJJZDogc3RyaW5nO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJpbmcgc2Vzc2lvbl9pZCA9IDI7XG4gICAqL1xuICBzZXNzaW9uSWQ6IHN0cmluZztcbn1cbi8qKlxuICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5BdWRpb0xldmVsXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQXVkaW9MZXZlbCB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmluZyB1c2VyX2lkID0gMTtcbiAgICovXG4gIHVzZXJJZDogc3RyaW5nO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJpbmcgc2Vzc2lvbl9pZCA9IDI7XG4gICAqL1xuICBzZXNzaW9uSWQ6IHN0cmluZztcbiAgLyoqXG4gICAqIDAuMCBtZWFucyBjb21wbGV0ZSBzaWxlbmNlLCAxLjAgbG91ZGVzdFxuICAgKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IGZsb2F0IGxldmVsID0gMztcbiAgICovXG4gIGxldmVsOiBudW1iZXI7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IGJvb2wgaXNfc3BlYWtpbmcgPSA0O1xuICAgKi9cbiAgaXNTcGVha2luZzogYm9vbGVhbjtcbn1cbi8qKlxuICogQXVkaW9MZXZlbENoYW5nZWQgaXMgc2VudCBieSB0aGUgU0ZVIHRvIG5vdGlmeSBhYm91dCBhdWRpbyBsZXZlbHMgYnkgdXNlclxuICpcbiAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUuZXZlbnQuQXVkaW9MZXZlbENoYW5nZWRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBBdWRpb0xldmVsQ2hhbmdlZCB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHJlcGVhdGVkIHN0cmVhbS52aWRlby5zZnUuZXZlbnQuQXVkaW9MZXZlbCBhdWRpb19sZXZlbHMgPSAxO1xuICAgKi9cbiAgYXVkaW9MZXZlbHM6IEF1ZGlvTGV2ZWxbXTtcbn1cbi8qKlxuICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5BdWRpb01lZGlhUmVxdWVzdFxuICovXG5leHBvcnQgaW50ZXJmYWNlIEF1ZGlvTWVkaWFSZXF1ZXN0IHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogaW50MzIgY2hhbm5lbF9jb3VudCA9IDE7XG4gICAqL1xuICBjaGFubmVsQ291bnQ6IG51bWJlcjtcbn1cbi8qKlxuICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5BdWRpb1NlbmRlclxuICovXG5leHBvcnQgaW50ZXJmYWNlIEF1ZGlvU2VuZGVyIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5BdWRpb01lZGlhUmVxdWVzdCBtZWRpYV9yZXF1ZXN0ID0gMTtcbiAgICovXG4gIG1lZGlhUmVxdWVzdD86IEF1ZGlvTWVkaWFSZXF1ZXN0O1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5Db2RlYyBjb2RlYyA9IDI7XG4gICAqL1xuICBjb2RlYz86IENvZGVjO1xufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LlZpZGVvTWVkaWFSZXF1ZXN0XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVmlkZW9NZWRpYVJlcXVlc3Qge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBpbnQzMiBpZGVhbF9oZWlnaHQgPSAxO1xuICAgKi9cbiAgaWRlYWxIZWlnaHQ6IG51bWJlcjtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogaW50MzIgaWRlYWxfd2lkdGggPSAyO1xuICAgKi9cbiAgaWRlYWxXaWR0aDogbnVtYmVyO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBpbnQzMiBpZGVhbF9mcmFtZV9yYXRlID0gMztcbiAgICovXG4gIGlkZWFsRnJhbWVSYXRlOiBudW1iZXI7XG59XG4vKipcbiAqIFZpZGVvTGF5ZXJTZXR0aW5nIGlzIHVzZWQgdG8gc3BlY2lmeSB2YXJpb3VzIHBhcmFtZXRlcnMgb2YgYSBwYXJ0aWN1bGFyIGVuY29kaW5nIGluIHNpbXVsY2FzdC5cbiAqIFRoZSBwYXJhbWV0ZXJzIGFyZSBzcGVjaWZpZWQgaGVyZSAtIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9SVENSdHBFbmNvZGluZ1BhcmFtZXRlcnNcbiAqIFNES3MgdXNlIHRoZXNlIHBhcmFtZXRlcnMgc2VudCBmcm9tIHRoZSBzZXJ2ZXIgdG8gZHluYW1pY2FsbHkgYWRqdXN0IHRoZXNlIHBhcmFtZXRlcnMgdG8gc2F2ZSBDUFUsIGJhbmR3aWR0aFxuICpcbiAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUuZXZlbnQuVmlkZW9MYXllclNldHRpbmdcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBWaWRlb0xheWVyU2V0dGluZyB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmluZyBuYW1lID0gMTtcbiAgICovXG4gIG5hbWU6IHN0cmluZztcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogYm9vbCBhY3RpdmUgPSAyO1xuICAgKi9cbiAgYWN0aXZlOiBib29sZWFuO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBpbnQzMiBtYXhfYml0cmF0ZSA9IDM7XG4gICAqL1xuICBtYXhCaXRyYXRlOiBudW1iZXI7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IGZsb2F0IHNjYWxlX3Jlc29sdXRpb25fZG93bl9ieSA9IDQ7XG4gICAqL1xuICBzY2FsZVJlc29sdXRpb25Eb3duQnk6IG51bWJlcjtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5WaWRlb0xheWVyU2V0dGluZy5Qcmlvcml0eSBwcmlvcml0eSA9IDU7XG4gICAqL1xuICBwcmlvcml0eTogVmlkZW9MYXllclNldHRpbmdfUHJpb3JpdHk7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmVhbS52aWRlby5zZnUubW9kZWxzLkNvZGVjIGNvZGVjID0gNjtcbiAgICovXG4gIGNvZGVjPzogQ29kZWM7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHVpbnQzMiBtYXhfZnJhbWVyYXRlID0gNztcbiAgICovXG4gIG1heEZyYW1lcmF0ZTogbnVtYmVyO1xufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZW51bSBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LlZpZGVvTGF5ZXJTZXR0aW5nLlByaW9yaXR5XG4gKi9cbmV4cG9ydCBlbnVtIFZpZGVvTGF5ZXJTZXR0aW5nX1ByaW9yaXR5IHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBlbnVtIHZhbHVlOiBQUklPUklUWV9ISUdIX1VOU1BFQ0lGSUVEID0gMDtcbiAgICovXG4gIEhJR0hfVU5TUEVDSUZJRUQgPSAwLFxuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGVudW0gdmFsdWU6IFBSSU9SSVRZX0xPVyA9IDE7XG4gICAqL1xuICBMT1cgPSAxLFxuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGVudW0gdmFsdWU6IFBSSU9SSVRZX01FRElVTSA9IDI7XG4gICAqL1xuICBNRURJVU0gPSAyLFxuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGVudW0gdmFsdWU6IFBSSU9SSVRZX1ZFUllfTE9XID0gMztcbiAgICovXG4gIFZFUllfTE9XID0gMyxcbn1cbi8qKlxuICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5WaWRlb1NlbmRlclxuICovXG5leHBvcnQgaW50ZXJmYWNlIFZpZGVvU2VuZGVyIHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5WaWRlb01lZGlhUmVxdWVzdCBtZWRpYV9yZXF1ZXN0ID0gMTtcbiAgICovXG4gIG1lZGlhUmVxdWVzdD86IFZpZGVvTWVkaWFSZXF1ZXN0O1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5Db2RlYyBjb2RlYyA9IDI7XG4gICAqL1xuICBjb2RlYz86IENvZGVjO1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiByZXBlYXRlZCBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LlZpZGVvTGF5ZXJTZXR0aW5nIGxheWVycyA9IDM7XG4gICAqL1xuICBsYXllcnM6IFZpZGVvTGF5ZXJTZXR0aW5nW107XG59XG4vKipcbiAqIHNlbnQgdG8gdXNlcnMgd2hlbiB0aGV5IG5lZWQgdG8gY2hhbmdlIHRoZSBxdWFsaXR5IG9mIHRoZWlyIHZpZGVvXG4gKlxuICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5DaGFuZ2VQdWJsaXNoUXVhbGl0eVxuICovXG5leHBvcnQgaW50ZXJmYWNlIENoYW5nZVB1Ymxpc2hRdWFsaXR5IHtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogcmVwZWF0ZWQgc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5BdWRpb1NlbmRlciBhdWRpb19zZW5kZXJzID0gMTtcbiAgICovXG4gIGF1ZGlvU2VuZGVyczogQXVkaW9TZW5kZXJbXTtcbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBmaWVsZDogcmVwZWF0ZWQgc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5WaWRlb1NlbmRlciB2aWRlb19zZW5kZXJzID0gMjtcbiAgICovXG4gIHZpZGVvU2VuZGVyczogVmlkZW9TZW5kZXJbXTtcbn1cbi8qKlxuICogQ2FsbEdyYW50cyBpcyBzZW50IHRvIHVzZXJzIHdoZW4gdGhlcmUgaXMgYSBjaGFuZ2UgaW4gdGhlIGNhbGwgcGVybWlzc2lvbnNcbiAqIHRvIHB1Ymxpc2ggYXVkaW8sIHZpZGVvIG9yIHNoYXJlIHRoZSBzY3JlZW4gZm9yIGEgdXNlciBvciBhIHJvbGUuIFRoaXMgaXNcbiAqIGlkZW1wb3RlbnQgYW5kIGNhbiBiZSBzZW50IGF0IGFueSB0aW1lLiBPbmx5IHRoZSBjdXJyZW50X2dyYW50cyBpbiB0aGUgbGF0ZXN0XG4gKiBtZXNzYWdlIHNob3VsZCBiZSBjb25zaWRlcmVkLiBJbiBvdGhlciB3b3JkcywgdGhpcyBpcyBub3QgZGVwZW5kZW50IG9uIGFueVxuICogb3RoZXIgbWVzc2FnZSAoaW5jbHVkaW5nIHByZXZpb3VzIGNhbGxfZ3JhbnRzX3VwZGF0ZWQgbWVzc2FnZSlcbiAqXG4gKiBXaGVuIHRoaXMgbWVzc2FnZSBpcyByZWNlaXZlZCwgdGhlIGNsaWVudCAoc2F5LCBSZWFjdCBjb21wb25lbnQpIHNob3VsZCBtdXRlXG4gKiB0aGUgdHJhY2tzIHdoaWNoIGFyZSBub3QgYWxsb3dlZCBhbnltb3JlLiBGb3IgZXhhbXBsZSwgaWYgdGhlIG1lc3NhZ2UgaGFzXG4gKiBncmFudHMge2F1ZGlvOnRydWUsIHZpZGVvOmZhbHNlfSB3aGlsZSB0aGUgdXNlciBpcyBwdWJsaXNoaW5nIHZpZGVvLCB0aGVuIHRoZVxuICogY2xpZW50IGNvbXBvbmVudCBzaG91bGQgbXV0ZSB0aGUgdmlkZW8gdHJhY2sgYW5kIGdyYXkgb3V0IHRoZSB2aWRlbyBidXR0b24uXG4gKiBUaGlzIHdheSwgdGhlIHVzZXIgd2lsbCBub3QgYmUgYWJsZSB0byBwdWJsaXNoIHZpZGVvIHVudGlsIHRoZSBwZXJtaXNzaW9uc1xuICogYXJlIGdyYW50ZWQgYWdhaW4uIEFsc28sIG11dGluZyB0aGUgdHJhY2sgb24gdGhlIGNsaWVudCBzaWRlIHdpbGwgcHJldmVudFxuICogdGhlIFNGVSBmcm9tIHJlY2VpdmluZyB0aGUgdmlkZW8gdHJhY2sgYW5kIHdpbGwgc2F2ZSBiYW5kd2lkdGguXG4gKlxuICogSW4gc2ltcGxlIHdvcmRzLCB0aGlzIGlzIGV4YWN0bHkgdGhlIHNhbWUgYXMgbXV0aW5nIGEgdHJhY2sgb24gdGhlIGNsaWVudC5cbiAqIEhlcmUsIGluc3RlYWQgb2YgdGhlIHVzZXIgaW5zdHJ1Y3RpbmcgdGhlIGNsaWVudCwgU0ZVIHdvdWxkIGJlIGRvaW5nIGl0LlxuICpcbiAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUuZXZlbnQuQ2FsbEdyYW50c1VwZGF0ZWRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDYWxsR3JhbnRzVXBkYXRlZCB7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmVhbS52aWRlby5zZnUubW9kZWxzLkNhbGxHcmFudHMgY3VycmVudF9ncmFudHMgPSAxO1xuICAgKi9cbiAgY3VycmVudEdyYW50cz86IENhbGxHcmFudHM7XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgZmllbGQ6IHN0cmluZyBtZXNzYWdlID0gMjtcbiAgICovXG4gIG1lc3NhZ2U6IHN0cmluZztcbn1cbi8qKlxuICogR28gYXdheSBpcyBzZW50IGJ5IHRoZSBTRlUgdG8gdGhlIGNsaWVudCB0byBzaWduYWwgdG8gbWlncmF0ZSBhd2F5IGZyb20gdGhlIFNGVS5cbiAqIFRoZSBldmljdCByZWFzb24gbWF5IHNwZWNpZnkgd2h5IHRoZSB1c2VyIGlzIGJlaW5nIGV2aWN0ZWQuXG4gKlxuICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5Hb0F3YXlcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBHb0F3YXkge1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpZWxkOiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5Hb0F3YXlSZWFzb24gcmVhc29uID0gMTtcbiAgICovXG4gIHJlYXNvbjogR29Bd2F5UmVhc29uO1xufVxuLy8gQGdlbmVyYXRlZCBtZXNzYWdlIHR5cGUgd2l0aCByZWZsZWN0aW9uIGluZm9ybWF0aW9uLCBtYXkgcHJvdmlkZSBzcGVlZCBvcHRpbWl6ZWQgbWV0aG9kc1xuY2xhc3MgU2Z1RXZlbnQkVHlwZSBleHRlbmRzIE1lc3NhZ2VUeXBlPFNmdUV2ZW50PiB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCdzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LlNmdUV2ZW50JywgW1xuICAgICAge1xuICAgICAgICBubzogMSxcbiAgICAgICAgbmFtZTogJ3N1YnNjcmliZXJfb2ZmZXInLFxuICAgICAgICBraW5kOiAnbWVzc2FnZScsXG4gICAgICAgIG9uZW9mOiAnZXZlbnRQYXlsb2FkJyxcbiAgICAgICAgVDogKCkgPT4gU3Vic2NyaWJlck9mZmVyLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbm86IDIsXG4gICAgICAgIG5hbWU6ICdwdWJsaXNoZXJfYW5zd2VyJyxcbiAgICAgICAga2luZDogJ21lc3NhZ2UnLFxuICAgICAgICBvbmVvZjogJ2V2ZW50UGF5bG9hZCcsXG4gICAgICAgIFQ6ICgpID0+IFB1Ymxpc2hlckFuc3dlcixcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5vOiAzLFxuICAgICAgICBuYW1lOiAnY29ubmVjdGlvbl9xdWFsaXR5X2NoYW5nZWQnLFxuICAgICAgICBraW5kOiAnbWVzc2FnZScsXG4gICAgICAgIG9uZW9mOiAnZXZlbnRQYXlsb2FkJyxcbiAgICAgICAgVDogKCkgPT4gQ29ubmVjdGlvblF1YWxpdHlDaGFuZ2VkLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbm86IDQsXG4gICAgICAgIG5hbWU6ICdhdWRpb19sZXZlbF9jaGFuZ2VkJyxcbiAgICAgICAga2luZDogJ21lc3NhZ2UnLFxuICAgICAgICBvbmVvZjogJ2V2ZW50UGF5bG9hZCcsXG4gICAgICAgIFQ6ICgpID0+IEF1ZGlvTGV2ZWxDaGFuZ2VkLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbm86IDUsXG4gICAgICAgIG5hbWU6ICdpY2VfdHJpY2tsZScsXG4gICAgICAgIGtpbmQ6ICdtZXNzYWdlJyxcbiAgICAgICAgb25lb2Y6ICdldmVudFBheWxvYWQnLFxuICAgICAgICBUOiAoKSA9PiBJQ0VUcmlja2xlJCxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5vOiA2LFxuICAgICAgICBuYW1lOiAnY2hhbmdlX3B1Ymxpc2hfcXVhbGl0eScsXG4gICAgICAgIGtpbmQ6ICdtZXNzYWdlJyxcbiAgICAgICAgb25lb2Y6ICdldmVudFBheWxvYWQnLFxuICAgICAgICBUOiAoKSA9PiBDaGFuZ2VQdWJsaXNoUXVhbGl0eSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5vOiAxMCxcbiAgICAgICAgbmFtZTogJ3BhcnRpY2lwYW50X2pvaW5lZCcsXG4gICAgICAgIGtpbmQ6ICdtZXNzYWdlJyxcbiAgICAgICAgb25lb2Y6ICdldmVudFBheWxvYWQnLFxuICAgICAgICBUOiAoKSA9PiBQYXJ0aWNpcGFudEpvaW5lZCxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5vOiAxMSxcbiAgICAgICAgbmFtZTogJ3BhcnRpY2lwYW50X2xlZnQnLFxuICAgICAgICBraW5kOiAnbWVzc2FnZScsXG4gICAgICAgIG9uZW9mOiAnZXZlbnRQYXlsb2FkJyxcbiAgICAgICAgVDogKCkgPT4gUGFydGljaXBhbnRMZWZ0LFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbm86IDEyLFxuICAgICAgICBuYW1lOiAnZG9taW5hbnRfc3BlYWtlcl9jaGFuZ2VkJyxcbiAgICAgICAga2luZDogJ21lc3NhZ2UnLFxuICAgICAgICBvbmVvZjogJ2V2ZW50UGF5bG9hZCcsXG4gICAgICAgIFQ6ICgpID0+IERvbWluYW50U3BlYWtlckNoYW5nZWQsXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBubzogMTMsXG4gICAgICAgIG5hbWU6ICdqb2luX3Jlc3BvbnNlJyxcbiAgICAgICAga2luZDogJ21lc3NhZ2UnLFxuICAgICAgICBvbmVvZjogJ2V2ZW50UGF5bG9hZCcsXG4gICAgICAgIFQ6ICgpID0+IEpvaW5SZXNwb25zZSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5vOiAxNCxcbiAgICAgICAgbmFtZTogJ2hlYWx0aF9jaGVja19yZXNwb25zZScsXG4gICAgICAgIGtpbmQ6ICdtZXNzYWdlJyxcbiAgICAgICAgb25lb2Y6ICdldmVudFBheWxvYWQnLFxuICAgICAgICBUOiAoKSA9PiBIZWFsdGhDaGVja1Jlc3BvbnNlLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbm86IDE2LFxuICAgICAgICBuYW1lOiAndHJhY2tfcHVibGlzaGVkJyxcbiAgICAgICAga2luZDogJ21lc3NhZ2UnLFxuICAgICAgICBvbmVvZjogJ2V2ZW50UGF5bG9hZCcsXG4gICAgICAgIFQ6ICgpID0+IFRyYWNrUHVibGlzaGVkLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbm86IDE3LFxuICAgICAgICBuYW1lOiAndHJhY2tfdW5wdWJsaXNoZWQnLFxuICAgICAgICBraW5kOiAnbWVzc2FnZScsXG4gICAgICAgIG9uZW9mOiAnZXZlbnRQYXlsb2FkJyxcbiAgICAgICAgVDogKCkgPT4gVHJhY2tVbnB1Ymxpc2hlZCxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5vOiAxOCxcbiAgICAgICAgbmFtZTogJ2Vycm9yJyxcbiAgICAgICAga2luZDogJ21lc3NhZ2UnLFxuICAgICAgICBvbmVvZjogJ2V2ZW50UGF5bG9hZCcsXG4gICAgICAgIFQ6ICgpID0+IEVycm9yLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbm86IDE5LFxuICAgICAgICBuYW1lOiAnY2FsbF9ncmFudHNfdXBkYXRlZCcsXG4gICAgICAgIGtpbmQ6ICdtZXNzYWdlJyxcbiAgICAgICAgb25lb2Y6ICdldmVudFBheWxvYWQnLFxuICAgICAgICBUOiAoKSA9PiBDYWxsR3JhbnRzVXBkYXRlZCxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5vOiAyMCxcbiAgICAgICAgbmFtZTogJ2dvX2F3YXknLFxuICAgICAgICBraW5kOiAnbWVzc2FnZScsXG4gICAgICAgIG9uZW9mOiAnZXZlbnRQYXlsb2FkJyxcbiAgICAgICAgVDogKCkgPT4gR29Bd2F5LFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbm86IDIxLFxuICAgICAgICBuYW1lOiAnaWNlX3Jlc3RhcnQnLFxuICAgICAgICBraW5kOiAnbWVzc2FnZScsXG4gICAgICAgIG9uZW9mOiAnZXZlbnRQYXlsb2FkJyxcbiAgICAgICAgVDogKCkgPT4gSUNFUmVzdGFydCxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5vOiAyMixcbiAgICAgICAgbmFtZTogJ3BpbnNfdXBkYXRlZCcsXG4gICAgICAgIGtpbmQ6ICdtZXNzYWdlJyxcbiAgICAgICAgb25lb2Y6ICdldmVudFBheWxvYWQnLFxuICAgICAgICBUOiAoKSA9PiBQaW5zQ2hhbmdlZCxcbiAgICAgIH0sXG4gICAgXSk7XG4gIH1cbiAgY3JlYXRlKHZhbHVlPzogUGFydGlhbE1lc3NhZ2U8U2Z1RXZlbnQ+KTogU2Z1RXZlbnQge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBnbG9iYWxUaGlzLk9iamVjdC5jcmVhdGUodGhpcy5tZXNzYWdlUHJvdG90eXBlISk7XG4gICAgbWVzc2FnZS5ldmVudFBheWxvYWQgPSB7IG9uZW9mS2luZDogdW5kZWZpbmVkIH07XG4gICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpXG4gICAgICByZWZsZWN0aW9uTWVyZ2VQYXJ0aWFsPFNmdUV2ZW50Pih0aGlzLCBtZXNzYWdlLCB2YWx1ZSk7XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH1cbiAgaW50ZXJuYWxCaW5hcnlSZWFkKFxuICAgIHJlYWRlcjogSUJpbmFyeVJlYWRlcixcbiAgICBsZW5ndGg6IG51bWJlcixcbiAgICBvcHRpb25zOiBCaW5hcnlSZWFkT3B0aW9ucyxcbiAgICB0YXJnZXQ/OiBTZnVFdmVudCxcbiAgKTogU2Z1RXZlbnQge1xuICAgIGxldCBtZXNzYWdlID0gdGFyZ2V0ID8/IHRoaXMuY3JlYXRlKCksXG4gICAgICBlbmQgPSByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBsZXQgW2ZpZWxkTm8sIHdpcmVUeXBlXSA9IHJlYWRlci50YWcoKTtcbiAgICAgIHN3aXRjaCAoZmllbGRObykge1xuICAgICAgICBjYXNlIC8qIHN0cmVhbS52aWRlby5zZnUuZXZlbnQuU3Vic2NyaWJlck9mZmVyIHN1YnNjcmliZXJfb2ZmZXIgKi8gMTpcbiAgICAgICAgICBtZXNzYWdlLmV2ZW50UGF5bG9hZCA9IHtcbiAgICAgICAgICAgIG9uZW9mS2luZDogJ3N1YnNjcmliZXJPZmZlcicsXG4gICAgICAgICAgICBzdWJzY3JpYmVyT2ZmZXI6IFN1YnNjcmliZXJPZmZlci5pbnRlcm5hbEJpbmFyeVJlYWQoXG4gICAgICAgICAgICAgIHJlYWRlcixcbiAgICAgICAgICAgICAgcmVhZGVyLnVpbnQzMigpLFxuICAgICAgICAgICAgICBvcHRpb25zLFxuICAgICAgICAgICAgICAobWVzc2FnZS5ldmVudFBheWxvYWQgYXMgYW55KS5zdWJzY3JpYmVyT2ZmZXIsXG4gICAgICAgICAgICApLFxuICAgICAgICAgIH07XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgLyogc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5QdWJsaXNoZXJBbnN3ZXIgcHVibGlzaGVyX2Fuc3dlciAqLyAyOlxuICAgICAgICAgIG1lc3NhZ2UuZXZlbnRQYXlsb2FkID0ge1xuICAgICAgICAgICAgb25lb2ZLaW5kOiAncHVibGlzaGVyQW5zd2VyJyxcbiAgICAgICAgICAgIHB1Ymxpc2hlckFuc3dlcjogUHVibGlzaGVyQW5zd2VyLmludGVybmFsQmluYXJ5UmVhZChcbiAgICAgICAgICAgICAgcmVhZGVyLFxuICAgICAgICAgICAgICByZWFkZXIudWludDMyKCksXG4gICAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICAgIChtZXNzYWdlLmV2ZW50UGF5bG9hZCBhcyBhbnkpLnB1Ymxpc2hlckFuc3dlcixcbiAgICAgICAgICAgICksXG4gICAgICAgICAgfTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAvKiBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LkNvbm5lY3Rpb25RdWFsaXR5Q2hhbmdlZCBjb25uZWN0aW9uX3F1YWxpdHlfY2hhbmdlZCAqLyAzOlxuICAgICAgICAgIG1lc3NhZ2UuZXZlbnRQYXlsb2FkID0ge1xuICAgICAgICAgICAgb25lb2ZLaW5kOiAnY29ubmVjdGlvblF1YWxpdHlDaGFuZ2VkJyxcbiAgICAgICAgICAgIGNvbm5lY3Rpb25RdWFsaXR5Q2hhbmdlZDpcbiAgICAgICAgICAgICAgQ29ubmVjdGlvblF1YWxpdHlDaGFuZ2VkLmludGVybmFsQmluYXJ5UmVhZChcbiAgICAgICAgICAgICAgICByZWFkZXIsXG4gICAgICAgICAgICAgICAgcmVhZGVyLnVpbnQzMigpLFxuICAgICAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICAgICAgKG1lc3NhZ2UuZXZlbnRQYXlsb2FkIGFzIGFueSkuY29ubmVjdGlvblF1YWxpdHlDaGFuZ2VkLFxuICAgICAgICAgICAgICApLFxuICAgICAgICAgIH07XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgLyogc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5BdWRpb0xldmVsQ2hhbmdlZCBhdWRpb19sZXZlbF9jaGFuZ2VkICovIDQ6XG4gICAgICAgICAgbWVzc2FnZS5ldmVudFBheWxvYWQgPSB7XG4gICAgICAgICAgICBvbmVvZktpbmQ6ICdhdWRpb0xldmVsQ2hhbmdlZCcsXG4gICAgICAgICAgICBhdWRpb0xldmVsQ2hhbmdlZDogQXVkaW9MZXZlbENoYW5nZWQuaW50ZXJuYWxCaW5hcnlSZWFkKFxuICAgICAgICAgICAgICByZWFkZXIsXG4gICAgICAgICAgICAgIHJlYWRlci51aW50MzIoKSxcbiAgICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICAgICAgKG1lc3NhZ2UuZXZlbnRQYXlsb2FkIGFzIGFueSkuYXVkaW9MZXZlbENoYW5nZWQsXG4gICAgICAgICAgICApLFxuICAgICAgICAgIH07XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgLyogc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuSUNFVHJpY2tsZSBpY2VfdHJpY2tsZSAqLyA1OlxuICAgICAgICAgIG1lc3NhZ2UuZXZlbnRQYXlsb2FkID0ge1xuICAgICAgICAgICAgb25lb2ZLaW5kOiAnaWNlVHJpY2tsZScsXG4gICAgICAgICAgICBpY2VUcmlja2xlOiBJQ0VUcmlja2xlJC5pbnRlcm5hbEJpbmFyeVJlYWQoXG4gICAgICAgICAgICAgIHJlYWRlcixcbiAgICAgICAgICAgICAgcmVhZGVyLnVpbnQzMigpLFxuICAgICAgICAgICAgICBvcHRpb25zLFxuICAgICAgICAgICAgICAobWVzc2FnZS5ldmVudFBheWxvYWQgYXMgYW55KS5pY2VUcmlja2xlLFxuICAgICAgICAgICAgKSxcbiAgICAgICAgICB9O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIC8qIHN0cmVhbS52aWRlby5zZnUuZXZlbnQuQ2hhbmdlUHVibGlzaFF1YWxpdHkgY2hhbmdlX3B1Ymxpc2hfcXVhbGl0eSAqLyA2OlxuICAgICAgICAgIG1lc3NhZ2UuZXZlbnRQYXlsb2FkID0ge1xuICAgICAgICAgICAgb25lb2ZLaW5kOiAnY2hhbmdlUHVibGlzaFF1YWxpdHknLFxuICAgICAgICAgICAgY2hhbmdlUHVibGlzaFF1YWxpdHk6IENoYW5nZVB1Ymxpc2hRdWFsaXR5LmludGVybmFsQmluYXJ5UmVhZChcbiAgICAgICAgICAgICAgcmVhZGVyLFxuICAgICAgICAgICAgICByZWFkZXIudWludDMyKCksXG4gICAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICAgIChtZXNzYWdlLmV2ZW50UGF5bG9hZCBhcyBhbnkpLmNoYW5nZVB1Ymxpc2hRdWFsaXR5LFxuICAgICAgICAgICAgKSxcbiAgICAgICAgICB9O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIC8qIHN0cmVhbS52aWRlby5zZnUuZXZlbnQuUGFydGljaXBhbnRKb2luZWQgcGFydGljaXBhbnRfam9pbmVkICovIDEwOlxuICAgICAgICAgIG1lc3NhZ2UuZXZlbnRQYXlsb2FkID0ge1xuICAgICAgICAgICAgb25lb2ZLaW5kOiAncGFydGljaXBhbnRKb2luZWQnLFxuICAgICAgICAgICAgcGFydGljaXBhbnRKb2luZWQ6IFBhcnRpY2lwYW50Sm9pbmVkLmludGVybmFsQmluYXJ5UmVhZChcbiAgICAgICAgICAgICAgcmVhZGVyLFxuICAgICAgICAgICAgICByZWFkZXIudWludDMyKCksXG4gICAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICAgIChtZXNzYWdlLmV2ZW50UGF5bG9hZCBhcyBhbnkpLnBhcnRpY2lwYW50Sm9pbmVkLFxuICAgICAgICAgICAgKSxcbiAgICAgICAgICB9O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIC8qIHN0cmVhbS52aWRlby5zZnUuZXZlbnQuUGFydGljaXBhbnRMZWZ0IHBhcnRpY2lwYW50X2xlZnQgKi8gMTE6XG4gICAgICAgICAgbWVzc2FnZS5ldmVudFBheWxvYWQgPSB7XG4gICAgICAgICAgICBvbmVvZktpbmQ6ICdwYXJ0aWNpcGFudExlZnQnLFxuICAgICAgICAgICAgcGFydGljaXBhbnRMZWZ0OiBQYXJ0aWNpcGFudExlZnQuaW50ZXJuYWxCaW5hcnlSZWFkKFxuICAgICAgICAgICAgICByZWFkZXIsXG4gICAgICAgICAgICAgIHJlYWRlci51aW50MzIoKSxcbiAgICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICAgICAgKG1lc3NhZ2UuZXZlbnRQYXlsb2FkIGFzIGFueSkucGFydGljaXBhbnRMZWZ0LFxuICAgICAgICAgICAgKSxcbiAgICAgICAgICB9O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIC8qIHN0cmVhbS52aWRlby5zZnUuZXZlbnQuRG9taW5hbnRTcGVha2VyQ2hhbmdlZCBkb21pbmFudF9zcGVha2VyX2NoYW5nZWQgKi8gMTI6XG4gICAgICAgICAgbWVzc2FnZS5ldmVudFBheWxvYWQgPSB7XG4gICAgICAgICAgICBvbmVvZktpbmQ6ICdkb21pbmFudFNwZWFrZXJDaGFuZ2VkJyxcbiAgICAgICAgICAgIGRvbWluYW50U3BlYWtlckNoYW5nZWQ6IERvbWluYW50U3BlYWtlckNoYW5nZWQuaW50ZXJuYWxCaW5hcnlSZWFkKFxuICAgICAgICAgICAgICByZWFkZXIsXG4gICAgICAgICAgICAgIHJlYWRlci51aW50MzIoKSxcbiAgICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICAgICAgKG1lc3NhZ2UuZXZlbnRQYXlsb2FkIGFzIGFueSkuZG9taW5hbnRTcGVha2VyQ2hhbmdlZCxcbiAgICAgICAgICAgICksXG4gICAgICAgICAgfTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAvKiBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LkpvaW5SZXNwb25zZSBqb2luX3Jlc3BvbnNlICovIDEzOlxuICAgICAgICAgIG1lc3NhZ2UuZXZlbnRQYXlsb2FkID0ge1xuICAgICAgICAgICAgb25lb2ZLaW5kOiAnam9pblJlc3BvbnNlJyxcbiAgICAgICAgICAgIGpvaW5SZXNwb25zZTogSm9pblJlc3BvbnNlLmludGVybmFsQmluYXJ5UmVhZChcbiAgICAgICAgICAgICAgcmVhZGVyLFxuICAgICAgICAgICAgICByZWFkZXIudWludDMyKCksXG4gICAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICAgIChtZXNzYWdlLmV2ZW50UGF5bG9hZCBhcyBhbnkpLmpvaW5SZXNwb25zZSxcbiAgICAgICAgICAgICksXG4gICAgICAgICAgfTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAvKiBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LkhlYWx0aENoZWNrUmVzcG9uc2UgaGVhbHRoX2NoZWNrX3Jlc3BvbnNlICovIDE0OlxuICAgICAgICAgIG1lc3NhZ2UuZXZlbnRQYXlsb2FkID0ge1xuICAgICAgICAgICAgb25lb2ZLaW5kOiAnaGVhbHRoQ2hlY2tSZXNwb25zZScsXG4gICAgICAgICAgICBoZWFsdGhDaGVja1Jlc3BvbnNlOiBIZWFsdGhDaGVja1Jlc3BvbnNlLmludGVybmFsQmluYXJ5UmVhZChcbiAgICAgICAgICAgICAgcmVhZGVyLFxuICAgICAgICAgICAgICByZWFkZXIudWludDMyKCksXG4gICAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICAgIChtZXNzYWdlLmV2ZW50UGF5bG9hZCBhcyBhbnkpLmhlYWx0aENoZWNrUmVzcG9uc2UsXG4gICAgICAgICAgICApLFxuICAgICAgICAgIH07XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgLyogc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5UcmFja1B1Ymxpc2hlZCB0cmFja19wdWJsaXNoZWQgKi8gMTY6XG4gICAgICAgICAgbWVzc2FnZS5ldmVudFBheWxvYWQgPSB7XG4gICAgICAgICAgICBvbmVvZktpbmQ6ICd0cmFja1B1Ymxpc2hlZCcsXG4gICAgICAgICAgICB0cmFja1B1Ymxpc2hlZDogVHJhY2tQdWJsaXNoZWQuaW50ZXJuYWxCaW5hcnlSZWFkKFxuICAgICAgICAgICAgICByZWFkZXIsXG4gICAgICAgICAgICAgIHJlYWRlci51aW50MzIoKSxcbiAgICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICAgICAgKG1lc3NhZ2UuZXZlbnRQYXlsb2FkIGFzIGFueSkudHJhY2tQdWJsaXNoZWQsXG4gICAgICAgICAgICApLFxuICAgICAgICAgIH07XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgLyogc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5UcmFja1VucHVibGlzaGVkIHRyYWNrX3VucHVibGlzaGVkICovIDE3OlxuICAgICAgICAgIG1lc3NhZ2UuZXZlbnRQYXlsb2FkID0ge1xuICAgICAgICAgICAgb25lb2ZLaW5kOiAndHJhY2tVbnB1Ymxpc2hlZCcsXG4gICAgICAgICAgICB0cmFja1VucHVibGlzaGVkOiBUcmFja1VucHVibGlzaGVkLmludGVybmFsQmluYXJ5UmVhZChcbiAgICAgICAgICAgICAgcmVhZGVyLFxuICAgICAgICAgICAgICByZWFkZXIudWludDMyKCksXG4gICAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICAgIChtZXNzYWdlLmV2ZW50UGF5bG9hZCBhcyBhbnkpLnRyYWNrVW5wdWJsaXNoZWQsXG4gICAgICAgICAgICApLFxuICAgICAgICAgIH07XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgLyogc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5FcnJvciBlcnJvciAqLyAxODpcbiAgICAgICAgICBtZXNzYWdlLmV2ZW50UGF5bG9hZCA9IHtcbiAgICAgICAgICAgIG9uZW9mS2luZDogJ2Vycm9yJyxcbiAgICAgICAgICAgIGVycm9yOiBFcnJvci5pbnRlcm5hbEJpbmFyeVJlYWQoXG4gICAgICAgICAgICAgIHJlYWRlcixcbiAgICAgICAgICAgICAgcmVhZGVyLnVpbnQzMigpLFxuICAgICAgICAgICAgICBvcHRpb25zLFxuICAgICAgICAgICAgICAobWVzc2FnZS5ldmVudFBheWxvYWQgYXMgYW55KS5lcnJvcixcbiAgICAgICAgICAgICksXG4gICAgICAgICAgfTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAvKiBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LkNhbGxHcmFudHNVcGRhdGVkIGNhbGxfZ3JhbnRzX3VwZGF0ZWQgKi8gMTk6XG4gICAgICAgICAgbWVzc2FnZS5ldmVudFBheWxvYWQgPSB7XG4gICAgICAgICAgICBvbmVvZktpbmQ6ICdjYWxsR3JhbnRzVXBkYXRlZCcsXG4gICAgICAgICAgICBjYWxsR3JhbnRzVXBkYXRlZDogQ2FsbEdyYW50c1VwZGF0ZWQuaW50ZXJuYWxCaW5hcnlSZWFkKFxuICAgICAgICAgICAgICByZWFkZXIsXG4gICAgICAgICAgICAgIHJlYWRlci51aW50MzIoKSxcbiAgICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICAgICAgKG1lc3NhZ2UuZXZlbnRQYXlsb2FkIGFzIGFueSkuY2FsbEdyYW50c1VwZGF0ZWQsXG4gICAgICAgICAgICApLFxuICAgICAgICAgIH07XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgLyogc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5Hb0F3YXkgZ29fYXdheSAqLyAyMDpcbiAgICAgICAgICBtZXNzYWdlLmV2ZW50UGF5bG9hZCA9IHtcbiAgICAgICAgICAgIG9uZW9mS2luZDogJ2dvQXdheScsXG4gICAgICAgICAgICBnb0F3YXk6IEdvQXdheS5pbnRlcm5hbEJpbmFyeVJlYWQoXG4gICAgICAgICAgICAgIHJlYWRlcixcbiAgICAgICAgICAgICAgcmVhZGVyLnVpbnQzMigpLFxuICAgICAgICAgICAgICBvcHRpb25zLFxuICAgICAgICAgICAgICAobWVzc2FnZS5ldmVudFBheWxvYWQgYXMgYW55KS5nb0F3YXksXG4gICAgICAgICAgICApLFxuICAgICAgICAgIH07XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgLyogc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5JQ0VSZXN0YXJ0IGljZV9yZXN0YXJ0ICovIDIxOlxuICAgICAgICAgIG1lc3NhZ2UuZXZlbnRQYXlsb2FkID0ge1xuICAgICAgICAgICAgb25lb2ZLaW5kOiAnaWNlUmVzdGFydCcsXG4gICAgICAgICAgICBpY2VSZXN0YXJ0OiBJQ0VSZXN0YXJ0LmludGVybmFsQmluYXJ5UmVhZChcbiAgICAgICAgICAgICAgcmVhZGVyLFxuICAgICAgICAgICAgICByZWFkZXIudWludDMyKCksXG4gICAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICAgIChtZXNzYWdlLmV2ZW50UGF5bG9hZCBhcyBhbnkpLmljZVJlc3RhcnQsXG4gICAgICAgICAgICApLFxuICAgICAgICAgIH07XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgLyogc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5QaW5zQ2hhbmdlZCBwaW5zX3VwZGF0ZWQgKi8gMjI6XG4gICAgICAgICAgbWVzc2FnZS5ldmVudFBheWxvYWQgPSB7XG4gICAgICAgICAgICBvbmVvZktpbmQ6ICdwaW5zVXBkYXRlZCcsXG4gICAgICAgICAgICBwaW5zVXBkYXRlZDogUGluc0NoYW5nZWQuaW50ZXJuYWxCaW5hcnlSZWFkKFxuICAgICAgICAgICAgICByZWFkZXIsXG4gICAgICAgICAgICAgIHJlYWRlci51aW50MzIoKSxcbiAgICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICAgICAgKG1lc3NhZ2UuZXZlbnRQYXlsb2FkIGFzIGFueSkucGluc1VwZGF0ZWQsXG4gICAgICAgICAgICApLFxuICAgICAgICAgIH07XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgbGV0IHUgPSBvcHRpb25zLnJlYWRVbmtub3duRmllbGQ7XG4gICAgICAgICAgaWYgKHUgPT09ICd0aHJvdycpXG4gICAgICAgICAgICB0aHJvdyBuZXcgZ2xvYmFsVGhpcy5FcnJvcihcbiAgICAgICAgICAgICAgYFVua25vd24gZmllbGQgJHtmaWVsZE5vfSAod2lyZSB0eXBlICR7d2lyZVR5cGV9KSBmb3IgJHt0aGlzLnR5cGVOYW1lfWAsXG4gICAgICAgICAgICApO1xuICAgICAgICAgIGxldCBkID0gcmVhZGVyLnNraXAod2lyZVR5cGUpO1xuICAgICAgICAgIGlmICh1ICE9PSBmYWxzZSlcbiAgICAgICAgICAgICh1ID09PSB0cnVlID8gVW5rbm93bkZpZWxkSGFuZGxlci5vblJlYWQgOiB1KShcbiAgICAgICAgICAgICAgdGhpcy50eXBlTmFtZSxcbiAgICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgICAgZmllbGRObyxcbiAgICAgICAgICAgICAgd2lyZVR5cGUsXG4gICAgICAgICAgICAgIGQsXG4gICAgICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxuICBpbnRlcm5hbEJpbmFyeVdyaXRlKFxuICAgIG1lc3NhZ2U6IFNmdUV2ZW50LFxuICAgIHdyaXRlcjogSUJpbmFyeVdyaXRlcixcbiAgICBvcHRpb25zOiBCaW5hcnlXcml0ZU9wdGlvbnMsXG4gICk6IElCaW5hcnlXcml0ZXIge1xuICAgIC8qIHN0cmVhbS52aWRlby5zZnUuZXZlbnQuU3Vic2NyaWJlck9mZmVyIHN1YnNjcmliZXJfb2ZmZXIgPSAxOyAqL1xuICAgIGlmIChtZXNzYWdlLmV2ZW50UGF5bG9hZC5vbmVvZktpbmQgPT09ICdzdWJzY3JpYmVyT2ZmZXInKVxuICAgICAgU3Vic2NyaWJlck9mZmVyLmludGVybmFsQmluYXJ5V3JpdGUoXG4gICAgICAgIG1lc3NhZ2UuZXZlbnRQYXlsb2FkLnN1YnNjcmliZXJPZmZlcixcbiAgICAgICAgd3JpdGVyLnRhZygxLCBXaXJlVHlwZS5MZW5ndGhEZWxpbWl0ZWQpLmZvcmsoKSxcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICkuam9pbigpO1xuICAgIC8qIHN0cmVhbS52aWRlby5zZnUuZXZlbnQuUHVibGlzaGVyQW5zd2VyIHB1Ymxpc2hlcl9hbnN3ZXIgPSAyOyAqL1xuICAgIGlmIChtZXNzYWdlLmV2ZW50UGF5bG9hZC5vbmVvZktpbmQgPT09ICdwdWJsaXNoZXJBbnN3ZXInKVxuICAgICAgUHVibGlzaGVyQW5zd2VyLmludGVybmFsQmluYXJ5V3JpdGUoXG4gICAgICAgIG1lc3NhZ2UuZXZlbnRQYXlsb2FkLnB1Ymxpc2hlckFuc3dlcixcbiAgICAgICAgd3JpdGVyLnRhZygyLCBXaXJlVHlwZS5MZW5ndGhEZWxpbWl0ZWQpLmZvcmsoKSxcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICkuam9pbigpO1xuICAgIC8qIHN0cmVhbS52aWRlby5zZnUuZXZlbnQuQ29ubmVjdGlvblF1YWxpdHlDaGFuZ2VkIGNvbm5lY3Rpb25fcXVhbGl0eV9jaGFuZ2VkID0gMzsgKi9cbiAgICBpZiAobWVzc2FnZS5ldmVudFBheWxvYWQub25lb2ZLaW5kID09PSAnY29ubmVjdGlvblF1YWxpdHlDaGFuZ2VkJylcbiAgICAgIENvbm5lY3Rpb25RdWFsaXR5Q2hhbmdlZC5pbnRlcm5hbEJpbmFyeVdyaXRlKFxuICAgICAgICBtZXNzYWdlLmV2ZW50UGF5bG9hZC5jb25uZWN0aW9uUXVhbGl0eUNoYW5nZWQsXG4gICAgICAgIHdyaXRlci50YWcoMywgV2lyZVR5cGUuTGVuZ3RoRGVsaW1pdGVkKS5mb3JrKCksXG4gICAgICAgIG9wdGlvbnMsXG4gICAgICApLmpvaW4oKTtcbiAgICAvKiBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LkF1ZGlvTGV2ZWxDaGFuZ2VkIGF1ZGlvX2xldmVsX2NoYW5nZWQgPSA0OyAqL1xuICAgIGlmIChtZXNzYWdlLmV2ZW50UGF5bG9hZC5vbmVvZktpbmQgPT09ICdhdWRpb0xldmVsQ2hhbmdlZCcpXG4gICAgICBBdWRpb0xldmVsQ2hhbmdlZC5pbnRlcm5hbEJpbmFyeVdyaXRlKFxuICAgICAgICBtZXNzYWdlLmV2ZW50UGF5bG9hZC5hdWRpb0xldmVsQ2hhbmdlZCxcbiAgICAgICAgd3JpdGVyLnRhZyg0LCBXaXJlVHlwZS5MZW5ndGhEZWxpbWl0ZWQpLmZvcmsoKSxcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICkuam9pbigpO1xuICAgIC8qIHN0cmVhbS52aWRlby5zZnUubW9kZWxzLklDRVRyaWNrbGUgaWNlX3RyaWNrbGUgPSA1OyAqL1xuICAgIGlmIChtZXNzYWdlLmV2ZW50UGF5bG9hZC5vbmVvZktpbmQgPT09ICdpY2VUcmlja2xlJylcbiAgICAgIElDRVRyaWNrbGUkLmludGVybmFsQmluYXJ5V3JpdGUoXG4gICAgICAgIG1lc3NhZ2UuZXZlbnRQYXlsb2FkLmljZVRyaWNrbGUsXG4gICAgICAgIHdyaXRlci50YWcoNSwgV2lyZVR5cGUuTGVuZ3RoRGVsaW1pdGVkKS5mb3JrKCksXG4gICAgICAgIG9wdGlvbnMsXG4gICAgICApLmpvaW4oKTtcbiAgICAvKiBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LkNoYW5nZVB1Ymxpc2hRdWFsaXR5IGNoYW5nZV9wdWJsaXNoX3F1YWxpdHkgPSA2OyAqL1xuICAgIGlmIChtZXNzYWdlLmV2ZW50UGF5bG9hZC5vbmVvZktpbmQgPT09ICdjaGFuZ2VQdWJsaXNoUXVhbGl0eScpXG4gICAgICBDaGFuZ2VQdWJsaXNoUXVhbGl0eS5pbnRlcm5hbEJpbmFyeVdyaXRlKFxuICAgICAgICBtZXNzYWdlLmV2ZW50UGF5bG9hZC5jaGFuZ2VQdWJsaXNoUXVhbGl0eSxcbiAgICAgICAgd3JpdGVyLnRhZyg2LCBXaXJlVHlwZS5MZW5ndGhEZWxpbWl0ZWQpLmZvcmsoKSxcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICkuam9pbigpO1xuICAgIC8qIHN0cmVhbS52aWRlby5zZnUuZXZlbnQuUGFydGljaXBhbnRKb2luZWQgcGFydGljaXBhbnRfam9pbmVkID0gMTA7ICovXG4gICAgaWYgKG1lc3NhZ2UuZXZlbnRQYXlsb2FkLm9uZW9mS2luZCA9PT0gJ3BhcnRpY2lwYW50Sm9pbmVkJylcbiAgICAgIFBhcnRpY2lwYW50Sm9pbmVkLmludGVybmFsQmluYXJ5V3JpdGUoXG4gICAgICAgIG1lc3NhZ2UuZXZlbnRQYXlsb2FkLnBhcnRpY2lwYW50Sm9pbmVkLFxuICAgICAgICB3cml0ZXIudGFnKDEwLCBXaXJlVHlwZS5MZW5ndGhEZWxpbWl0ZWQpLmZvcmsoKSxcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICkuam9pbigpO1xuICAgIC8qIHN0cmVhbS52aWRlby5zZnUuZXZlbnQuUGFydGljaXBhbnRMZWZ0IHBhcnRpY2lwYW50X2xlZnQgPSAxMTsgKi9cbiAgICBpZiAobWVzc2FnZS5ldmVudFBheWxvYWQub25lb2ZLaW5kID09PSAncGFydGljaXBhbnRMZWZ0JylcbiAgICAgIFBhcnRpY2lwYW50TGVmdC5pbnRlcm5hbEJpbmFyeVdyaXRlKFxuICAgICAgICBtZXNzYWdlLmV2ZW50UGF5bG9hZC5wYXJ0aWNpcGFudExlZnQsXG4gICAgICAgIHdyaXRlci50YWcoMTEsIFdpcmVUeXBlLkxlbmd0aERlbGltaXRlZCkuZm9yaygpLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgKS5qb2luKCk7XG4gICAgLyogc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5Eb21pbmFudFNwZWFrZXJDaGFuZ2VkIGRvbWluYW50X3NwZWFrZXJfY2hhbmdlZCA9IDEyOyAqL1xuICAgIGlmIChtZXNzYWdlLmV2ZW50UGF5bG9hZC5vbmVvZktpbmQgPT09ICdkb21pbmFudFNwZWFrZXJDaGFuZ2VkJylcbiAgICAgIERvbWluYW50U3BlYWtlckNoYW5nZWQuaW50ZXJuYWxCaW5hcnlXcml0ZShcbiAgICAgICAgbWVzc2FnZS5ldmVudFBheWxvYWQuZG9taW5hbnRTcGVha2VyQ2hhbmdlZCxcbiAgICAgICAgd3JpdGVyLnRhZygxMiwgV2lyZVR5cGUuTGVuZ3RoRGVsaW1pdGVkKS5mb3JrKCksXG4gICAgICAgIG9wdGlvbnMsXG4gICAgICApLmpvaW4oKTtcbiAgICAvKiBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LkpvaW5SZXNwb25zZSBqb2luX3Jlc3BvbnNlID0gMTM7ICovXG4gICAgaWYgKG1lc3NhZ2UuZXZlbnRQYXlsb2FkLm9uZW9mS2luZCA9PT0gJ2pvaW5SZXNwb25zZScpXG4gICAgICBKb2luUmVzcG9uc2UuaW50ZXJuYWxCaW5hcnlXcml0ZShcbiAgICAgICAgbWVzc2FnZS5ldmVudFBheWxvYWQuam9pblJlc3BvbnNlLFxuICAgICAgICB3cml0ZXIudGFnKDEzLCBXaXJlVHlwZS5MZW5ndGhEZWxpbWl0ZWQpLmZvcmsoKSxcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICkuam9pbigpO1xuICAgIC8qIHN0cmVhbS52aWRlby5zZnUuZXZlbnQuSGVhbHRoQ2hlY2tSZXNwb25zZSBoZWFsdGhfY2hlY2tfcmVzcG9uc2UgPSAxNDsgKi9cbiAgICBpZiAobWVzc2FnZS5ldmVudFBheWxvYWQub25lb2ZLaW5kID09PSAnaGVhbHRoQ2hlY2tSZXNwb25zZScpXG4gICAgICBIZWFsdGhDaGVja1Jlc3BvbnNlLmludGVybmFsQmluYXJ5V3JpdGUoXG4gICAgICAgIG1lc3NhZ2UuZXZlbnRQYXlsb2FkLmhlYWx0aENoZWNrUmVzcG9uc2UsXG4gICAgICAgIHdyaXRlci50YWcoMTQsIFdpcmVUeXBlLkxlbmd0aERlbGltaXRlZCkuZm9yaygpLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgKS5qb2luKCk7XG4gICAgLyogc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5UcmFja1B1Ymxpc2hlZCB0cmFja19wdWJsaXNoZWQgPSAxNjsgKi9cbiAgICBpZiAobWVzc2FnZS5ldmVudFBheWxvYWQub25lb2ZLaW5kID09PSAndHJhY2tQdWJsaXNoZWQnKVxuICAgICAgVHJhY2tQdWJsaXNoZWQuaW50ZXJuYWxCaW5hcnlXcml0ZShcbiAgICAgICAgbWVzc2FnZS5ldmVudFBheWxvYWQudHJhY2tQdWJsaXNoZWQsXG4gICAgICAgIHdyaXRlci50YWcoMTYsIFdpcmVUeXBlLkxlbmd0aERlbGltaXRlZCkuZm9yaygpLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgKS5qb2luKCk7XG4gICAgLyogc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5UcmFja1VucHVibGlzaGVkIHRyYWNrX3VucHVibGlzaGVkID0gMTc7ICovXG4gICAgaWYgKG1lc3NhZ2UuZXZlbnRQYXlsb2FkLm9uZW9mS2luZCA9PT0gJ3RyYWNrVW5wdWJsaXNoZWQnKVxuICAgICAgVHJhY2tVbnB1Ymxpc2hlZC5pbnRlcm5hbEJpbmFyeVdyaXRlKFxuICAgICAgICBtZXNzYWdlLmV2ZW50UGF5bG9hZC50cmFja1VucHVibGlzaGVkLFxuICAgICAgICB3cml0ZXIudGFnKDE3LCBXaXJlVHlwZS5MZW5ndGhEZWxpbWl0ZWQpLmZvcmsoKSxcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICkuam9pbigpO1xuICAgIC8qIHN0cmVhbS52aWRlby5zZnUuZXZlbnQuRXJyb3IgZXJyb3IgPSAxODsgKi9cbiAgICBpZiAobWVzc2FnZS5ldmVudFBheWxvYWQub25lb2ZLaW5kID09PSAnZXJyb3InKVxuICAgICAgRXJyb3IuaW50ZXJuYWxCaW5hcnlXcml0ZShcbiAgICAgICAgbWVzc2FnZS5ldmVudFBheWxvYWQuZXJyb3IsXG4gICAgICAgIHdyaXRlci50YWcoMTgsIFdpcmVUeXBlLkxlbmd0aERlbGltaXRlZCkuZm9yaygpLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgKS5qb2luKCk7XG4gICAgLyogc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5DYWxsR3JhbnRzVXBkYXRlZCBjYWxsX2dyYW50c191cGRhdGVkID0gMTk7ICovXG4gICAgaWYgKG1lc3NhZ2UuZXZlbnRQYXlsb2FkLm9uZW9mS2luZCA9PT0gJ2NhbGxHcmFudHNVcGRhdGVkJylcbiAgICAgIENhbGxHcmFudHNVcGRhdGVkLmludGVybmFsQmluYXJ5V3JpdGUoXG4gICAgICAgIG1lc3NhZ2UuZXZlbnRQYXlsb2FkLmNhbGxHcmFudHNVcGRhdGVkLFxuICAgICAgICB3cml0ZXIudGFnKDE5LCBXaXJlVHlwZS5MZW5ndGhEZWxpbWl0ZWQpLmZvcmsoKSxcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICkuam9pbigpO1xuICAgIC8qIHN0cmVhbS52aWRlby5zZnUuZXZlbnQuR29Bd2F5IGdvX2F3YXkgPSAyMDsgKi9cbiAgICBpZiAobWVzc2FnZS5ldmVudFBheWxvYWQub25lb2ZLaW5kID09PSAnZ29Bd2F5JylcbiAgICAgIEdvQXdheS5pbnRlcm5hbEJpbmFyeVdyaXRlKFxuICAgICAgICBtZXNzYWdlLmV2ZW50UGF5bG9hZC5nb0F3YXksXG4gICAgICAgIHdyaXRlci50YWcoMjAsIFdpcmVUeXBlLkxlbmd0aERlbGltaXRlZCkuZm9yaygpLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgKS5qb2luKCk7XG4gICAgLyogc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5JQ0VSZXN0YXJ0IGljZV9yZXN0YXJ0ID0gMjE7ICovXG4gICAgaWYgKG1lc3NhZ2UuZXZlbnRQYXlsb2FkLm9uZW9mS2luZCA9PT0gJ2ljZVJlc3RhcnQnKVxuICAgICAgSUNFUmVzdGFydC5pbnRlcm5hbEJpbmFyeVdyaXRlKFxuICAgICAgICBtZXNzYWdlLmV2ZW50UGF5bG9hZC5pY2VSZXN0YXJ0LFxuICAgICAgICB3cml0ZXIudGFnKDIxLCBXaXJlVHlwZS5MZW5ndGhEZWxpbWl0ZWQpLmZvcmsoKSxcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICkuam9pbigpO1xuICAgIC8qIHN0cmVhbS52aWRlby5zZnUuZXZlbnQuUGluc0NoYW5nZWQgcGluc191cGRhdGVkID0gMjI7ICovXG4gICAgaWYgKG1lc3NhZ2UuZXZlbnRQYXlsb2FkLm9uZW9mS2luZCA9PT0gJ3BpbnNVcGRhdGVkJylcbiAgICAgIFBpbnNDaGFuZ2VkLmludGVybmFsQmluYXJ5V3JpdGUoXG4gICAgICAgIG1lc3NhZ2UuZXZlbnRQYXlsb2FkLnBpbnNVcGRhdGVkLFxuICAgICAgICB3cml0ZXIudGFnKDIyLCBXaXJlVHlwZS5MZW5ndGhEZWxpbWl0ZWQpLmZvcmsoKSxcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICkuam9pbigpO1xuICAgIGxldCB1ID0gb3B0aW9ucy53cml0ZVVua25vd25GaWVsZHM7XG4gICAgaWYgKHUgIT09IGZhbHNlKVxuICAgICAgKHUgPT0gdHJ1ZSA/IFVua25vd25GaWVsZEhhbmRsZXIub25Xcml0ZSA6IHUpKFxuICAgICAgICB0aGlzLnR5cGVOYW1lLFxuICAgICAgICBtZXNzYWdlLFxuICAgICAgICB3cml0ZXIsXG4gICAgICApO1xuICAgIHJldHVybiB3cml0ZXI7XG4gIH1cbn1cbi8qKlxuICogQGdlbmVyYXRlZCBNZXNzYWdlVHlwZSBmb3IgcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LlNmdUV2ZW50XG4gKi9cbmV4cG9ydCBjb25zdCBTZnVFdmVudCA9IG5ldyBTZnVFdmVudCRUeXBlKCk7XG4vLyBAZ2VuZXJhdGVkIG1lc3NhZ2UgdHlwZSB3aXRoIHJlZmxlY3Rpb24gaW5mb3JtYXRpb24sIG1heSBwcm92aWRlIHNwZWVkIG9wdGltaXplZCBtZXRob2RzXG5jbGFzcyBQaW5zQ2hhbmdlZCRUeXBlIGV4dGVuZHMgTWVzc2FnZVR5cGU8UGluc0NoYW5nZWQ+IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoJ3N0cmVhbS52aWRlby5zZnUuZXZlbnQuUGluc0NoYW5nZWQnLCBbXG4gICAgICB7XG4gICAgICAgIG5vOiAxLFxuICAgICAgICBuYW1lOiAncGlucycsXG4gICAgICAgIGtpbmQ6ICdtZXNzYWdlJyxcbiAgICAgICAgcmVwZWF0OiAxIC8qUmVwZWF0VHlwZS5QQUNLRUQqLyxcbiAgICAgICAgVDogKCkgPT4gUGluLFxuICAgICAgfSxcbiAgICBdKTtcbiAgfVxuICBjcmVhdGUodmFsdWU/OiBQYXJ0aWFsTWVzc2FnZTxQaW5zQ2hhbmdlZD4pOiBQaW5zQ2hhbmdlZCB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGdsb2JhbFRoaXMuT2JqZWN0LmNyZWF0ZSh0aGlzLm1lc3NhZ2VQcm90b3R5cGUhKTtcbiAgICBtZXNzYWdlLnBpbnMgPSBbXTtcbiAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZClcbiAgICAgIHJlZmxlY3Rpb25NZXJnZVBhcnRpYWw8UGluc0NoYW5nZWQ+KHRoaXMsIG1lc3NhZ2UsIHZhbHVlKTtcbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxuICBpbnRlcm5hbEJpbmFyeVJlYWQoXG4gICAgcmVhZGVyOiBJQmluYXJ5UmVhZGVyLFxuICAgIGxlbmd0aDogbnVtYmVyLFxuICAgIG9wdGlvbnM6IEJpbmFyeVJlYWRPcHRpb25zLFxuICAgIHRhcmdldD86IFBpbnNDaGFuZ2VkLFxuICApOiBQaW5zQ2hhbmdlZCB7XG4gICAgbGV0IG1lc3NhZ2UgPSB0YXJnZXQgPz8gdGhpcy5jcmVhdGUoKSxcbiAgICAgIGVuZCA9IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgIGxldCBbZmllbGRObywgd2lyZVR5cGVdID0gcmVhZGVyLnRhZygpO1xuICAgICAgc3dpdGNoIChmaWVsZE5vKSB7XG4gICAgICAgIGNhc2UgLyogcmVwZWF0ZWQgc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuUGluIHBpbnMgKi8gMTpcbiAgICAgICAgICBtZXNzYWdlLnBpbnMucHVzaChcbiAgICAgICAgICAgIFBpbi5pbnRlcm5hbEJpbmFyeVJlYWQocmVhZGVyLCByZWFkZXIudWludDMyKCksIG9wdGlvbnMpLFxuICAgICAgICAgICk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgbGV0IHUgPSBvcHRpb25zLnJlYWRVbmtub3duRmllbGQ7XG4gICAgICAgICAgaWYgKHUgPT09ICd0aHJvdycpXG4gICAgICAgICAgICB0aHJvdyBuZXcgZ2xvYmFsVGhpcy5FcnJvcihcbiAgICAgICAgICAgICAgYFVua25vd24gZmllbGQgJHtmaWVsZE5vfSAod2lyZSB0eXBlICR7d2lyZVR5cGV9KSBmb3IgJHt0aGlzLnR5cGVOYW1lfWAsXG4gICAgICAgICAgICApO1xuICAgICAgICAgIGxldCBkID0gcmVhZGVyLnNraXAod2lyZVR5cGUpO1xuICAgICAgICAgIGlmICh1ICE9PSBmYWxzZSlcbiAgICAgICAgICAgICh1ID09PSB0cnVlID8gVW5rbm93bkZpZWxkSGFuZGxlci5vblJlYWQgOiB1KShcbiAgICAgICAgICAgICAgdGhpcy50eXBlTmFtZSxcbiAgICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgICAgZmllbGRObyxcbiAgICAgICAgICAgICAgd2lyZVR5cGUsXG4gICAgICAgICAgICAgIGQsXG4gICAgICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxuICBpbnRlcm5hbEJpbmFyeVdyaXRlKFxuICAgIG1lc3NhZ2U6IFBpbnNDaGFuZ2VkLFxuICAgIHdyaXRlcjogSUJpbmFyeVdyaXRlcixcbiAgICBvcHRpb25zOiBCaW5hcnlXcml0ZU9wdGlvbnMsXG4gICk6IElCaW5hcnlXcml0ZXIge1xuICAgIC8qIHJlcGVhdGVkIHN0cmVhbS52aWRlby5zZnUubW9kZWxzLlBpbiBwaW5zID0gMTsgKi9cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1lc3NhZ2UucGlucy5sZW5ndGg7IGkrKylcbiAgICAgIFBpbi5pbnRlcm5hbEJpbmFyeVdyaXRlKFxuICAgICAgICBtZXNzYWdlLnBpbnNbaV0sXG4gICAgICAgIHdyaXRlci50YWcoMSwgV2lyZVR5cGUuTGVuZ3RoRGVsaW1pdGVkKS5mb3JrKCksXG4gICAgICAgIG9wdGlvbnMsXG4gICAgICApLmpvaW4oKTtcbiAgICBsZXQgdSA9IG9wdGlvbnMud3JpdGVVbmtub3duRmllbGRzO1xuICAgIGlmICh1ICE9PSBmYWxzZSlcbiAgICAgICh1ID09IHRydWUgPyBVbmtub3duRmllbGRIYW5kbGVyLm9uV3JpdGUgOiB1KShcbiAgICAgICAgdGhpcy50eXBlTmFtZSxcbiAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgd3JpdGVyLFxuICAgICAgKTtcbiAgICByZXR1cm4gd3JpdGVyO1xuICB9XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgTWVzc2FnZVR5cGUgZm9yIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5QaW5zQ2hhbmdlZFxuICovXG5leHBvcnQgY29uc3QgUGluc0NoYW5nZWQgPSBuZXcgUGluc0NoYW5nZWQkVHlwZSgpO1xuLy8gQGdlbmVyYXRlZCBtZXNzYWdlIHR5cGUgd2l0aCByZWZsZWN0aW9uIGluZm9ybWF0aW9uLCBtYXkgcHJvdmlkZSBzcGVlZCBvcHRpbWl6ZWQgbWV0aG9kc1xuY2xhc3MgRXJyb3IkVHlwZSBleHRlbmRzIE1lc3NhZ2VUeXBlPEVycm9yPiB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCdzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LkVycm9yJywgW1xuICAgICAgeyBubzogNCwgbmFtZTogJ2Vycm9yJywga2luZDogJ21lc3NhZ2UnLCBUOiAoKSA9PiBFcnJvciQgfSxcbiAgICBdKTtcbiAgfVxuICBjcmVhdGUodmFsdWU/OiBQYXJ0aWFsTWVzc2FnZTxFcnJvcj4pOiBFcnJvciB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGdsb2JhbFRoaXMuT2JqZWN0LmNyZWF0ZSh0aGlzLm1lc3NhZ2VQcm90b3R5cGUhKTtcbiAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZClcbiAgICAgIHJlZmxlY3Rpb25NZXJnZVBhcnRpYWw8RXJyb3I+KHRoaXMsIG1lc3NhZ2UsIHZhbHVlKTtcbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxuICBpbnRlcm5hbEJpbmFyeVJlYWQoXG4gICAgcmVhZGVyOiBJQmluYXJ5UmVhZGVyLFxuICAgIGxlbmd0aDogbnVtYmVyLFxuICAgIG9wdGlvbnM6IEJpbmFyeVJlYWRPcHRpb25zLFxuICAgIHRhcmdldD86IEVycm9yLFxuICApOiBFcnJvciB7XG4gICAgbGV0IG1lc3NhZ2UgPSB0YXJnZXQgPz8gdGhpcy5jcmVhdGUoKSxcbiAgICAgIGVuZCA9IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgIGxldCBbZmllbGRObywgd2lyZVR5cGVdID0gcmVhZGVyLnRhZygpO1xuICAgICAgc3dpdGNoIChmaWVsZE5vKSB7XG4gICAgICAgIGNhc2UgLyogc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuRXJyb3IgZXJyb3IgKi8gNDpcbiAgICAgICAgICBtZXNzYWdlLmVycm9yID0gRXJyb3IkLmludGVybmFsQmluYXJ5UmVhZChcbiAgICAgICAgICAgIHJlYWRlcixcbiAgICAgICAgICAgIHJlYWRlci51aW50MzIoKSxcbiAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICBtZXNzYWdlLmVycm9yLFxuICAgICAgICAgICk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgbGV0IHUgPSBvcHRpb25zLnJlYWRVbmtub3duRmllbGQ7XG4gICAgICAgICAgaWYgKHUgPT09ICd0aHJvdycpXG4gICAgICAgICAgICB0aHJvdyBuZXcgZ2xvYmFsVGhpcy5FcnJvcihcbiAgICAgICAgICAgICAgYFVua25vd24gZmllbGQgJHtmaWVsZE5vfSAod2lyZSB0eXBlICR7d2lyZVR5cGV9KSBmb3IgJHt0aGlzLnR5cGVOYW1lfWAsXG4gICAgICAgICAgICApO1xuICAgICAgICAgIGxldCBkID0gcmVhZGVyLnNraXAod2lyZVR5cGUpO1xuICAgICAgICAgIGlmICh1ICE9PSBmYWxzZSlcbiAgICAgICAgICAgICh1ID09PSB0cnVlID8gVW5rbm93bkZpZWxkSGFuZGxlci5vblJlYWQgOiB1KShcbiAgICAgICAgICAgICAgdGhpcy50eXBlTmFtZSxcbiAgICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgICAgZmllbGRObyxcbiAgICAgICAgICAgICAgd2lyZVR5cGUsXG4gICAgICAgICAgICAgIGQsXG4gICAgICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxuICBpbnRlcm5hbEJpbmFyeVdyaXRlKFxuICAgIG1lc3NhZ2U6IEVycm9yLFxuICAgIHdyaXRlcjogSUJpbmFyeVdyaXRlcixcbiAgICBvcHRpb25zOiBCaW5hcnlXcml0ZU9wdGlvbnMsXG4gICk6IElCaW5hcnlXcml0ZXIge1xuICAgIC8qIHN0cmVhbS52aWRlby5zZnUubW9kZWxzLkVycm9yIGVycm9yID0gNDsgKi9cbiAgICBpZiAobWVzc2FnZS5lcnJvcilcbiAgICAgIEVycm9yJC5pbnRlcm5hbEJpbmFyeVdyaXRlKFxuICAgICAgICBtZXNzYWdlLmVycm9yLFxuICAgICAgICB3cml0ZXIudGFnKDQsIFdpcmVUeXBlLkxlbmd0aERlbGltaXRlZCkuZm9yaygpLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgKS5qb2luKCk7XG4gICAgbGV0IHUgPSBvcHRpb25zLndyaXRlVW5rbm93bkZpZWxkcztcbiAgICBpZiAodSAhPT0gZmFsc2UpXG4gICAgICAodSA9PSB0cnVlID8gVW5rbm93bkZpZWxkSGFuZGxlci5vbldyaXRlIDogdSkoXG4gICAgICAgIHRoaXMudHlwZU5hbWUsXG4gICAgICAgIG1lc3NhZ2UsXG4gICAgICAgIHdyaXRlcixcbiAgICAgICk7XG4gICAgcmV0dXJuIHdyaXRlcjtcbiAgfVxufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIE1lc3NhZ2VUeXBlIGZvciBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUuZXZlbnQuRXJyb3JcbiAqL1xuZXhwb3J0IGNvbnN0IEVycm9yID0gbmV3IEVycm9yJFR5cGUoKTtcbi8vIEBnZW5lcmF0ZWQgbWVzc2FnZSB0eXBlIHdpdGggcmVmbGVjdGlvbiBpbmZvcm1hdGlvbiwgbWF5IHByb3ZpZGUgc3BlZWQgb3B0aW1pemVkIG1ldGhvZHNcbmNsYXNzIElDRVRyaWNrbGUkVHlwZSBleHRlbmRzIE1lc3NhZ2VUeXBlPElDRVRyaWNrbGU+IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoJ3N0cmVhbS52aWRlby5zZnUuZXZlbnQuSUNFVHJpY2tsZScsIFtcbiAgICAgIHtcbiAgICAgICAgbm86IDEsXG4gICAgICAgIG5hbWU6ICdwZWVyX3R5cGUnLFxuICAgICAgICBraW5kOiAnZW51bScsXG4gICAgICAgIFQ6ICgpID0+IFsnc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuUGVlclR5cGUnLCBQZWVyVHlwZSwgJ1BFRVJfVFlQRV8nXSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5vOiAyLFxuICAgICAgICBuYW1lOiAnaWNlX2NhbmRpZGF0ZScsXG4gICAgICAgIGtpbmQ6ICdzY2FsYXInLFxuICAgICAgICBUOiA5IC8qU2NhbGFyVHlwZS5TVFJJTkcqLyxcbiAgICAgIH0sXG4gICAgXSk7XG4gIH1cbiAgY3JlYXRlKHZhbHVlPzogUGFydGlhbE1lc3NhZ2U8SUNFVHJpY2tsZT4pOiBJQ0VUcmlja2xlIHtcbiAgICBjb25zdCBtZXNzYWdlID0gZ2xvYmFsVGhpcy5PYmplY3QuY3JlYXRlKHRoaXMubWVzc2FnZVByb3RvdHlwZSEpO1xuICAgIG1lc3NhZ2UucGVlclR5cGUgPSAwO1xuICAgIG1lc3NhZ2UuaWNlQ2FuZGlkYXRlID0gJyc7XG4gICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpXG4gICAgICByZWZsZWN0aW9uTWVyZ2VQYXJ0aWFsPElDRVRyaWNrbGU+KHRoaXMsIG1lc3NhZ2UsIHZhbHVlKTtcbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxuICBpbnRlcm5hbEJpbmFyeVJlYWQoXG4gICAgcmVhZGVyOiBJQmluYXJ5UmVhZGVyLFxuICAgIGxlbmd0aDogbnVtYmVyLFxuICAgIG9wdGlvbnM6IEJpbmFyeVJlYWRPcHRpb25zLFxuICAgIHRhcmdldD86IElDRVRyaWNrbGUsXG4gICk6IElDRVRyaWNrbGUge1xuICAgIGxldCBtZXNzYWdlID0gdGFyZ2V0ID8/IHRoaXMuY3JlYXRlKCksXG4gICAgICBlbmQgPSByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBsZXQgW2ZpZWxkTm8sIHdpcmVUeXBlXSA9IHJlYWRlci50YWcoKTtcbiAgICAgIHN3aXRjaCAoZmllbGRObykge1xuICAgICAgICBjYXNlIC8qIHN0cmVhbS52aWRlby5zZnUubW9kZWxzLlBlZXJUeXBlIHBlZXJfdHlwZSAqLyAxOlxuICAgICAgICAgIG1lc3NhZ2UucGVlclR5cGUgPSByZWFkZXIuaW50MzIoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAvKiBzdHJpbmcgaWNlX2NhbmRpZGF0ZSAqLyAyOlxuICAgICAgICAgIG1lc3NhZ2UuaWNlQ2FuZGlkYXRlID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGxldCB1ID0gb3B0aW9ucy5yZWFkVW5rbm93bkZpZWxkO1xuICAgICAgICAgIGlmICh1ID09PSAndGhyb3cnKVxuICAgICAgICAgICAgdGhyb3cgbmV3IGdsb2JhbFRoaXMuRXJyb3IoXG4gICAgICAgICAgICAgIGBVbmtub3duIGZpZWxkICR7ZmllbGROb30gKHdpcmUgdHlwZSAke3dpcmVUeXBlfSkgZm9yICR7dGhpcy50eXBlTmFtZX1gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICBsZXQgZCA9IHJlYWRlci5za2lwKHdpcmVUeXBlKTtcbiAgICAgICAgICBpZiAodSAhPT0gZmFsc2UpXG4gICAgICAgICAgICAodSA9PT0gdHJ1ZSA/IFVua25vd25GaWVsZEhhbmRsZXIub25SZWFkIDogdSkoXG4gICAgICAgICAgICAgIHRoaXMudHlwZU5hbWUsXG4gICAgICAgICAgICAgIG1lc3NhZ2UsXG4gICAgICAgICAgICAgIGZpZWxkTm8sXG4gICAgICAgICAgICAgIHdpcmVUeXBlLFxuICAgICAgICAgICAgICBkLFxuICAgICAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH1cbiAgaW50ZXJuYWxCaW5hcnlXcml0ZShcbiAgICBtZXNzYWdlOiBJQ0VUcmlja2xlLFxuICAgIHdyaXRlcjogSUJpbmFyeVdyaXRlcixcbiAgICBvcHRpb25zOiBCaW5hcnlXcml0ZU9wdGlvbnMsXG4gICk6IElCaW5hcnlXcml0ZXIge1xuICAgIC8qIHN0cmVhbS52aWRlby5zZnUubW9kZWxzLlBlZXJUeXBlIHBlZXJfdHlwZSA9IDE7ICovXG4gICAgaWYgKG1lc3NhZ2UucGVlclR5cGUgIT09IDApXG4gICAgICB3cml0ZXIudGFnKDEsIFdpcmVUeXBlLlZhcmludCkuaW50MzIobWVzc2FnZS5wZWVyVHlwZSk7XG4gICAgLyogc3RyaW5nIGljZV9jYW5kaWRhdGUgPSAyOyAqL1xuICAgIGlmIChtZXNzYWdlLmljZUNhbmRpZGF0ZSAhPT0gJycpXG4gICAgICB3cml0ZXIudGFnKDIsIFdpcmVUeXBlLkxlbmd0aERlbGltaXRlZCkuc3RyaW5nKG1lc3NhZ2UuaWNlQ2FuZGlkYXRlKTtcbiAgICBsZXQgdSA9IG9wdGlvbnMud3JpdGVVbmtub3duRmllbGRzO1xuICAgIGlmICh1ICE9PSBmYWxzZSlcbiAgICAgICh1ID09IHRydWUgPyBVbmtub3duRmllbGRIYW5kbGVyLm9uV3JpdGUgOiB1KShcbiAgICAgICAgdGhpcy50eXBlTmFtZSxcbiAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgd3JpdGVyLFxuICAgICAgKTtcbiAgICByZXR1cm4gd3JpdGVyO1xuICB9XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgTWVzc2FnZVR5cGUgZm9yIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5JQ0VUcmlja2xlXG4gKi9cbmV4cG9ydCBjb25zdCBJQ0VUcmlja2xlID0gbmV3IElDRVRyaWNrbGUkVHlwZSgpO1xuLy8gQGdlbmVyYXRlZCBtZXNzYWdlIHR5cGUgd2l0aCByZWZsZWN0aW9uIGluZm9ybWF0aW9uLCBtYXkgcHJvdmlkZSBzcGVlZCBvcHRpbWl6ZWQgbWV0aG9kc1xuY2xhc3MgSUNFUmVzdGFydCRUeXBlIGV4dGVuZHMgTWVzc2FnZVR5cGU8SUNFUmVzdGFydD4ge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcignc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5JQ0VSZXN0YXJ0JywgW1xuICAgICAge1xuICAgICAgICBubzogMSxcbiAgICAgICAgbmFtZTogJ3BlZXJfdHlwZScsXG4gICAgICAgIGtpbmQ6ICdlbnVtJyxcbiAgICAgICAgVDogKCkgPT4gWydzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5QZWVyVHlwZScsIFBlZXJUeXBlLCAnUEVFUl9UWVBFXyddLFxuICAgICAgfSxcbiAgICBdKTtcbiAgfVxuICBjcmVhdGUodmFsdWU/OiBQYXJ0aWFsTWVzc2FnZTxJQ0VSZXN0YXJ0Pik6IElDRVJlc3RhcnQge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBnbG9iYWxUaGlzLk9iamVjdC5jcmVhdGUodGhpcy5tZXNzYWdlUHJvdG90eXBlISk7XG4gICAgbWVzc2FnZS5wZWVyVHlwZSA9IDA7XG4gICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpXG4gICAgICByZWZsZWN0aW9uTWVyZ2VQYXJ0aWFsPElDRVJlc3RhcnQ+KHRoaXMsIG1lc3NhZ2UsIHZhbHVlKTtcbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxuICBpbnRlcm5hbEJpbmFyeVJlYWQoXG4gICAgcmVhZGVyOiBJQmluYXJ5UmVhZGVyLFxuICAgIGxlbmd0aDogbnVtYmVyLFxuICAgIG9wdGlvbnM6IEJpbmFyeVJlYWRPcHRpb25zLFxuICAgIHRhcmdldD86IElDRVJlc3RhcnQsXG4gICk6IElDRVJlc3RhcnQge1xuICAgIGxldCBtZXNzYWdlID0gdGFyZ2V0ID8/IHRoaXMuY3JlYXRlKCksXG4gICAgICBlbmQgPSByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBsZXQgW2ZpZWxkTm8sIHdpcmVUeXBlXSA9IHJlYWRlci50YWcoKTtcbiAgICAgIHN3aXRjaCAoZmllbGRObykge1xuICAgICAgICBjYXNlIC8qIHN0cmVhbS52aWRlby5zZnUubW9kZWxzLlBlZXJUeXBlIHBlZXJfdHlwZSAqLyAxOlxuICAgICAgICAgIG1lc3NhZ2UucGVlclR5cGUgPSByZWFkZXIuaW50MzIoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBsZXQgdSA9IG9wdGlvbnMucmVhZFVua25vd25GaWVsZDtcbiAgICAgICAgICBpZiAodSA9PT0gJ3Rocm93JylcbiAgICAgICAgICAgIHRocm93IG5ldyBnbG9iYWxUaGlzLkVycm9yKFxuICAgICAgICAgICAgICBgVW5rbm93biBmaWVsZCAke2ZpZWxkTm99ICh3aXJlIHR5cGUgJHt3aXJlVHlwZX0pIGZvciAke3RoaXMudHlwZU5hbWV9YCxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgbGV0IGQgPSByZWFkZXIuc2tpcCh3aXJlVHlwZSk7XG4gICAgICAgICAgaWYgKHUgIT09IGZhbHNlKVxuICAgICAgICAgICAgKHUgPT09IHRydWUgPyBVbmtub3duRmllbGRIYW5kbGVyLm9uUmVhZCA6IHUpKFxuICAgICAgICAgICAgICB0aGlzLnR5cGVOYW1lLFxuICAgICAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICAgICAgICBmaWVsZE5vLFxuICAgICAgICAgICAgICB3aXJlVHlwZSxcbiAgICAgICAgICAgICAgZCxcbiAgICAgICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG4gIGludGVybmFsQmluYXJ5V3JpdGUoXG4gICAgbWVzc2FnZTogSUNFUmVzdGFydCxcbiAgICB3cml0ZXI6IElCaW5hcnlXcml0ZXIsXG4gICAgb3B0aW9uczogQmluYXJ5V3JpdGVPcHRpb25zLFxuICApOiBJQmluYXJ5V3JpdGVyIHtcbiAgICAvKiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5QZWVyVHlwZSBwZWVyX3R5cGUgPSAxOyAqL1xuICAgIGlmIChtZXNzYWdlLnBlZXJUeXBlICE9PSAwKVxuICAgICAgd3JpdGVyLnRhZygxLCBXaXJlVHlwZS5WYXJpbnQpLmludDMyKG1lc3NhZ2UucGVlclR5cGUpO1xuICAgIGxldCB1ID0gb3B0aW9ucy53cml0ZVVua25vd25GaWVsZHM7XG4gICAgaWYgKHUgIT09IGZhbHNlKVxuICAgICAgKHUgPT0gdHJ1ZSA/IFVua25vd25GaWVsZEhhbmRsZXIub25Xcml0ZSA6IHUpKFxuICAgICAgICB0aGlzLnR5cGVOYW1lLFxuICAgICAgICBtZXNzYWdlLFxuICAgICAgICB3cml0ZXIsXG4gICAgICApO1xuICAgIHJldHVybiB3cml0ZXI7XG4gIH1cbn1cbi8qKlxuICogQGdlbmVyYXRlZCBNZXNzYWdlVHlwZSBmb3IgcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LklDRVJlc3RhcnRcbiAqL1xuZXhwb3J0IGNvbnN0IElDRVJlc3RhcnQgPSBuZXcgSUNFUmVzdGFydCRUeXBlKCk7XG4vLyBAZ2VuZXJhdGVkIG1lc3NhZ2UgdHlwZSB3aXRoIHJlZmxlY3Rpb24gaW5mb3JtYXRpb24sIG1heSBwcm92aWRlIHNwZWVkIG9wdGltaXplZCBtZXRob2RzXG5jbGFzcyBTZnVSZXF1ZXN0JFR5cGUgZXh0ZW5kcyBNZXNzYWdlVHlwZTxTZnVSZXF1ZXN0PiB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCdzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LlNmdVJlcXVlc3QnLCBbXG4gICAgICB7XG4gICAgICAgIG5vOiAxLFxuICAgICAgICBuYW1lOiAnam9pbl9yZXF1ZXN0JyxcbiAgICAgICAga2luZDogJ21lc3NhZ2UnLFxuICAgICAgICBvbmVvZjogJ3JlcXVlc3RQYXlsb2FkJyxcbiAgICAgICAgVDogKCkgPT4gSm9pblJlcXVlc3QsXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBubzogMixcbiAgICAgICAgbmFtZTogJ2hlYWx0aF9jaGVja19yZXF1ZXN0JyxcbiAgICAgICAga2luZDogJ21lc3NhZ2UnLFxuICAgICAgICBvbmVvZjogJ3JlcXVlc3RQYXlsb2FkJyxcbiAgICAgICAgVDogKCkgPT4gSGVhbHRoQ2hlY2tSZXF1ZXN0LFxuICAgICAgfSxcbiAgICBdKTtcbiAgfVxuICBjcmVhdGUodmFsdWU/OiBQYXJ0aWFsTWVzc2FnZTxTZnVSZXF1ZXN0Pik6IFNmdVJlcXVlc3Qge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBnbG9iYWxUaGlzLk9iamVjdC5jcmVhdGUodGhpcy5tZXNzYWdlUHJvdG90eXBlISk7XG4gICAgbWVzc2FnZS5yZXF1ZXN0UGF5bG9hZCA9IHsgb25lb2ZLaW5kOiB1bmRlZmluZWQgfTtcbiAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZClcbiAgICAgIHJlZmxlY3Rpb25NZXJnZVBhcnRpYWw8U2Z1UmVxdWVzdD4odGhpcywgbWVzc2FnZSwgdmFsdWUpO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG4gIGludGVybmFsQmluYXJ5UmVhZChcbiAgICByZWFkZXI6IElCaW5hcnlSZWFkZXIsXG4gICAgbGVuZ3RoOiBudW1iZXIsXG4gICAgb3B0aW9uczogQmluYXJ5UmVhZE9wdGlvbnMsXG4gICAgdGFyZ2V0PzogU2Z1UmVxdWVzdCxcbiAgKTogU2Z1UmVxdWVzdCB7XG4gICAgbGV0IG1lc3NhZ2UgPSB0YXJnZXQgPz8gdGhpcy5jcmVhdGUoKSxcbiAgICAgIGVuZCA9IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgIGxldCBbZmllbGRObywgd2lyZVR5cGVdID0gcmVhZGVyLnRhZygpO1xuICAgICAgc3dpdGNoIChmaWVsZE5vKSB7XG4gICAgICAgIGNhc2UgLyogc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5Kb2luUmVxdWVzdCBqb2luX3JlcXVlc3QgKi8gMTpcbiAgICAgICAgICBtZXNzYWdlLnJlcXVlc3RQYXlsb2FkID0ge1xuICAgICAgICAgICAgb25lb2ZLaW5kOiAnam9pblJlcXVlc3QnLFxuICAgICAgICAgICAgam9pblJlcXVlc3Q6IEpvaW5SZXF1ZXN0LmludGVybmFsQmluYXJ5UmVhZChcbiAgICAgICAgICAgICAgcmVhZGVyLFxuICAgICAgICAgICAgICByZWFkZXIudWludDMyKCksXG4gICAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICAgIChtZXNzYWdlLnJlcXVlc3RQYXlsb2FkIGFzIGFueSkuam9pblJlcXVlc3QsXG4gICAgICAgICAgICApLFxuICAgICAgICAgIH07XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgLyogc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5IZWFsdGhDaGVja1JlcXVlc3QgaGVhbHRoX2NoZWNrX3JlcXVlc3QgKi8gMjpcbiAgICAgICAgICBtZXNzYWdlLnJlcXVlc3RQYXlsb2FkID0ge1xuICAgICAgICAgICAgb25lb2ZLaW5kOiAnaGVhbHRoQ2hlY2tSZXF1ZXN0JyxcbiAgICAgICAgICAgIGhlYWx0aENoZWNrUmVxdWVzdDogSGVhbHRoQ2hlY2tSZXF1ZXN0LmludGVybmFsQmluYXJ5UmVhZChcbiAgICAgICAgICAgICAgcmVhZGVyLFxuICAgICAgICAgICAgICByZWFkZXIudWludDMyKCksXG4gICAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICAgIChtZXNzYWdlLnJlcXVlc3RQYXlsb2FkIGFzIGFueSkuaGVhbHRoQ2hlY2tSZXF1ZXN0LFxuICAgICAgICAgICAgKSxcbiAgICAgICAgICB9O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGxldCB1ID0gb3B0aW9ucy5yZWFkVW5rbm93bkZpZWxkO1xuICAgICAgICAgIGlmICh1ID09PSAndGhyb3cnKVxuICAgICAgICAgICAgdGhyb3cgbmV3IGdsb2JhbFRoaXMuRXJyb3IoXG4gICAgICAgICAgICAgIGBVbmtub3duIGZpZWxkICR7ZmllbGROb30gKHdpcmUgdHlwZSAke3dpcmVUeXBlfSkgZm9yICR7dGhpcy50eXBlTmFtZX1gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICBsZXQgZCA9IHJlYWRlci5za2lwKHdpcmVUeXBlKTtcbiAgICAgICAgICBpZiAodSAhPT0gZmFsc2UpXG4gICAgICAgICAgICAodSA9PT0gdHJ1ZSA/IFVua25vd25GaWVsZEhhbmRsZXIub25SZWFkIDogdSkoXG4gICAgICAgICAgICAgIHRoaXMudHlwZU5hbWUsXG4gICAgICAgICAgICAgIG1lc3NhZ2UsXG4gICAgICAgICAgICAgIGZpZWxkTm8sXG4gICAgICAgICAgICAgIHdpcmVUeXBlLFxuICAgICAgICAgICAgICBkLFxuICAgICAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH1cbiAgaW50ZXJuYWxCaW5hcnlXcml0ZShcbiAgICBtZXNzYWdlOiBTZnVSZXF1ZXN0LFxuICAgIHdyaXRlcjogSUJpbmFyeVdyaXRlcixcbiAgICBvcHRpb25zOiBCaW5hcnlXcml0ZU9wdGlvbnMsXG4gICk6IElCaW5hcnlXcml0ZXIge1xuICAgIC8qIHN0cmVhbS52aWRlby5zZnUuZXZlbnQuSm9pblJlcXVlc3Qgam9pbl9yZXF1ZXN0ID0gMTsgKi9cbiAgICBpZiAobWVzc2FnZS5yZXF1ZXN0UGF5bG9hZC5vbmVvZktpbmQgPT09ICdqb2luUmVxdWVzdCcpXG4gICAgICBKb2luUmVxdWVzdC5pbnRlcm5hbEJpbmFyeVdyaXRlKFxuICAgICAgICBtZXNzYWdlLnJlcXVlc3RQYXlsb2FkLmpvaW5SZXF1ZXN0LFxuICAgICAgICB3cml0ZXIudGFnKDEsIFdpcmVUeXBlLkxlbmd0aERlbGltaXRlZCkuZm9yaygpLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgKS5qb2luKCk7XG4gICAgLyogc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5IZWFsdGhDaGVja1JlcXVlc3QgaGVhbHRoX2NoZWNrX3JlcXVlc3QgPSAyOyAqL1xuICAgIGlmIChtZXNzYWdlLnJlcXVlc3RQYXlsb2FkLm9uZW9mS2luZCA9PT0gJ2hlYWx0aENoZWNrUmVxdWVzdCcpXG4gICAgICBIZWFsdGhDaGVja1JlcXVlc3QuaW50ZXJuYWxCaW5hcnlXcml0ZShcbiAgICAgICAgbWVzc2FnZS5yZXF1ZXN0UGF5bG9hZC5oZWFsdGhDaGVja1JlcXVlc3QsXG4gICAgICAgIHdyaXRlci50YWcoMiwgV2lyZVR5cGUuTGVuZ3RoRGVsaW1pdGVkKS5mb3JrKCksXG4gICAgICAgIG9wdGlvbnMsXG4gICAgICApLmpvaW4oKTtcbiAgICBsZXQgdSA9IG9wdGlvbnMud3JpdGVVbmtub3duRmllbGRzO1xuICAgIGlmICh1ICE9PSBmYWxzZSlcbiAgICAgICh1ID09IHRydWUgPyBVbmtub3duRmllbGRIYW5kbGVyLm9uV3JpdGUgOiB1KShcbiAgICAgICAgdGhpcy50eXBlTmFtZSxcbiAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgd3JpdGVyLFxuICAgICAgKTtcbiAgICByZXR1cm4gd3JpdGVyO1xuICB9XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgTWVzc2FnZVR5cGUgZm9yIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5TZnVSZXF1ZXN0XG4gKi9cbmV4cG9ydCBjb25zdCBTZnVSZXF1ZXN0ID0gbmV3IFNmdVJlcXVlc3QkVHlwZSgpO1xuLy8gQGdlbmVyYXRlZCBtZXNzYWdlIHR5cGUgd2l0aCByZWZsZWN0aW9uIGluZm9ybWF0aW9uLCBtYXkgcHJvdmlkZSBzcGVlZCBvcHRpbWl6ZWQgbWV0aG9kc1xuY2xhc3MgSGVhbHRoQ2hlY2tSZXF1ZXN0JFR5cGUgZXh0ZW5kcyBNZXNzYWdlVHlwZTxIZWFsdGhDaGVja1JlcXVlc3Q+IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoJ3N0cmVhbS52aWRlby5zZnUuZXZlbnQuSGVhbHRoQ2hlY2tSZXF1ZXN0JywgW10pO1xuICB9XG4gIGNyZWF0ZSh2YWx1ZT86IFBhcnRpYWxNZXNzYWdlPEhlYWx0aENoZWNrUmVxdWVzdD4pOiBIZWFsdGhDaGVja1JlcXVlc3Qge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBnbG9iYWxUaGlzLk9iamVjdC5jcmVhdGUodGhpcy5tZXNzYWdlUHJvdG90eXBlISk7XG4gICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpXG4gICAgICByZWZsZWN0aW9uTWVyZ2VQYXJ0aWFsPEhlYWx0aENoZWNrUmVxdWVzdD4odGhpcywgbWVzc2FnZSwgdmFsdWUpO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG4gIGludGVybmFsQmluYXJ5UmVhZChcbiAgICByZWFkZXI6IElCaW5hcnlSZWFkZXIsXG4gICAgbGVuZ3RoOiBudW1iZXIsXG4gICAgb3B0aW9uczogQmluYXJ5UmVhZE9wdGlvbnMsXG4gICAgdGFyZ2V0PzogSGVhbHRoQ2hlY2tSZXF1ZXN0LFxuICApOiBIZWFsdGhDaGVja1JlcXVlc3Qge1xuICAgIHJldHVybiB0YXJnZXQgPz8gdGhpcy5jcmVhdGUoKTtcbiAgfVxuICBpbnRlcm5hbEJpbmFyeVdyaXRlKFxuICAgIG1lc3NhZ2U6IEhlYWx0aENoZWNrUmVxdWVzdCxcbiAgICB3cml0ZXI6IElCaW5hcnlXcml0ZXIsXG4gICAgb3B0aW9uczogQmluYXJ5V3JpdGVPcHRpb25zLFxuICApOiBJQmluYXJ5V3JpdGVyIHtcbiAgICBsZXQgdSA9IG9wdGlvbnMud3JpdGVVbmtub3duRmllbGRzO1xuICAgIGlmICh1ICE9PSBmYWxzZSlcbiAgICAgICh1ID09IHRydWUgPyBVbmtub3duRmllbGRIYW5kbGVyLm9uV3JpdGUgOiB1KShcbiAgICAgICAgdGhpcy50eXBlTmFtZSxcbiAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgd3JpdGVyLFxuICAgICAgKTtcbiAgICByZXR1cm4gd3JpdGVyO1xuICB9XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgTWVzc2FnZVR5cGUgZm9yIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5IZWFsdGhDaGVja1JlcXVlc3RcbiAqL1xuZXhwb3J0IGNvbnN0IEhlYWx0aENoZWNrUmVxdWVzdCA9IG5ldyBIZWFsdGhDaGVja1JlcXVlc3QkVHlwZSgpO1xuLy8gQGdlbmVyYXRlZCBtZXNzYWdlIHR5cGUgd2l0aCByZWZsZWN0aW9uIGluZm9ybWF0aW9uLCBtYXkgcHJvdmlkZSBzcGVlZCBvcHRpbWl6ZWQgbWV0aG9kc1xuY2xhc3MgSGVhbHRoQ2hlY2tSZXNwb25zZSRUeXBlIGV4dGVuZHMgTWVzc2FnZVR5cGU8SGVhbHRoQ2hlY2tSZXNwb25zZT4ge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcignc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5IZWFsdGhDaGVja1Jlc3BvbnNlJywgW1xuICAgICAge1xuICAgICAgICBubzogMSxcbiAgICAgICAgbmFtZTogJ3BhcnRpY2lwYW50X2NvdW50JyxcbiAgICAgICAga2luZDogJ21lc3NhZ2UnLFxuICAgICAgICBUOiAoKSA9PiBQYXJ0aWNpcGFudENvdW50LFxuICAgICAgfSxcbiAgICBdKTtcbiAgfVxuICBjcmVhdGUodmFsdWU/OiBQYXJ0aWFsTWVzc2FnZTxIZWFsdGhDaGVja1Jlc3BvbnNlPik6IEhlYWx0aENoZWNrUmVzcG9uc2Uge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBnbG9iYWxUaGlzLk9iamVjdC5jcmVhdGUodGhpcy5tZXNzYWdlUHJvdG90eXBlISk7XG4gICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpXG4gICAgICByZWZsZWN0aW9uTWVyZ2VQYXJ0aWFsPEhlYWx0aENoZWNrUmVzcG9uc2U+KHRoaXMsIG1lc3NhZ2UsIHZhbHVlKTtcbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxuICBpbnRlcm5hbEJpbmFyeVJlYWQoXG4gICAgcmVhZGVyOiBJQmluYXJ5UmVhZGVyLFxuICAgIGxlbmd0aDogbnVtYmVyLFxuICAgIG9wdGlvbnM6IEJpbmFyeVJlYWRPcHRpb25zLFxuICAgIHRhcmdldD86IEhlYWx0aENoZWNrUmVzcG9uc2UsXG4gICk6IEhlYWx0aENoZWNrUmVzcG9uc2Uge1xuICAgIGxldCBtZXNzYWdlID0gdGFyZ2V0ID8/IHRoaXMuY3JlYXRlKCksXG4gICAgICBlbmQgPSByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBsZXQgW2ZpZWxkTm8sIHdpcmVUeXBlXSA9IHJlYWRlci50YWcoKTtcbiAgICAgIHN3aXRjaCAoZmllbGRObykge1xuICAgICAgICBjYXNlIC8qIHN0cmVhbS52aWRlby5zZnUubW9kZWxzLlBhcnRpY2lwYW50Q291bnQgcGFydGljaXBhbnRfY291bnQgKi8gMTpcbiAgICAgICAgICBtZXNzYWdlLnBhcnRpY2lwYW50Q291bnQgPSBQYXJ0aWNpcGFudENvdW50LmludGVybmFsQmluYXJ5UmVhZChcbiAgICAgICAgICAgIHJlYWRlcixcbiAgICAgICAgICAgIHJlYWRlci51aW50MzIoKSxcbiAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICBtZXNzYWdlLnBhcnRpY2lwYW50Q291bnQsXG4gICAgICAgICAgKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBsZXQgdSA9IG9wdGlvbnMucmVhZFVua25vd25GaWVsZDtcbiAgICAgICAgICBpZiAodSA9PT0gJ3Rocm93JylcbiAgICAgICAgICAgIHRocm93IG5ldyBnbG9iYWxUaGlzLkVycm9yKFxuICAgICAgICAgICAgICBgVW5rbm93biBmaWVsZCAke2ZpZWxkTm99ICh3aXJlIHR5cGUgJHt3aXJlVHlwZX0pIGZvciAke3RoaXMudHlwZU5hbWV9YCxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgbGV0IGQgPSByZWFkZXIuc2tpcCh3aXJlVHlwZSk7XG4gICAgICAgICAgaWYgKHUgIT09IGZhbHNlKVxuICAgICAgICAgICAgKHUgPT09IHRydWUgPyBVbmtub3duRmllbGRIYW5kbGVyLm9uUmVhZCA6IHUpKFxuICAgICAgICAgICAgICB0aGlzLnR5cGVOYW1lLFxuICAgICAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICAgICAgICBmaWVsZE5vLFxuICAgICAgICAgICAgICB3aXJlVHlwZSxcbiAgICAgICAgICAgICAgZCxcbiAgICAgICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG4gIGludGVybmFsQmluYXJ5V3JpdGUoXG4gICAgbWVzc2FnZTogSGVhbHRoQ2hlY2tSZXNwb25zZSxcbiAgICB3cml0ZXI6IElCaW5hcnlXcml0ZXIsXG4gICAgb3B0aW9uczogQmluYXJ5V3JpdGVPcHRpb25zLFxuICApOiBJQmluYXJ5V3JpdGVyIHtcbiAgICAvKiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5QYXJ0aWNpcGFudENvdW50IHBhcnRpY2lwYW50X2NvdW50ID0gMTsgKi9cbiAgICBpZiAobWVzc2FnZS5wYXJ0aWNpcGFudENvdW50KVxuICAgICAgUGFydGljaXBhbnRDb3VudC5pbnRlcm5hbEJpbmFyeVdyaXRlKFxuICAgICAgICBtZXNzYWdlLnBhcnRpY2lwYW50Q291bnQsXG4gICAgICAgIHdyaXRlci50YWcoMSwgV2lyZVR5cGUuTGVuZ3RoRGVsaW1pdGVkKS5mb3JrKCksXG4gICAgICAgIG9wdGlvbnMsXG4gICAgICApLmpvaW4oKTtcbiAgICBsZXQgdSA9IG9wdGlvbnMud3JpdGVVbmtub3duRmllbGRzO1xuICAgIGlmICh1ICE9PSBmYWxzZSlcbiAgICAgICh1ID09IHRydWUgPyBVbmtub3duRmllbGRIYW5kbGVyLm9uV3JpdGUgOiB1KShcbiAgICAgICAgdGhpcy50eXBlTmFtZSxcbiAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgd3JpdGVyLFxuICAgICAgKTtcbiAgICByZXR1cm4gd3JpdGVyO1xuICB9XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgTWVzc2FnZVR5cGUgZm9yIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5IZWFsdGhDaGVja1Jlc3BvbnNlXG4gKi9cbmV4cG9ydCBjb25zdCBIZWFsdGhDaGVja1Jlc3BvbnNlID0gbmV3IEhlYWx0aENoZWNrUmVzcG9uc2UkVHlwZSgpO1xuLy8gQGdlbmVyYXRlZCBtZXNzYWdlIHR5cGUgd2l0aCByZWZsZWN0aW9uIGluZm9ybWF0aW9uLCBtYXkgcHJvdmlkZSBzcGVlZCBvcHRpbWl6ZWQgbWV0aG9kc1xuY2xhc3MgVHJhY2tQdWJsaXNoZWQkVHlwZSBleHRlbmRzIE1lc3NhZ2VUeXBlPFRyYWNrUHVibGlzaGVkPiB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCdzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LlRyYWNrUHVibGlzaGVkJywgW1xuICAgICAgeyBubzogMSwgbmFtZTogJ3VzZXJfaWQnLCBraW5kOiAnc2NhbGFyJywgVDogOSAvKlNjYWxhclR5cGUuU1RSSU5HKi8gfSxcbiAgICAgIHsgbm86IDIsIG5hbWU6ICdzZXNzaW9uX2lkJywga2luZDogJ3NjYWxhcicsIFQ6IDkgLypTY2FsYXJUeXBlLlNUUklORyovIH0sXG4gICAgICB7XG4gICAgICAgIG5vOiAzLFxuICAgICAgICBuYW1lOiAndHlwZScsXG4gICAgICAgIGtpbmQ6ICdlbnVtJyxcbiAgICAgICAgVDogKCkgPT4gW1xuICAgICAgICAgICdzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5UcmFja1R5cGUnLFxuICAgICAgICAgIFRyYWNrVHlwZSxcbiAgICAgICAgICAnVFJBQ0tfVFlQRV8nLFxuICAgICAgICBdLFxuICAgICAgfSxcbiAgICAgIHsgbm86IDQsIG5hbWU6ICdwYXJ0aWNpcGFudCcsIGtpbmQ6ICdtZXNzYWdlJywgVDogKCkgPT4gUGFydGljaXBhbnQgfSxcbiAgICBdKTtcbiAgfVxuICBjcmVhdGUodmFsdWU/OiBQYXJ0aWFsTWVzc2FnZTxUcmFja1B1Ymxpc2hlZD4pOiBUcmFja1B1Ymxpc2hlZCB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGdsb2JhbFRoaXMuT2JqZWN0LmNyZWF0ZSh0aGlzLm1lc3NhZ2VQcm90b3R5cGUhKTtcbiAgICBtZXNzYWdlLnVzZXJJZCA9ICcnO1xuICAgIG1lc3NhZ2Uuc2Vzc2lvbklkID0gJyc7XG4gICAgbWVzc2FnZS50eXBlID0gMDtcbiAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZClcbiAgICAgIHJlZmxlY3Rpb25NZXJnZVBhcnRpYWw8VHJhY2tQdWJsaXNoZWQ+KHRoaXMsIG1lc3NhZ2UsIHZhbHVlKTtcbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxuICBpbnRlcm5hbEJpbmFyeVJlYWQoXG4gICAgcmVhZGVyOiBJQmluYXJ5UmVhZGVyLFxuICAgIGxlbmd0aDogbnVtYmVyLFxuICAgIG9wdGlvbnM6IEJpbmFyeVJlYWRPcHRpb25zLFxuICAgIHRhcmdldD86IFRyYWNrUHVibGlzaGVkLFxuICApOiBUcmFja1B1Ymxpc2hlZCB7XG4gICAgbGV0IG1lc3NhZ2UgPSB0YXJnZXQgPz8gdGhpcy5jcmVhdGUoKSxcbiAgICAgIGVuZCA9IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgIGxldCBbZmllbGRObywgd2lyZVR5cGVdID0gcmVhZGVyLnRhZygpO1xuICAgICAgc3dpdGNoIChmaWVsZE5vKSB7XG4gICAgICAgIGNhc2UgLyogc3RyaW5nIHVzZXJfaWQgKi8gMTpcbiAgICAgICAgICBtZXNzYWdlLnVzZXJJZCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAvKiBzdHJpbmcgc2Vzc2lvbl9pZCAqLyAyOlxuICAgICAgICAgIG1lc3NhZ2Uuc2Vzc2lvbklkID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIC8qIHN0cmVhbS52aWRlby5zZnUubW9kZWxzLlRyYWNrVHlwZSB0eXBlICovIDM6XG4gICAgICAgICAgbWVzc2FnZS50eXBlID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgLyogc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuUGFydGljaXBhbnQgcGFydGljaXBhbnQgKi8gNDpcbiAgICAgICAgICBtZXNzYWdlLnBhcnRpY2lwYW50ID0gUGFydGljaXBhbnQuaW50ZXJuYWxCaW5hcnlSZWFkKFxuICAgICAgICAgICAgcmVhZGVyLFxuICAgICAgICAgICAgcmVhZGVyLnVpbnQzMigpLFxuICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICAgIG1lc3NhZ2UucGFydGljaXBhbnQsXG4gICAgICAgICAgKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBsZXQgdSA9IG9wdGlvbnMucmVhZFVua25vd25GaWVsZDtcbiAgICAgICAgICBpZiAodSA9PT0gJ3Rocm93JylcbiAgICAgICAgICAgIHRocm93IG5ldyBnbG9iYWxUaGlzLkVycm9yKFxuICAgICAgICAgICAgICBgVW5rbm93biBmaWVsZCAke2ZpZWxkTm99ICh3aXJlIHR5cGUgJHt3aXJlVHlwZX0pIGZvciAke3RoaXMudHlwZU5hbWV9YCxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgbGV0IGQgPSByZWFkZXIuc2tpcCh3aXJlVHlwZSk7XG4gICAgICAgICAgaWYgKHUgIT09IGZhbHNlKVxuICAgICAgICAgICAgKHUgPT09IHRydWUgPyBVbmtub3duRmllbGRIYW5kbGVyLm9uUmVhZCA6IHUpKFxuICAgICAgICAgICAgICB0aGlzLnR5cGVOYW1lLFxuICAgICAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICAgICAgICBmaWVsZE5vLFxuICAgICAgICAgICAgICB3aXJlVHlwZSxcbiAgICAgICAgICAgICAgZCxcbiAgICAgICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG4gIGludGVybmFsQmluYXJ5V3JpdGUoXG4gICAgbWVzc2FnZTogVHJhY2tQdWJsaXNoZWQsXG4gICAgd3JpdGVyOiBJQmluYXJ5V3JpdGVyLFxuICAgIG9wdGlvbnM6IEJpbmFyeVdyaXRlT3B0aW9ucyxcbiAgKTogSUJpbmFyeVdyaXRlciB7XG4gICAgLyogc3RyaW5nIHVzZXJfaWQgPSAxOyAqL1xuICAgIGlmIChtZXNzYWdlLnVzZXJJZCAhPT0gJycpXG4gICAgICB3cml0ZXIudGFnKDEsIFdpcmVUeXBlLkxlbmd0aERlbGltaXRlZCkuc3RyaW5nKG1lc3NhZ2UudXNlcklkKTtcbiAgICAvKiBzdHJpbmcgc2Vzc2lvbl9pZCA9IDI7ICovXG4gICAgaWYgKG1lc3NhZ2Uuc2Vzc2lvbklkICE9PSAnJylcbiAgICAgIHdyaXRlci50YWcoMiwgV2lyZVR5cGUuTGVuZ3RoRGVsaW1pdGVkKS5zdHJpbmcobWVzc2FnZS5zZXNzaW9uSWQpO1xuICAgIC8qIHN0cmVhbS52aWRlby5zZnUubW9kZWxzLlRyYWNrVHlwZSB0eXBlID0gMzsgKi9cbiAgICBpZiAobWVzc2FnZS50eXBlICE9PSAwKSB3cml0ZXIudGFnKDMsIFdpcmVUeXBlLlZhcmludCkuaW50MzIobWVzc2FnZS50eXBlKTtcbiAgICAvKiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5QYXJ0aWNpcGFudCBwYXJ0aWNpcGFudCA9IDQ7ICovXG4gICAgaWYgKG1lc3NhZ2UucGFydGljaXBhbnQpXG4gICAgICBQYXJ0aWNpcGFudC5pbnRlcm5hbEJpbmFyeVdyaXRlKFxuICAgICAgICBtZXNzYWdlLnBhcnRpY2lwYW50LFxuICAgICAgICB3cml0ZXIudGFnKDQsIFdpcmVUeXBlLkxlbmd0aERlbGltaXRlZCkuZm9yaygpLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgKS5qb2luKCk7XG4gICAgbGV0IHUgPSBvcHRpb25zLndyaXRlVW5rbm93bkZpZWxkcztcbiAgICBpZiAodSAhPT0gZmFsc2UpXG4gICAgICAodSA9PSB0cnVlID8gVW5rbm93bkZpZWxkSGFuZGxlci5vbldyaXRlIDogdSkoXG4gICAgICAgIHRoaXMudHlwZU5hbWUsXG4gICAgICAgIG1lc3NhZ2UsXG4gICAgICAgIHdyaXRlcixcbiAgICAgICk7XG4gICAgcmV0dXJuIHdyaXRlcjtcbiAgfVxufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIE1lc3NhZ2VUeXBlIGZvciBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUuZXZlbnQuVHJhY2tQdWJsaXNoZWRcbiAqL1xuZXhwb3J0IGNvbnN0IFRyYWNrUHVibGlzaGVkID0gbmV3IFRyYWNrUHVibGlzaGVkJFR5cGUoKTtcbi8vIEBnZW5lcmF0ZWQgbWVzc2FnZSB0eXBlIHdpdGggcmVmbGVjdGlvbiBpbmZvcm1hdGlvbiwgbWF5IHByb3ZpZGUgc3BlZWQgb3B0aW1pemVkIG1ldGhvZHNcbmNsYXNzIFRyYWNrVW5wdWJsaXNoZWQkVHlwZSBleHRlbmRzIE1lc3NhZ2VUeXBlPFRyYWNrVW5wdWJsaXNoZWQ+IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoJ3N0cmVhbS52aWRlby5zZnUuZXZlbnQuVHJhY2tVbnB1Ymxpc2hlZCcsIFtcbiAgICAgIHsgbm86IDEsIG5hbWU6ICd1c2VyX2lkJywga2luZDogJ3NjYWxhcicsIFQ6IDkgLypTY2FsYXJUeXBlLlNUUklORyovIH0sXG4gICAgICB7IG5vOiAyLCBuYW1lOiAnc2Vzc2lvbl9pZCcsIGtpbmQ6ICdzY2FsYXInLCBUOiA5IC8qU2NhbGFyVHlwZS5TVFJJTkcqLyB9LFxuICAgICAge1xuICAgICAgICBubzogMyxcbiAgICAgICAgbmFtZTogJ3R5cGUnLFxuICAgICAgICBraW5kOiAnZW51bScsXG4gICAgICAgIFQ6ICgpID0+IFtcbiAgICAgICAgICAnc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuVHJhY2tUeXBlJyxcbiAgICAgICAgICBUcmFja1R5cGUsXG4gICAgICAgICAgJ1RSQUNLX1RZUEVfJyxcbiAgICAgICAgXSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5vOiA0LFxuICAgICAgICBuYW1lOiAnY2F1c2UnLFxuICAgICAgICBraW5kOiAnZW51bScsXG4gICAgICAgIFQ6ICgpID0+IFtcbiAgICAgICAgICAnc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuVHJhY2tVbnB1Ymxpc2hSZWFzb24nLFxuICAgICAgICAgIFRyYWNrVW5wdWJsaXNoUmVhc29uLFxuICAgICAgICAgICdUUkFDS19VTlBVQkxJU0hfUkVBU09OXycsXG4gICAgICAgIF0sXG4gICAgICB9LFxuICAgICAgeyBubzogNSwgbmFtZTogJ3BhcnRpY2lwYW50Jywga2luZDogJ21lc3NhZ2UnLCBUOiAoKSA9PiBQYXJ0aWNpcGFudCB9LFxuICAgIF0pO1xuICB9XG4gIGNyZWF0ZSh2YWx1ZT86IFBhcnRpYWxNZXNzYWdlPFRyYWNrVW5wdWJsaXNoZWQ+KTogVHJhY2tVbnB1Ymxpc2hlZCB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGdsb2JhbFRoaXMuT2JqZWN0LmNyZWF0ZSh0aGlzLm1lc3NhZ2VQcm90b3R5cGUhKTtcbiAgICBtZXNzYWdlLnVzZXJJZCA9ICcnO1xuICAgIG1lc3NhZ2Uuc2Vzc2lvbklkID0gJyc7XG4gICAgbWVzc2FnZS50eXBlID0gMDtcbiAgICBtZXNzYWdlLmNhdXNlID0gMDtcbiAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZClcbiAgICAgIHJlZmxlY3Rpb25NZXJnZVBhcnRpYWw8VHJhY2tVbnB1Ymxpc2hlZD4odGhpcywgbWVzc2FnZSwgdmFsdWUpO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG4gIGludGVybmFsQmluYXJ5UmVhZChcbiAgICByZWFkZXI6IElCaW5hcnlSZWFkZXIsXG4gICAgbGVuZ3RoOiBudW1iZXIsXG4gICAgb3B0aW9uczogQmluYXJ5UmVhZE9wdGlvbnMsXG4gICAgdGFyZ2V0PzogVHJhY2tVbnB1Ymxpc2hlZCxcbiAgKTogVHJhY2tVbnB1Ymxpc2hlZCB7XG4gICAgbGV0IG1lc3NhZ2UgPSB0YXJnZXQgPz8gdGhpcy5jcmVhdGUoKSxcbiAgICAgIGVuZCA9IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgIGxldCBbZmllbGRObywgd2lyZVR5cGVdID0gcmVhZGVyLnRhZygpO1xuICAgICAgc3dpdGNoIChmaWVsZE5vKSB7XG4gICAgICAgIGNhc2UgLyogc3RyaW5nIHVzZXJfaWQgKi8gMTpcbiAgICAgICAgICBtZXNzYWdlLnVzZXJJZCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAvKiBzdHJpbmcgc2Vzc2lvbl9pZCAqLyAyOlxuICAgICAgICAgIG1lc3NhZ2Uuc2Vzc2lvbklkID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIC8qIHN0cmVhbS52aWRlby5zZnUubW9kZWxzLlRyYWNrVHlwZSB0eXBlICovIDM6XG4gICAgICAgICAgbWVzc2FnZS50eXBlID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgLyogc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuVHJhY2tVbnB1Ymxpc2hSZWFzb24gY2F1c2UgKi8gNDpcbiAgICAgICAgICBtZXNzYWdlLmNhdXNlID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgLyogc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuUGFydGljaXBhbnQgcGFydGljaXBhbnQgKi8gNTpcbiAgICAgICAgICBtZXNzYWdlLnBhcnRpY2lwYW50ID0gUGFydGljaXBhbnQuaW50ZXJuYWxCaW5hcnlSZWFkKFxuICAgICAgICAgICAgcmVhZGVyLFxuICAgICAgICAgICAgcmVhZGVyLnVpbnQzMigpLFxuICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICAgIG1lc3NhZ2UucGFydGljaXBhbnQsXG4gICAgICAgICAgKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBsZXQgdSA9IG9wdGlvbnMucmVhZFVua25vd25GaWVsZDtcbiAgICAgICAgICBpZiAodSA9PT0gJ3Rocm93JylcbiAgICAgICAgICAgIHRocm93IG5ldyBnbG9iYWxUaGlzLkVycm9yKFxuICAgICAgICAgICAgICBgVW5rbm93biBmaWVsZCAke2ZpZWxkTm99ICh3aXJlIHR5cGUgJHt3aXJlVHlwZX0pIGZvciAke3RoaXMudHlwZU5hbWV9YCxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgbGV0IGQgPSByZWFkZXIuc2tpcCh3aXJlVHlwZSk7XG4gICAgICAgICAgaWYgKHUgIT09IGZhbHNlKVxuICAgICAgICAgICAgKHUgPT09IHRydWUgPyBVbmtub3duRmllbGRIYW5kbGVyLm9uUmVhZCA6IHUpKFxuICAgICAgICAgICAgICB0aGlzLnR5cGVOYW1lLFxuICAgICAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICAgICAgICBmaWVsZE5vLFxuICAgICAgICAgICAgICB3aXJlVHlwZSxcbiAgICAgICAgICAgICAgZCxcbiAgICAgICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG4gIGludGVybmFsQmluYXJ5V3JpdGUoXG4gICAgbWVzc2FnZTogVHJhY2tVbnB1Ymxpc2hlZCxcbiAgICB3cml0ZXI6IElCaW5hcnlXcml0ZXIsXG4gICAgb3B0aW9uczogQmluYXJ5V3JpdGVPcHRpb25zLFxuICApOiBJQmluYXJ5V3JpdGVyIHtcbiAgICAvKiBzdHJpbmcgdXNlcl9pZCA9IDE7ICovXG4gICAgaWYgKG1lc3NhZ2UudXNlcklkICE9PSAnJylcbiAgICAgIHdyaXRlci50YWcoMSwgV2lyZVR5cGUuTGVuZ3RoRGVsaW1pdGVkKS5zdHJpbmcobWVzc2FnZS51c2VySWQpO1xuICAgIC8qIHN0cmluZyBzZXNzaW9uX2lkID0gMjsgKi9cbiAgICBpZiAobWVzc2FnZS5zZXNzaW9uSWQgIT09ICcnKVxuICAgICAgd3JpdGVyLnRhZygyLCBXaXJlVHlwZS5MZW5ndGhEZWxpbWl0ZWQpLnN0cmluZyhtZXNzYWdlLnNlc3Npb25JZCk7XG4gICAgLyogc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuVHJhY2tUeXBlIHR5cGUgPSAzOyAqL1xuICAgIGlmIChtZXNzYWdlLnR5cGUgIT09IDApIHdyaXRlci50YWcoMywgV2lyZVR5cGUuVmFyaW50KS5pbnQzMihtZXNzYWdlLnR5cGUpO1xuICAgIC8qIHN0cmVhbS52aWRlby5zZnUubW9kZWxzLlRyYWNrVW5wdWJsaXNoUmVhc29uIGNhdXNlID0gNDsgKi9cbiAgICBpZiAobWVzc2FnZS5jYXVzZSAhPT0gMClcbiAgICAgIHdyaXRlci50YWcoNCwgV2lyZVR5cGUuVmFyaW50KS5pbnQzMihtZXNzYWdlLmNhdXNlKTtcbiAgICAvKiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5QYXJ0aWNpcGFudCBwYXJ0aWNpcGFudCA9IDU7ICovXG4gICAgaWYgKG1lc3NhZ2UucGFydGljaXBhbnQpXG4gICAgICBQYXJ0aWNpcGFudC5pbnRlcm5hbEJpbmFyeVdyaXRlKFxuICAgICAgICBtZXNzYWdlLnBhcnRpY2lwYW50LFxuICAgICAgICB3cml0ZXIudGFnKDUsIFdpcmVUeXBlLkxlbmd0aERlbGltaXRlZCkuZm9yaygpLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgKS5qb2luKCk7XG4gICAgbGV0IHUgPSBvcHRpb25zLndyaXRlVW5rbm93bkZpZWxkcztcbiAgICBpZiAodSAhPT0gZmFsc2UpXG4gICAgICAodSA9PSB0cnVlID8gVW5rbm93bkZpZWxkSGFuZGxlci5vbldyaXRlIDogdSkoXG4gICAgICAgIHRoaXMudHlwZU5hbWUsXG4gICAgICAgIG1lc3NhZ2UsXG4gICAgICAgIHdyaXRlcixcbiAgICAgICk7XG4gICAgcmV0dXJuIHdyaXRlcjtcbiAgfVxufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIE1lc3NhZ2VUeXBlIGZvciBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUuZXZlbnQuVHJhY2tVbnB1Ymxpc2hlZFxuICovXG5leHBvcnQgY29uc3QgVHJhY2tVbnB1Ymxpc2hlZCA9IG5ldyBUcmFja1VucHVibGlzaGVkJFR5cGUoKTtcbi8vIEBnZW5lcmF0ZWQgbWVzc2FnZSB0eXBlIHdpdGggcmVmbGVjdGlvbiBpbmZvcm1hdGlvbiwgbWF5IHByb3ZpZGUgc3BlZWQgb3B0aW1pemVkIG1ldGhvZHNcbmNsYXNzIEpvaW5SZXF1ZXN0JFR5cGUgZXh0ZW5kcyBNZXNzYWdlVHlwZTxKb2luUmVxdWVzdD4ge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcignc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5Kb2luUmVxdWVzdCcsIFtcbiAgICAgIHsgbm86IDEsIG5hbWU6ICd0b2tlbicsIGtpbmQ6ICdzY2FsYXInLCBUOiA5IC8qU2NhbGFyVHlwZS5TVFJJTkcqLyB9LFxuICAgICAgeyBubzogMiwgbmFtZTogJ3Nlc3Npb25faWQnLCBraW5kOiAnc2NhbGFyJywgVDogOSAvKlNjYWxhclR5cGUuU1RSSU5HKi8gfSxcbiAgICAgIHtcbiAgICAgICAgbm86IDMsXG4gICAgICAgIG5hbWU6ICdzdWJzY3JpYmVyX3NkcCcsXG4gICAgICAgIGtpbmQ6ICdzY2FsYXInLFxuICAgICAgICBUOiA5IC8qU2NhbGFyVHlwZS5TVFJJTkcqLyxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5vOiA0LFxuICAgICAgICBuYW1lOiAnY2xpZW50X2RldGFpbHMnLFxuICAgICAgICBraW5kOiAnbWVzc2FnZScsXG4gICAgICAgIFQ6ICgpID0+IENsaWVudERldGFpbHMsXG4gICAgICB9LFxuICAgICAgeyBubzogNSwgbmFtZTogJ21pZ3JhdGlvbicsIGtpbmQ6ICdtZXNzYWdlJywgVDogKCkgPT4gTWlncmF0aW9uIH0sXG4gICAgICB7XG4gICAgICAgIG5vOiA2LFxuICAgICAgICBuYW1lOiAnZmFzdF9yZWNvbm5lY3QnLFxuICAgICAgICBraW5kOiAnc2NhbGFyJyxcbiAgICAgICAgVDogOCAvKlNjYWxhclR5cGUuQk9PTCovLFxuICAgICAgfSxcbiAgICBdKTtcbiAgfVxuICBjcmVhdGUodmFsdWU/OiBQYXJ0aWFsTWVzc2FnZTxKb2luUmVxdWVzdD4pOiBKb2luUmVxdWVzdCB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGdsb2JhbFRoaXMuT2JqZWN0LmNyZWF0ZSh0aGlzLm1lc3NhZ2VQcm90b3R5cGUhKTtcbiAgICBtZXNzYWdlLnRva2VuID0gJyc7XG4gICAgbWVzc2FnZS5zZXNzaW9uSWQgPSAnJztcbiAgICBtZXNzYWdlLnN1YnNjcmliZXJTZHAgPSAnJztcbiAgICBtZXNzYWdlLmZhc3RSZWNvbm5lY3QgPSBmYWxzZTtcbiAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZClcbiAgICAgIHJlZmxlY3Rpb25NZXJnZVBhcnRpYWw8Sm9pblJlcXVlc3Q+KHRoaXMsIG1lc3NhZ2UsIHZhbHVlKTtcbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxuICBpbnRlcm5hbEJpbmFyeVJlYWQoXG4gICAgcmVhZGVyOiBJQmluYXJ5UmVhZGVyLFxuICAgIGxlbmd0aDogbnVtYmVyLFxuICAgIG9wdGlvbnM6IEJpbmFyeVJlYWRPcHRpb25zLFxuICAgIHRhcmdldD86IEpvaW5SZXF1ZXN0LFxuICApOiBKb2luUmVxdWVzdCB7XG4gICAgbGV0IG1lc3NhZ2UgPSB0YXJnZXQgPz8gdGhpcy5jcmVhdGUoKSxcbiAgICAgIGVuZCA9IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgIGxldCBbZmllbGRObywgd2lyZVR5cGVdID0gcmVhZGVyLnRhZygpO1xuICAgICAgc3dpdGNoIChmaWVsZE5vKSB7XG4gICAgICAgIGNhc2UgLyogc3RyaW5nIHRva2VuICovIDE6XG4gICAgICAgICAgbWVzc2FnZS50b2tlbiA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAvKiBzdHJpbmcgc2Vzc2lvbl9pZCAqLyAyOlxuICAgICAgICAgIG1lc3NhZ2Uuc2Vzc2lvbklkID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIC8qIHN0cmluZyBzdWJzY3JpYmVyX3NkcCAqLyAzOlxuICAgICAgICAgIG1lc3NhZ2Uuc3Vic2NyaWJlclNkcCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAvKiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5DbGllbnREZXRhaWxzIGNsaWVudF9kZXRhaWxzICovIDQ6XG4gICAgICAgICAgbWVzc2FnZS5jbGllbnREZXRhaWxzID0gQ2xpZW50RGV0YWlscy5pbnRlcm5hbEJpbmFyeVJlYWQoXG4gICAgICAgICAgICByZWFkZXIsXG4gICAgICAgICAgICByZWFkZXIudWludDMyKCksXG4gICAgICAgICAgICBvcHRpb25zLFxuICAgICAgICAgICAgbWVzc2FnZS5jbGllbnREZXRhaWxzLFxuICAgICAgICAgICk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgLyogc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5NaWdyYXRpb24gbWlncmF0aW9uICovIDU6XG4gICAgICAgICAgbWVzc2FnZS5taWdyYXRpb24gPSBNaWdyYXRpb24uaW50ZXJuYWxCaW5hcnlSZWFkKFxuICAgICAgICAgICAgcmVhZGVyLFxuICAgICAgICAgICAgcmVhZGVyLnVpbnQzMigpLFxuICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICAgIG1lc3NhZ2UubWlncmF0aW9uLFxuICAgICAgICAgICk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgLyogYm9vbCBmYXN0X3JlY29ubmVjdCAqLyA2OlxuICAgICAgICAgIG1lc3NhZ2UuZmFzdFJlY29ubmVjdCA9IHJlYWRlci5ib29sKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgbGV0IHUgPSBvcHRpb25zLnJlYWRVbmtub3duRmllbGQ7XG4gICAgICAgICAgaWYgKHUgPT09ICd0aHJvdycpXG4gICAgICAgICAgICB0aHJvdyBuZXcgZ2xvYmFsVGhpcy5FcnJvcihcbiAgICAgICAgICAgICAgYFVua25vd24gZmllbGQgJHtmaWVsZE5vfSAod2lyZSB0eXBlICR7d2lyZVR5cGV9KSBmb3IgJHt0aGlzLnR5cGVOYW1lfWAsXG4gICAgICAgICAgICApO1xuICAgICAgICAgIGxldCBkID0gcmVhZGVyLnNraXAod2lyZVR5cGUpO1xuICAgICAgICAgIGlmICh1ICE9PSBmYWxzZSlcbiAgICAgICAgICAgICh1ID09PSB0cnVlID8gVW5rbm93bkZpZWxkSGFuZGxlci5vblJlYWQgOiB1KShcbiAgICAgICAgICAgICAgdGhpcy50eXBlTmFtZSxcbiAgICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgICAgZmllbGRObyxcbiAgICAgICAgICAgICAgd2lyZVR5cGUsXG4gICAgICAgICAgICAgIGQsXG4gICAgICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxuICBpbnRlcm5hbEJpbmFyeVdyaXRlKFxuICAgIG1lc3NhZ2U6IEpvaW5SZXF1ZXN0LFxuICAgIHdyaXRlcjogSUJpbmFyeVdyaXRlcixcbiAgICBvcHRpb25zOiBCaW5hcnlXcml0ZU9wdGlvbnMsXG4gICk6IElCaW5hcnlXcml0ZXIge1xuICAgIC8qIHN0cmluZyB0b2tlbiA9IDE7ICovXG4gICAgaWYgKG1lc3NhZ2UudG9rZW4gIT09ICcnKVxuICAgICAgd3JpdGVyLnRhZygxLCBXaXJlVHlwZS5MZW5ndGhEZWxpbWl0ZWQpLnN0cmluZyhtZXNzYWdlLnRva2VuKTtcbiAgICAvKiBzdHJpbmcgc2Vzc2lvbl9pZCA9IDI7ICovXG4gICAgaWYgKG1lc3NhZ2Uuc2Vzc2lvbklkICE9PSAnJylcbiAgICAgIHdyaXRlci50YWcoMiwgV2lyZVR5cGUuTGVuZ3RoRGVsaW1pdGVkKS5zdHJpbmcobWVzc2FnZS5zZXNzaW9uSWQpO1xuICAgIC8qIHN0cmluZyBzdWJzY3JpYmVyX3NkcCA9IDM7ICovXG4gICAgaWYgKG1lc3NhZ2Uuc3Vic2NyaWJlclNkcCAhPT0gJycpXG4gICAgICB3cml0ZXIudGFnKDMsIFdpcmVUeXBlLkxlbmd0aERlbGltaXRlZCkuc3RyaW5nKG1lc3NhZ2Uuc3Vic2NyaWJlclNkcCk7XG4gICAgLyogc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuQ2xpZW50RGV0YWlscyBjbGllbnRfZGV0YWlscyA9IDQ7ICovXG4gICAgaWYgKG1lc3NhZ2UuY2xpZW50RGV0YWlscylcbiAgICAgIENsaWVudERldGFpbHMuaW50ZXJuYWxCaW5hcnlXcml0ZShcbiAgICAgICAgbWVzc2FnZS5jbGllbnREZXRhaWxzLFxuICAgICAgICB3cml0ZXIudGFnKDQsIFdpcmVUeXBlLkxlbmd0aERlbGltaXRlZCkuZm9yaygpLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgKS5qb2luKCk7XG4gICAgLyogc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5NaWdyYXRpb24gbWlncmF0aW9uID0gNTsgKi9cbiAgICBpZiAobWVzc2FnZS5taWdyYXRpb24pXG4gICAgICBNaWdyYXRpb24uaW50ZXJuYWxCaW5hcnlXcml0ZShcbiAgICAgICAgbWVzc2FnZS5taWdyYXRpb24sXG4gICAgICAgIHdyaXRlci50YWcoNSwgV2lyZVR5cGUuTGVuZ3RoRGVsaW1pdGVkKS5mb3JrKCksXG4gICAgICAgIG9wdGlvbnMsXG4gICAgICApLmpvaW4oKTtcbiAgICAvKiBib29sIGZhc3RfcmVjb25uZWN0ID0gNjsgKi9cbiAgICBpZiAobWVzc2FnZS5mYXN0UmVjb25uZWN0ICE9PSBmYWxzZSlcbiAgICAgIHdyaXRlci50YWcoNiwgV2lyZVR5cGUuVmFyaW50KS5ib29sKG1lc3NhZ2UuZmFzdFJlY29ubmVjdCk7XG4gICAgbGV0IHUgPSBvcHRpb25zLndyaXRlVW5rbm93bkZpZWxkcztcbiAgICBpZiAodSAhPT0gZmFsc2UpXG4gICAgICAodSA9PSB0cnVlID8gVW5rbm93bkZpZWxkSGFuZGxlci5vbldyaXRlIDogdSkoXG4gICAgICAgIHRoaXMudHlwZU5hbWUsXG4gICAgICAgIG1lc3NhZ2UsXG4gICAgICAgIHdyaXRlcixcbiAgICAgICk7XG4gICAgcmV0dXJuIHdyaXRlcjtcbiAgfVxufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIE1lc3NhZ2VUeXBlIGZvciBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUuZXZlbnQuSm9pblJlcXVlc3RcbiAqL1xuZXhwb3J0IGNvbnN0IEpvaW5SZXF1ZXN0ID0gbmV3IEpvaW5SZXF1ZXN0JFR5cGUoKTtcbi8vIEBnZW5lcmF0ZWQgbWVzc2FnZSB0eXBlIHdpdGggcmVmbGVjdGlvbiBpbmZvcm1hdGlvbiwgbWF5IHByb3ZpZGUgc3BlZWQgb3B0aW1pemVkIG1ldGhvZHNcbmNsYXNzIE1pZ3JhdGlvbiRUeXBlIGV4dGVuZHMgTWVzc2FnZVR5cGU8TWlncmF0aW9uPiB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCdzdHJlYW0udmlkZW8uc2Z1LmV2ZW50Lk1pZ3JhdGlvbicsIFtcbiAgICAgIHtcbiAgICAgICAgbm86IDEsXG4gICAgICAgIG5hbWU6ICdmcm9tX3NmdV9pZCcsXG4gICAgICAgIGtpbmQ6ICdzY2FsYXInLFxuICAgICAgICBUOiA5IC8qU2NhbGFyVHlwZS5TVFJJTkcqLyxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5vOiAyLFxuICAgICAgICBuYW1lOiAnYW5ub3VuY2VkX3RyYWNrcycsXG4gICAgICAgIGtpbmQ6ICdtZXNzYWdlJyxcbiAgICAgICAgcmVwZWF0OiAxIC8qUmVwZWF0VHlwZS5QQUNLRUQqLyxcbiAgICAgICAgVDogKCkgPT4gVHJhY2tJbmZvLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbm86IDMsXG4gICAgICAgIG5hbWU6ICdzdWJzY3JpcHRpb25zJyxcbiAgICAgICAga2luZDogJ21lc3NhZ2UnLFxuICAgICAgICByZXBlYXQ6IDEgLypSZXBlYXRUeXBlLlBBQ0tFRCovLFxuICAgICAgICBUOiAoKSA9PiBUcmFja1N1YnNjcmlwdGlvbkRldGFpbHMsXG4gICAgICB9LFxuICAgIF0pO1xuICB9XG4gIGNyZWF0ZSh2YWx1ZT86IFBhcnRpYWxNZXNzYWdlPE1pZ3JhdGlvbj4pOiBNaWdyYXRpb24ge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBnbG9iYWxUaGlzLk9iamVjdC5jcmVhdGUodGhpcy5tZXNzYWdlUHJvdG90eXBlISk7XG4gICAgbWVzc2FnZS5mcm9tU2Z1SWQgPSAnJztcbiAgICBtZXNzYWdlLmFubm91bmNlZFRyYWNrcyA9IFtdO1xuICAgIG1lc3NhZ2Uuc3Vic2NyaXB0aW9ucyA9IFtdO1xuICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKVxuICAgICAgcmVmbGVjdGlvbk1lcmdlUGFydGlhbDxNaWdyYXRpb24+KHRoaXMsIG1lc3NhZ2UsIHZhbHVlKTtcbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxuICBpbnRlcm5hbEJpbmFyeVJlYWQoXG4gICAgcmVhZGVyOiBJQmluYXJ5UmVhZGVyLFxuICAgIGxlbmd0aDogbnVtYmVyLFxuICAgIG9wdGlvbnM6IEJpbmFyeVJlYWRPcHRpb25zLFxuICAgIHRhcmdldD86IE1pZ3JhdGlvbixcbiAgKTogTWlncmF0aW9uIHtcbiAgICBsZXQgbWVzc2FnZSA9IHRhcmdldCA/PyB0aGlzLmNyZWF0ZSgpLFxuICAgICAgZW5kID0gcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgbGV0IFtmaWVsZE5vLCB3aXJlVHlwZV0gPSByZWFkZXIudGFnKCk7XG4gICAgICBzd2l0Y2ggKGZpZWxkTm8pIHtcbiAgICAgICAgY2FzZSAvKiBzdHJpbmcgZnJvbV9zZnVfaWQgKi8gMTpcbiAgICAgICAgICBtZXNzYWdlLmZyb21TZnVJZCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAvKiByZXBlYXRlZCBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5UcmFja0luZm8gYW5ub3VuY2VkX3RyYWNrcyAqLyAyOlxuICAgICAgICAgIG1lc3NhZ2UuYW5ub3VuY2VkVHJhY2tzLnB1c2goXG4gICAgICAgICAgICBUcmFja0luZm8uaW50ZXJuYWxCaW5hcnlSZWFkKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpLCBvcHRpb25zKSxcbiAgICAgICAgICApO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIC8qIHJlcGVhdGVkIHN0cmVhbS52aWRlby5zZnUuc2lnbmFsLlRyYWNrU3Vic2NyaXB0aW9uRGV0YWlscyBzdWJzY3JpcHRpb25zICovIDM6XG4gICAgICAgICAgbWVzc2FnZS5zdWJzY3JpcHRpb25zLnB1c2goXG4gICAgICAgICAgICBUcmFja1N1YnNjcmlwdGlvbkRldGFpbHMuaW50ZXJuYWxCaW5hcnlSZWFkKFxuICAgICAgICAgICAgICByZWFkZXIsXG4gICAgICAgICAgICAgIHJlYWRlci51aW50MzIoKSxcbiAgICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICAgICksXG4gICAgICAgICAgKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBsZXQgdSA9IG9wdGlvbnMucmVhZFVua25vd25GaWVsZDtcbiAgICAgICAgICBpZiAodSA9PT0gJ3Rocm93JylcbiAgICAgICAgICAgIHRocm93IG5ldyBnbG9iYWxUaGlzLkVycm9yKFxuICAgICAgICAgICAgICBgVW5rbm93biBmaWVsZCAke2ZpZWxkTm99ICh3aXJlIHR5cGUgJHt3aXJlVHlwZX0pIGZvciAke3RoaXMudHlwZU5hbWV9YCxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgbGV0IGQgPSByZWFkZXIuc2tpcCh3aXJlVHlwZSk7XG4gICAgICAgICAgaWYgKHUgIT09IGZhbHNlKVxuICAgICAgICAgICAgKHUgPT09IHRydWUgPyBVbmtub3duRmllbGRIYW5kbGVyLm9uUmVhZCA6IHUpKFxuICAgICAgICAgICAgICB0aGlzLnR5cGVOYW1lLFxuICAgICAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICAgICAgICBmaWVsZE5vLFxuICAgICAgICAgICAgICB3aXJlVHlwZSxcbiAgICAgICAgICAgICAgZCxcbiAgICAgICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG4gIGludGVybmFsQmluYXJ5V3JpdGUoXG4gICAgbWVzc2FnZTogTWlncmF0aW9uLFxuICAgIHdyaXRlcjogSUJpbmFyeVdyaXRlcixcbiAgICBvcHRpb25zOiBCaW5hcnlXcml0ZU9wdGlvbnMsXG4gICk6IElCaW5hcnlXcml0ZXIge1xuICAgIC8qIHN0cmluZyBmcm9tX3NmdV9pZCA9IDE7ICovXG4gICAgaWYgKG1lc3NhZ2UuZnJvbVNmdUlkICE9PSAnJylcbiAgICAgIHdyaXRlci50YWcoMSwgV2lyZVR5cGUuTGVuZ3RoRGVsaW1pdGVkKS5zdHJpbmcobWVzc2FnZS5mcm9tU2Z1SWQpO1xuICAgIC8qIHJlcGVhdGVkIHN0cmVhbS52aWRlby5zZnUubW9kZWxzLlRyYWNrSW5mbyBhbm5vdW5jZWRfdHJhY2tzID0gMjsgKi9cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1lc3NhZ2UuYW5ub3VuY2VkVHJhY2tzLmxlbmd0aDsgaSsrKVxuICAgICAgVHJhY2tJbmZvLmludGVybmFsQmluYXJ5V3JpdGUoXG4gICAgICAgIG1lc3NhZ2UuYW5ub3VuY2VkVHJhY2tzW2ldLFxuICAgICAgICB3cml0ZXIudGFnKDIsIFdpcmVUeXBlLkxlbmd0aERlbGltaXRlZCkuZm9yaygpLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgKS5qb2luKCk7XG4gICAgLyogcmVwZWF0ZWQgc3RyZWFtLnZpZGVvLnNmdS5zaWduYWwuVHJhY2tTdWJzY3JpcHRpb25EZXRhaWxzIHN1YnNjcmlwdGlvbnMgPSAzOyAqL1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWVzc2FnZS5zdWJzY3JpcHRpb25zLmxlbmd0aDsgaSsrKVxuICAgICAgVHJhY2tTdWJzY3JpcHRpb25EZXRhaWxzLmludGVybmFsQmluYXJ5V3JpdGUoXG4gICAgICAgIG1lc3NhZ2Uuc3Vic2NyaXB0aW9uc1tpXSxcbiAgICAgICAgd3JpdGVyLnRhZygzLCBXaXJlVHlwZS5MZW5ndGhEZWxpbWl0ZWQpLmZvcmsoKSxcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICkuam9pbigpO1xuICAgIGxldCB1ID0gb3B0aW9ucy53cml0ZVVua25vd25GaWVsZHM7XG4gICAgaWYgKHUgIT09IGZhbHNlKVxuICAgICAgKHUgPT0gdHJ1ZSA/IFVua25vd25GaWVsZEhhbmRsZXIub25Xcml0ZSA6IHUpKFxuICAgICAgICB0aGlzLnR5cGVOYW1lLFxuICAgICAgICBtZXNzYWdlLFxuICAgICAgICB3cml0ZXIsXG4gICAgICApO1xuICAgIHJldHVybiB3cml0ZXI7XG4gIH1cbn1cbi8qKlxuICogQGdlbmVyYXRlZCBNZXNzYWdlVHlwZSBmb3IgcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50Lk1pZ3JhdGlvblxuICovXG5leHBvcnQgY29uc3QgTWlncmF0aW9uID0gbmV3IE1pZ3JhdGlvbiRUeXBlKCk7XG4vLyBAZ2VuZXJhdGVkIG1lc3NhZ2UgdHlwZSB3aXRoIHJlZmxlY3Rpb24gaW5mb3JtYXRpb24sIG1heSBwcm92aWRlIHNwZWVkIG9wdGltaXplZCBtZXRob2RzXG5jbGFzcyBKb2luUmVzcG9uc2UkVHlwZSBleHRlbmRzIE1lc3NhZ2VUeXBlPEpvaW5SZXNwb25zZT4ge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcignc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5Kb2luUmVzcG9uc2UnLCBbXG4gICAgICB7IG5vOiAxLCBuYW1lOiAnY2FsbF9zdGF0ZScsIGtpbmQ6ICdtZXNzYWdlJywgVDogKCkgPT4gQ2FsbFN0YXRlIH0sXG4gICAgICB7IG5vOiAyLCBuYW1lOiAncmVjb25uZWN0ZWQnLCBraW5kOiAnc2NhbGFyJywgVDogOCAvKlNjYWxhclR5cGUuQk9PTCovIH0sXG4gICAgXSk7XG4gIH1cbiAgY3JlYXRlKHZhbHVlPzogUGFydGlhbE1lc3NhZ2U8Sm9pblJlc3BvbnNlPik6IEpvaW5SZXNwb25zZSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGdsb2JhbFRoaXMuT2JqZWN0LmNyZWF0ZSh0aGlzLm1lc3NhZ2VQcm90b3R5cGUhKTtcbiAgICBtZXNzYWdlLnJlY29ubmVjdGVkID0gZmFsc2U7XG4gICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpXG4gICAgICByZWZsZWN0aW9uTWVyZ2VQYXJ0aWFsPEpvaW5SZXNwb25zZT4odGhpcywgbWVzc2FnZSwgdmFsdWUpO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG4gIGludGVybmFsQmluYXJ5UmVhZChcbiAgICByZWFkZXI6IElCaW5hcnlSZWFkZXIsXG4gICAgbGVuZ3RoOiBudW1iZXIsXG4gICAgb3B0aW9uczogQmluYXJ5UmVhZE9wdGlvbnMsXG4gICAgdGFyZ2V0PzogSm9pblJlc3BvbnNlLFxuICApOiBKb2luUmVzcG9uc2Uge1xuICAgIGxldCBtZXNzYWdlID0gdGFyZ2V0ID8/IHRoaXMuY3JlYXRlKCksXG4gICAgICBlbmQgPSByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBsZXQgW2ZpZWxkTm8sIHdpcmVUeXBlXSA9IHJlYWRlci50YWcoKTtcbiAgICAgIHN3aXRjaCAoZmllbGRObykge1xuICAgICAgICBjYXNlIC8qIHN0cmVhbS52aWRlby5zZnUubW9kZWxzLkNhbGxTdGF0ZSBjYWxsX3N0YXRlICovIDE6XG4gICAgICAgICAgbWVzc2FnZS5jYWxsU3RhdGUgPSBDYWxsU3RhdGUuaW50ZXJuYWxCaW5hcnlSZWFkKFxuICAgICAgICAgICAgcmVhZGVyLFxuICAgICAgICAgICAgcmVhZGVyLnVpbnQzMigpLFxuICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICAgIG1lc3NhZ2UuY2FsbFN0YXRlLFxuICAgICAgICAgICk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgLyogYm9vbCByZWNvbm5lY3RlZCAqLyAyOlxuICAgICAgICAgIG1lc3NhZ2UucmVjb25uZWN0ZWQgPSByZWFkZXIuYm9vbCgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGxldCB1ID0gb3B0aW9ucy5yZWFkVW5rbm93bkZpZWxkO1xuICAgICAgICAgIGlmICh1ID09PSAndGhyb3cnKVxuICAgICAgICAgICAgdGhyb3cgbmV3IGdsb2JhbFRoaXMuRXJyb3IoXG4gICAgICAgICAgICAgIGBVbmtub3duIGZpZWxkICR7ZmllbGROb30gKHdpcmUgdHlwZSAke3dpcmVUeXBlfSkgZm9yICR7dGhpcy50eXBlTmFtZX1gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICBsZXQgZCA9IHJlYWRlci5za2lwKHdpcmVUeXBlKTtcbiAgICAgICAgICBpZiAodSAhPT0gZmFsc2UpXG4gICAgICAgICAgICAodSA9PT0gdHJ1ZSA/IFVua25vd25GaWVsZEhhbmRsZXIub25SZWFkIDogdSkoXG4gICAgICAgICAgICAgIHRoaXMudHlwZU5hbWUsXG4gICAgICAgICAgICAgIG1lc3NhZ2UsXG4gICAgICAgICAgICAgIGZpZWxkTm8sXG4gICAgICAgICAgICAgIHdpcmVUeXBlLFxuICAgICAgICAgICAgICBkLFxuICAgICAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH1cbiAgaW50ZXJuYWxCaW5hcnlXcml0ZShcbiAgICBtZXNzYWdlOiBKb2luUmVzcG9uc2UsXG4gICAgd3JpdGVyOiBJQmluYXJ5V3JpdGVyLFxuICAgIG9wdGlvbnM6IEJpbmFyeVdyaXRlT3B0aW9ucyxcbiAgKTogSUJpbmFyeVdyaXRlciB7XG4gICAgLyogc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuQ2FsbFN0YXRlIGNhbGxfc3RhdGUgPSAxOyAqL1xuICAgIGlmIChtZXNzYWdlLmNhbGxTdGF0ZSlcbiAgICAgIENhbGxTdGF0ZS5pbnRlcm5hbEJpbmFyeVdyaXRlKFxuICAgICAgICBtZXNzYWdlLmNhbGxTdGF0ZSxcbiAgICAgICAgd3JpdGVyLnRhZygxLCBXaXJlVHlwZS5MZW5ndGhEZWxpbWl0ZWQpLmZvcmsoKSxcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICkuam9pbigpO1xuICAgIC8qIGJvb2wgcmVjb25uZWN0ZWQgPSAyOyAqL1xuICAgIGlmIChtZXNzYWdlLnJlY29ubmVjdGVkICE9PSBmYWxzZSlcbiAgICAgIHdyaXRlci50YWcoMiwgV2lyZVR5cGUuVmFyaW50KS5ib29sKG1lc3NhZ2UucmVjb25uZWN0ZWQpO1xuICAgIGxldCB1ID0gb3B0aW9ucy53cml0ZVVua25vd25GaWVsZHM7XG4gICAgaWYgKHUgIT09IGZhbHNlKVxuICAgICAgKHUgPT0gdHJ1ZSA/IFVua25vd25GaWVsZEhhbmRsZXIub25Xcml0ZSA6IHUpKFxuICAgICAgICB0aGlzLnR5cGVOYW1lLFxuICAgICAgICBtZXNzYWdlLFxuICAgICAgICB3cml0ZXIsXG4gICAgICApO1xuICAgIHJldHVybiB3cml0ZXI7XG4gIH1cbn1cbi8qKlxuICogQGdlbmVyYXRlZCBNZXNzYWdlVHlwZSBmb3IgcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LkpvaW5SZXNwb25zZVxuICovXG5leHBvcnQgY29uc3QgSm9pblJlc3BvbnNlID0gbmV3IEpvaW5SZXNwb25zZSRUeXBlKCk7XG4vLyBAZ2VuZXJhdGVkIG1lc3NhZ2UgdHlwZSB3aXRoIHJlZmxlY3Rpb24gaW5mb3JtYXRpb24sIG1heSBwcm92aWRlIHNwZWVkIG9wdGltaXplZCBtZXRob2RzXG5jbGFzcyBQYXJ0aWNpcGFudEpvaW5lZCRUeXBlIGV4dGVuZHMgTWVzc2FnZVR5cGU8UGFydGljaXBhbnRKb2luZWQ+IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoJ3N0cmVhbS52aWRlby5zZnUuZXZlbnQuUGFydGljaXBhbnRKb2luZWQnLCBbXG4gICAgICB7IG5vOiAxLCBuYW1lOiAnY2FsbF9jaWQnLCBraW5kOiAnc2NhbGFyJywgVDogOSAvKlNjYWxhclR5cGUuU1RSSU5HKi8gfSxcbiAgICAgIHsgbm86IDIsIG5hbWU6ICdwYXJ0aWNpcGFudCcsIGtpbmQ6ICdtZXNzYWdlJywgVDogKCkgPT4gUGFydGljaXBhbnQgfSxcbiAgICBdKTtcbiAgfVxuICBjcmVhdGUodmFsdWU/OiBQYXJ0aWFsTWVzc2FnZTxQYXJ0aWNpcGFudEpvaW5lZD4pOiBQYXJ0aWNpcGFudEpvaW5lZCB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGdsb2JhbFRoaXMuT2JqZWN0LmNyZWF0ZSh0aGlzLm1lc3NhZ2VQcm90b3R5cGUhKTtcbiAgICBtZXNzYWdlLmNhbGxDaWQgPSAnJztcbiAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZClcbiAgICAgIHJlZmxlY3Rpb25NZXJnZVBhcnRpYWw8UGFydGljaXBhbnRKb2luZWQ+KHRoaXMsIG1lc3NhZ2UsIHZhbHVlKTtcbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxuICBpbnRlcm5hbEJpbmFyeVJlYWQoXG4gICAgcmVhZGVyOiBJQmluYXJ5UmVhZGVyLFxuICAgIGxlbmd0aDogbnVtYmVyLFxuICAgIG9wdGlvbnM6IEJpbmFyeVJlYWRPcHRpb25zLFxuICAgIHRhcmdldD86IFBhcnRpY2lwYW50Sm9pbmVkLFxuICApOiBQYXJ0aWNpcGFudEpvaW5lZCB7XG4gICAgbGV0IG1lc3NhZ2UgPSB0YXJnZXQgPz8gdGhpcy5jcmVhdGUoKSxcbiAgICAgIGVuZCA9IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgIGxldCBbZmllbGRObywgd2lyZVR5cGVdID0gcmVhZGVyLnRhZygpO1xuICAgICAgc3dpdGNoIChmaWVsZE5vKSB7XG4gICAgICAgIGNhc2UgLyogc3RyaW5nIGNhbGxfY2lkICovIDE6XG4gICAgICAgICAgbWVzc2FnZS5jYWxsQ2lkID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIC8qIHN0cmVhbS52aWRlby5zZnUubW9kZWxzLlBhcnRpY2lwYW50IHBhcnRpY2lwYW50ICovIDI6XG4gICAgICAgICAgbWVzc2FnZS5wYXJ0aWNpcGFudCA9IFBhcnRpY2lwYW50LmludGVybmFsQmluYXJ5UmVhZChcbiAgICAgICAgICAgIHJlYWRlcixcbiAgICAgICAgICAgIHJlYWRlci51aW50MzIoKSxcbiAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICBtZXNzYWdlLnBhcnRpY2lwYW50LFxuICAgICAgICAgICk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgbGV0IHUgPSBvcHRpb25zLnJlYWRVbmtub3duRmllbGQ7XG4gICAgICAgICAgaWYgKHUgPT09ICd0aHJvdycpXG4gICAgICAgICAgICB0aHJvdyBuZXcgZ2xvYmFsVGhpcy5FcnJvcihcbiAgICAgICAgICAgICAgYFVua25vd24gZmllbGQgJHtmaWVsZE5vfSAod2lyZSB0eXBlICR7d2lyZVR5cGV9KSBmb3IgJHt0aGlzLnR5cGVOYW1lfWAsXG4gICAgICAgICAgICApO1xuICAgICAgICAgIGxldCBkID0gcmVhZGVyLnNraXAod2lyZVR5cGUpO1xuICAgICAgICAgIGlmICh1ICE9PSBmYWxzZSlcbiAgICAgICAgICAgICh1ID09PSB0cnVlID8gVW5rbm93bkZpZWxkSGFuZGxlci5vblJlYWQgOiB1KShcbiAgICAgICAgICAgICAgdGhpcy50eXBlTmFtZSxcbiAgICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgICAgZmllbGRObyxcbiAgICAgICAgICAgICAgd2lyZVR5cGUsXG4gICAgICAgICAgICAgIGQsXG4gICAgICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxuICBpbnRlcm5hbEJpbmFyeVdyaXRlKFxuICAgIG1lc3NhZ2U6IFBhcnRpY2lwYW50Sm9pbmVkLFxuICAgIHdyaXRlcjogSUJpbmFyeVdyaXRlcixcbiAgICBvcHRpb25zOiBCaW5hcnlXcml0ZU9wdGlvbnMsXG4gICk6IElCaW5hcnlXcml0ZXIge1xuICAgIC8qIHN0cmluZyBjYWxsX2NpZCA9IDE7ICovXG4gICAgaWYgKG1lc3NhZ2UuY2FsbENpZCAhPT0gJycpXG4gICAgICB3cml0ZXIudGFnKDEsIFdpcmVUeXBlLkxlbmd0aERlbGltaXRlZCkuc3RyaW5nKG1lc3NhZ2UuY2FsbENpZCk7XG4gICAgLyogc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuUGFydGljaXBhbnQgcGFydGljaXBhbnQgPSAyOyAqL1xuICAgIGlmIChtZXNzYWdlLnBhcnRpY2lwYW50KVxuICAgICAgUGFydGljaXBhbnQuaW50ZXJuYWxCaW5hcnlXcml0ZShcbiAgICAgICAgbWVzc2FnZS5wYXJ0aWNpcGFudCxcbiAgICAgICAgd3JpdGVyLnRhZygyLCBXaXJlVHlwZS5MZW5ndGhEZWxpbWl0ZWQpLmZvcmsoKSxcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICkuam9pbigpO1xuICAgIGxldCB1ID0gb3B0aW9ucy53cml0ZVVua25vd25GaWVsZHM7XG4gICAgaWYgKHUgIT09IGZhbHNlKVxuICAgICAgKHUgPT0gdHJ1ZSA/IFVua25vd25GaWVsZEhhbmRsZXIub25Xcml0ZSA6IHUpKFxuICAgICAgICB0aGlzLnR5cGVOYW1lLFxuICAgICAgICBtZXNzYWdlLFxuICAgICAgICB3cml0ZXIsXG4gICAgICApO1xuICAgIHJldHVybiB3cml0ZXI7XG4gIH1cbn1cbi8qKlxuICogQGdlbmVyYXRlZCBNZXNzYWdlVHlwZSBmb3IgcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LlBhcnRpY2lwYW50Sm9pbmVkXG4gKi9cbmV4cG9ydCBjb25zdCBQYXJ0aWNpcGFudEpvaW5lZCA9IG5ldyBQYXJ0aWNpcGFudEpvaW5lZCRUeXBlKCk7XG4vLyBAZ2VuZXJhdGVkIG1lc3NhZ2UgdHlwZSB3aXRoIHJlZmxlY3Rpb24gaW5mb3JtYXRpb24sIG1heSBwcm92aWRlIHNwZWVkIG9wdGltaXplZCBtZXRob2RzXG5jbGFzcyBQYXJ0aWNpcGFudExlZnQkVHlwZSBleHRlbmRzIE1lc3NhZ2VUeXBlPFBhcnRpY2lwYW50TGVmdD4ge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcignc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5QYXJ0aWNpcGFudExlZnQnLCBbXG4gICAgICB7IG5vOiAxLCBuYW1lOiAnY2FsbF9jaWQnLCBraW5kOiAnc2NhbGFyJywgVDogOSAvKlNjYWxhclR5cGUuU1RSSU5HKi8gfSxcbiAgICAgIHsgbm86IDIsIG5hbWU6ICdwYXJ0aWNpcGFudCcsIGtpbmQ6ICdtZXNzYWdlJywgVDogKCkgPT4gUGFydGljaXBhbnQgfSxcbiAgICBdKTtcbiAgfVxuICBjcmVhdGUodmFsdWU/OiBQYXJ0aWFsTWVzc2FnZTxQYXJ0aWNpcGFudExlZnQ+KTogUGFydGljaXBhbnRMZWZ0IHtcbiAgICBjb25zdCBtZXNzYWdlID0gZ2xvYmFsVGhpcy5PYmplY3QuY3JlYXRlKHRoaXMubWVzc2FnZVByb3RvdHlwZSEpO1xuICAgIG1lc3NhZ2UuY2FsbENpZCA9ICcnO1xuICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKVxuICAgICAgcmVmbGVjdGlvbk1lcmdlUGFydGlhbDxQYXJ0aWNpcGFudExlZnQ+KHRoaXMsIG1lc3NhZ2UsIHZhbHVlKTtcbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxuICBpbnRlcm5hbEJpbmFyeVJlYWQoXG4gICAgcmVhZGVyOiBJQmluYXJ5UmVhZGVyLFxuICAgIGxlbmd0aDogbnVtYmVyLFxuICAgIG9wdGlvbnM6IEJpbmFyeVJlYWRPcHRpb25zLFxuICAgIHRhcmdldD86IFBhcnRpY2lwYW50TGVmdCxcbiAgKTogUGFydGljaXBhbnRMZWZ0IHtcbiAgICBsZXQgbWVzc2FnZSA9IHRhcmdldCA/PyB0aGlzLmNyZWF0ZSgpLFxuICAgICAgZW5kID0gcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgbGV0IFtmaWVsZE5vLCB3aXJlVHlwZV0gPSByZWFkZXIudGFnKCk7XG4gICAgICBzd2l0Y2ggKGZpZWxkTm8pIHtcbiAgICAgICAgY2FzZSAvKiBzdHJpbmcgY2FsbF9jaWQgKi8gMTpcbiAgICAgICAgICBtZXNzYWdlLmNhbGxDaWQgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgLyogc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuUGFydGljaXBhbnQgcGFydGljaXBhbnQgKi8gMjpcbiAgICAgICAgICBtZXNzYWdlLnBhcnRpY2lwYW50ID0gUGFydGljaXBhbnQuaW50ZXJuYWxCaW5hcnlSZWFkKFxuICAgICAgICAgICAgcmVhZGVyLFxuICAgICAgICAgICAgcmVhZGVyLnVpbnQzMigpLFxuICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICAgIG1lc3NhZ2UucGFydGljaXBhbnQsXG4gICAgICAgICAgKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBsZXQgdSA9IG9wdGlvbnMucmVhZFVua25vd25GaWVsZDtcbiAgICAgICAgICBpZiAodSA9PT0gJ3Rocm93JylcbiAgICAgICAgICAgIHRocm93IG5ldyBnbG9iYWxUaGlzLkVycm9yKFxuICAgICAgICAgICAgICBgVW5rbm93biBmaWVsZCAke2ZpZWxkTm99ICh3aXJlIHR5cGUgJHt3aXJlVHlwZX0pIGZvciAke3RoaXMudHlwZU5hbWV9YCxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgbGV0IGQgPSByZWFkZXIuc2tpcCh3aXJlVHlwZSk7XG4gICAgICAgICAgaWYgKHUgIT09IGZhbHNlKVxuICAgICAgICAgICAgKHUgPT09IHRydWUgPyBVbmtub3duRmllbGRIYW5kbGVyLm9uUmVhZCA6IHUpKFxuICAgICAgICAgICAgICB0aGlzLnR5cGVOYW1lLFxuICAgICAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICAgICAgICBmaWVsZE5vLFxuICAgICAgICAgICAgICB3aXJlVHlwZSxcbiAgICAgICAgICAgICAgZCxcbiAgICAgICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG4gIGludGVybmFsQmluYXJ5V3JpdGUoXG4gICAgbWVzc2FnZTogUGFydGljaXBhbnRMZWZ0LFxuICAgIHdyaXRlcjogSUJpbmFyeVdyaXRlcixcbiAgICBvcHRpb25zOiBCaW5hcnlXcml0ZU9wdGlvbnMsXG4gICk6IElCaW5hcnlXcml0ZXIge1xuICAgIC8qIHN0cmluZyBjYWxsX2NpZCA9IDE7ICovXG4gICAgaWYgKG1lc3NhZ2UuY2FsbENpZCAhPT0gJycpXG4gICAgICB3cml0ZXIudGFnKDEsIFdpcmVUeXBlLkxlbmd0aERlbGltaXRlZCkuc3RyaW5nKG1lc3NhZ2UuY2FsbENpZCk7XG4gICAgLyogc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuUGFydGljaXBhbnQgcGFydGljaXBhbnQgPSAyOyAqL1xuICAgIGlmIChtZXNzYWdlLnBhcnRpY2lwYW50KVxuICAgICAgUGFydGljaXBhbnQuaW50ZXJuYWxCaW5hcnlXcml0ZShcbiAgICAgICAgbWVzc2FnZS5wYXJ0aWNpcGFudCxcbiAgICAgICAgd3JpdGVyLnRhZygyLCBXaXJlVHlwZS5MZW5ndGhEZWxpbWl0ZWQpLmZvcmsoKSxcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICkuam9pbigpO1xuICAgIGxldCB1ID0gb3B0aW9ucy53cml0ZVVua25vd25GaWVsZHM7XG4gICAgaWYgKHUgIT09IGZhbHNlKVxuICAgICAgKHUgPT0gdHJ1ZSA/IFVua25vd25GaWVsZEhhbmRsZXIub25Xcml0ZSA6IHUpKFxuICAgICAgICB0aGlzLnR5cGVOYW1lLFxuICAgICAgICBtZXNzYWdlLFxuICAgICAgICB3cml0ZXIsXG4gICAgICApO1xuICAgIHJldHVybiB3cml0ZXI7XG4gIH1cbn1cbi8qKlxuICogQGdlbmVyYXRlZCBNZXNzYWdlVHlwZSBmb3IgcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LlBhcnRpY2lwYW50TGVmdFxuICovXG5leHBvcnQgY29uc3QgUGFydGljaXBhbnRMZWZ0ID0gbmV3IFBhcnRpY2lwYW50TGVmdCRUeXBlKCk7XG4vLyBAZ2VuZXJhdGVkIG1lc3NhZ2UgdHlwZSB3aXRoIHJlZmxlY3Rpb24gaW5mb3JtYXRpb24sIG1heSBwcm92aWRlIHNwZWVkIG9wdGltaXplZCBtZXRob2RzXG5jbGFzcyBTdWJzY3JpYmVyT2ZmZXIkVHlwZSBleHRlbmRzIE1lc3NhZ2VUeXBlPFN1YnNjcmliZXJPZmZlcj4ge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcignc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5TdWJzY3JpYmVyT2ZmZXInLCBbXG4gICAgICB7IG5vOiAxLCBuYW1lOiAnaWNlX3Jlc3RhcnQnLCBraW5kOiAnc2NhbGFyJywgVDogOCAvKlNjYWxhclR5cGUuQk9PTCovIH0sXG4gICAgICB7IG5vOiAyLCBuYW1lOiAnc2RwJywga2luZDogJ3NjYWxhcicsIFQ6IDkgLypTY2FsYXJUeXBlLlNUUklORyovIH0sXG4gICAgXSk7XG4gIH1cbiAgY3JlYXRlKHZhbHVlPzogUGFydGlhbE1lc3NhZ2U8U3Vic2NyaWJlck9mZmVyPik6IFN1YnNjcmliZXJPZmZlciB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGdsb2JhbFRoaXMuT2JqZWN0LmNyZWF0ZSh0aGlzLm1lc3NhZ2VQcm90b3R5cGUhKTtcbiAgICBtZXNzYWdlLmljZVJlc3RhcnQgPSBmYWxzZTtcbiAgICBtZXNzYWdlLnNkcCA9ICcnO1xuICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKVxuICAgICAgcmVmbGVjdGlvbk1lcmdlUGFydGlhbDxTdWJzY3JpYmVyT2ZmZXI+KHRoaXMsIG1lc3NhZ2UsIHZhbHVlKTtcbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxuICBpbnRlcm5hbEJpbmFyeVJlYWQoXG4gICAgcmVhZGVyOiBJQmluYXJ5UmVhZGVyLFxuICAgIGxlbmd0aDogbnVtYmVyLFxuICAgIG9wdGlvbnM6IEJpbmFyeVJlYWRPcHRpb25zLFxuICAgIHRhcmdldD86IFN1YnNjcmliZXJPZmZlcixcbiAgKTogU3Vic2NyaWJlck9mZmVyIHtcbiAgICBsZXQgbWVzc2FnZSA9IHRhcmdldCA/PyB0aGlzLmNyZWF0ZSgpLFxuICAgICAgZW5kID0gcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgbGV0IFtmaWVsZE5vLCB3aXJlVHlwZV0gPSByZWFkZXIudGFnKCk7XG4gICAgICBzd2l0Y2ggKGZpZWxkTm8pIHtcbiAgICAgICAgY2FzZSAvKiBib29sIGljZV9yZXN0YXJ0ICovIDE6XG4gICAgICAgICAgbWVzc2FnZS5pY2VSZXN0YXJ0ID0gcmVhZGVyLmJvb2woKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAvKiBzdHJpbmcgc2RwICovIDI6XG4gICAgICAgICAgbWVzc2FnZS5zZHAgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgbGV0IHUgPSBvcHRpb25zLnJlYWRVbmtub3duRmllbGQ7XG4gICAgICAgICAgaWYgKHUgPT09ICd0aHJvdycpXG4gICAgICAgICAgICB0aHJvdyBuZXcgZ2xvYmFsVGhpcy5FcnJvcihcbiAgICAgICAgICAgICAgYFVua25vd24gZmllbGQgJHtmaWVsZE5vfSAod2lyZSB0eXBlICR7d2lyZVR5cGV9KSBmb3IgJHt0aGlzLnR5cGVOYW1lfWAsXG4gICAgICAgICAgICApO1xuICAgICAgICAgIGxldCBkID0gcmVhZGVyLnNraXAod2lyZVR5cGUpO1xuICAgICAgICAgIGlmICh1ICE9PSBmYWxzZSlcbiAgICAgICAgICAgICh1ID09PSB0cnVlID8gVW5rbm93bkZpZWxkSGFuZGxlci5vblJlYWQgOiB1KShcbiAgICAgICAgICAgICAgdGhpcy50eXBlTmFtZSxcbiAgICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgICAgZmllbGRObyxcbiAgICAgICAgICAgICAgd2lyZVR5cGUsXG4gICAgICAgICAgICAgIGQsXG4gICAgICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxuICBpbnRlcm5hbEJpbmFyeVdyaXRlKFxuICAgIG1lc3NhZ2U6IFN1YnNjcmliZXJPZmZlcixcbiAgICB3cml0ZXI6IElCaW5hcnlXcml0ZXIsXG4gICAgb3B0aW9uczogQmluYXJ5V3JpdGVPcHRpb25zLFxuICApOiBJQmluYXJ5V3JpdGVyIHtcbiAgICAvKiBib29sIGljZV9yZXN0YXJ0ID0gMTsgKi9cbiAgICBpZiAobWVzc2FnZS5pY2VSZXN0YXJ0ICE9PSBmYWxzZSlcbiAgICAgIHdyaXRlci50YWcoMSwgV2lyZVR5cGUuVmFyaW50KS5ib29sKG1lc3NhZ2UuaWNlUmVzdGFydCk7XG4gICAgLyogc3RyaW5nIHNkcCA9IDI7ICovXG4gICAgaWYgKG1lc3NhZ2Uuc2RwICE9PSAnJylcbiAgICAgIHdyaXRlci50YWcoMiwgV2lyZVR5cGUuTGVuZ3RoRGVsaW1pdGVkKS5zdHJpbmcobWVzc2FnZS5zZHApO1xuICAgIGxldCB1ID0gb3B0aW9ucy53cml0ZVVua25vd25GaWVsZHM7XG4gICAgaWYgKHUgIT09IGZhbHNlKVxuICAgICAgKHUgPT0gdHJ1ZSA/IFVua25vd25GaWVsZEhhbmRsZXIub25Xcml0ZSA6IHUpKFxuICAgICAgICB0aGlzLnR5cGVOYW1lLFxuICAgICAgICBtZXNzYWdlLFxuICAgICAgICB3cml0ZXIsXG4gICAgICApO1xuICAgIHJldHVybiB3cml0ZXI7XG4gIH1cbn1cbi8qKlxuICogQGdlbmVyYXRlZCBNZXNzYWdlVHlwZSBmb3IgcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LlN1YnNjcmliZXJPZmZlclxuICovXG5leHBvcnQgY29uc3QgU3Vic2NyaWJlck9mZmVyID0gbmV3IFN1YnNjcmliZXJPZmZlciRUeXBlKCk7XG4vLyBAZ2VuZXJhdGVkIG1lc3NhZ2UgdHlwZSB3aXRoIHJlZmxlY3Rpb24gaW5mb3JtYXRpb24sIG1heSBwcm92aWRlIHNwZWVkIG9wdGltaXplZCBtZXRob2RzXG5jbGFzcyBQdWJsaXNoZXJBbnN3ZXIkVHlwZSBleHRlbmRzIE1lc3NhZ2VUeXBlPFB1Ymxpc2hlckFuc3dlcj4ge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcignc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5QdWJsaXNoZXJBbnN3ZXInLCBbXG4gICAgICB7IG5vOiAxLCBuYW1lOiAnc2RwJywga2luZDogJ3NjYWxhcicsIFQ6IDkgLypTY2FsYXJUeXBlLlNUUklORyovIH0sXG4gICAgXSk7XG4gIH1cbiAgY3JlYXRlKHZhbHVlPzogUGFydGlhbE1lc3NhZ2U8UHVibGlzaGVyQW5zd2VyPik6IFB1Ymxpc2hlckFuc3dlciB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGdsb2JhbFRoaXMuT2JqZWN0LmNyZWF0ZSh0aGlzLm1lc3NhZ2VQcm90b3R5cGUhKTtcbiAgICBtZXNzYWdlLnNkcCA9ICcnO1xuICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKVxuICAgICAgcmVmbGVjdGlvbk1lcmdlUGFydGlhbDxQdWJsaXNoZXJBbnN3ZXI+KHRoaXMsIG1lc3NhZ2UsIHZhbHVlKTtcbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxuICBpbnRlcm5hbEJpbmFyeVJlYWQoXG4gICAgcmVhZGVyOiBJQmluYXJ5UmVhZGVyLFxuICAgIGxlbmd0aDogbnVtYmVyLFxuICAgIG9wdGlvbnM6IEJpbmFyeVJlYWRPcHRpb25zLFxuICAgIHRhcmdldD86IFB1Ymxpc2hlckFuc3dlcixcbiAgKTogUHVibGlzaGVyQW5zd2VyIHtcbiAgICBsZXQgbWVzc2FnZSA9IHRhcmdldCA/PyB0aGlzLmNyZWF0ZSgpLFxuICAgICAgZW5kID0gcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgbGV0IFtmaWVsZE5vLCB3aXJlVHlwZV0gPSByZWFkZXIudGFnKCk7XG4gICAgICBzd2l0Y2ggKGZpZWxkTm8pIHtcbiAgICAgICAgY2FzZSAvKiBzdHJpbmcgc2RwICovIDE6XG4gICAgICAgICAgbWVzc2FnZS5zZHAgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgbGV0IHUgPSBvcHRpb25zLnJlYWRVbmtub3duRmllbGQ7XG4gICAgICAgICAgaWYgKHUgPT09ICd0aHJvdycpXG4gICAgICAgICAgICB0aHJvdyBuZXcgZ2xvYmFsVGhpcy5FcnJvcihcbiAgICAgICAgICAgICAgYFVua25vd24gZmllbGQgJHtmaWVsZE5vfSAod2lyZSB0eXBlICR7d2lyZVR5cGV9KSBmb3IgJHt0aGlzLnR5cGVOYW1lfWAsXG4gICAgICAgICAgICApO1xuICAgICAgICAgIGxldCBkID0gcmVhZGVyLnNraXAod2lyZVR5cGUpO1xuICAgICAgICAgIGlmICh1ICE9PSBmYWxzZSlcbiAgICAgICAgICAgICh1ID09PSB0cnVlID8gVW5rbm93bkZpZWxkSGFuZGxlci5vblJlYWQgOiB1KShcbiAgICAgICAgICAgICAgdGhpcy50eXBlTmFtZSxcbiAgICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgICAgZmllbGRObyxcbiAgICAgICAgICAgICAgd2lyZVR5cGUsXG4gICAgICAgICAgICAgIGQsXG4gICAgICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxuICBpbnRlcm5hbEJpbmFyeVdyaXRlKFxuICAgIG1lc3NhZ2U6IFB1Ymxpc2hlckFuc3dlcixcbiAgICB3cml0ZXI6IElCaW5hcnlXcml0ZXIsXG4gICAgb3B0aW9uczogQmluYXJ5V3JpdGVPcHRpb25zLFxuICApOiBJQmluYXJ5V3JpdGVyIHtcbiAgICAvKiBzdHJpbmcgc2RwID0gMTsgKi9cbiAgICBpZiAobWVzc2FnZS5zZHAgIT09ICcnKVxuICAgICAgd3JpdGVyLnRhZygxLCBXaXJlVHlwZS5MZW5ndGhEZWxpbWl0ZWQpLnN0cmluZyhtZXNzYWdlLnNkcCk7XG4gICAgbGV0IHUgPSBvcHRpb25zLndyaXRlVW5rbm93bkZpZWxkcztcbiAgICBpZiAodSAhPT0gZmFsc2UpXG4gICAgICAodSA9PSB0cnVlID8gVW5rbm93bkZpZWxkSGFuZGxlci5vbldyaXRlIDogdSkoXG4gICAgICAgIHRoaXMudHlwZU5hbWUsXG4gICAgICAgIG1lc3NhZ2UsXG4gICAgICAgIHdyaXRlcixcbiAgICAgICk7XG4gICAgcmV0dXJuIHdyaXRlcjtcbiAgfVxufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIE1lc3NhZ2VUeXBlIGZvciBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUuZXZlbnQuUHVibGlzaGVyQW5zd2VyXG4gKi9cbmV4cG9ydCBjb25zdCBQdWJsaXNoZXJBbnN3ZXIgPSBuZXcgUHVibGlzaGVyQW5zd2VyJFR5cGUoKTtcbi8vIEBnZW5lcmF0ZWQgbWVzc2FnZSB0eXBlIHdpdGggcmVmbGVjdGlvbiBpbmZvcm1hdGlvbiwgbWF5IHByb3ZpZGUgc3BlZWQgb3B0aW1pemVkIG1ldGhvZHNcbmNsYXNzIENvbm5lY3Rpb25RdWFsaXR5Q2hhbmdlZCRUeXBlIGV4dGVuZHMgTWVzc2FnZVR5cGU8Q29ubmVjdGlvblF1YWxpdHlDaGFuZ2VkPiB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCdzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LkNvbm5lY3Rpb25RdWFsaXR5Q2hhbmdlZCcsIFtcbiAgICAgIHtcbiAgICAgICAgbm86IDEsXG4gICAgICAgIG5hbWU6ICdjb25uZWN0aW9uX3F1YWxpdHlfdXBkYXRlcycsXG4gICAgICAgIGtpbmQ6ICdtZXNzYWdlJyxcbiAgICAgICAgcmVwZWF0OiAxIC8qUmVwZWF0VHlwZS5QQUNLRUQqLyxcbiAgICAgICAgVDogKCkgPT4gQ29ubmVjdGlvblF1YWxpdHlJbmZvLFxuICAgICAgfSxcbiAgICBdKTtcbiAgfVxuICBjcmVhdGUoXG4gICAgdmFsdWU/OiBQYXJ0aWFsTWVzc2FnZTxDb25uZWN0aW9uUXVhbGl0eUNoYW5nZWQ+LFxuICApOiBDb25uZWN0aW9uUXVhbGl0eUNoYW5nZWQge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBnbG9iYWxUaGlzLk9iamVjdC5jcmVhdGUodGhpcy5tZXNzYWdlUHJvdG90eXBlISk7XG4gICAgbWVzc2FnZS5jb25uZWN0aW9uUXVhbGl0eVVwZGF0ZXMgPSBbXTtcbiAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZClcbiAgICAgIHJlZmxlY3Rpb25NZXJnZVBhcnRpYWw8Q29ubmVjdGlvblF1YWxpdHlDaGFuZ2VkPih0aGlzLCBtZXNzYWdlLCB2YWx1ZSk7XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH1cbiAgaW50ZXJuYWxCaW5hcnlSZWFkKFxuICAgIHJlYWRlcjogSUJpbmFyeVJlYWRlcixcbiAgICBsZW5ndGg6IG51bWJlcixcbiAgICBvcHRpb25zOiBCaW5hcnlSZWFkT3B0aW9ucyxcbiAgICB0YXJnZXQ/OiBDb25uZWN0aW9uUXVhbGl0eUNoYW5nZWQsXG4gICk6IENvbm5lY3Rpb25RdWFsaXR5Q2hhbmdlZCB7XG4gICAgbGV0IG1lc3NhZ2UgPSB0YXJnZXQgPz8gdGhpcy5jcmVhdGUoKSxcbiAgICAgIGVuZCA9IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgIGxldCBbZmllbGRObywgd2lyZVR5cGVdID0gcmVhZGVyLnRhZygpO1xuICAgICAgc3dpdGNoIChmaWVsZE5vKSB7XG4gICAgICAgIGNhc2UgLyogcmVwZWF0ZWQgc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5Db25uZWN0aW9uUXVhbGl0eUluZm8gY29ubmVjdGlvbl9xdWFsaXR5X3VwZGF0ZXMgKi8gMTpcbiAgICAgICAgICBtZXNzYWdlLmNvbm5lY3Rpb25RdWFsaXR5VXBkYXRlcy5wdXNoKFxuICAgICAgICAgICAgQ29ubmVjdGlvblF1YWxpdHlJbmZvLmludGVybmFsQmluYXJ5UmVhZChcbiAgICAgICAgICAgICAgcmVhZGVyLFxuICAgICAgICAgICAgICByZWFkZXIudWludDMyKCksXG4gICAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICApLFxuICAgICAgICAgICk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgbGV0IHUgPSBvcHRpb25zLnJlYWRVbmtub3duRmllbGQ7XG4gICAgICAgICAgaWYgKHUgPT09ICd0aHJvdycpXG4gICAgICAgICAgICB0aHJvdyBuZXcgZ2xvYmFsVGhpcy5FcnJvcihcbiAgICAgICAgICAgICAgYFVua25vd24gZmllbGQgJHtmaWVsZE5vfSAod2lyZSB0eXBlICR7d2lyZVR5cGV9KSBmb3IgJHt0aGlzLnR5cGVOYW1lfWAsXG4gICAgICAgICAgICApO1xuICAgICAgICAgIGxldCBkID0gcmVhZGVyLnNraXAod2lyZVR5cGUpO1xuICAgICAgICAgIGlmICh1ICE9PSBmYWxzZSlcbiAgICAgICAgICAgICh1ID09PSB0cnVlID8gVW5rbm93bkZpZWxkSGFuZGxlci5vblJlYWQgOiB1KShcbiAgICAgICAgICAgICAgdGhpcy50eXBlTmFtZSxcbiAgICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgICAgZmllbGRObyxcbiAgICAgICAgICAgICAgd2lyZVR5cGUsXG4gICAgICAgICAgICAgIGQsXG4gICAgICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxuICBpbnRlcm5hbEJpbmFyeVdyaXRlKFxuICAgIG1lc3NhZ2U6IENvbm5lY3Rpb25RdWFsaXR5Q2hhbmdlZCxcbiAgICB3cml0ZXI6IElCaW5hcnlXcml0ZXIsXG4gICAgb3B0aW9uczogQmluYXJ5V3JpdGVPcHRpb25zLFxuICApOiBJQmluYXJ5V3JpdGVyIHtcbiAgICAvKiByZXBlYXRlZCBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LkNvbm5lY3Rpb25RdWFsaXR5SW5mbyBjb25uZWN0aW9uX3F1YWxpdHlfdXBkYXRlcyA9IDE7ICovXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtZXNzYWdlLmNvbm5lY3Rpb25RdWFsaXR5VXBkYXRlcy5sZW5ndGg7IGkrKylcbiAgICAgIENvbm5lY3Rpb25RdWFsaXR5SW5mby5pbnRlcm5hbEJpbmFyeVdyaXRlKFxuICAgICAgICBtZXNzYWdlLmNvbm5lY3Rpb25RdWFsaXR5VXBkYXRlc1tpXSxcbiAgICAgICAgd3JpdGVyLnRhZygxLCBXaXJlVHlwZS5MZW5ndGhEZWxpbWl0ZWQpLmZvcmsoKSxcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICkuam9pbigpO1xuICAgIGxldCB1ID0gb3B0aW9ucy53cml0ZVVua25vd25GaWVsZHM7XG4gICAgaWYgKHUgIT09IGZhbHNlKVxuICAgICAgKHUgPT0gdHJ1ZSA/IFVua25vd25GaWVsZEhhbmRsZXIub25Xcml0ZSA6IHUpKFxuICAgICAgICB0aGlzLnR5cGVOYW1lLFxuICAgICAgICBtZXNzYWdlLFxuICAgICAgICB3cml0ZXIsXG4gICAgICApO1xuICAgIHJldHVybiB3cml0ZXI7XG4gIH1cbn1cbi8qKlxuICogQGdlbmVyYXRlZCBNZXNzYWdlVHlwZSBmb3IgcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LkNvbm5lY3Rpb25RdWFsaXR5Q2hhbmdlZFxuICovXG5leHBvcnQgY29uc3QgQ29ubmVjdGlvblF1YWxpdHlDaGFuZ2VkID0gbmV3IENvbm5lY3Rpb25RdWFsaXR5Q2hhbmdlZCRUeXBlKCk7XG4vLyBAZ2VuZXJhdGVkIG1lc3NhZ2UgdHlwZSB3aXRoIHJlZmxlY3Rpb24gaW5mb3JtYXRpb24sIG1heSBwcm92aWRlIHNwZWVkIG9wdGltaXplZCBtZXRob2RzXG5jbGFzcyBDb25uZWN0aW9uUXVhbGl0eUluZm8kVHlwZSBleHRlbmRzIE1lc3NhZ2VUeXBlPENvbm5lY3Rpb25RdWFsaXR5SW5mbz4ge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcignc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5Db25uZWN0aW9uUXVhbGl0eUluZm8nLCBbXG4gICAgICB7IG5vOiAxLCBuYW1lOiAndXNlcl9pZCcsIGtpbmQ6ICdzY2FsYXInLCBUOiA5IC8qU2NhbGFyVHlwZS5TVFJJTkcqLyB9LFxuICAgICAgeyBubzogMiwgbmFtZTogJ3Nlc3Npb25faWQnLCBraW5kOiAnc2NhbGFyJywgVDogOSAvKlNjYWxhclR5cGUuU1RSSU5HKi8gfSxcbiAgICAgIHtcbiAgICAgICAgbm86IDMsXG4gICAgICAgIG5hbWU6ICdjb25uZWN0aW9uX3F1YWxpdHknLFxuICAgICAgICBraW5kOiAnZW51bScsXG4gICAgICAgIFQ6ICgpID0+IFtcbiAgICAgICAgICAnc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuQ29ubmVjdGlvblF1YWxpdHknLFxuICAgICAgICAgIENvbm5lY3Rpb25RdWFsaXR5LFxuICAgICAgICAgICdDT05ORUNUSU9OX1FVQUxJVFlfJyxcbiAgICAgICAgXSxcbiAgICAgIH0sXG4gICAgXSk7XG4gIH1cbiAgY3JlYXRlKHZhbHVlPzogUGFydGlhbE1lc3NhZ2U8Q29ubmVjdGlvblF1YWxpdHlJbmZvPik6IENvbm5lY3Rpb25RdWFsaXR5SW5mbyB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGdsb2JhbFRoaXMuT2JqZWN0LmNyZWF0ZSh0aGlzLm1lc3NhZ2VQcm90b3R5cGUhKTtcbiAgICBtZXNzYWdlLnVzZXJJZCA9ICcnO1xuICAgIG1lc3NhZ2Uuc2Vzc2lvbklkID0gJyc7XG4gICAgbWVzc2FnZS5jb25uZWN0aW9uUXVhbGl0eSA9IDA7XG4gICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpXG4gICAgICByZWZsZWN0aW9uTWVyZ2VQYXJ0aWFsPENvbm5lY3Rpb25RdWFsaXR5SW5mbz4odGhpcywgbWVzc2FnZSwgdmFsdWUpO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG4gIGludGVybmFsQmluYXJ5UmVhZChcbiAgICByZWFkZXI6IElCaW5hcnlSZWFkZXIsXG4gICAgbGVuZ3RoOiBudW1iZXIsXG4gICAgb3B0aW9uczogQmluYXJ5UmVhZE9wdGlvbnMsXG4gICAgdGFyZ2V0PzogQ29ubmVjdGlvblF1YWxpdHlJbmZvLFxuICApOiBDb25uZWN0aW9uUXVhbGl0eUluZm8ge1xuICAgIGxldCBtZXNzYWdlID0gdGFyZ2V0ID8/IHRoaXMuY3JlYXRlKCksXG4gICAgICBlbmQgPSByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBsZXQgW2ZpZWxkTm8sIHdpcmVUeXBlXSA9IHJlYWRlci50YWcoKTtcbiAgICAgIHN3aXRjaCAoZmllbGRObykge1xuICAgICAgICBjYXNlIC8qIHN0cmluZyB1c2VyX2lkICovIDE6XG4gICAgICAgICAgbWVzc2FnZS51c2VySWQgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgLyogc3RyaW5nIHNlc3Npb25faWQgKi8gMjpcbiAgICAgICAgICBtZXNzYWdlLnNlc3Npb25JZCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAvKiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5Db25uZWN0aW9uUXVhbGl0eSBjb25uZWN0aW9uX3F1YWxpdHkgKi8gMzpcbiAgICAgICAgICBtZXNzYWdlLmNvbm5lY3Rpb25RdWFsaXR5ID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgbGV0IHUgPSBvcHRpb25zLnJlYWRVbmtub3duRmllbGQ7XG4gICAgICAgICAgaWYgKHUgPT09ICd0aHJvdycpXG4gICAgICAgICAgICB0aHJvdyBuZXcgZ2xvYmFsVGhpcy5FcnJvcihcbiAgICAgICAgICAgICAgYFVua25vd24gZmllbGQgJHtmaWVsZE5vfSAod2lyZSB0eXBlICR7d2lyZVR5cGV9KSBmb3IgJHt0aGlzLnR5cGVOYW1lfWAsXG4gICAgICAgICAgICApO1xuICAgICAgICAgIGxldCBkID0gcmVhZGVyLnNraXAod2lyZVR5cGUpO1xuICAgICAgICAgIGlmICh1ICE9PSBmYWxzZSlcbiAgICAgICAgICAgICh1ID09PSB0cnVlID8gVW5rbm93bkZpZWxkSGFuZGxlci5vblJlYWQgOiB1KShcbiAgICAgICAgICAgICAgdGhpcy50eXBlTmFtZSxcbiAgICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgICAgZmllbGRObyxcbiAgICAgICAgICAgICAgd2lyZVR5cGUsXG4gICAgICAgICAgICAgIGQsXG4gICAgICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxuICBpbnRlcm5hbEJpbmFyeVdyaXRlKFxuICAgIG1lc3NhZ2U6IENvbm5lY3Rpb25RdWFsaXR5SW5mbyxcbiAgICB3cml0ZXI6IElCaW5hcnlXcml0ZXIsXG4gICAgb3B0aW9uczogQmluYXJ5V3JpdGVPcHRpb25zLFxuICApOiBJQmluYXJ5V3JpdGVyIHtcbiAgICAvKiBzdHJpbmcgdXNlcl9pZCA9IDE7ICovXG4gICAgaWYgKG1lc3NhZ2UudXNlcklkICE9PSAnJylcbiAgICAgIHdyaXRlci50YWcoMSwgV2lyZVR5cGUuTGVuZ3RoRGVsaW1pdGVkKS5zdHJpbmcobWVzc2FnZS51c2VySWQpO1xuICAgIC8qIHN0cmluZyBzZXNzaW9uX2lkID0gMjsgKi9cbiAgICBpZiAobWVzc2FnZS5zZXNzaW9uSWQgIT09ICcnKVxuICAgICAgd3JpdGVyLnRhZygyLCBXaXJlVHlwZS5MZW5ndGhEZWxpbWl0ZWQpLnN0cmluZyhtZXNzYWdlLnNlc3Npb25JZCk7XG4gICAgLyogc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuQ29ubmVjdGlvblF1YWxpdHkgY29ubmVjdGlvbl9xdWFsaXR5ID0gMzsgKi9cbiAgICBpZiAobWVzc2FnZS5jb25uZWN0aW9uUXVhbGl0eSAhPT0gMClcbiAgICAgIHdyaXRlci50YWcoMywgV2lyZVR5cGUuVmFyaW50KS5pbnQzMihtZXNzYWdlLmNvbm5lY3Rpb25RdWFsaXR5KTtcbiAgICBsZXQgdSA9IG9wdGlvbnMud3JpdGVVbmtub3duRmllbGRzO1xuICAgIGlmICh1ICE9PSBmYWxzZSlcbiAgICAgICh1ID09IHRydWUgPyBVbmtub3duRmllbGRIYW5kbGVyLm9uV3JpdGUgOiB1KShcbiAgICAgICAgdGhpcy50eXBlTmFtZSxcbiAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgd3JpdGVyLFxuICAgICAgKTtcbiAgICByZXR1cm4gd3JpdGVyO1xuICB9XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgTWVzc2FnZVR5cGUgZm9yIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5Db25uZWN0aW9uUXVhbGl0eUluZm9cbiAqL1xuZXhwb3J0IGNvbnN0IENvbm5lY3Rpb25RdWFsaXR5SW5mbyA9IG5ldyBDb25uZWN0aW9uUXVhbGl0eUluZm8kVHlwZSgpO1xuLy8gQGdlbmVyYXRlZCBtZXNzYWdlIHR5cGUgd2l0aCByZWZsZWN0aW9uIGluZm9ybWF0aW9uLCBtYXkgcHJvdmlkZSBzcGVlZCBvcHRpbWl6ZWQgbWV0aG9kc1xuY2xhc3MgRG9taW5hbnRTcGVha2VyQ2hhbmdlZCRUeXBlIGV4dGVuZHMgTWVzc2FnZVR5cGU8RG9taW5hbnRTcGVha2VyQ2hhbmdlZD4ge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcignc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5Eb21pbmFudFNwZWFrZXJDaGFuZ2VkJywgW1xuICAgICAgeyBubzogMSwgbmFtZTogJ3VzZXJfaWQnLCBraW5kOiAnc2NhbGFyJywgVDogOSAvKlNjYWxhclR5cGUuU1RSSU5HKi8gfSxcbiAgICAgIHsgbm86IDIsIG5hbWU6ICdzZXNzaW9uX2lkJywga2luZDogJ3NjYWxhcicsIFQ6IDkgLypTY2FsYXJUeXBlLlNUUklORyovIH0sXG4gICAgXSk7XG4gIH1cbiAgY3JlYXRlKFxuICAgIHZhbHVlPzogUGFydGlhbE1lc3NhZ2U8RG9taW5hbnRTcGVha2VyQ2hhbmdlZD4sXG4gICk6IERvbWluYW50U3BlYWtlckNoYW5nZWQge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBnbG9iYWxUaGlzLk9iamVjdC5jcmVhdGUodGhpcy5tZXNzYWdlUHJvdG90eXBlISk7XG4gICAgbWVzc2FnZS51c2VySWQgPSAnJztcbiAgICBtZXNzYWdlLnNlc3Npb25JZCA9ICcnO1xuICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKVxuICAgICAgcmVmbGVjdGlvbk1lcmdlUGFydGlhbDxEb21pbmFudFNwZWFrZXJDaGFuZ2VkPih0aGlzLCBtZXNzYWdlLCB2YWx1ZSk7XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH1cbiAgaW50ZXJuYWxCaW5hcnlSZWFkKFxuICAgIHJlYWRlcjogSUJpbmFyeVJlYWRlcixcbiAgICBsZW5ndGg6IG51bWJlcixcbiAgICBvcHRpb25zOiBCaW5hcnlSZWFkT3B0aW9ucyxcbiAgICB0YXJnZXQ/OiBEb21pbmFudFNwZWFrZXJDaGFuZ2VkLFxuICApOiBEb21pbmFudFNwZWFrZXJDaGFuZ2VkIHtcbiAgICBsZXQgbWVzc2FnZSA9IHRhcmdldCA/PyB0aGlzLmNyZWF0ZSgpLFxuICAgICAgZW5kID0gcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgbGV0IFtmaWVsZE5vLCB3aXJlVHlwZV0gPSByZWFkZXIudGFnKCk7XG4gICAgICBzd2l0Y2ggKGZpZWxkTm8pIHtcbiAgICAgICAgY2FzZSAvKiBzdHJpbmcgdXNlcl9pZCAqLyAxOlxuICAgICAgICAgIG1lc3NhZ2UudXNlcklkID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIC8qIHN0cmluZyBzZXNzaW9uX2lkICovIDI6XG4gICAgICAgICAgbWVzc2FnZS5zZXNzaW9uSWQgPSByZWFkZXIuc3RyaW5nKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgbGV0IHUgPSBvcHRpb25zLnJlYWRVbmtub3duRmllbGQ7XG4gICAgICAgICAgaWYgKHUgPT09ICd0aHJvdycpXG4gICAgICAgICAgICB0aHJvdyBuZXcgZ2xvYmFsVGhpcy5FcnJvcihcbiAgICAgICAgICAgICAgYFVua25vd24gZmllbGQgJHtmaWVsZE5vfSAod2lyZSB0eXBlICR7d2lyZVR5cGV9KSBmb3IgJHt0aGlzLnR5cGVOYW1lfWAsXG4gICAgICAgICAgICApO1xuICAgICAgICAgIGxldCBkID0gcmVhZGVyLnNraXAod2lyZVR5cGUpO1xuICAgICAgICAgIGlmICh1ICE9PSBmYWxzZSlcbiAgICAgICAgICAgICh1ID09PSB0cnVlID8gVW5rbm93bkZpZWxkSGFuZGxlci5vblJlYWQgOiB1KShcbiAgICAgICAgICAgICAgdGhpcy50eXBlTmFtZSxcbiAgICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgICAgZmllbGRObyxcbiAgICAgICAgICAgICAgd2lyZVR5cGUsXG4gICAgICAgICAgICAgIGQsXG4gICAgICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxuICBpbnRlcm5hbEJpbmFyeVdyaXRlKFxuICAgIG1lc3NhZ2U6IERvbWluYW50U3BlYWtlckNoYW5nZWQsXG4gICAgd3JpdGVyOiBJQmluYXJ5V3JpdGVyLFxuICAgIG9wdGlvbnM6IEJpbmFyeVdyaXRlT3B0aW9ucyxcbiAgKTogSUJpbmFyeVdyaXRlciB7XG4gICAgLyogc3RyaW5nIHVzZXJfaWQgPSAxOyAqL1xuICAgIGlmIChtZXNzYWdlLnVzZXJJZCAhPT0gJycpXG4gICAgICB3cml0ZXIudGFnKDEsIFdpcmVUeXBlLkxlbmd0aERlbGltaXRlZCkuc3RyaW5nKG1lc3NhZ2UudXNlcklkKTtcbiAgICAvKiBzdHJpbmcgc2Vzc2lvbl9pZCA9IDI7ICovXG4gICAgaWYgKG1lc3NhZ2Uuc2Vzc2lvbklkICE9PSAnJylcbiAgICAgIHdyaXRlci50YWcoMiwgV2lyZVR5cGUuTGVuZ3RoRGVsaW1pdGVkKS5zdHJpbmcobWVzc2FnZS5zZXNzaW9uSWQpO1xuICAgIGxldCB1ID0gb3B0aW9ucy53cml0ZVVua25vd25GaWVsZHM7XG4gICAgaWYgKHUgIT09IGZhbHNlKVxuICAgICAgKHUgPT0gdHJ1ZSA/IFVua25vd25GaWVsZEhhbmRsZXIub25Xcml0ZSA6IHUpKFxuICAgICAgICB0aGlzLnR5cGVOYW1lLFxuICAgICAgICBtZXNzYWdlLFxuICAgICAgICB3cml0ZXIsXG4gICAgICApO1xuICAgIHJldHVybiB3cml0ZXI7XG4gIH1cbn1cbi8qKlxuICogQGdlbmVyYXRlZCBNZXNzYWdlVHlwZSBmb3IgcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LkRvbWluYW50U3BlYWtlckNoYW5nZWRcbiAqL1xuZXhwb3J0IGNvbnN0IERvbWluYW50U3BlYWtlckNoYW5nZWQgPSBuZXcgRG9taW5hbnRTcGVha2VyQ2hhbmdlZCRUeXBlKCk7XG4vLyBAZ2VuZXJhdGVkIG1lc3NhZ2UgdHlwZSB3aXRoIHJlZmxlY3Rpb24gaW5mb3JtYXRpb24sIG1heSBwcm92aWRlIHNwZWVkIG9wdGltaXplZCBtZXRob2RzXG5jbGFzcyBBdWRpb0xldmVsJFR5cGUgZXh0ZW5kcyBNZXNzYWdlVHlwZTxBdWRpb0xldmVsPiB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCdzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LkF1ZGlvTGV2ZWwnLCBbXG4gICAgICB7IG5vOiAxLCBuYW1lOiAndXNlcl9pZCcsIGtpbmQ6ICdzY2FsYXInLCBUOiA5IC8qU2NhbGFyVHlwZS5TVFJJTkcqLyB9LFxuICAgICAgeyBubzogMiwgbmFtZTogJ3Nlc3Npb25faWQnLCBraW5kOiAnc2NhbGFyJywgVDogOSAvKlNjYWxhclR5cGUuU1RSSU5HKi8gfSxcbiAgICAgIHsgbm86IDMsIG5hbWU6ICdsZXZlbCcsIGtpbmQ6ICdzY2FsYXInLCBUOiAyIC8qU2NhbGFyVHlwZS5GTE9BVCovIH0sXG4gICAgICB7IG5vOiA0LCBuYW1lOiAnaXNfc3BlYWtpbmcnLCBraW5kOiAnc2NhbGFyJywgVDogOCAvKlNjYWxhclR5cGUuQk9PTCovIH0sXG4gICAgXSk7XG4gIH1cbiAgY3JlYXRlKHZhbHVlPzogUGFydGlhbE1lc3NhZ2U8QXVkaW9MZXZlbD4pOiBBdWRpb0xldmVsIHtcbiAgICBjb25zdCBtZXNzYWdlID0gZ2xvYmFsVGhpcy5PYmplY3QuY3JlYXRlKHRoaXMubWVzc2FnZVByb3RvdHlwZSEpO1xuICAgIG1lc3NhZ2UudXNlcklkID0gJyc7XG4gICAgbWVzc2FnZS5zZXNzaW9uSWQgPSAnJztcbiAgICBtZXNzYWdlLmxldmVsID0gMDtcbiAgICBtZXNzYWdlLmlzU3BlYWtpbmcgPSBmYWxzZTtcbiAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZClcbiAgICAgIHJlZmxlY3Rpb25NZXJnZVBhcnRpYWw8QXVkaW9MZXZlbD4odGhpcywgbWVzc2FnZSwgdmFsdWUpO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG4gIGludGVybmFsQmluYXJ5UmVhZChcbiAgICByZWFkZXI6IElCaW5hcnlSZWFkZXIsXG4gICAgbGVuZ3RoOiBudW1iZXIsXG4gICAgb3B0aW9uczogQmluYXJ5UmVhZE9wdGlvbnMsXG4gICAgdGFyZ2V0PzogQXVkaW9MZXZlbCxcbiAgKTogQXVkaW9MZXZlbCB7XG4gICAgbGV0IG1lc3NhZ2UgPSB0YXJnZXQgPz8gdGhpcy5jcmVhdGUoKSxcbiAgICAgIGVuZCA9IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgIGxldCBbZmllbGRObywgd2lyZVR5cGVdID0gcmVhZGVyLnRhZygpO1xuICAgICAgc3dpdGNoIChmaWVsZE5vKSB7XG4gICAgICAgIGNhc2UgLyogc3RyaW5nIHVzZXJfaWQgKi8gMTpcbiAgICAgICAgICBtZXNzYWdlLnVzZXJJZCA9IHJlYWRlci5zdHJpbmcoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAvKiBzdHJpbmcgc2Vzc2lvbl9pZCAqLyAyOlxuICAgICAgICAgIG1lc3NhZ2Uuc2Vzc2lvbklkID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIC8qIGZsb2F0IGxldmVsICovIDM6XG4gICAgICAgICAgbWVzc2FnZS5sZXZlbCA9IHJlYWRlci5mbG9hdCgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIC8qIGJvb2wgaXNfc3BlYWtpbmcgKi8gNDpcbiAgICAgICAgICBtZXNzYWdlLmlzU3BlYWtpbmcgPSByZWFkZXIuYm9vbCgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGxldCB1ID0gb3B0aW9ucy5yZWFkVW5rbm93bkZpZWxkO1xuICAgICAgICAgIGlmICh1ID09PSAndGhyb3cnKVxuICAgICAgICAgICAgdGhyb3cgbmV3IGdsb2JhbFRoaXMuRXJyb3IoXG4gICAgICAgICAgICAgIGBVbmtub3duIGZpZWxkICR7ZmllbGROb30gKHdpcmUgdHlwZSAke3dpcmVUeXBlfSkgZm9yICR7dGhpcy50eXBlTmFtZX1gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICBsZXQgZCA9IHJlYWRlci5za2lwKHdpcmVUeXBlKTtcbiAgICAgICAgICBpZiAodSAhPT0gZmFsc2UpXG4gICAgICAgICAgICAodSA9PT0gdHJ1ZSA/IFVua25vd25GaWVsZEhhbmRsZXIub25SZWFkIDogdSkoXG4gICAgICAgICAgICAgIHRoaXMudHlwZU5hbWUsXG4gICAgICAgICAgICAgIG1lc3NhZ2UsXG4gICAgICAgICAgICAgIGZpZWxkTm8sXG4gICAgICAgICAgICAgIHdpcmVUeXBlLFxuICAgICAgICAgICAgICBkLFxuICAgICAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH1cbiAgaW50ZXJuYWxCaW5hcnlXcml0ZShcbiAgICBtZXNzYWdlOiBBdWRpb0xldmVsLFxuICAgIHdyaXRlcjogSUJpbmFyeVdyaXRlcixcbiAgICBvcHRpb25zOiBCaW5hcnlXcml0ZU9wdGlvbnMsXG4gICk6IElCaW5hcnlXcml0ZXIge1xuICAgIC8qIHN0cmluZyB1c2VyX2lkID0gMTsgKi9cbiAgICBpZiAobWVzc2FnZS51c2VySWQgIT09ICcnKVxuICAgICAgd3JpdGVyLnRhZygxLCBXaXJlVHlwZS5MZW5ndGhEZWxpbWl0ZWQpLnN0cmluZyhtZXNzYWdlLnVzZXJJZCk7XG4gICAgLyogc3RyaW5nIHNlc3Npb25faWQgPSAyOyAqL1xuICAgIGlmIChtZXNzYWdlLnNlc3Npb25JZCAhPT0gJycpXG4gICAgICB3cml0ZXIudGFnKDIsIFdpcmVUeXBlLkxlbmd0aERlbGltaXRlZCkuc3RyaW5nKG1lc3NhZ2Uuc2Vzc2lvbklkKTtcbiAgICAvKiBmbG9hdCBsZXZlbCA9IDM7ICovXG4gICAgaWYgKG1lc3NhZ2UubGV2ZWwgIT09IDApIHdyaXRlci50YWcoMywgV2lyZVR5cGUuQml0MzIpLmZsb2F0KG1lc3NhZ2UubGV2ZWwpO1xuICAgIC8qIGJvb2wgaXNfc3BlYWtpbmcgPSA0OyAqL1xuICAgIGlmIChtZXNzYWdlLmlzU3BlYWtpbmcgIT09IGZhbHNlKVxuICAgICAgd3JpdGVyLnRhZyg0LCBXaXJlVHlwZS5WYXJpbnQpLmJvb2wobWVzc2FnZS5pc1NwZWFraW5nKTtcbiAgICBsZXQgdSA9IG9wdGlvbnMud3JpdGVVbmtub3duRmllbGRzO1xuICAgIGlmICh1ICE9PSBmYWxzZSlcbiAgICAgICh1ID09IHRydWUgPyBVbmtub3duRmllbGRIYW5kbGVyLm9uV3JpdGUgOiB1KShcbiAgICAgICAgdGhpcy50eXBlTmFtZSxcbiAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgd3JpdGVyLFxuICAgICAgKTtcbiAgICByZXR1cm4gd3JpdGVyO1xuICB9XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgTWVzc2FnZVR5cGUgZm9yIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5BdWRpb0xldmVsXG4gKi9cbmV4cG9ydCBjb25zdCBBdWRpb0xldmVsID0gbmV3IEF1ZGlvTGV2ZWwkVHlwZSgpO1xuLy8gQGdlbmVyYXRlZCBtZXNzYWdlIHR5cGUgd2l0aCByZWZsZWN0aW9uIGluZm9ybWF0aW9uLCBtYXkgcHJvdmlkZSBzcGVlZCBvcHRpbWl6ZWQgbWV0aG9kc1xuY2xhc3MgQXVkaW9MZXZlbENoYW5nZWQkVHlwZSBleHRlbmRzIE1lc3NhZ2VUeXBlPEF1ZGlvTGV2ZWxDaGFuZ2VkPiB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCdzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LkF1ZGlvTGV2ZWxDaGFuZ2VkJywgW1xuICAgICAge1xuICAgICAgICBubzogMSxcbiAgICAgICAgbmFtZTogJ2F1ZGlvX2xldmVscycsXG4gICAgICAgIGtpbmQ6ICdtZXNzYWdlJyxcbiAgICAgICAgcmVwZWF0OiAxIC8qUmVwZWF0VHlwZS5QQUNLRUQqLyxcbiAgICAgICAgVDogKCkgPT4gQXVkaW9MZXZlbCxcbiAgICAgIH0sXG4gICAgXSk7XG4gIH1cbiAgY3JlYXRlKHZhbHVlPzogUGFydGlhbE1lc3NhZ2U8QXVkaW9MZXZlbENoYW5nZWQ+KTogQXVkaW9MZXZlbENoYW5nZWQge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBnbG9iYWxUaGlzLk9iamVjdC5jcmVhdGUodGhpcy5tZXNzYWdlUHJvdG90eXBlISk7XG4gICAgbWVzc2FnZS5hdWRpb0xldmVscyA9IFtdO1xuICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKVxuICAgICAgcmVmbGVjdGlvbk1lcmdlUGFydGlhbDxBdWRpb0xldmVsQ2hhbmdlZD4odGhpcywgbWVzc2FnZSwgdmFsdWUpO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG4gIGludGVybmFsQmluYXJ5UmVhZChcbiAgICByZWFkZXI6IElCaW5hcnlSZWFkZXIsXG4gICAgbGVuZ3RoOiBudW1iZXIsXG4gICAgb3B0aW9uczogQmluYXJ5UmVhZE9wdGlvbnMsXG4gICAgdGFyZ2V0PzogQXVkaW9MZXZlbENoYW5nZWQsXG4gICk6IEF1ZGlvTGV2ZWxDaGFuZ2VkIHtcbiAgICBsZXQgbWVzc2FnZSA9IHRhcmdldCA/PyB0aGlzLmNyZWF0ZSgpLFxuICAgICAgZW5kID0gcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgbGV0IFtmaWVsZE5vLCB3aXJlVHlwZV0gPSByZWFkZXIudGFnKCk7XG4gICAgICBzd2l0Y2ggKGZpZWxkTm8pIHtcbiAgICAgICAgY2FzZSAvKiByZXBlYXRlZCBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LkF1ZGlvTGV2ZWwgYXVkaW9fbGV2ZWxzICovIDE6XG4gICAgICAgICAgbWVzc2FnZS5hdWRpb0xldmVscy5wdXNoKFxuICAgICAgICAgICAgQXVkaW9MZXZlbC5pbnRlcm5hbEJpbmFyeVJlYWQocmVhZGVyLCByZWFkZXIudWludDMyKCksIG9wdGlvbnMpLFxuICAgICAgICAgICk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgbGV0IHUgPSBvcHRpb25zLnJlYWRVbmtub3duRmllbGQ7XG4gICAgICAgICAgaWYgKHUgPT09ICd0aHJvdycpXG4gICAgICAgICAgICB0aHJvdyBuZXcgZ2xvYmFsVGhpcy5FcnJvcihcbiAgICAgICAgICAgICAgYFVua25vd24gZmllbGQgJHtmaWVsZE5vfSAod2lyZSB0eXBlICR7d2lyZVR5cGV9KSBmb3IgJHt0aGlzLnR5cGVOYW1lfWAsXG4gICAgICAgICAgICApO1xuICAgICAgICAgIGxldCBkID0gcmVhZGVyLnNraXAod2lyZVR5cGUpO1xuICAgICAgICAgIGlmICh1ICE9PSBmYWxzZSlcbiAgICAgICAgICAgICh1ID09PSB0cnVlID8gVW5rbm93bkZpZWxkSGFuZGxlci5vblJlYWQgOiB1KShcbiAgICAgICAgICAgICAgdGhpcy50eXBlTmFtZSxcbiAgICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgICAgZmllbGRObyxcbiAgICAgICAgICAgICAgd2lyZVR5cGUsXG4gICAgICAgICAgICAgIGQsXG4gICAgICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxuICBpbnRlcm5hbEJpbmFyeVdyaXRlKFxuICAgIG1lc3NhZ2U6IEF1ZGlvTGV2ZWxDaGFuZ2VkLFxuICAgIHdyaXRlcjogSUJpbmFyeVdyaXRlcixcbiAgICBvcHRpb25zOiBCaW5hcnlXcml0ZU9wdGlvbnMsXG4gICk6IElCaW5hcnlXcml0ZXIge1xuICAgIC8qIHJlcGVhdGVkIHN0cmVhbS52aWRlby5zZnUuZXZlbnQuQXVkaW9MZXZlbCBhdWRpb19sZXZlbHMgPSAxOyAqL1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWVzc2FnZS5hdWRpb0xldmVscy5sZW5ndGg7IGkrKylcbiAgICAgIEF1ZGlvTGV2ZWwuaW50ZXJuYWxCaW5hcnlXcml0ZShcbiAgICAgICAgbWVzc2FnZS5hdWRpb0xldmVsc1tpXSxcbiAgICAgICAgd3JpdGVyLnRhZygxLCBXaXJlVHlwZS5MZW5ndGhEZWxpbWl0ZWQpLmZvcmsoKSxcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICkuam9pbigpO1xuICAgIGxldCB1ID0gb3B0aW9ucy53cml0ZVVua25vd25GaWVsZHM7XG4gICAgaWYgKHUgIT09IGZhbHNlKVxuICAgICAgKHUgPT0gdHJ1ZSA/IFVua25vd25GaWVsZEhhbmRsZXIub25Xcml0ZSA6IHUpKFxuICAgICAgICB0aGlzLnR5cGVOYW1lLFxuICAgICAgICBtZXNzYWdlLFxuICAgICAgICB3cml0ZXIsXG4gICAgICApO1xuICAgIHJldHVybiB3cml0ZXI7XG4gIH1cbn1cbi8qKlxuICogQGdlbmVyYXRlZCBNZXNzYWdlVHlwZSBmb3IgcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LkF1ZGlvTGV2ZWxDaGFuZ2VkXG4gKi9cbmV4cG9ydCBjb25zdCBBdWRpb0xldmVsQ2hhbmdlZCA9IG5ldyBBdWRpb0xldmVsQ2hhbmdlZCRUeXBlKCk7XG4vLyBAZ2VuZXJhdGVkIG1lc3NhZ2UgdHlwZSB3aXRoIHJlZmxlY3Rpb24gaW5mb3JtYXRpb24sIG1heSBwcm92aWRlIHNwZWVkIG9wdGltaXplZCBtZXRob2RzXG5jbGFzcyBBdWRpb01lZGlhUmVxdWVzdCRUeXBlIGV4dGVuZHMgTWVzc2FnZVR5cGU8QXVkaW9NZWRpYVJlcXVlc3Q+IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoJ3N0cmVhbS52aWRlby5zZnUuZXZlbnQuQXVkaW9NZWRpYVJlcXVlc3QnLCBbXG4gICAgICB7XG4gICAgICAgIG5vOiAxLFxuICAgICAgICBuYW1lOiAnY2hhbm5lbF9jb3VudCcsXG4gICAgICAgIGtpbmQ6ICdzY2FsYXInLFxuICAgICAgICBUOiA1IC8qU2NhbGFyVHlwZS5JTlQzMiovLFxuICAgICAgfSxcbiAgICBdKTtcbiAgfVxuICBjcmVhdGUodmFsdWU/OiBQYXJ0aWFsTWVzc2FnZTxBdWRpb01lZGlhUmVxdWVzdD4pOiBBdWRpb01lZGlhUmVxdWVzdCB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGdsb2JhbFRoaXMuT2JqZWN0LmNyZWF0ZSh0aGlzLm1lc3NhZ2VQcm90b3R5cGUhKTtcbiAgICBtZXNzYWdlLmNoYW5uZWxDb3VudCA9IDA7XG4gICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpXG4gICAgICByZWZsZWN0aW9uTWVyZ2VQYXJ0aWFsPEF1ZGlvTWVkaWFSZXF1ZXN0Pih0aGlzLCBtZXNzYWdlLCB2YWx1ZSk7XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH1cbiAgaW50ZXJuYWxCaW5hcnlSZWFkKFxuICAgIHJlYWRlcjogSUJpbmFyeVJlYWRlcixcbiAgICBsZW5ndGg6IG51bWJlcixcbiAgICBvcHRpb25zOiBCaW5hcnlSZWFkT3B0aW9ucyxcbiAgICB0YXJnZXQ/OiBBdWRpb01lZGlhUmVxdWVzdCxcbiAgKTogQXVkaW9NZWRpYVJlcXVlc3Qge1xuICAgIGxldCBtZXNzYWdlID0gdGFyZ2V0ID8/IHRoaXMuY3JlYXRlKCksXG4gICAgICBlbmQgPSByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBsZXQgW2ZpZWxkTm8sIHdpcmVUeXBlXSA9IHJlYWRlci50YWcoKTtcbiAgICAgIHN3aXRjaCAoZmllbGRObykge1xuICAgICAgICBjYXNlIC8qIGludDMyIGNoYW5uZWxfY291bnQgKi8gMTpcbiAgICAgICAgICBtZXNzYWdlLmNoYW5uZWxDb3VudCA9IHJlYWRlci5pbnQzMigpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGxldCB1ID0gb3B0aW9ucy5yZWFkVW5rbm93bkZpZWxkO1xuICAgICAgICAgIGlmICh1ID09PSAndGhyb3cnKVxuICAgICAgICAgICAgdGhyb3cgbmV3IGdsb2JhbFRoaXMuRXJyb3IoXG4gICAgICAgICAgICAgIGBVbmtub3duIGZpZWxkICR7ZmllbGROb30gKHdpcmUgdHlwZSAke3dpcmVUeXBlfSkgZm9yICR7dGhpcy50eXBlTmFtZX1gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICBsZXQgZCA9IHJlYWRlci5za2lwKHdpcmVUeXBlKTtcbiAgICAgICAgICBpZiAodSAhPT0gZmFsc2UpXG4gICAgICAgICAgICAodSA9PT0gdHJ1ZSA/IFVua25vd25GaWVsZEhhbmRsZXIub25SZWFkIDogdSkoXG4gICAgICAgICAgICAgIHRoaXMudHlwZU5hbWUsXG4gICAgICAgICAgICAgIG1lc3NhZ2UsXG4gICAgICAgICAgICAgIGZpZWxkTm8sXG4gICAgICAgICAgICAgIHdpcmVUeXBlLFxuICAgICAgICAgICAgICBkLFxuICAgICAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH1cbiAgaW50ZXJuYWxCaW5hcnlXcml0ZShcbiAgICBtZXNzYWdlOiBBdWRpb01lZGlhUmVxdWVzdCxcbiAgICB3cml0ZXI6IElCaW5hcnlXcml0ZXIsXG4gICAgb3B0aW9uczogQmluYXJ5V3JpdGVPcHRpb25zLFxuICApOiBJQmluYXJ5V3JpdGVyIHtcbiAgICAvKiBpbnQzMiBjaGFubmVsX2NvdW50ID0gMTsgKi9cbiAgICBpZiAobWVzc2FnZS5jaGFubmVsQ291bnQgIT09IDApXG4gICAgICB3cml0ZXIudGFnKDEsIFdpcmVUeXBlLlZhcmludCkuaW50MzIobWVzc2FnZS5jaGFubmVsQ291bnQpO1xuICAgIGxldCB1ID0gb3B0aW9ucy53cml0ZVVua25vd25GaWVsZHM7XG4gICAgaWYgKHUgIT09IGZhbHNlKVxuICAgICAgKHUgPT0gdHJ1ZSA/IFVua25vd25GaWVsZEhhbmRsZXIub25Xcml0ZSA6IHUpKFxuICAgICAgICB0aGlzLnR5cGVOYW1lLFxuICAgICAgICBtZXNzYWdlLFxuICAgICAgICB3cml0ZXIsXG4gICAgICApO1xuICAgIHJldHVybiB3cml0ZXI7XG4gIH1cbn1cbi8qKlxuICogQGdlbmVyYXRlZCBNZXNzYWdlVHlwZSBmb3IgcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LkF1ZGlvTWVkaWFSZXF1ZXN0XG4gKi9cbmV4cG9ydCBjb25zdCBBdWRpb01lZGlhUmVxdWVzdCA9IG5ldyBBdWRpb01lZGlhUmVxdWVzdCRUeXBlKCk7XG4vLyBAZ2VuZXJhdGVkIG1lc3NhZ2UgdHlwZSB3aXRoIHJlZmxlY3Rpb24gaW5mb3JtYXRpb24sIG1heSBwcm92aWRlIHNwZWVkIG9wdGltaXplZCBtZXRob2RzXG5jbGFzcyBBdWRpb1NlbmRlciRUeXBlIGV4dGVuZHMgTWVzc2FnZVR5cGU8QXVkaW9TZW5kZXI+IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoJ3N0cmVhbS52aWRlby5zZnUuZXZlbnQuQXVkaW9TZW5kZXInLCBbXG4gICAgICB7XG4gICAgICAgIG5vOiAxLFxuICAgICAgICBuYW1lOiAnbWVkaWFfcmVxdWVzdCcsXG4gICAgICAgIGtpbmQ6ICdtZXNzYWdlJyxcbiAgICAgICAgVDogKCkgPT4gQXVkaW9NZWRpYVJlcXVlc3QsXG4gICAgICB9LFxuICAgICAgeyBubzogMiwgbmFtZTogJ2NvZGVjJywga2luZDogJ21lc3NhZ2UnLCBUOiAoKSA9PiBDb2RlYyB9LFxuICAgIF0pO1xuICB9XG4gIGNyZWF0ZSh2YWx1ZT86IFBhcnRpYWxNZXNzYWdlPEF1ZGlvU2VuZGVyPik6IEF1ZGlvU2VuZGVyIHtcbiAgICBjb25zdCBtZXNzYWdlID0gZ2xvYmFsVGhpcy5PYmplY3QuY3JlYXRlKHRoaXMubWVzc2FnZVByb3RvdHlwZSEpO1xuICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKVxuICAgICAgcmVmbGVjdGlvbk1lcmdlUGFydGlhbDxBdWRpb1NlbmRlcj4odGhpcywgbWVzc2FnZSwgdmFsdWUpO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG4gIGludGVybmFsQmluYXJ5UmVhZChcbiAgICByZWFkZXI6IElCaW5hcnlSZWFkZXIsXG4gICAgbGVuZ3RoOiBudW1iZXIsXG4gICAgb3B0aW9uczogQmluYXJ5UmVhZE9wdGlvbnMsXG4gICAgdGFyZ2V0PzogQXVkaW9TZW5kZXIsXG4gICk6IEF1ZGlvU2VuZGVyIHtcbiAgICBsZXQgbWVzc2FnZSA9IHRhcmdldCA/PyB0aGlzLmNyZWF0ZSgpLFxuICAgICAgZW5kID0gcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgbGV0IFtmaWVsZE5vLCB3aXJlVHlwZV0gPSByZWFkZXIudGFnKCk7XG4gICAgICBzd2l0Y2ggKGZpZWxkTm8pIHtcbiAgICAgICAgY2FzZSAvKiBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LkF1ZGlvTWVkaWFSZXF1ZXN0IG1lZGlhX3JlcXVlc3QgKi8gMTpcbiAgICAgICAgICBtZXNzYWdlLm1lZGlhUmVxdWVzdCA9IEF1ZGlvTWVkaWFSZXF1ZXN0LmludGVybmFsQmluYXJ5UmVhZChcbiAgICAgICAgICAgIHJlYWRlcixcbiAgICAgICAgICAgIHJlYWRlci51aW50MzIoKSxcbiAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICBtZXNzYWdlLm1lZGlhUmVxdWVzdCxcbiAgICAgICAgICApO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIC8qIHN0cmVhbS52aWRlby5zZnUubW9kZWxzLkNvZGVjIGNvZGVjICovIDI6XG4gICAgICAgICAgbWVzc2FnZS5jb2RlYyA9IENvZGVjLmludGVybmFsQmluYXJ5UmVhZChcbiAgICAgICAgICAgIHJlYWRlcixcbiAgICAgICAgICAgIHJlYWRlci51aW50MzIoKSxcbiAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICBtZXNzYWdlLmNvZGVjLFxuICAgICAgICAgICk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgbGV0IHUgPSBvcHRpb25zLnJlYWRVbmtub3duRmllbGQ7XG4gICAgICAgICAgaWYgKHUgPT09ICd0aHJvdycpXG4gICAgICAgICAgICB0aHJvdyBuZXcgZ2xvYmFsVGhpcy5FcnJvcihcbiAgICAgICAgICAgICAgYFVua25vd24gZmllbGQgJHtmaWVsZE5vfSAod2lyZSB0eXBlICR7d2lyZVR5cGV9KSBmb3IgJHt0aGlzLnR5cGVOYW1lfWAsXG4gICAgICAgICAgICApO1xuICAgICAgICAgIGxldCBkID0gcmVhZGVyLnNraXAod2lyZVR5cGUpO1xuICAgICAgICAgIGlmICh1ICE9PSBmYWxzZSlcbiAgICAgICAgICAgICh1ID09PSB0cnVlID8gVW5rbm93bkZpZWxkSGFuZGxlci5vblJlYWQgOiB1KShcbiAgICAgICAgICAgICAgdGhpcy50eXBlTmFtZSxcbiAgICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgICAgZmllbGRObyxcbiAgICAgICAgICAgICAgd2lyZVR5cGUsXG4gICAgICAgICAgICAgIGQsXG4gICAgICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxuICBpbnRlcm5hbEJpbmFyeVdyaXRlKFxuICAgIG1lc3NhZ2U6IEF1ZGlvU2VuZGVyLFxuICAgIHdyaXRlcjogSUJpbmFyeVdyaXRlcixcbiAgICBvcHRpb25zOiBCaW5hcnlXcml0ZU9wdGlvbnMsXG4gICk6IElCaW5hcnlXcml0ZXIge1xuICAgIC8qIHN0cmVhbS52aWRlby5zZnUuZXZlbnQuQXVkaW9NZWRpYVJlcXVlc3QgbWVkaWFfcmVxdWVzdCA9IDE7ICovXG4gICAgaWYgKG1lc3NhZ2UubWVkaWFSZXF1ZXN0KVxuICAgICAgQXVkaW9NZWRpYVJlcXVlc3QuaW50ZXJuYWxCaW5hcnlXcml0ZShcbiAgICAgICAgbWVzc2FnZS5tZWRpYVJlcXVlc3QsXG4gICAgICAgIHdyaXRlci50YWcoMSwgV2lyZVR5cGUuTGVuZ3RoRGVsaW1pdGVkKS5mb3JrKCksXG4gICAgICAgIG9wdGlvbnMsXG4gICAgICApLmpvaW4oKTtcbiAgICAvKiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5Db2RlYyBjb2RlYyA9IDI7ICovXG4gICAgaWYgKG1lc3NhZ2UuY29kZWMpXG4gICAgICBDb2RlYy5pbnRlcm5hbEJpbmFyeVdyaXRlKFxuICAgICAgICBtZXNzYWdlLmNvZGVjLFxuICAgICAgICB3cml0ZXIudGFnKDIsIFdpcmVUeXBlLkxlbmd0aERlbGltaXRlZCkuZm9yaygpLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgKS5qb2luKCk7XG4gICAgbGV0IHUgPSBvcHRpb25zLndyaXRlVW5rbm93bkZpZWxkcztcbiAgICBpZiAodSAhPT0gZmFsc2UpXG4gICAgICAodSA9PSB0cnVlID8gVW5rbm93bkZpZWxkSGFuZGxlci5vbldyaXRlIDogdSkoXG4gICAgICAgIHRoaXMudHlwZU5hbWUsXG4gICAgICAgIG1lc3NhZ2UsXG4gICAgICAgIHdyaXRlcixcbiAgICAgICk7XG4gICAgcmV0dXJuIHdyaXRlcjtcbiAgfVxufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIE1lc3NhZ2VUeXBlIGZvciBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUuZXZlbnQuQXVkaW9TZW5kZXJcbiAqL1xuZXhwb3J0IGNvbnN0IEF1ZGlvU2VuZGVyID0gbmV3IEF1ZGlvU2VuZGVyJFR5cGUoKTtcbi8vIEBnZW5lcmF0ZWQgbWVzc2FnZSB0eXBlIHdpdGggcmVmbGVjdGlvbiBpbmZvcm1hdGlvbiwgbWF5IHByb3ZpZGUgc3BlZWQgb3B0aW1pemVkIG1ldGhvZHNcbmNsYXNzIFZpZGVvTWVkaWFSZXF1ZXN0JFR5cGUgZXh0ZW5kcyBNZXNzYWdlVHlwZTxWaWRlb01lZGlhUmVxdWVzdD4ge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcignc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5WaWRlb01lZGlhUmVxdWVzdCcsIFtcbiAgICAgIHtcbiAgICAgICAgbm86IDEsXG4gICAgICAgIG5hbWU6ICdpZGVhbF9oZWlnaHQnLFxuICAgICAgICBraW5kOiAnc2NhbGFyJyxcbiAgICAgICAgVDogNSAvKlNjYWxhclR5cGUuSU5UMzIqLyxcbiAgICAgIH0sXG4gICAgICB7IG5vOiAyLCBuYW1lOiAnaWRlYWxfd2lkdGgnLCBraW5kOiAnc2NhbGFyJywgVDogNSAvKlNjYWxhclR5cGUuSU5UMzIqLyB9LFxuICAgICAge1xuICAgICAgICBubzogMyxcbiAgICAgICAgbmFtZTogJ2lkZWFsX2ZyYW1lX3JhdGUnLFxuICAgICAgICBraW5kOiAnc2NhbGFyJyxcbiAgICAgICAgVDogNSAvKlNjYWxhclR5cGUuSU5UMzIqLyxcbiAgICAgIH0sXG4gICAgXSk7XG4gIH1cbiAgY3JlYXRlKHZhbHVlPzogUGFydGlhbE1lc3NhZ2U8VmlkZW9NZWRpYVJlcXVlc3Q+KTogVmlkZW9NZWRpYVJlcXVlc3Qge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBnbG9iYWxUaGlzLk9iamVjdC5jcmVhdGUodGhpcy5tZXNzYWdlUHJvdG90eXBlISk7XG4gICAgbWVzc2FnZS5pZGVhbEhlaWdodCA9IDA7XG4gICAgbWVzc2FnZS5pZGVhbFdpZHRoID0gMDtcbiAgICBtZXNzYWdlLmlkZWFsRnJhbWVSYXRlID0gMDtcbiAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZClcbiAgICAgIHJlZmxlY3Rpb25NZXJnZVBhcnRpYWw8VmlkZW9NZWRpYVJlcXVlc3Q+KHRoaXMsIG1lc3NhZ2UsIHZhbHVlKTtcbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxuICBpbnRlcm5hbEJpbmFyeVJlYWQoXG4gICAgcmVhZGVyOiBJQmluYXJ5UmVhZGVyLFxuICAgIGxlbmd0aDogbnVtYmVyLFxuICAgIG9wdGlvbnM6IEJpbmFyeVJlYWRPcHRpb25zLFxuICAgIHRhcmdldD86IFZpZGVvTWVkaWFSZXF1ZXN0LFxuICApOiBWaWRlb01lZGlhUmVxdWVzdCB7XG4gICAgbGV0IG1lc3NhZ2UgPSB0YXJnZXQgPz8gdGhpcy5jcmVhdGUoKSxcbiAgICAgIGVuZCA9IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgIGxldCBbZmllbGRObywgd2lyZVR5cGVdID0gcmVhZGVyLnRhZygpO1xuICAgICAgc3dpdGNoIChmaWVsZE5vKSB7XG4gICAgICAgIGNhc2UgLyogaW50MzIgaWRlYWxfaGVpZ2h0ICovIDE6XG4gICAgICAgICAgbWVzc2FnZS5pZGVhbEhlaWdodCA9IHJlYWRlci5pbnQzMigpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIC8qIGludDMyIGlkZWFsX3dpZHRoICovIDI6XG4gICAgICAgICAgbWVzc2FnZS5pZGVhbFdpZHRoID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgLyogaW50MzIgaWRlYWxfZnJhbWVfcmF0ZSAqLyAzOlxuICAgICAgICAgIG1lc3NhZ2UuaWRlYWxGcmFtZVJhdGUgPSByZWFkZXIuaW50MzIoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBsZXQgdSA9IG9wdGlvbnMucmVhZFVua25vd25GaWVsZDtcbiAgICAgICAgICBpZiAodSA9PT0gJ3Rocm93JylcbiAgICAgICAgICAgIHRocm93IG5ldyBnbG9iYWxUaGlzLkVycm9yKFxuICAgICAgICAgICAgICBgVW5rbm93biBmaWVsZCAke2ZpZWxkTm99ICh3aXJlIHR5cGUgJHt3aXJlVHlwZX0pIGZvciAke3RoaXMudHlwZU5hbWV9YCxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgbGV0IGQgPSByZWFkZXIuc2tpcCh3aXJlVHlwZSk7XG4gICAgICAgICAgaWYgKHUgIT09IGZhbHNlKVxuICAgICAgICAgICAgKHUgPT09IHRydWUgPyBVbmtub3duRmllbGRIYW5kbGVyLm9uUmVhZCA6IHUpKFxuICAgICAgICAgICAgICB0aGlzLnR5cGVOYW1lLFxuICAgICAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICAgICAgICBmaWVsZE5vLFxuICAgICAgICAgICAgICB3aXJlVHlwZSxcbiAgICAgICAgICAgICAgZCxcbiAgICAgICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG4gIGludGVybmFsQmluYXJ5V3JpdGUoXG4gICAgbWVzc2FnZTogVmlkZW9NZWRpYVJlcXVlc3QsXG4gICAgd3JpdGVyOiBJQmluYXJ5V3JpdGVyLFxuICAgIG9wdGlvbnM6IEJpbmFyeVdyaXRlT3B0aW9ucyxcbiAgKTogSUJpbmFyeVdyaXRlciB7XG4gICAgLyogaW50MzIgaWRlYWxfaGVpZ2h0ID0gMTsgKi9cbiAgICBpZiAobWVzc2FnZS5pZGVhbEhlaWdodCAhPT0gMClcbiAgICAgIHdyaXRlci50YWcoMSwgV2lyZVR5cGUuVmFyaW50KS5pbnQzMihtZXNzYWdlLmlkZWFsSGVpZ2h0KTtcbiAgICAvKiBpbnQzMiBpZGVhbF93aWR0aCA9IDI7ICovXG4gICAgaWYgKG1lc3NhZ2UuaWRlYWxXaWR0aCAhPT0gMClcbiAgICAgIHdyaXRlci50YWcoMiwgV2lyZVR5cGUuVmFyaW50KS5pbnQzMihtZXNzYWdlLmlkZWFsV2lkdGgpO1xuICAgIC8qIGludDMyIGlkZWFsX2ZyYW1lX3JhdGUgPSAzOyAqL1xuICAgIGlmIChtZXNzYWdlLmlkZWFsRnJhbWVSYXRlICE9PSAwKVxuICAgICAgd3JpdGVyLnRhZygzLCBXaXJlVHlwZS5WYXJpbnQpLmludDMyKG1lc3NhZ2UuaWRlYWxGcmFtZVJhdGUpO1xuICAgIGxldCB1ID0gb3B0aW9ucy53cml0ZVVua25vd25GaWVsZHM7XG4gICAgaWYgKHUgIT09IGZhbHNlKVxuICAgICAgKHUgPT0gdHJ1ZSA/IFVua25vd25GaWVsZEhhbmRsZXIub25Xcml0ZSA6IHUpKFxuICAgICAgICB0aGlzLnR5cGVOYW1lLFxuICAgICAgICBtZXNzYWdlLFxuICAgICAgICB3cml0ZXIsXG4gICAgICApO1xuICAgIHJldHVybiB3cml0ZXI7XG4gIH1cbn1cbi8qKlxuICogQGdlbmVyYXRlZCBNZXNzYWdlVHlwZSBmb3IgcHJvdG9idWYgbWVzc2FnZSBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LlZpZGVvTWVkaWFSZXF1ZXN0XG4gKi9cbmV4cG9ydCBjb25zdCBWaWRlb01lZGlhUmVxdWVzdCA9IG5ldyBWaWRlb01lZGlhUmVxdWVzdCRUeXBlKCk7XG4vLyBAZ2VuZXJhdGVkIG1lc3NhZ2UgdHlwZSB3aXRoIHJlZmxlY3Rpb24gaW5mb3JtYXRpb24sIG1heSBwcm92aWRlIHNwZWVkIG9wdGltaXplZCBtZXRob2RzXG5jbGFzcyBWaWRlb0xheWVyU2V0dGluZyRUeXBlIGV4dGVuZHMgTWVzc2FnZVR5cGU8VmlkZW9MYXllclNldHRpbmc+IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoJ3N0cmVhbS52aWRlby5zZnUuZXZlbnQuVmlkZW9MYXllclNldHRpbmcnLCBbXG4gICAgICB7IG5vOiAxLCBuYW1lOiAnbmFtZScsIGtpbmQ6ICdzY2FsYXInLCBUOiA5IC8qU2NhbGFyVHlwZS5TVFJJTkcqLyB9LFxuICAgICAgeyBubzogMiwgbmFtZTogJ2FjdGl2ZScsIGtpbmQ6ICdzY2FsYXInLCBUOiA4IC8qU2NhbGFyVHlwZS5CT09MKi8gfSxcbiAgICAgIHsgbm86IDMsIG5hbWU6ICdtYXhfYml0cmF0ZScsIGtpbmQ6ICdzY2FsYXInLCBUOiA1IC8qU2NhbGFyVHlwZS5JTlQzMiovIH0sXG4gICAgICB7XG4gICAgICAgIG5vOiA0LFxuICAgICAgICBuYW1lOiAnc2NhbGVfcmVzb2x1dGlvbl9kb3duX2J5JyxcbiAgICAgICAga2luZDogJ3NjYWxhcicsXG4gICAgICAgIFQ6IDIgLypTY2FsYXJUeXBlLkZMT0FUKi8sXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBubzogNSxcbiAgICAgICAgbmFtZTogJ3ByaW9yaXR5JyxcbiAgICAgICAga2luZDogJ2VudW0nLFxuICAgICAgICBUOiAoKSA9PiBbXG4gICAgICAgICAgJ3N0cmVhbS52aWRlby5zZnUuZXZlbnQuVmlkZW9MYXllclNldHRpbmcuUHJpb3JpdHknLFxuICAgICAgICAgIFZpZGVvTGF5ZXJTZXR0aW5nX1ByaW9yaXR5LFxuICAgICAgICAgICdQUklPUklUWV8nLFxuICAgICAgICBdLFxuICAgICAgfSxcbiAgICAgIHsgbm86IDYsIG5hbWU6ICdjb2RlYycsIGtpbmQ6ICdtZXNzYWdlJywgVDogKCkgPT4gQ29kZWMgfSxcbiAgICAgIHtcbiAgICAgICAgbm86IDcsXG4gICAgICAgIG5hbWU6ICdtYXhfZnJhbWVyYXRlJyxcbiAgICAgICAga2luZDogJ3NjYWxhcicsXG4gICAgICAgIFQ6IDEzIC8qU2NhbGFyVHlwZS5VSU5UMzIqLyxcbiAgICAgIH0sXG4gICAgXSk7XG4gIH1cbiAgY3JlYXRlKHZhbHVlPzogUGFydGlhbE1lc3NhZ2U8VmlkZW9MYXllclNldHRpbmc+KTogVmlkZW9MYXllclNldHRpbmcge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBnbG9iYWxUaGlzLk9iamVjdC5jcmVhdGUodGhpcy5tZXNzYWdlUHJvdG90eXBlISk7XG4gICAgbWVzc2FnZS5uYW1lID0gJyc7XG4gICAgbWVzc2FnZS5hY3RpdmUgPSBmYWxzZTtcbiAgICBtZXNzYWdlLm1heEJpdHJhdGUgPSAwO1xuICAgIG1lc3NhZ2Uuc2NhbGVSZXNvbHV0aW9uRG93bkJ5ID0gMDtcbiAgICBtZXNzYWdlLnByaW9yaXR5ID0gMDtcbiAgICBtZXNzYWdlLm1heEZyYW1lcmF0ZSA9IDA7XG4gICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpXG4gICAgICByZWZsZWN0aW9uTWVyZ2VQYXJ0aWFsPFZpZGVvTGF5ZXJTZXR0aW5nPih0aGlzLCBtZXNzYWdlLCB2YWx1ZSk7XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH1cbiAgaW50ZXJuYWxCaW5hcnlSZWFkKFxuICAgIHJlYWRlcjogSUJpbmFyeVJlYWRlcixcbiAgICBsZW5ndGg6IG51bWJlcixcbiAgICBvcHRpb25zOiBCaW5hcnlSZWFkT3B0aW9ucyxcbiAgICB0YXJnZXQ/OiBWaWRlb0xheWVyU2V0dGluZyxcbiAgKTogVmlkZW9MYXllclNldHRpbmcge1xuICAgIGxldCBtZXNzYWdlID0gdGFyZ2V0ID8/IHRoaXMuY3JlYXRlKCksXG4gICAgICBlbmQgPSByZWFkZXIucG9zICsgbGVuZ3RoO1xuICAgIHdoaWxlIChyZWFkZXIucG9zIDwgZW5kKSB7XG4gICAgICBsZXQgW2ZpZWxkTm8sIHdpcmVUeXBlXSA9IHJlYWRlci50YWcoKTtcbiAgICAgIHN3aXRjaCAoZmllbGRObykge1xuICAgICAgICBjYXNlIC8qIHN0cmluZyBuYW1lICovIDE6XG4gICAgICAgICAgbWVzc2FnZS5uYW1lID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIC8qIGJvb2wgYWN0aXZlICovIDI6XG4gICAgICAgICAgbWVzc2FnZS5hY3RpdmUgPSByZWFkZXIuYm9vbCgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIC8qIGludDMyIG1heF9iaXRyYXRlICovIDM6XG4gICAgICAgICAgbWVzc2FnZS5tYXhCaXRyYXRlID0gcmVhZGVyLmludDMyKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgLyogZmxvYXQgc2NhbGVfcmVzb2x1dGlvbl9kb3duX2J5ICovIDQ6XG4gICAgICAgICAgbWVzc2FnZS5zY2FsZVJlc29sdXRpb25Eb3duQnkgPSByZWFkZXIuZmxvYXQoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAvKiBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LlZpZGVvTGF5ZXJTZXR0aW5nLlByaW9yaXR5IHByaW9yaXR5ICovIDU6XG4gICAgICAgICAgbWVzc2FnZS5wcmlvcml0eSA9IHJlYWRlci5pbnQzMigpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIC8qIHN0cmVhbS52aWRlby5zZnUubW9kZWxzLkNvZGVjIGNvZGVjICovIDY6XG4gICAgICAgICAgbWVzc2FnZS5jb2RlYyA9IENvZGVjLmludGVybmFsQmluYXJ5UmVhZChcbiAgICAgICAgICAgIHJlYWRlcixcbiAgICAgICAgICAgIHJlYWRlci51aW50MzIoKSxcbiAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICBtZXNzYWdlLmNvZGVjLFxuICAgICAgICAgICk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgLyogdWludDMyIG1heF9mcmFtZXJhdGUgKi8gNzpcbiAgICAgICAgICBtZXNzYWdlLm1heEZyYW1lcmF0ZSA9IHJlYWRlci51aW50MzIoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBsZXQgdSA9IG9wdGlvbnMucmVhZFVua25vd25GaWVsZDtcbiAgICAgICAgICBpZiAodSA9PT0gJ3Rocm93JylcbiAgICAgICAgICAgIHRocm93IG5ldyBnbG9iYWxUaGlzLkVycm9yKFxuICAgICAgICAgICAgICBgVW5rbm93biBmaWVsZCAke2ZpZWxkTm99ICh3aXJlIHR5cGUgJHt3aXJlVHlwZX0pIGZvciAke3RoaXMudHlwZU5hbWV9YCxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgbGV0IGQgPSByZWFkZXIuc2tpcCh3aXJlVHlwZSk7XG4gICAgICAgICAgaWYgKHUgIT09IGZhbHNlKVxuICAgICAgICAgICAgKHUgPT09IHRydWUgPyBVbmtub3duRmllbGRIYW5kbGVyLm9uUmVhZCA6IHUpKFxuICAgICAgICAgICAgICB0aGlzLnR5cGVOYW1lLFxuICAgICAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICAgICAgICBmaWVsZE5vLFxuICAgICAgICAgICAgICB3aXJlVHlwZSxcbiAgICAgICAgICAgICAgZCxcbiAgICAgICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG4gIGludGVybmFsQmluYXJ5V3JpdGUoXG4gICAgbWVzc2FnZTogVmlkZW9MYXllclNldHRpbmcsXG4gICAgd3JpdGVyOiBJQmluYXJ5V3JpdGVyLFxuICAgIG9wdGlvbnM6IEJpbmFyeVdyaXRlT3B0aW9ucyxcbiAgKTogSUJpbmFyeVdyaXRlciB7XG4gICAgLyogc3RyaW5nIG5hbWUgPSAxOyAqL1xuICAgIGlmIChtZXNzYWdlLm5hbWUgIT09ICcnKVxuICAgICAgd3JpdGVyLnRhZygxLCBXaXJlVHlwZS5MZW5ndGhEZWxpbWl0ZWQpLnN0cmluZyhtZXNzYWdlLm5hbWUpO1xuICAgIC8qIGJvb2wgYWN0aXZlID0gMjsgKi9cbiAgICBpZiAobWVzc2FnZS5hY3RpdmUgIT09IGZhbHNlKVxuICAgICAgd3JpdGVyLnRhZygyLCBXaXJlVHlwZS5WYXJpbnQpLmJvb2wobWVzc2FnZS5hY3RpdmUpO1xuICAgIC8qIGludDMyIG1heF9iaXRyYXRlID0gMzsgKi9cbiAgICBpZiAobWVzc2FnZS5tYXhCaXRyYXRlICE9PSAwKVxuICAgICAgd3JpdGVyLnRhZygzLCBXaXJlVHlwZS5WYXJpbnQpLmludDMyKG1lc3NhZ2UubWF4Qml0cmF0ZSk7XG4gICAgLyogZmxvYXQgc2NhbGVfcmVzb2x1dGlvbl9kb3duX2J5ID0gNDsgKi9cbiAgICBpZiAobWVzc2FnZS5zY2FsZVJlc29sdXRpb25Eb3duQnkgIT09IDApXG4gICAgICB3cml0ZXIudGFnKDQsIFdpcmVUeXBlLkJpdDMyKS5mbG9hdChtZXNzYWdlLnNjYWxlUmVzb2x1dGlvbkRvd25CeSk7XG4gICAgLyogc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5WaWRlb0xheWVyU2V0dGluZy5Qcmlvcml0eSBwcmlvcml0eSA9IDU7ICovXG4gICAgaWYgKG1lc3NhZ2UucHJpb3JpdHkgIT09IDApXG4gICAgICB3cml0ZXIudGFnKDUsIFdpcmVUeXBlLlZhcmludCkuaW50MzIobWVzc2FnZS5wcmlvcml0eSk7XG4gICAgLyogc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuQ29kZWMgY29kZWMgPSA2OyAqL1xuICAgIGlmIChtZXNzYWdlLmNvZGVjKVxuICAgICAgQ29kZWMuaW50ZXJuYWxCaW5hcnlXcml0ZShcbiAgICAgICAgbWVzc2FnZS5jb2RlYyxcbiAgICAgICAgd3JpdGVyLnRhZyg2LCBXaXJlVHlwZS5MZW5ndGhEZWxpbWl0ZWQpLmZvcmsoKSxcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICkuam9pbigpO1xuICAgIC8qIHVpbnQzMiBtYXhfZnJhbWVyYXRlID0gNzsgKi9cbiAgICBpZiAobWVzc2FnZS5tYXhGcmFtZXJhdGUgIT09IDApXG4gICAgICB3cml0ZXIudGFnKDcsIFdpcmVUeXBlLlZhcmludCkudWludDMyKG1lc3NhZ2UubWF4RnJhbWVyYXRlKTtcbiAgICBsZXQgdSA9IG9wdGlvbnMud3JpdGVVbmtub3duRmllbGRzO1xuICAgIGlmICh1ICE9PSBmYWxzZSlcbiAgICAgICh1ID09IHRydWUgPyBVbmtub3duRmllbGRIYW5kbGVyLm9uV3JpdGUgOiB1KShcbiAgICAgICAgdGhpcy50eXBlTmFtZSxcbiAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgd3JpdGVyLFxuICAgICAgKTtcbiAgICByZXR1cm4gd3JpdGVyO1xuICB9XG59XG4vKipcbiAqIEBnZW5lcmF0ZWQgTWVzc2FnZVR5cGUgZm9yIHByb3RvYnVmIG1lc3NhZ2Ugc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5WaWRlb0xheWVyU2V0dGluZ1xuICovXG5leHBvcnQgY29uc3QgVmlkZW9MYXllclNldHRpbmcgPSBuZXcgVmlkZW9MYXllclNldHRpbmckVHlwZSgpO1xuLy8gQGdlbmVyYXRlZCBtZXNzYWdlIHR5cGUgd2l0aCByZWZsZWN0aW9uIGluZm9ybWF0aW9uLCBtYXkgcHJvdmlkZSBzcGVlZCBvcHRpbWl6ZWQgbWV0aG9kc1xuY2xhc3MgVmlkZW9TZW5kZXIkVHlwZSBleHRlbmRzIE1lc3NhZ2VUeXBlPFZpZGVvU2VuZGVyPiB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCdzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LlZpZGVvU2VuZGVyJywgW1xuICAgICAge1xuICAgICAgICBubzogMSxcbiAgICAgICAgbmFtZTogJ21lZGlhX3JlcXVlc3QnLFxuICAgICAgICBraW5kOiAnbWVzc2FnZScsXG4gICAgICAgIFQ6ICgpID0+IFZpZGVvTWVkaWFSZXF1ZXN0LFxuICAgICAgfSxcbiAgICAgIHsgbm86IDIsIG5hbWU6ICdjb2RlYycsIGtpbmQ6ICdtZXNzYWdlJywgVDogKCkgPT4gQ29kZWMgfSxcbiAgICAgIHtcbiAgICAgICAgbm86IDMsXG4gICAgICAgIG5hbWU6ICdsYXllcnMnLFxuICAgICAgICBraW5kOiAnbWVzc2FnZScsXG4gICAgICAgIHJlcGVhdDogMSAvKlJlcGVhdFR5cGUuUEFDS0VEKi8sXG4gICAgICAgIFQ6ICgpID0+IFZpZGVvTGF5ZXJTZXR0aW5nLFxuICAgICAgfSxcbiAgICBdKTtcbiAgfVxuICBjcmVhdGUodmFsdWU/OiBQYXJ0aWFsTWVzc2FnZTxWaWRlb1NlbmRlcj4pOiBWaWRlb1NlbmRlciB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGdsb2JhbFRoaXMuT2JqZWN0LmNyZWF0ZSh0aGlzLm1lc3NhZ2VQcm90b3R5cGUhKTtcbiAgICBtZXNzYWdlLmxheWVycyA9IFtdO1xuICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKVxuICAgICAgcmVmbGVjdGlvbk1lcmdlUGFydGlhbDxWaWRlb1NlbmRlcj4odGhpcywgbWVzc2FnZSwgdmFsdWUpO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG4gIGludGVybmFsQmluYXJ5UmVhZChcbiAgICByZWFkZXI6IElCaW5hcnlSZWFkZXIsXG4gICAgbGVuZ3RoOiBudW1iZXIsXG4gICAgb3B0aW9uczogQmluYXJ5UmVhZE9wdGlvbnMsXG4gICAgdGFyZ2V0PzogVmlkZW9TZW5kZXIsXG4gICk6IFZpZGVvU2VuZGVyIHtcbiAgICBsZXQgbWVzc2FnZSA9IHRhcmdldCA/PyB0aGlzLmNyZWF0ZSgpLFxuICAgICAgZW5kID0gcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgbGV0IFtmaWVsZE5vLCB3aXJlVHlwZV0gPSByZWFkZXIudGFnKCk7XG4gICAgICBzd2l0Y2ggKGZpZWxkTm8pIHtcbiAgICAgICAgY2FzZSAvKiBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LlZpZGVvTWVkaWFSZXF1ZXN0IG1lZGlhX3JlcXVlc3QgKi8gMTpcbiAgICAgICAgICBtZXNzYWdlLm1lZGlhUmVxdWVzdCA9IFZpZGVvTWVkaWFSZXF1ZXN0LmludGVybmFsQmluYXJ5UmVhZChcbiAgICAgICAgICAgIHJlYWRlcixcbiAgICAgICAgICAgIHJlYWRlci51aW50MzIoKSxcbiAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICBtZXNzYWdlLm1lZGlhUmVxdWVzdCxcbiAgICAgICAgICApO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIC8qIHN0cmVhbS52aWRlby5zZnUubW9kZWxzLkNvZGVjIGNvZGVjICovIDI6XG4gICAgICAgICAgbWVzc2FnZS5jb2RlYyA9IENvZGVjLmludGVybmFsQmluYXJ5UmVhZChcbiAgICAgICAgICAgIHJlYWRlcixcbiAgICAgICAgICAgIHJlYWRlci51aW50MzIoKSxcbiAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICBtZXNzYWdlLmNvZGVjLFxuICAgICAgICAgICk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgLyogcmVwZWF0ZWQgc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5WaWRlb0xheWVyU2V0dGluZyBsYXllcnMgKi8gMzpcbiAgICAgICAgICBtZXNzYWdlLmxheWVycy5wdXNoKFxuICAgICAgICAgICAgVmlkZW9MYXllclNldHRpbmcuaW50ZXJuYWxCaW5hcnlSZWFkKFxuICAgICAgICAgICAgICByZWFkZXIsXG4gICAgICAgICAgICAgIHJlYWRlci51aW50MzIoKSxcbiAgICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICAgICksXG4gICAgICAgICAgKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBsZXQgdSA9IG9wdGlvbnMucmVhZFVua25vd25GaWVsZDtcbiAgICAgICAgICBpZiAodSA9PT0gJ3Rocm93JylcbiAgICAgICAgICAgIHRocm93IG5ldyBnbG9iYWxUaGlzLkVycm9yKFxuICAgICAgICAgICAgICBgVW5rbm93biBmaWVsZCAke2ZpZWxkTm99ICh3aXJlIHR5cGUgJHt3aXJlVHlwZX0pIGZvciAke3RoaXMudHlwZU5hbWV9YCxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgbGV0IGQgPSByZWFkZXIuc2tpcCh3aXJlVHlwZSk7XG4gICAgICAgICAgaWYgKHUgIT09IGZhbHNlKVxuICAgICAgICAgICAgKHUgPT09IHRydWUgPyBVbmtub3duRmllbGRIYW5kbGVyLm9uUmVhZCA6IHUpKFxuICAgICAgICAgICAgICB0aGlzLnR5cGVOYW1lLFxuICAgICAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICAgICAgICBmaWVsZE5vLFxuICAgICAgICAgICAgICB3aXJlVHlwZSxcbiAgICAgICAgICAgICAgZCxcbiAgICAgICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG4gIGludGVybmFsQmluYXJ5V3JpdGUoXG4gICAgbWVzc2FnZTogVmlkZW9TZW5kZXIsXG4gICAgd3JpdGVyOiBJQmluYXJ5V3JpdGVyLFxuICAgIG9wdGlvbnM6IEJpbmFyeVdyaXRlT3B0aW9ucyxcbiAgKTogSUJpbmFyeVdyaXRlciB7XG4gICAgLyogc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5WaWRlb01lZGlhUmVxdWVzdCBtZWRpYV9yZXF1ZXN0ID0gMTsgKi9cbiAgICBpZiAobWVzc2FnZS5tZWRpYVJlcXVlc3QpXG4gICAgICBWaWRlb01lZGlhUmVxdWVzdC5pbnRlcm5hbEJpbmFyeVdyaXRlKFxuICAgICAgICBtZXNzYWdlLm1lZGlhUmVxdWVzdCxcbiAgICAgICAgd3JpdGVyLnRhZygxLCBXaXJlVHlwZS5MZW5ndGhEZWxpbWl0ZWQpLmZvcmsoKSxcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICkuam9pbigpO1xuICAgIC8qIHN0cmVhbS52aWRlby5zZnUubW9kZWxzLkNvZGVjIGNvZGVjID0gMjsgKi9cbiAgICBpZiAobWVzc2FnZS5jb2RlYylcbiAgICAgIENvZGVjLmludGVybmFsQmluYXJ5V3JpdGUoXG4gICAgICAgIG1lc3NhZ2UuY29kZWMsXG4gICAgICAgIHdyaXRlci50YWcoMiwgV2lyZVR5cGUuTGVuZ3RoRGVsaW1pdGVkKS5mb3JrKCksXG4gICAgICAgIG9wdGlvbnMsXG4gICAgICApLmpvaW4oKTtcbiAgICAvKiByZXBlYXRlZCBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LlZpZGVvTGF5ZXJTZXR0aW5nIGxheWVycyA9IDM7ICovXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtZXNzYWdlLmxheWVycy5sZW5ndGg7IGkrKylcbiAgICAgIFZpZGVvTGF5ZXJTZXR0aW5nLmludGVybmFsQmluYXJ5V3JpdGUoXG4gICAgICAgIG1lc3NhZ2UubGF5ZXJzW2ldLFxuICAgICAgICB3cml0ZXIudGFnKDMsIFdpcmVUeXBlLkxlbmd0aERlbGltaXRlZCkuZm9yaygpLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgKS5qb2luKCk7XG4gICAgbGV0IHUgPSBvcHRpb25zLndyaXRlVW5rbm93bkZpZWxkcztcbiAgICBpZiAodSAhPT0gZmFsc2UpXG4gICAgICAodSA9PSB0cnVlID8gVW5rbm93bkZpZWxkSGFuZGxlci5vbldyaXRlIDogdSkoXG4gICAgICAgIHRoaXMudHlwZU5hbWUsXG4gICAgICAgIG1lc3NhZ2UsXG4gICAgICAgIHdyaXRlcixcbiAgICAgICk7XG4gICAgcmV0dXJuIHdyaXRlcjtcbiAgfVxufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIE1lc3NhZ2VUeXBlIGZvciBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUuZXZlbnQuVmlkZW9TZW5kZXJcbiAqL1xuZXhwb3J0IGNvbnN0IFZpZGVvU2VuZGVyID0gbmV3IFZpZGVvU2VuZGVyJFR5cGUoKTtcbi8vIEBnZW5lcmF0ZWQgbWVzc2FnZSB0eXBlIHdpdGggcmVmbGVjdGlvbiBpbmZvcm1hdGlvbiwgbWF5IHByb3ZpZGUgc3BlZWQgb3B0aW1pemVkIG1ldGhvZHNcbmNsYXNzIENoYW5nZVB1Ymxpc2hRdWFsaXR5JFR5cGUgZXh0ZW5kcyBNZXNzYWdlVHlwZTxDaGFuZ2VQdWJsaXNoUXVhbGl0eT4ge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcignc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5DaGFuZ2VQdWJsaXNoUXVhbGl0eScsIFtcbiAgICAgIHtcbiAgICAgICAgbm86IDEsXG4gICAgICAgIG5hbWU6ICdhdWRpb19zZW5kZXJzJyxcbiAgICAgICAga2luZDogJ21lc3NhZ2UnLFxuICAgICAgICByZXBlYXQ6IDEgLypSZXBlYXRUeXBlLlBBQ0tFRCovLFxuICAgICAgICBUOiAoKSA9PiBBdWRpb1NlbmRlcixcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5vOiAyLFxuICAgICAgICBuYW1lOiAndmlkZW9fc2VuZGVycycsXG4gICAgICAgIGtpbmQ6ICdtZXNzYWdlJyxcbiAgICAgICAgcmVwZWF0OiAxIC8qUmVwZWF0VHlwZS5QQUNLRUQqLyxcbiAgICAgICAgVDogKCkgPT4gVmlkZW9TZW5kZXIsXG4gICAgICB9LFxuICAgIF0pO1xuICB9XG4gIGNyZWF0ZSh2YWx1ZT86IFBhcnRpYWxNZXNzYWdlPENoYW5nZVB1Ymxpc2hRdWFsaXR5Pik6IENoYW5nZVB1Ymxpc2hRdWFsaXR5IHtcbiAgICBjb25zdCBtZXNzYWdlID0gZ2xvYmFsVGhpcy5PYmplY3QuY3JlYXRlKHRoaXMubWVzc2FnZVByb3RvdHlwZSEpO1xuICAgIG1lc3NhZ2UuYXVkaW9TZW5kZXJzID0gW107XG4gICAgbWVzc2FnZS52aWRlb1NlbmRlcnMgPSBbXTtcbiAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZClcbiAgICAgIHJlZmxlY3Rpb25NZXJnZVBhcnRpYWw8Q2hhbmdlUHVibGlzaFF1YWxpdHk+KHRoaXMsIG1lc3NhZ2UsIHZhbHVlKTtcbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxuICBpbnRlcm5hbEJpbmFyeVJlYWQoXG4gICAgcmVhZGVyOiBJQmluYXJ5UmVhZGVyLFxuICAgIGxlbmd0aDogbnVtYmVyLFxuICAgIG9wdGlvbnM6IEJpbmFyeVJlYWRPcHRpb25zLFxuICAgIHRhcmdldD86IENoYW5nZVB1Ymxpc2hRdWFsaXR5LFxuICApOiBDaGFuZ2VQdWJsaXNoUXVhbGl0eSB7XG4gICAgbGV0IG1lc3NhZ2UgPSB0YXJnZXQgPz8gdGhpcy5jcmVhdGUoKSxcbiAgICAgIGVuZCA9IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgIGxldCBbZmllbGRObywgd2lyZVR5cGVdID0gcmVhZGVyLnRhZygpO1xuICAgICAgc3dpdGNoIChmaWVsZE5vKSB7XG4gICAgICAgIGNhc2UgLyogcmVwZWF0ZWQgc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5BdWRpb1NlbmRlciBhdWRpb19zZW5kZXJzICovIDE6XG4gICAgICAgICAgbWVzc2FnZS5hdWRpb1NlbmRlcnMucHVzaChcbiAgICAgICAgICAgIEF1ZGlvU2VuZGVyLmludGVybmFsQmluYXJ5UmVhZChyZWFkZXIsIHJlYWRlci51aW50MzIoKSwgb3B0aW9ucyksXG4gICAgICAgICAgKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAvKiByZXBlYXRlZCBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LlZpZGVvU2VuZGVyIHZpZGVvX3NlbmRlcnMgKi8gMjpcbiAgICAgICAgICBtZXNzYWdlLnZpZGVvU2VuZGVycy5wdXNoKFxuICAgICAgICAgICAgVmlkZW9TZW5kZXIuaW50ZXJuYWxCaW5hcnlSZWFkKHJlYWRlciwgcmVhZGVyLnVpbnQzMigpLCBvcHRpb25zKSxcbiAgICAgICAgICApO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGxldCB1ID0gb3B0aW9ucy5yZWFkVW5rbm93bkZpZWxkO1xuICAgICAgICAgIGlmICh1ID09PSAndGhyb3cnKVxuICAgICAgICAgICAgdGhyb3cgbmV3IGdsb2JhbFRoaXMuRXJyb3IoXG4gICAgICAgICAgICAgIGBVbmtub3duIGZpZWxkICR7ZmllbGROb30gKHdpcmUgdHlwZSAke3dpcmVUeXBlfSkgZm9yICR7dGhpcy50eXBlTmFtZX1gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICBsZXQgZCA9IHJlYWRlci5za2lwKHdpcmVUeXBlKTtcbiAgICAgICAgICBpZiAodSAhPT0gZmFsc2UpXG4gICAgICAgICAgICAodSA9PT0gdHJ1ZSA/IFVua25vd25GaWVsZEhhbmRsZXIub25SZWFkIDogdSkoXG4gICAgICAgICAgICAgIHRoaXMudHlwZU5hbWUsXG4gICAgICAgICAgICAgIG1lc3NhZ2UsXG4gICAgICAgICAgICAgIGZpZWxkTm8sXG4gICAgICAgICAgICAgIHdpcmVUeXBlLFxuICAgICAgICAgICAgICBkLFxuICAgICAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH1cbiAgaW50ZXJuYWxCaW5hcnlXcml0ZShcbiAgICBtZXNzYWdlOiBDaGFuZ2VQdWJsaXNoUXVhbGl0eSxcbiAgICB3cml0ZXI6IElCaW5hcnlXcml0ZXIsXG4gICAgb3B0aW9uczogQmluYXJ5V3JpdGVPcHRpb25zLFxuICApOiBJQmluYXJ5V3JpdGVyIHtcbiAgICAvKiByZXBlYXRlZCBzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LkF1ZGlvU2VuZGVyIGF1ZGlvX3NlbmRlcnMgPSAxOyAqL1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWVzc2FnZS5hdWRpb1NlbmRlcnMubGVuZ3RoOyBpKyspXG4gICAgICBBdWRpb1NlbmRlci5pbnRlcm5hbEJpbmFyeVdyaXRlKFxuICAgICAgICBtZXNzYWdlLmF1ZGlvU2VuZGVyc1tpXSxcbiAgICAgICAgd3JpdGVyLnRhZygxLCBXaXJlVHlwZS5MZW5ndGhEZWxpbWl0ZWQpLmZvcmsoKSxcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICkuam9pbigpO1xuICAgIC8qIHJlcGVhdGVkIHN0cmVhbS52aWRlby5zZnUuZXZlbnQuVmlkZW9TZW5kZXIgdmlkZW9fc2VuZGVycyA9IDI7ICovXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtZXNzYWdlLnZpZGVvU2VuZGVycy5sZW5ndGg7IGkrKylcbiAgICAgIFZpZGVvU2VuZGVyLmludGVybmFsQmluYXJ5V3JpdGUoXG4gICAgICAgIG1lc3NhZ2UudmlkZW9TZW5kZXJzW2ldLFxuICAgICAgICB3cml0ZXIudGFnKDIsIFdpcmVUeXBlLkxlbmd0aERlbGltaXRlZCkuZm9yaygpLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgKS5qb2luKCk7XG4gICAgbGV0IHUgPSBvcHRpb25zLndyaXRlVW5rbm93bkZpZWxkcztcbiAgICBpZiAodSAhPT0gZmFsc2UpXG4gICAgICAodSA9PSB0cnVlID8gVW5rbm93bkZpZWxkSGFuZGxlci5vbldyaXRlIDogdSkoXG4gICAgICAgIHRoaXMudHlwZU5hbWUsXG4gICAgICAgIG1lc3NhZ2UsXG4gICAgICAgIHdyaXRlcixcbiAgICAgICk7XG4gICAgcmV0dXJuIHdyaXRlcjtcbiAgfVxufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIE1lc3NhZ2VUeXBlIGZvciBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUuZXZlbnQuQ2hhbmdlUHVibGlzaFF1YWxpdHlcbiAqL1xuZXhwb3J0IGNvbnN0IENoYW5nZVB1Ymxpc2hRdWFsaXR5ID0gbmV3IENoYW5nZVB1Ymxpc2hRdWFsaXR5JFR5cGUoKTtcbi8vIEBnZW5lcmF0ZWQgbWVzc2FnZSB0eXBlIHdpdGggcmVmbGVjdGlvbiBpbmZvcm1hdGlvbiwgbWF5IHByb3ZpZGUgc3BlZWQgb3B0aW1pemVkIG1ldGhvZHNcbmNsYXNzIENhbGxHcmFudHNVcGRhdGVkJFR5cGUgZXh0ZW5kcyBNZXNzYWdlVHlwZTxDYWxsR3JhbnRzVXBkYXRlZD4ge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcignc3RyZWFtLnZpZGVvLnNmdS5ldmVudC5DYWxsR3JhbnRzVXBkYXRlZCcsIFtcbiAgICAgIHsgbm86IDEsIG5hbWU6ICdjdXJyZW50X2dyYW50cycsIGtpbmQ6ICdtZXNzYWdlJywgVDogKCkgPT4gQ2FsbEdyYW50cyB9LFxuICAgICAgeyBubzogMiwgbmFtZTogJ21lc3NhZ2UnLCBraW5kOiAnc2NhbGFyJywgVDogOSAvKlNjYWxhclR5cGUuU1RSSU5HKi8gfSxcbiAgICBdKTtcbiAgfVxuICBjcmVhdGUodmFsdWU/OiBQYXJ0aWFsTWVzc2FnZTxDYWxsR3JhbnRzVXBkYXRlZD4pOiBDYWxsR3JhbnRzVXBkYXRlZCB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGdsb2JhbFRoaXMuT2JqZWN0LmNyZWF0ZSh0aGlzLm1lc3NhZ2VQcm90b3R5cGUhKTtcbiAgICBtZXNzYWdlLm1lc3NhZ2UgPSAnJztcbiAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZClcbiAgICAgIHJlZmxlY3Rpb25NZXJnZVBhcnRpYWw8Q2FsbEdyYW50c1VwZGF0ZWQ+KHRoaXMsIG1lc3NhZ2UsIHZhbHVlKTtcbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxuICBpbnRlcm5hbEJpbmFyeVJlYWQoXG4gICAgcmVhZGVyOiBJQmluYXJ5UmVhZGVyLFxuICAgIGxlbmd0aDogbnVtYmVyLFxuICAgIG9wdGlvbnM6IEJpbmFyeVJlYWRPcHRpb25zLFxuICAgIHRhcmdldD86IENhbGxHcmFudHNVcGRhdGVkLFxuICApOiBDYWxsR3JhbnRzVXBkYXRlZCB7XG4gICAgbGV0IG1lc3NhZ2UgPSB0YXJnZXQgPz8gdGhpcy5jcmVhdGUoKSxcbiAgICAgIGVuZCA9IHJlYWRlci5wb3MgKyBsZW5ndGg7XG4gICAgd2hpbGUgKHJlYWRlci5wb3MgPCBlbmQpIHtcbiAgICAgIGxldCBbZmllbGRObywgd2lyZVR5cGVdID0gcmVhZGVyLnRhZygpO1xuICAgICAgc3dpdGNoIChmaWVsZE5vKSB7XG4gICAgICAgIGNhc2UgLyogc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuQ2FsbEdyYW50cyBjdXJyZW50X2dyYW50cyAqLyAxOlxuICAgICAgICAgIG1lc3NhZ2UuY3VycmVudEdyYW50cyA9IENhbGxHcmFudHMuaW50ZXJuYWxCaW5hcnlSZWFkKFxuICAgICAgICAgICAgcmVhZGVyLFxuICAgICAgICAgICAgcmVhZGVyLnVpbnQzMigpLFxuICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICAgIG1lc3NhZ2UuY3VycmVudEdyYW50cyxcbiAgICAgICAgICApO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIC8qIHN0cmluZyBtZXNzYWdlICovIDI6XG4gICAgICAgICAgbWVzc2FnZS5tZXNzYWdlID0gcmVhZGVyLnN0cmluZygpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGxldCB1ID0gb3B0aW9ucy5yZWFkVW5rbm93bkZpZWxkO1xuICAgICAgICAgIGlmICh1ID09PSAndGhyb3cnKVxuICAgICAgICAgICAgdGhyb3cgbmV3IGdsb2JhbFRoaXMuRXJyb3IoXG4gICAgICAgICAgICAgIGBVbmtub3duIGZpZWxkICR7ZmllbGROb30gKHdpcmUgdHlwZSAke3dpcmVUeXBlfSkgZm9yICR7dGhpcy50eXBlTmFtZX1gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICBsZXQgZCA9IHJlYWRlci5za2lwKHdpcmVUeXBlKTtcbiAgICAgICAgICBpZiAodSAhPT0gZmFsc2UpXG4gICAgICAgICAgICAodSA9PT0gdHJ1ZSA/IFVua25vd25GaWVsZEhhbmRsZXIub25SZWFkIDogdSkoXG4gICAgICAgICAgICAgIHRoaXMudHlwZU5hbWUsXG4gICAgICAgICAgICAgIG1lc3NhZ2UsXG4gICAgICAgICAgICAgIGZpZWxkTm8sXG4gICAgICAgICAgICAgIHdpcmVUeXBlLFxuICAgICAgICAgICAgICBkLFxuICAgICAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH1cbiAgaW50ZXJuYWxCaW5hcnlXcml0ZShcbiAgICBtZXNzYWdlOiBDYWxsR3JhbnRzVXBkYXRlZCxcbiAgICB3cml0ZXI6IElCaW5hcnlXcml0ZXIsXG4gICAgb3B0aW9uczogQmluYXJ5V3JpdGVPcHRpb25zLFxuICApOiBJQmluYXJ5V3JpdGVyIHtcbiAgICAvKiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5DYWxsR3JhbnRzIGN1cnJlbnRfZ3JhbnRzID0gMTsgKi9cbiAgICBpZiAobWVzc2FnZS5jdXJyZW50R3JhbnRzKVxuICAgICAgQ2FsbEdyYW50cy5pbnRlcm5hbEJpbmFyeVdyaXRlKFxuICAgICAgICBtZXNzYWdlLmN1cnJlbnRHcmFudHMsXG4gICAgICAgIHdyaXRlci50YWcoMSwgV2lyZVR5cGUuTGVuZ3RoRGVsaW1pdGVkKS5mb3JrKCksXG4gICAgICAgIG9wdGlvbnMsXG4gICAgICApLmpvaW4oKTtcbiAgICAvKiBzdHJpbmcgbWVzc2FnZSA9IDI7ICovXG4gICAgaWYgKG1lc3NhZ2UubWVzc2FnZSAhPT0gJycpXG4gICAgICB3cml0ZXIudGFnKDIsIFdpcmVUeXBlLkxlbmd0aERlbGltaXRlZCkuc3RyaW5nKG1lc3NhZ2UubWVzc2FnZSk7XG4gICAgbGV0IHUgPSBvcHRpb25zLndyaXRlVW5rbm93bkZpZWxkcztcbiAgICBpZiAodSAhPT0gZmFsc2UpXG4gICAgICAodSA9PSB0cnVlID8gVW5rbm93bkZpZWxkSGFuZGxlci5vbldyaXRlIDogdSkoXG4gICAgICAgIHRoaXMudHlwZU5hbWUsXG4gICAgICAgIG1lc3NhZ2UsXG4gICAgICAgIHdyaXRlcixcbiAgICAgICk7XG4gICAgcmV0dXJuIHdyaXRlcjtcbiAgfVxufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIE1lc3NhZ2VUeXBlIGZvciBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUuZXZlbnQuQ2FsbEdyYW50c1VwZGF0ZWRcbiAqL1xuZXhwb3J0IGNvbnN0IENhbGxHcmFudHNVcGRhdGVkID0gbmV3IENhbGxHcmFudHNVcGRhdGVkJFR5cGUoKTtcbi8vIEBnZW5lcmF0ZWQgbWVzc2FnZSB0eXBlIHdpdGggcmVmbGVjdGlvbiBpbmZvcm1hdGlvbiwgbWF5IHByb3ZpZGUgc3BlZWQgb3B0aW1pemVkIG1ldGhvZHNcbmNsYXNzIEdvQXdheSRUeXBlIGV4dGVuZHMgTWVzc2FnZVR5cGU8R29Bd2F5PiB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCdzdHJlYW0udmlkZW8uc2Z1LmV2ZW50LkdvQXdheScsIFtcbiAgICAgIHtcbiAgICAgICAgbm86IDEsXG4gICAgICAgIG5hbWU6ICdyZWFzb24nLFxuICAgICAgICBraW5kOiAnZW51bScsXG4gICAgICAgIFQ6ICgpID0+IFtcbiAgICAgICAgICAnc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuR29Bd2F5UmVhc29uJyxcbiAgICAgICAgICBHb0F3YXlSZWFzb24sXG4gICAgICAgICAgJ0dPX0FXQVlfUkVBU09OXycsXG4gICAgICAgIF0sXG4gICAgICB9LFxuICAgIF0pO1xuICB9XG4gIGNyZWF0ZSh2YWx1ZT86IFBhcnRpYWxNZXNzYWdlPEdvQXdheT4pOiBHb0F3YXkge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBnbG9iYWxUaGlzLk9iamVjdC5jcmVhdGUodGhpcy5tZXNzYWdlUHJvdG90eXBlISk7XG4gICAgbWVzc2FnZS5yZWFzb24gPSAwO1xuICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKVxuICAgICAgcmVmbGVjdGlvbk1lcmdlUGFydGlhbDxHb0F3YXk+KHRoaXMsIG1lc3NhZ2UsIHZhbHVlKTtcbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxuICBpbnRlcm5hbEJpbmFyeVJlYWQoXG4gICAgcmVhZGVyOiBJQmluYXJ5UmVhZGVyLFxuICAgIGxlbmd0aDogbnVtYmVyLFxuICAgIG9wdGlvbnM6IEJpbmFyeVJlYWRPcHRpb25zLFxuICAgIHRhcmdldD86IEdvQXdheSxcbiAgKTogR29Bd2F5IHtcbiAgICBsZXQgbWVzc2FnZSA9IHRhcmdldCA/PyB0aGlzLmNyZWF0ZSgpLFxuICAgICAgZW5kID0gcmVhZGVyLnBvcyArIGxlbmd0aDtcbiAgICB3aGlsZSAocmVhZGVyLnBvcyA8IGVuZCkge1xuICAgICAgbGV0IFtmaWVsZE5vLCB3aXJlVHlwZV0gPSByZWFkZXIudGFnKCk7XG4gICAgICBzd2l0Y2ggKGZpZWxkTm8pIHtcbiAgICAgICAgY2FzZSAvKiBzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5Hb0F3YXlSZWFzb24gcmVhc29uICovIDE6XG4gICAgICAgICAgbWVzc2FnZS5yZWFzb24gPSByZWFkZXIuaW50MzIoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBsZXQgdSA9IG9wdGlvbnMucmVhZFVua25vd25GaWVsZDtcbiAgICAgICAgICBpZiAodSA9PT0gJ3Rocm93JylcbiAgICAgICAgICAgIHRocm93IG5ldyBnbG9iYWxUaGlzLkVycm9yKFxuICAgICAgICAgICAgICBgVW5rbm93biBmaWVsZCAke2ZpZWxkTm99ICh3aXJlIHR5cGUgJHt3aXJlVHlwZX0pIGZvciAke3RoaXMudHlwZU5hbWV9YCxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgbGV0IGQgPSByZWFkZXIuc2tpcCh3aXJlVHlwZSk7XG4gICAgICAgICAgaWYgKHUgIT09IGZhbHNlKVxuICAgICAgICAgICAgKHUgPT09IHRydWUgPyBVbmtub3duRmllbGRIYW5kbGVyLm9uUmVhZCA6IHUpKFxuICAgICAgICAgICAgICB0aGlzLnR5cGVOYW1lLFxuICAgICAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICAgICAgICBmaWVsZE5vLFxuICAgICAgICAgICAgICB3aXJlVHlwZSxcbiAgICAgICAgICAgICAgZCxcbiAgICAgICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlO1xuICB9XG4gIGludGVybmFsQmluYXJ5V3JpdGUoXG4gICAgbWVzc2FnZTogR29Bd2F5LFxuICAgIHdyaXRlcjogSUJpbmFyeVdyaXRlcixcbiAgICBvcHRpb25zOiBCaW5hcnlXcml0ZU9wdGlvbnMsXG4gICk6IElCaW5hcnlXcml0ZXIge1xuICAgIC8qIHN0cmVhbS52aWRlby5zZnUubW9kZWxzLkdvQXdheVJlYXNvbiByZWFzb24gPSAxOyAqL1xuICAgIGlmIChtZXNzYWdlLnJlYXNvbiAhPT0gMClcbiAgICAgIHdyaXRlci50YWcoMSwgV2lyZVR5cGUuVmFyaW50KS5pbnQzMihtZXNzYWdlLnJlYXNvbik7XG4gICAgbGV0IHUgPSBvcHRpb25zLndyaXRlVW5rbm93bkZpZWxkcztcbiAgICBpZiAodSAhPT0gZmFsc2UpXG4gICAgICAodSA9PSB0cnVlID8gVW5rbm93bkZpZWxkSGFuZGxlci5vbldyaXRlIDogdSkoXG4gICAgICAgIHRoaXMudHlwZU5hbWUsXG4gICAgICAgIG1lc3NhZ2UsXG4gICAgICAgIHdyaXRlcixcbiAgICAgICk7XG4gICAgcmV0dXJuIHdyaXRlcjtcbiAgfVxufVxuLyoqXG4gKiBAZ2VuZXJhdGVkIE1lc3NhZ2VUeXBlIGZvciBwcm90b2J1ZiBtZXNzYWdlIHN0cmVhbS52aWRlby5zZnUuZXZlbnQuR29Bd2F5XG4gKi9cbmV4cG9ydCBjb25zdCBHb0F3YXkgPSBuZXcgR29Bd2F5JFR5cGUoKTtcbiIsImltcG9ydCB0eXBlIHtcbiAgUGFydGljaXBhbnQsXG4gIFZpZGVvRGltZW5zaW9uLFxufSBmcm9tICcuL2dlbi92aWRlby9zZnUvbW9kZWxzL21vZGVscyc7XG5pbXBvcnQgdHlwZSB7XG4gIEpvaW5DYWxsUmVxdWVzdCxcbiAgTWVtYmVyUmVzcG9uc2UsXG4gIE93bkNhcGFiaWxpdHksXG4gIFJlYWN0aW9uUmVzcG9uc2UsXG59IGZyb20gJy4vZ2VuL2Nvb3JkaW5hdG9yJztcbmltcG9ydCB0eXBlIHsgU3RyZWFtQ2xpZW50IH0gZnJvbSAnLi9jb29yZGluYXRvci9jb25uZWN0aW9uL2NsaWVudCc7XG5pbXBvcnQgdHlwZSB7IENvbXBhcmF0b3IgfSBmcm9tICcuL3NvcnRpbmcnO1xuaW1wb3J0IHR5cGUgeyBTdHJlYW1WaWRlb1dyaXRlYWJsZVN0YXRlU3RvcmUgfSBmcm9tICcuL3N0b3JlJztcbmltcG9ydCB7IEF4aW9zRXJyb3IgfSBmcm9tICdheGlvcyc7XG5cbmV4cG9ydCB0eXBlIFN0cmVhbVJlYWN0aW9uID0gUGljazxcbiAgUmVhY3Rpb25SZXNwb25zZSxcbiAgJ3R5cGUnIHwgJ2Vtb2ppX2NvZGUnIHwgJ2N1c3RvbSdcbj47XG5cbmV4cG9ydCBlbnVtIFZpc2liaWxpdHlTdGF0ZSB7XG4gIFVOS05PV04gPSAnVU5LTk9XTicsXG4gIFZJU0lCTEUgPSAnVklTSUJMRScsXG4gIElOVklTSUJMRSA9ICdJTlZJU0lCTEUnLFxufVxuXG5leHBvcnQgZW51bSBEZWJvdW5jZVR5cGUge1xuICBJTU1FRElBVEUgPSAyMCxcbiAgRkFTVCA9IDEwMCxcbiAgTUVESVVNID0gNjAwLFxuICBTTE9XID0gMTIwMCxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdHJlYW1WaWRlb1BhcnRpY2lwYW50IGV4dGVuZHMgUGFydGljaXBhbnQge1xuICAvKipcbiAgICogVGhlIHBhcnRpY2lwYW50J3MgYXVkaW8gc3RyZWFtLCBpZiB0aGV5IGFyZSBwdWJsaXNoaW5nIGF1ZGlvIGFuZFxuICAgKiB3ZSBoYXZlIHN1YnNjcmliZWQgdG8gaXQuXG4gICAqL1xuICBhdWRpb1N0cmVhbT86IE1lZGlhU3RyZWFtO1xuXG4gIC8qKlxuICAgKiBUaGUgcGFydGljaXBhbnQncyB2aWRlbyBzdHJlYW0sIGlmIHRoZXkgYXJlIHNoYXJpbmcgdGhlaXIgdmlkZW8sXG4gICAqIGFuZCB3ZSBhcmUgc3Vic2NyaWJlZCB0byBpdC5cbiAgICovXG4gIHZpZGVvU3RyZWFtPzogTWVkaWFTdHJlYW07XG5cbiAgLyoqXG4gICAqIFRoZSBwYXJ0aWNpcGFudCdzIHNjcmVlbiBzaGFyZSBzdHJlYW0sIGlmIHRoZXkgYXJlIHNoYXJpbmcgdGhlaXIgc2NyZWVuLFxuICAgKiBhbmQgd2UgYXJlIHN1YnNjcmliZWQgdG8gaXQuXG4gICAqL1xuICBzY3JlZW5TaGFyZVN0cmVhbT86IE1lZGlhU3RyZWFtO1xuXG4gIC8qKlxuICAgKiBUaGUgcGFydGljaXBhbnQncyBzY3JlZW4gYXVkaW8gc3RyZWFtLCBpZiB0aGV5IGFyZSBzaGFyaW5nIHRoZWlyIGF1ZGlvLFxuICAgKiBhbmQgd2UgYXJlIHN1YnNjcmliZWQgdG8gaXQuXG4gICAqL1xuICBzY3JlZW5TaGFyZUF1ZGlvU3RyZWFtPzogTWVkaWFTdHJlYW07XG5cbiAgLyoqXG4gICAqIFRoZSBwcmVmZXJyZWQgdmlkZW8gZGltZW5zaW9ucyBmb3IgdGhpcyBwYXJ0aWNpcGFudC5cbiAgICogU2V0IGl0IHRvIGB1bmRlZmluZWRgIHRvIHVuc3Vic2NyaWJlIGZyb20gdGhpcyBwYXJ0aWNpcGFudCdzIHZpZGVvLlxuICAgKi9cbiAgdmlkZW9EaW1lbnNpb24/OiBWaWRlb0RpbWVuc2lvbjtcblxuICAvKipcbiAgICogVGhlIHByZWZlcnJlZCBzY3JlZW4gc2hhcmUgZGltZW5zaW9ucyBmb3IgdGhpcyBwYXJ0aWNpcGFudC5cbiAgICogU2V0IGl0IHRvIGB1bmRlZmluZWRgIHRvIHVuc3Vic2NyaWJlIGZyb20gdGhpcyBwYXJ0aWNpcGFudCdzIHNjcmVlbiBzaGFyZS5cbiAgICovXG4gIHNjcmVlblNoYXJlRGltZW5zaW9uPzogVmlkZW9EaW1lbnNpb247XG5cbiAgLyoqXG4gICAqIFRydWUgaWYgdGhlIHBhcnRpY2lwYW50IGlzIHRoZSBsb2NhbCBwYXJ0aWNpcGFudC5cbiAgICovXG4gIGlzTG9jYWxQYXJ0aWNpcGFudD86IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIFRoZSBwaW4gc3RhdGUgb2YgdGhlIHBhcnRpY2lwYW50LlxuICAgKi9cbiAgcGluPzogUGFydGljaXBhbnRQaW47XG5cbiAgLyoqXG4gICAqIFRoZSBsYXN0IHJlYWN0aW9uIHRoaXMgdXNlciBoYXMgc2VudCB0byB0aGlzIGNhbGwuXG4gICAqIEludGVncmF0b3JzIGNhbiBiYXRjaC9jb2xsZWN0IHBhc3QgcmVhY3Rpb25zIGFuZCBzaG93IHRoZW0gdG8gdGhlIFVJLlxuICAgKi9cbiAgcmVhY3Rpb24/OiBTdHJlYW1SZWFjdGlvbjtcblxuICAvKipcbiAgICogVGhlIHZpc2liaWxpdHkgc3RhdGUgb2YgdGhlIHBhcnRpY2lwYW50J3MgdHJhY2tzIHdpdGhpbiBhIGRlZmluZWQgdmlld3BvcnQuXG4gICAqL1xuICB2aWV3cG9ydFZpc2liaWxpdHlTdGF0ZT86IFJlY29yZDxWaWRlb1RyYWNrVHlwZSwgVmlzaWJpbGl0eVN0YXRlPjtcbn1cblxuZXhwb3J0IHR5cGUgVmlkZW9UcmFja1R5cGUgPSAndmlkZW9UcmFjaycgfCAnc2NyZWVuU2hhcmVUcmFjayc7XG5leHBvcnQgdHlwZSBBdWRpb1RyYWNrVHlwZSA9ICdhdWRpb1RyYWNrJyB8ICdzY3JlZW5TaGFyZUF1ZGlvVHJhY2snO1xuZXhwb3J0IHR5cGUgVHJhY2tNdXRlVHlwZSA9XG4gIHwgJ2F1ZGlvJ1xuICB8ICd2aWRlbydcbiAgfCAnc2NyZWVuc2hhcmUnXG4gIHwgJ3NjcmVlbnNoYXJlX2F1ZGlvJztcblxuLyoqXG4gKiBSZXByZXNlbnRzIGEgcGFydGljaXBhbnQncyBwaW4gc3RhdGUuXG4gKi9cbmV4cG9ydCB0eXBlIFBhcnRpY2lwYW50UGluID0ge1xuICAvKipcbiAgICogU2V0IHRvIHRydWUgaWYgdGhlIHBhcnRpY2lwYW50IGlzIHBpbm5lZCBieSB0aGUgbG9jYWwgdXNlci5cbiAgICogRmFsc2UgaWYgdGhlIHBhcnRpY2lwYW50IGlzIHBpbm5lZCBzZXJ2ZXItc2lkZSwgYnkgdGhlIGNhbGwgbW9kZXJhdG9yLlxuICAgKi9cbiAgaXNMb2NhbFBpbjogYm9vbGVhbjtcblxuICAvKipcbiAgICogVGltZXN0YW1wIHdoZW4gdGhlIHBhcnRpY2lwYW50IGlzIHBpbm5lZC5cbiAgICovXG4gIHBpbm5lZEF0OiBudW1iZXI7XG59O1xuXG4vKipcbiAqIEEgcGFydGlhbCByZXByZXNlbnRhdGlvbiBvZiB0aGUgU3RyZWFtVmlkZW9QYXJ0aWNpcGFudC5cbiAqL1xuZXhwb3J0IHR5cGUgU3RyZWFtVmlkZW9QYXJ0aWNpcGFudFBhdGNoID0gUGFydGlhbDxTdHJlYW1WaWRlb1BhcnRpY2lwYW50PjtcblxuLyoqXG4gKiBBIGNvbGxlY3Rpb24gb2Yge0BsaW5rIFN0cmVhbVZpZGVvUGFydGljaXBhbnRQYXRjaH0gb3JnYW5pemVkIGJ5IHNlc3Npb25JZC5cbiAqL1xuZXhwb3J0IHR5cGUgU3RyZWFtVmlkZW9QYXJ0aWNpcGFudFBhdGNoZXMgPSB7XG4gIFtzZXNzaW9uSWQ6IHN0cmluZ106IFN0cmVhbVZpZGVvUGFydGljaXBhbnRQYXRjaDtcbn07XG5cbmV4cG9ydCB0eXBlIFN1YnNjcmlwdGlvbkNoYW5nZSA9IHtcbiAgLyoqXG4gICAqIFRoZSB2aWRlbyBkaW1lbnNpb24gdG8gcmVxdWVzdC5cbiAgICogU2V0IGl0IHRvIGB1bmRlZmluZWRgIGluIGNhc2UgeW91IHdhbnQgdG8gdW5zdWJzY3JpYmUuXG4gICAqL1xuICBkaW1lbnNpb246IFZpZGVvRGltZW5zaW9uIHwgdW5kZWZpbmVkO1xufTtcblxuZXhwb3J0IHR5cGUgU3Vic2NyaXB0aW9uQ2hhbmdlcyA9IHtcbiAgW3Nlc3Npb25JZDogc3RyaW5nXTogU3Vic2NyaXB0aW9uQ2hhbmdlO1xufTtcblxuZXhwb3J0IHR5cGUgUHVibGlzaE9wdGlvbnMgPSB7XG4gIHByZWZlcnJlZENvZGVjPzogc3RyaW5nIHwgbnVsbDtcbiAgc2NyZWVuU2hhcmVTZXR0aW5ncz86IFNjcmVlblNoYXJlU2V0dGluZ3M7XG59O1xuXG5leHBvcnQgdHlwZSBTY3JlZW5TaGFyZVNldHRpbmdzID0ge1xuICAvKipcbiAgICogTGltaXRzIHRoZSBtYXhpbXVtIGZyYW1lcmF0ZSAoaW4gZnJhbWVzIHBlciBzZWNvbmQpIG9mIHRoZSBzY3JlZW4gc2hhcmUuXG4gICAqIERlZmF1bHRzIHRvIDMwLlxuICAgKi9cbiAgbWF4RnJhbWVyYXRlPzogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBMaW1pdHMgdGhlIG1heGltdW0gYml0cmF0ZSAoaW4gYml0cyBwZXIgc2Vjb25kKSBvZiB0aGUgc2NyZWVuIHNoYXJlLlxuICAgKiBEZWZhdWx0cyB0byAzMDAwMDAwICgzTWJwcykuXG4gICAqL1xuICBtYXhCaXRyYXRlPzogbnVtYmVyO1xufTtcblxuZXhwb3J0IHR5cGUgQ2FsbExlYXZlT3B0aW9ucyA9IHtcbiAgLyoqXG4gICAqIElmIHRydWUsIHRoZSBjYWxsZXIgd2lsbCBnZXQgYSBgY2FsbC5yZWplY3RlZGAgZXZlbnQuXG4gICAqIEhhcyBhbiBlZmZlY3Qgb25seSBpZiB0aGUgY2FsbCBpcyBpbiB0aGUgYHJpbmdpbmdgIHN0YXRlLlxuICAgKlxuICAgKiBAZGVmYXVsdCBgZmFsc2VgLlxuICAgKi9cbiAgcmVqZWN0PzogYm9vbGVhbjtcbn07XG5cbi8qKlxuICogVGhlIG9wdGlvbnMgdG8gcGFzcyB0byB7QGxpbmsgQ2FsbH0gY29uc3RydWN0b3IuXG4gKi9cbmV4cG9ydCB0eXBlIENhbGxDb25zdHJ1Y3RvciA9IHtcbiAgLyoqXG4gICAqIFRoZSBzdHJlYW1DbGllbnQgaW5zdGFuY2UgdG8gdXNlLlxuICAgKi9cbiAgc3RyZWFtQ2xpZW50OiBTdHJlYW1DbGllbnQ7XG5cbiAgLyoqXG4gICAqIFRoZSBDYWxsIHR5cGUuXG4gICAqL1xuICB0eXBlOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSBDYWxsIElELlxuICAgKi9cbiAgaWQ6IHN0cmluZztcblxuICAvKipcbiAgICogQW4gb3B0aW9uYWwgbGlzdCBvZiB7QGxpbmsgTWVtYmVyUmVzcG9uc2V9IGZyb20gdGhlIGJhY2tlbmQuXG4gICAqIElmIHByb3ZpZGVkLCB0aGUgY2FsbCB3aWxsIGJlIGluaXRpYWxpemVkIHdpdGggdGhlIGRhdGEgZnJvbSB0aGlzIG9iamVjdC5cbiAgICogVGhpcyBpcyB1c2VmdWwgd2hlbiBpbml0aWFsaXppbmcgYSBuZXcgXCJwZW5kaW5nIGNhbGxcIiBmcm9tIGFuIGV2ZW50LlxuICAgKi9cbiAgbWVtYmVycz86IE1lbWJlclJlc3BvbnNlW107XG5cbiAgLyoqXG4gICAqIEFuIG9wdGlvbmFsIGxpc3Qgb2Yge0BsaW5rIE93bkNhcGFiaWxpdHl9IGNvbWluZyBmcm9tIHRoZSBiYWNrZWQuXG4gICAqIElmIHByb3ZpZGVkLCB0aGUgY2FsbCB3aWxsIGJlIGluaXRpYWxpemVkIHdpdGggdGhlIGRhdGEgZnJvbSB0aGlzIG9iamVjdC5cbiAgICogVGhpcyBpcyB1c2VmdWwgd2hlbiBpbml0aWFsaXppbmcgYSBuZXcgXCJwZW5kaW5nIGNhbGxcIiBmcm9tIGFuIGV2ZW50LlxuICAgKi9cbiAgb3duQ2FwYWJpbGl0aWVzPzogT3duQ2FwYWJpbGl0eVtdO1xuXG4gIC8qKlxuICAgKiBGbGFncyB0aGUgY2FsbCBhcyBhIHJpbmdpbmcgY2FsbC5cbiAgICogQGRlZmF1bHQgZmFsc2VcbiAgICovXG4gIHJpbmdpbmc/OiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBTZXQgdG8gdHJ1ZSBpZiB0aGlzIGNhbGwgaW5zdGFuY2Ugc2hvdWxkIHJlY2VpdmUgdXBkYXRlcyBmcm9tIHRoZSBiYWNrZW5kLlxuICAgKlxuICAgKiBAZGVmYXVsdCBmYWxzZS5cbiAgICovXG4gIHdhdGNoaW5nPzogYm9vbGVhbjtcblxuICAvKipcbiAgICogVGhlIGRlZmF1bHQgY29tcGFyYXRvciB0byB1c2Ugd2hlbiBzb3J0aW5nIHBhcnRpY2lwYW50cy5cbiAgICovXG4gIHNvcnRQYXJ0aWNpcGFudHNCeT86IENvbXBhcmF0b3I8U3RyZWFtVmlkZW9QYXJ0aWNpcGFudD47XG5cbiAgLyoqXG4gICAqIFRoZSBzdGF0ZSBzdG9yZSBvZiB0aGUgY2xpZW50XG4gICAqL1xuICBjbGllbnRTdG9yZTogU3RyZWFtVmlkZW9Xcml0ZWFibGVTdGF0ZVN0b3JlO1xufTtcblxuLyoqXG4gKiBUaGUgb3B0aW9ucyB0byBwYXNzIHRvIHtAbGluayBDYWxsLmpvaW59IG1ldGhvZC5cbiAqL1xuZXhwb3J0IHR5cGUgSm9pbkNhbGxEYXRhID0gT21pdDxKb2luQ2FsbFJlcXVlc3QsICdsb2NhdGlvbic+O1xuZXhwb3J0IHsgQXhpb3NFcnJvciB9O1xuIiwiLyogZXNsaW50LWRpc2FibGUgKi9cbi8vIEBnZW5lcmF0ZWQgYnkgcHJvdG9idWYtdHMgMi45LjMgd2l0aCBwYXJhbWV0ZXIgbG9uZ190eXBlX3N0cmluZyxjbGllbnRfZ2VuZXJpYyxzZXJ2ZXJfbm9uZSxlc2xpbnRfZGlzYWJsZVxuLy8gQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIGZpbGUgXCJ2aWRlby9zZnUvc2lnbmFsX3JwYy9zaWduYWwucHJvdG9cIiAocGFja2FnZSBcInN0cmVhbS52aWRlby5zZnUuc2lnbmFsXCIsIHN5bnRheCBwcm90bzMpXG4vLyB0c2xpbnQ6ZGlzYWJsZVxuaW1wb3J0IHR5cGUge1xuICBScGNPcHRpb25zLFxuICBScGNUcmFuc3BvcnQsXG4gIFNlcnZpY2VJbmZvLFxuICBVbmFyeUNhbGwsXG59IGZyb20gJ0Bwcm90b2J1Zi10cy9ydW50aW1lLXJwYyc7XG5pbXBvcnQgeyBzdGFja0ludGVyY2VwdCB9IGZyb20gJ0Bwcm90b2J1Zi10cy9ydW50aW1lLXJwYyc7XG5pbXBvcnQgdHlwZSB7XG4gIElDRVJlc3RhcnRSZXF1ZXN0LFxuICBJQ0VSZXN0YXJ0UmVzcG9uc2UsXG4gIElDRVRyaWNrbGVSZXNwb25zZSxcbiAgU2VuZEFuc3dlclJlcXVlc3QsXG4gIFNlbmRBbnN3ZXJSZXNwb25zZSxcbiAgU2V0UHVibGlzaGVyUmVxdWVzdCxcbiAgU2V0UHVibGlzaGVyUmVzcG9uc2UsXG4gIFVwZGF0ZU11dGVTdGF0ZXNSZXF1ZXN0LFxuICBVcGRhdGVNdXRlU3RhdGVzUmVzcG9uc2UsXG4gIFVwZGF0ZVN1YnNjcmlwdGlvbnNSZXF1ZXN0LFxuICBVcGRhdGVTdWJzY3JpcHRpb25zUmVzcG9uc2UsXG59IGZyb20gJy4vc2lnbmFsJztcbmltcG9ydCB7IFNpZ25hbFNlcnZlciB9IGZyb20gJy4vc2lnbmFsJztcbmltcG9ydCB0eXBlIHsgSUNFVHJpY2tsZSB9IGZyb20gJy4uL21vZGVscy9tb2RlbHMnO1xuXG4vKipcbiAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBzZXJ2aWNlIHN0cmVhbS52aWRlby5zZnUuc2lnbmFsLlNpZ25hbFNlcnZlclxuICovXG5leHBvcnQgaW50ZXJmYWNlIElTaWduYWxTZXJ2ZXJDbGllbnQge1xuICAvKipcbiAgICogU2V0UHVibGlzaGVyIHNlbmRzIHRoZSBXZWJSVEMgb2ZmZXIgZm9yIHRoZSBwZWVyIGNvbm5lY3Rpb24gdXNlZCB0byBwdWJsaXNoIEEvVlxuICAgKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgcnBjOiBTZXRQdWJsaXNoZXIoc3RyZWFtLnZpZGVvLnNmdS5zaWduYWwuU2V0UHVibGlzaGVyUmVxdWVzdCkgcmV0dXJucyAoc3RyZWFtLnZpZGVvLnNmdS5zaWduYWwuU2V0UHVibGlzaGVyUmVzcG9uc2UpO1xuICAgKi9cbiAgc2V0UHVibGlzaGVyKFxuICAgIGlucHV0OiBTZXRQdWJsaXNoZXJSZXF1ZXN0LFxuICAgIG9wdGlvbnM/OiBScGNPcHRpb25zLFxuICApOiBVbmFyeUNhbGw8U2V0UHVibGlzaGVyUmVxdWVzdCwgU2V0UHVibGlzaGVyUmVzcG9uc2U+O1xuICAvKipcbiAgICogYW5zd2VyIGlzIHNlbnQgYnkgdGhlIGNsaWVudCB0byB0aGUgU0ZVIGFmdGVyIHJlY2VpdmluZyBhIHN1YnNjcmliZXJfb2ZmZXIuXG4gICAqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBycGM6IFNlbmRBbnN3ZXIoc3RyZWFtLnZpZGVvLnNmdS5zaWduYWwuU2VuZEFuc3dlclJlcXVlc3QpIHJldHVybnMgKHN0cmVhbS52aWRlby5zZnUuc2lnbmFsLlNlbmRBbnN3ZXJSZXNwb25zZSk7XG4gICAqL1xuICBzZW5kQW5zd2VyKFxuICAgIGlucHV0OiBTZW5kQW5zd2VyUmVxdWVzdCxcbiAgICBvcHRpb25zPzogUnBjT3B0aW9ucyxcbiAgKTogVW5hcnlDYWxsPFNlbmRBbnN3ZXJSZXF1ZXN0LCBTZW5kQW5zd2VyUmVzcG9uc2U+O1xuICAvKipcbiAgICogU2VuZElDRUNhbmRpZGF0ZSBzZW5kcyBhbiBJQ0UgY2FuZGlkYXRlIHRvIHRoZSBjbGllbnRcbiAgICpcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIHJwYzogSWNlVHJpY2tsZShzdHJlYW0udmlkZW8uc2Z1Lm1vZGVscy5JQ0VUcmlja2xlKSByZXR1cm5zIChzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5JQ0VUcmlja2xlUmVzcG9uc2UpO1xuICAgKi9cbiAgaWNlVHJpY2tsZShcbiAgICBpbnB1dDogSUNFVHJpY2tsZSxcbiAgICBvcHRpb25zPzogUnBjT3B0aW9ucyxcbiAgKTogVW5hcnlDYWxsPElDRVRyaWNrbGUsIElDRVRyaWNrbGVSZXNwb25zZT47XG4gIC8qKlxuICAgKiBVcGRhdGVTdWJzY3JpYmVycyBpcyB1c2VkIHRvIG5vdGlmeSB0aGUgU0ZVIGFib3V0IHRoZSBsaXN0IG9mIHZpZGVvIHN1YnNjcmlwdGlvbnNcbiAgICogVE9ETzogc3luYyBzdWJzY3JpcHRpb25zIGJhc2VkIG9uIHRoaXMgKyB1cGRhdGUgdHJhY2tzIHVzaW5nIHRoZSBkaW1lbnNpb24gaW5mbyBzZW50IGJ5IHRoZSB1c2VyXG4gICAqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBycGM6IFVwZGF0ZVN1YnNjcmlwdGlvbnMoc3RyZWFtLnZpZGVvLnNmdS5zaWduYWwuVXBkYXRlU3Vic2NyaXB0aW9uc1JlcXVlc3QpIHJldHVybnMgKHN0cmVhbS52aWRlby5zZnUuc2lnbmFsLlVwZGF0ZVN1YnNjcmlwdGlvbnNSZXNwb25zZSk7XG4gICAqL1xuICB1cGRhdGVTdWJzY3JpcHRpb25zKFxuICAgIGlucHV0OiBVcGRhdGVTdWJzY3JpcHRpb25zUmVxdWVzdCxcbiAgICBvcHRpb25zPzogUnBjT3B0aW9ucyxcbiAgKTogVW5hcnlDYWxsPFVwZGF0ZVN1YnNjcmlwdGlvbnNSZXF1ZXN0LCBVcGRhdGVTdWJzY3JpcHRpb25zUmVzcG9uc2U+O1xuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIHJwYzogVXBkYXRlTXV0ZVN0YXRlcyhzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5VcGRhdGVNdXRlU3RhdGVzUmVxdWVzdCkgcmV0dXJucyAoc3RyZWFtLnZpZGVvLnNmdS5zaWduYWwuVXBkYXRlTXV0ZVN0YXRlc1Jlc3BvbnNlKTtcbiAgICovXG4gIHVwZGF0ZU11dGVTdGF0ZXMoXG4gICAgaW5wdXQ6IFVwZGF0ZU11dGVTdGF0ZXNSZXF1ZXN0LFxuICAgIG9wdGlvbnM/OiBScGNPcHRpb25zLFxuICApOiBVbmFyeUNhbGw8VXBkYXRlTXV0ZVN0YXRlc1JlcXVlc3QsIFVwZGF0ZU11dGVTdGF0ZXNSZXNwb25zZT47XG4gIC8qKlxuICAgKiBAZ2VuZXJhdGVkIGZyb20gcHJvdG9idWYgcnBjOiBJY2VSZXN0YXJ0KHN0cmVhbS52aWRlby5zZnUuc2lnbmFsLklDRVJlc3RhcnRSZXF1ZXN0KSByZXR1cm5zIChzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5JQ0VSZXN0YXJ0UmVzcG9uc2UpO1xuICAgKi9cbiAgaWNlUmVzdGFydChcbiAgICBpbnB1dDogSUNFUmVzdGFydFJlcXVlc3QsXG4gICAgb3B0aW9ucz86IFJwY09wdGlvbnMsXG4gICk6IFVuYXJ5Q2FsbDxJQ0VSZXN0YXJ0UmVxdWVzdCwgSUNFUmVzdGFydFJlc3BvbnNlPjtcbn1cbi8qKlxuICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIHNlcnZpY2Ugc3RyZWFtLnZpZGVvLnNmdS5zaWduYWwuU2lnbmFsU2VydmVyXG4gKi9cbmV4cG9ydCBjbGFzcyBTaWduYWxTZXJ2ZXJDbGllbnQgaW1wbGVtZW50cyBJU2lnbmFsU2VydmVyQ2xpZW50LCBTZXJ2aWNlSW5mbyB7XG4gIHR5cGVOYW1lID0gU2lnbmFsU2VydmVyLnR5cGVOYW1lO1xuICBtZXRob2RzID0gU2lnbmFsU2VydmVyLm1ldGhvZHM7XG4gIG9wdGlvbnMgPSBTaWduYWxTZXJ2ZXIub3B0aW9ucztcbiAgY29uc3RydWN0b3IocHJpdmF0ZSByZWFkb25seSBfdHJhbnNwb3J0OiBScGNUcmFuc3BvcnQpIHt9XG4gIC8qKlxuICAgKiBTZXRQdWJsaXNoZXIgc2VuZHMgdGhlIFdlYlJUQyBvZmZlciBmb3IgdGhlIHBlZXIgY29ubmVjdGlvbiB1c2VkIHRvIHB1Ymxpc2ggQS9WXG4gICAqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBycGM6IFNldFB1Ymxpc2hlcihzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5TZXRQdWJsaXNoZXJSZXF1ZXN0KSByZXR1cm5zIChzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5TZXRQdWJsaXNoZXJSZXNwb25zZSk7XG4gICAqL1xuICBzZXRQdWJsaXNoZXIoXG4gICAgaW5wdXQ6IFNldFB1Ymxpc2hlclJlcXVlc3QsXG4gICAgb3B0aW9ucz86IFJwY09wdGlvbnMsXG4gICk6IFVuYXJ5Q2FsbDxTZXRQdWJsaXNoZXJSZXF1ZXN0LCBTZXRQdWJsaXNoZXJSZXNwb25zZT4ge1xuICAgIGNvbnN0IG1ldGhvZCA9IHRoaXMubWV0aG9kc1swXSxcbiAgICAgIG9wdCA9IHRoaXMuX3RyYW5zcG9ydC5tZXJnZU9wdGlvbnMob3B0aW9ucyk7XG4gICAgcmV0dXJuIHN0YWNrSW50ZXJjZXB0PFNldFB1Ymxpc2hlclJlcXVlc3QsIFNldFB1Ymxpc2hlclJlc3BvbnNlPihcbiAgICAgICd1bmFyeScsXG4gICAgICB0aGlzLl90cmFuc3BvcnQsXG4gICAgICBtZXRob2QsXG4gICAgICBvcHQsXG4gICAgICBpbnB1dCxcbiAgICApO1xuICB9XG4gIC8qKlxuICAgKiBhbnN3ZXIgaXMgc2VudCBieSB0aGUgY2xpZW50IHRvIHRoZSBTRlUgYWZ0ZXIgcmVjZWl2aW5nIGEgc3Vic2NyaWJlcl9vZmZlci5cbiAgICpcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIHJwYzogU2VuZEFuc3dlcihzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5TZW5kQW5zd2VyUmVxdWVzdCkgcmV0dXJucyAoc3RyZWFtLnZpZGVvLnNmdS5zaWduYWwuU2VuZEFuc3dlclJlc3BvbnNlKTtcbiAgICovXG4gIHNlbmRBbnN3ZXIoXG4gICAgaW5wdXQ6IFNlbmRBbnN3ZXJSZXF1ZXN0LFxuICAgIG9wdGlvbnM/OiBScGNPcHRpb25zLFxuICApOiBVbmFyeUNhbGw8U2VuZEFuc3dlclJlcXVlc3QsIFNlbmRBbnN3ZXJSZXNwb25zZT4ge1xuICAgIGNvbnN0IG1ldGhvZCA9IHRoaXMubWV0aG9kc1sxXSxcbiAgICAgIG9wdCA9IHRoaXMuX3RyYW5zcG9ydC5tZXJnZU9wdGlvbnMob3B0aW9ucyk7XG4gICAgcmV0dXJuIHN0YWNrSW50ZXJjZXB0PFNlbmRBbnN3ZXJSZXF1ZXN0LCBTZW5kQW5zd2VyUmVzcG9uc2U+KFxuICAgICAgJ3VuYXJ5JyxcbiAgICAgIHRoaXMuX3RyYW5zcG9ydCxcbiAgICAgIG1ldGhvZCxcbiAgICAgIG9wdCxcbiAgICAgIGlucHV0LFxuICAgICk7XG4gIH1cbiAgLyoqXG4gICAqIFNlbmRJQ0VDYW5kaWRhdGUgc2VuZHMgYW4gSUNFIGNhbmRpZGF0ZSB0byB0aGUgY2xpZW50XG4gICAqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBycGM6IEljZVRyaWNrbGUoc3RyZWFtLnZpZGVvLnNmdS5tb2RlbHMuSUNFVHJpY2tsZSkgcmV0dXJucyAoc3RyZWFtLnZpZGVvLnNmdS5zaWduYWwuSUNFVHJpY2tsZVJlc3BvbnNlKTtcbiAgICovXG4gIGljZVRyaWNrbGUoXG4gICAgaW5wdXQ6IElDRVRyaWNrbGUsXG4gICAgb3B0aW9ucz86IFJwY09wdGlvbnMsXG4gICk6IFVuYXJ5Q2FsbDxJQ0VUcmlja2xlLCBJQ0VUcmlja2xlUmVzcG9uc2U+IHtcbiAgICBjb25zdCBtZXRob2QgPSB0aGlzLm1ldGhvZHNbMl0sXG4gICAgICBvcHQgPSB0aGlzLl90cmFuc3BvcnQubWVyZ2VPcHRpb25zKG9wdGlvbnMpO1xuICAgIHJldHVybiBzdGFja0ludGVyY2VwdDxJQ0VUcmlja2xlLCBJQ0VUcmlja2xlUmVzcG9uc2U+KFxuICAgICAgJ3VuYXJ5JyxcbiAgICAgIHRoaXMuX3RyYW5zcG9ydCxcbiAgICAgIG1ldGhvZCxcbiAgICAgIG9wdCxcbiAgICAgIGlucHV0LFxuICAgICk7XG4gIH1cbiAgLyoqXG4gICAqIFVwZGF0ZVN1YnNjcmliZXJzIGlzIHVzZWQgdG8gbm90aWZ5IHRoZSBTRlUgYWJvdXQgdGhlIGxpc3Qgb2YgdmlkZW8gc3Vic2NyaXB0aW9uc1xuICAgKiBUT0RPOiBzeW5jIHN1YnNjcmlwdGlvbnMgYmFzZWQgb24gdGhpcyArIHVwZGF0ZSB0cmFja3MgdXNpbmcgdGhlIGRpbWVuc2lvbiBpbmZvIHNlbnQgYnkgdGhlIHVzZXJcbiAgICpcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIHJwYzogVXBkYXRlU3Vic2NyaXB0aW9ucyhzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5VcGRhdGVTdWJzY3JpcHRpb25zUmVxdWVzdCkgcmV0dXJucyAoc3RyZWFtLnZpZGVvLnNmdS5zaWduYWwuVXBkYXRlU3Vic2NyaXB0aW9uc1Jlc3BvbnNlKTtcbiAgICovXG4gIHVwZGF0ZVN1YnNjcmlwdGlvbnMoXG4gICAgaW5wdXQ6IFVwZGF0ZVN1YnNjcmlwdGlvbnNSZXF1ZXN0LFxuICAgIG9wdGlvbnM/OiBScGNPcHRpb25zLFxuICApOiBVbmFyeUNhbGw8VXBkYXRlU3Vic2NyaXB0aW9uc1JlcXVlc3QsIFVwZGF0ZVN1YnNjcmlwdGlvbnNSZXNwb25zZT4ge1xuICAgIGNvbnN0IG1ldGhvZCA9IHRoaXMubWV0aG9kc1szXSxcbiAgICAgIG9wdCA9IHRoaXMuX3RyYW5zcG9ydC5tZXJnZU9wdGlvbnMob3B0aW9ucyk7XG4gICAgcmV0dXJuIHN0YWNrSW50ZXJjZXB0PFxuICAgICAgVXBkYXRlU3Vic2NyaXB0aW9uc1JlcXVlc3QsXG4gICAgICBVcGRhdGVTdWJzY3JpcHRpb25zUmVzcG9uc2VcbiAgICA+KCd1bmFyeScsIHRoaXMuX3RyYW5zcG9ydCwgbWV0aG9kLCBvcHQsIGlucHV0KTtcbiAgfVxuICAvKipcbiAgICogQGdlbmVyYXRlZCBmcm9tIHByb3RvYnVmIHJwYzogVXBkYXRlTXV0ZVN0YXRlcyhzdHJlYW0udmlkZW8uc2Z1LnNpZ25hbC5VcGRhdGVNdXRlU3RhdGVzUmVxdWVzdCkgcmV0dXJucyAoc3RyZWFtLnZpZGVvLnNmdS5zaWduYWwuVXBkYXRlTXV0ZVN0YXRlc1Jlc3BvbnNlKTtcbiAgICovXG4gIHVwZGF0ZU11dGVTdGF0ZXMoXG4gICAgaW5wdXQ6IFVwZGF0ZU11dGVTdGF0ZXNSZXF1ZXN0LFxuICAgIG9wdGlvbnM/OiBScGNPcHRpb25zLFxuICApOiBVbmFyeUNhbGw8VXBkYXRlTXV0ZVN0YXRlc1JlcXVlc3QsIFVwZGF0ZU11dGVTdGF0ZXNSZXNwb25zZT4ge1xuICAgIGNvbnN0IG1ldGhvZCA9IHRoaXMubWV0aG9kc1s0XSxcbiAgICAgIG9wdCA9IHRoaXMuX3RyYW5zcG9ydC5tZXJnZU9wdGlvbnMob3B0aW9ucyk7XG4gICAgcmV0dXJuIHN0YWNrSW50ZXJjZXB0PFVwZGF0ZU11dGVTdGF0ZXNSZXF1ZXN0LCBVcGRhdGVNdXRlU3RhdGVzUmVzcG9uc2U+KFxuICAgICAgJ3VuYXJ5JyxcbiAgICAgIHRoaXMuX3RyYW5zcG9ydCxcbiAgICAgIG1ldGhvZCxcbiAgICAgIG9wdCxcbiAgICAgIGlucHV0LFxuICAgICk7XG4gIH1cbiAgLyoqXG4gICAqIEBnZW5lcmF0ZWQgZnJvbSBwcm90b2J1ZiBycGM6IEljZVJlc3RhcnQoc3RyZWFtLnZpZGVvLnNmdS5zaWduYWwuSUNFUmVzdGFydFJlcXVlc3QpIHJldHVybnMgKHN0cmVhbS52aWRlby5zZnUuc2lnbmFsLklDRVJlc3RhcnRSZXNwb25zZSk7XG4gICAqL1xuICBpY2VSZXN0YXJ0KFxuICAgIGlucHV0OiBJQ0VSZXN0YXJ0UmVxdWVzdCxcbiAgICBvcHRpb25zPzogUnBjT3B0aW9ucyxcbiAgKTogVW5hcnlDYWxsPElDRVJlc3RhcnRSZXF1ZXN0LCBJQ0VSZXN0YXJ0UmVzcG9uc2U+IHtcbiAgICBjb25zdCBtZXRob2QgPSB0aGlzLm1ldGhvZHNbNV0sXG4gICAgICBvcHQgPSB0aGlzLl90cmFuc3BvcnQubWVyZ2VPcHRpb25zKG9wdGlvbnMpO1xuICAgIHJldHVybiBzdGFja0ludGVyY2VwdDxJQ0VSZXN0YXJ0UmVxdWVzdCwgSUNFUmVzdGFydFJlc3BvbnNlPihcbiAgICAgICd1bmFyeScsXG4gICAgICB0aGlzLl90cmFuc3BvcnQsXG4gICAgICBtZXRob2QsXG4gICAgICBvcHQsXG4gICAgICBpbnB1dCxcbiAgICApO1xuICB9XG59XG4iLCJpbXBvcnQge1xuICBNZXRob2RJbmZvLFxuICBOZXh0VW5hcnlGbixcbiAgUnBjSW50ZXJjZXB0b3IsXG4gIFJwY09wdGlvbnMsXG4gIFVuYXJ5Q2FsbCxcbn0gZnJvbSAnQHByb3RvYnVmLXRzL3J1bnRpbWUtcnBjJztcbmltcG9ydCB7XG4gIFR3aXJwRmV0Y2hUcmFuc3BvcnQsXG4gIFR3aXJwT3B0aW9ucyxcbn0gZnJvbSAnQHByb3RvYnVmLXRzL3R3aXJwLXRyYW5zcG9ydCc7XG5pbXBvcnQgeyBTaWduYWxTZXJ2ZXJDbGllbnQgfSBmcm9tICcuLi9nZW4vdmlkZW8vc2Z1L3NpZ25hbF9ycGMvc2lnbmFsLmNsaWVudCc7XG5cbmNvbnN0IGRlZmF1bHRPcHRpb25zOiBUd2lycE9wdGlvbnMgPSB7XG4gIGJhc2VVcmw6ICcnLFxuICBzZW5kSnNvbjogdHJ1ZSxcbiAgdGltZW91dDogNSAqIDEwMDAsIC8vIG1zLlxuICBqc29uT3B0aW9uczoge1xuICAgIGlnbm9yZVVua25vd25GaWVsZHM6IHRydWUsXG4gIH0sXG59O1xuXG5leHBvcnQgY29uc3Qgd2l0aEhlYWRlcnMgPSAoXG4gIGhlYWRlcnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4sXG4pOiBScGNJbnRlcmNlcHRvciA9PiB7XG4gIHJldHVybiB7XG4gICAgaW50ZXJjZXB0VW5hcnkoXG4gICAgICBuZXh0OiBOZXh0VW5hcnlGbixcbiAgICAgIG1ldGhvZDogTWV0aG9kSW5mbyxcbiAgICAgIGlucHV0OiBvYmplY3QsXG4gICAgICBvcHRpb25zOiBScGNPcHRpb25zLFxuICAgICk6IFVuYXJ5Q2FsbCB7XG4gICAgICBvcHRpb25zLm1ldGEgPSB7IC4uLm9wdGlvbnMubWV0YSwgLi4uaGVhZGVycyB9O1xuICAgICAgcmV0dXJuIG5leHQobWV0aG9kLCBpbnB1dCwgb3B0aW9ucyk7XG4gICAgfSxcbiAgfTtcbn07XG5cbi8qKlxuICogQ3JlYXRlcyBuZXcgU2lnbmFsU2VydmVyQ2xpZW50IGluc3RhbmNlLlxuICpcbiAqIEBwYXJhbSBvcHRpb25zIHRoZSB0d2lycCBvcHRpb25zLlxuICovXG5leHBvcnQgY29uc3QgY3JlYXRlU2lnbmFsQ2xpZW50ID0gKG9wdGlvbnM/OiBUd2lycE9wdGlvbnMpID0+IHtcbiAgY29uc3QgdHJhbnNwb3J0ID0gbmV3IFR3aXJwRmV0Y2hUcmFuc3BvcnQoe1xuICAgIC4uLmRlZmF1bHRPcHRpb25zLFxuICAgIC4uLm9wdGlvbnMsXG4gIH0pO1xuXG4gIHJldHVybiBuZXcgU2lnbmFsU2VydmVyQ2xpZW50KHRyYW5zcG9ydCk7XG59O1xuIiwiLyoqXG4gKiBDaGVja3Mgd2hldGhlciB3ZSBhcmUgdXNpbmcgUmVhY3QgTmF0aXZlXG4gKi9cbmV4cG9ydCBjb25zdCBpc1JlYWN0TmF0aXZlID0gKCkgPT4ge1xuICBpZiAodHlwZW9mIG5hdmlnYXRvciA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybiBmYWxzZTtcbiAgcmV0dXJuIG5hdmlnYXRvci5wcm9kdWN0Py50b0xvd2VyQ2FzZSgpID09PSAncmVhY3RuYXRpdmUnO1xufTtcbiIsImltcG9ydCB7IExvZ2dlciwgTG9nTGV2ZWwgfSBmcm9tICcuL2Nvb3JkaW5hdG9yL2Nvbm5lY3Rpb24vdHlwZXMnO1xuaW1wb3J0IHsgaXNSZWFjdE5hdGl2ZSB9IGZyb20gJy4vaGVscGVycy9wbGF0Zm9ybXMnO1xuXG4vLyBsb2cgbGV2ZWxzLCBzb3J0ZWQgYnkgdmVyYm9zaXR5XG5leHBvcnQgY29uc3QgbG9nTGV2ZWxzOiBSZWNvcmQ8TG9nTGV2ZWwsIG51bWJlcj4gPSBPYmplY3QuZnJlZXplKHtcbiAgdHJhY2U6IDAsXG4gIGRlYnVnOiAxLFxuICBpbmZvOiAyLFxuICB3YXJuOiAzLFxuICBlcnJvcjogNCxcbn0pO1xuXG5sZXQgbG9nZ2VyOiBMb2dnZXIgfCB1bmRlZmluZWQ7XG5sZXQgbGV2ZWw6IExvZ0xldmVsID0gJ2luZm8nO1xuXG5leHBvcnQgY29uc3QgbG9nVG9Db25zb2xlOiBMb2dnZXIgPSAobG9nTGV2ZWwsIG1lc3NhZ2UsIC4uLmFyZ3MpID0+IHtcbiAgbGV0IGxvZ01ldGhvZDtcbiAgc3dpdGNoIChsb2dMZXZlbCkge1xuICAgIGNhc2UgJ2Vycm9yJzpcbiAgICAgIGxvZ01ldGhvZCA9IGNvbnNvbGUuZXJyb3I7XG4gICAgICBicmVhaztcbiAgICBjYXNlICd3YXJuJzpcbiAgICAgIGlmIChpc1JlYWN0TmF0aXZlKCkpIHtcbiAgICAgICAgbWVzc2FnZSA9IGBXQVJOOiAke21lc3NhZ2V9YDtcbiAgICAgICAgbG9nTWV0aG9kID0gY29uc29sZS5pbmZvO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGxvZ01ldGhvZCA9IGNvbnNvbGUud2FybjtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ2luZm8nOlxuICAgICAgbG9nTWV0aG9kID0gY29uc29sZS5pbmZvO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAndHJhY2UnOlxuICAgICAgbG9nTWV0aG9kID0gY29uc29sZS50cmFjZTtcbiAgICAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6XG4gICAgICBsb2dNZXRob2QgPSBjb25zb2xlLmxvZztcbiAgICAgIGJyZWFrO1xuICB9XG5cbiAgbG9nTWV0aG9kKG1lc3NhZ2UsIC4uLmFyZ3MpO1xufTtcblxuZXhwb3J0IGNvbnN0IHNldExvZ2dlciA9IChsOiBMb2dnZXIsIGx2bD86IExvZ0xldmVsKSA9PiB7XG4gIGxvZ2dlciA9IGw7XG4gIGlmIChsdmwpIHtcbiAgICBzZXRMb2dMZXZlbChsdmwpO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3Qgc2V0TG9nTGV2ZWwgPSAobDogTG9nTGV2ZWwpID0+IHtcbiAgbGV2ZWwgPSBsO1xufTtcblxuZXhwb3J0IGNvbnN0IGdldExvZ2dlciA9ICh3aXRoVGFncz86IHN0cmluZ1tdKSA9PiB7XG4gIGNvbnN0IGxvZ2dlck1ldGhvZCA9IGxvZ2dlciB8fCBsb2dUb0NvbnNvbGU7XG4gIGNvbnN0IHRhZ3MgPSAod2l0aFRhZ3MgfHwgW10pLmpvaW4oJzonKTtcbiAgY29uc3QgcmVzdWx0OiBMb2dnZXIgPSAobG9nTGV2ZWwsIG1lc3NhZ2UsIC4uLmFyZ3MpID0+IHtcbiAgICBpZiAobG9nTGV2ZWxzW2xvZ0xldmVsXSA+PSBsb2dMZXZlbHNbbGV2ZWxdKSB7XG4gICAgICBsb2dnZXJNZXRob2QobG9nTGV2ZWwsIGBbJHt0YWdzfV06ICR7bWVzc2FnZX1gLCAuLi5hcmdzKTtcbiAgICB9XG4gIH07XG4gIHJldHVybiByZXN1bHQ7XG59O1xuIiwiaW1wb3J0IHsgZ2V0TG9nZ2VyIH0gZnJvbSAnLi4vbG9nZ2VyJztcblxuZXhwb3J0IGNvbnN0IGdldFByZWZlcnJlZENvZGVjcyA9IChcbiAga2luZDogJ2F1ZGlvJyB8ICd2aWRlbycsXG4gIHByZWZlcnJlZENvZGVjOiBzdHJpbmcsXG4gIGNvZGVjVG9SZW1vdmU/OiBzdHJpbmcsXG4pOiBSVENSdHBDb2RlY0NhcGFiaWxpdHlbXSB8IHVuZGVmaW5lZCA9PiB7XG4gIGNvbnN0IGxvZ2dlciA9IGdldExvZ2dlcihbJ2NvZGVjcyddKTtcbiAgaWYgKCEoJ2dldENhcGFiaWxpdGllcycgaW4gUlRDUnRwU2VuZGVyKSkge1xuICAgIGxvZ2dlcj8uKCd3YXJuJywgJ1JUQ1J0cFNlbmRlci5nZXRDYXBhYmlsaXRpZXMgaXMgbm90IHN1cHBvcnRlZCcpO1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBjYXAgPSBSVENSdHBTZW5kZXIuZ2V0Q2FwYWJpbGl0aWVzKGtpbmQpO1xuICBpZiAoIWNhcCkgcmV0dXJuO1xuICBjb25zdCBtYXRjaGVkOiBSVENSdHBDb2RlY0NhcGFiaWxpdHlbXSA9IFtdO1xuICBjb25zdCBwYXJ0aWFsTWF0Y2hlZDogUlRDUnRwQ29kZWNDYXBhYmlsaXR5W10gPSBbXTtcbiAgY29uc3QgdW5tYXRjaGVkOiBSVENSdHBDb2RlY0NhcGFiaWxpdHlbXSA9IFtdO1xuICBjYXAuY29kZWNzLmZvckVhY2goKGMpID0+IHtcbiAgICBjb25zdCBjb2RlYyA9IGMubWltZVR5cGUudG9Mb3dlckNhc2UoKTtcbiAgICBsb2dnZXI/LignZGVidWcnLCBgRm91bmQgc3VwcG9ydGVkIGNvZGVjOiAke2NvZGVjfWApO1xuICAgIGNvbnN0IHNob3VsZFJlbW92ZUNvZGVjID1cbiAgICAgIGNvZGVjVG9SZW1vdmUgJiYgY29kZWMgPT09IGAke2tpbmR9LyR7Y29kZWNUb1JlbW92ZS50b0xvd2VyQ2FzZSgpfWA7XG4gICAgaWYgKHNob3VsZFJlbW92ZUNvZGVjKSByZXR1cm47XG4gICAgY29uc3QgbWF0Y2hlc0NvZGVjID0gY29kZWMgPT09IGAke2tpbmR9LyR7cHJlZmVycmVkQ29kZWMudG9Mb3dlckNhc2UoKX1gO1xuICAgIGlmICghbWF0Y2hlc0NvZGVjKSB7XG4gICAgICB1bm1hdGNoZWQucHVzaChjKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gZm9yIGgyNjQgY29kZWNzIHRoYXQgaGF2ZSBzZHBGbXRwTGluZSBhdmFpbGFibGUsIHVzZSBvbmx5IGlmIHRoZVxuICAgIC8vIHByb2ZpbGUtbGV2ZWwtaWQgaXMgNDJlMDFmIGZvciBjcm9zcy1icm93c2VyIGNvbXBhdGliaWxpdHlcbiAgICBpZiAoY29kZWMgPT09ICdoMjY0Jykge1xuICAgICAgaWYgKGMuc2RwRm10cExpbmUgJiYgYy5zZHBGbXRwTGluZS5pbmNsdWRlcygncHJvZmlsZS1sZXZlbC1pZD00MmUwMWYnKSkge1xuICAgICAgICBtYXRjaGVkLnB1c2goYyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwYXJ0aWFsTWF0Y2hlZC5wdXNoKGMpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBtYXRjaGVkLnB1c2goYyk7XG4gIH0pO1xuXG4gIGNvbnN0IHJlc3VsdCA9IFsuLi5tYXRjaGVkLCAuLi5wYXJ0aWFsTWF0Y2hlZCwgLi4udW5tYXRjaGVkXTtcbiAgbG9nZ2VyPy4oJ2luZm8nLCBgUHJlZmZlcmVkIGNvZGVjczogYCwgcmVzdWx0KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRHZW5lcmljU2RwID0gYXN5bmMgKGRpcmVjdGlvbjogUlRDUnRwVHJhbnNjZWl2ZXJEaXJlY3Rpb24pID0+IHtcbiAgY29uc3QgdGVtcFBjID0gbmV3IFJUQ1BlZXJDb25uZWN0aW9uKCk7XG4gIHRlbXBQYy5hZGRUcmFuc2NlaXZlcigndmlkZW8nLCB7IGRpcmVjdGlvbiB9KTtcbiAgdGVtcFBjLmFkZFRyYW5zY2VpdmVyKCdhdWRpbycsIHsgZGlyZWN0aW9uIH0pO1xuXG4gIGNvbnN0IG9mZmVyID0gYXdhaXQgdGVtcFBjLmNyZWF0ZU9mZmVyKCk7XG4gIGxldCBzZHAgPSBvZmZlci5zZHAgPz8gJyc7XG5cbiAgdGVtcFBjLmdldFRyYW5zY2VpdmVycygpLmZvckVhY2goKHQpID0+IHtcbiAgICB0LnN0b3AoKTtcbiAgfSk7XG4gIHRlbXBQYy5jbG9zZSgpO1xuICByZXR1cm4gc2RwO1xufTtcbiIsImltcG9ydCB7IENhbGxFdmVudExpc3RlbmVyLCBFdmVudFR5cGVzIH0gZnJvbSAnLi4vY29vcmRpbmF0b3IvY29ubmVjdGlvbi90eXBlcyc7XG5pbXBvcnQgdHlwZSB7IFNmdUV2ZW50IH0gZnJvbSAnLi4vZ2VuL3ZpZGVvL3NmdS9ldmVudC9ldmVudHMnO1xuaW1wb3J0IHsgZ2V0TG9nZ2VyIH0gZnJvbSAnLi4vbG9nZ2VyJztcblxuZXhwb3J0IHR5cGUgU2Z1RXZlbnRLaW5kcyA9IE5vbk51bGxhYmxlPFNmdUV2ZW50WydldmVudFBheWxvYWQnXVsnb25lb2ZLaW5kJ10+O1xuZXhwb3J0IHR5cGUgQWxsU2Z1RXZlbnRzID0ge1xuICBbSyBpbiBTZnVFdmVudEtpbmRzXTogSyBleHRlbmRzIGtleW9mIEV4dHJhY3Q8XG4gICAgU2Z1RXZlbnRbJ2V2ZW50UGF5bG9hZCddLFxuICAgIHsgb25lb2ZLaW5kOiBLIH1cbiAgPlxuICAgID8gRXh0cmFjdDxTZnVFdmVudFsnZXZlbnRQYXlsb2FkJ10sIHsgb25lb2ZLaW5kOiBLIH0+W0tdXG4gICAgOiBuZXZlcjtcbn07XG5cbmV4cG9ydCB0eXBlIERpc3BhdGNoYWJsZU1lc3NhZ2U8SyBleHRlbmRzIFNmdUV2ZW50S2luZHM+ID0ge1xuICBldmVudFBheWxvYWQ6IHtcbiAgICBvbmVvZktpbmQ6IEs7XG4gIH0gJiB7XG4gICAgW0tleSBpbiBLXTogQWxsU2Z1RXZlbnRzW0tleV07XG4gIH07XG59O1xuXG5jb25zdCBzZnVFdmVudEtpbmRzOiB7IFtrZXkgaW4gU2Z1RXZlbnRLaW5kc106IHVuZGVmaW5lZCB9ID0ge1xuICBzdWJzY3JpYmVyT2ZmZXI6IHVuZGVmaW5lZCxcbiAgcHVibGlzaGVyQW5zd2VyOiB1bmRlZmluZWQsXG4gIGNvbm5lY3Rpb25RdWFsaXR5Q2hhbmdlZDogdW5kZWZpbmVkLFxuICBhdWRpb0xldmVsQ2hhbmdlZDogdW5kZWZpbmVkLFxuICBpY2VUcmlja2xlOiB1bmRlZmluZWQsXG4gIGNoYW5nZVB1Ymxpc2hRdWFsaXR5OiB1bmRlZmluZWQsXG4gIHBhcnRpY2lwYW50Sm9pbmVkOiB1bmRlZmluZWQsXG4gIHBhcnRpY2lwYW50TGVmdDogdW5kZWZpbmVkLFxuICBkb21pbmFudFNwZWFrZXJDaGFuZ2VkOiB1bmRlZmluZWQsXG4gIGpvaW5SZXNwb25zZTogdW5kZWZpbmVkLFxuICBoZWFsdGhDaGVja1Jlc3BvbnNlOiB1bmRlZmluZWQsXG4gIHRyYWNrUHVibGlzaGVkOiB1bmRlZmluZWQsXG4gIHRyYWNrVW5wdWJsaXNoZWQ6IHVuZGVmaW5lZCxcbiAgZXJyb3I6IHVuZGVmaW5lZCxcbiAgY2FsbEdyYW50c1VwZGF0ZWQ6IHVuZGVmaW5lZCxcbiAgZ29Bd2F5OiB1bmRlZmluZWQsXG4gIGljZVJlc3RhcnQ6IHVuZGVmaW5lZCxcbiAgcGluc1VwZGF0ZWQ6IHVuZGVmaW5lZCxcbn07XG5cbmV4cG9ydCBjb25zdCBpc1NmdUV2ZW50ID0gKFxuICBldmVudE5hbWU6IFNmdUV2ZW50S2luZHMgfCBFdmVudFR5cGVzLFxuKTogZXZlbnROYW1lIGlzIFNmdUV2ZW50S2luZHMgPT4ge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNmdUV2ZW50S2luZHMsIGV2ZW50TmFtZSk7XG59O1xuXG5leHBvcnQgY2xhc3MgRGlzcGF0Y2hlciB7XG4gIHByaXZhdGUgcmVhZG9ubHkgbG9nZ2VyID0gZ2V0TG9nZ2VyKFsnRGlzcGF0Y2hlciddKTtcbiAgcHJpdmF0ZSBzdWJzY3JpYmVyczogUGFydGlhbDxcbiAgICBSZWNvcmQ8U2Z1RXZlbnRLaW5kcywgQ2FsbEV2ZW50TGlzdGVuZXI8YW55PltdIHwgdW5kZWZpbmVkPlxuICA+ID0ge307XG5cbiAgZGlzcGF0Y2ggPSA8SyBleHRlbmRzIFNmdUV2ZW50S2luZHM+KG1lc3NhZ2U6IERpc3BhdGNoYWJsZU1lc3NhZ2U8Sz4pID0+IHtcbiAgICBjb25zdCBldmVudEtpbmQgPSBtZXNzYWdlLmV2ZW50UGF5bG9hZC5vbmVvZktpbmQ7XG4gICAgaWYgKCFldmVudEtpbmQpIHJldHVybjtcbiAgICBjb25zdCBwYXlsb2FkID0gbWVzc2FnZS5ldmVudFBheWxvYWRbZXZlbnRLaW5kXTtcbiAgICB0aGlzLmxvZ2dlcignZGVidWcnLCBgRGlzcGF0Y2hpbmcgJHtldmVudEtpbmR9YCwgcGF5bG9hZCk7XG4gICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5zdWJzY3JpYmVyc1tldmVudEtpbmRdO1xuICAgIGlmICghbGlzdGVuZXJzKSByZXR1cm47XG4gICAgZm9yIChjb25zdCBmbiBvZiBsaXN0ZW5lcnMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGZuKHBheWxvYWQpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICB0aGlzLmxvZ2dlcignd2FybicsICdMaXN0ZW5lciBmYWlsZWQgd2l0aCBlcnJvcicsIGUpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBvbiA9IDxFIGV4dGVuZHMga2V5b2YgQWxsU2Z1RXZlbnRzPihcbiAgICBldmVudE5hbWU6IEUsXG4gICAgZm46IENhbGxFdmVudExpc3RlbmVyPEU+LFxuICApID0+IHtcbiAgICAodGhpcy5zdWJzY3JpYmVyc1tldmVudE5hbWVdID8/PSBbXSkucHVzaChmbiBhcyBuZXZlcik7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHRoaXMub2ZmKGV2ZW50TmFtZSwgZm4pO1xuICAgIH07XG4gIH07XG5cbiAgb2ZmID0gPEUgZXh0ZW5kcyBrZXlvZiBBbGxTZnVFdmVudHM+KFxuICAgIGV2ZW50TmFtZTogRSxcbiAgICBmbjogQ2FsbEV2ZW50TGlzdGVuZXI8RT4sXG4gICkgPT4ge1xuICAgIHRoaXMuc3Vic2NyaWJlcnNbZXZlbnROYW1lXSA9ICh0aGlzLnN1YnNjcmliZXJzW2V2ZW50TmFtZV0gfHwgW10pLmZpbHRlcihcbiAgICAgIChmKSA9PiBmICE9PSBmbixcbiAgICApO1xuICB9O1xuXG4gIG9mZkFsbCA9IChldmVudE5hbWU/OiBTZnVFdmVudEtpbmRzKSA9PiB7XG4gICAgaWYgKGV2ZW50TmFtZSkge1xuICAgICAgdGhpcy5zdWJzY3JpYmVyc1tldmVudE5hbWVdID0gW107XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc3Vic2NyaWJlcnMgPSB7fTtcbiAgICB9XG4gIH07XG59XG4iLCJpbXBvcnQgeyBSZXBsYXlTdWJqZWN0IH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBJQ0VUcmlja2xlIH0gZnJvbSAnLi4vZ2VuL3ZpZGVvL3NmdS9ldmVudC9ldmVudHMnO1xuaW1wb3J0IHsgUGVlclR5cGUgfSBmcm9tICcuLi9nZW4vdmlkZW8vc2Z1L21vZGVscy9tb2RlbHMnO1xuaW1wb3J0IHsgZ2V0TG9nZ2VyIH0gZnJvbSAnLi4vbG9nZ2VyJztcblxuLyoqXG4gKiBBIGJ1ZmZlciBmb3IgSUNFIENhbmRpZGF0ZXMuIFVzZWQgZm9yIElDRSBUcmlja2xlOlxuICogLSBodHRwczovL2Jsb2dnZWVrLm1lL3dlYnJ0Y2dsb3NzYXJ5L3RyaWNrbGUtaWNlL1xuICovXG5leHBvcnQgY2xhc3MgSWNlVHJpY2tsZUJ1ZmZlciB7XG4gIHJlYWRvbmx5IHN1YnNjcmliZXJDYW5kaWRhdGVzID0gbmV3IFJlcGxheVN1YmplY3Q8SUNFVHJpY2tsZT4oKTtcbiAgcmVhZG9ubHkgcHVibGlzaGVyQ2FuZGlkYXRlcyA9IG5ldyBSZXBsYXlTdWJqZWN0PElDRVRyaWNrbGU+KCk7XG4gIHByaXZhdGUgcmVhZG9ubHkgbG9nZ2VyID0gZ2V0TG9nZ2VyKFsnc2Z1LWNsaWVudCddKTtcblxuICBwdXNoID0gKGljZVRyaWNrbGU6IElDRVRyaWNrbGUpID0+IHtcbiAgICBpZiAoaWNlVHJpY2tsZS5wZWVyVHlwZSA9PT0gUGVlclR5cGUuU1VCU0NSSUJFUikge1xuICAgICAgdGhpcy5zdWJzY3JpYmVyQ2FuZGlkYXRlcy5uZXh0KGljZVRyaWNrbGUpO1xuICAgIH0gZWxzZSBpZiAoaWNlVHJpY2tsZS5wZWVyVHlwZSA9PT0gUGVlclR5cGUuUFVCTElTSEVSX1VOU1BFQ0lGSUVEKSB7XG4gICAgICB0aGlzLnB1Ymxpc2hlckNhbmRpZGF0ZXMubmV4dChpY2VUcmlja2xlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5sb2dnZXIoJ3dhcm4nLCBgSUNFVHJpY2tsZSwgVW5rbm93biBwZWVyIHR5cGVgLCBpY2VUcmlja2xlKTtcbiAgICB9XG4gIH07XG59XG4iLCJpbXBvcnQgeyBJQ0VUcmlja2xlIH0gZnJvbSAnLi4vLi4vZ2VuL3ZpZGVvL3NmdS9tb2RlbHMvbW9kZWxzJztcblxuZXhwb3J0IGZ1bmN0aW9uIGdldEljZUNhbmRpZGF0ZShcbiAgY2FuZGlkYXRlOiBSVENJY2VDYW5kaWRhdGUsXG4pOiBJQ0VUcmlja2xlWydpY2VDYW5kaWRhdGUnXSB7XG4gIGlmICghY2FuZGlkYXRlLnVzZXJuYW1lRnJhZ21lbnQpIHtcbiAgICAvLyByZWFjdC1uYXRpdmUtd2VicnRjIGRvZXNuJ3QgaW5jbHVkZSB1c2VybmFtZUZyYWdtZW50IGluIHRoZSBjYW5kaWRhdGVcbiAgICBjb25zdCBzcGxpdHRlZENhbmRpZGF0ZSA9IGNhbmRpZGF0ZS5jYW5kaWRhdGUuc3BsaXQoJyAnKTtcbiAgICBjb25zdCB1ZnJhZ0luZGV4ID1cbiAgICAgIHNwbGl0dGVkQ2FuZGlkYXRlLmZpbmRJbmRleCgoczogc3RyaW5nKSA9PiBzID09PSAndWZyYWcnKSArIDE7XG4gICAgY29uc3QgdXNlcm5hbWVGcmFnbWVudCA9IHNwbGl0dGVkQ2FuZGlkYXRlW3VmcmFnSW5kZXhdO1xuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7IC4uLmNhbmRpZGF0ZSwgdXNlcm5hbWVGcmFnbWVudCB9KTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoY2FuZGlkYXRlLnRvSlNPTigpKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgQ2xpZW50RGV0YWlscywgRGV2aWNlLCBPUywgU2RrIH0gZnJvbSAnLi9nZW4vdmlkZW8vc2Z1L21vZGVscy9tb2RlbHMnO1xuaW1wb3J0IHsgaXNSZWFjdE5hdGl2ZSB9IGZyb20gJy4vaGVscGVycy9wbGF0Zm9ybXMnO1xuaW1wb3J0IHsgVUFQYXJzZXIgfSBmcm9tICd1YS1wYXJzZXItanMnO1xuXG5sZXQgc2RrSW5mbzogU2RrIHwgdW5kZWZpbmVkO1xubGV0IG9zSW5mbzogT1MgfCB1bmRlZmluZWQ7XG5sZXQgZGV2aWNlSW5mbzogRGV2aWNlIHwgdW5kZWZpbmVkO1xuXG5leHBvcnQgY29uc3Qgc2V0U2RrSW5mbyA9IChpbmZvOiBTZGspID0+IHtcbiAgc2RrSW5mbyA9IGluZm87XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0U2RrSW5mbyA9ICgpID0+IHtcbiAgcmV0dXJuIHNka0luZm87XG59O1xuXG5leHBvcnQgY29uc3Qgc2V0T1NJbmZvID0gKGluZm86IE9TKSA9PiB7XG4gIG9zSW5mbyA9IGluZm87XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0T1NJbmZvID0gKCkgPT4ge1xuICByZXR1cm4gb3NJbmZvO1xufTtcblxuZXhwb3J0IGNvbnN0IHNldERldmljZUluZm8gPSAoaW5mbzogRGV2aWNlKSA9PiB7XG4gIGRldmljZUluZm8gPSBpbmZvO1xufTtcblxuZXhwb3J0IGNvbnN0IGdldERldmljZUluZm8gPSAoKSA9PiB7XG4gIHJldHVybiBkZXZpY2VJbmZvO1xufTtcblxuZXhwb3J0IGNvbnN0IGdldENsaWVudERldGFpbHMgPSAoKTogQ2xpZW50RGV0YWlscyA9PiB7XG4gIGlmIChpc1JlYWN0TmF0aXZlKCkpIHtcbiAgICAvLyBTaW5jZSBSTiBkb2Vzbid0IHN1cHBvcnQgd2ViLCBzaGFyaW5nIGJyb3dzZXIgaW5mbyBpcyBub3QgcmVxdWlyZWRcbiAgICByZXR1cm4ge1xuICAgICAgc2RrOiBnZXRTZGtJbmZvKCksXG4gICAgICBvczogZ2V0T1NJbmZvKCksXG4gICAgICBkZXZpY2U6IGdldERldmljZUluZm8oKSxcbiAgICB9O1xuICB9XG5cbiAgY29uc3QgdXNlckFnZW50ID0gbmV3IFVBUGFyc2VyKG5hdmlnYXRvci51c2VyQWdlbnQpO1xuICBjb25zdCB7IGJyb3dzZXIsIG9zLCBkZXZpY2UsIGNwdSB9ID0gdXNlckFnZW50LmdldFJlc3VsdCgpO1xuICByZXR1cm4ge1xuICAgIHNkazogZ2V0U2RrSW5mbygpLFxuICAgIGJyb3dzZXI6IHtcbiAgICAgIG5hbWU6IGJyb3dzZXIubmFtZSB8fCBuYXZpZ2F0b3IudXNlckFnZW50LFxuICAgICAgdmVyc2lvbjogYnJvd3Nlci52ZXJzaW9uIHx8ICcnLFxuICAgIH0sXG4gICAgb3M6IHtcbiAgICAgIG5hbWU6IG9zLm5hbWUgfHwgJycsXG4gICAgICB2ZXJzaW9uOiBvcy52ZXJzaW9uIHx8ICcnLFxuICAgICAgYXJjaGl0ZWN0dXJlOiBjcHUuYXJjaGl0ZWN0dXJlIHx8ICcnLFxuICAgIH0sXG4gICAgZGV2aWNlOiB7XG4gICAgICBuYW1lOiBgJHtkZXZpY2UudmVuZG9yIHx8ICcnfSAke2RldmljZS5tb2RlbCB8fCAnJ30gJHtkZXZpY2UudHlwZSB8fCAnJ31gLFxuICAgICAgdmVyc2lvbjogJycsXG4gICAgfSxcbiAgfTtcbn07XG4iLCJpbXBvcnQgeyBnZXRPU0luZm8gfSBmcm9tICcuLi9jbGllbnQtZGV0YWlscyc7XG5pbXBvcnQgeyBTY3JlZW5TaGFyZVNldHRpbmdzIH0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHsgVGFyZ2V0UmVzb2x1dGlvbiB9IGZyb20gJy4uL2dlbi9jb29yZGluYXRvcic7XG5pbXBvcnQgeyBpc1JlYWN0TmF0aXZlIH0gZnJvbSAnLi4vaGVscGVycy9wbGF0Zm9ybXMnO1xuXG5leHBvcnQgdHlwZSBPcHRpbWFsVmlkZW9MYXllciA9IFJUQ1J0cEVuY29kaW5nUGFyYW1ldGVycyAmIHtcbiAgd2lkdGg6IG51bWJlcjtcbiAgaGVpZ2h0OiBudW1iZXI7XG59O1xuXG5jb25zdCBERUZBVUxUX0JJVFJBVEUgPSAxMjUwMDAwO1xuY29uc3QgZGVmYXVsdFRhcmdldFJlc29sdXRpb246IFRhcmdldFJlc29sdXRpb24gPSB7XG4gIGJpdHJhdGU6IERFRkFVTFRfQklUUkFURSxcbiAgd2lkdGg6IDEyODAsXG4gIGhlaWdodDogNzIwLFxufTtcblxuLyoqXG4gKiBEZXRlcm1pbmVzIHRoZSBtb3N0IG9wdGltYWwgdmlkZW8gbGF5ZXJzIGZvciBzaW11bGNhc3RpbmdcbiAqIGZvciB0aGUgZ2l2ZW4gdHJhY2suXG4gKlxuICogQHBhcmFtIHZpZGVvVHJhY2sgdGhlIHZpZGVvIHRyYWNrIHRvIGZpbmQgb3B0aW1hbCBsYXllcnMgZm9yLlxuICogQHBhcmFtIHRhcmdldFJlc29sdXRpb24gdGhlIGV4cGVjdGVkIHRhcmdldCByZXNvbHV0aW9uLlxuICovXG5leHBvcnQgY29uc3QgZmluZE9wdGltYWxWaWRlb0xheWVycyA9IChcbiAgdmlkZW9UcmFjazogTWVkaWFTdHJlYW1UcmFjayxcbiAgdGFyZ2V0UmVzb2x1dGlvbjogVGFyZ2V0UmVzb2x1dGlvbiA9IGRlZmF1bHRUYXJnZXRSZXNvbHV0aW9uLFxuKSA9PiB7XG4gIGNvbnN0IG9wdGltYWxWaWRlb0xheWVyczogT3B0aW1hbFZpZGVvTGF5ZXJbXSA9IFtdO1xuICBjb25zdCBzZXR0aW5ncyA9IHZpZGVvVHJhY2suZ2V0U2V0dGluZ3MoKTtcbiAgY29uc3QgeyB3aWR0aDogdyA9IDAsIGhlaWdodDogaCA9IDAgfSA9IHNldHRpbmdzO1xuXG4gIGNvbnN0IGlzUk5Jb3MgPSBpc1JlYWN0TmF0aXZlKCkgJiYgZ2V0T1NJbmZvKCk/Lm5hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2lvcyc7XG5cbiAgY29uc3QgbWF4Qml0cmF0ZSA9IGdldENvbXB1dGVkTWF4Qml0cmF0ZSh0YXJnZXRSZXNvbHV0aW9uLCB3LCBoKTtcbiAgbGV0IGRvd25zY2FsZUZhY3RvciA9IDE7XG4gIFsnZicsICdoJywgJ3EnXS5mb3JFYWNoKChyaWQpID0+IHtcbiAgICAvLyBSZXZlcnNpbmcgdGhlIG9yZGVyIFtmLCBoLCBxXSB0byBbcSwgaCwgZl0gYXMgQ2hyb21lIHVzZXMgZW5jb2RpbmcgaW5kZXhcbiAgICAvLyB3aGVuIGRlY2lkaW5nIHdoaWNoIGxheWVyIHRvIGRpc2FibGUgd2hlbiBDUFUgb3IgYmFuZHdpZHRoIGlzIGNvbnN0cmFpbmVkLlxuICAgIC8vIEVuY29kaW5ncyBzaG91bGQgYmUgb3JkZXJlZCBpbiBpbmNyZWFzaW5nIHNwYXRpYWwgcmVzb2x1dGlvbiBvcmRlci5cbiAgICBvcHRpbWFsVmlkZW9MYXllcnMudW5zaGlmdCh7XG4gICAgICBhY3RpdmU6IHRydWUsXG4gICAgICByaWQsXG4gICAgICB3aWR0aDogTWF0aC5yb3VuZCh3IC8gZG93bnNjYWxlRmFjdG9yKSxcbiAgICAgIGhlaWdodDogTWF0aC5yb3VuZChoIC8gZG93bnNjYWxlRmFjdG9yKSxcbiAgICAgIG1heEJpdHJhdGU6IE1hdGgucm91bmQobWF4Qml0cmF0ZSAvIGRvd25zY2FsZUZhY3RvciksXG4gICAgICBzY2FsZVJlc29sdXRpb25Eb3duQnk6IGRvd25zY2FsZUZhY3RvcixcbiAgICAgIC8vIFNpbXVsY2FzdCBvbiBpT1MgUmVhY3QtTmF0aXZlIHJlcXVpcmVzIGFsbCBlbmNvZGluZ3MgdG8gc2hhcmUgdGhlIHNhbWUgZnJhbWVyYXRlXG4gICAgICBtYXhGcmFtZXJhdGU6IHtcbiAgICAgICAgZjogMzAsXG4gICAgICAgIGg6IGlzUk5Jb3MgPyAzMCA6IDI1LFxuICAgICAgICBxOiBpc1JOSW9zID8gMzAgOiAyMCxcbiAgICAgIH1bcmlkXSxcbiAgICB9KTtcbiAgICBkb3duc2NhbGVGYWN0b3IgKj0gMjtcbiAgfSk7XG5cbiAgLy8gZm9yIHNpbXBsaWNpdHksIHdlIHN0YXJ0IHdpdGggYWxsIGxheWVycyBlbmFibGVkLCB0aGVuIHRoaXMgZnVuY3Rpb25cbiAgLy8gd2lsbCBjbGVhci9yZWFzc2lnbiB0aGUgbGF5ZXJzIHRoYXQgYXJlIG5vdCBuZWVkZWRcbiAgcmV0dXJuIHdpdGhTaW11bGNhc3RDb25zdHJhaW50cyhzZXR0aW5ncywgb3B0aW1hbFZpZGVvTGF5ZXJzKTtcbn07XG5cbi8qKlxuICogQ29tcHV0ZXMgdGhlIG1heGltdW0gYml0cmF0ZSBmb3IgYSBnaXZlbiByZXNvbHV0aW9uLlxuICogSWYgdGhlIGN1cnJlbnQgcmVzb2x1dGlvbiBpcyBsb3dlciB0aGFuIHRoZSB0YXJnZXQgcmVzb2x1dGlvbixcbiAqIHdlIHdhbnQgdG8gcHJvcG9ydGlvbmFsbHkgcmVkdWNlIHRoZSB0YXJnZXQgYml0cmF0ZS5cbiAqIElmIHRoZSBjdXJyZW50IHJlc29sdXRpb24gaXMgaGlnaGVyIHRoYW4gdGhlIHRhcmdldCByZXNvbHV0aW9uLFxuICogd2Ugd2FudCB0byB1c2UgdGhlIHRhcmdldCBiaXRyYXRlLlxuICpcbiAqIEBwYXJhbSB0YXJnZXRSZXNvbHV0aW9uIHRoZSB0YXJnZXQgcmVzb2x1dGlvbi5cbiAqIEBwYXJhbSBjdXJyZW50V2lkdGggdGhlIGN1cnJlbnQgd2lkdGggb2YgdGhlIHRyYWNrLlxuICogQHBhcmFtIGN1cnJlbnRIZWlnaHQgdGhlIGN1cnJlbnQgaGVpZ2h0IG9mIHRoZSB0cmFjay5cbiAqL1xuZXhwb3J0IGNvbnN0IGdldENvbXB1dGVkTWF4Qml0cmF0ZSA9IChcbiAgdGFyZ2V0UmVzb2x1dGlvbjogVGFyZ2V0UmVzb2x1dGlvbixcbiAgY3VycmVudFdpZHRoOiBudW1iZXIsXG4gIGN1cnJlbnRIZWlnaHQ6IG51bWJlcixcbik6IG51bWJlciA9PiB7XG4gIC8vIGlmIHRoZSBjdXJyZW50IHJlc29sdXRpb24gaXMgbG93ZXIgdGhhbiB0aGUgdGFyZ2V0IHJlc29sdXRpb24sXG4gIC8vIHdlIHdhbnQgdG8gcHJvcG9ydGlvbmFsbHkgcmVkdWNlIHRoZSB0YXJnZXQgYml0cmF0ZVxuICBjb25zdCB7IHdpZHRoOiB0YXJnZXRXaWR0aCwgaGVpZ2h0OiB0YXJnZXRIZWlnaHQgfSA9IHRhcmdldFJlc29sdXRpb247XG4gIGlmIChjdXJyZW50V2lkdGggPCB0YXJnZXRXaWR0aCB8fCBjdXJyZW50SGVpZ2h0IDwgdGFyZ2V0SGVpZ2h0KSB7XG4gICAgY29uc3QgY3VycmVudFBpeGVscyA9IGN1cnJlbnRXaWR0aCAqIGN1cnJlbnRIZWlnaHQ7XG4gICAgY29uc3QgdGFyZ2V0UGl4ZWxzID0gdGFyZ2V0V2lkdGggKiB0YXJnZXRIZWlnaHQ7XG4gICAgY29uc3QgcmVkdWN0aW9uRmFjdG9yID0gY3VycmVudFBpeGVscyAvIHRhcmdldFBpeGVscztcbiAgICByZXR1cm4gTWF0aC5yb3VuZCh0YXJnZXRSZXNvbHV0aW9uLmJpdHJhdGUgKiByZWR1Y3Rpb25GYWN0b3IpO1xuICB9XG4gIHJldHVybiB0YXJnZXRSZXNvbHV0aW9uLmJpdHJhdGU7XG59O1xuXG4vKipcbiAqIEJyb3dzZXJzIGhhdmUgZGlmZmVyZW50IHNpbXVsY2FzdCBjb25zdHJhaW50cyBmb3IgZGlmZmVyZW50IHZpZGVvIHJlc29sdXRpb25zLlxuICpcbiAqIFRoaXMgZnVuY3Rpb24gbW9kaWZpZXMgdGhlIHByb3ZpZGVkIGxpc3Qgb2YgdmlkZW8gbGF5ZXJzIGFjY29yZGluZyB0byB0aGVcbiAqIGN1cnJlbnQgaW1wbGVtZW50YXRpb24gb2Ygc2ltdWxjYXN0IGNvbnN0cmFpbnRzIGluIHRoZSBDaHJvbWl1bSBiYXNlZCBicm93c2Vycy5cbiAqXG4gKiBodHRwczovL2Nocm9taXVtLmdvb2dsZXNvdXJjZS5jb20vZXh0ZXJuYWwvd2VicnRjLysvcmVmcy9oZWFkcy9tYWluL21lZGlhL2VuZ2luZS9zaW11bGNhc3QuY2MjOTBcbiAqL1xuY29uc3Qgd2l0aFNpbXVsY2FzdENvbnN0cmFpbnRzID0gKFxuICBzZXR0aW5nczogTWVkaWFUcmFja1NldHRpbmdzLFxuICBvcHRpbWFsVmlkZW9MYXllcnM6IE9wdGltYWxWaWRlb0xheWVyW10sXG4pID0+IHtcbiAgbGV0IGxheWVyczogT3B0aW1hbFZpZGVvTGF5ZXJbXTtcblxuICBjb25zdCBzaXplID0gTWF0aC5tYXgoc2V0dGluZ3Mud2lkdGggfHwgMCwgc2V0dGluZ3MuaGVpZ2h0IHx8IDApO1xuICBpZiAoc2l6ZSA8PSAzMjApIHtcbiAgICAvLyBwcm92aWRlIG9ubHkgb25lIGxheWVyIDMyMHgyNDAgKHEpLCB0aGUgb25lIHdpdGggdGhlIGhpZ2hlc3QgcXVhbGl0eVxuICAgIGxheWVycyA9IG9wdGltYWxWaWRlb0xheWVycy5maWx0ZXIoKGxheWVyKSA9PiBsYXllci5yaWQgPT09ICdmJyk7XG4gIH0gZWxzZSBpZiAoc2l6ZSA8PSA2NDApIHtcbiAgICAvLyBwcm92aWRlIHR3byBsYXllcnMsIDE2MHgxMjAgKHEpIGFuZCA2NDB4NDgwIChoKVxuICAgIGxheWVycyA9IG9wdGltYWxWaWRlb0xheWVycy5maWx0ZXIoKGxheWVyKSA9PiBsYXllci5yaWQgIT09ICdoJyk7XG4gIH0gZWxzZSB7XG4gICAgLy8gcHJvdmlkZSB0aHJlZSBsYXllcnMgZm9yIHNpemVzID4gNjQweDQ4MFxuICAgIGxheWVycyA9IG9wdGltYWxWaWRlb0xheWVycztcbiAgfVxuXG4gIGNvbnN0IHJpZE1hcHBpbmcgPSBbJ3EnLCAnaCcsICdmJ107XG4gIHJldHVybiBsYXllcnMubWFwPE9wdGltYWxWaWRlb0xheWVyPigobGF5ZXIsIGluZGV4KSA9PiAoe1xuICAgIC4uLmxheWVyLFxuICAgIHJpZDogcmlkTWFwcGluZ1tpbmRleF0sIC8vIHJlYXNzaWduIHJpZFxuICB9KSk7XG59O1xuXG5leHBvcnQgY29uc3QgZmluZE9wdGltYWxTY3JlZW5TaGFyaW5nTGF5ZXJzID0gKFxuICB2aWRlb1RyYWNrOiBNZWRpYVN0cmVhbVRyYWNrLFxuICBwcmVmZXJlbmNlcz86IFNjcmVlblNoYXJlU2V0dGluZ3MsXG4pOiBPcHRpbWFsVmlkZW9MYXllcltdID0+IHtcbiAgY29uc3Qgc2V0dGluZ3MgPSB2aWRlb1RyYWNrLmdldFNldHRpbmdzKCk7XG4gIHJldHVybiBbXG4gICAge1xuICAgICAgYWN0aXZlOiB0cnVlLFxuICAgICAgcmlkOiAncScsIC8vIHNpbmdsZSB0cmFjaywgc3RhcnQgZnJvbSAncSdcbiAgICAgIHdpZHRoOiBzZXR0aW5ncy53aWR0aCB8fCAwLFxuICAgICAgaGVpZ2h0OiBzZXR0aW5ncy5oZWlnaHQgfHwgMCxcbiAgICAgIHNjYWxlUmVzb2x1dGlvbkRvd25CeTogMSxcbiAgICAgIG1heEJpdHJhdGU6IHByZWZlcmVuY2VzPy5tYXhCaXRyYXRlID8/IDMwMDAwMDAsXG4gICAgICBtYXhGcmFtZXJhdGU6IHByZWZlcmVuY2VzPy5tYXhGcmFtZXJhdGUgPz8gMzAsXG4gICAgfSxcbiAgXTtcbn07XG4iLCJpbXBvcnQgeyBUcmFja1R5cGUgfSBmcm9tICcuLi8uLi9nZW4vdmlkZW8vc2Z1L21vZGVscy9tb2RlbHMnO1xuaW1wb3J0IHR5cGUgeyBTdHJlYW1WaWRlb1BhcnRpY2lwYW50IH0gZnJvbSAnLi4vLi4vdHlwZXMnO1xuaW1wb3J0IHsgVHJhY2tNdXRlVHlwZSB9IGZyb20gJy4uLy4uL3R5cGVzJztcblxuZXhwb3J0IGNvbnN0IHRyYWNrVHlwZVRvUGFydGljaXBhbnRTdHJlYW1LZXkgPSAoXG4gIHRyYWNrVHlwZTogVHJhY2tUeXBlLFxuKToga2V5b2YgU3RyZWFtVmlkZW9QYXJ0aWNpcGFudCA9PiB7XG4gIHN3aXRjaCAodHJhY2tUeXBlKSB7XG4gICAgY2FzZSBUcmFja1R5cGUuU0NSRUVOX1NIQVJFOlxuICAgICAgcmV0dXJuICdzY3JlZW5TaGFyZVN0cmVhbSc7XG4gICAgY2FzZSBUcmFja1R5cGUuU0NSRUVOX1NIQVJFX0FVRElPOlxuICAgICAgcmV0dXJuICdzY3JlZW5TaGFyZUF1ZGlvU3RyZWFtJztcbiAgICBjYXNlIFRyYWNrVHlwZS5WSURFTzpcbiAgICAgIHJldHVybiAndmlkZW9TdHJlYW0nO1xuICAgIGNhc2UgVHJhY2tUeXBlLkFVRElPOlxuICAgICAgcmV0dXJuICdhdWRpb1N0cmVhbSc7XG4gICAgY2FzZSBUcmFja1R5cGUuVU5TUEVDSUZJRUQ6XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RyYWNrIHR5cGUgaXMgdW5zcGVjaWZpZWQnKTtcbiAgICBkZWZhdWx0OlxuICAgICAgY29uc3QgZXhoYXVzdGl2ZVRyYWNrVHlwZUNoZWNrOiBuZXZlciA9IHRyYWNrVHlwZTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biB0cmFjayB0eXBlOiAke2V4aGF1c3RpdmVUcmFja1R5cGVDaGVja31gKTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IG11dGVUeXBlVG9UcmFja1R5cGUgPSAobXV0ZVR5cGU6IFRyYWNrTXV0ZVR5cGUpOiBUcmFja1R5cGUgPT4ge1xuICBzd2l0Y2ggKG11dGVUeXBlKSB7XG4gICAgY2FzZSAnYXVkaW8nOlxuICAgICAgcmV0dXJuIFRyYWNrVHlwZS5BVURJTztcbiAgICBjYXNlICd2aWRlbyc6XG4gICAgICByZXR1cm4gVHJhY2tUeXBlLlZJREVPO1xuICAgIGNhc2UgJ3NjcmVlbnNoYXJlJzpcbiAgICAgIHJldHVybiBUcmFja1R5cGUuU0NSRUVOX1NIQVJFO1xuICAgIGNhc2UgJ3NjcmVlbnNoYXJlX2F1ZGlvJzpcbiAgICAgIHJldHVybiBUcmFja1R5cGUuU0NSRUVOX1NIQVJFX0FVRElPO1xuICAgIGRlZmF1bHQ6XG4gICAgICBjb25zdCBleGhhdXN0aXZlTXV0ZVR5cGVDaGVjazogbmV2ZXIgPSBtdXRlVHlwZTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBtdXRlIHR5cGU6ICR7ZXhoYXVzdGl2ZU11dGVUeXBlQ2hlY2t9YCk7XG4gIH1cbn07XG4iLCJpbXBvcnQgeyBjb21iaW5lTGF0ZXN0LCBPYnNlcnZhYmxlLCBTdWJqZWN0IH0gZnJvbSAncnhqcyc7XG5cbnR5cGUgRnVuY3Rpb25QYXRjaDxUPiA9IChjdXJyZW50VmFsdWU6IFQpID0+IFQ7XG5cbi8qKlxuICogQSB2YWx1ZSBvciBhIGZ1bmN0aW9uIHdoaWNoIHRha2VzIHRoZSBjdXJyZW50IHZhbHVlIGFuZCByZXR1cm5zIGEgbmV3IHZhbHVlLlxuICovXG5leHBvcnQgdHlwZSBQYXRjaDxUPiA9IFQgfCBGdW5jdGlvblBhdGNoPFQ+O1xuXG4vKipcbiAqIENoZWNrcyBpZiB0aGUgcHJvdmlkZWQgdXBkYXRlIGlzIGEgZnVuY3Rpb24gcGF0Y2guXG4gKlxuICogQHBhcmFtIHVwZGF0ZSB0aGUgdmFsdWUgdG8gY2hlY2suXG4gKi9cbmNvbnN0IGlzRnVuY3Rpb25QYXRjaCA9IDxUPih1cGRhdGU6IFBhdGNoPFQ+KTogdXBkYXRlIGlzIEZ1bmN0aW9uUGF0Y2g8VD4gPT5cbiAgdHlwZW9mIHVwZGF0ZSA9PT0gJ2Z1bmN0aW9uJztcblxuLyoqXG4gKiBHZXRzIHRoZSBjdXJyZW50IHZhbHVlIG9mIGFuIG9ic2VydmFibGUsIG9yIHVuZGVmaW5lZCBpZiB0aGUgb2JzZXJ2YWJsZSBoYXNcbiAqIG5vdCBlbWl0dGVkIGEgdmFsdWUgeWV0LlxuICpcbiAqIEBwYXJhbSBvYnNlcnZhYmxlJCB0aGUgb2JzZXJ2YWJsZSB0byBnZXQgdGhlIHZhbHVlIGZyb20uXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRDdXJyZW50VmFsdWUgPSA8VD4ob2JzZXJ2YWJsZSQ6IE9ic2VydmFibGU8VD4pID0+IHtcbiAgbGV0IHZhbHVlITogVDtcbiAgbGV0IGVycjogRXJyb3IgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG4gIGNvbWJpbmVMYXRlc3QoW29ic2VydmFibGUkXSlcbiAgICAuc3Vic2NyaWJlKHtcbiAgICAgIG5leHQ6IChbdl0pID0+IHtcbiAgICAgICAgdmFsdWUgPSB2O1xuICAgICAgfSxcbiAgICAgIGVycm9yOiAoZSkgPT4ge1xuICAgICAgICBlcnIgPSBlO1xuICAgICAgfSxcbiAgICB9KVxuICAgIC51bnN1YnNjcmliZSgpO1xuXG4gIGlmIChlcnIpIHRocm93IGVycjtcbiAgcmV0dXJuIHZhbHVlO1xufTtcblxuLyoqXG4gKiBVcGRhdGVzIHRoZSB2YWx1ZSBvZiB0aGUgcHJvdmlkZWQgU3ViamVjdC5cbiAqIEFuIGB1cGRhdGVgIGNhbiBlaXRoZXIgYmUgYSBuZXcgdmFsdWUgb3IgYSBmdW5jdGlvbiB3aGljaCB0YWtlc1xuICogdGhlIGN1cnJlbnQgdmFsdWUgYW5kIHJldHVybnMgYSBuZXcgdmFsdWUuXG4gKlxuICogQHBhcmFtIHN1YmplY3QgdGhlIHN1YmplY3QgdG8gdXBkYXRlLlxuICogQHBhcmFtIHVwZGF0ZSB0aGUgdXBkYXRlIHRvIGFwcGx5IHRvIHRoZSBzdWJqZWN0LlxuICogQHJldHVybiB0aGUgdXBkYXRlZCB2YWx1ZS5cbiAqL1xuZXhwb3J0IGNvbnN0IHNldEN1cnJlbnRWYWx1ZSA9IDxUPihzdWJqZWN0OiBTdWJqZWN0PFQ+LCB1cGRhdGU6IFBhdGNoPFQ+KSA9PiB7XG4gIGNvbnN0IG5leHQgPSBpc0Z1bmN0aW9uUGF0Y2godXBkYXRlKVxuICAgID8gdXBkYXRlKGdldEN1cnJlbnRWYWx1ZShzdWJqZWN0KSlcbiAgICA6IHVwZGF0ZTtcblxuICBzdWJqZWN0Lm5leHQobmV4dCk7XG4gIHJldHVybiBuZXh0O1xufTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgc3Vic2NyaXB0aW9uIGFuZCByZXR1cm5zIGEgZnVuY3Rpb24gdG8gdW5zdWJzY3JpYmUuXG4gKlxuICogQHBhcmFtIG9ic2VydmFibGUgdGhlIG9ic2VydmFibGUgdG8gc3Vic2NyaWJlIHRvLlxuICogQHBhcmFtIGhhbmRsZXIgdGhlIGhhbmRsZXIgdG8gY2FsbCB3aGVuIHRoZSBvYnNlcnZhYmxlIGVtaXRzIGEgdmFsdWUuXG4gKi9cbmV4cG9ydCBjb25zdCBjcmVhdGVTdWJzY3JpcHRpb24gPSA8VD4oXG4gIG9ic2VydmFibGU6IE9ic2VydmFibGU8VD4sXG4gIGhhbmRsZXI6ICh2YWx1ZTogVCkgPT4gdm9pZCxcbikgPT4ge1xuICBjb25zdCBzdWJzY3JpcHRpb24gPSBvYnNlcnZhYmxlLnN1YnNjcmliZShoYW5kbGVyKTtcbiAgcmV0dXJuICgpID0+IHtcbiAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgfTtcbn07XG4iLCIvKipcbiAqIERlZmluZXMgYSBjb21wYXJhdG9yIGZ1bmN0aW9uIHdoaWNoIGNhbiBiZSB1c2VkIGZvciBzb3J0aW5nIGl0ZW1zLlxuICovXG5leHBvcnQgdHlwZSBDb21wYXJhdG9yPFQ+ID0gKGE6IFQsIGI6IFQpID0+IC0xIHwgMCB8IDE7XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBjb21iaW5lZCB7QGxpbmsgQ29tcGFyYXRvcjxUPn0gd2hpY2ggc29ydHMgaXRlbXMgYnkgdGhlIGdpdmVuIGNvbXBhcmF0b3JzLlxuICogVGhlIGNvbXBhcmF0b3JzIGFyZSBhcHBsaWVkIGluIHRoZSBvcmRlciB0aGV5IGFyZSBnaXZlbiAobGVmdCAtPiByaWdodCkuXG4gKlxuICogQHBhcmFtIGNvbXBhcmF0b3JzIHRoZSBjb21wYXJhdG9ycyB0byB1c2UgZm9yIHNvcnRpbmcuXG4gKiBAcmV0dXJucyBhIGNvbWJpbmVkIHtAbGluayBDb21wYXJhdG9yPFQ+fS5cbiAqL1xuZXhwb3J0IGNvbnN0IGNvbWJpbmVDb21wYXJhdG9ycyA9IDxUPihcbiAgLi4uY29tcGFyYXRvcnM6IENvbXBhcmF0b3I8VD5bXVxuKTogQ29tcGFyYXRvcjxUPiA9PiB7XG4gIHJldHVybiAoYSwgYikgPT4ge1xuICAgIGZvciAoY29uc3QgY29tcGFyYXRvciBvZiBjb21wYXJhdG9ycykge1xuICAgICAgY29uc3QgcmVzdWx0ID0gY29tcGFyYXRvcihhLCBiKTtcbiAgICAgIGlmIChyZXN1bHQgIT09IDApIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIHJldHVybiAwO1xuICB9O1xufTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IGNvbXBhcmF0b3Igd2hpY2ggc29ydHMgaXRlbXMgaW4gZGVzY2VuZGluZyBvcmRlci5cbiAqXG4gKiBAZXhhbXBsZVxuICogY29uc3QgYnlWYWx1ZSA9IChhLCBiKSA9PiBhIDwgYiA/IC0gMSA6IGEgPiBiID8gMSA6IDA7XG4gKiBjb25zdCBieVZhbHVlRGVzYyA9IGRlc2NlbmRpbmcoYnlWYWx1ZSk7XG4gKlxuICogQHBhcmFtIGNvbXBhcmF0b3IgdGhlIGNvbXBhcmF0b3IgdG8gd3JhcC5cbiAqL1xuZXhwb3J0IGNvbnN0IGRlc2NlbmRpbmcgPSA8VD4oY29tcGFyYXRvcjogQ29tcGFyYXRvcjxUPik6IENvbXBhcmF0b3I8VD4gPT4ge1xuICByZXR1cm4gKGEsIGIpID0+IGNvbXBhcmF0b3IoYiwgYSk7XG59O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgY29tcGFyYXRvciB3aGljaCBjb25kaXRpb25hbGx5IGFwcGxpZXMgdGhlIGdpdmVuIGNvbXBhcmF0b3IuXG4gKlxuICogQGV4YW1wbGVcbiAqIGNvbnN0IHNob3VsZFNvcnRCeVZhbHVlID0gKGEsIGIpID0+IGEgJSAyID09PSAwOyAvLyByZXR1cm4gZmFsc2UgdG8gdHVybiBpdCBvZmZcbiAqIGNvbnN0IGJ5VmFsdWUgPSAoYSwgYikgPT4gYSA8IGIgPyAtIDEgOiBhID4gYiA/IDEgOiAwO1xuICogY29uc3QgY29tcGFyYXRvciA9IGNvbmRpdGlvbmFsKHNob3VsZFNvcnRCeVZhbHVlKShieVZhbHVlKTtcbiAqXG4gKiBAcGFyYW0gcHJlZGljYXRlIHRoZSBwcmVkaWNhdGUgdG8gdXNlIGZvciBkZXRlcm1pbmluZyB3aGV0aGVyIHRvIGFwcGx5IHRoZSBjb21wYXJhdG9yLlxuICovXG5leHBvcnQgY29uc3QgY29uZGl0aW9uYWwgPSA8VD4ocHJlZGljYXRlOiAoYTogVCwgYjogVCkgPT4gYm9vbGVhbikgPT4ge1xuICByZXR1cm4gKGNvbXBhcmF0b3I6IENvbXBhcmF0b3I8VD4pOiBDb21wYXJhdG9yPFQ+ID0+IHtcbiAgICByZXR1cm4gKGEsIGIpID0+IHtcbiAgICAgIGlmICghcHJlZGljYXRlKGEsIGIpKSByZXR1cm4gMDtcbiAgICAgIHJldHVybiBjb21wYXJhdG9yKGEsIGIpO1xuICAgIH07XG4gIH07XG59O1xuXG4vKipcbiAqIEEgbm8tb3AgY29tcGFyYXRvciB3aGljaCBhbHdheXMgcmV0dXJucyAwLlxuICovXG5leHBvcnQgY29uc3Qgbm9vcENvbXBhcmF0b3IgPSA8VD4oKTogQ29tcGFyYXRvcjxUPiA9PiB7XG4gIHJldHVybiAoKSA9PiAwO1xufTtcbiIsImltcG9ydCB7IENvbXBhcmF0b3IgfSBmcm9tICcuLyc7XG5pbXBvcnQgeyBUcmFja1R5cGUgfSBmcm9tICcuLi9nZW4vdmlkZW8vc2Z1L21vZGVscy9tb2RlbHMnO1xuaW1wb3J0IHsgU3RyZWFtVmlkZW9QYXJ0aWNpcGFudCB9IGZyb20gJy4uL3R5cGVzJztcblxuLyoqXG4gKiBBIGNvbXBhcmF0b3Igd2hpY2ggc29ydHMgcGFydGljaXBhbnRzIGJ5IHRoZSBmYWN0IHRoYXQgdGhleSBhcmUgdGhlIGRvbWluYW50IHNwZWFrZXIgb3Igbm90LlxuICpcbiAqIEBwYXJhbSBhIHRoZSBmaXJzdCBwYXJ0aWNpcGFudC5cbiAqIEBwYXJhbSBiIHRoZSBzZWNvbmQgcGFydGljaXBhbnQuXG4gKi9cbmV4cG9ydCBjb25zdCBkb21pbmFudFNwZWFrZXI6IENvbXBhcmF0b3I8U3RyZWFtVmlkZW9QYXJ0aWNpcGFudD4gPSAoYSwgYikgPT4ge1xuICBpZiAoYS5pc0RvbWluYW50U3BlYWtlciAmJiAhYi5pc0RvbWluYW50U3BlYWtlcikgcmV0dXJuIC0xO1xuICBpZiAoIWEuaXNEb21pbmFudFNwZWFrZXIgJiYgYi5pc0RvbWluYW50U3BlYWtlcikgcmV0dXJuIDE7XG4gIHJldHVybiAwO1xufTtcblxuLyoqXG4gKiBBIGNvbXBhcmF0b3Igd2hpY2ggc29ydHMgcGFydGljaXBhbnRzIGJ5IHRoZSBmYWN0IHRoYXQgdGhleSBhcmUgc3BlYWtpbmcgb3Igbm90LlxuICpcbiAqIEBwYXJhbSBhIHRoZSBmaXJzdCBwYXJ0aWNpcGFudC5cbiAqIEBwYXJhbSBiIHRoZSBzZWNvbmQgcGFydGljaXBhbnQuXG4gKi9cbmV4cG9ydCBjb25zdCBzcGVha2luZzogQ29tcGFyYXRvcjxTdHJlYW1WaWRlb1BhcnRpY2lwYW50PiA9IChhLCBiKSA9PiB7XG4gIGlmIChhLmlzU3BlYWtpbmcgJiYgIWIuaXNTcGVha2luZykgcmV0dXJuIC0xO1xuICBpZiAoIWEuaXNTcGVha2luZyAmJiBiLmlzU3BlYWtpbmcpIHJldHVybiAxO1xuICByZXR1cm4gMDtcbn07XG5cbi8qKlxuICogQSBjb21wYXJhdG9yIHdoaWNoIHNvcnRzIHBhcnRpY2lwYW50cyBieSBzY3JlZW4gc2hhcmluZyBzdGF0dXMuXG4gKlxuICogQHBhcmFtIGEgdGhlIGZpcnN0IHBhcnRpY2lwYW50LlxuICogQHBhcmFtIGIgdGhlIHNlY29uZCBwYXJ0aWNpcGFudC5cbiAqL1xuZXhwb3J0IGNvbnN0IHNjcmVlblNoYXJpbmc6IENvbXBhcmF0b3I8U3RyZWFtVmlkZW9QYXJ0aWNpcGFudD4gPSAoYSwgYikgPT4ge1xuICBpZiAoaGFzU2NyZWVuU2hhcmUoYSkgJiYgIWhhc1NjcmVlblNoYXJlKGIpKSByZXR1cm4gLTE7XG4gIGlmICghaGFzU2NyZWVuU2hhcmUoYSkgJiYgaGFzU2NyZWVuU2hhcmUoYikpIHJldHVybiAxO1xuICByZXR1cm4gMDtcbn07XG5cbi8qKlxuICogQSBjb21wYXJhdG9yIHdoaWNoIHNvcnRzIHBhcnRpY2lwYW50cyBieSB2aWRlbyBzdGF0dXMuXG4gKlxuICogQHBhcmFtIGEgdGhlIGZpcnN0IHBhcnRpY2lwYW50LlxuICogQHBhcmFtIGIgdGhlIHNlY29uZCBwYXJ0aWNpcGFudC5cbiAqL1xuZXhwb3J0IGNvbnN0IHB1Ymxpc2hpbmdWaWRlbzogQ29tcGFyYXRvcjxTdHJlYW1WaWRlb1BhcnRpY2lwYW50PiA9IChhLCBiKSA9PiB7XG4gIGlmIChoYXNWaWRlbyhhKSAmJiAhaGFzVmlkZW8oYikpIHJldHVybiAtMTtcbiAgaWYgKCFoYXNWaWRlbyhhKSAmJiBoYXNWaWRlbyhiKSkgcmV0dXJuIDE7XG4gIHJldHVybiAwO1xufTtcblxuLyoqXG4gKiBBIGNvbXBhcmF0b3Igd2hpY2ggc29ydHMgcGFydGljaXBhbnRzIGJ5IGF1ZGlvIHN0YXR1cy5cbiAqXG4gKiBAcGFyYW0gYSB0aGUgZmlyc3QgcGFydGljaXBhbnQuXG4gKiBAcGFyYW0gYiB0aGUgc2Vjb25kIHBhcnRpY2lwYW50LlxuICovXG5leHBvcnQgY29uc3QgcHVibGlzaGluZ0F1ZGlvOiBDb21wYXJhdG9yPFN0cmVhbVZpZGVvUGFydGljaXBhbnQ+ID0gKGEsIGIpID0+IHtcbiAgaWYgKGhhc0F1ZGlvKGEpICYmICFoYXNBdWRpbyhiKSkgcmV0dXJuIC0xO1xuICBpZiAoIWhhc0F1ZGlvKGEpICYmIGhhc0F1ZGlvKGIpKSByZXR1cm4gMTtcbiAgcmV0dXJuIDA7XG59O1xuXG4vKipcbiAqIEEgY29tcGFyYXRvciB3aGljaCBwcmlvcml0aXplcyBwYXJ0aWNpcGFudHMgd2hvIGFyZSBwaW5uZWQuXG4gKlxuICogQHBhcmFtIGEgdGhlIGZpcnN0IHBhcnRpY2lwYW50LlxuICogQHBhcmFtIGIgdGhlIHNlY29uZCBwYXJ0aWNpcGFudC5cbiAqL1xuZXhwb3J0IGNvbnN0IHBpbm5lZDogQ29tcGFyYXRvcjxTdHJlYW1WaWRlb1BhcnRpY2lwYW50PiA9IChhLCBiKSA9PiB7XG4gIGlmIChhLnBpbiAmJiBiLnBpbikge1xuICAgIGlmICghYS5waW4uaXNMb2NhbFBpbiAmJiBiLnBpbi5pc0xvY2FsUGluKSByZXR1cm4gLTE7XG4gICAgaWYgKGEucGluLmlzTG9jYWxQaW4gJiYgIWIucGluLmlzTG9jYWxQaW4pIHJldHVybiAxO1xuICAgIGlmIChhLnBpbi5waW5uZWRBdCA+IGIucGluLnBpbm5lZEF0KSByZXR1cm4gLTE7XG4gICAgaWYgKGEucGluLnBpbm5lZEF0IDwgYi5waW4ucGlubmVkQXQpIHJldHVybiAxO1xuICB9XG5cbiAgaWYgKGEucGluICYmICFiLnBpbikgcmV0dXJuIC0xO1xuICBpZiAoIWEucGluICYmIGIucGluKSByZXR1cm4gMTtcblxuICByZXR1cm4gMDtcbn07XG5cbi8qKlxuICogQSBjb21wYXJhdG9yIGNyZWF0b3Igd2hpY2ggd2lsbCBzZXQgdXAgYSBjb21wYXJhdG9yIHdoaWNoIHByaW9yaXRpemVzXG4gKiBwYXJ0aWNpcGFudHMgd2hvIGhhdmUgYSBzcGVjaWZpYyByZWFjdGlvbi5cbiAqXG4gKiBAcGFyYW0gdHlwZSB0aGUgcmVhY3Rpb24gdHlwZS5cbiAqL1xuZXhwb3J0IGNvbnN0IHJlYWN0aW9uVHlwZSA9IChcbiAgdHlwZTogc3RyaW5nLFxuKTogQ29tcGFyYXRvcjxTdHJlYW1WaWRlb1BhcnRpY2lwYW50PiA9PiB7XG4gIHJldHVybiAoYSwgYikgPT4ge1xuICAgIGlmIChhLnJlYWN0aW9uPy50eXBlID09PSB0eXBlICYmIGIucmVhY3Rpb24/LnR5cGUgIT09IHR5cGUpIHJldHVybiAtMTtcbiAgICBpZiAoYS5yZWFjdGlvbj8udHlwZSAhPT0gdHlwZSAmJiBiLnJlYWN0aW9uPy50eXBlID09PSB0eXBlKSByZXR1cm4gMTtcbiAgICByZXR1cm4gMDtcbiAgfTtcbn07XG5cbi8qKlxuICogQSBjb21wYXJhdG9yIGNyZWF0b3Igd2hpY2ggd2lsbCBzZXQgdXAgYSBjb21wYXJhdG9yIHdoaWNoIHByaW9yaXRpemVzXG4gKiBwYXJ0aWNpcGFudHMgd2hvIGhhdmUgYSBzcGVjaWZpYyByb2xlLlxuICpcbiAqIEBwYXJhbSByb2xlcyB0aGUgcm9sZXMgdG8gcHJpb3JpdGl6ZS5cbiAqL1xuZXhwb3J0IGNvbnN0IHJvbGUgPVxuICAoLi4ucm9sZXM6IHN0cmluZ1tdKTogQ29tcGFyYXRvcjxTdHJlYW1WaWRlb1BhcnRpY2lwYW50PiA9PlxuICAoYSwgYikgPT4ge1xuICAgIGlmIChoYXNBbnlSb2xlKGEsIHJvbGVzKSAmJiAhaGFzQW55Um9sZShiLCByb2xlcykpIHJldHVybiAtMTtcbiAgICBpZiAoIWhhc0FueVJvbGUoYSwgcm9sZXMpICYmIGhhc0FueVJvbGUoYiwgcm9sZXMpKSByZXR1cm4gMTtcbiAgICByZXR1cm4gMDtcbiAgfTtcblxuLyoqXG4gKiBBIGNvbXBhcmF0b3Igd2hpY2ggc29ydHMgcGFydGljaXBhbnRzIGJ5IG5hbWUuXG4gKlxuICogQHBhcmFtIGEgdGhlIGZpcnN0IHBhcnRpY2lwYW50LlxuICogQHBhcmFtIGIgdGhlIHNlY29uZCBwYXJ0aWNpcGFudC5cbiAqL1xuZXhwb3J0IGNvbnN0IG5hbWU6IENvbXBhcmF0b3I8U3RyZWFtVmlkZW9QYXJ0aWNpcGFudD4gPSAoYSwgYikgPT4ge1xuICBpZiAoYS5uYW1lIDwgYi5uYW1lKSByZXR1cm4gLTE7XG4gIGlmIChhLm5hbWUgPiBiLm5hbWUpIHJldHVybiAxO1xuICByZXR1cm4gMDtcbn07XG5cbmNvbnN0IGhhc0FueVJvbGUgPSAocDogU3RyZWFtVmlkZW9QYXJ0aWNpcGFudCwgcm9sZXM6IHN0cmluZ1tdKSA9PlxuICAocC5yb2xlcyB8fCBbXSkuc29tZSgocikgPT4gcm9sZXMuaW5jbHVkZXMocikpO1xuXG5jb25zdCBoYXNTY3JlZW5TaGFyZSA9IChwOiBTdHJlYW1WaWRlb1BhcnRpY2lwYW50KSA9PlxuICBwLnB1Ymxpc2hlZFRyYWNrcy5pbmNsdWRlcyhUcmFja1R5cGUuU0NSRUVOX1NIQVJFKTtcblxuY29uc3QgaGFzVmlkZW8gPSAocDogU3RyZWFtVmlkZW9QYXJ0aWNpcGFudCkgPT5cbiAgcC5wdWJsaXNoZWRUcmFja3MuaW5jbHVkZXMoVHJhY2tUeXBlLlZJREVPKTtcblxuY29uc3QgaGFzQXVkaW8gPSAocDogU3RyZWFtVmlkZW9QYXJ0aWNpcGFudCkgPT5cbiAgcC5wdWJsaXNoZWRUcmFja3MuaW5jbHVkZXMoVHJhY2tUeXBlLkFVRElPKTtcbiIsImltcG9ydCB7IFN0cmVhbVZpZGVvUGFydGljaXBhbnQsIFZpc2liaWxpdHlTdGF0ZSB9IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCB7IGNvbWJpbmVDb21wYXJhdG9ycywgY29uZGl0aW9uYWwgfSBmcm9tICcuL2NvbXBhcmF0b3InO1xuaW1wb3J0IHtcbiAgZG9taW5hbnRTcGVha2VyLFxuICBwaW5uZWQsXG4gIHB1Ymxpc2hpbmdBdWRpbyxcbiAgcHVibGlzaGluZ1ZpZGVvLFxuICByZWFjdGlvblR5cGUsXG4gIHJvbGUsXG4gIHNjcmVlblNoYXJpbmcsXG4gIHNwZWFraW5nLFxufSBmcm9tICcuL3BhcnRpY2lwYW50cyc7XG5cbi8vIGEgY29tcGFyYXRvciBkZWNvcmF0b3Igd2hpY2ggYXBwbGllcyB0aGUgZGVjb3JhdGVkIGNvbXBhcmF0b3Igb25seSBpZiB0aGVcbi8vIHBhcnRpY2lwYW50IGlzIGludmlzaWJsZS5cbi8vIFRoaXMgZW5zdXJlcyBzdGFibGUgc29ydGluZyB3aGVuIGFsbCBwYXJ0aWNpcGFudHMgYXJlIHZpc2libGUuXG5jb25zdCBpZkludmlzaWJsZUJ5ID0gY29uZGl0aW9uYWwoXG4gIChhOiBTdHJlYW1WaWRlb1BhcnRpY2lwYW50LCBiOiBTdHJlYW1WaWRlb1BhcnRpY2lwYW50KSA9PlxuICAgIGEudmlld3BvcnRWaXNpYmlsaXR5U3RhdGU/LnZpZGVvVHJhY2sgPT09IFZpc2liaWxpdHlTdGF0ZS5JTlZJU0lCTEUgfHxcbiAgICBiLnZpZXdwb3J0VmlzaWJpbGl0eVN0YXRlPy52aWRlb1RyYWNrID09PSBWaXNpYmlsaXR5U3RhdGUuSU5WSVNJQkxFLFxuKTtcblxuLyoqXG4gKiBBIGNvbXBhcmF0b3IgdGhhdCBhcHBsaWVzIHRoZSBkZWNvcmF0ZWQgY29tcGFyYXRvciB3aGVuIGEgcGFydGljaXBhbnQgaXNcbiAqIGVpdGhlciBpbnZpc2libGUgb3IgaXRzIHZpc2liaWxpdHkgc3RhdGUgaXNuJ3Qga25vd24uXG4gKiBGb3IgdmlzaWJsZSBwYXJ0aWNpcGFudHMsIGl0IGVuc3VyZXMgc3RhYmxlIHNvcnRpbmcuXG4gKi9cbmNvbnN0IGlmSW52aXNpYmxlT3JVbmtub3duQnkgPSBjb25kaXRpb25hbChcbiAgKGE6IFN0cmVhbVZpZGVvUGFydGljaXBhbnQsIGI6IFN0cmVhbVZpZGVvUGFydGljaXBhbnQpID0+XG4gICAgYS52aWV3cG9ydFZpc2liaWxpdHlTdGF0ZT8udmlkZW9UcmFjayA9PT0gVmlzaWJpbGl0eVN0YXRlLklOVklTSUJMRSB8fFxuICAgIGEudmlld3BvcnRWaXNpYmlsaXR5U3RhdGU/LnZpZGVvVHJhY2sgPT09IFZpc2liaWxpdHlTdGF0ZS5VTktOT1dOIHx8XG4gICAgYi52aWV3cG9ydFZpc2liaWxpdHlTdGF0ZT8udmlkZW9UcmFjayA9PT0gVmlzaWJpbGl0eVN0YXRlLklOVklTSUJMRSB8fFxuICAgIGIudmlld3BvcnRWaXNpYmlsaXR5U3RhdGU/LnZpZGVvVHJhY2sgPT09IFZpc2liaWxpdHlTdGF0ZS5VTktOT1dOLFxuKTtcblxuLyoqXG4gKiBUaGUgZGVmYXVsdCBzb3J0aW5nIHByZXNldC5cbiAqL1xuZXhwb3J0IGNvbnN0IGRlZmF1bHRTb3J0UHJlc2V0ID0gY29tYmluZUNvbXBhcmF0b3JzKFxuICBwaW5uZWQsXG4gIHNjcmVlblNoYXJpbmcsXG4gIGlmSW52aXNpYmxlQnkoXG4gICAgY29tYmluZUNvbXBhcmF0b3JzKFxuICAgICAgZG9taW5hbnRTcGVha2VyLFxuICAgICAgc3BlYWtpbmcsXG4gICAgICByZWFjdGlvblR5cGUoJ3JhaXNlZC1oYW5kJyksXG4gICAgICBwdWJsaXNoaW5nVmlkZW8sXG4gICAgICBwdWJsaXNoaW5nQXVkaW8sXG4gICAgKSxcbiAgKSxcbiAgLy8gaWZJbnZpc2libGVCeShuYW1lKSxcbik7XG5cbi8qKlxuICogVGhlIHNvcnRpbmcgcHJlc2V0IGZvciBzcGVha2VyIGxheW91dC5cbiAqL1xuZXhwb3J0IGNvbnN0IHNwZWFrZXJMYXlvdXRTb3J0UHJlc2V0ID0gY29tYmluZUNvbXBhcmF0b3JzKFxuICBwaW5uZWQsXG4gIHNjcmVlblNoYXJpbmcsXG4gIGRvbWluYW50U3BlYWtlcixcbiAgaWZJbnZpc2libGVCeShcbiAgICBjb21iaW5lQ29tcGFyYXRvcnMoXG4gICAgICBzcGVha2luZyxcbiAgICAgIHJlYWN0aW9uVHlwZSgncmFpc2VkLWhhbmQnKSxcbiAgICAgIHB1Ymxpc2hpbmdWaWRlbyxcbiAgICAgIHB1Ymxpc2hpbmdBdWRpbyxcbiAgICApLFxuICApLFxuICAvLyBpZkludmlzaWJsZUJ5KG5hbWUpLFxuKTtcblxuLyoqXG4gKiBUaGUgc29ydGluZyBwcmVzZXQgZm9yIGxheW91dHMgdGhhdCBkb24ndCByZW5kZXIgYWxsIHBhcnRpY2lwYW50cyBidXRcbiAqIGluc3RlYWQsIHJlbmRlciB0aGVtIGluIHBhZ2VzLlxuICovXG5leHBvcnQgY29uc3QgcGFnaW5hdGVkTGF5b3V0U29ydFByZXNldCA9IGNvbWJpbmVDb21wYXJhdG9ycyhcbiAgcGlubmVkLFxuICBpZkludmlzaWJsZU9yVW5rbm93bkJ5KFxuICAgIGNvbWJpbmVDb21wYXJhdG9ycyhcbiAgICAgIGRvbWluYW50U3BlYWtlcixcbiAgICAgIHNwZWFraW5nLFxuICAgICAgcmVhY3Rpb25UeXBlKCdyYWlzZWQtaGFuZCcpLFxuICAgICAgcHVibGlzaGluZ1ZpZGVvLFxuICAgICAgcHVibGlzaGluZ0F1ZGlvLFxuICAgICksXG4gICksXG4gIC8vIGlmSW52aXNpYmxlT3JVbmtub3duQnkobmFtZSksXG4pO1xuXG4vKipcbiAqIFRoZSBzb3J0aW5nIHByZXNldCBmb3IgbGl2ZXN0cmVhbXMgYW5kIGF1ZGlvIHJvb21zLlxuICovXG5leHBvcnQgY29uc3QgbGl2ZXN0cmVhbU9yQXVkaW9Sb29tU29ydFByZXNldCA9IGNvbWJpbmVDb21wYXJhdG9ycyhcbiAgaWZJbnZpc2libGVCeShcbiAgICBjb21iaW5lQ29tcGFyYXRvcnMoXG4gICAgICBkb21pbmFudFNwZWFrZXIsXG4gICAgICBzcGVha2luZyxcbiAgICAgIHJlYWN0aW9uVHlwZSgncmFpc2VkLWhhbmQnKSxcbiAgICAgIHB1Ymxpc2hpbmdWaWRlbyxcbiAgICAgIHB1Ymxpc2hpbmdBdWRpbyxcbiAgICApLFxuICApLFxuICByb2xlKCdhZG1pbicsICdob3N0JywgJ3NwZWFrZXInKSxcbiAgLy8gbmFtZSxcbik7XG4iLCJpbXBvcnQge1xuICBCZWhhdmlvclN1YmplY3QsXG4gIGRpc3RpbmN0VW50aWxDaGFuZ2VkLFxuICBtYXAsXG4gIE9ic2VydmFibGUsXG4gIHNoYXJlUmVwbGF5LFxufSBmcm9tICdyeGpzJztcbmltcG9ydCB0eXBlIHsgUGF0Y2ggfSBmcm9tICcuL3J4VXRpbHMnO1xuaW1wb3J0ICogYXMgUnhVdGlscyBmcm9tICcuL3J4VXRpbHMnO1xuaW1wb3J0IHtcbiAgU3RyZWFtVmlkZW9QYXJ0aWNpcGFudCxcbiAgU3RyZWFtVmlkZW9QYXJ0aWNpcGFudFBhdGNoLFxuICBTdHJlYW1WaWRlb1BhcnRpY2lwYW50UGF0Y2hlcyxcbn0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHsgQ2FsbFN0YXRzUmVwb3J0IH0gZnJvbSAnLi4vc3RhdHMvdHlwZXMnO1xuaW1wb3J0IHtcbiAgQmxvY2tlZFVzZXJFdmVudCxcbiAgQ2FsbEhMU0Jyb2FkY2FzdGluZ1N0YXJ0ZWRFdmVudCxcbiAgQ2FsbEluZ3Jlc3NSZXNwb25zZSxcbiAgQ2FsbE1lbWJlckFkZGVkRXZlbnQsXG4gIENhbGxNZW1iZXJSZW1vdmVkRXZlbnQsXG4gIENhbGxNZW1iZXJVcGRhdGVkRXZlbnQsXG4gIENhbGxNZW1iZXJVcGRhdGVkUGVybWlzc2lvbkV2ZW50LFxuICBDYWxsUmVhY3Rpb25FdmVudCxcbiAgQ2FsbFJlc3BvbnNlLFxuICBDYWxsU2Vzc2lvblBhcnRpY2lwYW50Sm9pbmVkRXZlbnQsXG4gIENhbGxTZXNzaW9uUGFydGljaXBhbnRMZWZ0RXZlbnQsXG4gIENhbGxTZXNzaW9uUmVzcG9uc2UsXG4gIENhbGxTZXR0aW5nc1Jlc3BvbnNlLFxuICBFZ3Jlc3NSZXNwb25zZSxcbiAgTWVtYmVyUmVzcG9uc2UsXG4gIE93bkNhcGFiaWxpdHksXG4gIFRodW1ibmFpbFJlc3BvbnNlLFxuICBVbmJsb2NrZWRVc2VyRXZlbnQsXG4gIFVwZGF0ZWRDYWxsUGVybWlzc2lvbnNFdmVudCxcbiAgVXNlclJlc3BvbnNlLFxuICBWaWRlb0V2ZW50LFxufSBmcm9tICcuLi9nZW4vY29vcmRpbmF0b3InO1xuaW1wb3J0IHsgUGluLCBUcmFja1R5cGUgfSBmcm9tICcuLi9nZW4vdmlkZW8vc2Z1L21vZGVscy9tb2RlbHMnO1xuaW1wb3J0IHsgQ29tcGFyYXRvciB9IGZyb20gJy4uL3NvcnRpbmcnO1xuaW1wb3J0ICogYXMgU29ydGluZ1ByZXNldCBmcm9tICcuLi9zb3J0aW5nL3ByZXNldHMnO1xuaW1wb3J0IHsgZ2V0TG9nZ2VyIH0gZnJvbSAnLi4vbG9nZ2VyJztcbmltcG9ydCB7IExvZ2dlciB9IGZyb20gJy4uL2Nvb3JkaW5hdG9yL2Nvbm5lY3Rpb24vdHlwZXMnO1xuXG4vKipcbiAqIFJlcHJlc2VudHMgdGhlIHN0YXRlIG9mIHRoZSBjdXJyZW50IGNhbGwuXG4gKi9cbmV4cG9ydCBlbnVtIENhbGxpbmdTdGF0ZSB7XG4gIC8qKlxuICAgKiBUaGUgY2FsbCBpcyBpbiBhbiB1bmtub3duIHN0YXRlLlxuICAgKi9cbiAgVU5LTk9XTiA9ICd1bmtub3duJyxcbiAgLyoqXG4gICAqIFRoZSBjYWxsIGlzIGluIGFuIGlkbGUgc3RhdGUuXG4gICAqL1xuICBJRExFID0gJ2lkbGUnLFxuXG4gIC8qKlxuICAgKiBUaGUgY2FsbCBpcyBpbiB0aGUgcHJvY2VzcyBvZiByaW5naW5nLlxuICAgKiAoVXNlciBoYXNuJ3QgYWNjZXB0ZWQgbm9yIHJlamVjdGVkIHRoZSBjYWxsIHlldC4pXG4gICAqL1xuICBSSU5HSU5HID0gJ3JpbmdpbmcnLFxuXG4gIC8qKlxuICAgKiBUaGUgY2FsbCBpcyBpbiB0aGUgcHJvY2VzcyBvZiBqb2luaW5nLlxuICAgKi9cbiAgSk9JTklORyA9ICdqb2luaW5nJyxcblxuICAvKipcbiAgICogVGhlIGNhbGwgaXMgY3VycmVudGx5IGFjdGl2ZS5cbiAgICovXG4gIEpPSU5FRCA9ICdqb2luZWQnLFxuXG4gIC8qKlxuICAgKiBUaGUgY2FsbCBoYXMgYmVlbiBsZWZ0LlxuICAgKi9cbiAgTEVGVCA9ICdsZWZ0JyxcblxuICAvKipcbiAgICogVGhlIGNhbGwgaXMgaW4gdGhlIHByb2Nlc3Mgb2YgcmVjb25uZWN0aW5nLlxuICAgKi9cbiAgUkVDT05ORUNUSU5HID0gJ3JlY29ubmVjdGluZycsXG5cbiAgLyoqXG4gICAqIFRoZSBjYWxsIGlzIGluIHRoZSBwcm9jZXNzIG9mIG1pZ3JhdGluZyBmcm9tIG9uZSBub2RlIHRvIGFub3RoZXIuXG4gICAqL1xuICBNSUdSQVRJTkcgPSAnbWlncmF0aW5nJyxcblxuICAvKipcbiAgICogVGhlIGNhbGwgaGFzIGZhaWxlZCB0byByZWNvbm5lY3QuXG4gICAqL1xuICBSRUNPTk5FQ1RJTkdfRkFJTEVEID0gJ3JlY29ubmVjdGluZy1mYWlsZWQnLFxuXG4gIC8qKlxuICAgKiBUaGUgY2FsbCBpcyBpbiBvZmZsaW5lIG1vZGUuXG4gICAqL1xuICBPRkZMSU5FID0gJ29mZmxpbmUnLFxufVxuXG4vKipcbiAqIEhvbGRzIHRoZSBzdGF0ZSBvZiB0aGUgY3VycmVudCBjYWxsLlxuICogQHJlYWN0IFlvdSBkb24ndCBoYXZlIHRvIHVzZSB0aGlzIGNsYXNzIGRpcmVjdGx5LCBhcyB3ZSBhcmUgZXhwb3NpbmcgdGhlIHN0YXRlIHRocm91Z2ggSG9va3MuXG4gKi9cbmV4cG9ydCBjbGFzcyBDYWxsU3RhdGUge1xuICBwcml2YXRlIGJhY2tzdGFnZVN1YmplY3QgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PGJvb2xlYW4+KHRydWUpO1xuICBwcml2YXRlIGJsb2NrZWRVc2VySWRzU3ViamVjdCA9IG5ldyBCZWhhdmlvclN1YmplY3Q8c3RyaW5nW10+KFtdKTtcbiAgcHJpdmF0ZSBjcmVhdGVkQXRTdWJqZWN0ID0gbmV3IEJlaGF2aW9yU3ViamVjdDxEYXRlPihuZXcgRGF0ZSgpKTtcbiAgcHJpdmF0ZSBlbmRlZEF0U3ViamVjdCA9IG5ldyBCZWhhdmlvclN1YmplY3Q8RGF0ZSB8IHVuZGVmaW5lZD4odW5kZWZpbmVkKTtcbiAgcHJpdmF0ZSBzdGFydHNBdFN1YmplY3QgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PERhdGUgfCB1bmRlZmluZWQ+KHVuZGVmaW5lZCk7XG4gIHByaXZhdGUgdXBkYXRlZEF0U3ViamVjdCA9IG5ldyBCZWhhdmlvclN1YmplY3Q8RGF0ZT4obmV3IERhdGUoKSk7XG4gIHByaXZhdGUgY3JlYXRlZEJ5U3ViamVjdCA9IG5ldyBCZWhhdmlvclN1YmplY3Q8VXNlclJlc3BvbnNlIHwgdW5kZWZpbmVkPihcbiAgICB1bmRlZmluZWQsXG4gICk7XG4gIHByaXZhdGUgY3VzdG9tU3ViamVjdCA9IG5ldyBCZWhhdmlvclN1YmplY3Q8UmVjb3JkPHN0cmluZywgYW55Pj4oe30pO1xuICBwcml2YXRlIGVncmVzc1N1YmplY3QgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PEVncmVzc1Jlc3BvbnNlIHwgdW5kZWZpbmVkPihcbiAgICB1bmRlZmluZWQsXG4gICk7XG4gIHByaXZhdGUgaW5ncmVzc1N1YmplY3QgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PENhbGxJbmdyZXNzUmVzcG9uc2UgfCB1bmRlZmluZWQ+KFxuICAgIHVuZGVmaW5lZCxcbiAgKTtcbiAgcHJpdmF0ZSByZWNvcmRpbmdTdWJqZWN0ID0gbmV3IEJlaGF2aW9yU3ViamVjdDxib29sZWFuPihmYWxzZSk7XG4gIHByaXZhdGUgc2Vzc2lvblN1YmplY3QgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PENhbGxTZXNzaW9uUmVzcG9uc2UgfCB1bmRlZmluZWQ+KFxuICAgIHVuZGVmaW5lZCxcbiAgKTtcbiAgcHJpdmF0ZSBzZXR0aW5nc1N1YmplY3QgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PFxuICAgIENhbGxTZXR0aW5nc1Jlc3BvbnNlIHwgdW5kZWZpbmVkXG4gID4odW5kZWZpbmVkKTtcbiAgcHJpdmF0ZSB0cmFuc2NyaWJpbmdTdWJqZWN0ID0gbmV3IEJlaGF2aW9yU3ViamVjdDxib29sZWFuPihmYWxzZSk7XG4gIHByaXZhdGUgZW5kZWRCeVN1YmplY3QgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PFVzZXJSZXNwb25zZSB8IHVuZGVmaW5lZD4oXG4gICAgdW5kZWZpbmVkLFxuICApO1xuICBwcml2YXRlIHRodW1ibmFpbHNTdWJqZWN0ID0gbmV3IEJlaGF2aW9yU3ViamVjdDxcbiAgICBUaHVtYm5haWxSZXNwb25zZSB8IHVuZGVmaW5lZFxuICA+KHVuZGVmaW5lZCk7XG4gIHByaXZhdGUgbWVtYmVyc1N1YmplY3QgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PE1lbWJlclJlc3BvbnNlW10+KFtdKTtcbiAgcHJpdmF0ZSBvd25DYXBhYmlsaXRpZXNTdWJqZWN0ID0gbmV3IEJlaGF2aW9yU3ViamVjdDxPd25DYXBhYmlsaXR5W10+KFtdKTtcbiAgcHJpdmF0ZSBjYWxsaW5nU3RhdGVTdWJqZWN0ID0gbmV3IEJlaGF2aW9yU3ViamVjdDxDYWxsaW5nU3RhdGU+KFxuICAgIENhbGxpbmdTdGF0ZS5VTktOT1dOLFxuICApO1xuICBwcml2YXRlIHN0YXJ0ZWRBdFN1YmplY3QgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PERhdGUgfCB1bmRlZmluZWQ+KHVuZGVmaW5lZCk7XG4gIHByaXZhdGUgcGFydGljaXBhbnRDb3VudFN1YmplY3QgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PG51bWJlcj4oMCk7XG4gIHByaXZhdGUgYW5vbnltb3VzUGFydGljaXBhbnRDb3VudFN1YmplY3QgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PG51bWJlcj4oMCk7XG4gIHByaXZhdGUgcGFydGljaXBhbnRzU3ViamVjdCA9IG5ldyBCZWhhdmlvclN1YmplY3Q8U3RyZWFtVmlkZW9QYXJ0aWNpcGFudFtdPihcbiAgICBbXSxcbiAgKTtcbiAgcHJpdmF0ZSBjYWxsU3RhdHNSZXBvcnRTdWJqZWN0ID0gbmV3IEJlaGF2aW9yU3ViamVjdDxcbiAgICBDYWxsU3RhdHNSZXBvcnQgfCB1bmRlZmluZWRcbiAgPih1bmRlZmluZWQpO1xuXG4gIC8vIERlcml2ZWQgc3RhdGVcblxuICAvKipcbiAgICogVGhlIHRpbWUgdGhlIGNhbGwgc2Vzc2lvbiBhY3R1YWxseSBzdGFydGVkLlxuICAgKiBVc2VmdWwgZm9yIGRpc3BsYXlpbmcgdGhlIGNhbGwgZHVyYXRpb24uXG4gICAqL1xuICBzdGFydGVkQXQkOiBPYnNlcnZhYmxlPERhdGUgfCB1bmRlZmluZWQ+O1xuXG4gIC8qKlxuICAgKiBUaGUgc2VydmVyLXNpZGUgY291bnRlZCBudW1iZXIgb2YgcGFydGljaXBhbnRzIGNvbm5lY3RlZCB0byB0aGUgY3VycmVudCBjYWxsLlxuICAgKiBUaGlzIG51bWJlciBpbmNsdWRlcyB0aGUgYW5vbnltb3VzIHBhcnRpY2lwYW50cyBhcyB3ZWxsLlxuICAgKi9cbiAgcGFydGljaXBhbnRDb3VudCQ6IE9ic2VydmFibGU8bnVtYmVyPjtcblxuICAvKipcbiAgICogVGhlIHNlcnZlci1zaWRlIGNvdW50ZWQgbnVtYmVyIG9mIGFub255bW91cyBwYXJ0aWNpcGFudHMgY29ubmVjdGVkIHRvIHRoZSBjdXJyZW50IGNhbGwuXG4gICAqIFRoaXMgbnVtYmVyIGV4Y2x1ZGVzIHRoZSByZWd1bGFyIHBhcnRpY2lwYW50cy5cbiAgICovXG4gIGFub255bW91c1BhcnRpY2lwYW50Q291bnQkOiBPYnNlcnZhYmxlPG51bWJlcj47XG5cbiAgLyoqXG4gICAqIEFsbCBwYXJ0aWNpcGFudHMgb2YgdGhlIGN1cnJlbnQgY2FsbCAodGhpcyBpbmNsdWRlcyB0aGUgY3VycmVudCB1c2VyIGFuZCBvdGhlciBwYXJ0aWNpcGFudHMgYXMgd2VsbCkuXG4gICAqL1xuICBwYXJ0aWNpcGFudHMkOiBPYnNlcnZhYmxlPFN0cmVhbVZpZGVvUGFydGljaXBhbnRbXT47XG5cbiAgLyoqXG4gICAqIFJlbW90ZSBwYXJ0aWNpcGFudHMgb2YgdGhlIGN1cnJlbnQgY2FsbCAodGhpcyBpbmNsdWRlcyBldmVyeSBwYXJ0aWNpcGFudCBleGNlcHQgdGhlIGxvZ2dlZC1pbiB1c2VyKS5cbiAgICovXG4gIHJlbW90ZVBhcnRpY2lwYW50cyQ6IE9ic2VydmFibGU8U3RyZWFtVmlkZW9QYXJ0aWNpcGFudFtdPjtcblxuICAvKipcbiAgICogVGhlIGxvY2FsIHBhcnRpY2lwYW50IG9mIHRoZSBjdXJyZW50IGNhbGwgKHRoZSBsb2dnZWQtaW4gdXNlcikuXG4gICAqL1xuICBsb2NhbFBhcnRpY2lwYW50JDogT2JzZXJ2YWJsZTxTdHJlYW1WaWRlb1BhcnRpY2lwYW50IHwgdW5kZWZpbmVkPjtcblxuICAvKipcbiAgICogUGlubmVkIHBhcnRpY2lwYW50cyBvZiB0aGUgY3VycmVudCBjYWxsLlxuICAgKi9cbiAgcGlubmVkUGFydGljaXBhbnRzJDogT2JzZXJ2YWJsZTxTdHJlYW1WaWRlb1BhcnRpY2lwYW50W10+O1xuXG4gIC8qKlxuICAgKiBUaGUgY3VycmVudGx5IGVsZWN0ZWQgZG9taW5hbnQgc3BlYWtlciBpbiB0aGUgY3VycmVudCBjYWxsLlxuICAgKi9cbiAgZG9taW5hbnRTcGVha2VyJDogT2JzZXJ2YWJsZTxTdHJlYW1WaWRlb1BhcnRpY2lwYW50IHwgdW5kZWZpbmVkPjtcblxuICAvKipcbiAgICogRW1pdHMgdHJ1ZSB3aGVuZXZlciB0aGVyZSBpcyBhbiBhY3RpdmUgc2NyZWVuIHNoYXJpbmcgc2Vzc2lvbiB3aXRoaW5cbiAgICogdGhlIGN1cnJlbnQgY2FsbC4gVXNlZnVsIGZvciBkaXNwbGF5aW5nIGEgXCJzY3JlZW4gc2hhcmluZ1wiIGluZGljYXRvciBhbmRcbiAgICogc3dpdGNoaW5nIHRoZSBsYXlvdXQgdG8gYSBzY3JlZW4gc2hhcmluZyBsYXlvdXQuXG4gICAqXG4gICAqIFRoZSBhY3R1YWwgc2NyZWVuIHNoYXJpbmcgdHJhY2sgaXNuJ3QgZXhwb3NlZCBoZXJlLCBidXQgY2FuIGJlIHJldHJpZXZlZFxuICAgKiBmcm9tIHRoZSBsaXN0IG9mIGNhbGwgcGFydGljaXBhbnRzLiBXZSBhbHNvIGRvbid0IHdhbnQgdG8gYmUgbGltaXRpbmdcbiAgICogdG8gdGhlIG51bWJlciBvZiBzaGFyZSBzY3JlZW4gdHJhY2tzIGFyZSBkaXNwbGF5ZWQgaW4gYSBjYWxsLlxuICAgKi9cbiAgaGFzT25nb2luZ1NjcmVlblNoYXJlJDogT2JzZXJ2YWJsZTxib29sZWFuPjtcblxuICAvKipcbiAgICogVGhlIGxhdGVzdCBzdGF0cyByZXBvcnQgb2YgdGhlIGN1cnJlbnQgY2FsbC5cbiAgICogV2hlbiBzdGF0cyBnYXRoZXJpbmcgaXMgZW5hYmxlZCwgdGhpcyBvYnNlcnZhYmxlIHdpbGwgZW1pdCBhIG5ldyB2YWx1ZVxuICAgKiBhdCBhIHJlZ3VsYXIgKGNvbmZpZ3VyYWJsZSkgaW50ZXJ2YWwuXG4gICAqXG4gICAqIENvbnN1bWVycyBvZiB0aGlzIG9ic2VydmFibGUgY2FuIGltcGxlbWVudCB0aGVpciBvd24gYmF0Y2hpbmcgbG9naWNcbiAgICogaW4gY2FzZSB0aGV5IHdhbnQgdG8gc2hvdyBoaXN0b3JpY2FsIHN0YXRzIGRhdGEuXG4gICAqL1xuICBjYWxsU3RhdHNSZXBvcnQkOiBPYnNlcnZhYmxlPENhbGxTdGF0c1JlcG9ydCB8IHVuZGVmaW5lZD47XG5cbiAgLyoqXG4gICAqIFRoZSBsaXN0IG9mIG1lbWJlcnMgaW4gdGhlIGN1cnJlbnQgY2FsbC5cbiAgICovXG4gIG1lbWJlcnMkOiBPYnNlcnZhYmxlPE1lbWJlclJlc3BvbnNlW10+O1xuXG4gIC8qKlxuICAgKiBUaGUgbGlzdCBvZiBjYXBhYmlsaXRpZXMgb2YgdGhlIGN1cnJlbnQgdXNlci5cbiAgICovXG4gIG93bkNhcGFiaWxpdGllcyQ6IE9ic2VydmFibGU8T3duQ2FwYWJpbGl0eVtdPjtcblxuICAvKipcbiAgICogVGhlIGNhbGxpbmcgc3RhdGUuXG4gICAqL1xuICBjYWxsaW5nU3RhdGUkOiBPYnNlcnZhYmxlPENhbGxpbmdTdGF0ZT47XG5cbiAgLyoqXG4gICAqIFRoZSBiYWNrc3RhZ2Ugc3RhdGUuXG4gICAqL1xuICBiYWNrc3RhZ2UkOiBPYnNlcnZhYmxlPGJvb2xlYW4+O1xuXG4gIC8qKlxuICAgKiBXaWxsIHByb3ZpZGUgdGhlIGxpc3Qgb2YgYmxvY2tlZCB1c2VyIElEcy5cbiAgICovXG4gIGJsb2NrZWRVc2VySWRzJDogT2JzZXJ2YWJsZTxzdHJpbmdbXT47XG5cbiAgLyoqXG4gICAqIFdpbGwgcHJvdmlkZSB0aGUgdGltZSB3aGVuIHRoaXMgY2FsbCBoYXMgYmVlbiBjcmVhdGVkLlxuICAgKi9cbiAgY3JlYXRlZEF0JDogT2JzZXJ2YWJsZTxEYXRlPjtcblxuICAvKipcbiAgICogV2lsbCBwcm92aWRlIHRoZSB0aW1lIHdoZW4gdGhpcyBjYWxsIGhhcyBiZWVuIGVuZGVkLlxuICAgKi9cbiAgZW5kZWRBdCQ6IE9ic2VydmFibGU8RGF0ZSB8IHVuZGVmaW5lZD47XG5cbiAgLyoqXG4gICAqIFdpbGwgcHJvdmlkZSB0aGUgdGltZSB3aGVuIHRoaXMgY2FsbCBoYXMgYmVlbiBzY2hlZHVsZWQgdG8gc3RhcnQuXG4gICAqL1xuICBzdGFydHNBdCQ6IE9ic2VydmFibGU8RGF0ZSB8IHVuZGVmaW5lZD47XG5cbiAgLyoqXG4gICAqIFdpbGwgcHJvdmlkZSB0aGUgdGltZSB3aGVuIHRoaXMgY2FsbCBoYXMgYmVlbiB1cGRhdGVkLlxuICAgKi9cbiAgdXBkYXRlZEF0JDogT2JzZXJ2YWJsZTxEYXRlPjtcblxuICAvKipcbiAgICogV2lsbCBwcm92aWRlIHRoZSB1c2VyIHdobyBjcmVhdGVkIHRoaXMgY2FsbC5cbiAgICovXG4gIGNyZWF0ZWRCeSQ6IE9ic2VydmFibGU8VXNlclJlc3BvbnNlIHwgdW5kZWZpbmVkPjtcblxuICAvKipcbiAgICogV2lsbCBwcm92aWRlIHRoZSBjdXN0b20gZGF0YSBvZiB0aGlzIGNhbGwuXG4gICAqL1xuICBjdXN0b20kOiBPYnNlcnZhYmxlPFJlY29yZDxzdHJpbmcsIGFueT4+O1xuXG4gIC8qKlxuICAgKiBXaWxsIHByb3ZpZGUgdGhlIGVncmVzcyBkYXRhIG9mIHRoaXMgY2FsbC5cbiAgICovXG4gIGVncmVzcyQ6IE9ic2VydmFibGU8RWdyZXNzUmVzcG9uc2UgfCB1bmRlZmluZWQ+O1xuXG4gIC8qKlxuICAgKiBXaWxsIHByb3ZpZGUgdGhlIGluZ3Jlc3MgZGF0YSBvZiB0aGlzIGNhbGwuXG4gICAqL1xuICBpbmdyZXNzJDogT2JzZXJ2YWJsZTxDYWxsSW5ncmVzc1Jlc3BvbnNlIHwgdW5kZWZpbmVkPjtcblxuICAvKipcbiAgICogV2lsbCBwcm92aWRlIHRoZSByZWNvcmRpbmcgc3RhdGUgb2YgdGhpcyBjYWxsLlxuICAgKi9cbiAgcmVjb3JkaW5nJDogT2JzZXJ2YWJsZTxib29sZWFuPjtcblxuICAvKipcbiAgICogV2lsbCBwcm92aWRlIHRoZSBzZXNzaW9uIGRhdGEgb2YgdGhpcyBjYWxsLlxuICAgKi9cbiAgc2Vzc2lvbiQ6IE9ic2VydmFibGU8Q2FsbFNlc3Npb25SZXNwb25zZSB8IHVuZGVmaW5lZD47XG5cbiAgLyoqXG4gICAqIFdpbGwgcHJvdmlkZSB0aGUgc2V0dGluZ3Mgb2YgdGhpcyBjYWxsLlxuICAgKi9cbiAgc2V0dGluZ3MkOiBPYnNlcnZhYmxlPENhbGxTZXR0aW5nc1Jlc3BvbnNlIHwgdW5kZWZpbmVkPjtcblxuICAvKipcbiAgICogV2lsbCBwcm92aWRlIHRoZSB0cmFuc2NyaWJpbmcgc3RhdGUgb2YgdGhpcyBjYWxsLlxuICAgKi9cbiAgdHJhbnNjcmliaW5nJDogT2JzZXJ2YWJsZTxib29sZWFuPjtcblxuICAvKipcbiAgICogV2lsbCBwcm92aWRlIHRoZSB1c2VyIHdobyBlbmRlZCB0aGlzIGNhbGwuXG4gICAqL1xuICBlbmRlZEJ5JDogT2JzZXJ2YWJsZTxVc2VyUmVzcG9uc2UgfCB1bmRlZmluZWQ+O1xuXG4gIC8qKlxuICAgKiBXaWxsIHByb3ZpZGUgdGhlIHRodW1ibmFpbHMgb2YgdGhpcyBjYWxsLlxuICAgKi9cbiAgdGh1bWJuYWlscyQ6IE9ic2VydmFibGU8VGh1bWJuYWlsUmVzcG9uc2UgfCB1bmRlZmluZWQ+O1xuXG4gIHJlYWRvbmx5IGxvZ2dlcjogTG9nZ2VyO1xuXG4gIC8qKlxuICAgKiBBIGxpc3Qgb2YgY29tcGFyYXRvcnMgdGhhdCBhcmUgdXNlZCB0byBzb3J0IHRoZSBwYXJ0aWNpcGFudHMuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwcml2YXRlIHNvcnRQYXJ0aWNpcGFudHNCeTogQ29tcGFyYXRvcjxTdHJlYW1WaWRlb1BhcnRpY2lwYW50PiA9XG4gICAgU29ydGluZ1ByZXNldC5kZWZhdWx0U29ydFByZXNldDtcblxuICBwcml2YXRlIHJlYWRvbmx5IGV2ZW50SGFuZGxlcnM6IHtcbiAgICBbRXZlbnRUeXBlIGluIFZpZGVvRXZlbnRbJ3R5cGUnXV06XG4gICAgICB8ICgoZXZlbnQ6IEV4dHJhY3Q8VmlkZW9FdmVudCwgeyB0eXBlOiBFdmVudFR5cGUgfT4pID0+IHZvaWQpXG4gICAgICB8IHVuZGVmaW5lZDtcbiAgfTtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBpbnN0YW5jZSBvZiB0aGUgQ2FsbFN0YXRlIGNsYXNzLlxuICAgKlxuICAgKi9cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5sb2dnZXIgPSBnZXRMb2dnZXIoWydDYWxsU3RhdGUnXSk7XG4gICAgdGhpcy5wYXJ0aWNpcGFudHMkID0gdGhpcy5wYXJ0aWNpcGFudHNTdWJqZWN0LmFzT2JzZXJ2YWJsZSgpLnBpcGUoXG4gICAgICAvLyBtYWludGFpbiBzdGFibGUtc29ydCBieSBtdXRhdGluZyB0aGUgcGFydGljaXBhbnRzIHN0b3JlZFxuICAgICAgLy8gaW4gdGhlIG9yaWdpbmFsIHN1YmplY3RcbiAgICAgIG1hcCgocHMpID0+IHBzLnNvcnQodGhpcy5zb3J0UGFydGljaXBhbnRzQnkpKSxcbiAgICAgIHNoYXJlUmVwbGF5KHsgYnVmZmVyU2l6ZTogMSwgcmVmQ291bnQ6IHRydWUgfSksXG4gICAgKTtcblxuICAgIHRoaXMubG9jYWxQYXJ0aWNpcGFudCQgPSB0aGlzLnBhcnRpY2lwYW50cyQucGlwZShcbiAgICAgIG1hcCgocGFydGljaXBhbnRzKSA9PiBwYXJ0aWNpcGFudHMuZmluZCgocCkgPT4gcC5pc0xvY2FsUGFydGljaXBhbnQpKSxcbiAgICAgIHNoYXJlUmVwbGF5KHsgYnVmZmVyU2l6ZTogMSwgcmVmQ291bnQ6IHRydWUgfSksXG4gICAgKTtcblxuICAgIHRoaXMucmVtb3RlUGFydGljaXBhbnRzJCA9IHRoaXMucGFydGljaXBhbnRzJC5waXBlKFxuICAgICAgbWFwKChwYXJ0aWNpcGFudHMpID0+IHBhcnRpY2lwYW50cy5maWx0ZXIoKHApID0+ICFwLmlzTG9jYWxQYXJ0aWNpcGFudCkpLFxuICAgICAgc2hhcmVSZXBsYXkoeyBidWZmZXJTaXplOiAxLCByZWZDb3VudDogdHJ1ZSB9KSxcbiAgICApO1xuXG4gICAgdGhpcy5waW5uZWRQYXJ0aWNpcGFudHMkID0gdGhpcy5wYXJ0aWNpcGFudHMkLnBpcGUoXG4gICAgICBtYXAoKHBhcnRpY2lwYW50cykgPT4gcGFydGljaXBhbnRzLmZpbHRlcigocCkgPT4gISFwLnBpbikpLFxuICAgICAgc2hhcmVSZXBsYXkoeyBidWZmZXJTaXplOiAxLCByZWZDb3VudDogdHJ1ZSB9KSxcbiAgICApO1xuXG4gICAgdGhpcy5kb21pbmFudFNwZWFrZXIkID0gdGhpcy5wYXJ0aWNpcGFudHMkLnBpcGUoXG4gICAgICBtYXAoKHBhcnRpY2lwYW50cykgPT4gcGFydGljaXBhbnRzLmZpbmQoKHApID0+IHAuaXNEb21pbmFudFNwZWFrZXIpKSxcbiAgICAgIHNoYXJlUmVwbGF5KHsgYnVmZmVyU2l6ZTogMSwgcmVmQ291bnQ6IHRydWUgfSksXG4gICAgKTtcblxuICAgIHRoaXMuaGFzT25nb2luZ1NjcmVlblNoYXJlJCA9IHRoaXMucGFydGljaXBhbnRzJC5waXBlKFxuICAgICAgbWFwKChwYXJ0aWNpcGFudHMpID0+XG4gICAgICAgIHBhcnRpY2lwYW50cy5zb21lKChwKSA9PlxuICAgICAgICAgIHAucHVibGlzaGVkVHJhY2tzLmluY2x1ZGVzKFRyYWNrVHlwZS5TQ1JFRU5fU0hBUkUpLFxuICAgICAgICApLFxuICAgICAgKSxcbiAgICAgIGRpc3RpbmN0VW50aWxDaGFuZ2VkKCksXG4gICAgICBzaGFyZVJlcGxheSh7IGJ1ZmZlclNpemU6IDEsIHJlZkNvdW50OiB0cnVlIH0pLFxuICAgICk7XG5cbiAgICB0aGlzLnN0YXJ0ZWRBdCQgPSB0aGlzLnN0YXJ0ZWRBdFN1YmplY3QuYXNPYnNlcnZhYmxlKCk7XG4gICAgdGhpcy5wYXJ0aWNpcGFudENvdW50JCA9IHRoaXMucGFydGljaXBhbnRDb3VudFN1YmplY3QuYXNPYnNlcnZhYmxlKCk7XG4gICAgdGhpcy5hbm9ueW1vdXNQYXJ0aWNpcGFudENvdW50JCA9XG4gICAgICB0aGlzLmFub255bW91c1BhcnRpY2lwYW50Q291bnRTdWJqZWN0LmFzT2JzZXJ2YWJsZSgpO1xuXG4gICAgdGhpcy5jYWxsU3RhdHNSZXBvcnQkID0gdGhpcy5jYWxsU3RhdHNSZXBvcnRTdWJqZWN0LmFzT2JzZXJ2YWJsZSgpO1xuICAgIHRoaXMubWVtYmVycyQgPSB0aGlzLm1lbWJlcnNTdWJqZWN0LmFzT2JzZXJ2YWJsZSgpO1xuICAgIHRoaXMub3duQ2FwYWJpbGl0aWVzJCA9IHRoaXMub3duQ2FwYWJpbGl0aWVzU3ViamVjdC5hc09ic2VydmFibGUoKTtcbiAgICB0aGlzLmNhbGxpbmdTdGF0ZSQgPSB0aGlzLmNhbGxpbmdTdGF0ZVN1YmplY3QuYXNPYnNlcnZhYmxlKCk7XG5cbiAgICB0aGlzLmJhY2tzdGFnZSQgPSB0aGlzLmJhY2tzdGFnZVN1YmplY3QuYXNPYnNlcnZhYmxlKCk7XG4gICAgdGhpcy5ibG9ja2VkVXNlcklkcyQgPSB0aGlzLmJsb2NrZWRVc2VySWRzU3ViamVjdC5hc09ic2VydmFibGUoKTtcbiAgICB0aGlzLmNyZWF0ZWRBdCQgPSB0aGlzLmNyZWF0ZWRBdFN1YmplY3QuYXNPYnNlcnZhYmxlKCk7XG4gICAgdGhpcy5lbmRlZEF0JCA9IHRoaXMuZW5kZWRBdFN1YmplY3QuYXNPYnNlcnZhYmxlKCk7XG4gICAgdGhpcy5zdGFydHNBdCQgPSB0aGlzLnN0YXJ0c0F0U3ViamVjdC5hc09ic2VydmFibGUoKTtcbiAgICB0aGlzLnVwZGF0ZWRBdCQgPSB0aGlzLnVwZGF0ZWRBdFN1YmplY3QuYXNPYnNlcnZhYmxlKCk7XG4gICAgdGhpcy5jcmVhdGVkQnkkID0gdGhpcy5jcmVhdGVkQnlTdWJqZWN0LmFzT2JzZXJ2YWJsZSgpO1xuICAgIHRoaXMuY3VzdG9tJCA9IHRoaXMuY3VzdG9tU3ViamVjdC5hc09ic2VydmFibGUoKTtcbiAgICB0aGlzLmVncmVzcyQgPSB0aGlzLmVncmVzc1N1YmplY3QuYXNPYnNlcnZhYmxlKCk7XG4gICAgdGhpcy5pbmdyZXNzJCA9IHRoaXMuaW5ncmVzc1N1YmplY3QuYXNPYnNlcnZhYmxlKCk7XG4gICAgdGhpcy5yZWNvcmRpbmckID0gdGhpcy5yZWNvcmRpbmdTdWJqZWN0LmFzT2JzZXJ2YWJsZSgpO1xuICAgIHRoaXMuc2Vzc2lvbiQgPSB0aGlzLnNlc3Npb25TdWJqZWN0LmFzT2JzZXJ2YWJsZSgpO1xuICAgIHRoaXMuc2V0dGluZ3MkID0gdGhpcy5zZXR0aW5nc1N1YmplY3QuYXNPYnNlcnZhYmxlKCk7XG4gICAgdGhpcy50cmFuc2NyaWJpbmckID0gdGhpcy50cmFuc2NyaWJpbmdTdWJqZWN0LmFzT2JzZXJ2YWJsZSgpO1xuICAgIHRoaXMuZW5kZWRCeSQgPSB0aGlzLmVuZGVkQnlTdWJqZWN0LmFzT2JzZXJ2YWJsZSgpO1xuICAgIHRoaXMudGh1bWJuYWlscyQgPSB0aGlzLnRodW1ibmFpbHNTdWJqZWN0LmFzT2JzZXJ2YWJsZSgpO1xuXG4gICAgdGhpcy5ldmVudEhhbmRsZXJzID0ge1xuICAgICAgLy8gdGhlc2UgZXZlbnRzIGFyZSBub3QgdXBkYXRpbmcgdGhlIGNhbGwgc3RhdGU6XG4gICAgICAnY2FsbC5wZXJtaXNzaW9uX3JlcXVlc3QnOiB1bmRlZmluZWQsXG4gICAgICAnY2FsbC5yZWNvcmRpbmdfZmFpbGVkJzogdW5kZWZpbmVkLFxuICAgICAgJ2NhbGwucmVjb3JkaW5nX3JlYWR5JzogdW5kZWZpbmVkLFxuICAgICAgJ2NhbGwudXNlcl9tdXRlZCc6IHVuZGVmaW5lZCxcbiAgICAgICdjb25uZWN0aW9uLmVycm9yJzogdW5kZWZpbmVkLFxuICAgICAgJ2Nvbm5lY3Rpb24ub2snOiB1bmRlZmluZWQsXG4gICAgICAnaGVhbHRoLmNoZWNrJzogdW5kZWZpbmVkLFxuICAgICAgY3VzdG9tOiB1bmRlZmluZWQsXG5cbiAgICAgIC8vIGV2ZW50cyB0aGF0IHVwZGF0ZSBjYWxsIHN0YXRlOlxuICAgICAgJ2NhbGwuYWNjZXB0ZWQnOiAoZSkgPT4gdGhpcy51cGRhdGVGcm9tQ2FsbFJlc3BvbnNlKGUuY2FsbCksXG4gICAgICAnY2FsbC5ibG9ja2VkX3VzZXInOiB0aGlzLmJsb2NrVXNlcixcbiAgICAgICdjYWxsLmNyZWF0ZWQnOiAoZSkgPT4gdGhpcy51cGRhdGVGcm9tQ2FsbFJlc3BvbnNlKGUuY2FsbCksXG4gICAgICAnY2FsbC5lbmRlZCc6IChlKSA9PiB7XG4gICAgICAgIHRoaXMudXBkYXRlRnJvbUNhbGxSZXNwb25zZShlLmNhbGwpO1xuICAgICAgICB0aGlzLnNldEN1cnJlbnRWYWx1ZSh0aGlzLmVuZGVkQnlTdWJqZWN0LCBlLnVzZXIpO1xuICAgICAgfSxcbiAgICAgICdjYWxsLmhsc19icm9hZGNhc3RpbmdfZmFpbGVkJzogdGhpcy51cGRhdGVGcm9tSExTQnJvYWRjYXN0aW5nRmFpbGVkLFxuICAgICAgJ2NhbGwuaGxzX2Jyb2FkY2FzdGluZ19zdGFydGVkJzogdGhpcy51cGRhdGVGcm9tSExTQnJvYWRjYXN0U3RhcnRlZCxcbiAgICAgICdjYWxsLmhsc19icm9hZGNhc3Rpbmdfc3RvcHBlZCc6IHRoaXMudXBkYXRlRnJvbUhMU0Jyb2FkY2FzdFN0b3BwZWQsXG4gICAgICAnY2FsbC5saXZlX3N0YXJ0ZWQnOiAoZSkgPT4gdGhpcy51cGRhdGVGcm9tQ2FsbFJlc3BvbnNlKGUuY2FsbCksXG4gICAgICAnY2FsbC5tZW1iZXJfYWRkZWQnOiB0aGlzLnVwZGF0ZUZyb21NZW1iZXJBZGRlZCxcbiAgICAgICdjYWxsLm1lbWJlcl9yZW1vdmVkJzogdGhpcy51cGRhdGVGcm9tTWVtYmVyUmVtb3ZlZCxcbiAgICAgICdjYWxsLm1lbWJlcl91cGRhdGVkX3Blcm1pc3Npb24nOiB0aGlzLnVwZGF0ZU1lbWJlcnMsXG4gICAgICAnY2FsbC5tZW1iZXJfdXBkYXRlZCc6IHRoaXMudXBkYXRlTWVtYmVycyxcbiAgICAgICdjYWxsLm5vdGlmaWNhdGlvbic6IChlKSA9PiB7XG4gICAgICAgIHRoaXMudXBkYXRlRnJvbUNhbGxSZXNwb25zZShlLmNhbGwpO1xuICAgICAgICB0aGlzLnNldE1lbWJlcnMoZS5tZW1iZXJzKTtcbiAgICAgIH0sXG4gICAgICAnY2FsbC5wZXJtaXNzaW9uc191cGRhdGVkJzogdGhpcy51cGRhdGVPd25DYXBhYmlsaXRpZXMsXG4gICAgICAnY2FsbC5yZWFjdGlvbl9uZXcnOiB0aGlzLnVwZGF0ZVBhcnRpY2lwYW50UmVhY3Rpb24sXG4gICAgICAnY2FsbC5yZWNvcmRpbmdfc3RhcnRlZCc6ICgpID0+XG4gICAgICAgIHRoaXMuc2V0Q3VycmVudFZhbHVlKHRoaXMucmVjb3JkaW5nU3ViamVjdCwgdHJ1ZSksXG4gICAgICAnY2FsbC5yZWNvcmRpbmdfc3RvcHBlZCc6ICgpID0+XG4gICAgICAgIHRoaXMuc2V0Q3VycmVudFZhbHVlKHRoaXMucmVjb3JkaW5nU3ViamVjdCwgZmFsc2UpLFxuICAgICAgJ2NhbGwucmVqZWN0ZWQnOiAoZSkgPT4gdGhpcy51cGRhdGVGcm9tQ2FsbFJlc3BvbnNlKGUuY2FsbCksXG4gICAgICAnY2FsbC5yaW5nJzogKGUpID0+IHRoaXMudXBkYXRlRnJvbUNhbGxSZXNwb25zZShlLmNhbGwpLFxuICAgICAgJ2NhbGwuc2Vzc2lvbl9lbmRlZCc6IChlKSA9PiB0aGlzLnVwZGF0ZUZyb21DYWxsUmVzcG9uc2UoZS5jYWxsKSxcbiAgICAgICdjYWxsLnNlc3Npb25fcGFydGljaXBhbnRfam9pbmVkJzpcbiAgICAgICAgdGhpcy51cGRhdGVGcm9tU2Vzc2lvblBhcnRpY2lwYW50Sm9pbmVkLFxuICAgICAgJ2NhbGwuc2Vzc2lvbl9wYXJ0aWNpcGFudF9sZWZ0JzogdGhpcy51cGRhdGVGcm9tU2Vzc2lvblBhcnRpY2lwYW50TGVmdCxcbiAgICAgICdjYWxsLnNlc3Npb25fc3RhcnRlZCc6IChlKSA9PiB0aGlzLnVwZGF0ZUZyb21DYWxsUmVzcG9uc2UoZS5jYWxsKSxcbiAgICAgICdjYWxsLnVuYmxvY2tlZF91c2VyJzogdGhpcy51bmJsb2NrVXNlcixcbiAgICAgICdjYWxsLnVwZGF0ZWQnOiAoZSkgPT4gdGhpcy51cGRhdGVGcm9tQ2FsbFJlc3BvbnNlKGUuY2FsbCksXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBsaXN0IG9mIGNyaXRlcmlhIHRoYXQgYXJlIHVzZWQgdG8gc29ydCB0aGUgcGFydGljaXBhbnRzLlxuICAgKiBUbyBkaXNhYmxlIHNvcnRpbmcsIHlvdSBjYW4gcGFzcyBgbm9vcENvbXBhcmF0b3IoKWAuXG4gICAqXG4gICAqIEBwYXJhbSBjb21wYXJhdG9yIHRoZSBjb21wYXJhdG9yIHRvIHVzZSB0byBzb3J0IHRoZSBwYXJ0aWNpcGFudHMuXG4gICAqL1xuICBzZXRTb3J0UGFydGljaXBhbnRzQnkgPSAoY29tcGFyYXRvcjogQ29tcGFyYXRvcjxTdHJlYW1WaWRlb1BhcnRpY2lwYW50PikgPT4ge1xuICAgIHRoaXMuc29ydFBhcnRpY2lwYW50c0J5ID0gY29tcGFyYXRvcjtcbiAgICAvLyB0cmlnZ2VyIHJlLXNvcnRpbmcgb2YgcGFydGljaXBhbnRzXG4gICAgdGhpcy5zZXRDdXJyZW50VmFsdWUodGhpcy5wYXJ0aWNpcGFudHNTdWJqZWN0LCAocHMpID0+IHBzKTtcbiAgfTtcblxuICAvKipcbiAgICogR2V0cyB0aGUgY3VycmVudCB2YWx1ZSBvZiBhbiBvYnNlcnZhYmxlLCBvciB1bmRlZmluZWQgaWYgdGhlIG9ic2VydmFibGUgaGFzXG4gICAqIG5vdCBlbWl0dGVkIGEgdmFsdWUgeWV0LlxuICAgKlxuICAgKiBAcGFyYW0gb2JzZXJ2YWJsZSQgdGhlIG9ic2VydmFibGUgdG8gZ2V0IHRoZSB2YWx1ZSBmcm9tLlxuICAgKi9cbiAgZ2V0Q3VycmVudFZhbHVlID0gUnhVdGlscy5nZXRDdXJyZW50VmFsdWU7XG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhlIHZhbHVlIG9mIHRoZSBwcm92aWRlZCBTdWJqZWN0LlxuICAgKiBBbiBgdXBkYXRlYCBjYW4gZWl0aGVyIGJlIGEgbmV3IHZhbHVlIG9yIGEgZnVuY3Rpb24gd2hpY2ggdGFrZXNcbiAgICogdGhlIGN1cnJlbnQgdmFsdWUgYW5kIHJldHVybnMgYSBuZXcgdmFsdWUuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKlxuICAgKiBAcGFyYW0gc3ViamVjdCB0aGUgc3ViamVjdCB0byB1cGRhdGUuXG4gICAqIEBwYXJhbSB1cGRhdGUgdGhlIHVwZGF0ZSB0byBhcHBseSB0byB0aGUgc3ViamVjdC5cbiAgICogQHJldHVybiB0aGUgdXBkYXRlZCB2YWx1ZS5cbiAgICovXG4gIHNldEN1cnJlbnRWYWx1ZSA9IFJ4VXRpbHMuc2V0Q3VycmVudFZhbHVlO1xuXG4gIC8qKlxuICAgKiBUaGUgc2VydmVyLXNpZGUgY291bnRlZCBudW1iZXIgb2YgcGFydGljaXBhbnRzIGNvbm5lY3RlZCB0byB0aGUgY3VycmVudCBjYWxsLlxuICAgKiBUaGlzIG51bWJlciBpbmNsdWRlcyB0aGUgYW5vbnltb3VzIHBhcnRpY2lwYW50cyBhcyB3ZWxsLlxuICAgKi9cbiAgZ2V0IHBhcnRpY2lwYW50Q291bnQoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q3VycmVudFZhbHVlKHRoaXMucGFydGljaXBhbnRDb3VudCQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIG51bWJlciBvZiBwYXJ0aWNpcGFudHMgaW4gdGhlIGN1cnJlbnQgY2FsbC5cbiAgICpcbiAgICogQGludGVybmFsXG4gICAqIEBwYXJhbSBjb3VudCB0aGUgbnVtYmVyIG9mIHBhcnRpY2lwYW50cy5cbiAgICovXG4gIHNldFBhcnRpY2lwYW50Q291bnQgPSAoY291bnQ6IFBhdGNoPG51bWJlcj4pID0+IHtcbiAgICByZXR1cm4gdGhpcy5zZXRDdXJyZW50VmFsdWUodGhpcy5wYXJ0aWNpcGFudENvdW50U3ViamVjdCwgY291bnQpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBUaGUgdGltZSB0aGUgY2FsbCBzZXNzaW9uIGFjdHVhbGx5IHN0YXJ0ZWQuXG4gICAqIFVzZWZ1bCBmb3IgZGlzcGxheWluZyB0aGUgY2FsbCBkdXJhdGlvbi5cbiAgICovXG4gIGdldCBzdGFydGVkQXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q3VycmVudFZhbHVlKHRoaXMuc3RhcnRlZEF0JCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgdGltZSB0aGUgY2FsbCBzZXNzaW9uIGFjdHVhbGx5IHN0YXJ0ZWQuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKiBAcGFyYW0gc3RhcnRlZEF0IHRoZSB0aW1lIHRoZSBjYWxsIHNlc3Npb24gYWN0dWFsbHkgc3RhcnRlZC5cbiAgICovXG4gIHNldFN0YXJ0ZWRBdCA9IChzdGFydGVkQXQ6IFBhdGNoPERhdGUgfCB1bmRlZmluZWQ+KSA9PiB7XG4gICAgcmV0dXJuIHRoaXMuc2V0Q3VycmVudFZhbHVlKHRoaXMuc3RhcnRlZEF0U3ViamVjdCwgc3RhcnRlZEF0KTtcbiAgfTtcblxuICAvKipcbiAgICogVGhlIHNlcnZlci1zaWRlIGNvdW50ZWQgbnVtYmVyIG9mIGFub255bW91cyBwYXJ0aWNpcGFudHMgY29ubmVjdGVkIHRvIHRoZSBjdXJyZW50IGNhbGwuXG4gICAqIFRoaXMgbnVtYmVyIGluY2x1ZGVzIHRoZSBhbm9ueW1vdXMgcGFydGljaXBhbnRzIGFzIHdlbGwuXG4gICAqL1xuICBnZXQgYW5vbnltb3VzUGFydGljaXBhbnRDb3VudCgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRDdXJyZW50VmFsdWUodGhpcy5hbm9ueW1vdXNQYXJ0aWNpcGFudENvdW50JCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgbnVtYmVyIG9mIGFub255bW91cyBwYXJ0aWNpcGFudHMgaW4gdGhlIGN1cnJlbnQgY2FsbC5cbiAgICpcbiAgICogQGludGVybmFsXG4gICAqIEBwYXJhbSBjb3VudCB0aGUgbnVtYmVyIG9mIGFub255bW91cyBwYXJ0aWNpcGFudHMuXG4gICAqL1xuICBzZXRBbm9ueW1vdXNQYXJ0aWNpcGFudENvdW50ID0gKGNvdW50OiBQYXRjaDxudW1iZXI+KSA9PiB7XG4gICAgcmV0dXJuIHRoaXMuc2V0Q3VycmVudFZhbHVlKHRoaXMuYW5vbnltb3VzUGFydGljaXBhbnRDb3VudFN1YmplY3QsIGNvdW50KTtcbiAgfTtcblxuICAvKipcbiAgICogVGhlIGxpc3Qgb2YgcGFydGljaXBhbnRzIGluIHRoZSBjdXJyZW50IGNhbGwuXG4gICAqL1xuICBnZXQgcGFydGljaXBhbnRzKCkge1xuICAgIHJldHVybiB0aGlzLmdldEN1cnJlbnRWYWx1ZSh0aGlzLnBhcnRpY2lwYW50cyQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIGxpc3Qgb2YgcGFydGljaXBhbnRzIGluIHRoZSBjdXJyZW50IGNhbGwuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKlxuICAgKiBAcGFyYW0gcGFydGljaXBhbnRzIHRoZSBsaXN0IG9mIHBhcnRpY2lwYW50cy5cbiAgICovXG4gIHNldFBhcnRpY2lwYW50cyA9IChwYXJ0aWNpcGFudHM6IFBhdGNoPFN0cmVhbVZpZGVvUGFydGljaXBhbnRbXT4pID0+IHtcbiAgICByZXR1cm4gdGhpcy5zZXRDdXJyZW50VmFsdWUodGhpcy5wYXJ0aWNpcGFudHNTdWJqZWN0LCBwYXJ0aWNpcGFudHMpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBUaGUgbG9jYWwgcGFydGljaXBhbnQgaW4gdGhlIGN1cnJlbnQgY2FsbC5cbiAgICovXG4gIGdldCBsb2NhbFBhcnRpY2lwYW50KCkge1xuICAgIHJldHVybiB0aGlzLmdldEN1cnJlbnRWYWx1ZSh0aGlzLmxvY2FsUGFydGljaXBhbnQkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgbGlzdCBvZiByZW1vdGUgcGFydGljaXBhbnRzIGluIHRoZSBjdXJyZW50IGNhbGwuXG4gICAqL1xuICBnZXQgcmVtb3RlUGFydGljaXBhbnRzKCkge1xuICAgIHJldHVybiB0aGlzLmdldEN1cnJlbnRWYWx1ZSh0aGlzLnJlbW90ZVBhcnRpY2lwYW50cyQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBkb21pbmFudCBzcGVha2VyIGluIHRoZSBjdXJyZW50IGNhbGwuXG4gICAqL1xuICBnZXQgZG9taW5hbnRTcGVha2VyKCkge1xuICAgIHJldHVybiB0aGlzLmdldEN1cnJlbnRWYWx1ZSh0aGlzLmRvbWluYW50U3BlYWtlciQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBsaXN0IG9mIHBpbm5lZCBwYXJ0aWNpcGFudHMgaW4gdGhlIGN1cnJlbnQgY2FsbC5cbiAgICovXG4gIGdldCBwaW5uZWRQYXJ0aWNpcGFudHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q3VycmVudFZhbHVlKHRoaXMucGlubmVkUGFydGljaXBhbnRzJCk7XG4gIH1cblxuICAvKipcbiAgICogVGVsbCBpZiB0aGVyZSBpcyBhbiBvbmdvaW5nIHNjcmVlbiBzaGFyZSBpbiB0aGlzIGNhbGwuXG4gICAqL1xuICBnZXQgaGFzT25nb2luZ1NjcmVlblNoYXJlKCkge1xuICAgIHJldHVybiB0aGlzLmdldEN1cnJlbnRWYWx1ZSh0aGlzLmhhc09uZ29pbmdTY3JlZW5TaGFyZSQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBjYWxsaW5nIHN0YXRlLlxuICAgKi9cbiAgZ2V0IGNhbGxpbmdTdGF0ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRDdXJyZW50VmFsdWUodGhpcy5jYWxsaW5nU3RhdGUkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBjYWxsaW5nIHN0YXRlLlxuICAgKlxuICAgKiBAaW50ZXJuYWxcbiAgICogQHBhcmFtIHN0YXRlIHRoZSBuZXcgY2FsbGluZyBzdGF0ZS5cbiAgICovXG4gIHNldENhbGxpbmdTdGF0ZSA9IChzdGF0ZTogUGF0Y2g8Q2FsbGluZ1N0YXRlPikgPT4ge1xuICAgIHJldHVybiB0aGlzLnNldEN1cnJlbnRWYWx1ZSh0aGlzLmNhbGxpbmdTdGF0ZVN1YmplY3QsIHN0YXRlKTtcbiAgfTtcblxuICAvKipcbiAgICogVGhlIGNhbGwgc3RhdHMgcmVwb3J0LlxuICAgKi9cbiAgZ2V0IGNhbGxTdGF0c1JlcG9ydCgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRDdXJyZW50VmFsdWUodGhpcy5jYWxsU3RhdHNSZXBvcnQkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBjYWxsIHN0YXRzIHJlcG9ydC5cbiAgICpcbiAgICogQGludGVybmFsXG4gICAqIEBwYXJhbSByZXBvcnQgdGhlIHJlcG9ydCB0byBzZXQuXG4gICAqL1xuICBzZXRDYWxsU3RhdHNSZXBvcnQgPSAocmVwb3J0OiBQYXRjaDxDYWxsU3RhdHNSZXBvcnQgfCB1bmRlZmluZWQ+KSA9PiB7XG4gICAgcmV0dXJuIHRoaXMuc2V0Q3VycmVudFZhbHVlKHRoaXMuY2FsbFN0YXRzUmVwb3J0U3ViamVjdCwgcmVwb3J0KTtcbiAgfTtcblxuICAvKipcbiAgICogVGhlIG1lbWJlcnMgb2YgdGhlIGN1cnJlbnQgY2FsbC5cbiAgICovXG4gIGdldCBtZW1iZXJzKCkge1xuICAgIHJldHVybiB0aGlzLmdldEN1cnJlbnRWYWx1ZSh0aGlzLm1lbWJlcnMkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBtZW1iZXJzIG9mIHRoZSBjdXJyZW50IGNhbGwuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKiBAcGFyYW0gbWVtYmVycyB0aGUgbWVtYmVycyB0byBzZXQuXG4gICAqL1xuICBzZXRNZW1iZXJzID0gKG1lbWJlcnM6IFBhdGNoPE1lbWJlclJlc3BvbnNlW10+KSA9PiB7XG4gICAgdGhpcy5zZXRDdXJyZW50VmFsdWUodGhpcy5tZW1iZXJzU3ViamVjdCwgbWVtYmVycyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFRoZSBjYXBhYmlsaXRpZXMgb2YgdGhlIGN1cnJlbnQgdXNlciBmb3IgdGhlIGN1cnJlbnQgY2FsbC5cbiAgICovXG4gIGdldCBvd25DYXBhYmlsaXRpZXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q3VycmVudFZhbHVlKHRoaXMub3duQ2FwYWJpbGl0aWVzJCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgb3duIGNhcGFiaWxpdGllcy5cbiAgICpcbiAgICogQGludGVybmFsXG4gICAqIEBwYXJhbSBjYXBhYmlsaXRpZXMgdGhlIGNhcGFiaWxpdGllcyB0byBzZXQuXG4gICAqL1xuICBzZXRPd25DYXBhYmlsaXRpZXMgPSAoY2FwYWJpbGl0aWVzOiBQYXRjaDxPd25DYXBhYmlsaXR5W10+KSA9PiB7XG4gICAgcmV0dXJuIHRoaXMuc2V0Q3VycmVudFZhbHVlKHRoaXMub3duQ2FwYWJpbGl0aWVzU3ViamVjdCwgY2FwYWJpbGl0aWVzKTtcbiAgfTtcblxuICAvKipcbiAgICogVGhlIGJhY2tzdGFnZSBzdGF0ZS5cbiAgICovXG4gIGdldCBiYWNrc3RhZ2UoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q3VycmVudFZhbHVlKHRoaXMuYmFja3N0YWdlJCk7XG4gIH1cblxuICAvKipcbiAgICogV2lsbCBwcm92aWRlIHRoZSBsaXN0IG9mIGJsb2NrZWQgdXNlciBJRHMuXG4gICAqL1xuICBnZXQgYmxvY2tlZFVzZXJJZHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q3VycmVudFZhbHVlKHRoaXMuYmxvY2tlZFVzZXJJZHMkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBXaWxsIHByb3ZpZGUgdGhlIHRpbWUgd2hlbiB0aGlzIGNhbGwgaGFzIGJlZW4gY3JlYXRlZC5cbiAgICovXG4gIGdldCBjcmVhdGVkQXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q3VycmVudFZhbHVlKHRoaXMuY3JlYXRlZEF0JCk7XG4gIH1cblxuICAvKipcbiAgICogV2lsbCBwcm92aWRlIHRoZSB0aW1lIHdoZW4gdGhpcyBjYWxsIGhhcyBiZWVuIGVuZGVkLlxuICAgKi9cbiAgZ2V0IGVuZGVkQXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q3VycmVudFZhbHVlKHRoaXMuZW5kZWRBdCQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFdpbGwgcHJvdmlkZSB0aGUgdGltZSB3aGVuIHRoaXMgY2FsbCBoYXMgYmVlbiBzY2hlZHVsZWQgdG8gc3RhcnQuXG4gICAqL1xuICBnZXQgc3RhcnRzQXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q3VycmVudFZhbHVlKHRoaXMuc3RhcnRzQXQkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBXaWxsIHByb3ZpZGUgdGhlIHRpbWUgd2hlbiB0aGlzIGNhbGwgaGFzIGJlZW4gdXBkYXRlZC5cbiAgICovXG4gIGdldCB1cGRhdGVkQXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q3VycmVudFZhbHVlKHRoaXMudXBkYXRlZEF0JCk7XG4gIH1cblxuICAvKipcbiAgICogV2lsbCBwcm92aWRlIHRoZSB1c2VyIHdobyBjcmVhdGVkIHRoaXMgY2FsbC5cbiAgICovXG4gIGdldCBjcmVhdGVkQnkoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q3VycmVudFZhbHVlKHRoaXMuY3JlYXRlZEJ5JCk7XG4gIH1cblxuICAvKipcbiAgICogV2lsbCBwcm92aWRlIHRoZSBjdXN0b20gZGF0YSBvZiB0aGlzIGNhbGwuXG4gICAqL1xuICBnZXQgY3VzdG9tKCkge1xuICAgIHJldHVybiB0aGlzLmdldEN1cnJlbnRWYWx1ZSh0aGlzLmN1c3RvbSQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFdpbGwgcHJvdmlkZSB0aGUgZWdyZXNzIGRhdGEgb2YgdGhpcyBjYWxsLlxuICAgKi9cbiAgZ2V0IGVncmVzcygpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRDdXJyZW50VmFsdWUodGhpcy5lZ3Jlc3MkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBXaWxsIHByb3ZpZGUgdGhlIGluZ3Jlc3MgZGF0YSBvZiB0aGlzIGNhbGwuXG4gICAqL1xuICBnZXQgaW5ncmVzcygpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRDdXJyZW50VmFsdWUodGhpcy5pbmdyZXNzJCk7XG4gIH1cblxuICAvKipcbiAgICogV2lsbCBwcm92aWRlIHRoZSByZWNvcmRpbmcgc3RhdGUgb2YgdGhpcyBjYWxsLlxuICAgKi9cbiAgZ2V0IHJlY29yZGluZygpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRDdXJyZW50VmFsdWUodGhpcy5yZWNvcmRpbmckKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBXaWxsIHByb3ZpZGUgdGhlIHNlc3Npb24gZGF0YSBvZiB0aGlzIGNhbGwuXG4gICAqL1xuICBnZXQgc2Vzc2lvbigpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRDdXJyZW50VmFsdWUodGhpcy5zZXNzaW9uJCk7XG4gIH1cblxuICAvKipcbiAgICogV2lsbCBwcm92aWRlIHRoZSBzZXR0aW5ncyBvZiB0aGlzIGNhbGwuXG4gICAqL1xuICBnZXQgc2V0dGluZ3MoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q3VycmVudFZhbHVlKHRoaXMuc2V0dGluZ3MkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBXaWxsIHByb3ZpZGUgdGhlIHRyYW5zY3JpYmluZyBzdGF0ZSBvZiB0aGlzIGNhbGwuXG4gICAqL1xuICBnZXQgdHJhbnNjcmliaW5nKCkge1xuICAgIHJldHVybiB0aGlzLmdldEN1cnJlbnRWYWx1ZSh0aGlzLnRyYW5zY3JpYmluZyQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFdpbGwgcHJvdmlkZSB0aGUgdXNlciB3aG8gZW5kZWQgdGhpcyBjYWxsLlxuICAgKi9cbiAgZ2V0IGVuZGVkQnkoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q3VycmVudFZhbHVlKHRoaXMuZW5kZWRCeSQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFdpbGwgcHJvdmlkZSB0aGUgdGh1bWJuYWlscyBvZiB0aGlzIGNhbGwsIGlmIGVuYWJsZWQgaW4gdGhlIGNhbGwgc2V0dGluZ3MuXG4gICAqL1xuICBnZXQgdGh1bWJuYWlscygpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRDdXJyZW50VmFsdWUodGhpcy50aHVtYm5haWxzJCk7XG4gIH1cblxuICAvKipcbiAgICogV2lsbCB0cnkgdG8gZmluZCB0aGUgcGFydGljaXBhbnQgd2l0aCB0aGUgZ2l2ZW4gc2Vzc2lvbklkIGluIHRoZSBjdXJyZW50IGNhbGwuXG4gICAqXG4gICAqIEBwYXJhbSBzZXNzaW9uSWQgdGhlIHNlc3Npb25JZCBvZiB0aGUgcGFydGljaXBhbnQgdG8gZmluZC5cbiAgICogQHJldHVybnMgdGhlIHBhcnRpY2lwYW50IHdpdGggdGhlIGdpdmVuIHNlc3Npb25JZCBvciB1bmRlZmluZWQgaWYgbm90IGZvdW5kLlxuICAgKi9cbiAgZmluZFBhcnRpY2lwYW50QnlTZXNzaW9uSWQgPSAoXG4gICAgc2Vzc2lvbklkOiBzdHJpbmcsXG4gICk6IFN0cmVhbVZpZGVvUGFydGljaXBhbnQgfCB1bmRlZmluZWQgPT4ge1xuICAgIHJldHVybiB0aGlzLnBhcnRpY2lwYW50cy5maW5kKChwKSA9PiBwLnNlc3Npb25JZCA9PT0gc2Vzc2lvbklkKTtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJucyBhIG5ldyBsb29rdXAgdGFibGUgb2YgcGFydGljaXBhbnRzIGluZGV4ZWQgYnkgdGhlaXIgc2Vzc2lvbiBJRC5cbiAgICovXG4gIGdldFBhcnRpY2lwYW50TG9va3VwQnlTZXNzaW9uSWQgPSAoKSA9PiB7XG4gICAgcmV0dXJuIHRoaXMucGFydGljaXBhbnRzLnJlZHVjZTx7XG4gICAgICBbc2Vzc2lvbklkOiBzdHJpbmddOiBTdHJlYW1WaWRlb1BhcnRpY2lwYW50IHwgdW5kZWZpbmVkO1xuICAgIH0+KChsb29rdXBUYWJsZSwgcGFydGljaXBhbnQpID0+IHtcbiAgICAgIGxvb2t1cFRhYmxlW3BhcnRpY2lwYW50LnNlc3Npb25JZF0gPSBwYXJ0aWNpcGFudDtcbiAgICAgIHJldHVybiBsb29rdXBUYWJsZTtcbiAgICB9LCB7fSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgYSBwYXJ0aWNpcGFudCBpbiB0aGUgY3VycmVudCBjYWxsIGlkZW50aWZpZWQgYnkgdGhlIGdpdmVuIGBzZXNzaW9uSWRgLlxuICAgKiBJZiB0aGUgcGFydGljaXBhbnQgY2FuJ3QgYmUgZm91bmQsIHRoaXMgb3BlcmF0aW9uIGlzIG5vLW9wLlxuICAgKlxuICAgKiBAaW50ZXJuYWxcbiAgICpcbiAgICogQHBhcmFtIHNlc3Npb25JZCB0aGUgc2Vzc2lvbiBJRCBvZiB0aGUgcGFydGljaXBhbnQgdG8gdXBkYXRlLlxuICAgKiBAcGFyYW0gcGF0Y2ggdGhlIHBhdGNoIHRvIGFwcGx5IHRvIHRoZSBwYXJ0aWNpcGFudC5cbiAgICogQHJldHVybnMgdGhlIHVwZGF0ZWQgcGFydGljaXBhbnQgb3IgYHVuZGVmaW5lZGAgaWYgdGhlIHBhcnRpY2lwYW50IGNvdWxkbid0IGJlIGZvdW5kLlxuICAgKi9cbiAgdXBkYXRlUGFydGljaXBhbnQgPSAoXG4gICAgc2Vzc2lvbklkOiBzdHJpbmcsXG4gICAgcGF0Y2g6XG4gICAgICB8IFN0cmVhbVZpZGVvUGFydGljaXBhbnRQYXRjaFxuICAgICAgfCAoKHA6IFN0cmVhbVZpZGVvUGFydGljaXBhbnQpID0+IFN0cmVhbVZpZGVvUGFydGljaXBhbnRQYXRjaCksXG4gICkgPT4ge1xuICAgIGNvbnN0IHBhcnRpY2lwYW50ID0gdGhpcy5maW5kUGFydGljaXBhbnRCeVNlc3Npb25JZChzZXNzaW9uSWQpO1xuICAgIGlmICghcGFydGljaXBhbnQpIHtcbiAgICAgIHRoaXMubG9nZ2VyKCd3YXJuJywgYFBhcnRpY2lwYW50IHdpdGggc2Vzc2lvbklkICR7c2Vzc2lvbklkfSBub3QgZm91bmRgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB0aGVQYXRjaCA9IHR5cGVvZiBwYXRjaCA9PT0gJ2Z1bmN0aW9uJyA/IHBhdGNoKHBhcnRpY2lwYW50KSA6IHBhdGNoO1xuICAgIGNvbnN0IHVwZGF0ZWRQYXJ0aWNpcGFudDogU3RyZWFtVmlkZW9QYXJ0aWNpcGFudCA9IHtcbiAgICAgIC8vIEZJWE1FIE9MOiB0aGlzIGlzIG5vdCBhIGRlZXAgbWVyZ2UsIHdlIG1pZ2h0IHdhbnQgdG8gcmV2aXNpdCB0aGlzXG4gICAgICAuLi5wYXJ0aWNpcGFudCxcbiAgICAgIC4uLnRoZVBhdGNoLFxuICAgIH07XG4gICAgcmV0dXJuIHRoaXMuc2V0UGFydGljaXBhbnRzKChwYXJ0aWNpcGFudHMpID0+XG4gICAgICBwYXJ0aWNpcGFudHMubWFwKChwKSA9PlxuICAgICAgICBwLnNlc3Npb25JZCA9PT0gc2Vzc2lvbklkID8gdXBkYXRlZFBhcnRpY2lwYW50IDogcCxcbiAgICAgICksXG4gICAgKTtcbiAgfTtcblxuICAvKipcbiAgICogVXBkYXRlcyBhIHBhcnRpY2lwYW50IGluIHRoZSBjdXJyZW50IGNhbGwgaWRlbnRpZmllZCBieSB0aGUgZ2l2ZW4gYHNlc3Npb25JZGAuXG4gICAqIElmIGEgcGFydGljaXBhbnQgd2l0aCBtYXRjaGluZyBgc2Vzc2lvbklkYCBjYW4ndCBiZSBmb3VuZCwgdGhlIHByb3ZpZGVkXG4gICAqIGBwYXJ0aWNpcGFudGAgaXMgYWRkZWQgdG8gdGhlIGxpc3Qgb2YgcGFydGljaXBhbnRzLlxuICAgKlxuICAgKiBAcGFyYW0gc2Vzc2lvbklkIHRoZSBzZXNzaW9uIElEIG9mIHRoZSBwYXJ0aWNpcGFudCB0byB1cGRhdGUuXG4gICAqIEBwYXJhbSBwYXJ0aWNpcGFudCB0aGUgcGFydGljaXBhbnQgdG8gdXBkYXRlIG9yIGFkZC5cbiAgICovXG4gIHVwZGF0ZU9yQWRkUGFydGljaXBhbnQgPSAoXG4gICAgc2Vzc2lvbklkOiBzdHJpbmcsXG4gICAgcGFydGljaXBhbnQ6IFN0cmVhbVZpZGVvUGFydGljaXBhbnQsXG4gICkgPT4ge1xuICAgIGlmICghdGhpcy5maW5kUGFydGljaXBhbnRCeVNlc3Npb25JZChzZXNzaW9uSWQpKSB7XG4gICAgICByZXR1cm4gdGhpcy5zZXRQYXJ0aWNpcGFudHMoKHBhcnRpY2lwYW50cykgPT4gW1xuICAgICAgICAuLi5wYXJ0aWNpcGFudHMsXG4gICAgICAgIHBhcnRpY2lwYW50LFxuICAgICAgXSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNldFBhcnRpY2lwYW50cygocGFydGljaXBhbnRzKSA9PlxuICAgICAgcGFydGljaXBhbnRzLm1hcCgocCkgPT4ge1xuICAgICAgICBpZiAocC5zZXNzaW9uSWQgPT09IHNlc3Npb25JZCkge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5wLFxuICAgICAgICAgICAgLi4ucGFydGljaXBhbnQsXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcDtcbiAgICAgIH0pLFxuICAgICk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgYWxsIHBhcnRpY2lwYW50cyBpbiB0aGUgY3VycmVudCBjYWxsIHdob3NlIHNlc3Npb24gSUQgaXMgaW4gdGhlIGdpdmVuIGBzZXNzaW9uSWRzYC5cbiAgICogSWYgbm8gcGF0Y2hlcyBhcmUgcHJvdmlkZWQsIHRoaXMgb3BlcmF0aW9uIGlzIG5vLW9wLlxuICAgKlxuICAgKiBAaW50ZXJuYWxcbiAgICpcbiAgICogQHBhcmFtIHBhdGNoIHRoZSBwYXRjaCB0byBhcHBseSB0byB0aGUgcGFydGljaXBhbnRzLlxuICAgKiBAcmV0dXJucyBhbGwgcGFydGljaXBhbnRzLCB3aXRoIGFsbCBwYXRjaCBhcHBsaWVkLlxuICAgKi9cbiAgdXBkYXRlUGFydGljaXBhbnRzID0gKHBhdGNoOiBTdHJlYW1WaWRlb1BhcnRpY2lwYW50UGF0Y2hlcykgPT4ge1xuICAgIGlmIChPYmplY3Qua2V5cyhwYXRjaCkubGVuZ3RoID09PSAwKSByZXR1cm47XG4gICAgcmV0dXJuIHRoaXMuc2V0UGFydGljaXBhbnRzKChwYXJ0aWNpcGFudHMpID0+XG4gICAgICBwYXJ0aWNpcGFudHMubWFwKChwKSA9PiB7XG4gICAgICAgIGNvbnN0IHRoZVBhdGNoID0gcGF0Y2hbcC5zZXNzaW9uSWRdO1xuICAgICAgICBpZiAodGhlUGF0Y2gpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4ucCxcbiAgICAgICAgICAgIC4uLnRoZVBhdGNoLFxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHA7XG4gICAgICB9KSxcbiAgICApO1xuICB9O1xuXG4gIC8qKlxuICAgKiBVcGRhdGVzIHRoZSBjYWxsIHN0YXRlIHdpdGggdGhlIGRhdGEgcmVjZWl2ZWQgZnJvbSB0aGUgc2VydmVyLlxuICAgKlxuICAgKiBAaW50ZXJuYWxcbiAgICpcbiAgICogQHBhcmFtIGV2ZW50IHRoZSB2aWRlbyBldmVudCB0aGF0IG91ciBiYWNrZW5kIHNlbnQgdXMuXG4gICAqL1xuICB1cGRhdGVGcm9tRXZlbnQgPSAoZXZlbnQ6IFZpZGVvRXZlbnQpID0+IHtcbiAgICBjb25zdCB1cGRhdGUgPSB0aGlzLmV2ZW50SGFuZGxlcnNbZXZlbnQudHlwZV07XG4gICAgaWYgKHVwZGF0ZSkge1xuICAgICAgdXBkYXRlKGV2ZW50IGFzIGFueSk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBVcGRhdGVzIHRoZSBwYXJ0aWNpcGFudCBwaW5uZWQgc3RhdGUgd2l0aCBzZXJ2ZXIgc2lkZSBwaW5uaW5nIGRhdGEuXG4gICAqXG4gICAqIEBwYXJhbSBwaW5zIHRoZSBsYXRlc3QgcGlucyBmcm9tIHRoZSBzZXJ2ZXIuXG4gICAqL1xuICBzZXRTZXJ2ZXJTaWRlUGlucyA9IChwaW5zOiBQaW5bXSkgPT4ge1xuICAgIGNvbnN0IHBpbnNMb29rdXAgPSBwaW5zLnJlZHVjZTx7IFtzZXNzaW9uSWQ6IHN0cmluZ106IG51bWJlciB8IHVuZGVmaW5lZCB9PihcbiAgICAgIChsb29rdXAsIHBpbikgPT4ge1xuICAgICAgICBsb29rdXBbcGluLnNlc3Npb25JZF0gPSBEYXRlLm5vdygpO1xuICAgICAgICByZXR1cm4gbG9va3VwO1xuICAgICAgfSxcbiAgICAgIHt9LFxuICAgICk7XG5cbiAgICByZXR1cm4gdGhpcy5zZXRQYXJ0aWNpcGFudHMoKHBhcnRpY2lwYW50cykgPT5cbiAgICAgIHBhcnRpY2lwYW50cy5tYXAoKHBhcnRpY2lwYW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHNlcnZlclNpZGVQaW5uZWRBdCA9IHBpbnNMb29rdXBbcGFydGljaXBhbnQuc2Vzc2lvbklkXTtcbiAgICAgICAgLy8gdGhlIHBhcnRpY2lwYW50IGlzIG5ld2x5IHBpbm5lZFxuICAgICAgICBpZiAoc2VydmVyU2lkZVBpbm5lZEF0KSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnBhcnRpY2lwYW50LFxuICAgICAgICAgICAgcGluOiB7XG4gICAgICAgICAgICAgIGlzTG9jYWxQaW46IGZhbHNlLFxuICAgICAgICAgICAgICBwaW5uZWRBdDogc2VydmVyU2lkZVBpbm5lZEF0LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIC8vIHRoZSBwYXJ0aWNpcGFudCBpcyBubyBsb25nZXIgcGlubmVkIHNlcnZlciBzaWRlXG4gICAgICAgIC8vIHdlIG5lZWQgdG8gcmVzZXQgdGhlIHBpblxuICAgICAgICBpZiAocGFydGljaXBhbnQucGluICYmICFwYXJ0aWNpcGFudC5waW4uaXNMb2NhbFBpbikge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5wYXJ0aWNpcGFudCxcbiAgICAgICAgICAgIHBpbjogdW5kZWZpbmVkLFxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgLy8gbm8gY2hhbmdlcyB0byBiZSBhcHBsaWVkXG4gICAgICAgIHJldHVybiBwYXJ0aWNpcGFudDtcbiAgICAgIH0pLFxuICAgICk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhlIGNhbGwgc3RhdGUgd2l0aCB0aGUgZGF0YSByZWNlaXZlZCBmcm9tIHRoZSBzZXJ2ZXIuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKlxuICAgKiBAcGFyYW0gY2FsbCB0aGUgY2FsbCByZXNwb25zZSBmcm9tIHRoZSBzZXJ2ZXIuXG4gICAqL1xuICB1cGRhdGVGcm9tQ2FsbFJlc3BvbnNlID0gKGNhbGw6IENhbGxSZXNwb25zZSkgPT4ge1xuICAgIHRoaXMuc2V0Q3VycmVudFZhbHVlKHRoaXMuYmFja3N0YWdlU3ViamVjdCwgY2FsbC5iYWNrc3RhZ2UpO1xuICAgIHRoaXMuc2V0Q3VycmVudFZhbHVlKHRoaXMuYmxvY2tlZFVzZXJJZHNTdWJqZWN0LCBjYWxsLmJsb2NrZWRfdXNlcl9pZHMpO1xuICAgIHRoaXMuc2V0Q3VycmVudFZhbHVlKHRoaXMuY3JlYXRlZEF0U3ViamVjdCwgbmV3IERhdGUoY2FsbC5jcmVhdGVkX2F0KSk7XG4gICAgdGhpcy5zZXRDdXJyZW50VmFsdWUodGhpcy51cGRhdGVkQXRTdWJqZWN0LCBuZXcgRGF0ZShjYWxsLnVwZGF0ZWRfYXQpKTtcbiAgICB0aGlzLnNldEN1cnJlbnRWYWx1ZShcbiAgICAgIHRoaXMuc3RhcnRzQXRTdWJqZWN0LFxuICAgICAgY2FsbC5zdGFydHNfYXQgPyBuZXcgRGF0ZShjYWxsLnN0YXJ0c19hdCkgOiB1bmRlZmluZWQsXG4gICAgKTtcbiAgICB0aGlzLnNldEN1cnJlbnRWYWx1ZShcbiAgICAgIHRoaXMuZW5kZWRBdFN1YmplY3QsXG4gICAgICBjYWxsLmVuZGVkX2F0ID8gbmV3IERhdGUoY2FsbC5lbmRlZF9hdCkgOiB1bmRlZmluZWQsXG4gICAgKTtcbiAgICB0aGlzLnNldEN1cnJlbnRWYWx1ZSh0aGlzLmNyZWF0ZWRCeVN1YmplY3QsIGNhbGwuY3JlYXRlZF9ieSk7XG4gICAgdGhpcy5zZXRDdXJyZW50VmFsdWUodGhpcy5jdXN0b21TdWJqZWN0LCBjYWxsLmN1c3RvbSk7XG4gICAgdGhpcy5zZXRDdXJyZW50VmFsdWUodGhpcy5lZ3Jlc3NTdWJqZWN0LCBjYWxsLmVncmVzcyk7XG4gICAgdGhpcy5zZXRDdXJyZW50VmFsdWUodGhpcy5pbmdyZXNzU3ViamVjdCwgY2FsbC5pbmdyZXNzKTtcbiAgICB0aGlzLnNldEN1cnJlbnRWYWx1ZSh0aGlzLnJlY29yZGluZ1N1YmplY3QsIGNhbGwucmVjb3JkaW5nKTtcbiAgICB0aGlzLnNldEN1cnJlbnRWYWx1ZSh0aGlzLnNlc3Npb25TdWJqZWN0LCBjYWxsLnNlc3Npb24pO1xuICAgIHRoaXMuc2V0Q3VycmVudFZhbHVlKHRoaXMuc2V0dGluZ3NTdWJqZWN0LCBjYWxsLnNldHRpbmdzKTtcbiAgICB0aGlzLnNldEN1cnJlbnRWYWx1ZSh0aGlzLnRyYW5zY3JpYmluZ1N1YmplY3QsIGNhbGwudHJhbnNjcmliaW5nKTtcbiAgICB0aGlzLnNldEN1cnJlbnRWYWx1ZSh0aGlzLnRodW1ibmFpbHNTdWJqZWN0LCBjYWxsLnRodW1ibmFpbHMpO1xuICB9O1xuXG4gIHByaXZhdGUgdXBkYXRlRnJvbU1lbWJlclJlbW92ZWQgPSAoZXZlbnQ6IENhbGxNZW1iZXJSZW1vdmVkRXZlbnQpID0+IHtcbiAgICB0aGlzLnNldEN1cnJlbnRWYWx1ZSh0aGlzLm1lbWJlcnNTdWJqZWN0LCAobWVtYmVycykgPT5cbiAgICAgIG1lbWJlcnMuZmlsdGVyKChtKSA9PiBldmVudC5tZW1iZXJzLmluZGV4T2YobS51c2VyX2lkKSA9PT0gLTEpLFxuICAgICk7XG4gIH07XG5cbiAgcHJpdmF0ZSB1cGRhdGVGcm9tTWVtYmVyQWRkZWQgPSAoZXZlbnQ6IENhbGxNZW1iZXJBZGRlZEV2ZW50KSA9PiB7XG4gICAgdGhpcy5zZXRDdXJyZW50VmFsdWUodGhpcy5tZW1iZXJzU3ViamVjdCwgKG1lbWJlcnMpID0+IFtcbiAgICAgIC4uLm1lbWJlcnMsXG4gICAgICAuLi5ldmVudC5tZW1iZXJzLFxuICAgIF0pO1xuICB9O1xuXG4gIHByaXZhdGUgdXBkYXRlRnJvbUhMU0Jyb2FkY2FzdFN0b3BwZWQgPSAoKSA9PiB7XG4gICAgdGhpcy5zZXRDdXJyZW50VmFsdWUodGhpcy5lZ3Jlc3NTdWJqZWN0LCAoZWdyZXNzKSA9PiAoe1xuICAgICAgLi4uZWdyZXNzISxcbiAgICAgIGJyb2FkY2FzdGluZzogZmFsc2UsXG4gICAgfSkpO1xuICB9O1xuXG4gIHByaXZhdGUgdXBkYXRlRnJvbUhMU0Jyb2FkY2FzdGluZ0ZhaWxlZCA9ICgpID0+IHtcbiAgICB0aGlzLnNldEN1cnJlbnRWYWx1ZSh0aGlzLmVncmVzc1N1YmplY3QsIChlZ3Jlc3MpID0+ICh7XG4gICAgICAuLi5lZ3Jlc3MhLFxuICAgICAgYnJvYWRjYXN0aW5nOiBmYWxzZSxcbiAgICB9KSk7XG4gIH07XG5cbiAgcHJpdmF0ZSB1cGRhdGVGcm9tSExTQnJvYWRjYXN0U3RhcnRlZCA9IChcbiAgICBldmVudDogQ2FsbEhMU0Jyb2FkY2FzdGluZ1N0YXJ0ZWRFdmVudCxcbiAgKSA9PiB7XG4gICAgdGhpcy5zZXRDdXJyZW50VmFsdWUodGhpcy5lZ3Jlc3NTdWJqZWN0LCAoZWdyZXNzKSA9PiAoe1xuICAgICAgLi4uZWdyZXNzISxcbiAgICAgIGJyb2FkY2FzdGluZzogdHJ1ZSxcbiAgICAgIGhsczoge1xuICAgICAgICAuLi5lZ3Jlc3MhLmhscyxcbiAgICAgICAgcGxheWxpc3RfdXJsOiBldmVudC5obHNfcGxheWxpc3RfdXJsLFxuICAgICAgfSxcbiAgICB9KSk7XG4gIH07XG5cbiAgcHJpdmF0ZSB1cGRhdGVGcm9tU2Vzc2lvblBhcnRpY2lwYW50TGVmdCA9IChcbiAgICBldmVudDogQ2FsbFNlc3Npb25QYXJ0aWNpcGFudExlZnRFdmVudCxcbiAgKSA9PiB7XG4gICAgdGhpcy5zZXRDdXJyZW50VmFsdWUodGhpcy5zZXNzaW9uU3ViamVjdCwgKHNlc3Npb24pID0+IHtcbiAgICAgIGlmICghc2Vzc2lvbikge1xuICAgICAgICB0aGlzLmxvZ2dlcihcbiAgICAgICAgICAnd2FybicsXG4gICAgICAgICAgYFJlY2VpdmVkIGNhbGwuc2Vzc2lvbl9wYXJ0aWNpcGFudF9sZWZ0IGV2ZW50IGJ1dCBubyBzZXNzaW9uIGlzIGF2YWlsYWJsZS5gLFxuICAgICAgICAgIGV2ZW50LFxuICAgICAgICApO1xuICAgICAgICByZXR1cm4gc2Vzc2lvbjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHsgcGFydGljaXBhbnRzLCBwYXJ0aWNpcGFudHNfY291bnRfYnlfcm9sZSB9ID0gc2Vzc2lvbjtcbiAgICAgIGNvbnN0IHsgdXNlciwgdXNlcl9zZXNzaW9uX2lkIH0gPSBldmVudC5wYXJ0aWNpcGFudDtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnNlc3Npb24sXG4gICAgICAgIHBhcnRpY2lwYW50czogcGFydGljaXBhbnRzLmZpbHRlcihcbiAgICAgICAgICAocCkgPT4gcC51c2VyX3Nlc3Npb25faWQgIT09IHVzZXJfc2Vzc2lvbl9pZCxcbiAgICAgICAgKSxcbiAgICAgICAgcGFydGljaXBhbnRzX2NvdW50X2J5X3JvbGU6IHtcbiAgICAgICAgICAuLi5wYXJ0aWNpcGFudHNfY291bnRfYnlfcm9sZSxcbiAgICAgICAgICBbdXNlci5yb2xlXTogTWF0aC5tYXgoXG4gICAgICAgICAgICAwLFxuICAgICAgICAgICAgKHBhcnRpY2lwYW50c19jb3VudF9ieV9yb2xlW3VzZXIucm9sZV0gfHwgMCkgLSAxLFxuICAgICAgICAgICksXG4gICAgICAgIH0sXG4gICAgICB9O1xuICAgIH0pO1xuICB9O1xuXG4gIHByaXZhdGUgdXBkYXRlRnJvbVNlc3Npb25QYXJ0aWNpcGFudEpvaW5lZCA9IChcbiAgICBldmVudDogQ2FsbFNlc3Npb25QYXJ0aWNpcGFudEpvaW5lZEV2ZW50LFxuICApID0+IHtcbiAgICB0aGlzLnNldEN1cnJlbnRWYWx1ZSh0aGlzLnNlc3Npb25TdWJqZWN0LCAoc2Vzc2lvbikgPT4ge1xuICAgICAgaWYgKCFzZXNzaW9uKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyKFxuICAgICAgICAgICd3YXJuJyxcbiAgICAgICAgICBgUmVjZWl2ZWQgY2FsbC5zZXNzaW9uX3BhcnRpY2lwYW50X2pvaW5lZCBldmVudCBidXQgbm8gc2Vzc2lvbiBpcyBhdmFpbGFibGUuYCxcbiAgICAgICAgICBldmVudCxcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIHNlc3Npb247XG4gICAgICB9XG4gICAgICBjb25zdCB7IHBhcnRpY2lwYW50cywgcGFydGljaXBhbnRzX2NvdW50X2J5X3JvbGUgfSA9IHNlc3Npb247XG4gICAgICBjb25zdCB7IHVzZXIsIHVzZXJfc2Vzc2lvbl9pZCB9ID0gZXZlbnQucGFydGljaXBhbnQ7XG4gICAgICAvLyBJdCBjb3VsZCBoYXBwZW4gdGhhdCB0aGUgYmFja2VuZCBkZWxpdmVycyB0aGUgc2FtZSBwYXJ0aWNpcGFudCBtb3JlIHRoYW4gb25jZS5cbiAgICAgIC8vIE9uY2Ugd2l0aCB0aGUgY2FsbC5zZXNzaW9uX3N0YXJ0ZWQgZXZlbnQgYW5kIG9uY2UgYWdhaW4gd2l0aCB0aGVcbiAgICAgIC8vIGNhbGwuc2Vzc2lvbl9wYXJ0aWNpcGFudF9qb2luZWQgZXZlbnQuIEluIHRoaXMgY2FzZSxcbiAgICAgIC8vIHdlIHNob3VsZCB1cGRhdGUgdGhlIGV4aXN0aW5nIHBhcnRpY2lwYW50IGFuZCBwcmV2ZW50IGR1cGxpY2F0aW5nIGl0LlxuICAgICAgbGV0IHNob3VsZEluc2VydFBhcnRpY2lwYW50ID0gdHJ1ZTtcbiAgICAgIGNvbnN0IHVwZGF0ZWRQYXJ0aWNpcGFudHMgPSBwYXJ0aWNpcGFudHMubWFwKChwKSA9PiB7XG4gICAgICAgIGlmIChwLnVzZXJfc2Vzc2lvbl9pZCA9PT0gdXNlcl9zZXNzaW9uX2lkKSB7XG4gICAgICAgICAgc2hvdWxkSW5zZXJ0UGFydGljaXBhbnQgPSBmYWxzZTtcbiAgICAgICAgICByZXR1cm4gZXZlbnQucGFydGljaXBhbnQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHA7XG4gICAgICB9KTtcbiAgICAgIGlmIChzaG91bGRJbnNlcnRQYXJ0aWNpcGFudCkge1xuICAgICAgICAvLyB0aGlzIGlzIGEgbmV3IGFycmF5LCB3ZSBjYW4gc2FmZWx5IHB1c2ggdGhlIG5ldyBwYXJ0aWNpcGFudFxuICAgICAgICB1cGRhdGVkUGFydGljaXBhbnRzLnB1c2goZXZlbnQucGFydGljaXBhbnQpO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiB3ZSBhcmUgdXBkYXRpbmcgYW4gZXhpc3RpbmcgcGFydGljaXBhbnQsIHdlIGRvbid0IHdhbnQgdG8gaW5jcmVtZW50XG4gICAgICAvLyB0aGUgcGFydGljaXBhbnRfYnlfcm9sZSBjb3VudC5cbiAgICAgIGNvbnN0IGluY3JlbWVudCA9IHNob3VsZEluc2VydFBhcnRpY2lwYW50ID8gMSA6IDA7XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5zZXNzaW9uLFxuICAgICAgICBwYXJ0aWNpcGFudHM6IHVwZGF0ZWRQYXJ0aWNpcGFudHMsXG4gICAgICAgIHBhcnRpY2lwYW50c19jb3VudF9ieV9yb2xlOiB7XG4gICAgICAgICAgLi4ucGFydGljaXBhbnRzX2NvdW50X2J5X3JvbGUsXG4gICAgICAgICAgW3VzZXIucm9sZV06IChwYXJ0aWNpcGFudHNfY291bnRfYnlfcm9sZVt1c2VyLnJvbGVdIHx8IDApICsgaW5jcmVtZW50LFxuICAgICAgICB9LFxuICAgICAgfTtcbiAgICB9KTtcbiAgfTtcblxuICBwcml2YXRlIHVwZGF0ZU1lbWJlcnMgPSAoXG4gICAgZXZlbnQ6IENhbGxNZW1iZXJVcGRhdGVkRXZlbnQgfCBDYWxsTWVtYmVyVXBkYXRlZFBlcm1pc3Npb25FdmVudCxcbiAgKSA9PiB7XG4gICAgdGhpcy5zZXRDdXJyZW50VmFsdWUodGhpcy5tZW1iZXJzU3ViamVjdCwgKG1lbWJlcnMpID0+XG4gICAgICBtZW1iZXJzLm1hcCgobWVtYmVyKSA9PiB7XG4gICAgICAgIGNvbnN0IG1lbWJlclVwZGF0ZSA9IGV2ZW50Lm1lbWJlcnMuZmluZChcbiAgICAgICAgICAobSkgPT4gbS51c2VyX2lkID09PSBtZW1iZXIudXNlcl9pZCxcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIG1lbWJlclVwZGF0ZSA/IG1lbWJlclVwZGF0ZSA6IG1lbWJlcjtcbiAgICAgIH0pLFxuICAgICk7XG4gIH07XG5cbiAgcHJpdmF0ZSB1cGRhdGVQYXJ0aWNpcGFudFJlYWN0aW9uID0gKGV2ZW50OiBDYWxsUmVhY3Rpb25FdmVudCkgPT4ge1xuICAgIGNvbnN0IHsgdXNlciwgY3VzdG9tLCB0eXBlLCBlbW9qaV9jb2RlIH0gPSBldmVudC5yZWFjdGlvbjtcbiAgICB0aGlzLnNldFBhcnRpY2lwYW50cygocGFydGljaXBhbnRzKSA9PiB7XG4gICAgICByZXR1cm4gcGFydGljaXBhbnRzLm1hcCgocCkgPT4ge1xuICAgICAgICAvLyBza2lwIGlmIHRoZSByZWFjdGlvbiBpcyBub3QgZm9yIHRoaXMgcGFydGljaXBhbnRcbiAgICAgICAgaWYgKHAudXNlcklkICE9PSB1c2VyLmlkKSByZXR1cm4gcDtcbiAgICAgICAgLy8gdXBkYXRlIHRoZSBwYXJ0aWNpcGFudCB3aXRoIHRoZSBuZXcgcmVhY3Rpb25cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5wLFxuICAgICAgICAgIHJlYWN0aW9uOiB7XG4gICAgICAgICAgICB0eXBlLFxuICAgICAgICAgICAgZW1vamlfY29kZSxcbiAgICAgICAgICAgIGN1c3RvbSxcbiAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgcHJpdmF0ZSB1bmJsb2NrVXNlciA9IChldmVudDogVW5ibG9ja2VkVXNlckV2ZW50KSA9PiB7XG4gICAgdGhpcy5zZXRDdXJyZW50VmFsdWUodGhpcy5ibG9ja2VkVXNlcklkc1N1YmplY3QsIChjdXJyZW50KSA9PiB7XG4gICAgICBpZiAoIWN1cnJlbnQpIHJldHVybiBjdXJyZW50O1xuICAgICAgcmV0dXJuIGN1cnJlbnQuZmlsdGVyKChpZCkgPT4gaWQgIT09IGV2ZW50LnVzZXIuaWQpO1xuICAgIH0pO1xuICB9O1xuXG4gIHByaXZhdGUgYmxvY2tVc2VyID0gKGV2ZW50OiBCbG9ja2VkVXNlckV2ZW50KSA9PiB7XG4gICAgdGhpcy5zZXRDdXJyZW50VmFsdWUodGhpcy5ibG9ja2VkVXNlcklkc1N1YmplY3QsIChjdXJyZW50KSA9PiBbXG4gICAgICAuLi4oY3VycmVudCB8fCBbXSksXG4gICAgICBldmVudC51c2VyLmlkLFxuICAgIF0pO1xuICB9O1xuXG4gIHByaXZhdGUgdXBkYXRlT3duQ2FwYWJpbGl0aWVzID0gKGV2ZW50OiBVcGRhdGVkQ2FsbFBlcm1pc3Npb25zRXZlbnQpID0+IHtcbiAgICBpZiAoZXZlbnQudXNlci5pZCA9PT0gdGhpcy5sb2NhbFBhcnRpY2lwYW50Py51c2VySWQpIHtcbiAgICAgIHRoaXMuc2V0Q3VycmVudFZhbHVlKHRoaXMub3duQ2FwYWJpbGl0aWVzU3ViamVjdCwgZXZlbnQub3duX2NhcGFiaWxpdGllcyk7XG4gICAgfVxuICB9O1xufVxuIiwiaW1wb3J0IHsgQmVoYXZpb3JTdWJqZWN0LCBPYnNlcnZhYmxlIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgdHlwZSB7IFBhdGNoIH0gZnJvbSAnLi9yeFV0aWxzJztcbmltcG9ydCAqIGFzIFJ4VXRpbHMgZnJvbSAnLi9yeFV0aWxzJztcbmltcG9ydCB7IENhbGwgfSBmcm9tICcuLi9DYWxsJztcbmltcG9ydCB7IENhbGxpbmdTdGF0ZSB9IGZyb20gJy4vQ2FsbFN0YXRlJztcbmltcG9ydCB0eXBlIHsgT3duVXNlclJlc3BvbnNlIH0gZnJvbSAnLi4vZ2VuL2Nvb3JkaW5hdG9yJztcbmltcG9ydCB7IGdldExvZ2dlciB9IGZyb20gJy4uL2xvZ2dlcic7XG5cbmV4cG9ydCBjbGFzcyBTdHJlYW1WaWRlb1dyaXRlYWJsZVN0YXRlU3RvcmUge1xuICAvKipcbiAgICogQSBzdG9yZSBrZWVwaW5nIGRhdGEgb2YgYSBzdWNjZXNzZnVsbHkgY29ubmVjdGVkIHVzZXIgb3ZlciBXUyB0byB0aGUgY29vcmRpbmF0b3Igc2VydmVyLlxuICAgKi9cbiAgY29ubmVjdGVkVXNlclN1YmplY3QgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PE93blVzZXJSZXNwb25zZSB8IHVuZGVmaW5lZD4oXG4gICAgdW5kZWZpbmVkLFxuICApO1xuXG4gIC8qKlxuICAgKiBBIGxpc3Qgb2Yge0BsaW5rIENhbGx9IG9iamVjdHMgY3JlYXRlZC90cmFja2VkIGJ5IHRoaXMgY2xpZW50LlxuICAgKi9cbiAgY2FsbHNTdWJqZWN0ID0gbmV3IEJlaGF2aW9yU3ViamVjdDxDYWxsW10+KFtdKTtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmNvbm5lY3RlZFVzZXJTdWJqZWN0LnN1YnNjcmliZShhc3luYyAodXNlcikgPT4ge1xuICAgICAgLy8gbGVhdmUgYWxsIGNhbGxzIHdoZW4gdGhlIHVzZXIgZGlzY29ubmVjdHMuXG4gICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgY29uc3QgbG9nZ2VyID0gZ2V0TG9nZ2VyKFsnY2xpZW50LXN0YXRlJ10pO1xuICAgICAgICBmb3IgKGNvbnN0IGNhbGwgb2YgdGhpcy5jYWxscykge1xuICAgICAgICAgIGlmIChjYWxsLnN0YXRlLmNhbGxpbmdTdGF0ZSA9PT0gQ2FsbGluZ1N0YXRlLkxFRlQpIGNvbnRpbnVlO1xuXG4gICAgICAgICAgbG9nZ2VyKCdpbmZvJywgYFVzZXIgZGlzY29ubmVjdGVkLCBsZWF2aW5nIGNhbGw6ICR7Y2FsbC5jaWR9YCk7XG4gICAgICAgICAgYXdhaXQgY2FsbC5sZWF2ZSgpLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgIGxvZ2dlcignZXJyb3InLCBgRXJyb3IgbGVhdmluZyBjYWxsOiAke2NhbGwuY2lkfWAsIGVycik7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBjdXJyZW50IHZhbHVlIG9mIGFuIG9ic2VydmFibGUsIG9yIHVuZGVmaW5lZCBpZiB0aGUgb2JzZXJ2YWJsZSBoYXNcbiAgICogbm90IGVtaXR0ZWQgYSB2YWx1ZSB5ZXQuXG4gICAqXG4gICAqIEBwYXJhbSBvYnNlcnZhYmxlJCB0aGUgb2JzZXJ2YWJsZSB0byBnZXQgdGhlIHZhbHVlIGZyb20uXG4gICAqL1xuICBwcml2YXRlIGdldEN1cnJlbnRWYWx1ZSA9IFJ4VXRpbHMuZ2V0Q3VycmVudFZhbHVlO1xuXG4gIC8qKlxuICAgKiBVcGRhdGVzIHRoZSB2YWx1ZSBvZiB0aGUgcHJvdmlkZWQgU3ViamVjdC5cbiAgICogQW4gYHVwZGF0ZWAgY2FuIGVpdGhlciBiZSBhIG5ldyB2YWx1ZSBvciBhIGZ1bmN0aW9uIHdoaWNoIHRha2VzXG4gICAqIHRoZSBjdXJyZW50IHZhbHVlIGFuZCByZXR1cm5zIGEgbmV3IHZhbHVlLlxuICAgKlxuICAgKiBAcGFyYW0gc3ViamVjdCB0aGUgc3ViamVjdCB0byB1cGRhdGUuXG4gICAqIEBwYXJhbSB1cGRhdGUgdGhlIHVwZGF0ZSB0byBhcHBseSB0byB0aGUgc3ViamVjdC5cbiAgICogQHJldHVybiB0aGUgdXBkYXRlZCB2YWx1ZS5cbiAgICovXG4gIHByaXZhdGUgc2V0Q3VycmVudFZhbHVlID0gUnhVdGlscy5zZXRDdXJyZW50VmFsdWU7XG5cbiAgLyoqXG4gICAqIFRoZSBjdXJyZW50bHkgY29ubmVjdGVkIHVzZXIuXG4gICAqL1xuICBnZXQgY29ubmVjdGVkVXNlcigpOiBPd25Vc2VyUmVzcG9uc2UgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLmdldEN1cnJlbnRWYWx1ZSh0aGlzLmNvbm5lY3RlZFVzZXJTdWJqZWN0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBjdXJyZW50bHkgY29ubmVjdGVkIHVzZXIuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKiBAcGFyYW0gdXNlciB0aGUgdXNlciB0byBzZXQgYXMgY29ubmVjdGVkLlxuICAgKi9cbiAgc2V0Q29ubmVjdGVkVXNlciA9ICh1c2VyOiBQYXRjaDxPd25Vc2VyUmVzcG9uc2UgfCB1bmRlZmluZWQ+KSA9PiB7XG4gICAgcmV0dXJuIHRoaXMuc2V0Q3VycmVudFZhbHVlKHRoaXMuY29ubmVjdGVkVXNlclN1YmplY3QsIHVzZXIpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBIGxpc3Qgb2Yge0BsaW5rIENhbGx9IG9iamVjdHMgY3JlYXRlZC90cmFja2VkIGJ5IHRoaXMgY2xpZW50LlxuICAgKi9cbiAgZ2V0IGNhbGxzKCk6IENhbGxbXSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q3VycmVudFZhbHVlKHRoaXMuY2FsbHNTdWJqZWN0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBsaXN0IG9mIHtAbGluayBDYWxsfSBvYmplY3RzIGNyZWF0ZWQvdHJhY2tlZCBieSB0aGlzIGNsaWVudC5cbiAgICogQHBhcmFtIGNhbGxzXG4gICAqL1xuICBzZXRDYWxscyA9IChjYWxsczogUGF0Y2g8Q2FsbFtdPikgPT4ge1xuICAgIHJldHVybiB0aGlzLnNldEN1cnJlbnRWYWx1ZSh0aGlzLmNhbGxzU3ViamVjdCwgY2FsbHMpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBZGRzIGEge0BsaW5rIENhbGx9IG9iamVjdCB0byB0aGUgbGlzdCBvZiB7QGxpbmsgQ2FsbH0gb2JqZWN0cyBjcmVhdGVkL3RyYWNrZWQgYnkgdGhpcyBjbGllbnQuXG4gICAqXG4gICAqIEBwYXJhbSBjYWxsIHRoZSBjYWxsIHRvIGFkZC5cbiAgICovXG4gIHJlZ2lzdGVyQ2FsbCA9IChjYWxsOiBDYWxsKSA9PiB7XG4gICAgaWYgKCF0aGlzLmNhbGxzLmZpbmQoKGMpID0+IGMuY2lkID09PSBjYWxsLmNpZCkpIHtcbiAgICAgIHRoaXMuc2V0Q2FsbHMoKGNhbGxzKSA9PiBbLi4uY2FsbHMsIGNhbGxdKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYSB7QGxpbmsgQ2FsbH0gb2JqZWN0IGZyb20gdGhlIGxpc3Qgb2Yge0BsaW5rIENhbGx9IG9iamVjdHMgY3JlYXRlZC90cmFja2VkIGJ5IHRoaXMgY2xpZW50LlxuICAgKlxuICAgKiBAcGFyYW0gY2FsbCB0aGUgY2FsbCB0byByZW1vdmVcbiAgICovXG4gIHVucmVnaXN0ZXJDYWxsID0gKGNhbGw6IENhbGwpID0+IHtcbiAgICByZXR1cm4gdGhpcy5zZXRDYWxscygoY2FsbHMpID0+IGNhbGxzLmZpbHRlcigoYykgPT4gYyAhPT0gY2FsbCkpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBGaW5kcyBhIHtAbGluayBDYWxsfSBvYmplY3QgaW4gdGhlIGxpc3Qgb2Yge0BsaW5rIENhbGx9IG9iamVjdHMgY3JlYXRlZC90cmFja2VkIGJ5IHRoaXMgY2xpZW50LlxuICAgKlxuICAgKiBAcGFyYW0gdHlwZSB0aGUgdHlwZSBvZiBjYWxsIHRvIGZpbmQuXG4gICAqIEBwYXJhbSBpZCB0aGUgaWQgb2YgdGhlIGNhbGwgdG8gZmluZC5cbiAgICovXG4gIGZpbmRDYWxsID0gKHR5cGU6IHN0cmluZywgaWQ6IHN0cmluZykgPT4ge1xuICAgIHJldHVybiB0aGlzLmNhbGxzLmZpbmQoKGMpID0+IGMudHlwZSA9PT0gdHlwZSAmJiBjLmlkID09PSBpZCk7XG4gIH07XG59XG5cbi8qKlxuICogQSByZWFjdGl2ZSBzdG9yZSB0aGF0IGV4cG9zZXMgc3RhdGUgdmFyaWFibGVzIGluIGEgcmVhY3RpdmUgbWFubmVyLlxuICogWW91IGNhbiBzdWJzY3JpYmUgdG8gY2hhbmdlcyBvZiB0aGUgZGlmZmVyZW50IHN0YXRlIHZhcmlhYmxlcy5cbiAqIFRoaXMgY2VudHJhbCBzdG9yZSBjb250YWlucyBhbGwgdGhlIHN0YXRlIHZhcmlhYmxlcyByZWxhdGVkIHRvIFtgU3RyZWFtVmlkZW9DbGllbnRgXSguL1N0cmVhbVZpZGVDbGllbnQubWQpIGFuZCBbYENhbGxgXSguL0NhbGwubWQpLlxuICovXG5leHBvcnQgY2xhc3MgU3RyZWFtVmlkZW9SZWFkT25seVN0YXRlU3RvcmUge1xuICAvKipcbiAgICogRGF0YSBkZXNjcmliaW5nIGEgdXNlciBzdWNjZXNzZnVsbHkgY29ubmVjdGVkIG92ZXIgV1MgdG8gY29vcmRpbmF0b3Igc2VydmVyLlxuICAgKi9cbiAgY29ubmVjdGVkVXNlciQ6IE9ic2VydmFibGU8T3duVXNlclJlc3BvbnNlIHwgdW5kZWZpbmVkPjtcblxuICAvKipcbiAgICogQSBsaXN0IG9mIHtAbGluayBDYWxsfSBvYmplY3RzIGNyZWF0ZWQvdHJhY2tlZCBieSB0aGlzIGNsaWVudC5cbiAgICovXG4gIGNhbGxzJDogT2JzZXJ2YWJsZTxDYWxsW10+O1xuXG4gIC8qKlxuICAgKiBUaGlzIG1ldGhvZCBhbGxvd3MgeW91IHRoZSBnZXQgdGhlIGN1cnJlbnQgdmFsdWUgb2YgYSBzdGF0ZSB2YXJpYWJsZS5cbiAgICpcbiAgICogQHBhcmFtIG9ic2VydmFibGUgdGhlIG9ic2VydmFibGUgdG8gZ2V0IHRoZSBjdXJyZW50IHZhbHVlIG9mLlxuICAgKiBAcmV0dXJucyB0aGUgY3VycmVudCB2YWx1ZSBvZiB0aGUgb2JzZXJ2YWJsZS5cbiAgICovXG4gIGdldEN1cnJlbnRWYWx1ZSA9IFJ4VXRpbHMuZ2V0Q3VycmVudFZhbHVlO1xuXG4gIGNvbnN0cnVjdG9yKHN0b3JlOiBTdHJlYW1WaWRlb1dyaXRlYWJsZVN0YXRlU3RvcmUpIHtcbiAgICAvLyBjb252ZXJ0IGFuZCBleHBvc2Ugc3ViamVjdHMgYXMgb2JzZXJ2YWJsZXNcbiAgICB0aGlzLmNvbm5lY3RlZFVzZXIkID0gc3RvcmUuY29ubmVjdGVkVXNlclN1YmplY3QuYXNPYnNlcnZhYmxlKCk7XG4gICAgdGhpcy5jYWxscyQgPSBzdG9yZS5jYWxsc1N1YmplY3QuYXNPYnNlcnZhYmxlKCk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIGN1cnJlbnQgdXNlciBjb25uZWN0ZWQgb3ZlciBXUyB0byB0aGUgYmFja2VuZC5cbiAgICovXG4gIGdldCBjb25uZWN0ZWRVc2VyKCk6IE93blVzZXJSZXNwb25zZSB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIFJ4VXRpbHMuZ2V0Q3VycmVudFZhbHVlKHRoaXMuY29ubmVjdGVkVXNlciQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEEgbGlzdCBvZiB7QGxpbmsgQ2FsbH0gb2JqZWN0cyBjcmVhdGVkL3RyYWNrZWQgYnkgdGhpcyBjbGllbnQuXG4gICAqL1xuICBnZXQgY2FsbHMoKTogQ2FsbFtdIHtcbiAgICByZXR1cm4gUnhVdGlscy5nZXRDdXJyZW50VmFsdWUodGhpcy5jYWxscyQpO1xuICB9XG59XG4iLCJpbXBvcnQgKiBhcyBTRFAgZnJvbSAnc2RwLXRyYW5zZm9ybSc7XG5cbnR5cGUgTWVkaWEgPSB7XG4gIG9yaWdpbmFsOiBzdHJpbmc7XG4gIG1lZGlhV2l0aFBvcnRzOiBzdHJpbmc7XG4gIGNvZGVjT3JkZXI6IHN0cmluZztcbn07XG5cbnR5cGUgUnRwTWFwID0ge1xuICBvcmlnaW5hbDogc3RyaW5nO1xuICBwYXlsb2FkOiBzdHJpbmc7XG4gIGNvZGVjOiBzdHJpbmc7XG59O1xuXG50eXBlIEZtdHAgPSB7XG4gIG9yaWdpbmFsOiBzdHJpbmc7XG4gIHBheWxvYWQ6IHN0cmluZztcbiAgY29uZmlnOiBzdHJpbmc7XG59O1xuXG5jb25zdCBnZXRSdHBNYXAgPSAobGluZTogc3RyaW5nKTogUnRwTWFwIHwgdW5kZWZpbmVkID0+IHtcbiAgLy8gRXhhbXBsZTogYT1ydHBtYXA6MTEwIG9wdXMvNDgwMDAvMlxuICBjb25zdCBydHBSZWdleCA9IC9eYT1ydHBtYXA6KFxcZCopIChbXFx3XFwtLl0qKSg/OlxccypcXC8oXFxkKikoPzpcXHMqXFwvKFxcUyopKT8pPy87XG4gIC8vIFRoZSBmaXJzdCBjYXB0dXJlZCBncm91cCBpcyB0aGUgcGF5bG9hZCB0eXBlIG51bWJlciwgdGhlIHNlY29uZCBjYXB0dXJlZCBncm91cCBpcyB0aGUgZW5jb2RpbmcgbmFtZSwgdGhlIHRoaXJkIGNhcHR1cmVkIGdyb3VwIGlzIHRoZSBjbG9jayByYXRlLCBhbmQgdGhlIGZvdXJ0aCBjYXB0dXJlZCBncm91cCBpcyBhbnkgYWRkaXRpb25hbCBwYXJhbWV0ZXJzLlxuICBjb25zdCBydHBNYXRjaCA9IHJ0cFJlZ2V4LmV4ZWMobGluZSk7XG4gIGlmIChydHBNYXRjaCkge1xuICAgIHJldHVybiB7XG4gICAgICBvcmlnaW5hbDogcnRwTWF0Y2hbMF0sXG4gICAgICBwYXlsb2FkOiBydHBNYXRjaFsxXSxcbiAgICAgIGNvZGVjOiBydHBNYXRjaFsyXSxcbiAgICB9O1xuICB9XG59O1xuXG5jb25zdCBnZXRGbXRwID0gKGxpbmU6IHN0cmluZyk6IEZtdHAgfCB1bmRlZmluZWQgPT4ge1xuICAvLyBFeGFtcGxlOiBhPWZtdHA6MTExIG1pbnB0aW1lPTEwOyB1c2VpbmJhbmRmZWM9MVxuICBjb25zdCBmbXRwUmVnZXggPSAvXmE9Zm10cDooXFxkKikgKC4qKS87XG4gIGNvbnN0IGZtdHBNYXRjaCA9IGZtdHBSZWdleC5leGVjKGxpbmUpO1xuICAvLyBUaGUgZmlyc3QgY2FwdHVyZWQgZ3JvdXAgaXMgdGhlIHBheWxvYWQgdHlwZSBudW1iZXIsIHRoZSBzZWNvbmQgY2FwdHVyZWQgZ3JvdXAgaXMgYW55IGFkZGl0aW9uYWwgcGFyYW1ldGVycy5cbiAgaWYgKGZtdHBNYXRjaCkge1xuICAgIHJldHVybiB7XG4gICAgICBvcmlnaW5hbDogZm10cE1hdGNoWzBdLFxuICAgICAgcGF5bG9hZDogZm10cE1hdGNoWzFdLFxuICAgICAgY29uZmlnOiBmbXRwTWF0Y2hbMl0sXG4gICAgfTtcbiAgfVxufTtcblxuLyoqXG4gKiBnZXRzIHRoZSBtZWRpYSBzZWN0aW9uIGZvciB0aGUgc3BlY2lmaWVkIG1lZGlhIHR5cGUuXG4gKiBUaGUgbWVkaWEgc2VjdGlvbiBjb250YWlucyB0aGUgbWVkaWEgdHlwZSwgcG9ydCwgY29kZWMsIGFuZCBwYXlsb2FkIHR5cGUuXG4gKiBFeGFtcGxlOiBtPXZpZGVvIDkgVURQL1RMUy9SVFAvU0FWUEYgMTAwIDEwMSA5NiA5NyAzNSAzNiAxMDIgMTI1IDEyN1xuICovXG5jb25zdCBnZXRNZWRpYSA9IChsaW5lOiBzdHJpbmcsIG1lZGlhVHlwZTogc3RyaW5nKTogTWVkaWEgfCB1bmRlZmluZWQgPT4ge1xuICBjb25zdCByZWdleCA9IG5ldyBSZWdFeHAoYChtPSR7bWVkaWFUeXBlfSBcXFxcZCsgW1xcXFx3L10rKSAoW1xcXFxkXFxcXHNdKylgKTtcbiAgY29uc3QgbWF0Y2ggPSByZWdleC5leGVjKGxpbmUpO1xuICBpZiAobWF0Y2gpIHtcbiAgICByZXR1cm4ge1xuICAgICAgb3JpZ2luYWw6IG1hdGNoWzBdLFxuICAgICAgbWVkaWFXaXRoUG9ydHM6IG1hdGNoWzFdLFxuICAgICAgY29kZWNPcmRlcjogbWF0Y2hbMl0sXG4gICAgfTtcbiAgfVxufTtcblxuY29uc3QgZ2V0TWVkaWFTZWN0aW9uID0gKHNkcDogc3RyaW5nLCBtZWRpYVR5cGU6ICd2aWRlbycgfCAnYXVkaW8nKSA9PiB7XG4gIGxldCBtZWRpYTogTWVkaWEgfCB1bmRlZmluZWQ7XG4gIGNvbnN0IHJ0cE1hcDogUnRwTWFwW10gPSBbXTtcbiAgY29uc3QgZm10cDogRm10cFtdID0gW107XG4gIGxldCBpc1RoZVJlcXVpcmVkTWVkaWFTZWN0aW9uID0gZmFsc2U7XG4gIHNkcC5zcGxpdCgvKFxcclxcbnxcXHJ8XFxuKS8pLmZvckVhY2goKGxpbmUpID0+IHtcbiAgICBjb25zdCBpc1ZhbGlkTGluZSA9IC9eKFthLXpdKT0oLiopLy50ZXN0KGxpbmUpO1xuICAgIGlmICghaXNWYWxpZExpbmUpIHJldHVybjtcbiAgICAvKlxuICAgICAgTk9URTogYWNjb3JkaW5nIHRvIGh0dHBzOi8vd3d3LnJmYy1lZGl0b3Iub3JnL3JmYy9yZmM4ODY2LnBkZlxuICAgICAgRWFjaCBtZWRpYSBkZXNjcmlwdGlvbiBzdGFydHMgd2l0aCBhbiBcIm09XCIgbGluZSBhbmQgY29udGludWVzIHRvIHRoZSBuZXh0IG1lZGlhIGRlc2NyaXB0aW9uIG9yIHRoZSBlbmQgb2YgdGhlIHdob2xlIHNlc3Npb24gZGVzY3JpcHRpb24sIHdoaWNoZXZlciBjb21lcyBmaXJzdFxuICAgICovXG4gICAgY29uc3QgdHlwZSA9IGxpbmVbMF07XG4gICAgaWYgKHR5cGUgPT09ICdtJykge1xuICAgICAgY29uc3QgX21lZGlhID0gZ2V0TWVkaWEobGluZSwgbWVkaWFUeXBlKTtcbiAgICAgIGlzVGhlUmVxdWlyZWRNZWRpYVNlY3Rpb24gPSAhIV9tZWRpYTtcbiAgICAgIGlmIChfbWVkaWEpIHtcbiAgICAgICAgbWVkaWEgPSBfbWVkaWE7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChpc1RoZVJlcXVpcmVkTWVkaWFTZWN0aW9uICYmIHR5cGUgPT09ICdhJykge1xuICAgICAgY29uc3QgcnRwTWFwTGluZSA9IGdldFJ0cE1hcChsaW5lKTtcbiAgICAgIGNvbnN0IGZtdHBMaW5lID0gZ2V0Rm10cChsaW5lKTtcbiAgICAgIGlmIChydHBNYXBMaW5lKSB7XG4gICAgICAgIHJ0cE1hcC5wdXNoKHJ0cE1hcExpbmUpO1xuICAgICAgfSBlbHNlIGlmIChmbXRwTGluZSkge1xuICAgICAgICBmbXRwLnB1c2goZm10cExpbmUpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG4gIGlmIChtZWRpYSkge1xuICAgIHJldHVybiB7XG4gICAgICBtZWRpYSxcbiAgICAgIHJ0cE1hcCxcbiAgICAgIGZtdHAsXG4gICAgfTtcbiAgfVxufTtcblxuLyoqXG4gKiBSZXR1cm5zIGEgc3RyaW5nIG9mIGNvZGVjIElEcyB3aXRoIHRoZSBwcmVmZXJyZWQgY29kZWMgSUQgaW4gZnJvbnQgb2YgdGhlIG90aGVyIGNvZGVjIElEcy5cbiAqIEl0IGlzIHVzZWQgdG8gZW5zdXJlIHRoYXQgYSBwcmVmZXJyZWQgY29kZWMgaXMgdXNlZCB3aGVuIGRlY29kaW5nIGEgbWVkaWEgc3RyZWFtLlxuICogRXhhbXBsZTogU3VwcG9zZSB3ZSB3YW50IHRvIHByZWZlciBWUDggd2hpY2ggaGFzIGlkIDk2XG4gKiAxLiBJZiBjb2RlYyBvcmRlciBpcyAxMDAgMTAxIDk2IDk3IDM1IDM2IDEwMiAxMjUgMTI3XG4gKiAyLiBUaGUgZnVuY3Rpb24gcmV0dXJucyA5NiAxMDAgMTAxIDk3IDM1IDM2IDEwMiAxMjUgMTI3XG4gKi9cbmNvbnN0IG1vdmVDb2RlY1RvRnJvbnQgPSAoY29kZWNPcmRlcjogc3RyaW5nLCBwcmVmZXJyZWRDb2RlY0lkOiBzdHJpbmcpID0+IHtcbiAgY29uc3QgY29kZWNJZHMgPSBjb2RlY09yZGVyLnNwbGl0KCcgJyk7XG4gIGNvbnN0IGluZGV4ID0gY29kZWNJZHMuaW5kZXhPZihwcmVmZXJyZWRDb2RlY0lkKTtcbiAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICBjb2RlY0lkcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIGNvZGVjSWRzLnVuc2hpZnQocHJlZmVycmVkQ29kZWNJZCk7XG4gIH1cbiAgcmV0dXJuIGNvZGVjSWRzLmpvaW4oJyAnKTtcbn07XG5cbi8qKlxuICogUmV0dXJucyBhIHN0cmluZyBvZiBjb2RlYyBJRHMgd2l0aCB0aGUgZ2l2ZW4gY29kZWMgSUQgcmVtb3ZlZFxuICogSXQgaXMgdXNlZCB0byBlbnN1cmUgdGhhdCBhIGNvZGVjIGlzIGRpc2FibGVkIHdoZW4gcHJvY2Vzc2luZyBhIG1lZGlhIHN0cmVhbS5cbiAqIEV4YW1wbGU6IFN1cHBvc2Ugd2Ugd2FudCB0byBwcmVmZXIgUkVEIHdoaWNoIGhhcyBpZCA2M1xuICogMS4gSWYgY29kZWMgb3JkZXIgaXMgMTExIDYzIDEwMyAxMDQgOSAxMDIgMCA4IDEwNiAxMDUgMTMgMTEwIDExMiAxMTMgMTI2XG4gKiAyLiBUaGUgZnVuY3Rpb24gcmV0dXJucyAxMTEgMTAzIDEwNCA5IDEwMiAwIDggMTA2IDEwNSAxMyAxMTAgMTEyIDExMyAxMjZcbiAqL1xuY29uc3QgcmVtb3ZlQ29kZWNGcm9tT3JkZXIgPSAoY29kZWNPcmRlcjogc3RyaW5nLCBjb2RlY0lkVG9SZW1vdmU6IHN0cmluZykgPT4ge1xuICBjb25zdCBjb2RlY0lkcyA9IGNvZGVjT3JkZXIuc3BsaXQoJyAnKTtcbiAgcmV0dXJuIGNvZGVjSWRzLmZpbHRlcigoY29kZWNJRCkgPT4gY29kZWNJRCAhPT0gY29kZWNJZFRvUmVtb3ZlKS5qb2luKCcgJyk7XG59O1xuXG4vKipcbiAqIFJldHVybnMgYW4gU0RQIHdpdGggdGhlIHByZWZlcnJlZCBjb2RlYyBpbiBmcm9udCBvZiB0aGUgb3RoZXIgY29kZWNzLlxuICogRXhhbXBsZTogU3VwcG9zZSB3ZSB3YW50IHRvIHByZWZlciBWUDhcbiAqIDEuIGZpbmQgdmlkZW8gbWVkaWEgc3BlY2lmaWNhdGlvbiBtPXZpZGVvIDkgVURQL1RMUy9SVFAvU0FWUEYgMTAwIDEwMSA5NiA5NyAzNSAzNiAxMDIgMTI1IDEyN1xuICogMi4gbG9vayBmb3Igc3BlY2lmaWVkIGNvZGVjIChWUDgpICBhPXJ0cG1hcDo5NiBWUDgvOTAwMDBcbiAqIDMuIGV4dHJhY3QgOTYgYXMgYW4gaWRlbnRpZmllciBvZiBWUDhcbiAqIDQuIG1vdmUgOTYgdG8gdGhlIGZyb250XG4gKiA1LiBub3cgbWVkaWEgbG9va3MgbGlrZSB0aGlzOiBtPXZpZGVvIDkgVURQL1RMUy9SVFAvU0FWUEYgOTYgMTAwIDEwMSA5NyAzNSAzNiAxMDIgMTI1IDEyN1xuICovXG5leHBvcnQgY29uc3Qgc2V0UHJlZmVycmVkQ29kZWMgPSAoXG4gIHNkcDogc3RyaW5nLFxuICBtZWRpYVR5cGU6ICd2aWRlbycgfCAnYXVkaW8nLFxuICBwcmVmZXJyZWRDb2RlYzogc3RyaW5nLFxuKSA9PiB7XG4gIGNvbnN0IHNlY3Rpb24gPSBnZXRNZWRpYVNlY3Rpb24oc2RwLCBtZWRpYVR5cGUpO1xuICBpZiAoIXNlY3Rpb24pIHJldHVybiBzZHA7XG4gIGNvbnN0IHJ0cE1hcCA9IHNlY3Rpb24ucnRwTWFwLmZpbmQoXG4gICAgKHIpID0+IHIuY29kZWMudG9Mb3dlckNhc2UoKSA9PT0gcHJlZmVycmVkQ29kZWMudG9Mb3dlckNhc2UoKSxcbiAgKTtcbiAgY29uc3QgY29kZWNJZCA9IHJ0cE1hcD8ucGF5bG9hZDtcbiAgaWYgKCFjb2RlY0lkKSByZXR1cm4gc2RwO1xuICBjb25zdCBuZXdDb2RlY09yZGVyID0gbW92ZUNvZGVjVG9Gcm9udChzZWN0aW9uLm1lZGlhLmNvZGVjT3JkZXIsIGNvZGVjSWQpO1xuICByZXR1cm4gc2RwLnJlcGxhY2UoXG4gICAgc2VjdGlvbi5tZWRpYS5vcmlnaW5hbCxcbiAgICBgJHtzZWN0aW9uLm1lZGlhLm1lZGlhV2l0aFBvcnRzfSAke25ld0NvZGVjT3JkZXJ9YCxcbiAgKTtcbn07XG5cbi8qKlxuICogUmV0dXJucyBhbiBTRFAgd2l0aCB0aGUgc3BlY2lmaWVkIGNvZGVjIHJlbW92ZWQuXG4gKiBFeGFtcGxlOiBTdXBwb3NlIHdlIHdhbnQgdG8gcmVtb3ZlIFJFRFxuICogIDEuIGZpbmQgYXVkaW8gbWVkaWEgc3BlY2lmaWNhdGlvbiBtPXZpZGVvIDkgVURQL1RMUy9SVFAvU0FWUEYgMTAwIDEwMSA5NiA5NyAzNSAzNiAxMDIgMTI1IDEyN1xuICogIDIuIGxvb2sgZm9yIHNwZWNpZmllZCBjb2RlYyAoUkVEKSAgYT1ydHBtYXA6MTI3IHJlZC85MDAwMFxuICogIDMuIGV4dHJhY3QgMTI3IGFzIGFuIGlkZW50aWZpZXIgb2YgUkVEXG4gKiAgNC4gcmVtb3ZlIDEyNyBmcm9tIHRoZSBjb2RlYyBvcmRlclxuICogIDUuIHJlbW92ZSBhPXJ0cG1hcDoxMjcgcmVkLzkwMDAwXG4gKiAgNi4gcmVtb3ZlIGE9Zm10cDoxMjcgLi4uXG4gKi9cbmV4cG9ydCBjb25zdCByZW1vdmVDb2RlYyA9IChcbiAgc2RwOiBzdHJpbmcsXG4gIG1lZGlhVHlwZTogJ3ZpZGVvJyB8ICdhdWRpbycsXG4gIGNvZGVjVG9SZW1vdmU6IHN0cmluZyxcbik6IHN0cmluZyA9PiB7XG4gIGNvbnN0IHNlY3Rpb24gPSBnZXRNZWRpYVNlY3Rpb24oc2RwLCBtZWRpYVR5cGUpO1xuICBjb25zdCBtZWRpYVNlY3Rpb24gPSBzZWN0aW9uPy5tZWRpYTtcbiAgaWYgKCFtZWRpYVNlY3Rpb24pIHtcbiAgICByZXR1cm4gc2RwO1xuICB9XG4gIGNvbnN0IHJ0cE1hcCA9IHNlY3Rpb24/LnJ0cE1hcC5maW5kKFxuICAgIChyKSA9PiByLmNvZGVjLnRvTG93ZXJDYXNlKCkgPT09IGNvZGVjVG9SZW1vdmUudG9Mb3dlckNhc2UoKSxcbiAgKTtcbiAgY29uc3QgY29kZWNJZCA9IHJ0cE1hcD8ucGF5bG9hZDtcbiAgaWYgKCFjb2RlY0lkKSB7XG4gICAgcmV0dXJuIHNkcDtcbiAgfVxuICBjb25zdCBuZXdDb2RlY09yZGVyID0gcmVtb3ZlQ29kZWNGcm9tT3JkZXIobWVkaWFTZWN0aW9uLmNvZGVjT3JkZXIsIGNvZGVjSWQpO1xuICBjb25zdCBmbXRwID0gc2VjdGlvbj8uZm10cC5maW5kKChmKSA9PiBmLnBheWxvYWQgPT09IGNvZGVjSWQpO1xuICByZXR1cm4gc2RwXG4gICAgLnJlcGxhY2UoXG4gICAgICBtZWRpYVNlY3Rpb24ub3JpZ2luYWwsXG4gICAgICBgJHttZWRpYVNlY3Rpb24ubWVkaWFXaXRoUG9ydHN9ICR7bmV3Q29kZWNPcmRlcn1gLFxuICAgIClcbiAgICAucmVwbGFjZShuZXcgUmVnRXhwKGAke3J0cE1hcC5vcmlnaW5hbH1bXFxyXFxuXStgKSwgJycpIC8vIHJlbW92ZSB0aGUgY29ycmVzcG9uZGluZyBydHBtYXAgbGluZVxuICAgIC5yZXBsYWNlKGZtdHA/Lm9yaWdpbmFsID8gbmV3IFJlZ0V4cChgJHtmbXRwPy5vcmlnaW5hbH1bXFxyXFxuXStgKSA6ICcnLCAnJyk7IC8vIHJlbW92ZSB0aGUgY29ycmVzcG9uZGluZyBmbXRwIGxpbmVcbn07XG5cbi8qKlxuICogR2V0cyB0aGUgZm10cCBsaW5lIGNvcnJlc3BvbmRpbmcgdG8gb3B1c1xuICovXG5jb25zdCBnZXRPcHVzRm10cCA9IChzZHA6IHN0cmluZyk6IEZtdHAgfCB1bmRlZmluZWQgPT4ge1xuICBjb25zdCBzZWN0aW9uID0gZ2V0TWVkaWFTZWN0aW9uKHNkcCwgJ2F1ZGlvJyk7XG4gIGNvbnN0IHJ0cE1hcCA9IHNlY3Rpb24/LnJ0cE1hcC5maW5kKChyKSA9PiByLmNvZGVjLnRvTG93ZXJDYXNlKCkgPT09ICdvcHVzJyk7XG4gIGNvbnN0IGNvZGVjSWQgPSBydHBNYXA/LnBheWxvYWQ7XG4gIGlmIChjb2RlY0lkKSB7XG4gICAgcmV0dXJuIHNlY3Rpb24/LmZtdHAuZmluZCgoZikgPT4gZi5wYXlsb2FkID09PSBjb2RlY0lkKTtcbiAgfVxufTtcblxuLyoqXG4gKiBSZXR1cm5zIGFuIFNEUCB3aXRoIERUWCBlbmFibGVkIG9yIGRpc2FibGVkLlxuICovXG5leHBvcnQgY29uc3QgdG9nZ2xlRHR4ID0gKHNkcDogc3RyaW5nLCBlbmFibGU6IGJvb2xlYW4pOiBzdHJpbmcgPT4ge1xuICBjb25zdCBvcHVzRm10cCA9IGdldE9wdXNGbXRwKHNkcCk7XG4gIGlmIChvcHVzRm10cCkge1xuICAgIGNvbnN0IG1hdGNoRHR4ID0gL3VzZWR0eD0oXFxkKS8uZXhlYyhvcHVzRm10cC5jb25maWcpO1xuICAgIGNvbnN0IHJlcXVpcmVkRHR4Q29uZmlnID0gYHVzZWR0eD0ke2VuYWJsZSA/ICcxJyA6ICcwJ31gO1xuICAgIGlmIChtYXRjaER0eCkge1xuICAgICAgY29uc3QgbmV3Rm10cCA9IG9wdXNGbXRwLm9yaWdpbmFsLnJlcGxhY2UoXG4gICAgICAgIC91c2VkdHg9KFxcZCkvLFxuICAgICAgICByZXF1aXJlZER0eENvbmZpZyxcbiAgICAgICk7XG4gICAgICByZXR1cm4gc2RwLnJlcGxhY2Uob3B1c0ZtdHAub3JpZ2luYWwsIG5ld0ZtdHApO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBuZXdGbXRwID0gYCR7b3B1c0ZtdHAub3JpZ2luYWx9OyR7cmVxdWlyZWREdHhDb25maWd9YDtcbiAgICAgIHJldHVybiBzZHAucmVwbGFjZShvcHVzRm10cC5vcmlnaW5hbCwgbmV3Rm10cCk7XG4gICAgfVxuICB9XG4gIHJldHVybiBzZHA7XG59O1xuXG4vKipcbiAqIEVuYWJsZXMgaGlnaC1xdWFsaXR5IGF1ZGlvIHRocm91Z2ggU0RQIG11bmdpbmcgZm9yIHRoZSBnaXZlbiB0cmFja01pZC5cbiAqXG4gKiBAcGFyYW0gc2RwIHRoZSBTRFAgdG8gbXVuZ2UuXG4gKiBAcGFyYW0gdHJhY2tNaWQgdGhlIHRyYWNrTWlkLlxuICogQHBhcmFtIG1heEJpdHJhdGUgdGhlIG1heCBiaXRyYXRlIHRvIHNldC5cbiAqL1xuZXhwb3J0IGNvbnN0IGVuYWJsZUhpZ2hRdWFsaXR5QXVkaW8gPSAoXG4gIHNkcDogc3RyaW5nLFxuICB0cmFja01pZDogc3RyaW5nLFxuICBtYXhCaXRyYXRlOiBudW1iZXIgPSA1MTAwMDAsXG4pOiBzdHJpbmcgPT4ge1xuICBtYXhCaXRyYXRlID0gTWF0aC5tYXgoTWF0aC5taW4obWF4Qml0cmF0ZSwgNTEwMDAwKSwgOTYwMDApO1xuXG4gIGNvbnN0IHBhcnNlZFNkcCA9IFNEUC5wYXJzZShzZHApO1xuICBjb25zdCBhdWRpb01lZGlhID0gcGFyc2VkU2RwLm1lZGlhLmZpbmQoXG4gICAgKG0pID0+IG0udHlwZSA9PT0gJ2F1ZGlvJyAmJiBTdHJpbmcobS5taWQpID09PSB0cmFja01pZCxcbiAgKTtcblxuICBpZiAoIWF1ZGlvTWVkaWEpIHJldHVybiBzZHA7XG5cbiAgY29uc3Qgb3B1c1J0cCA9IGF1ZGlvTWVkaWEucnRwLmZpbmQoKHIpID0+IHIuY29kZWMgPT09ICdvcHVzJyk7XG4gIGlmICghb3B1c1J0cCkgcmV0dXJuIHNkcDtcblxuICBjb25zdCBvcHVzRm10cCA9IGF1ZGlvTWVkaWEuZm10cC5maW5kKChmKSA9PiBmLnBheWxvYWQgPT09IG9wdXNSdHAucGF5bG9hZCk7XG4gIGlmICghb3B1c0ZtdHApIHJldHVybiBzZHA7XG5cbiAgLy8gZW5hYmxlIHN0ZXJlbywgaWYgbm90IGFscmVhZHkgZW5hYmxlZFxuICBpZiAob3B1c0ZtdHAuY29uZmlnLm1hdGNoKC9zdGVyZW89KFxcZCkvKSkge1xuICAgIG9wdXNGbXRwLmNvbmZpZyA9IG9wdXNGbXRwLmNvbmZpZy5yZXBsYWNlKC9zdGVyZW89KFxcZCkvLCAnc3RlcmVvPTEnKTtcbiAgfSBlbHNlIHtcbiAgICBvcHVzRm10cC5jb25maWcgPSBgJHtvcHVzRm10cC5jb25maWd9O3N0ZXJlbz0xYDtcbiAgfVxuXG4gIC8vIHNldCBtYXhhdmVyYWdlYml0cmF0ZSwgdG8gdGhlIGdpdmVuIHZhbHVlXG4gIGlmIChvcHVzRm10cC5jb25maWcubWF0Y2goL21heGF2ZXJhZ2ViaXRyYXRlPShcXGQqKS8pKSB7XG4gICAgb3B1c0ZtdHAuY29uZmlnID0gb3B1c0ZtdHAuY29uZmlnLnJlcGxhY2UoXG4gICAgICAvbWF4YXZlcmFnZWJpdHJhdGU9KFxcZCopLyxcbiAgICAgIGBtYXhhdmVyYWdlYml0cmF0ZT0ke21heEJpdHJhdGV9YCxcbiAgICApO1xuICB9IGVsc2Uge1xuICAgIG9wdXNGbXRwLmNvbmZpZyA9IGAke29wdXNGbXRwLmNvbmZpZ307bWF4YXZlcmFnZWJpdHJhdGU9JHttYXhCaXRyYXRlfWA7XG4gIH1cblxuICByZXR1cm4gU0RQLndyaXRlKHBhcnNlZFNkcCk7XG59O1xuIiwiaW1wb3J0ICogYXMgU0RQIGZyb20gJ3NkcC10cmFuc2Zvcm0nO1xuaW1wb3J0IHsgU3RyZWFtU2Z1Q2xpZW50IH0gZnJvbSAnLi4vU3RyZWFtU2Z1Q2xpZW50JztcbmltcG9ydCB7XG4gIFBlZXJUeXBlLFxuICBUcmFja0luZm8sXG4gIFRyYWNrVHlwZSxcbiAgVmlkZW9MYXllcixcbiAgVmlkZW9RdWFsaXR5LFxufSBmcm9tICcuLi9nZW4vdmlkZW8vc2Z1L21vZGVscy9tb2RlbHMnO1xuaW1wb3J0IHsgZ2V0SWNlQ2FuZGlkYXRlIH0gZnJvbSAnLi9oZWxwZXJzL2ljZUNhbmRpZGF0ZSc7XG5pbXBvcnQge1xuICBmaW5kT3B0aW1hbFNjcmVlblNoYXJpbmdMYXllcnMsXG4gIGZpbmRPcHRpbWFsVmlkZW9MYXllcnMsXG4gIE9wdGltYWxWaWRlb0xheWVyLFxufSBmcm9tICcuL3ZpZGVvTGF5ZXJzJztcbmltcG9ydCB7IGdldFByZWZlcnJlZENvZGVjcyB9IGZyb20gJy4vY29kZWNzJztcbmltcG9ydCB7IHRyYWNrVHlwZVRvUGFydGljaXBhbnRTdHJlYW1LZXkgfSBmcm9tICcuL2hlbHBlcnMvdHJhY2tzJztcbmltcG9ydCB7IENhbGxpbmdTdGF0ZSwgQ2FsbFN0YXRlIH0gZnJvbSAnLi4vc3RvcmUnO1xuaW1wb3J0IHsgUHVibGlzaE9wdGlvbnMgfSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQgeyBpc1JlYWN0TmF0aXZlIH0gZnJvbSAnLi4vaGVscGVycy9wbGF0Zm9ybXMnO1xuaW1wb3J0IHsgZW5hYmxlSGlnaFF1YWxpdHlBdWRpbywgdG9nZ2xlRHR4IH0gZnJvbSAnLi4vaGVscGVycy9zZHAtbXVuZ2luZyc7XG5pbXBvcnQgeyBMb2dnZXIgfSBmcm9tICcuLi9jb29yZGluYXRvci9jb25uZWN0aW9uL3R5cGVzJztcbmltcG9ydCB7IGdldExvZ2dlciB9IGZyb20gJy4uL2xvZ2dlcic7XG5pbXBvcnQgeyBEaXNwYXRjaGVyIH0gZnJvbSAnLi9EaXNwYXRjaGVyJztcbmltcG9ydCB7IGdldE9TSW5mbyB9IGZyb20gJy4uL2NsaWVudC1kZXRhaWxzJztcbmltcG9ydCB7IFZpZGVvTGF5ZXJTZXR0aW5nIH0gZnJvbSAnLi4vZ2VuL3ZpZGVvL3NmdS9ldmVudC9ldmVudHMnO1xuXG5jb25zdCBsb2dnZXI6IExvZ2dlciA9IGdldExvZ2dlcihbJ1B1Ymxpc2hlciddKTtcblxuZXhwb3J0IHR5cGUgUHVibGlzaGVyQ29uc3RydWN0b3JPcHRzID0ge1xuICBzZnVDbGllbnQ6IFN0cmVhbVNmdUNsaWVudDtcbiAgc3RhdGU6IENhbGxTdGF0ZTtcbiAgZGlzcGF0Y2hlcjogRGlzcGF0Y2hlcjtcbiAgY29ubmVjdGlvbkNvbmZpZz86IFJUQ0NvbmZpZ3VyYXRpb247XG4gIGlzRHR4RW5hYmxlZDogYm9vbGVhbjtcbiAgaXNSZWRFbmFibGVkOiBib29sZWFuO1xuICBpY2VSZXN0YXJ0RGVsYXk/OiBudW1iZXI7XG59O1xuXG4vKipcbiAqIFRoZSBgUHVibGlzaGVyYCBpcyByZXNwb25zaWJsZSBmb3IgcHVibGlzaGluZy91bnB1Ymxpc2hpbmcgbWVkaWEgc3RyZWFtcyB0by9mcm9tIHRoZSBTRlVcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgY2xhc3MgUHVibGlzaGVyIHtcbiAgcHJpdmF0ZSBwYzogUlRDUGVlckNvbm5lY3Rpb247XG4gIHByaXZhdGUgcmVhZG9ubHkgc3RhdGU6IENhbGxTdGF0ZTtcblxuICBwcml2YXRlIHJlYWRvbmx5IHRyYW5zY2VpdmVyUmVnaXN0cnk6IHtcbiAgICBba2V5IGluIFRyYWNrVHlwZV06IFJUQ1J0cFRyYW5zY2VpdmVyIHwgdW5kZWZpbmVkO1xuICB9ID0ge1xuICAgIFtUcmFja1R5cGUuQVVESU9dOiB1bmRlZmluZWQsXG4gICAgW1RyYWNrVHlwZS5WSURFT106IHVuZGVmaW5lZCxcbiAgICBbVHJhY2tUeXBlLlNDUkVFTl9TSEFSRV06IHVuZGVmaW5lZCxcbiAgICBbVHJhY2tUeXBlLlNDUkVFTl9TSEFSRV9BVURJT106IHVuZGVmaW5lZCxcbiAgICBbVHJhY2tUeXBlLlVOU1BFQ0lGSUVEXTogdW5kZWZpbmVkLFxuICB9O1xuXG4gIHByaXZhdGUgcmVhZG9ubHkgcHVibGlzaE9wdGlvbnNQZXJUcmFja1R5cGUgPSBuZXcgTWFwPFxuICAgIFRyYWNrVHlwZSxcbiAgICBQdWJsaXNoT3B0aW9uc1xuICA+KCk7XG5cbiAgLyoqXG4gICAqIEFuIGFycmF5IG1haW50YWluaW5nIHRoZSBvcmRlciBob3cgdHJhbnNjZWl2ZXJzIHdlcmUgYWRkZWQgdG8gdGhlIHBlZXIgY29ubmVjdGlvbi5cbiAgICogVGhpcyBpcyBuZWVkZWQgYmVjYXVzZSBzb21lIGJyb3dzZXJzIChGaXJlZm94KSBkb24ndCByZWxpYWJseSByZXBvcnRcbiAgICogdHJhY2tJZCBhbmQgYG1pZGAgcGFyYW1ldGVycy5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHByaXZhdGUgdHJhbnNjZWl2ZXJJbml0T3JkZXI6IFRyYWNrVHlwZVtdID0gW107XG5cbiAgcHJpdmF0ZSByZWFkb25seSB0cmFja0tpbmRNYXBwaW5nOiB7XG4gICAgW2tleSBpbiBUcmFja1R5cGVdOiAndmlkZW8nIHwgJ2F1ZGlvJyB8IHVuZGVmaW5lZDtcbiAgfSA9IHtcbiAgICBbVHJhY2tUeXBlLkFVRElPXTogJ2F1ZGlvJyxcbiAgICBbVHJhY2tUeXBlLlZJREVPXTogJ3ZpZGVvJyxcbiAgICBbVHJhY2tUeXBlLlNDUkVFTl9TSEFSRV06ICd2aWRlbycsXG4gICAgW1RyYWNrVHlwZS5TQ1JFRU5fU0hBUkVfQVVESU9dOiAnYXVkaW8nLFxuICAgIFtUcmFja1R5cGUuVU5TUEVDSUZJRURdOiB1bmRlZmluZWQsXG4gIH07XG5cbiAgcHJpdmF0ZSByZWFkb25seSB0cmFja0xheWVyc0NhY2hlOiB7XG4gICAgW2tleSBpbiBUcmFja1R5cGVdOiBPcHRpbWFsVmlkZW9MYXllcltdIHwgdW5kZWZpbmVkO1xuICB9ID0ge1xuICAgIFtUcmFja1R5cGUuQVVESU9dOiB1bmRlZmluZWQsXG4gICAgW1RyYWNrVHlwZS5WSURFT106IHVuZGVmaW5lZCxcbiAgICBbVHJhY2tUeXBlLlNDUkVFTl9TSEFSRV06IHVuZGVmaW5lZCxcbiAgICBbVHJhY2tUeXBlLlNDUkVFTl9TSEFSRV9BVURJT106IHVuZGVmaW5lZCxcbiAgICBbVHJhY2tUeXBlLlVOU1BFQ0lGSUVEXTogdW5kZWZpbmVkLFxuICB9O1xuXG4gIHByaXZhdGUgcmVhZG9ubHkgaXNEdHhFbmFibGVkOiBib29sZWFuO1xuICBwcml2YXRlIHJlYWRvbmx5IGlzUmVkRW5hYmxlZDogYm9vbGVhbjtcblxuICBwcml2YXRlIHJlYWRvbmx5IHVuc3Vic2NyaWJlT25JY2VSZXN0YXJ0OiAoKSA9PiB2b2lkO1xuXG4gIHByaXZhdGUgcmVhZG9ubHkgaWNlUmVzdGFydERlbGF5OiBudW1iZXI7XG4gIHByaXZhdGUgaXNJY2VSZXN0YXJ0aW5nID0gZmFsc2U7XG4gIHByaXZhdGUgaWNlUmVzdGFydFRpbWVvdXQ/OiBOb2RlSlMuVGltZW91dDtcblxuICAvLyB3b3JrYXJvdW5kIGZvciB0aGUgbGFjayBvZiBSVENQZWVyQ29ubmVjdGlvbi5nZXRDb25maWd1cmF0aW9uKCkgbWV0aG9kIGluIHJlYWN0LW5hdGl2ZS13ZWJydGNcbiAgcHJpdmF0ZSBfY29ubmVjdGlvbkNvbmZpZ3VyYXRpb246IFJUQ0NvbmZpZ3VyYXRpb24gfCB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGN1cnJlbnQgY29ubmVjdGlvbiBjb25maWd1cmF0aW9uLlxuICAgKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGdldCBjb25uZWN0aW9uQ29uZmlndXJhdGlvbigpIHtcbiAgICBpZiAodGhpcy5wYy5nZXRDb25maWd1cmF0aW9uKSByZXR1cm4gdGhpcy5wYy5nZXRDb25maWd1cmF0aW9uKCk7XG4gICAgcmV0dXJuIHRoaXMuX2Nvbm5lY3Rpb25Db25maWd1cmF0aW9uO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBTRlUgY2xpZW50IGluc3RhbmNlIHRvIHVzZSBmb3IgcHVibGlzaGluZyBhbmQgc2lnbmFsaW5nLlxuICAgKi9cbiAgc2Z1Q2xpZW50OiBTdHJlYW1TZnVDbGllbnQ7XG5cbiAgLyoqXG4gICAqIENvbnN0cnVjdHMgYSBuZXcgYFB1Ymxpc2hlcmAgaW5zdGFuY2UuXG4gICAqXG4gICAqIEBwYXJhbSBjb25uZWN0aW9uQ29uZmlnIHRoZSBjb25uZWN0aW9uIGNvbmZpZ3VyYXRpb24gdG8gdXNlLlxuICAgKiBAcGFyYW0gc2Z1Q2xpZW50IHRoZSBTRlUgY2xpZW50IHRvIHVzZS5cbiAgICogQHBhcmFtIHN0YXRlIHRoZSBjYWxsIHN0YXRlIHRvIHVzZS5cbiAgICogQHBhcmFtIGRpc3BhdGNoZXIgdGhlIGRpc3BhdGNoZXIgdG8gdXNlLlxuICAgKiBAcGFyYW0gaXNEdHhFbmFibGVkIHdoZXRoZXIgRFRYIGlzIGVuYWJsZWQuXG4gICAqIEBwYXJhbSBpc1JlZEVuYWJsZWQgd2hldGhlciBSRUQgaXMgZW5hYmxlZC5cbiAgICogQHBhcmFtIGljZVJlc3RhcnREZWxheSB0aGUgZGVsYXkgaW4gbWlsbGlzZWNvbmRzIHRvIHdhaXQgYmVmb3JlIHJlc3RhcnRpbmcgSUNFIG9uY2UgY29ubmVjdGlvbiBnb2VzIHRvIGBkaXNjb25uZWN0ZWRgIHN0YXRlLlxuICAgKi9cbiAgY29uc3RydWN0b3Ioe1xuICAgIGNvbm5lY3Rpb25Db25maWcsXG4gICAgc2Z1Q2xpZW50LFxuICAgIGRpc3BhdGNoZXIsXG4gICAgc3RhdGUsXG4gICAgaXNEdHhFbmFibGVkLFxuICAgIGlzUmVkRW5hYmxlZCxcbiAgICBpY2VSZXN0YXJ0RGVsYXkgPSAyNTAwLFxuICB9OiBQdWJsaXNoZXJDb25zdHJ1Y3Rvck9wdHMpIHtcbiAgICB0aGlzLnBjID0gdGhpcy5jcmVhdGVQZWVyQ29ubmVjdGlvbihjb25uZWN0aW9uQ29uZmlnKTtcbiAgICB0aGlzLnNmdUNsaWVudCA9IHNmdUNsaWVudDtcbiAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gICAgdGhpcy5pc0R0eEVuYWJsZWQgPSBpc0R0eEVuYWJsZWQ7XG4gICAgdGhpcy5pc1JlZEVuYWJsZWQgPSBpc1JlZEVuYWJsZWQ7XG4gICAgdGhpcy5pY2VSZXN0YXJ0RGVsYXkgPSBpY2VSZXN0YXJ0RGVsYXk7XG5cbiAgICB0aGlzLnVuc3Vic2NyaWJlT25JY2VSZXN0YXJ0ID0gZGlzcGF0Y2hlci5vbihcbiAgICAgICdpY2VSZXN0YXJ0JyxcbiAgICAgIGFzeW5jIChpY2VSZXN0YXJ0KSA9PiB7XG4gICAgICAgIGlmIChpY2VSZXN0YXJ0LnBlZXJUeXBlICE9PSBQZWVyVHlwZS5QVUJMSVNIRVJfVU5TUEVDSUZJRUQpIHJldHVybjtcbiAgICAgICAgYXdhaXQgdGhpcy5yZXN0YXJ0SWNlKCk7XG4gICAgICB9LFxuICAgICk7XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZVBlZXJDb25uZWN0aW9uID0gKGNvbm5lY3Rpb25Db25maWc/OiBSVENDb25maWd1cmF0aW9uKSA9PiB7XG4gICAgY29uc3QgcGMgPSBuZXcgUlRDUGVlckNvbm5lY3Rpb24oY29ubmVjdGlvbkNvbmZpZyk7XG4gICAgdGhpcy5fY29ubmVjdGlvbkNvbmZpZ3VyYXRpb24gPSBjb25uZWN0aW9uQ29uZmlnO1xuICAgIHBjLmFkZEV2ZW50TGlzdGVuZXIoJ2ljZWNhbmRpZGF0ZScsIHRoaXMub25JY2VDYW5kaWRhdGUpO1xuICAgIHBjLmFkZEV2ZW50TGlzdGVuZXIoJ25lZ290aWF0aW9ubmVlZGVkJywgdGhpcy5vbk5lZ290aWF0aW9uTmVlZGVkKTtcblxuICAgIHBjLmFkZEV2ZW50TGlzdGVuZXIoJ2ljZWNhbmRpZGF0ZWVycm9yJywgdGhpcy5vbkljZUNhbmRpZGF0ZUVycm9yKTtcbiAgICBwYy5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgJ2ljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZScsXG4gICAgICB0aGlzLm9uSWNlQ29ubmVjdGlvblN0YXRlQ2hhbmdlLFxuICAgICk7XG4gICAgcGMuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICdpY2VnYXRoZXJpbmdzdGF0ZWNoYW5nZScsXG4gICAgICB0aGlzLm9uSWNlR2F0aGVyaW5nU3RhdGVDaGFuZ2UsXG4gICAgKTtcbiAgICBwYy5hZGRFdmVudExpc3RlbmVyKCdzaWduYWxpbmdzdGF0ZWNoYW5nZScsIHRoaXMub25TaWduYWxpbmdTdGF0ZUNoYW5nZSk7XG4gICAgcmV0dXJuIHBjO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDbG9zZXMgdGhlIHB1Ymxpc2hlciBQZWVyQ29ubmVjdGlvbiBhbmQgY2xlYW5zIHVwIHRoZSByZXNvdXJjZXMuXG4gICAqL1xuICBjbG9zZSA9ICh7IHN0b3BUcmFja3MgPSB0cnVlIH0gPSB7fSkgPT4ge1xuICAgIGlmIChzdG9wVHJhY2tzKSB7XG4gICAgICB0aGlzLnN0b3BQdWJsaXNoaW5nKCk7XG4gICAgICBPYmplY3Qua2V5cyh0aGlzLnRyYW5zY2VpdmVyUmVnaXN0cnkpLmZvckVhY2goKHRyYWNrVHlwZSkgPT4ge1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIHRoaXMudHJhbnNjZWl2ZXJSZWdpc3RyeVt0cmFja1R5cGVdID0gdW5kZWZpbmVkO1xuICAgICAgfSk7XG4gICAgICBPYmplY3Qua2V5cyh0aGlzLnRyYWNrTGF5ZXJzQ2FjaGUpLmZvckVhY2goKHRyYWNrVHlwZSkgPT4ge1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIHRoaXMudHJhY2tMYXllcnNDYWNoZVt0cmFja1R5cGVdID0gdW5kZWZpbmVkO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY2xlYXJUaW1lb3V0KHRoaXMuaWNlUmVzdGFydFRpbWVvdXQpO1xuICAgIHRoaXMudW5zdWJzY3JpYmVPbkljZVJlc3RhcnQoKTtcbiAgICB0aGlzLnBjLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ25lZ290aWF0aW9ubmVlZGVkJywgdGhpcy5vbk5lZ290aWF0aW9uTmVlZGVkKTtcbiAgICB0aGlzLnBjLmNsb3NlKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFN0YXJ0cyBwdWJsaXNoaW5nIHRoZSBnaXZlbiB0cmFjayBvZiB0aGUgZ2l2ZW4gbWVkaWEgc3RyZWFtLlxuICAgKlxuICAgKiBDb25zZWN1dGl2ZSBjYWxscyB0byB0aGlzIG1ldGhvZCB3aWxsIHJlcGxhY2UgdGhlIHN0cmVhbS5cbiAgICogVGhlIHByZXZpb3VzIHN0cmVhbSB3aWxsIGJlIHN0b3BwZWQuXG4gICAqXG4gICAqIEBwYXJhbSBtZWRpYVN0cmVhbSB0aGUgbWVkaWEgc3RyZWFtIHRvIHB1Ymxpc2guXG4gICAqIEBwYXJhbSB0cmFjayB0aGUgdHJhY2sgdG8gcHVibGlzaC5cbiAgICogQHBhcmFtIHRyYWNrVHlwZSB0aGUgdHJhY2sgdHlwZSB0byBwdWJsaXNoLlxuICAgKiBAcGFyYW0gb3B0cyB0aGUgb3B0aW9uYWwgcHVibGlzaCBvcHRpb25zIHRvIHVzZS5cbiAgICovXG4gIHB1Ymxpc2hTdHJlYW0gPSBhc3luYyAoXG4gICAgbWVkaWFTdHJlYW06IE1lZGlhU3RyZWFtLFxuICAgIHRyYWNrOiBNZWRpYVN0cmVhbVRyYWNrLFxuICAgIHRyYWNrVHlwZTogVHJhY2tUeXBlLFxuICAgIG9wdHM6IFB1Ymxpc2hPcHRpb25zID0ge30sXG4gICkgPT4ge1xuICAgIGlmICh0cmFjay5yZWFkeVN0YXRlID09PSAnZW5kZWQnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbid0IHB1Ymxpc2ggYSB0cmFjayB0aGF0IGhhcyBlbmRlZCBhbHJlYWR5LmApO1xuICAgIH1cblxuICAgIGxldCB0cmFuc2NlaXZlciA9IHRoaXMucGNcbiAgICAgIC5nZXRUcmFuc2NlaXZlcnMoKVxuICAgICAgLmZpbmQoXG4gICAgICAgICh0KSA9PlxuICAgICAgICAgIHQgPT09IHRoaXMudHJhbnNjZWl2ZXJSZWdpc3RyeVt0cmFja1R5cGVdICYmXG4gICAgICAgICAgdC5zZW5kZXIudHJhY2sgJiZcbiAgICAgICAgICB0LnNlbmRlci50cmFjaz8ua2luZCA9PT0gdGhpcy50cmFja0tpbmRNYXBwaW5nW3RyYWNrVHlwZV0sXG4gICAgICApO1xuXG4gICAgLyoqXG4gICAgICogQW4gZXZlbnQgaGFuZGxlciB3aGljaCBsaXN0ZW5zIGZvciB0aGUgJ2VuZGVkJyBldmVudCBvbiB0aGUgdHJhY2suXG4gICAgICogT25jZSB0aGUgdHJhY2sgaGFzIGVuZGVkLCBpdCB3aWxsIG5vdGlmeSB0aGUgU0ZVIGFuZCB1cGRhdGUgdGhlIHN0YXRlLlxuICAgICAqL1xuICAgIGNvbnN0IGhhbmRsZVRyYWNrRW5kZWQgPSBhc3luYyAoKSA9PiB7XG4gICAgICBsb2dnZXIoXG4gICAgICAgICdpbmZvJyxcbiAgICAgICAgYFRyYWNrICR7VHJhY2tUeXBlW3RyYWNrVHlwZV19IGhhcyBlbmRlZCwgbm90aWZ5aW5nIHRoZSBTRlVgLFxuICAgICAgKTtcbiAgICAgIGF3YWl0IHRoaXMubm90aWZ5VHJhY2tNdXRlU3RhdGVDaGFuZ2VkKG1lZGlhU3RyZWFtLCB0cmFja1R5cGUsIHRydWUpO1xuICAgICAgLy8gY2xlYW4tdXAsIHRoaXMgZXZlbnQgbGlzdGVuZXIgbmVlZHMgdG8gcnVuIG9ubHkgb25jZS5cbiAgICAgIHRyYWNrLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2VuZGVkJywgaGFuZGxlVHJhY2tFbmRlZCk7XG4gICAgfTtcblxuICAgIGlmICghdHJhbnNjZWl2ZXIpIHtcbiAgICAgIGNvbnN0IHsgc2V0dGluZ3MgfSA9IHRoaXMuc3RhdGU7XG4gICAgICBjb25zdCB0YXJnZXRSZXNvbHV0aW9uID0gc2V0dGluZ3M/LnZpZGVvLnRhcmdldF9yZXNvbHV0aW9uO1xuICAgICAgY29uc3QgdmlkZW9FbmNvZGluZ3MgPVxuICAgICAgICB0cmFja1R5cGUgPT09IFRyYWNrVHlwZS5WSURFT1xuICAgICAgICAgID8gZmluZE9wdGltYWxWaWRlb0xheWVycyh0cmFjaywgdGFyZ2V0UmVzb2x1dGlvbilcbiAgICAgICAgICA6IHRyYWNrVHlwZSA9PT0gVHJhY2tUeXBlLlNDUkVFTl9TSEFSRVxuICAgICAgICAgID8gZmluZE9wdGltYWxTY3JlZW5TaGFyaW5nTGF5ZXJzKHRyYWNrLCBvcHRzLnNjcmVlblNoYXJlU2V0dGluZ3MpXG4gICAgICAgICAgOiB1bmRlZmluZWQ7XG5cbiAgICAgIGxldCBwcmVmZXJyZWRDb2RlYyA9IG9wdHMucHJlZmVycmVkQ29kZWM7XG4gICAgICBpZiAoIXByZWZlcnJlZENvZGVjICYmIHRyYWNrVHlwZSA9PT0gVHJhY2tUeXBlLlZJREVPKSB7XG4gICAgICAgIGlmIChpc1JlYWN0TmF0aXZlKCkpIHtcbiAgICAgICAgICBjb25zdCBvc05hbWUgPSBnZXRPU0luZm8oKT8ubmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgIGlmIChvc05hbWUgPT09ICdpcGFkb3MnKSB7XG4gICAgICAgICAgICAvLyBpbiBpcGFkcyBpdCB3YXMgbm90aWNlZCB0aGF0IGlmIHZwOCBjb2RlYyBpcyB1c2VkXG4gICAgICAgICAgICAvLyB0aGVuIHRoZSBieXRlcyBzZW50IGlzIDAgaW4gdGhlIG91dGJvdW5kLXJ0cFxuICAgICAgICAgICAgLy8gc28gd2UgYXJlIGZvcmNpbmcgaDI2NCBjb2RlYyBmb3IgaXBhZHNcbiAgICAgICAgICAgIHByZWZlcnJlZENvZGVjID0gJ0gyNjQnO1xuICAgICAgICAgIH0gZWxzZSBpZiAob3NOYW1lID09PSAnYW5kcm9pZCcpIHtcbiAgICAgICAgICAgIHByZWZlcnJlZENvZGVjID0gJ1ZQOCc7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb25zdCBjb2RlY1ByZWZlcmVuY2VzID0gdGhpcy5nZXRDb2RlY1ByZWZlcmVuY2VzKFxuICAgICAgICB0cmFja1R5cGUsXG4gICAgICAgIHByZWZlcnJlZENvZGVjLFxuICAgICAgKTtcblxuICAgICAgLy8gbGlzdGVuIGZvciAnZW5kZWQnIGV2ZW50IG9uIHRoZSB0cmFjayBhcyBpdCBtaWdodCBiZSBlbmRlZCBhYnJ1cHRseVxuICAgICAgLy8gYnkgYW4gZXh0ZXJuYWwgZmFjdG9yIGFzIHBlcm1pc3Npb24gcmV2b2tlcywgZGV2aWNlIGRpc2Nvbm5lY3RlZCwgZXRjLlxuICAgICAgLy8ga2VlcCBpbiBtaW5kIHRoYXQgYHRyYWNrLnN0b3AoKWAgZG9lc24ndCB0cmlnZ2VyIHRoaXMgZXZlbnQuXG4gICAgICB0cmFjay5hZGRFdmVudExpc3RlbmVyKCdlbmRlZCcsIGhhbmRsZVRyYWNrRW5kZWQpO1xuICAgICAgaWYgKCF0cmFjay5lbmFibGVkKSB7XG4gICAgICAgIHRyYWNrLmVuYWJsZWQgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICB0cmFuc2NlaXZlciA9IHRoaXMucGMuYWRkVHJhbnNjZWl2ZXIodHJhY2ssIHtcbiAgICAgICAgZGlyZWN0aW9uOiAnc2VuZG9ubHknLFxuICAgICAgICBzdHJlYW1zOlxuICAgICAgICAgIHRyYWNrVHlwZSA9PT0gVHJhY2tUeXBlLlZJREVPIHx8IHRyYWNrVHlwZSA9PT0gVHJhY2tUeXBlLlNDUkVFTl9TSEFSRVxuICAgICAgICAgICAgPyBbbWVkaWFTdHJlYW1dXG4gICAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgICAgc2VuZEVuY29kaW5nczogdmlkZW9FbmNvZGluZ3MsXG4gICAgICB9KTtcblxuICAgICAgbG9nZ2VyKCdkZWJ1ZycsIGBBZGRlZCAke1RyYWNrVHlwZVt0cmFja1R5cGVdfSB0cmFuc2NlaXZlcmApO1xuICAgICAgdGhpcy50cmFuc2NlaXZlckluaXRPcmRlci5wdXNoKHRyYWNrVHlwZSk7XG4gICAgICB0aGlzLnRyYW5zY2VpdmVyUmVnaXN0cnlbdHJhY2tUeXBlXSA9IHRyYW5zY2VpdmVyO1xuICAgICAgdGhpcy5wdWJsaXNoT3B0aW9uc1BlclRyYWNrVHlwZS5zZXQodHJhY2tUeXBlLCBvcHRzKTtcblxuICAgICAgaWYgKCdzZXRDb2RlY1ByZWZlcmVuY2VzJyBpbiB0cmFuc2NlaXZlciAmJiBjb2RlY1ByZWZlcmVuY2VzKSB7XG4gICAgICAgIGxvZ2dlcihcbiAgICAgICAgICAnaW5mbycsXG4gICAgICAgICAgYFNldHRpbmcgJHtUcmFja1R5cGVbdHJhY2tUeXBlXX0gY29kZWMgcHJlZmVyZW5jZXNgLFxuICAgICAgICAgIGNvZGVjUHJlZmVyZW5jZXMsXG4gICAgICAgICk7XG4gICAgICAgIHRyYW5zY2VpdmVyLnNldENvZGVjUHJlZmVyZW5jZXMoY29kZWNQcmVmZXJlbmNlcyk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHByZXZpb3VzVHJhY2sgPSB0cmFuc2NlaXZlci5zZW5kZXIudHJhY2s7XG4gICAgICAvLyBkb24ndCBzdG9wIHRoZSB0cmFjayBpZiB3ZSBhcmUgcmUtcHVibGlzaGluZyB0aGUgc2FtZSB0cmFja1xuICAgICAgaWYgKHByZXZpb3VzVHJhY2sgJiYgcHJldmlvdXNUcmFjayAhPT0gdHJhY2spIHtcbiAgICAgICAgcHJldmlvdXNUcmFjay5zdG9wKCk7XG4gICAgICAgIHByZXZpb3VzVHJhY2sucmVtb3ZlRXZlbnRMaXN0ZW5lcignZW5kZWQnLCBoYW5kbGVUcmFja0VuZGVkKTtcbiAgICAgICAgdHJhY2suYWRkRXZlbnRMaXN0ZW5lcignZW5kZWQnLCBoYW5kbGVUcmFja0VuZGVkKTtcbiAgICAgIH1cbiAgICAgIGlmICghdHJhY2suZW5hYmxlZCkge1xuICAgICAgICB0cmFjay5lbmFibGVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGF3YWl0IHRyYW5zY2VpdmVyLnNlbmRlci5yZXBsYWNlVHJhY2sodHJhY2spO1xuICAgIH1cblxuICAgIGF3YWl0IHRoaXMubm90aWZ5VHJhY2tNdXRlU3RhdGVDaGFuZ2VkKG1lZGlhU3RyZWFtLCB0cmFja1R5cGUsIGZhbHNlKTtcbiAgfTtcblxuICAvKipcbiAgICogU3RvcHMgcHVibGlzaGluZyB0aGUgZ2l2ZW4gdHJhY2sgdHlwZSB0byB0aGUgU0ZVLCBpZiBpdCBpcyBjdXJyZW50bHkgYmVpbmcgcHVibGlzaGVkLlxuICAgKiBVbmRlcmx5aW5nIHRyYWNrIHdpbGwgYmUgc3RvcHBlZCBhbmQgcmVtb3ZlZCBmcm9tIHRoZSBwdWJsaXNoZXIuXG4gICAqIEBwYXJhbSB0cmFja1R5cGUgdGhlIHRyYWNrIHR5cGUgdG8gdW5wdWJsaXNoLlxuICAgKiBAcGFyYW0gc3RvcFRyYWNrIHNwZWNpZmllcyB3aGV0aGVyIHRyYWNrIHNob3VsZCBiZSBzdG9wcGVkIG9yIGp1c3QgZGlzYWJsZWRcbiAgICovXG4gIHVucHVibGlzaFN0cmVhbSA9IGFzeW5jICh0cmFja1R5cGU6IFRyYWNrVHlwZSwgc3RvcFRyYWNrOiBib29sZWFuKSA9PiB7XG4gICAgY29uc3QgdHJhbnNjZWl2ZXIgPSB0aGlzLnBjXG4gICAgICAuZ2V0VHJhbnNjZWl2ZXJzKClcbiAgICAgIC5maW5kKCh0KSA9PiB0ID09PSB0aGlzLnRyYW5zY2VpdmVyUmVnaXN0cnlbdHJhY2tUeXBlXSAmJiB0LnNlbmRlci50cmFjayk7XG4gICAgaWYgKFxuICAgICAgdHJhbnNjZWl2ZXIgJiZcbiAgICAgIHRyYW5zY2VpdmVyLnNlbmRlci50cmFjayAmJlxuICAgICAgKHN0b3BUcmFja1xuICAgICAgICA/IHRyYW5zY2VpdmVyLnNlbmRlci50cmFjay5yZWFkeVN0YXRlID09PSAnbGl2ZSdcbiAgICAgICAgOiB0cmFuc2NlaXZlci5zZW5kZXIudHJhY2suZW5hYmxlZClcbiAgICApIHtcbiAgICAgIHN0b3BUcmFja1xuICAgICAgICA/IHRyYW5zY2VpdmVyLnNlbmRlci50cmFjay5zdG9wKClcbiAgICAgICAgOiAodHJhbnNjZWl2ZXIuc2VuZGVyLnRyYWNrLmVuYWJsZWQgPSBmYWxzZSk7XG4gICAgICAvLyBXZSBkb24ndCBuZWVkIHRvIG5vdGlmeSBTRlUgaWYgdW5wdWJsaXNoaW5nIGluIHJlc3BvbnNlIHRvIHJlbW90ZSBzb2Z0IG11dGVcbiAgICAgIGlmICh0aGlzLnN0YXRlLmxvY2FsUGFydGljaXBhbnQ/LnB1Ymxpc2hlZFRyYWNrcy5pbmNsdWRlcyh0cmFja1R5cGUpKSB7XG4gICAgICAgIGF3YWl0IHRoaXMubm90aWZ5VHJhY2tNdXRlU3RhdGVDaGFuZ2VkKHVuZGVmaW5lZCwgdHJhY2tUeXBlLCB0cnVlKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gdHJhY2sgdHlwZSBpcyBjdXJyZW50bHkgYmVpbmcgcHVibGlzaGVkIHRvIHRoZSBTRlUuXG4gICAqXG4gICAqIEBwYXJhbSB0cmFja1R5cGUgdGhlIHRyYWNrIHR5cGUgdG8gY2hlY2suXG4gICAqL1xuICBpc1B1Ymxpc2hpbmcgPSAodHJhY2tUeXBlOiBUcmFja1R5cGUpOiBib29sZWFuID0+IHtcbiAgICBjb25zdCB0cmFuc2NlaXZlckZvclRyYWNrVHlwZSA9IHRoaXMudHJhbnNjZWl2ZXJSZWdpc3RyeVt0cmFja1R5cGVdO1xuICAgIGlmICh0cmFuc2NlaXZlckZvclRyYWNrVHlwZSAmJiB0cmFuc2NlaXZlckZvclRyYWNrVHlwZS5zZW5kZXIpIHtcbiAgICAgIGNvbnN0IHNlbmRlciA9IHRyYW5zY2VpdmVyRm9yVHJhY2tUeXBlLnNlbmRlcjtcbiAgICAgIHJldHVybiAoXG4gICAgICAgICEhc2VuZGVyLnRyYWNrICYmXG4gICAgICAgIHNlbmRlci50cmFjay5yZWFkeVN0YXRlID09PSAnbGl2ZScgJiZcbiAgICAgICAgc2VuZGVyLnRyYWNrLmVuYWJsZWRcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiB0cmFjayB0eXBlIGlzIGN1cnJlbnRseSBsaXZlXG4gICAqXG4gICAqIEBwYXJhbSB0cmFja1R5cGUgdGhlIHRyYWNrIHR5cGUgdG8gY2hlY2suXG4gICAqL1xuICBpc0xpdmUgPSAodHJhY2tUeXBlOiBUcmFja1R5cGUpOiBib29sZWFuID0+IHtcbiAgICBjb25zdCB0cmFuc2NlaXZlckZvclRyYWNrVHlwZSA9IHRoaXMudHJhbnNjZWl2ZXJSZWdpc3RyeVt0cmFja1R5cGVdO1xuICAgIGlmICh0cmFuc2NlaXZlckZvclRyYWNrVHlwZSAmJiB0cmFuc2NlaXZlckZvclRyYWNrVHlwZS5zZW5kZXIpIHtcbiAgICAgIGNvbnN0IHNlbmRlciA9IHRyYW5zY2VpdmVyRm9yVHJhY2tUeXBlLnNlbmRlcjtcbiAgICAgIHJldHVybiAhIXNlbmRlci50cmFjayAmJiBzZW5kZXIudHJhY2sucmVhZHlTdGF0ZSA9PT0gJ2xpdmUnO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgcHJpdmF0ZSBub3RpZnlUcmFja011dGVTdGF0ZUNoYW5nZWQgPSBhc3luYyAoXG4gICAgbWVkaWFTdHJlYW06IE1lZGlhU3RyZWFtIHwgdW5kZWZpbmVkLFxuICAgIHRyYWNrVHlwZTogVHJhY2tUeXBlLFxuICAgIGlzTXV0ZWQ6IGJvb2xlYW4sXG4gICkgPT4ge1xuICAgIGF3YWl0IHRoaXMuc2Z1Q2xpZW50LnVwZGF0ZU11dGVTdGF0ZSh0cmFja1R5cGUsIGlzTXV0ZWQpO1xuXG4gICAgY29uc3QgYXVkaW9PclZpZGVvT3JTY3JlZW5TaGFyZVN0cmVhbSA9XG4gICAgICB0cmFja1R5cGVUb1BhcnRpY2lwYW50U3RyZWFtS2V5KHRyYWNrVHlwZSk7XG4gICAgaWYgKGlzTXV0ZWQpIHtcbiAgICAgIHRoaXMuc3RhdGUudXBkYXRlUGFydGljaXBhbnQodGhpcy5zZnVDbGllbnQuc2Vzc2lvbklkLCAocCkgPT4gKHtcbiAgICAgICAgcHVibGlzaGVkVHJhY2tzOiBwLnB1Ymxpc2hlZFRyYWNrcy5maWx0ZXIoKHQpID0+IHQgIT09IHRyYWNrVHlwZSksXG4gICAgICAgIFthdWRpb09yVmlkZW9PclNjcmVlblNoYXJlU3RyZWFtXTogdW5kZWZpbmVkLFxuICAgICAgfSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnN0YXRlLnVwZGF0ZVBhcnRpY2lwYW50KHRoaXMuc2Z1Q2xpZW50LnNlc3Npb25JZCwgKHApID0+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBwdWJsaXNoZWRUcmFja3M6IHAucHVibGlzaGVkVHJhY2tzLmluY2x1ZGVzKHRyYWNrVHlwZSlcbiAgICAgICAgICAgID8gcC5wdWJsaXNoZWRUcmFja3NcbiAgICAgICAgICAgIDogWy4uLnAucHVibGlzaGVkVHJhY2tzLCB0cmFja1R5cGVdLFxuICAgICAgICAgIFthdWRpb09yVmlkZW9PclNjcmVlblNoYXJlU3RyZWFtXTogbWVkaWFTdHJlYW0sXG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFN0b3BzIHB1Ymxpc2hpbmcgYWxsIHRyYWNrcyBhbmQgc3RvcCBhbGwgdHJhY2tzLlxuICAgKi9cbiAgc3RvcFB1Ymxpc2hpbmcgPSAoKSA9PiB7XG4gICAgbG9nZ2VyKCdkZWJ1ZycsICdTdG9wcGluZyBwdWJsaXNoaW5nIGFsbCB0cmFja3MnKTtcbiAgICB0aGlzLnBjLmdldFNlbmRlcnMoKS5mb3JFYWNoKChzKSA9PiB7XG4gICAgICBzLnRyYWNrPy5zdG9wKCk7XG4gICAgICBpZiAodGhpcy5wYy5zaWduYWxpbmdTdGF0ZSAhPT0gJ2Nsb3NlZCcpIHtcbiAgICAgICAgdGhpcy5wYy5yZW1vdmVUcmFjayhzKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICB1cGRhdGVWaWRlb1B1Ymxpc2hRdWFsaXR5ID0gYXN5bmMgKGVuYWJsZWRMYXllcnM6IFZpZGVvTGF5ZXJTZXR0aW5nW10pID0+IHtcbiAgICBsb2dnZXIoXG4gICAgICAnaW5mbycsXG4gICAgICAnVXBkYXRlIHB1Ymxpc2ggcXVhbGl0eSwgcmVxdWVzdGVkIGxheWVycyBieSBTRlU6JyxcbiAgICAgIGVuYWJsZWRMYXllcnMsXG4gICAgKTtcblxuICAgIGNvbnN0IHZpZGVvU2VuZGVyID0gdGhpcy50cmFuc2NlaXZlclJlZ2lzdHJ5W1RyYWNrVHlwZS5WSURFT10/LnNlbmRlcjtcbiAgICBpZiAoIXZpZGVvU2VuZGVyKSB7XG4gICAgICBsb2dnZXIoJ3dhcm4nLCAnVXBkYXRlIHB1Ymxpc2ggcXVhbGl0eSwgbm8gdmlkZW8gc2VuZGVyIGZvdW5kLicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHBhcmFtcyA9IHZpZGVvU2VuZGVyLmdldFBhcmFtZXRlcnMoKTtcbiAgICBpZiAocGFyYW1zLmVuY29kaW5ncy5sZW5ndGggPT09IDApIHtcbiAgICAgIGxvZ2dlcihcbiAgICAgICAgJ3dhcm4nLFxuICAgICAgICAnVXBkYXRlIHB1Ymxpc2ggcXVhbGl0eSwgTm8gc3VpdGFibGUgdmlkZW8gZW5jb2RpbmcgcXVhbGl0eSBmb3VuZCcsXG4gICAgICApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGxldCBjaGFuZ2VkID0gZmFsc2U7XG4gICAgbGV0IGVuYWJsZWRSaWRzID0gZW5hYmxlZExheWVyc1xuICAgICAgLmZpbHRlcigobHkpID0+IGx5LmFjdGl2ZSlcbiAgICAgIC5tYXAoKGx5KSA9PiBseS5uYW1lKTtcbiAgICBwYXJhbXMuZW5jb2RpbmdzLmZvckVhY2goKGVuYykgPT4ge1xuICAgICAgLy8gZmxpcCAnYWN0aXZlJyBmbGFnIG9ubHkgd2hlbiBuZWNlc3NhcnlcbiAgICAgIGNvbnN0IHNob3VsZEVuYWJsZSA9IGVuYWJsZWRSaWRzLmluY2x1ZGVzKGVuYy5yaWQhKTtcbiAgICAgIGlmIChzaG91bGRFbmFibGUgIT09IGVuYy5hY3RpdmUpIHtcbiAgICAgICAgZW5jLmFjdGl2ZSA9IHNob3VsZEVuYWJsZTtcbiAgICAgICAgY2hhbmdlZCA9IHRydWU7XG4gICAgICB9XG4gICAgICBpZiAoc2hvdWxkRW5hYmxlKSB7XG4gICAgICAgIGxldCBsYXllciA9IGVuYWJsZWRMYXllcnMuZmluZCgodmxzKSA9PiB2bHMubmFtZSA9PT0gZW5jLnJpZCk7XG4gICAgICAgIGlmIChsYXllciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgbGF5ZXIuc2NhbGVSZXNvbHV0aW9uRG93bkJ5ID49IDEgJiZcbiAgICAgICAgICAgIGxheWVyLnNjYWxlUmVzb2x1dGlvbkRvd25CeSAhPT0gZW5jLnNjYWxlUmVzb2x1dGlvbkRvd25CeVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgbG9nZ2VyKFxuICAgICAgICAgICAgICAnZGVidWcnLFxuICAgICAgICAgICAgICAnW2R5bmFzY2FsZV06IHNldHRpbmcgc2NhbGVSZXNvbHV0aW9uRG93bkJ5IGZyb20gc2VydmVyJyxcbiAgICAgICAgICAgICAgJ2xheWVyJyxcbiAgICAgICAgICAgICAgbGF5ZXIubmFtZSxcbiAgICAgICAgICAgICAgJ3NjYWxlLXJlc29sdXRpb24tZG93bi1ieScsXG4gICAgICAgICAgICAgIGxheWVyLnNjYWxlUmVzb2x1dGlvbkRvd25CeSxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBlbmMuc2NhbGVSZXNvbHV0aW9uRG93bkJ5ID0gbGF5ZXIuc2NhbGVSZXNvbHV0aW9uRG93bkJ5O1xuICAgICAgICAgICAgY2hhbmdlZCA9IHRydWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGxheWVyLm1heEJpdHJhdGUgPiAwICYmIGxheWVyLm1heEJpdHJhdGUgIT09IGVuYy5tYXhCaXRyYXRlKSB7XG4gICAgICAgICAgICBsb2dnZXIoXG4gICAgICAgICAgICAgICdkZWJ1ZycsXG4gICAgICAgICAgICAgICdbZHluYXNjYWxlXSBzZXR0aW5nIG1heC1iaXRyYXRlIGZyb20gdGhlIHNlcnZlcicsXG4gICAgICAgICAgICAgICdsYXllcicsXG4gICAgICAgICAgICAgIGxheWVyLm5hbWUsXG4gICAgICAgICAgICAgICdtYXgtYml0cmF0ZScsXG4gICAgICAgICAgICAgIGxheWVyLm1heEJpdHJhdGUsXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgZW5jLm1heEJpdHJhdGUgPSBsYXllci5tYXhCaXRyYXRlO1xuICAgICAgICAgICAgY2hhbmdlZCA9IHRydWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgbGF5ZXIubWF4RnJhbWVyYXRlID4gMCAmJlxuICAgICAgICAgICAgbGF5ZXIubWF4RnJhbWVyYXRlICE9PSBlbmMubWF4RnJhbWVyYXRlXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBsb2dnZXIoXG4gICAgICAgICAgICAgICdkZWJ1ZycsXG4gICAgICAgICAgICAgICdbZHluYXNjYWxlXTogc2V0dGluZyBtYXhGcmFtZXJhdGUgZnJvbSBzZXJ2ZXInLFxuICAgICAgICAgICAgICAnbGF5ZXInLFxuICAgICAgICAgICAgICBsYXllci5uYW1lLFxuICAgICAgICAgICAgICAnbWF4LWZyYW1lcmF0ZScsXG4gICAgICAgICAgICAgIGxheWVyLm1heEZyYW1lcmF0ZSxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBlbmMubWF4RnJhbWVyYXRlID0gbGF5ZXIubWF4RnJhbWVyYXRlO1xuICAgICAgICAgICAgY2hhbmdlZCA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBjb25zdCBhY3RpdmVMYXllcnMgPSBwYXJhbXMuZW5jb2RpbmdzLmZpbHRlcigoZSkgPT4gZS5hY3RpdmUpO1xuICAgIGlmIChjaGFuZ2VkKSB7XG4gICAgICBhd2FpdCB2aWRlb1NlbmRlci5zZXRQYXJhbWV0ZXJzKHBhcmFtcyk7XG4gICAgICBsb2dnZXIoJ2luZm8nLCBgVXBkYXRlIHB1Ymxpc2ggcXVhbGl0eSwgZW5hYmxlZCByaWRzOiBgLCBhY3RpdmVMYXllcnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBsb2dnZXIoJ2luZm8nLCBgVXBkYXRlIHB1Ymxpc2ggcXVhbGl0eSwgbm8gY2hhbmdlOiBgLCBhY3RpdmVMYXllcnMpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgcmVzdWx0IG9mIHRoZSBgUlRDUGVlckNvbm5lY3Rpb24uZ2V0U3RhdHMoKWAgbWV0aG9kXG4gICAqIEBwYXJhbSBzZWxlY3RvclxuICAgKiBAcmV0dXJuc1xuICAgKi9cbiAgZ2V0U3RhdHMgPSAoc2VsZWN0b3I/OiBNZWRpYVN0cmVhbVRyYWNrIHwgbnVsbCB8IHVuZGVmaW5lZCkgPT4ge1xuICAgIHJldHVybiB0aGlzLnBjLmdldFN0YXRzKHNlbGVjdG9yKTtcbiAgfTtcblxuICBwcml2YXRlIGdldENvZGVjUHJlZmVyZW5jZXMgPSAoXG4gICAgdHJhY2tUeXBlOiBUcmFja1R5cGUsXG4gICAgcHJlZmVycmVkQ29kZWM/OiBzdHJpbmcgfCBudWxsLFxuICApID0+IHtcbiAgICBpZiAodHJhY2tUeXBlID09PSBUcmFja1R5cGUuVklERU8pIHtcbiAgICAgIHJldHVybiBnZXRQcmVmZXJyZWRDb2RlY3MoJ3ZpZGVvJywgcHJlZmVycmVkQ29kZWMgfHwgJ3ZwOCcpO1xuICAgIH1cbiAgICBpZiAodHJhY2tUeXBlID09PSBUcmFja1R5cGUuQVVESU8pIHtcbiAgICAgIGNvbnN0IGRlZmF1bHRBdWRpb0NvZGVjID0gdGhpcy5pc1JlZEVuYWJsZWQgPyAncmVkJyA6ICdvcHVzJztcbiAgICAgIGNvbnN0IGNvZGVjVG9SZW1vdmUgPSAhdGhpcy5pc1JlZEVuYWJsZWQgPyAncmVkJyA6IHVuZGVmaW5lZDtcbiAgICAgIHJldHVybiBnZXRQcmVmZXJyZWRDb2RlY3MoXG4gICAgICAgICdhdWRpbycsXG4gICAgICAgIHByZWZlcnJlZENvZGVjID8/IGRlZmF1bHRBdWRpb0NvZGVjLFxuICAgICAgICBjb2RlY1RvUmVtb3ZlLFxuICAgICAgKTtcbiAgICB9XG4gIH07XG5cbiAgcHJpdmF0ZSBvbkljZUNhbmRpZGF0ZSA9IGFzeW5jIChlOiBSVENQZWVyQ29ubmVjdGlvbkljZUV2ZW50KSA9PiB7XG4gICAgY29uc3QgeyBjYW5kaWRhdGUgfSA9IGU7XG4gICAgaWYgKCFjYW5kaWRhdGUpIHtcbiAgICAgIGxvZ2dlcignZGVidWcnLCAnbnVsbCBpY2UgY2FuZGlkYXRlJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGF3YWl0IHRoaXMuc2Z1Q2xpZW50LmljZVRyaWNrbGUoe1xuICAgICAgaWNlQ2FuZGlkYXRlOiBnZXRJY2VDYW5kaWRhdGUoY2FuZGlkYXRlKSxcbiAgICAgIHBlZXJUeXBlOiBQZWVyVHlwZS5QVUJMSVNIRVJfVU5TUEVDSUZJRUQsXG4gICAgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIFNGVSBjbGllbnQgdG8gdXNlLlxuICAgKlxuICAgKiBAcGFyYW0gc2Z1Q2xpZW50IHRoZSBTRlUgY2xpZW50IHRvIHVzZS5cbiAgICovXG4gIHNldFNmdUNsaWVudCA9IChzZnVDbGllbnQ6IFN0cmVhbVNmdUNsaWVudCkgPT4ge1xuICAgIHRoaXMuc2Z1Q2xpZW50ID0gc2Z1Q2xpZW50O1xuICB9O1xuXG4gIC8qKlxuICAgKiBQZXJmb3JtcyBhIG1pZ3JhdGlvbiBvZiB0aGlzIHB1Ymxpc2hlciBpbnN0YW5jZSB0byBhIG5ldyBTRlUuXG4gICAqXG4gICAqIEluaXRpYXRlcyBhIG5ldyBgaWNlUmVzdGFydGAgb2ZmZXIvYW5zd2VyIGV4Y2hhbmdlIHdpdGggdGhlIG5ldyBTRlUuXG4gICAqXG4gICAqIEBwYXJhbSBzZnVDbGllbnQgdGhlIG5ldyBTRlUgY2xpZW50IHRvIG1pZ3JhdGUgdG8uXG4gICAqIEBwYXJhbSBjb25uZWN0aW9uQ29uZmlnIHRoZSBuZXcgY29ubmVjdGlvbiBjb25maWd1cmF0aW9uIHRvIHVzZS5cbiAgICovXG4gIG1pZ3JhdGVUbyA9IGFzeW5jIChcbiAgICBzZnVDbGllbnQ6IFN0cmVhbVNmdUNsaWVudCxcbiAgICBjb25uZWN0aW9uQ29uZmlnPzogUlRDQ29uZmlndXJhdGlvbixcbiAgKSA9PiB7XG4gICAgdGhpcy5zZnVDbGllbnQgPSBzZnVDbGllbnQ7XG4gICAgdGhpcy5wYy5zZXRDb25maWd1cmF0aW9uKGNvbm5lY3Rpb25Db25maWcpO1xuICAgIHRoaXMuX2Nvbm5lY3Rpb25Db25maWd1cmF0aW9uID0gY29ubmVjdGlvbkNvbmZpZztcblxuICAgIGNvbnN0IHNob3VsZFJlc3RhcnRJY2UgPSB0aGlzLnBjLmljZUNvbm5lY3Rpb25TdGF0ZSA9PT0gJ2Nvbm5lY3RlZCc7XG4gICAgaWYgKHNob3VsZFJlc3RhcnRJY2UpIHtcbiAgICAgIC8vIG5lZ290aWF0ZSBvbmx5IGlmIHRoZXJlIGFyZSB0cmFja3MgdG8gcHVibGlzaFxuICAgICAgYXdhaXQgdGhpcy5uZWdvdGlhdGUoeyBpY2VSZXN0YXJ0OiB0cnVlIH0pO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogUmVzdGFydHMgdGhlIElDRSBjb25uZWN0aW9uIGFuZCByZW5lZ290aWF0ZXMgd2l0aCB0aGUgU0ZVLlxuICAgKi9cbiAgcmVzdGFydEljZSA9IGFzeW5jICgpID0+IHtcbiAgICBsb2dnZXIoJ2RlYnVnJywgJ1Jlc3RhcnRpbmcgSUNFIGNvbm5lY3Rpb24nKTtcbiAgICBjb25zdCBzaWduYWxpbmdTdGF0ZSA9IHRoaXMucGMuc2lnbmFsaW5nU3RhdGU7XG4gICAgaWYgKHRoaXMuaXNJY2VSZXN0YXJ0aW5nIHx8IHNpZ25hbGluZ1N0YXRlID09PSAnaGF2ZS1sb2NhbC1vZmZlcicpIHtcbiAgICAgIGxvZ2dlcignZGVidWcnLCAnSUNFIHJlc3RhcnQgaXMgYWxyZWFkeSBpbiBwcm9ncmVzcycpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhd2FpdCB0aGlzLm5lZ290aWF0ZSh7IGljZVJlc3RhcnQ6IHRydWUgfSk7XG4gIH07XG5cbiAgcHJpdmF0ZSBvbk5lZ290aWF0aW9uTmVlZGVkID0gYXN5bmMgKCkgPT4ge1xuICAgIGF3YWl0IHRoaXMubmVnb3RpYXRlKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEluaXRpYXRlcyBhIG5ldyBvZmZlci9hbnN3ZXIgZXhjaGFuZ2Ugd2l0aCB0aGUgY3VycmVudGx5IGNvbm5lY3RlZCBTRlUuXG4gICAqXG4gICAqIEBwYXJhbSBvcHRpb25zIHRoZSBvcHRpb25hbCBvZmZlciBvcHRpb25zIHRvIHVzZS5cbiAgICovXG4gIHByaXZhdGUgbmVnb3RpYXRlID0gYXN5bmMgKG9wdGlvbnM/OiBSVENPZmZlck9wdGlvbnMpID0+IHtcbiAgICB0aGlzLmlzSWNlUmVzdGFydGluZyA9IG9wdGlvbnM/LmljZVJlc3RhcnQgPz8gZmFsc2U7XG5cbiAgICBjb25zdCBvZmZlciA9IGF3YWl0IHRoaXMucGMuY3JlYXRlT2ZmZXIob3B0aW9ucyk7XG4gICAgbGV0IHNkcCA9IHRoaXMubXVuZ2VDb2RlY3Mob2ZmZXIuc2RwKTtcbiAgICBpZiAoc2RwICYmIHRoaXMuaXNQdWJsaXNoaW5nKFRyYWNrVHlwZS5TQ1JFRU5fU0hBUkVfQVVESU8pKSB7XG4gICAgICBjb25zdCB0cmFuc2NlaXZlciA9XG4gICAgICAgIHRoaXMudHJhbnNjZWl2ZXJSZWdpc3RyeVtUcmFja1R5cGUuU0NSRUVOX1NIQVJFX0FVRElPXTtcbiAgICAgIGlmICh0cmFuc2NlaXZlciAmJiB0cmFuc2NlaXZlci5zZW5kZXIudHJhY2spIHtcbiAgICAgICAgY29uc3QgbWlkID1cbiAgICAgICAgICB0cmFuc2NlaXZlci5taWQgPz9cbiAgICAgICAgICB0aGlzLmV4dHJhY3RNaWQoXG4gICAgICAgICAgICBzZHAsXG4gICAgICAgICAgICB0cmFuc2NlaXZlci5zZW5kZXIudHJhY2ssXG4gICAgICAgICAgICBUcmFja1R5cGUuU0NSRUVOX1NIQVJFX0FVRElPLFxuICAgICAgICAgICk7XG4gICAgICAgIHNkcCA9IGVuYWJsZUhpZ2hRdWFsaXR5QXVkaW8oc2RwLCBtaWQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIHNldCB0aGUgbXVuZ2VkIFNEUCBiYWNrIHRvIHRoZSBvZmZlclxuICAgIG9mZmVyLnNkcCA9IHNkcDtcblxuICAgIGNvbnN0IHRyYWNrSW5mb3MgPSB0aGlzLmdldEN1cnJlbnRUcmFja0luZm9zKG9mZmVyLnNkcCk7XG4gICAgaWYgKHRyYWNrSW5mb3MubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBDYW4ndCBpbml0aWF0ZSBuZWdvdGlhdGlvbiB3aXRob3V0IGFubm91bmNpbmcgYW55IHRyYWNrc2AsXG4gICAgICApO1xuICAgIH1cblxuICAgIGF3YWl0IHRoaXMucGMuc2V0TG9jYWxEZXNjcmlwdGlvbihvZmZlcik7XG5cbiAgICBjb25zdCB7IHJlc3BvbnNlIH0gPSBhd2FpdCB0aGlzLnNmdUNsaWVudC5zZXRQdWJsaXNoZXIoe1xuICAgICAgc2RwOiBvZmZlci5zZHAgfHwgJycsXG4gICAgICB0cmFja3M6IHRyYWNrSW5mb3MsXG4gICAgfSk7XG5cbiAgICB0cnkge1xuICAgICAgYXdhaXQgdGhpcy5wYy5zZXRSZW1vdGVEZXNjcmlwdGlvbih7XG4gICAgICAgIHR5cGU6ICdhbnN3ZXInLFxuICAgICAgICBzZHA6IHJlc3BvbnNlLnNkcCxcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGxvZ2dlcignZXJyb3InLCBgc2V0UmVtb3RlRGVzY3JpcHRpb24gZXJyb3JgLCB7XG4gICAgICAgIHNkcDogcmVzcG9uc2Uuc2RwLFxuICAgICAgICBlcnJvcjogZSxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHRoaXMuaXNJY2VSZXN0YXJ0aW5nID0gZmFsc2U7XG5cbiAgICB0aGlzLnNmdUNsaWVudC5pY2VUcmlja2xlQnVmZmVyLnB1Ymxpc2hlckNhbmRpZGF0ZXMuc3Vic2NyaWJlKFxuICAgICAgYXN5bmMgKGNhbmRpZGF0ZSkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IGljZUNhbmRpZGF0ZSA9IEpTT04ucGFyc2UoY2FuZGlkYXRlLmljZUNhbmRpZGF0ZSk7XG4gICAgICAgICAgYXdhaXQgdGhpcy5wYy5hZGRJY2VDYW5kaWRhdGUoaWNlQ2FuZGlkYXRlKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGxvZ2dlcignd2FybicsIGBJQ0UgY2FuZGlkYXRlIGVycm9yYCwgW2UsIGNhbmRpZGF0ZV0pO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICk7XG4gIH07XG5cbiAgcHJpdmF0ZSBtdW5nZUNvZGVjcyA9IChzZHA/OiBzdHJpbmcpID0+IHtcbiAgICBpZiAoc2RwKSB7XG4gICAgICBzZHAgPSB0b2dnbGVEdHgoc2RwLCB0aGlzLmlzRHR4RW5hYmxlZCk7XG4gICAgfVxuICAgIHJldHVybiBzZHA7XG4gIH07XG5cbiAgcHJpdmF0ZSBleHRyYWN0TWlkID0gKFxuICAgIHNkcDogc3RyaW5nIHwgdW5kZWZpbmVkLFxuICAgIHRyYWNrOiBNZWRpYVN0cmVhbVRyYWNrLFxuICAgIHRyYWNrVHlwZTogVHJhY2tUeXBlLFxuICApOiBzdHJpbmcgPT4ge1xuICAgIGlmICghc2RwKSB7XG4gICAgICBsb2dnZXIoJ3dhcm4nLCAnTm8gU0RQIGZvdW5kLiBSZXR1cm5pbmcgZW1wdHkgbWlkJyk7XG4gICAgICByZXR1cm4gJyc7XG4gICAgfVxuXG4gICAgbG9nZ2VyKFxuICAgICAgJ2RlYnVnJyxcbiAgICAgIGBObyAnbWlkJyBmb3VuZCBmb3IgdHJhY2suIFRyeWluZyB0byBmaW5kIGl0IGZyb20gdGhlIE9mZmVyIFNEUGAsXG4gICAgKTtcblxuICAgIGNvbnN0IHBhcnNlZFNkcCA9IFNEUC5wYXJzZShzZHApO1xuICAgIGNvbnN0IG1lZGlhID0gcGFyc2VkU2RwLm1lZGlhLmZpbmQoKG0pID0+IHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIG0udHlwZSA9PT0gdHJhY2sua2luZCAmJlxuICAgICAgICAvLyBpZiBgbXNpZGAgaXMgbm90IHByZXNlbnQsIHdlIGFzc3VtZSB0aGF0IHRoZSB0cmFjayBpcyB0aGUgZmlyc3Qgb25lXG4gICAgICAgIChtLm1zaWQ/LmluY2x1ZGVzKHRyYWNrLmlkKSA/PyB0cnVlKVxuICAgICAgKTtcbiAgICB9KTtcbiAgICBpZiAodHlwZW9mIG1lZGlhPy5taWQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBsb2dnZXIoXG4gICAgICAgICdkZWJ1ZycsXG4gICAgICAgIGBObyBtaWQgZm91bmQgaW4gU0RQIGZvciB0cmFjayB0eXBlICR7dHJhY2sua2luZH0gYW5kIGlkICR7dHJhY2suaWR9LiBBdHRlbXB0aW5nIHRvIGZpbmQgYSBoZXVyaXN0aWMgbWlkYCxcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IGhldXJpc3RpY01pZCA9IHRoaXMudHJhbnNjZWl2ZXJJbml0T3JkZXIuaW5kZXhPZih0cmFja1R5cGUpO1xuICAgICAgaWYgKGhldXJpc3RpY01pZCAhPT0gLTEpIHtcbiAgICAgICAgcmV0dXJuIFN0cmluZyhoZXVyaXN0aWNNaWQpO1xuICAgICAgfVxuXG4gICAgICBsb2dnZXIoJ2RlYnVnJywgJ05vIGhldXJpc3RpYyBtaWQgZm91bmQuIFJldHVybmluZyBlbXB0eSBtaWQnKTtcbiAgICAgIHJldHVybiAnJztcbiAgICB9XG4gICAgcmV0dXJuIFN0cmluZyhtZWRpYS5taWQpO1xuICB9O1xuXG4gIGdldEN1cnJlbnRUcmFja0luZm9zID0gKHNkcD86IHN0cmluZykgPT4ge1xuICAgIHNkcCA9IHNkcCB8fCB0aGlzLnBjLmxvY2FsRGVzY3JpcHRpb24/LnNkcDtcblxuICAgIGNvbnN0IHsgc2V0dGluZ3MgfSA9IHRoaXMuc3RhdGU7XG4gICAgY29uc3QgdGFyZ2V0UmVzb2x1dGlvbiA9IHNldHRpbmdzPy52aWRlby50YXJnZXRfcmVzb2x1dGlvbjtcbiAgICByZXR1cm4gdGhpcy5wY1xuICAgICAgLmdldFRyYW5zY2VpdmVycygpXG4gICAgICAuZmlsdGVyKCh0KSA9PiB0LmRpcmVjdGlvbiA9PT0gJ3NlbmRvbmx5JyAmJiB0LnNlbmRlci50cmFjaylcbiAgICAgIC5tYXA8VHJhY2tJbmZvPigodHJhbnNjZWl2ZXIpID0+IHtcbiAgICAgICAgY29uc3QgdHJhY2tUeXBlOiBUcmFja1R5cGUgPSBOdW1iZXIoXG4gICAgICAgICAgT2JqZWN0LmtleXModGhpcy50cmFuc2NlaXZlclJlZ2lzdHJ5KS5maW5kKFxuICAgICAgICAgICAgKGtleSkgPT5cbiAgICAgICAgICAgICAgdGhpcy50cmFuc2NlaXZlclJlZ2lzdHJ5W2tleSBhcyBhbnkgYXMgVHJhY2tUeXBlXSA9PT0gdHJhbnNjZWl2ZXIsXG4gICAgICAgICAgKSxcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgdHJhY2sgPSB0cmFuc2NlaXZlci5zZW5kZXIudHJhY2shO1xuICAgICAgICBsZXQgb3B0aW1hbExheWVyczogT3B0aW1hbFZpZGVvTGF5ZXJbXTtcbiAgICAgICAgaWYgKHRyYWNrLnJlYWR5U3RhdGUgPT09ICdsaXZlJykge1xuICAgICAgICAgIGNvbnN0IHB1Ymxpc2hPcHRzID0gdGhpcy5wdWJsaXNoT3B0aW9uc1BlclRyYWNrVHlwZS5nZXQodHJhY2tUeXBlKTtcbiAgICAgICAgICBvcHRpbWFsTGF5ZXJzID1cbiAgICAgICAgICAgIHRyYWNrVHlwZSA9PT0gVHJhY2tUeXBlLlZJREVPXG4gICAgICAgICAgICAgID8gZmluZE9wdGltYWxWaWRlb0xheWVycyh0cmFjaywgdGFyZ2V0UmVzb2x1dGlvbilcbiAgICAgICAgICAgICAgOiB0cmFja1R5cGUgPT09IFRyYWNrVHlwZS5TQ1JFRU5fU0hBUkVcbiAgICAgICAgICAgICAgPyBmaW5kT3B0aW1hbFNjcmVlblNoYXJpbmdMYXllcnMoXG4gICAgICAgICAgICAgICAgICB0cmFjayxcbiAgICAgICAgICAgICAgICAgIHB1Ymxpc2hPcHRzPy5zY3JlZW5TaGFyZVNldHRpbmdzLFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgOiBbXTtcbiAgICAgICAgICB0aGlzLnRyYWNrTGF5ZXJzQ2FjaGVbdHJhY2tUeXBlXSA9IG9wdGltYWxMYXllcnM7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gd2UgcmVwb3J0IHRoZSBsYXN0IGtub3duIG9wdGltYWwgbGF5ZXJzIGZvciBlbmRlZCB0cmFja3NcbiAgICAgICAgICBvcHRpbWFsTGF5ZXJzID0gdGhpcy50cmFja0xheWVyc0NhY2hlW3RyYWNrVHlwZV0gfHwgW107XG4gICAgICAgICAgbG9nZ2VyKFxuICAgICAgICAgICAgJ2RlYnVnJyxcbiAgICAgICAgICAgIGBUcmFjayAke1RyYWNrVHlwZVt0cmFja1R5cGVdfSBpcyBlbmRlZC4gQW5ub3VuY2luZyBsYXN0IGtub3duIG9wdGltYWwgbGF5ZXJzYCxcbiAgICAgICAgICAgIG9wdGltYWxMYXllcnMsXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGxheWVycyA9IG9wdGltYWxMYXllcnMubWFwPFZpZGVvTGF5ZXI+KChvcHRpbWFsTGF5ZXIpID0+ICh7XG4gICAgICAgICAgcmlkOiBvcHRpbWFsTGF5ZXIucmlkIHx8ICcnLFxuICAgICAgICAgIGJpdHJhdGU6IG9wdGltYWxMYXllci5tYXhCaXRyYXRlIHx8IDAsXG4gICAgICAgICAgZnBzOiBvcHRpbWFsTGF5ZXIubWF4RnJhbWVyYXRlIHx8IDAsXG4gICAgICAgICAgcXVhbGl0eTogdGhpcy5yaWRUb1ZpZGVvUXVhbGl0eShvcHRpbWFsTGF5ZXIucmlkIHx8ICcnKSxcbiAgICAgICAgICB2aWRlb0RpbWVuc2lvbjoge1xuICAgICAgICAgICAgd2lkdGg6IG9wdGltYWxMYXllci53aWR0aCxcbiAgICAgICAgICAgIGhlaWdodDogb3B0aW1hbExheWVyLmhlaWdodCxcbiAgICAgICAgICB9LFxuICAgICAgICB9KSk7XG5cbiAgICAgICAgY29uc3QgaXNBdWRpb1RyYWNrID0gW1xuICAgICAgICAgIFRyYWNrVHlwZS5BVURJTyxcbiAgICAgICAgICBUcmFja1R5cGUuU0NSRUVOX1NIQVJFX0FVRElPLFxuICAgICAgICBdLmluY2x1ZGVzKHRyYWNrVHlwZSk7XG5cbiAgICAgICAgY29uc3QgdHJhY2tTZXR0aW5ncyA9IHRyYWNrLmdldFNldHRpbmdzKCk7XG4gICAgICAgIGNvbnN0IGlzU3RlcmVvID0gaXNBdWRpb1RyYWNrICYmIHRyYWNrU2V0dGluZ3MuY2hhbm5lbENvdW50ID09PSAyO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdHJhY2tJZDogdHJhY2suaWQsXG4gICAgICAgICAgbGF5ZXJzOiBsYXllcnMsXG4gICAgICAgICAgdHJhY2tUeXBlLFxuICAgICAgICAgIG1pZDogdHJhbnNjZWl2ZXIubWlkID8/IHRoaXMuZXh0cmFjdE1pZChzZHAsIHRyYWNrLCB0cmFja1R5cGUpLFxuXG4gICAgICAgICAgc3RlcmVvOiBpc1N0ZXJlbyxcbiAgICAgICAgICBkdHg6IGlzQXVkaW9UcmFjayAmJiB0aGlzLmlzRHR4RW5hYmxlZCxcbiAgICAgICAgICByZWQ6IGlzQXVkaW9UcmFjayAmJiB0aGlzLmlzUmVkRW5hYmxlZCxcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICB9O1xuXG4gIHByaXZhdGUgb25JY2VDYW5kaWRhdGVFcnJvciA9IChlOiBFdmVudCkgPT4ge1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9XG4gICAgICBlIGluc3RhbmNlb2YgUlRDUGVlckNvbm5lY3Rpb25JY2VFcnJvckV2ZW50ICYmXG4gICAgICBgJHtlLmVycm9yQ29kZX06ICR7ZS5lcnJvclRleHR9YDtcbiAgICBjb25zdCBsb2dMZXZlbCA9XG4gICAgICB0aGlzLnBjLmljZUNvbm5lY3Rpb25TdGF0ZSA9PT0gJ2Nvbm5lY3RlZCcgPyAnZGVidWcnIDogJ2Vycm9yJztcbiAgICBsb2dnZXIobG9nTGV2ZWwsIGBJQ0UgQ2FuZGlkYXRlIGVycm9yYCwgZXJyb3JNZXNzYWdlKTtcbiAgfTtcblxuICBwcml2YXRlIG9uSWNlQ29ubmVjdGlvblN0YXRlQ2hhbmdlID0gKCkgPT4ge1xuICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYy5pY2VDb25uZWN0aW9uU3RhdGU7XG4gICAgbG9nZ2VyKCdkZWJ1ZycsIGBJQ0UgQ29ubmVjdGlvbiBzdGF0ZSBjaGFuZ2VkIHRvYCwgc3RhdGUpO1xuXG4gICAgY29uc3QgaGFzTmV0d29ya0Nvbm5lY3Rpb24gPVxuICAgICAgdGhpcy5zdGF0ZS5jYWxsaW5nU3RhdGUgIT09IENhbGxpbmdTdGF0ZS5PRkZMSU5FO1xuXG4gICAgaWYgKHN0YXRlID09PSAnZmFpbGVkJykge1xuICAgICAgbG9nZ2VyKCd3YXJuJywgYEF0dGVtcHRpbmcgdG8gcmVzdGFydCBJQ0VgKTtcbiAgICAgIHRoaXMucmVzdGFydEljZSgpLmNhdGNoKChlKSA9PiB7XG4gICAgICAgIGxvZ2dlcignZXJyb3InLCBgSUNFIHJlc3RhcnQgZXJyb3JgLCBlKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAoc3RhdGUgPT09ICdkaXNjb25uZWN0ZWQnICYmIGhhc05ldHdvcmtDb25uZWN0aW9uKSB7XG4gICAgICAvLyB3aGVuIGluIGBkaXNjb25uZWN0ZWRgIHN0YXRlLCB0aGUgYnJvd3NlciBtYXkgcmVjb3ZlciBhdXRvbWF0aWNhbGx5LFxuICAgICAgLy8gaGVuY2UsIHdlIGRlbGF5IHRoZSBJQ0UgcmVzdGFydFxuICAgICAgbG9nZ2VyKCd3YXJuJywgYFNjaGVkdWxpbmcgSUNFIHJlc3RhcnQgaW4gJHt0aGlzLmljZVJlc3RhcnREZWxheX0gbXMuYCk7XG4gICAgICB0aGlzLmljZVJlc3RhcnRUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIC8vIGNoZWNrIGlmIHRoZSBzdGF0ZSBpcyBzdGlsbCBgZGlzY29ubmVjdGVkYCBvciBgZmFpbGVkYFxuICAgICAgICAvLyBhcyB0aGUgY29ubmVjdGlvbiBtYXkgaGF2ZSByZWNvdmVyZWQgKG9yIGZhaWxlZCkgaW4gdGhlIG1lYW50aW1lXG4gICAgICAgIGlmIChcbiAgICAgICAgICB0aGlzLnBjLmljZUNvbm5lY3Rpb25TdGF0ZSA9PT0gJ2Rpc2Nvbm5lY3RlZCcgfHxcbiAgICAgICAgICB0aGlzLnBjLmljZUNvbm5lY3Rpb25TdGF0ZSA9PT0gJ2ZhaWxlZCdcbiAgICAgICAgKSB7XG4gICAgICAgICAgdGhpcy5yZXN0YXJ0SWNlKCkuY2F0Y2goKGUpID0+IHtcbiAgICAgICAgICAgIGxvZ2dlcignZXJyb3InLCBgSUNFIHJlc3RhcnQgZXJyb3JgLCBlKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsb2dnZXIoXG4gICAgICAgICAgICAnZGVidWcnLFxuICAgICAgICAgICAgYFNjaGVkdWxlZCBJQ0UgcmVzdGFydDogY29ubmVjdGlvbiByZWNvdmVyZWQsIGNhbmNlbGVkLmAsXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfSwgdGhpcy5pY2VSZXN0YXJ0RGVsYXkpO1xuICAgIH1cbiAgfTtcblxuICBwcml2YXRlIG9uSWNlR2F0aGVyaW5nU3RhdGVDaGFuZ2UgPSAoKSA9PiB7XG4gICAgbG9nZ2VyKCdkZWJ1ZycsIGBJQ0UgR2F0aGVyaW5nIFN0YXRlYCwgdGhpcy5wYy5pY2VHYXRoZXJpbmdTdGF0ZSk7XG4gIH07XG5cbiAgcHJpdmF0ZSBvblNpZ25hbGluZ1N0YXRlQ2hhbmdlID0gKCkgPT4ge1xuICAgIGxvZ2dlcignZGVidWcnLCBgU2lnbmFsaW5nIHN0YXRlIGNoYW5nZWRgLCB0aGlzLnBjLnNpZ25hbGluZ1N0YXRlKTtcbiAgfTtcblxuICBwcml2YXRlIHJpZFRvVmlkZW9RdWFsaXR5ID0gKHJpZDogc3RyaW5nKTogVmlkZW9RdWFsaXR5ID0+IHtcbiAgICByZXR1cm4gcmlkID09PSAncSdcbiAgICAgID8gVmlkZW9RdWFsaXR5LkxPV19VTlNQRUNJRklFRFxuICAgICAgOiByaWQgPT09ICdoJ1xuICAgICAgPyBWaWRlb1F1YWxpdHkuTUlEXG4gICAgICA6IFZpZGVvUXVhbGl0eS5ISUdIOyAvLyBkZWZhdWx0IHRvIEhJR0hcbiAgfTtcbn1cbiIsImltcG9ydCB7IFN0cmVhbVNmdUNsaWVudCB9IGZyb20gJy4uL1N0cmVhbVNmdUNsaWVudCc7XG5pbXBvcnQgeyBnZXRJY2VDYW5kaWRhdGUgfSBmcm9tICcuL2hlbHBlcnMvaWNlQ2FuZGlkYXRlJztcbmltcG9ydCB7IFBlZXJUeXBlIH0gZnJvbSAnLi4vZ2VuL3ZpZGVvL3NmdS9tb2RlbHMvbW9kZWxzJztcbmltcG9ydCB7IFN1YnNjcmliZXJPZmZlciB9IGZyb20gJy4uL2dlbi92aWRlby9zZnUvZXZlbnQvZXZlbnRzJztcbmltcG9ydCB7IERpc3BhdGNoZXIgfSBmcm9tICcuL0Rpc3BhdGNoZXInO1xuaW1wb3J0IHsgZ2V0TG9nZ2VyIH0gZnJvbSAnLi4vbG9nZ2VyJztcbmltcG9ydCB7IENhbGxpbmdTdGF0ZSwgQ2FsbFN0YXRlIH0gZnJvbSAnLi4vc3RvcmUnO1xuXG5leHBvcnQgdHlwZSBTdWJzY3JpYmVyT3B0cyA9IHtcbiAgc2Z1Q2xpZW50OiBTdHJlYW1TZnVDbGllbnQ7XG4gIGRpc3BhdGNoZXI6IERpc3BhdGNoZXI7XG4gIHN0YXRlOiBDYWxsU3RhdGU7XG4gIGNvbm5lY3Rpb25Db25maWc/OiBSVENDb25maWd1cmF0aW9uO1xuICBpY2VSZXN0YXJ0RGVsYXk/OiBudW1iZXI7XG59O1xuXG5jb25zdCBsb2dnZXIgPSBnZXRMb2dnZXIoWydTdWJzY3JpYmVyJ10pO1xuXG4vKipcbiAqIEEgd3JhcHBlciBhcm91bmQgdGhlIGBSVENQZWVyQ29ubmVjdGlvbmAgdGhhdCBoYW5kbGVzIHRoZSBpbmNvbWluZ1xuICogbWVkaWEgc3RyZWFtcyBmcm9tIHRoZSBTRlUuXG4gKi9cbmV4cG9ydCBjbGFzcyBTdWJzY3JpYmVyIHtcbiAgcHJpdmF0ZSBwYzogUlRDUGVlckNvbm5lY3Rpb247XG4gIHByaXZhdGUgc2Z1Q2xpZW50OiBTdHJlYW1TZnVDbGllbnQ7XG4gIHByaXZhdGUgc3RhdGU6IENhbGxTdGF0ZTtcblxuICBwcml2YXRlIHJlYWRvbmx5IHVucmVnaXN0ZXJPblN1YnNjcmliZXJPZmZlcjogKCkgPT4gdm9pZDtcbiAgcHJpdmF0ZSByZWFkb25seSB1bnJlZ2lzdGVyT25JY2VSZXN0YXJ0OiAoKSA9PiB2b2lkO1xuXG4gIHByaXZhdGUgcmVhZG9ubHkgaWNlUmVzdGFydERlbGF5OiBudW1iZXI7XG4gIHByaXZhdGUgaXNJY2VSZXN0YXJ0aW5nID0gZmFsc2U7XG4gIHByaXZhdGUgaWNlUmVzdGFydFRpbWVvdXQ/OiBOb2RlSlMuVGltZW91dDtcblxuICAvLyB3b3JrYXJvdW5kIGZvciB0aGUgbGFjayBvZiBSVENQZWVyQ29ubmVjdGlvbi5nZXRDb25maWd1cmF0aW9uKCkgbWV0aG9kIGluIHJlYWN0LW5hdGl2ZS13ZWJydGNcbiAgcHJpdmF0ZSBfY29ubmVjdGlvbkNvbmZpZ3VyYXRpb246IFJUQ0NvbmZpZ3VyYXRpb24gfCB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGN1cnJlbnQgY29ubmVjdGlvbiBjb25maWd1cmF0aW9uLlxuICAgKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGdldCBjb25uZWN0aW9uQ29uZmlndXJhdGlvbigpIHtcbiAgICBpZiAodGhpcy5wYy5nZXRDb25maWd1cmF0aW9uKSByZXR1cm4gdGhpcy5wYy5nZXRDb25maWd1cmF0aW9uKCk7XG4gICAgcmV0dXJuIHRoaXMuX2Nvbm5lY3Rpb25Db25maWd1cmF0aW9uO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnN0cnVjdHMgYSBuZXcgYFN1YnNjcmliZXJgIGluc3RhbmNlLlxuICAgKlxuICAgKiBAcGFyYW0gc2Z1Q2xpZW50IHRoZSBTRlUgY2xpZW50IHRvIHVzZS5cbiAgICogQHBhcmFtIGRpc3BhdGNoZXIgdGhlIGRpc3BhdGNoZXIgdG8gdXNlLlxuICAgKiBAcGFyYW0gc3RhdGUgdGhlIHN0YXRlIG9mIHRoZSBjYWxsLlxuICAgKiBAcGFyYW0gY29ubmVjdGlvbkNvbmZpZyB0aGUgY29ubmVjdGlvbiBjb25maWd1cmF0aW9uIHRvIHVzZS5cbiAgICogQHBhcmFtIGljZVJlc3RhcnREZWxheSB0aGUgZGVsYXkgaW4gbWlsbGlzZWNvbmRzIHRvIHdhaXQgYmVmb3JlIHJlc3RhcnRpbmcgSUNFIHdoZW4gY29ubmVjdGlvbiBnb2VzIHRvIGBkaXNjb25uZWN0ZWRgIHN0YXRlLlxuICAgKi9cbiAgY29uc3RydWN0b3Ioe1xuICAgIHNmdUNsaWVudCxcbiAgICBkaXNwYXRjaGVyLFxuICAgIHN0YXRlLFxuICAgIGNvbm5lY3Rpb25Db25maWcsXG4gICAgaWNlUmVzdGFydERlbGF5ID0gMjUwMCxcbiAgfTogU3Vic2NyaWJlck9wdHMpIHtcbiAgICB0aGlzLnNmdUNsaWVudCA9IHNmdUNsaWVudDtcbiAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gICAgdGhpcy5pY2VSZXN0YXJ0RGVsYXkgPSBpY2VSZXN0YXJ0RGVsYXk7XG5cbiAgICB0aGlzLnBjID0gdGhpcy5jcmVhdGVQZWVyQ29ubmVjdGlvbihjb25uZWN0aW9uQ29uZmlnKTtcblxuICAgIHRoaXMudW5yZWdpc3Rlck9uU3Vic2NyaWJlck9mZmVyID0gZGlzcGF0Y2hlci5vbihcbiAgICAgICdzdWJzY3JpYmVyT2ZmZXInLFxuICAgICAgYXN5bmMgKHN1YnNjcmliZXJPZmZlcikgPT4ge1xuICAgICAgICBhd2FpdCB0aGlzLm5lZ290aWF0ZShzdWJzY3JpYmVyT2ZmZXIpO1xuICAgICAgfSxcbiAgICApO1xuXG4gICAgdGhpcy51bnJlZ2lzdGVyT25JY2VSZXN0YXJ0ID0gZGlzcGF0Y2hlci5vbihcbiAgICAgICdpY2VSZXN0YXJ0JyxcbiAgICAgIGFzeW5jIChpY2VSZXN0YXJ0KSA9PiB7XG4gICAgICAgIGlmIChpY2VSZXN0YXJ0LnBlZXJUeXBlICE9PSBQZWVyVHlwZS5TVUJTQ1JJQkVSKSByZXR1cm47XG4gICAgICAgIGF3YWl0IHRoaXMucmVzdGFydEljZSgpO1xuICAgICAgfSxcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgYFJUQ1BlZXJDb25uZWN0aW9uYCBpbnN0YW5jZSB3aXRoIHRoZSBnaXZlbiBjb25maWd1cmF0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0gY29ubmVjdGlvbkNvbmZpZyB0aGUgY29ubmVjdGlvbiBjb25maWd1cmF0aW9uIHRvIHVzZS5cbiAgICovXG4gIHByaXZhdGUgY3JlYXRlUGVlckNvbm5lY3Rpb24gPSAoY29ubmVjdGlvbkNvbmZpZz86IFJUQ0NvbmZpZ3VyYXRpb24pID0+IHtcbiAgICBjb25zdCBwYyA9IG5ldyBSVENQZWVyQ29ubmVjdGlvbihjb25uZWN0aW9uQ29uZmlnKTtcbiAgICB0aGlzLl9jb25uZWN0aW9uQ29uZmlndXJhdGlvbiA9IGNvbm5lY3Rpb25Db25maWc7XG4gICAgcGMuYWRkRXZlbnRMaXN0ZW5lcignaWNlY2FuZGlkYXRlJywgdGhpcy5vbkljZUNhbmRpZGF0ZSk7XG4gICAgcGMuYWRkRXZlbnRMaXN0ZW5lcigndHJhY2snLCB0aGlzLmhhbmRsZU9uVHJhY2spO1xuXG4gICAgcGMuYWRkRXZlbnRMaXN0ZW5lcignaWNlY2FuZGlkYXRlZXJyb3InLCB0aGlzLm9uSWNlQ2FuZGlkYXRlRXJyb3IpO1xuICAgIHBjLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAnaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlJyxcbiAgICAgIHRoaXMub25JY2VDb25uZWN0aW9uU3RhdGVDaGFuZ2UsXG4gICAgKTtcbiAgICBwYy5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgJ2ljZWdhdGhlcmluZ3N0YXRlY2hhbmdlJyxcbiAgICAgIHRoaXMub25JY2VHYXRoZXJpbmdTdGF0ZUNoYW5nZSxcbiAgICApO1xuXG4gICAgcmV0dXJuIHBjO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDbG9zZXMgdGhlIGBSVENQZWVyQ29ubmVjdGlvbmAgYW5kIHVuc3Vic2NyaWJlcyBmcm9tIHRoZSBkaXNwYXRjaGVyLlxuICAgKi9cbiAgY2xvc2UgPSAoKSA9PiB7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMuaWNlUmVzdGFydFRpbWVvdXQpO1xuICAgIHRoaXMudW5yZWdpc3Rlck9uU3Vic2NyaWJlck9mZmVyKCk7XG4gICAgdGhpcy51bnJlZ2lzdGVyT25JY2VSZXN0YXJ0KCk7XG4gICAgdGhpcy5wYy5jbG9zZSgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSByZXN1bHQgb2YgdGhlIGBSVENQZWVyQ29ubmVjdGlvbi5nZXRTdGF0cygpYCBtZXRob2RcbiAgICogQHBhcmFtIHNlbGVjdG9yXG4gICAqIEByZXR1cm5zXG4gICAqL1xuICBnZXRTdGF0cyA9IChzZWxlY3Rvcj86IE1lZGlhU3RyZWFtVHJhY2sgfCBudWxsIHwgdW5kZWZpbmVkKSA9PiB7XG4gICAgcmV0dXJuIHRoaXMucGMuZ2V0U3RhdHMoc2VsZWN0b3IpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBTRlUgY2xpZW50IHRvIHVzZS5cbiAgICpcbiAgICogQHBhcmFtIHNmdUNsaWVudCB0aGUgU0ZVIGNsaWVudCB0byB1c2UuXG4gICAqL1xuICBzZXRTZnVDbGllbnQgPSAoc2Z1Q2xpZW50OiBTdHJlYW1TZnVDbGllbnQpID0+IHtcbiAgICB0aGlzLnNmdUNsaWVudCA9IHNmdUNsaWVudDtcbiAgfTtcblxuICAvKipcbiAgICogTWlncmF0ZXMgdGhlIHN1YnNjcmliZXIgdG8gYSBuZXcgU0ZVIGNsaWVudC5cbiAgICpcbiAgICogQHBhcmFtIHNmdUNsaWVudCB0aGUgbmV3IFNGVSBjbGllbnQgdG8gbWlncmF0ZSB0by5cbiAgICogQHBhcmFtIGNvbm5lY3Rpb25Db25maWcgdGhlIG5ldyBjb25uZWN0aW9uIGNvbmZpZ3VyYXRpb24gdG8gdXNlLlxuICAgKi9cbiAgbWlncmF0ZVRvID0gKFxuICAgIHNmdUNsaWVudDogU3RyZWFtU2Z1Q2xpZW50LFxuICAgIGNvbm5lY3Rpb25Db25maWc/OiBSVENDb25maWd1cmF0aW9uLFxuICApID0+IHtcbiAgICB0aGlzLnNldFNmdUNsaWVudChzZnVDbGllbnQpO1xuXG4gICAgLy8gd2hlbiBtaWdyYXRpbmcsIHdlIHdhbnQgdG8ga2VlcCB0aGUgcHJldmlvdXMgc3Vic2NyaWJlciBvcGVuXG4gICAgLy8gdW50aWwgdGhlIG5ldyBvbmUgaXMgY29ubmVjdGVkXG4gICAgY29uc3QgcHJldmlvdXNQQyA9IHRoaXMucGM7XG5cbiAgICAvLyB3ZSBrZWVwIGEgcmVjb3JkIG9mIHByZXZpb3VzbHkgYXZhaWxhYmxlIHZpZGVvIHRyYWNrc1xuICAgIC8vIHNvIHRoYXQgd2UgY2FuIG1vbml0b3Igd2hlbiB0aGV5IGJlY29tZSBhdmFpbGFibGUgb24gdGhlIG5ld1xuICAgIC8vIHN1YnNjcmliZXIgYW5kIGNsb3NlIHRoZSBwcmV2aW91cyBvbmUuXG4gICAgY29uc3QgdHJhY2tJZHNUb01pZ3JhdGUgPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgICBwcmV2aW91c1BDLmdldFJlY2VpdmVycygpLmZvckVhY2goKHIpID0+IHtcbiAgICAgIGlmIChyLnRyYWNrLmtpbmQgPT09ICd2aWRlbycpIHtcbiAgICAgICAgdHJhY2tJZHNUb01pZ3JhdGUuYWRkKHIudHJhY2suaWQpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gc2V0IHVwIGEgbmV3IHN1YnNjcmliZXIgcGVlciBjb25uZWN0aW9uLCBjb25maWd1cmVkIHRvIGNvbm5lY3RcbiAgICAvLyB0byB0aGUgbmV3IFNGVSBub2RlXG4gICAgY29uc3QgcGMgPSB0aGlzLmNyZWF0ZVBlZXJDb25uZWN0aW9uKGNvbm5lY3Rpb25Db25maWcpO1xuXG4gICAgbGV0IG1pZ3JhdGlvblRpbWVvdXRJZDogTm9kZUpTLlRpbWVvdXQ7XG4gICAgY29uc3QgY2xlYW51cE1pZ3JhdGlvbiA9ICgpID0+IHtcbiAgICAgIHByZXZpb3VzUEMuY2xvc2UoKTtcbiAgICAgIGNsZWFyVGltZW91dChtaWdyYXRpb25UaW1lb3V0SWQpO1xuICAgIH07XG5cbiAgICAvLyBXaGVuIG1pZ3JhdGluZywgd2Ugd2FudCB0byBrZWVwIHRyYWNrIG9mIHRoZSB2aWRlbyB0cmFja3NcbiAgICAvLyB0aGF0IGFyZSBtaWdyYXRpbmcgdG8gdGhlIG5ldyBzdWJzY3JpYmVyLlxuICAgIC8vIE9uY2UgYWxsIG9mIHRoZW0gYXJlIGF2YWlsYWJsZSwgd2UgY2FuIGNsb3NlIHRoZSBwcmV2aW91cyBzdWJzY3JpYmVyLlxuICAgIGNvbnN0IGhhbmRsZVRyYWNrTWlncmF0aW9uID0gKGU6IFJUQ1RyYWNrRXZlbnQpID0+IHtcbiAgICAgIGxvZ2dlcihcbiAgICAgICAgJ2RlYnVnJyxcbiAgICAgICAgYFtNaWdyYXRpb25dOiBNaWdyYXRlZCB0cmFjazogJHtlLnRyYWNrLmlkfSwgJHtlLnRyYWNrLmtpbmR9YCxcbiAgICAgICk7XG4gICAgICB0cmFja0lkc1RvTWlncmF0ZS5kZWxldGUoZS50cmFjay5pZCk7XG4gICAgICBpZiAodHJhY2tJZHNUb01pZ3JhdGUuc2l6ZSA9PT0gMCkge1xuICAgICAgICBsb2dnZXIoJ2RlYnVnJywgYFtNaWdyYXRpb25dOiBNaWdyYXRpb24gY29tcGxldGVgKTtcbiAgICAgICAgcGMucmVtb3ZlRXZlbnRMaXN0ZW5lcigndHJhY2snLCBoYW5kbGVUcmFja01pZ3JhdGlvbik7XG4gICAgICAgIGNsZWFudXBNaWdyYXRpb24oKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gV2hlbiBtaWdyYXRpbmcsIHdlIHdhbnQgdG8ga2VlcCB0cmFjayBvZiB0aGUgY29ubmVjdGlvbiBzdGF0ZVxuICAgIC8vIG9mIHRoZSBuZXcgc3Vic2NyaWJlci5cbiAgICAvLyBPbmNlIGl0IGlzIGNvbm5lY3RlZCwgd2UgZ2l2ZSBpdCBhIDItc2Vjb25kIGdyYWNlIHBlcmlvZCB0byByZWNlaXZlXG4gICAgLy8gYWxsIHRoZSB2aWRlbyB0cmFja3MgdGhhdCBhcmUgbWlncmF0aW5nIGZyb20gdGhlIHByZXZpb3VzIHN1YnNjcmliZXIuXG4gICAgLy8gQWZ0ZXIgdGhpcyB0aHJlc2hvbGQsIHdlIGFicnVwdGx5IGNsb3NlIHRoZSBwcmV2aW91cyBzdWJzY3JpYmVyLlxuICAgIGNvbnN0IGhhbmRsZUNvbm5lY3Rpb25TdGF0ZUNoYW5nZSA9ICgpID0+IHtcbiAgICAgIGlmIChwYy5jb25uZWN0aW9uU3RhdGUgPT09ICdjb25uZWN0ZWQnKSB7XG4gICAgICAgIG1pZ3JhdGlvblRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIHBjLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RyYWNrJywgaGFuZGxlVHJhY2tNaWdyYXRpb24pO1xuICAgICAgICAgIGNsZWFudXBNaWdyYXRpb24oKTtcbiAgICAgICAgfSwgMjAwMCk7XG5cbiAgICAgICAgcGMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgICAnY29ubmVjdGlvbnN0YXRlY2hhbmdlJyxcbiAgICAgICAgICBoYW5kbGVDb25uZWN0aW9uU3RhdGVDaGFuZ2UsXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHBjLmFkZEV2ZW50TGlzdGVuZXIoJ3RyYWNrJywgaGFuZGxlVHJhY2tNaWdyYXRpb24pO1xuICAgIHBjLmFkZEV2ZW50TGlzdGVuZXIoJ2Nvbm5lY3Rpb25zdGF0ZWNoYW5nZScsIGhhbmRsZUNvbm5lY3Rpb25TdGF0ZUNoYW5nZSk7XG5cbiAgICAvLyByZXBsYWNlIHRoZSBQZWVyQ29ubmVjdGlvbiBpbnN0YW5jZVxuICAgIHRoaXMucGMgPSBwYztcbiAgfTtcblxuICAvKipcbiAgICogUmVzdGFydHMgdGhlIElDRSBjb25uZWN0aW9uIGFuZCByZW5lZ290aWF0ZXMgd2l0aCB0aGUgU0ZVLlxuICAgKi9cbiAgcmVzdGFydEljZSA9IGFzeW5jICgpID0+IHtcbiAgICBsb2dnZXIoJ2RlYnVnJywgJ1Jlc3RhcnRpbmcgSUNFIGNvbm5lY3Rpb24nKTtcbiAgICBpZiAodGhpcy5wYy5zaWduYWxpbmdTdGF0ZSA9PT0gJ2hhdmUtcmVtb3RlLW9mZmVyJykge1xuICAgICAgbG9nZ2VyKCdkZWJ1ZycsICdJQ0UgcmVzdGFydCBpcyBhbHJlYWR5IGluIHByb2dyZXNzJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHByZXZpb3VzSXNJY2VSZXN0YXJ0aW5nID0gdGhpcy5pc0ljZVJlc3RhcnRpbmc7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMuaXNJY2VSZXN0YXJ0aW5nID0gdHJ1ZTtcbiAgICAgIGF3YWl0IHRoaXMuc2Z1Q2xpZW50LmljZVJlc3RhcnQoe1xuICAgICAgICBwZWVyVHlwZTogUGVlclR5cGUuU1VCU0NSSUJFUixcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIC8vIHJlc3RvcmUgdGhlIHByZXZpb3VzIHN0YXRlLCBhcyBvdXIgaW50ZW50IGZvciByZXN0YXJ0aW5nIElDRSBmYWlsZWRcbiAgICAgIHRoaXMuaXNJY2VSZXN0YXJ0aW5nID0gcHJldmlvdXNJc0ljZVJlc3RhcnRpbmc7XG4gICAgICB0aHJvdyBlO1xuICAgIH1cbiAgfTtcblxuICBwcml2YXRlIGhhbmRsZU9uVHJhY2sgPSAoZTogUlRDVHJhY2tFdmVudCkgPT4ge1xuICAgIGNvbnN0IFtwcmltYXJ5U3RyZWFtXSA9IGUuc3RyZWFtcztcbiAgICAvLyBleGFtcGxlOiBgZTNmNmFhZjgtYjAzZC00OTExLWJlMzYtODNmNDdkMzdhNzZhOlRSQUNLX1RZUEVfVklERU9gXG4gICAgY29uc3QgW3RyYWNrSWQsIHRyYWNrVHlwZV0gPSBwcmltYXJ5U3RyZWFtLmlkLnNwbGl0KCc6Jyk7XG4gICAgY29uc3QgcGFydGljaXBhbnRUb1VwZGF0ZSA9IHRoaXMuc3RhdGUucGFydGljaXBhbnRzLmZpbmQoXG4gICAgICAocCkgPT4gcC50cmFja0xvb2t1cFByZWZpeCA9PT0gdHJhY2tJZCxcbiAgICApO1xuICAgIGxvZ2dlcihcbiAgICAgICdkZWJ1ZycsXG4gICAgICBgW29uVHJhY2tdOiBHb3QgcmVtb3RlICR7dHJhY2tUeXBlfSB0cmFjayBmb3IgdXNlcklkOiAke3BhcnRpY2lwYW50VG9VcGRhdGU/LnVzZXJJZH1gLFxuICAgICAgZS50cmFjay5pZCxcbiAgICAgIGUudHJhY2ssXG4gICAgKTtcbiAgICBpZiAoIXBhcnRpY2lwYW50VG9VcGRhdGUpIHtcbiAgICAgIGxvZ2dlcihcbiAgICAgICAgJ2Vycm9yJyxcbiAgICAgICAgYFtvblRyYWNrXTogUmVjZWl2ZWQgdHJhY2sgZm9yIHVua25vd24gcGFydGljaXBhbnQ6ICR7dHJhY2tJZH1gLFxuICAgICAgICBlLFxuICAgICAgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBlLnRyYWNrLmFkZEV2ZW50TGlzdGVuZXIoJ211dGUnLCAoKSA9PiB7XG4gICAgICBsb2dnZXIoXG4gICAgICAgICdpbmZvJyxcbiAgICAgICAgYFtvblRyYWNrXTogVHJhY2sgbXV0ZWQ6ICR7cGFydGljaXBhbnRUb1VwZGF0ZS51c2VySWR9ICR7dHJhY2tUeXBlfToke3RyYWNrSWR9YCxcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBlLnRyYWNrLmFkZEV2ZW50TGlzdGVuZXIoJ3VubXV0ZScsICgpID0+IHtcbiAgICAgIGxvZ2dlcihcbiAgICAgICAgJ2luZm8nLFxuICAgICAgICBgW29uVHJhY2tdOiBUcmFjayB1bm11dGVkOiAke3BhcnRpY2lwYW50VG9VcGRhdGUudXNlcklkfSAke3RyYWNrVHlwZX06JHt0cmFja0lkfWAsXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgZS50cmFjay5hZGRFdmVudExpc3RlbmVyKCdlbmRlZCcsICgpID0+IHtcbiAgICAgIGxvZ2dlcihcbiAgICAgICAgJ2luZm8nLFxuICAgICAgICBgW29uVHJhY2tdOiBUcmFjayBlbmRlZDogJHtwYXJ0aWNpcGFudFRvVXBkYXRlLnVzZXJJZH0gJHt0cmFja1R5cGV9OiR7dHJhY2tJZH1gLFxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGNvbnN0IHN0cmVhbUtpbmRQcm9wID0gKFxuICAgICAge1xuICAgICAgICBUUkFDS19UWVBFX0FVRElPOiAnYXVkaW9TdHJlYW0nLFxuICAgICAgICBUUkFDS19UWVBFX1ZJREVPOiAndmlkZW9TdHJlYW0nLFxuICAgICAgICBUUkFDS19UWVBFX1NDUkVFTl9TSEFSRTogJ3NjcmVlblNoYXJlU3RyZWFtJyxcbiAgICAgICAgVFJBQ0tfVFlQRV9TQ1JFRU5fU0hBUkVfQVVESU86ICdzY3JlZW5TaGFyZUF1ZGlvU3RyZWFtJyxcbiAgICAgIH0gYXMgY29uc3RcbiAgICApW3RyYWNrVHlwZV07XG5cbiAgICBpZiAoIXN0cmVhbUtpbmRQcm9wKSB7XG4gICAgICBsb2dnZXIoJ2Vycm9yJywgYFVua25vd24gdHJhY2sgdHlwZTogJHt0cmFja1R5cGV9YCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHByZXZpb3VzU3RyZWFtID0gcGFydGljaXBhbnRUb1VwZGF0ZVtzdHJlYW1LaW5kUHJvcF07XG4gICAgaWYgKHByZXZpb3VzU3RyZWFtKSB7XG4gICAgICBsb2dnZXIoXG4gICAgICAgICdpbmZvJyxcbiAgICAgICAgYFtvblRyYWNrXTogQ2xlYW5pbmcgdXAgcHJldmlvdXMgcmVtb3RlICR7ZS50cmFjay5raW5kfSB0cmFja3MgZm9yIHVzZXJJZDogJHtwYXJ0aWNpcGFudFRvVXBkYXRlLnVzZXJJZH1gLFxuICAgICAgKTtcbiAgICAgIHByZXZpb3VzU3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2goKHQpID0+IHtcbiAgICAgICAgdC5zdG9wKCk7XG4gICAgICAgIHByZXZpb3VzU3RyZWFtLnJlbW92ZVRyYWNrKHQpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHRoaXMuc3RhdGUudXBkYXRlUGFydGljaXBhbnQocGFydGljaXBhbnRUb1VwZGF0ZS5zZXNzaW9uSWQsIHtcbiAgICAgIFtzdHJlYW1LaW5kUHJvcF06IHByaW1hcnlTdHJlYW0sXG4gICAgfSk7XG4gIH07XG5cbiAgcHJpdmF0ZSBvbkljZUNhbmRpZGF0ZSA9IGFzeW5jIChlOiBSVENQZWVyQ29ubmVjdGlvbkljZUV2ZW50KSA9PiB7XG4gICAgY29uc3QgeyBjYW5kaWRhdGUgfSA9IGU7XG4gICAgaWYgKCFjYW5kaWRhdGUpIHtcbiAgICAgIGxvZ2dlcignZGVidWcnLCAnbnVsbCBpY2UgY2FuZGlkYXRlJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgYXdhaXQgdGhpcy5zZnVDbGllbnQuaWNlVHJpY2tsZSh7XG4gICAgICBpY2VDYW5kaWRhdGU6IGdldEljZUNhbmRpZGF0ZShjYW5kaWRhdGUpLFxuICAgICAgcGVlclR5cGU6IFBlZXJUeXBlLlNVQlNDUklCRVIsXG4gICAgfSk7XG4gIH07XG5cbiAgcHJpdmF0ZSBuZWdvdGlhdGUgPSBhc3luYyAoc3Vic2NyaWJlck9mZmVyOiBTdWJzY3JpYmVyT2ZmZXIpID0+IHtcbiAgICBsb2dnZXIoJ2luZm8nLCBgUmVjZWl2ZWQgc3Vic2NyaWJlck9mZmVyYCwgc3Vic2NyaWJlck9mZmVyKTtcblxuICAgIGF3YWl0IHRoaXMucGMuc2V0UmVtb3RlRGVzY3JpcHRpb24oe1xuICAgICAgdHlwZTogJ29mZmVyJyxcbiAgICAgIHNkcDogc3Vic2NyaWJlck9mZmVyLnNkcCxcbiAgICB9KTtcblxuICAgIHRoaXMuc2Z1Q2xpZW50LmljZVRyaWNrbGVCdWZmZXIuc3Vic2NyaWJlckNhbmRpZGF0ZXMuc3Vic2NyaWJlKFxuICAgICAgYXN5bmMgKGNhbmRpZGF0ZSkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IGljZUNhbmRpZGF0ZSA9IEpTT04ucGFyc2UoY2FuZGlkYXRlLmljZUNhbmRpZGF0ZSk7XG4gICAgICAgICAgYXdhaXQgdGhpcy5wYy5hZGRJY2VDYW5kaWRhdGUoaWNlQ2FuZGlkYXRlKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGxvZ2dlcignd2FybicsIGBJQ0UgY2FuZGlkYXRlIGVycm9yYCwgW2UsIGNhbmRpZGF0ZV0pO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICk7XG5cbiAgICBjb25zdCBhbnN3ZXIgPSBhd2FpdCB0aGlzLnBjLmNyZWF0ZUFuc3dlcigpO1xuICAgIGF3YWl0IHRoaXMucGMuc2V0TG9jYWxEZXNjcmlwdGlvbihhbnN3ZXIpO1xuXG4gICAgYXdhaXQgdGhpcy5zZnVDbGllbnQuc2VuZEFuc3dlcih7XG4gICAgICBwZWVyVHlwZTogUGVlclR5cGUuU1VCU0NSSUJFUixcbiAgICAgIHNkcDogYW5zd2VyLnNkcCB8fCAnJyxcbiAgICB9KTtcblxuICAgIHRoaXMuaXNJY2VSZXN0YXJ0aW5nID0gZmFsc2U7XG4gIH07XG5cbiAgcHJpdmF0ZSBvbkljZUNvbm5lY3Rpb25TdGF0ZUNoYW5nZSA9ICgpID0+IHtcbiAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGMuaWNlQ29ubmVjdGlvblN0YXRlO1xuICAgIGxvZ2dlcignZGVidWcnLCBgSUNFIGNvbm5lY3Rpb24gc3RhdGUgY2hhbmdlZGAsIHN0YXRlKTtcblxuICAgIC8vIGRvIG5vdGhpbmcgd2hlbiBJQ0UgaXMgcmVzdGFydGluZ1xuICAgIGlmICh0aGlzLmlzSWNlUmVzdGFydGluZykgcmV0dXJuO1xuXG4gICAgY29uc3QgaGFzTmV0d29ya0Nvbm5lY3Rpb24gPVxuICAgICAgdGhpcy5zdGF0ZS5jYWxsaW5nU3RhdGUgIT09IENhbGxpbmdTdGF0ZS5PRkZMSU5FO1xuXG4gICAgaWYgKHN0YXRlID09PSAnZmFpbGVkJykge1xuICAgICAgbG9nZ2VyKCd3YXJuJywgYEF0dGVtcHRpbmcgdG8gcmVzdGFydCBJQ0VgKTtcbiAgICAgIHRoaXMucmVzdGFydEljZSgpLmNhdGNoKChlKSA9PiB7XG4gICAgICAgIGxvZ2dlcignZXJyb3InLCBgSUNFIHJlc3RhcnQgZmFpbGVkYCwgZSk7XG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKHN0YXRlID09PSAnZGlzY29ubmVjdGVkJyAmJiBoYXNOZXR3b3JrQ29ubmVjdGlvbikge1xuICAgICAgLy8gd2hlbiBpbiBgZGlzY29ubmVjdGVkYCBzdGF0ZSwgdGhlIGJyb3dzZXIgbWF5IHJlY292ZXIgYXV0b21hdGljYWxseSxcbiAgICAgIC8vIGhlbmNlLCB3ZSBkZWxheSB0aGUgSUNFIHJlc3RhcnRcbiAgICAgIGxvZ2dlcignd2FybicsIGBTY2hlZHVsaW5nIElDRSByZXN0YXJ0IGluICR7dGhpcy5pY2VSZXN0YXJ0RGVsYXl9IG1zLmApO1xuICAgICAgdGhpcy5pY2VSZXN0YXJ0VGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAvLyBjaGVjayBpZiB0aGUgc3RhdGUgaXMgc3RpbGwgYGRpc2Nvbm5lY3RlZGAgb3IgYGZhaWxlZGBcbiAgICAgICAgLy8gYXMgdGhlIGNvbm5lY3Rpb24gbWF5IGhhdmUgcmVjb3ZlcmVkIChvciBmYWlsZWQpIGluIHRoZSBtZWFudGltZVxuICAgICAgICBpZiAoXG4gICAgICAgICAgdGhpcy5wYy5pY2VDb25uZWN0aW9uU3RhdGUgPT09ICdkaXNjb25uZWN0ZWQnIHx8XG4gICAgICAgICAgdGhpcy5wYy5pY2VDb25uZWN0aW9uU3RhdGUgPT09ICdmYWlsZWQnXG4gICAgICAgICkge1xuICAgICAgICAgIHRoaXMucmVzdGFydEljZSgpLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgICBsb2dnZXIoJ2Vycm9yJywgYElDRSByZXN0YXJ0IGZhaWxlZGAsIGUpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxvZ2dlcihcbiAgICAgICAgICAgICdkZWJ1ZycsXG4gICAgICAgICAgICBgU2NoZWR1bGVkIElDRSByZXN0YXJ0OiBjb25uZWN0aW9uIHJlY292ZXJlZCwgY2FuY2VsZWQuYCxcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9LCA1MDAwKTtcbiAgICB9XG4gIH07XG5cbiAgcHJpdmF0ZSBvbkljZUdhdGhlcmluZ1N0YXRlQ2hhbmdlID0gKCkgPT4ge1xuICAgIGxvZ2dlcignZGVidWcnLCBgSUNFIGdhdGhlcmluZyBzdGF0ZSBjaGFuZ2VkYCwgdGhpcy5wYy5pY2VHYXRoZXJpbmdTdGF0ZSk7XG4gIH07XG5cbiAgcHJpdmF0ZSBvbkljZUNhbmRpZGF0ZUVycm9yID0gKGU6IEV2ZW50KSA9PiB7XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlID1cbiAgICAgIGUgaW5zdGFuY2VvZiBSVENQZWVyQ29ubmVjdGlvbkljZUVycm9yRXZlbnQgJiZcbiAgICAgIGAke2UuZXJyb3JDb2RlfTogJHtlLmVycm9yVGV4dH1gO1xuICAgIGNvbnN0IGxvZ0xldmVsID1cbiAgICAgIHRoaXMucGMuaWNlQ29ubmVjdGlvblN0YXRlID09PSAnY29ubmVjdGVkJyA/ICdkZWJ1ZycgOiAnZXJyb3InO1xuICAgIGxvZ2dlcihsb2dMZXZlbCwgYElDRSBDYW5kaWRhdGUgZXJyb3JgLCBlcnJvck1lc3NhZ2UpO1xuICB9O1xufVxuIiwiaW1wb3J0IFdlYlNvY2tldCBmcm9tICdpc29tb3JwaGljLXdzJztcbmltcG9ydCB7IFNmdUV2ZW50IH0gZnJvbSAnLi4vZ2VuL3ZpZGVvL3NmdS9ldmVudC9ldmVudHMnO1xuaW1wb3J0IHsgZ2V0TG9nZ2VyIH0gZnJvbSAnLi4vbG9nZ2VyJztcbmltcG9ydCB7IERpc3BhdGNoYWJsZU1lc3NhZ2UsIFNmdUV2ZW50S2luZHMgfSBmcm9tICcuL0Rpc3BhdGNoZXInO1xuXG5leHBvcnQgY29uc3QgY3JlYXRlV2ViU29ja2V0U2lnbmFsQ2hhbm5lbCA9IChvcHRzOiB7XG4gIGVuZHBvaW50OiBzdHJpbmc7XG4gIG9uTWVzc2FnZTogPEsgZXh0ZW5kcyBTZnVFdmVudEtpbmRzPihtZXNzYWdlOiBEaXNwYXRjaGFibGVNZXNzYWdlPEs+KSA9PiB2b2lkO1xufSkgPT4ge1xuICBjb25zdCBsb2dnZXIgPSBnZXRMb2dnZXIoWydzZnUtY2xpZW50J10pO1xuICBjb25zdCB7IGVuZHBvaW50LCBvbk1lc3NhZ2UgfSA9IG9wdHM7XG4gIGNvbnN0IHdzID0gbmV3IFdlYlNvY2tldChlbmRwb2ludCk7XG4gIHdzLmJpbmFyeVR5cGUgPSAnYXJyYXlidWZmZXInOyAvLyBkbyB3ZSBuZWVkIHRoaXM/XG5cbiAgd3MuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCAoZSkgPT4ge1xuICAgIGxvZ2dlcignZXJyb3InLCAnU2lnbmFsaW5nIFdTIGNoYW5uZWwgZXJyb3InLCBlKTtcbiAgfSk7XG5cbiAgd3MuYWRkRXZlbnRMaXN0ZW5lcignY2xvc2UnLCAoZSkgPT4ge1xuICAgIGxvZ2dlcignaW5mbycsICdTaWduYWxpbmcgV1MgY2hhbm5lbCBpcyBjbG9zZWQnLCBlKTtcbiAgfSk7XG5cbiAgd3MuYWRkRXZlbnRMaXN0ZW5lcignb3BlbicsIChlKSA9PiB7XG4gICAgbG9nZ2VyKCdpbmZvJywgJ1NpZ25hbGluZyBXUyBjaGFubmVsIGlzIG9wZW4nLCBlKTtcbiAgfSk7XG5cbiAgd3MuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIChlKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPVxuICAgICAgICBlLmRhdGEgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlclxuICAgICAgICAgID8gU2Z1RXZlbnQuZnJvbUJpbmFyeShuZXcgVWludDhBcnJheShlLmRhdGEpKVxuICAgICAgICAgIDogU2Z1RXZlbnQuZnJvbUpzb25TdHJpbmcoZS5kYXRhLnRvU3RyaW5nKCkpO1xuXG4gICAgICBvbk1lc3NhZ2UobWVzc2FnZSBhcyBEaXNwYXRjaGFibGVNZXNzYWdlPFNmdUV2ZW50S2luZHM+KTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGxvZ2dlcihcbiAgICAgICAgJ2Vycm9yJyxcbiAgICAgICAgJ0ZhaWxlZCB0byBkZWNvZGUgYSBtZXNzYWdlLiBDaGVjayB3aGV0aGVyIHRoZSBQcm90byBtb2RlbHMgbWF0Y2guJyxcbiAgICAgICAgeyBldmVudDogZSwgZXJyb3I6IGVyciB9LFxuICAgICAgKTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gd3M7XG59O1xuIiwiaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSAnLi90eXBlcyc7XG5cbmV4cG9ydCBjb25zdCBzbGVlcCA9IChtOiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+ID0+XG4gIG5ldyBQcm9taXNlKChyKSA9PiBzZXRUaW1lb3V0KHIsIG0pKTtcblxuZXhwb3J0IGZ1bmN0aW9uIGlzRnVuY3Rpb248VD4odmFsdWU6IEZ1bmN0aW9uIHwgVCk6IHZhbHVlIGlzIEZ1bmN0aW9uIHtcbiAgcmV0dXJuIChcbiAgICB2YWx1ZSAmJlxuICAgIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpID09PSAnW29iamVjdCBGdW5jdGlvbl0nIHx8XG4gICAgICAnZnVuY3Rpb24nID09PSB0eXBlb2YgdmFsdWUgfHxcbiAgICAgIHZhbHVlIGluc3RhbmNlb2YgRnVuY3Rpb24pXG4gICk7XG59XG5cbi8qKlxuICogQSBtYXAgb2Yga25vd24gZXJyb3IgY29kZXMuXG4gKi9cbmV4cG9ydCBjb25zdCBLbm93bkNvZGVzID0ge1xuICBUT0tFTl9FWFBJUkVEOiA0MCxcbiAgV1NfQ0xPU0VEX1NVQ0NFU1M6IDEwMDAsXG4gIFdTX0NMT1NFRF9BQlJVUFRMWTogMTAwNixcbiAgV1NfUE9MSUNZX1ZJT0xBVElPTjogMTAwOCxcbn07XG5cbi8qKlxuICogcmV0cnlJbnRlcnZhbCAtIEEgcmV0cnkgaW50ZXJ2YWwgd2hpY2ggaW5jcmVhc2VzIGFjYyB0byBudW1iZXIgb2YgZmFpbHVyZXNcbiAqXG4gKiBAcmV0dXJuIHtudW1iZXJ9IER1cmF0aW9uIHRvIHdhaXQgaW4gbWlsbGlzZWNvbmRzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZXRyeUludGVydmFsKG51bWJlck9mRmFpbHVyZXM6IG51bWJlcikge1xuICAvLyB0cnkgdG8gcmVjb25uZWN0IGluIDAuMjUtNSBzZWNvbmRzIChyYW5kb20gdG8gc3ByZWFkIG91dCB0aGUgbG9hZCBmcm9tIGZhaWx1cmVzKVxuICBjb25zdCBtYXggPSBNYXRoLm1pbig1MDAgKyBudW1iZXJPZkZhaWx1cmVzICogMjAwMCwgNTAwMCk7XG4gIGNvbnN0IG1pbiA9IE1hdGgubWluKE1hdGgubWF4KDI1MCwgKG51bWJlck9mRmFpbHVyZXMgLSAxKSAqIDIwMDApLCA1MDAwKTtcbiAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4pICsgbWluKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJhbmRvbUlkKCkge1xuICByZXR1cm4gZ2VuZXJhdGVVVUlEdjQoKTtcbn1cblxuZnVuY3Rpb24gaGV4KGJ5dGVzOiBVaW50OEFycmF5KTogc3RyaW5nIHtcbiAgbGV0IHMgPSAnJztcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBieXRlcy5sZW5ndGg7IGkrKykge1xuICAgIHMgKz0gYnl0ZXNbaV0udG9TdHJpbmcoMTYpLnBhZFN0YXJ0KDIsICcwJyk7XG4gIH1cbiAgcmV0dXJuIHM7XG59XG5cbi8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM0MTIyXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVVVUlEdjQoKSB7XG4gIGNvbnN0IGJ5dGVzID0gZ2V0UmFuZG9tQnl0ZXMoMTYpO1xuICBieXRlc1s2XSA9IChieXRlc1s2XSAmIDB4MGYpIHwgMHg0MDsgLy8gdmVyc2lvblxuICBieXRlc1s4XSA9IChieXRlc1s4XSAmIDB4YmYpIHwgMHg4MDsgLy8gdmFyaWFudFxuXG4gIHJldHVybiAoXG4gICAgaGV4KGJ5dGVzLnN1YmFycmF5KDAsIDQpKSArXG4gICAgJy0nICtcbiAgICBoZXgoYnl0ZXMuc3ViYXJyYXkoNCwgNikpICtcbiAgICAnLScgK1xuICAgIGhleChieXRlcy5zdWJhcnJheSg2LCA4KSkgK1xuICAgICctJyArXG4gICAgaGV4KGJ5dGVzLnN1YmFycmF5KDgsIDEwKSkgK1xuICAgICctJyArXG4gICAgaGV4KGJ5dGVzLnN1YmFycmF5KDEwLCAxNikpXG4gICk7XG59XG5cbmZ1bmN0aW9uIGdldFJhbmRvbVZhbHVlc1dpdGhNYXRoUmFuZG9tKGJ5dGVzOiBVaW50OEFycmF5KTogdm9pZCB7XG4gIGNvbnN0IG1heCA9IE1hdGgucG93KDIsICg4ICogYnl0ZXMuYnl0ZUxlbmd0aCkgLyBieXRlcy5sZW5ndGgpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGJ5dGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgYnl0ZXNbaV0gPSBNYXRoLnJhbmRvbSgpICogbWF4O1xuICB9XG59XG5kZWNsYXJlIGNvbnN0IG1zQ3J5cHRvOiBDcnlwdG87XG5cbmNvbnN0IGdldFJhbmRvbVZhbHVlcyA9ICgoKSA9PiB7XG4gIGlmIChcbiAgICB0eXBlb2YgY3J5cHRvICE9PSAndW5kZWZpbmVkJyAmJlxuICAgIHR5cGVvZiBjcnlwdG8/LmdldFJhbmRvbVZhbHVlcyAhPT0gJ3VuZGVmaW5lZCdcbiAgKSB7XG4gICAgcmV0dXJuIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMuYmluZChjcnlwdG8pO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBtc0NyeXB0byAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gbXNDcnlwdG8uZ2V0UmFuZG9tVmFsdWVzLmJpbmQobXNDcnlwdG8pO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBnZXRSYW5kb21WYWx1ZXNXaXRoTWF0aFJhbmRvbTtcbiAgfVxufSkoKTtcblxuZnVuY3Rpb24gZ2V0UmFuZG9tQnl0ZXMobGVuZ3RoOiBudW1iZXIpOiBVaW50OEFycmF5IHtcbiAgY29uc3QgYnl0ZXMgPSBuZXcgVWludDhBcnJheShsZW5ndGgpO1xuICBnZXRSYW5kb21WYWx1ZXMoYnl0ZXMpO1xuICByZXR1cm4gYnl0ZXM7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjb252ZXJ0RXJyb3JUb0pzb24oZXJyOiBFcnJvcikge1xuICBjb25zdCBqc29uT2JqID0ge30gYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj47XG5cbiAgaWYgKCFlcnIpIHJldHVybiBqc29uT2JqO1xuXG4gIHRyeSB7XG4gICAgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoZXJyKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgIGpzb25PYmpba2V5XSA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZXJyLCBrZXkpO1xuICAgIH0pO1xuICB9IGNhdGNoIChfKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGVycm9yOiAnZmFpbGVkIHRvIHNlcmlhbGl6ZSB0aGUgZXJyb3InLFxuICAgIH07XG4gIH1cblxuICByZXR1cm4ganNvbk9iajtcbn1cblxuLyoqXG4gKiBpc09ubGluZSBzYWZlbHkgcmV0dXJuIHRoZSBuYXZpZ2F0b3Iub25saW5lIHZhbHVlIGZvciBicm93c2VyIGVudlxuICogaWYgbmF2aWdhdG9yIGlzIG5vdCBpbiBnbG9iYWwgb2JqZWN0LCBpdCBhbHdheXMgcmV0dXJuIHRydWVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzT25saW5lKGxvZ2dlcjogTG9nZ2VyKSB7XG4gIGNvbnN0IG5hdiA9XG4gICAgdHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgID8gbmF2aWdhdG9yXG4gICAgICA6IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5uYXZpZ2F0b3JcbiAgICAgID8gd2luZG93Lm5hdmlnYXRvclxuICAgICAgOiB1bmRlZmluZWQ7XG5cbiAgaWYgKCFuYXYpIHtcbiAgICBsb2dnZXIoXG4gICAgICAnd2FybicsXG4gICAgICAnaXNPbmxpbmUgZmFpbGVkIHRvIGFjY2VzcyB3aW5kb3cubmF2aWdhdG9yIGFuZCBhc3N1bWUgYnJvd3NlciBpcyBvbmxpbmUnLFxuICAgICk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvLyBSTiBuYXZpZ2F0b3IgaGFzIHVuZGVmaW5lZCBmb3Igb25MaW5lXG4gIGlmICh0eXBlb2YgbmF2Lm9uTGluZSAhPT0gJ2Jvb2xlYW4nKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICByZXR1cm4gbmF2Lm9uTGluZTtcbn1cblxuLyoqXG4gKiBsaXN0ZW5Gb3JDb25uZWN0aW9uQ2hhbmdlcyAtIEFkZHMgYW4gZXZlbnQgbGlzdGVuZXIgZmlyZWQgb24gYnJvd3NlciBnb2luZyBvbmxpbmUgb3Igb2ZmbGluZVxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkQ29ubmVjdGlvbkV2ZW50TGlzdGVuZXJzKGNiOiAoZTogRXZlbnQpID0+IHZvaWQpIHtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKSB7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ29mZmxpbmUnLCBjYik7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ29ubGluZScsIGNiKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlQ29ubmVjdGlvbkV2ZW50TGlzdGVuZXJzKGNiOiAoZTogRXZlbnQpID0+IHZvaWQpIHtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKSB7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ29mZmxpbmUnLCBjYik7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ29ubGluZScsIGNiKTtcbiAgfVxufVxuIiwiaW1wb3J0IHR5cGUgeyBXZWJTb2NrZXQgfSBmcm9tICd3cyc7XG5pbXBvcnQgdHlwZSB7XG4gIEZpbmlzaGVkVW5hcnlDYWxsLFxuICBNZXRob2RJbmZvLFxuICBOZXh0VW5hcnlGbixcbiAgUnBjSW50ZXJjZXB0b3IsXG4gIFJwY09wdGlvbnMsXG4gIFVuYXJ5Q2FsbCxcbn0gZnJvbSAnQHByb3RvYnVmLXRzL3J1bnRpbWUtcnBjJztcbmltcG9ydCB7IFNpZ25hbFNlcnZlckNsaWVudCB9IGZyb20gJy4vZ2VuL3ZpZGVvL3NmdS9zaWduYWxfcnBjL3NpZ25hbC5jbGllbnQnO1xuaW1wb3J0IHsgY3JlYXRlU2lnbmFsQ2xpZW50LCB3aXRoSGVhZGVycyB9IGZyb20gJy4vcnBjJztcbmltcG9ydCB7XG4gIGNyZWF0ZVdlYlNvY2tldFNpZ25hbENoYW5uZWwsXG4gIERpc3BhdGNoZXIsXG4gIEljZVRyaWNrbGVCdWZmZXIsXG59IGZyb20gJy4vcnRjJztcbmltcG9ydCB7IEpvaW5SZXF1ZXN0LCBTZnVSZXF1ZXN0IH0gZnJvbSAnLi9nZW4vdmlkZW8vc2Z1L2V2ZW50L2V2ZW50cyc7XG5pbXBvcnQge1xuICBJQ0VSZXN0YXJ0UmVxdWVzdCxcbiAgU2VuZEFuc3dlclJlcXVlc3QsXG4gIFNldFB1Ymxpc2hlclJlcXVlc3QsXG4gIFRyYWNrU3Vic2NyaXB0aW9uRGV0YWlscyxcbiAgVXBkYXRlTXV0ZVN0YXRlc1JlcXVlc3QsXG59IGZyb20gJy4vZ2VuL3ZpZGVvL3NmdS9zaWduYWxfcnBjL3NpZ25hbCc7XG5pbXBvcnQge1xuICBFcnJvciBhcyBTZnVFcnJvcixcbiAgSUNFVHJpY2tsZSxcbiAgVHJhY2tUeXBlLFxufSBmcm9tICcuL2dlbi92aWRlby9zZnUvbW9kZWxzL21vZGVscyc7XG5pbXBvcnQge1xuICBnZW5lcmF0ZVVVSUR2NCxcbiAgcmV0cnlJbnRlcnZhbCxcbiAgc2xlZXAsXG59IGZyb20gJy4vY29vcmRpbmF0b3IvY29ubmVjdGlvbi91dGlscyc7XG5pbXBvcnQgeyBTRlVSZXNwb25zZSB9IGZyb20gJy4vZ2VuL2Nvb3JkaW5hdG9yJztcbmltcG9ydCB7IExvZ2dlciB9IGZyb20gJy4vY29vcmRpbmF0b3IvY29ubmVjdGlvbi90eXBlcyc7XG5pbXBvcnQgeyBnZXRMb2dnZXIgfSBmcm9tICcuL2xvZ2dlcic7XG5cbmV4cG9ydCB0eXBlIFN0cmVhbVNmdUNsaWVudENvbnN0cnVjdG9yID0ge1xuICAvKipcbiAgICogVGhlIGV2ZW50IGRpc3BhdGNoZXIgaW5zdGFuY2UgdG8gdXNlLlxuICAgKi9cbiAgZGlzcGF0Y2hlcjogRGlzcGF0Y2hlcjtcblxuICAvKipcbiAgICogVGhlIFNGVSBzZXJ2ZXIgdG8gY29ubmVjdCB0by5cbiAgICovXG4gIHNmdVNlcnZlcjogU0ZVUmVzcG9uc2U7XG5cbiAgLyoqXG4gICAqIFRoZSBKV1QgdG9rZW4gdG8gdXNlIGZvciBhdXRoZW50aWNhdGlvbi5cbiAgICovXG4gIHRva2VuOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIEFuIG9wdGlvbmFsIGBzZXNzaW9uSWRgIHRvIHVzZSBmb3IgdGhlIGNvbm5lY3Rpb24uXG4gICAqIElmIG5vdCBwcm92aWRlZCwgYSByYW5kb20gVVVJRHY0IHdpbGwgYmUgZ2VuZXJhdGVkLlxuICAgKi9cbiAgc2Vzc2lvbklkPzogc3RyaW5nO1xufTtcblxuLyoqXG4gKiBUaGUgY2xpZW50IHVzZWQgZm9yIGV4Y2hhbmdpbmcgaW5mb3JtYXRpb24gd2l0aCB0aGUgU0ZVLlxuICovXG5leHBvcnQgY2xhc3MgU3RyZWFtU2Z1Q2xpZW50IHtcbiAgLyoqXG4gICAqIEEgYnVmZmVyIGZvciBJQ0UgQ2FuZGlkYXRlcyB0aGF0IGFyZSByZWNlaXZlZCBiZWZvcmVcbiAgICogdGhlIFBlZXJDb25uZWN0aW9ucyBhcmUgcmVhZHkgdG8gaGFuZGxlIHRoZW0uXG4gICAqL1xuICByZWFkb25seSBpY2VUcmlja2xlQnVmZmVyID0gbmV3IEljZVRyaWNrbGVCdWZmZXIoKTtcbiAgLyoqXG4gICAqIFRoZSBgc2Vzc2lvbklkYCBvZiB0aGUgY3VycmVudGx5IGNvbm5lY3RlZCBwYXJ0aWNpcGFudC5cbiAgICovXG4gIHJlYWRvbmx5IHNlc3Npb25JZDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgYGVkZ2VOYW1lYCByZXByZXNlbnRpbmcgdGhlIGVkZ2UgdGhlIGNsaWVudCBpcyBjb25uZWN0ZWQgdG8uXG4gICAqL1xuICByZWFkb25seSBlZGdlTmFtZTogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgY3VycmVudCB0b2tlbiB1c2VkIGZvciBhdXRoZW50aWNhdGluZyBhZ2FpbnN0IHRoZSBTRlUuXG4gICAqL1xuICByZWFkb25seSB0b2tlbjogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgU0ZVIHNlcnZlciBkZXRhaWxzIHRoZSBjdXJyZW50IGNsaWVudCBpcyBjb25uZWN0ZWQgdG8uXG4gICAqL1xuICByZWFkb25seSBzZnVTZXJ2ZXI6IFNGVVJlc3BvbnNlO1xuXG4gIC8qKlxuICAgKiBIb2xkcyB0aGUgY3VycmVudCBXZWJTb2NrZXQgY29ubmVjdGlvbiB0byB0aGUgU0ZVLlxuICAgKi9cbiAgc2lnbmFsV3M6IFdlYlNvY2tldDtcblxuICAvKipcbiAgICogUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIFdlYlNvY2tldCBjb25uZWN0aW9uIGlzIHJlYWR5IChvcGVuKS5cbiAgICovXG4gIHNpZ25hbFJlYWR5OiBQcm9taXNlPFdlYlNvY2tldD47XG5cbiAgLyoqXG4gICAqIEEgZmxhZyBpbmRpY2F0aW5nIHdoZXRoZXIgdGhlIGNsaWVudCBpcyBjdXJyZW50bHkgbWlncmF0aW5nIGF3YXlcbiAgICogZnJvbSB0aGlzIFNGVS5cbiAgICovXG4gIGlzTWlncmF0aW5nQXdheSA9IGZhbHNlO1xuXG4gIC8qKlxuICAgKiBBIGZsYWcgaW5kaWNhdGluZyB0aGF0IHRoZSBjbGllbnQgY29ubmVjdGlvbiBpcyBicm9rZW4gZm9yIHRoZSBjdXJyZW50XG4gICAqIGNsaWVudCBhbmQgdGhhdCBhIGZhc3QtcmVjb25uZWN0IHdpdGggYSBuZXcgY2xpZW50IHNob3VsZCBiZSBhdHRlbXB0ZWQuXG4gICAqL1xuICBpc0Zhc3RSZWNvbm5lY3RpbmcgPSBmYWxzZTtcblxuICBwcml2YXRlIHJlYWRvbmx5IHJwYzogU2lnbmFsU2VydmVyQ2xpZW50O1xuICBwcml2YXRlIGtlZXBBbGl2ZUludGVydmFsPzogTm9kZUpTLlRpbWVvdXQ7XG4gIHByaXZhdGUgY29ubmVjdGlvbkNoZWNrVGltZW91dD86IE5vZGVKUy5UaW1lb3V0O1xuICBwcml2YXRlIHBpbmdJbnRlcnZhbEluTXMgPSAxMCAqIDEwMDA7XG4gIHByaXZhdGUgdW5oZWFsdGh5VGltZW91dEluTXMgPSB0aGlzLnBpbmdJbnRlcnZhbEluTXMgKyA1ICogMTAwMDtcbiAgcHJpdmF0ZSBsYXN0TWVzc2FnZVRpbWVzdGFtcD86IERhdGU7XG4gIHByaXZhdGUgcmVhZG9ubHkgdW5zdWJzY3JpYmVJY2VUcmlja2xlOiAoKSA9PiB2b2lkO1xuICBwcml2YXRlIHJlYWRvbmx5IGxvZ2dlcjogTG9nZ2VyO1xuXG4gIC8qKlxuICAgKiBUaGUgbm9ybWFsIGNsb3N1cmUgY29kZS4gVXNlZCBmb3IgY29udHJvbGxlZCBzaHV0ZG93bnMuXG4gICAqL1xuICBzdGF0aWMgTk9STUFMX0NMT1NVUkUgPSAxMDAwO1xuICAvKipcbiAgICogVGhlIGVycm9yIGNvZGUgdXNlZCB3aGVuIHRoZSBTRlUgY29ubmVjdGlvbiBpcyB1bmhlYWx0aHkuXG4gICAqIFVzdWFsbHksIHRoaXMgbWVhbnMgdGhhdCBubyBtZXNzYWdlIGhhcyBiZWVuIHJlY2VpdmVkIGZyb20gdGhlIFNGVSBmb3JcbiAgICogYSBjZXJ0YWluIGFtb3VudCBvZiB0aW1lIChgY29ubmVjdGlvbkNoZWNrVGltZW91dGApLlxuICAgKi9cbiAgc3RhdGljIEVSUk9SX0NPTk5FQ1RJT05fVU5IRUFMVEhZID0gNDAwMTtcblxuICAvKipcbiAgICogVGhlIGVycm9yIGNvZGUgdXNlZCB3aGVuIHRoZSBTRlUgY29ubmVjdGlvbiBpcyBicm9rZW4uXG4gICAqIFVzdWFsbHksIHRoaXMgbWVhbnMgdGhhdCB0aGUgV1MgY29ubmVjdGlvbiBoYXMgYmVlbiBjbG9zZWQgdW5leHBlY3RlZGx5LlxuICAgKiBUaGlzIGVycm9yIGNvZGUgaXMgdXNlZCB0byBhbm5vdW5jZSBhIGZhc3QtcmVjb25uZWN0LlxuICAgKi9cbiAgc3RhdGljIEVSUk9SX0NPTk5FQ1RJT05fQlJPS0VOID0gNDAwMjsgLy8gdXNlZCBpbiBmYXN0LXJlY29ubmVjdHNcblxuICAvKipcbiAgICogQ29uc3RydWN0cyBhIG5ldyBTRlUgY2xpZW50LlxuICAgKlxuICAgKiBAcGFyYW0gZGlzcGF0Y2hlciB0aGUgZXZlbnQgZGlzcGF0Y2hlciB0byB1c2UuXG4gICAqIEBwYXJhbSBzZnVTZXJ2ZXIgdGhlIFNGVSBzZXJ2ZXIgdG8gY29ubmVjdCB0by5cbiAgICogQHBhcmFtIHRva2VuIHRoZSBKV1QgdG9rZW4gdG8gdXNlIGZvciBhdXRoZW50aWNhdGlvbi5cbiAgICogQHBhcmFtIHNlc3Npb25JZCB0aGUgYHNlc3Npb25JZGAgb2YgdGhlIGN1cnJlbnRseSBjb25uZWN0ZWQgcGFydGljaXBhbnQuXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih7XG4gICAgZGlzcGF0Y2hlcixcbiAgICBzZnVTZXJ2ZXIsXG4gICAgdG9rZW4sXG4gICAgc2Vzc2lvbklkLFxuICB9OiBTdHJlYW1TZnVDbGllbnRDb25zdHJ1Y3Rvcikge1xuICAgIHRoaXMuc2Vzc2lvbklkID0gc2Vzc2lvbklkIHx8IGdlbmVyYXRlVVVJRHY0KCk7XG4gICAgdGhpcy5zZnVTZXJ2ZXIgPSBzZnVTZXJ2ZXI7XG4gICAgdGhpcy5lZGdlTmFtZSA9IHNmdVNlcnZlci5lZGdlX25hbWU7XG4gICAgdGhpcy50b2tlbiA9IHRva2VuO1xuICAgIHRoaXMubG9nZ2VyID0gZ2V0TG9nZ2VyKFsnc2Z1LWNsaWVudCddKTtcbiAgICBjb25zdCBsb2dJbnRlcmNlcHRvcjogUnBjSW50ZXJjZXB0b3IgPSB7XG4gICAgICBpbnRlcmNlcHRVbmFyeTogKFxuICAgICAgICBuZXh0OiBOZXh0VW5hcnlGbixcbiAgICAgICAgbWV0aG9kOiBNZXRob2RJbmZvLFxuICAgICAgICBpbnB1dDogb2JqZWN0LFxuICAgICAgICBvcHRpb25zOiBScGNPcHRpb25zLFxuICAgICAgKTogVW5hcnlDYWxsID0+IHtcbiAgICAgICAgdGhpcy5sb2dnZXIoJ3RyYWNlJywgYENhbGxpbmcgU0ZVIFJQQyBtZXRob2QgJHttZXRob2QubmFtZX1gLCB7XG4gICAgICAgICAgaW5wdXQsXG4gICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBuZXh0KG1ldGhvZCwgaW5wdXQsIG9wdGlvbnMpO1xuICAgICAgfSxcbiAgICB9O1xuICAgIHRoaXMucnBjID0gY3JlYXRlU2lnbmFsQ2xpZW50KHtcbiAgICAgIGJhc2VVcmw6IHNmdVNlcnZlci51cmwsXG4gICAgICBpbnRlcmNlcHRvcnM6IFtcbiAgICAgICAgd2l0aEhlYWRlcnMoe1xuICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0b2tlbn1gLFxuICAgICAgICB9KSxcbiAgICAgICAgbG9nSW50ZXJjZXB0b3IsXG4gICAgICBdLFxuICAgIH0pO1xuXG4gICAgLy8gU3BlY2lhbCBoYW5kbGluZyBmb3IgdGhlIElDRVRyaWNrbGUga2luZCBvZiBldmVudHMuXG4gICAgLy8gVGhlc2UgZXZlbnRzIG1pZ2h0IGJlIHRyaWdnZXJlZCBieSB0aGUgU0ZVIGJlZm9yZSB0aGUgaW5pdGlhbCBSVENcbiAgICAvLyBjb25uZWN0aW9uIGlzIGVzdGFibGlzaGVkLiBJbiB0aGF0IGNhc2UsIHRob3NlIGV2ZW50cyAoSUNFIGNhbmRpZGF0ZXMpXG4gICAgLy8gbmVlZCB0byBiZSBidWZmZXJlZCBhbmQgbGF0ZXIgYWRkZWQgdG8gdGhlIGFwcHJvcHJpYXRlIFBlZXJDb25uZWN0aW9uXG4gICAgLy8gb25jZSB0aGUgcmVtb3RlRGVzY3JpcHRpb24gaXMga25vd24gYW5kIHNldC5cbiAgICB0aGlzLnVuc3Vic2NyaWJlSWNlVHJpY2tsZSA9IGRpc3BhdGNoZXIub24oJ2ljZVRyaWNrbGUnLCAoaWNlVHJpY2tsZSkgPT4ge1xuICAgICAgdGhpcy5pY2VUcmlja2xlQnVmZmVyLnB1c2goaWNlVHJpY2tsZSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnNpZ25hbFdzID0gY3JlYXRlV2ViU29ja2V0U2lnbmFsQ2hhbm5lbCh7XG4gICAgICBlbmRwb2ludDogc2Z1U2VydmVyLndzX2VuZHBvaW50LFxuICAgICAgb25NZXNzYWdlOiAobWVzc2FnZSkgPT4ge1xuICAgICAgICB0aGlzLmxhc3RNZXNzYWdlVGltZXN0YW1wID0gbmV3IERhdGUoKTtcbiAgICAgICAgdGhpcy5zY2hlZHVsZUNvbm5lY3Rpb25DaGVjaygpO1xuICAgICAgICBkaXNwYXRjaGVyLmRpc3BhdGNoKG1lc3NhZ2UpO1xuICAgICAgfSxcbiAgICB9KTtcblxuICAgIHRoaXMuc2lnbmFsUmVhZHkgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgY29uc3Qgb25PcGVuID0gKCkgPT4ge1xuICAgICAgICB0aGlzLnNpZ25hbFdzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ29wZW4nLCBvbk9wZW4pO1xuICAgICAgICB0aGlzLmtlZXBBbGl2ZSgpO1xuICAgICAgICByZXNvbHZlKHRoaXMuc2lnbmFsV3MpO1xuICAgICAgfTtcbiAgICAgIHRoaXMuc2lnbmFsV3MuYWRkRXZlbnRMaXN0ZW5lcignb3BlbicsIG9uT3Blbik7XG4gICAgfSk7XG4gIH1cblxuICBjbG9zZSA9IChcbiAgICBjb2RlOiBudW1iZXIgPSBTdHJlYW1TZnVDbGllbnQuTk9STUFMX0NMT1NVUkUsXG4gICAgcmVhc29uOiBzdHJpbmcgPSAnanMtY2xpZW50OiByZXF1ZXN0ZWQgc2lnbmFsIGNvbm5lY3Rpb24gY2xvc2UnLFxuICApID0+IHtcbiAgICB0aGlzLmxvZ2dlcignZGVidWcnLCAnQ2xvc2luZyBTRlUgV1MgY29ubmVjdGlvbicsIGNvZGUsIHJlYXNvbik7XG4gICAgaWYgKHRoaXMuc2lnbmFsV3MucmVhZHlTdGF0ZSAhPT0gdGhpcy5zaWduYWxXcy5DTE9TRUQpIHtcbiAgICAgIHRoaXMuc2lnbmFsV3MuY2xvc2UoY29kZSwgcmVhc29uKTtcbiAgICB9XG5cbiAgICB0aGlzLnVuc3Vic2NyaWJlSWNlVHJpY2tsZSgpO1xuICAgIGNsZWFySW50ZXJ2YWwodGhpcy5rZWVwQWxpdmVJbnRlcnZhbCk7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMuY29ubmVjdGlvbkNoZWNrVGltZW91dCk7XG4gIH07XG5cbiAgdXBkYXRlU3Vic2NyaXB0aW9ucyA9IGFzeW5jIChzdWJzY3JpcHRpb25zOiBUcmFja1N1YnNjcmlwdGlvbkRldGFpbHNbXSkgPT4ge1xuICAgIHJldHVybiByZXRyeWFibGUoXG4gICAgICAoKSA9PlxuICAgICAgICB0aGlzLnJwYy51cGRhdGVTdWJzY3JpcHRpb25zKHtcbiAgICAgICAgICBzZXNzaW9uSWQ6IHRoaXMuc2Vzc2lvbklkLFxuICAgICAgICAgIHRyYWNrczogc3Vic2NyaXB0aW9ucyxcbiAgICAgICAgfSksXG4gICAgICB0aGlzLmxvZ2dlcixcbiAgICApO1xuICB9O1xuXG4gIHNldFB1Ymxpc2hlciA9IGFzeW5jIChkYXRhOiBPbWl0PFNldFB1Ymxpc2hlclJlcXVlc3QsICdzZXNzaW9uSWQnPikgPT4ge1xuICAgIHJldHVybiByZXRyeWFibGUoXG4gICAgICAoKSA9PlxuICAgICAgICB0aGlzLnJwYy5zZXRQdWJsaXNoZXIoe1xuICAgICAgICAgIC4uLmRhdGEsXG4gICAgICAgICAgc2Vzc2lvbklkOiB0aGlzLnNlc3Npb25JZCxcbiAgICAgICAgfSksXG4gICAgICB0aGlzLmxvZ2dlcixcbiAgICApO1xuICB9O1xuXG4gIHNlbmRBbnN3ZXIgPSBhc3luYyAoZGF0YTogT21pdDxTZW5kQW5zd2VyUmVxdWVzdCwgJ3Nlc3Npb25JZCc+KSA9PiB7XG4gICAgcmV0dXJuIHJldHJ5YWJsZShcbiAgICAgICgpID0+XG4gICAgICAgIHRoaXMucnBjLnNlbmRBbnN3ZXIoe1xuICAgICAgICAgIC4uLmRhdGEsXG4gICAgICAgICAgc2Vzc2lvbklkOiB0aGlzLnNlc3Npb25JZCxcbiAgICAgICAgfSksXG4gICAgICB0aGlzLmxvZ2dlcixcbiAgICApO1xuICB9O1xuXG4gIGljZVRyaWNrbGUgPSBhc3luYyAoZGF0YTogT21pdDxJQ0VUcmlja2xlLCAnc2Vzc2lvbklkJz4pID0+IHtcbiAgICByZXR1cm4gcmV0cnlhYmxlKFxuICAgICAgKCkgPT5cbiAgICAgICAgdGhpcy5ycGMuaWNlVHJpY2tsZSh7XG4gICAgICAgICAgLi4uZGF0YSxcbiAgICAgICAgICBzZXNzaW9uSWQ6IHRoaXMuc2Vzc2lvbklkLFxuICAgICAgICB9KSxcbiAgICAgIHRoaXMubG9nZ2VyLFxuICAgICk7XG4gIH07XG5cbiAgaWNlUmVzdGFydCA9IGFzeW5jIChkYXRhOiBPbWl0PElDRVJlc3RhcnRSZXF1ZXN0LCAnc2Vzc2lvbklkJz4pID0+IHtcbiAgICByZXR1cm4gcmV0cnlhYmxlKFxuICAgICAgKCkgPT5cbiAgICAgICAgdGhpcy5ycGMuaWNlUmVzdGFydCh7XG4gICAgICAgICAgLi4uZGF0YSxcbiAgICAgICAgICBzZXNzaW9uSWQ6IHRoaXMuc2Vzc2lvbklkLFxuICAgICAgICB9KSxcbiAgICAgIHRoaXMubG9nZ2VyLFxuICAgICk7XG4gIH07XG5cbiAgdXBkYXRlTXV0ZVN0YXRlID0gYXN5bmMgKHRyYWNrVHlwZTogVHJhY2tUeXBlLCBtdXRlZDogYm9vbGVhbikgPT4ge1xuICAgIHJldHVybiB0aGlzLnVwZGF0ZU11dGVTdGF0ZXMoe1xuICAgICAgbXV0ZVN0YXRlczogW1xuICAgICAgICB7XG4gICAgICAgICAgdHJhY2tUeXBlLFxuICAgICAgICAgIG11dGVkLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICB9KTtcbiAgfTtcblxuICB1cGRhdGVNdXRlU3RhdGVzID0gYXN5bmMgKFxuICAgIGRhdGE6IE9taXQ8VXBkYXRlTXV0ZVN0YXRlc1JlcXVlc3QsICdzZXNzaW9uSWQnPixcbiAgKSA9PiB7XG4gICAgcmV0dXJuIHJldHJ5YWJsZShcbiAgICAgICgpID0+XG4gICAgICAgIHRoaXMucnBjLnVwZGF0ZU11dGVTdGF0ZXMoe1xuICAgICAgICAgIC4uLmRhdGEsXG4gICAgICAgICAgc2Vzc2lvbklkOiB0aGlzLnNlc3Npb25JZCxcbiAgICAgICAgfSksXG4gICAgICB0aGlzLmxvZ2dlcixcbiAgICApO1xuICB9O1xuXG4gIGpvaW4gPSBhc3luYyAoZGF0YTogT21pdDxKb2luUmVxdWVzdCwgJ3Nlc3Npb25JZCcgfCAndG9rZW4nPikgPT4ge1xuICAgIGNvbnN0IGpvaW5SZXF1ZXN0ID0gSm9pblJlcXVlc3QuY3JlYXRlKHtcbiAgICAgIC4uLmRhdGEsXG4gICAgICBzZXNzaW9uSWQ6IHRoaXMuc2Vzc2lvbklkLFxuICAgICAgdG9rZW46IHRoaXMudG9rZW4sXG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXMuc2VuZChcbiAgICAgIFNmdVJlcXVlc3QuY3JlYXRlKHtcbiAgICAgICAgcmVxdWVzdFBheWxvYWQ6IHtcbiAgICAgICAgICBvbmVvZktpbmQ6ICdqb2luUmVxdWVzdCcsXG4gICAgICAgICAgam9pblJlcXVlc3QsXG4gICAgICAgIH0sXG4gICAgICB9KSxcbiAgICApO1xuICB9O1xuXG4gIHNlbmQgPSBhc3luYyAobWVzc2FnZTogU2Z1UmVxdWVzdCkgPT4ge1xuICAgIHJldHVybiB0aGlzLnNpZ25hbFJlYWR5LnRoZW4oKHNpZ25hbCkgPT4ge1xuICAgICAgaWYgKHNpZ25hbC5yZWFkeVN0YXRlICE9PSBzaWduYWwuT1BFTikgcmV0dXJuO1xuICAgICAgdGhpcy5sb2dnZXIoXG4gICAgICAgICdkZWJ1ZycsXG4gICAgICAgIGBTZW5kaW5nIG1lc3NhZ2UgdG86ICR7dGhpcy5lZGdlTmFtZX1gLFxuICAgICAgICBTZnVSZXF1ZXN0LnRvSnNvbihtZXNzYWdlKSxcbiAgICAgICk7XG4gICAgICBzaWduYWwuc2VuZChTZnVSZXF1ZXN0LnRvQmluYXJ5KG1lc3NhZ2UpKTtcbiAgICB9KTtcbiAgfTtcblxuICBwcml2YXRlIGtlZXBBbGl2ZSA9ICgpID0+IHtcbiAgICBjbGVhckludGVydmFsKHRoaXMua2VlcEFsaXZlSW50ZXJ2YWwpO1xuICAgIHRoaXMua2VlcEFsaXZlSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICB0aGlzLmxvZ2dlcigndHJhY2UnLCAnU2VuZGluZyBoZWFsdGhDaGVja1JlcXVlc3QgdG8gU0ZVJyk7XG4gICAgICBjb25zdCBtZXNzYWdlID0gU2Z1UmVxdWVzdC5jcmVhdGUoe1xuICAgICAgICByZXF1ZXN0UGF5bG9hZDoge1xuICAgICAgICAgIG9uZW9mS2luZDogJ2hlYWx0aENoZWNrUmVxdWVzdCcsXG4gICAgICAgICAgaGVhbHRoQ2hlY2tSZXF1ZXN0OiB7fSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgICAgdGhpcy5zZW5kKG1lc3NhZ2UpLmNhdGNoKChlKSA9PiB7XG4gICAgICAgIHRoaXMubG9nZ2VyKCdlcnJvcicsICdFcnJvciBzZW5kaW5nIGhlYWx0aENoZWNrUmVxdWVzdCB0byBTRlUnLCBlKTtcbiAgICAgIH0pO1xuICAgIH0sIHRoaXMucGluZ0ludGVydmFsSW5Ncyk7XG4gIH07XG5cbiAgcHJpdmF0ZSBzY2hlZHVsZUNvbm5lY3Rpb25DaGVjayA9ICgpID0+IHtcbiAgICBjbGVhclRpbWVvdXQodGhpcy5jb25uZWN0aW9uQ2hlY2tUaW1lb3V0KTtcbiAgICB0aGlzLmNvbm5lY3Rpb25DaGVja1RpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGlmICh0aGlzLmxhc3RNZXNzYWdlVGltZXN0YW1wKSB7XG4gICAgICAgIGNvbnN0IHRpbWVTaW5jZUxhc3RNZXNzYWdlID1cbiAgICAgICAgICBuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIHRoaXMubGFzdE1lc3NhZ2VUaW1lc3RhbXAuZ2V0VGltZSgpO1xuXG4gICAgICAgIGlmICh0aW1lU2luY2VMYXN0TWVzc2FnZSA+IHRoaXMudW5oZWFsdGh5VGltZW91dEluTXMpIHtcbiAgICAgICAgICB0aGlzLmNsb3NlKFxuICAgICAgICAgICAgU3RyZWFtU2Z1Q2xpZW50LkVSUk9SX0NPTk5FQ1RJT05fVU5IRUFMVEhZLFxuICAgICAgICAgICAgYFNGVSBjb25uZWN0aW9uIHVuaGVhbHRoeS4gRGlkbid0IHJlY2VpdmUgYW55IG1lc3NhZ2UgZm9yICR7dGhpcy51bmhlYWx0aHlUaW1lb3V0SW5Nc31tc2AsXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIHRoaXMudW5oZWFsdGh5VGltZW91dEluTXMpO1xuICB9O1xufVxuXG4vKipcbiAqIEFuIGludGVybmFsIGludGVyZmFjZSB3aGljaCBhc3NlcnRzIHRoYXQgXCJyZXRyeWFibGVcIiBTRlUgcmVzcG9uc2VzXG4gKiBjb250YWluIGEgZmllbGQgY2FsbGVkIFwiZXJyb3JcIi5cbiAqIElkZWFsbHksIHRoaXMgc2hvdWxkIGJlIGNvbWluZyBmcm9tIHRoZSBQcm90b2J1ZiBkZWZpbml0aW9ucy5cbiAqL1xuaW50ZXJmYWNlIFNmdVJlc3BvbnNlV2l0aEVycm9yIHtcbiAgLyoqXG4gICAqIEFuIG9wdGlvbmFsIGVycm9yIGZpZWxkIHdoaWNoIHNob3VsZCBiZSBwcmVzZW50IGluIGFsbCBTRlUgcmVzcG9uc2VzLlxuICAgKi9cbiAgZXJyb3I/OiBTZnVFcnJvcjtcbn1cblxuY29uc3QgTUFYX1JFVFJJRVMgPSA1O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBjbG9zdXJlIHdoaWNoIHdyYXBzIHRoZSBnaXZlbiBSUEMgY2FsbCBhbmQgcmV0cmllcyBpbnZva2luZ1xuICogdGhlIFJQQyB1bnRpbCBpdCBzdWNjZWVkcyBvciB0aGUgbWF4aW11bSBudW1iZXIgb2YgcmV0cmllcyBpcyByZWFjaGVkLlxuICpcbiAqIEJldHdlZW4gZWFjaCByZXRyeSwgdGhlcmUgd291bGQgYmUgYSByYW5kb20gZGVsYXkgaW4gb3JkZXIgdG8gYXZvaWRcbiAqIHJlcXVlc3QgYnVyc3RzIHRvd2FyZHMgdGhlIFNGVS5cbiAqXG4gKiBAcGFyYW0gcnBjIHRoZSBjbG9zdXJlIGFyb3VuZCB0aGUgUlBDIGNhbGwgdG8gZXhlY3V0ZS5cbiAqIEBwYXJhbSBsb2dnZXIgYSBsb2dnZXIgaW5zdGFuY2UgdG8gdXNlLlxuICogQHBhcmFtIDxJPiB0aGUgdHlwZSBvZiB0aGUgcmVxdWVzdCBvYmplY3QuXG4gKiBAcGFyYW0gPE8+IHRoZSB0eXBlIG9mIHRoZSByZXNwb25zZSBvYmplY3QuXG4gKi9cbmNvbnN0IHJldHJ5YWJsZSA9IGFzeW5jIDxJIGV4dGVuZHMgb2JqZWN0LCBPIGV4dGVuZHMgU2Z1UmVzcG9uc2VXaXRoRXJyb3I+KFxuICBycGM6ICgpID0+IFVuYXJ5Q2FsbDxJLCBPPixcbiAgbG9nZ2VyOiBMb2dnZXIsXG4pID0+IHtcbiAgbGV0IHJldHJ5QXR0ZW1wdCA9IDA7XG4gIGxldCBycGNDYWxsUmVzdWx0OiBGaW5pc2hlZFVuYXJ5Q2FsbDxJLCBPPjtcbiAgZG8ge1xuICAgIC8vIGRvbid0IGRlbGF5IHRoZSBmaXJzdCBpbnZvY2F0aW9uXG4gICAgaWYgKHJldHJ5QXR0ZW1wdCA+IDApIHtcbiAgICAgIGF3YWl0IHNsZWVwKHJldHJ5SW50ZXJ2YWwocmV0cnlBdHRlbXB0KSk7XG4gICAgfVxuXG4gICAgcnBjQ2FsbFJlc3VsdCA9IGF3YWl0IHJwYygpO1xuICAgIGxvZ2dlcihcbiAgICAgICd0cmFjZScsXG4gICAgICBgU0ZVIFJQQyByZXNwb25zZSByZWNlaXZlZCBmb3IgJHtycGNDYWxsUmVzdWx0Lm1ldGhvZC5uYW1lfWAsXG4gICAgICBycGNDYWxsUmVzdWx0LFxuICAgICk7XG5cbiAgICAvLyBpZiB0aGUgUlBDIGNhbGwgZmFpbGVkLCBsb2cgdGhlIGVycm9yIGFuZCByZXRyeVxuICAgIGlmIChycGNDYWxsUmVzdWx0LnJlc3BvbnNlLmVycm9yKSB7XG4gICAgICBsb2dnZXIoXG4gICAgICAgICdlcnJvcicsXG4gICAgICAgIGBTRlUgUlBDIEVycm9yICgke3JwY0NhbGxSZXN1bHQubWV0aG9kLm5hbWV9KTpgLFxuICAgICAgICBycGNDYWxsUmVzdWx0LnJlc3BvbnNlLmVycm9yLFxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0cnlBdHRlbXB0Kys7XG4gIH0gd2hpbGUgKFxuICAgIHJwY0NhbGxSZXN1bHQucmVzcG9uc2UuZXJyb3I/LnNob3VsZFJldHJ5ICYmXG4gICAgcmV0cnlBdHRlbXB0IDwgTUFYX1JFVFJJRVNcbiAgKTtcblxuICBpZiAocnBjQ2FsbFJlc3VsdC5yZXNwb25zZS5lcnJvcikge1xuICAgIHRocm93IHJwY0NhbGxSZXN1bHQucmVzcG9uc2UuZXJyb3I7XG4gIH1cblxuICByZXR1cm4gcnBjQ2FsbFJlc3VsdDtcbn07XG4iLCJpbXBvcnQgeyBDYWxsaW5nU3RhdGUgfSBmcm9tICcuLi9zdG9yZSc7XG5pbXBvcnQgeyBDYWxsIH0gZnJvbSAnLi4vQ2FsbCc7XG5pbXBvcnQgdHlwZSB7IENhbGxBY2NlcHRlZEV2ZW50LCBDYWxsUmVqZWN0ZWRFdmVudCB9IGZyb20gJy4uL2dlbi9jb29yZGluYXRvcic7XG5cbi8qKlxuICogRXZlbnQgaGFuZGxlciB0aGF0IHdhdGNoZWQgdGhlIGRlbGl2ZXJ5IG9mIGBjYWxsLmFjY2VwdGVkYC5cbiAqIE9uY2UgdGhlIGV2ZW50IGlzIHJlY2VpdmVkLCB0aGUgY2FsbCBpcyBqb2luZWQuXG4gKi9cbmV4cG9ydCBjb25zdCB3YXRjaENhbGxBY2NlcHRlZCA9IChjYWxsOiBDYWxsKSA9PiB7XG4gIHJldHVybiBhc3luYyBmdW5jdGlvbiBvbkNhbGxBY2NlcHRlZChldmVudDogQ2FsbEFjY2VwdGVkRXZlbnQpIHtcbiAgICAvLyBXZSB3YW50IHRvIGRpc2NhcmQgdGhlIGV2ZW50IGlmIGl0J3MgZnJvbSB0aGUgY3VycmVudCB1c2VyXG4gICAgaWYgKGV2ZW50LnVzZXIuaWQgPT09IGNhbGwuY3VycmVudFVzZXJJZCkgcmV0dXJuO1xuICAgIGNvbnN0IHsgc3RhdGUgfSA9IGNhbGw7XG4gICAgaWYgKFxuICAgICAgZXZlbnQuY2FsbC5jcmVhdGVkX2J5LmlkID09PSBjYWxsLmN1cnJlbnRVc2VySWQgJiZcbiAgICAgIHN0YXRlLmNhbGxpbmdTdGF0ZSA9PT0gQ2FsbGluZ1N0YXRlLlJJTkdJTkdcbiAgICApIHtcbiAgICAgIGF3YWl0IGNhbGwuam9pbigpO1xuICAgIH1cbiAgfTtcbn07XG5cbi8qKlxuICogRXZlbnQgaGFuZGxlciB0aGF0IHdhdGNoZXMgZGVsaXZlcnkgb2YgYGNhbGwucmVqZWN0ZWRgIFdlYnNvY2tldCBldmVudC5cbiAqIE9uY2UgdGhlIGV2ZW50IGlzIHJlY2VpdmVkLCB0aGUgY2FsbCBpcyBsZWZ0LlxuICovXG5leHBvcnQgY29uc3Qgd2F0Y2hDYWxsUmVqZWN0ZWQgPSAoY2FsbDogQ2FsbCkgPT4ge1xuICByZXR1cm4gYXN5bmMgZnVuY3Rpb24gb25DYWxsUmVqZWN0ZWQoZXZlbnQ6IENhbGxSZWplY3RlZEV2ZW50KSB7XG4gICAgLy8gV2Ugd2FudCB0byBkaXNjYXJkIHRoZSBldmVudCBpZiBpdCdzIGZyb20gdGhlIGN1cnJlbnQgdXNlclxuICAgIGlmIChldmVudC51c2VyLmlkID09PSBjYWxsLmN1cnJlbnRVc2VySWQpIHJldHVybjtcbiAgICBjb25zdCB7IGNhbGw6IGV2ZW50Q2FsbCB9ID0gZXZlbnQ7XG4gICAgY29uc3QgeyBzZXNzaW9uOiBjYWxsU2Vzc2lvbiB9ID0gZXZlbnRDYWxsO1xuXG4gICAgaWYgKCFjYWxsU2Vzc2lvbikge1xuICAgICAgY2FsbC5sb2dnZXIoXG4gICAgICAgICd3YXJuJyxcbiAgICAgICAgJ05vIGNhbGwgc2Vzc2lvbiBwcm92aWRlZC4gSWdub3JpbmcgY2FsbC5yZWplY3RlZCBldmVudC4nLFxuICAgICAgICBldmVudCxcbiAgICAgICk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgcmVqZWN0ZWRCeSA9IGNhbGxTZXNzaW9uLnJlamVjdGVkX2J5O1xuICAgIGNvbnN0IHsgbWVtYmVycywgY2FsbGluZ1N0YXRlIH0gPSBjYWxsLnN0YXRlO1xuICAgIGlmIChjYWxsaW5nU3RhdGUgIT09IENhbGxpbmdTdGF0ZS5SSU5HSU5HKSB7XG4gICAgICBjYWxsLmxvZ2dlcihcbiAgICAgICAgJ2luZm8nLFxuICAgICAgICAnQ2FsbCBpcyBub3QgaW4gcmluZ2luZyBtb2RlIChpdCBpcyBlaXRoZXIgYWNjZXB0ZWQgb3IgcmVqZWN0ZWQgYWxyZWFkeSkuIElnbm9yaW5nIGNhbGwucmVqZWN0ZWQgZXZlbnQuJyxcbiAgICAgICAgZXZlbnQsXG4gICAgICApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoY2FsbC5pc0NyZWF0ZWRCeU1lKSB7XG4gICAgICBjb25zdCBldmVyeW9uZUVsc2VSZWplY3RlZCA9IG1lbWJlcnNcbiAgICAgICAgLmZpbHRlcigobSkgPT4gbS51c2VyX2lkICE9PSBjYWxsLmN1cnJlbnRVc2VySWQpXG4gICAgICAgIC5ldmVyeSgobSkgPT4gcmVqZWN0ZWRCeVttLnVzZXJfaWRdKTtcbiAgICAgIGlmIChldmVyeW9uZUVsc2VSZWplY3RlZCkge1xuICAgICAgICBjYWxsLmxvZ2dlcignaW5mbycsICdldmVyeW9uZSByZWplY3RlZCwgbGVhdmluZyB0aGUgY2FsbCcpO1xuICAgICAgICBhd2FpdCBjYWxsLmxlYXZlKCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChyZWplY3RlZEJ5W2V2ZW50Q2FsbC5jcmVhdGVkX2J5LmlkXSkge1xuICAgICAgICBjYWxsLmxvZ2dlcignaW5mbycsICdjYWxsIGNyZWF0b3IgcmVqZWN0ZWQsIGxlYXZpbmcgY2FsbCcpO1xuICAgICAgICBhd2FpdCBjYWxsLmxlYXZlKCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xufTtcblxuLyoqXG4gKiBFdmVudCBoYW5kbGVyIHRoYXQgd2F0Y2hlcyB0aGUgZGVsaXZlcnkgb2YgYGNhbGwuZW5kZWRgIFdlYnNvY2tldCBldmVudC5cbiAqL1xuZXhwb3J0IGNvbnN0IHdhdGNoQ2FsbEVuZGVkID0gKGNhbGw6IENhbGwpID0+IHtcbiAgcmV0dXJuIGFzeW5jIGZ1bmN0aW9uIG9uQ2FsbEVuZGVkKCkge1xuICAgIGNvbnN0IHsgY2FsbGluZ1N0YXRlIH0gPSBjYWxsLnN0YXRlO1xuICAgIGlmIChcbiAgICAgIGNhbGxpbmdTdGF0ZSA9PT0gQ2FsbGluZ1N0YXRlLlJJTkdJTkcgfHxcbiAgICAgIGNhbGxpbmdTdGF0ZSA9PT0gQ2FsbGluZ1N0YXRlLkpPSU5FRCB8fFxuICAgICAgY2FsbGluZ1N0YXRlID09PSBDYWxsaW5nU3RhdGUuSk9JTklOR1xuICAgICkge1xuICAgICAgYXdhaXQgY2FsbC5sZWF2ZSgpO1xuICAgIH1cbiAgfTtcbn07XG4iLCJpbXBvcnQgeyBDYWxsU3RhdGUgfSBmcm9tICcuLi9zdG9yZSc7XG5pbXBvcnQgdHlwZSB7IENhbGxHcmFudHNVcGRhdGVkIH0gZnJvbSAnLi4vZ2VuL3ZpZGVvL3NmdS9ldmVudC9ldmVudHMnO1xuaW1wb3J0IHsgT3duQ2FwYWJpbGl0eSB9IGZyb20gJy4uL2dlbi9jb29yZGluYXRvcic7XG5cbi8qKlxuICogRXZlbnQgaGFuZGxlciB0aGF0IHdhdGNoZXMgZm9yIGBjYWxsR3JhbnRzVXBkYXRlZGAgZXZlbnRzLlxuICpcbiAqIEBwYXJhbSBzdGF0ZSB0aGUgY2FsbCBzdGF0ZSB0byB1cGRhdGUuXG4gKi9cbmV4cG9ydCBjb25zdCB3YXRjaENhbGxHcmFudHNVcGRhdGVkID0gKHN0YXRlOiBDYWxsU3RhdGUpID0+IHtcbiAgcmV0dXJuIGZ1bmN0aW9uIG9uQ2FsbEdyYW50c1VwZGF0ZWQoZXZlbnQ6IENhbGxHcmFudHNVcGRhdGVkKSB7XG4gICAgY29uc3QgeyBjdXJyZW50R3JhbnRzIH0gPSBldmVudDtcbiAgICBpZiAoY3VycmVudEdyYW50cykge1xuICAgICAgY29uc3QgeyBjYW5QdWJsaXNoQXVkaW8sIGNhblB1Ymxpc2hWaWRlbywgY2FuU2NyZWVuc2hhcmUgfSA9XG4gICAgICAgIGN1cnJlbnRHcmFudHM7XG5cbiAgICAgIGNvbnN0IHVwZGF0ZTogUGFydGlhbDxSZWNvcmQ8T3duQ2FwYWJpbGl0eSwgYm9vbGVhbj4+ID0ge1xuICAgICAgICBbT3duQ2FwYWJpbGl0eS5TRU5EX0FVRElPXTogY2FuUHVibGlzaEF1ZGlvLFxuICAgICAgICBbT3duQ2FwYWJpbGl0eS5TRU5EX1ZJREVPXTogY2FuUHVibGlzaFZpZGVvLFxuICAgICAgICBbT3duQ2FwYWJpbGl0eS5TQ1JFRU5TSEFSRV06IGNhblNjcmVlbnNoYXJlLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgbmV4dENhcGFiaWxpdGllcyA9IHN0YXRlLm93bkNhcGFiaWxpdGllcy5maWx0ZXIoXG4gICAgICAgIChjYXBhYmlsaXR5KSA9PiB1cGRhdGVbY2FwYWJpbGl0eV0gIT09IGZhbHNlLFxuICAgICAgKTtcbiAgICAgIE9iamVjdC5lbnRyaWVzKHVwZGF0ZSkuZm9yRWFjaCgoW2NhcGFiaWxpdHksIHZhbHVlXSkgPT4ge1xuICAgICAgICBpZiAodmFsdWUgJiYgIW5leHRDYXBhYmlsaXRpZXMuaW5jbHVkZXMoY2FwYWJpbGl0eSBhcyBPd25DYXBhYmlsaXR5KSkge1xuICAgICAgICAgIG5leHRDYXBhYmlsaXRpZXMucHVzaChjYXBhYmlsaXR5IGFzIE93bkNhcGFiaWxpdHkpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgc3RhdGUuc2V0T3duQ2FwYWJpbGl0aWVzKG5leHRDYXBhYmlsaXRpZXMpO1xuICAgIH1cbiAgfTtcbn07XG4iLCJpbXBvcnQgeyBEaXNwYXRjaGVyIH0gZnJvbSAnLi4vcnRjJztcbmltcG9ydCB7IENhbGwgfSBmcm9tICcuLi9DYWxsJztcbmltcG9ydCB7IENhbGxTdGF0ZSB9IGZyb20gJy4uL3N0b3JlJztcbmltcG9ydCB7IFN0cmVhbVZpZGVvUGFydGljaXBhbnRQYXRjaGVzIH0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHsgZ2V0TG9nZ2VyIH0gZnJvbSAnLi4vbG9nZ2VyJztcbmltcG9ydCB0eXBlIHsgUGluc0NoYW5nZWQgfSBmcm9tICcuLi9nZW4vdmlkZW8vc2Z1L2V2ZW50L2V2ZW50cyc7XG5pbXBvcnQgeyBFcnJvckNvZGUgfSBmcm9tICcuLi9nZW4vdmlkZW8vc2Z1L21vZGVscy9tb2RlbHMnO1xuaW1wb3J0IHsgT3duQ2FwYWJpbGl0eSB9IGZyb20gJy4uL2dlbi9jb29yZGluYXRvcic7XG5cbmNvbnN0IGxvZ2dlciA9IGdldExvZ2dlcihbJ2V2ZW50cyddKTtcblxuLyoqXG4gKiBBbiBldmVudCByZXNwb25kZXIgd2hpY2ggaGFuZGxlcyB0aGUgYGNoYW5nZVB1Ymxpc2hRdWFsaXR5YCBldmVudC5cbiAqL1xuZXhwb3J0IGNvbnN0IHdhdGNoQ2hhbmdlUHVibGlzaFF1YWxpdHkgPSAoXG4gIGRpc3BhdGNoZXI6IERpc3BhdGNoZXIsXG4gIGNhbGw6IENhbGwsXG4pID0+IHtcbiAgcmV0dXJuIGRpc3BhdGNoZXIub24oJ2NoYW5nZVB1Ymxpc2hRdWFsaXR5JywgKGUpID0+IHtcbiAgICBjb25zdCB7IHZpZGVvU2VuZGVycyB9ID0gZTtcbiAgICB2aWRlb1NlbmRlcnMuZm9yRWFjaCgodmlkZW9TZW5kZXIpID0+IHtcbiAgICAgIGNvbnN0IHsgbGF5ZXJzIH0gPSB2aWRlb1NlbmRlcjtcbiAgICAgIGNhbGwudXBkYXRlUHVibGlzaFF1YWxpdHkobGF5ZXJzLmZpbHRlcigobCkgPT4gbC5hY3RpdmUpKTtcbiAgICB9KTtcbiAgfSk7XG59O1xuXG5leHBvcnQgY29uc3Qgd2F0Y2hDb25uZWN0aW9uUXVhbGl0eUNoYW5nZWQgPSAoXG4gIGRpc3BhdGNoZXI6IERpc3BhdGNoZXIsXG4gIHN0YXRlOiBDYWxsU3RhdGUsXG4pID0+IHtcbiAgcmV0dXJuIGRpc3BhdGNoZXIub24oJ2Nvbm5lY3Rpb25RdWFsaXR5Q2hhbmdlZCcsIChlKSA9PiB7XG4gICAgY29uc3QgeyBjb25uZWN0aW9uUXVhbGl0eVVwZGF0ZXMgfSA9IGU7XG4gICAgaWYgKCFjb25uZWN0aW9uUXVhbGl0eVVwZGF0ZXMpIHJldHVybjtcbiAgICBzdGF0ZS51cGRhdGVQYXJ0aWNpcGFudHMoXG4gICAgICBjb25uZWN0aW9uUXVhbGl0eVVwZGF0ZXMucmVkdWNlPFN0cmVhbVZpZGVvUGFydGljaXBhbnRQYXRjaGVzPihcbiAgICAgICAgKHBhdGNoZXMsIHVwZGF0ZSkgPT4ge1xuICAgICAgICAgIGNvbnN0IHsgc2Vzc2lvbklkLCBjb25uZWN0aW9uUXVhbGl0eSB9ID0gdXBkYXRlO1xuICAgICAgICAgIHBhdGNoZXNbc2Vzc2lvbklkXSA9IHtcbiAgICAgICAgICAgIGNvbm5lY3Rpb25RdWFsaXR5LFxuICAgICAgICAgIH07XG4gICAgICAgICAgcmV0dXJuIHBhdGNoZXM7XG4gICAgICAgIH0sXG4gICAgICAgIHt9LFxuICAgICAgKSxcbiAgICApO1xuICB9KTtcbn07XG5cbi8qKlxuICogVXBkYXRlcyB0aGUgYXBwcm94aW1hdGUgbnVtYmVyIG9mIHBhcnRpY2lwYW50cyBpbiB0aGUgY2FsbCBieSBwZWVraW5nIGF0IHRoZVxuICogaGVhbHRoIGNoZWNrIGV2ZW50cyB0aGF0IG91ciBTRlUgc2VuZHMuXG4gKi9cbmV4cG9ydCBjb25zdCB3YXRjaFBhcnRpY2lwYW50Q291bnRDaGFuZ2VkID0gKFxuICBkaXNwYXRjaGVyOiBEaXNwYXRjaGVyLFxuICBzdGF0ZTogQ2FsbFN0YXRlLFxuKSA9PiB7XG4gIHJldHVybiBkaXNwYXRjaGVyLm9uKCdoZWFsdGhDaGVja1Jlc3BvbnNlJywgKGUpID0+IHtcbiAgICBjb25zdCB7IHBhcnRpY2lwYW50Q291bnQgfSA9IGU7XG4gICAgaWYgKHBhcnRpY2lwYW50Q291bnQpIHtcbiAgICAgIHN0YXRlLnNldFBhcnRpY2lwYW50Q291bnQocGFydGljaXBhbnRDb3VudC50b3RhbCk7XG4gICAgICBzdGF0ZS5zZXRBbm9ueW1vdXNQYXJ0aWNpcGFudENvdW50KHBhcnRpY2lwYW50Q291bnQuYW5vbnltb3VzKTtcbiAgICB9XG4gIH0pO1xufTtcblxuZXhwb3J0IGNvbnN0IHdhdGNoTGl2ZUVuZGVkID0gKGRpc3BhdGNoZXI6IERpc3BhdGNoZXIsIGNhbGw6IENhbGwpID0+IHtcbiAgcmV0dXJuIGRpc3BhdGNoZXIub24oJ2Vycm9yJywgKGUpID0+IHtcbiAgICBpZiAoZS5lcnJvciAmJiBlLmVycm9yLmNvZGUgIT09IEVycm9yQ29kZS5MSVZFX0VOREVEKSByZXR1cm47XG5cbiAgICBpZiAoIWNhbGwucGVybWlzc2lvbnNDb250ZXh0Lmhhc1Blcm1pc3Npb24oT3duQ2FwYWJpbGl0eS5KT0lOX0JBQ0tTVEFHRSkpIHtcbiAgICAgIGNhbGwubGVhdmUoKS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGxvZ2dlcignZXJyb3InLCAnRmFpbGVkIHRvIGxlYXZlIGNhbGwgYWZ0ZXIgbGl2ZSBlbmRlZCcsIGVycik7XG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xufTtcblxuLyoqXG4gKiBXYXRjaGVzIGFuZCBsb2dzIHRoZSBlcnJvcnMgcmVwb3J0ZWQgYnkgdGhlIGN1cnJlbnRseSBjb25uZWN0ZWQgU0ZVLlxuICovXG5leHBvcnQgY29uc3Qgd2F0Y2hTZnVFcnJvclJlcG9ydHMgPSAoZGlzcGF0Y2hlcjogRGlzcGF0Y2hlcikgPT4ge1xuICByZXR1cm4gZGlzcGF0Y2hlci5vbignZXJyb3InLCAoZSkgPT4ge1xuICAgIGlmICghZS5lcnJvcikgcmV0dXJuO1xuICAgIGNvbnN0IHsgZXJyb3IgfSA9IGU7XG4gICAgbG9nZ2VyKCdlcnJvcicsICdTRlUgcmVwb3J0ZWQgZXJyb3InLCB7XG4gICAgICBjb2RlOiBFcnJvckNvZGVbZXJyb3IuY29kZV0sXG4gICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgc2hvdWxkUmV0cnk6IGVycm9yLnNob3VsZFJldHJ5LFxuICAgIH0pO1xuICB9KTtcbn07XG5cbi8qKlxuICogV2F0Y2hlcyBmb3IgYHBpbnNVcGRhdGVkYCBldmVudHMgYW5kIHVwZGF0ZXMgdGhlIHBpbm5lZCBzdGF0ZSBvZiBwYXJ0aWNpcGFudHNcbiAqIGluIHRoZSBjYWxsLlxuICovXG5leHBvcnQgY29uc3Qgd2F0Y2hQaW5zVXBkYXRlZCA9IChzdGF0ZTogQ2FsbFN0YXRlKSA9PiB7XG4gIHJldHVybiBmdW5jdGlvbiBvblBpbnNVcGRhdGVkKGU6IFBpbnNDaGFuZ2VkKSB7XG4gICAgY29uc3QgeyBwaW5zIH0gPSBlO1xuICAgIHN0YXRlLnNldFNlcnZlclNpZGVQaW5zKHBpbnMpO1xuICB9O1xufTtcbiIsImltcG9ydCB7IENhbGwgfSBmcm9tICcuLi9DYWxsJztcbmltcG9ydCB7XG4gIFRyYWNrVHlwZSxcbiAgVHJhY2tVbnB1Ymxpc2hSZWFzb24sXG59IGZyb20gJy4uL2dlbi92aWRlby9zZnUvbW9kZWxzL21vZGVscyc7XG5cbi8qKlxuICogQW4gZXZlbnQgaGFuZGxlciB0aGF0IGhhbmRsZXMgc29mdCBtdXRlcy5cbiAqXG4gKiBAcGFyYW0gY2FsbCB0aGUgY2FsbC5cbiAqL1xuZXhwb3J0IGNvbnN0IGhhbmRsZVJlbW90ZVNvZnRNdXRlID0gKGNhbGw6IENhbGwpID0+IHtcbiAgcmV0dXJuIGNhbGwub24oJ3RyYWNrVW5wdWJsaXNoZWQnLCBhc3luYyAoZXZlbnQpID0+IHtcbiAgICBjb25zdCB7IGNhdXNlLCB0eXBlLCBzZXNzaW9uSWQgfSA9IGV2ZW50O1xuICAgIGNvbnN0IHsgbG9jYWxQYXJ0aWNpcGFudCB9ID0gY2FsbC5zdGF0ZTtcbiAgICBpZiAoXG4gICAgICBjYXVzZSA9PT0gVHJhY2tVbnB1Ymxpc2hSZWFzb24uTU9ERVJBVElPTiAmJlxuICAgICAgc2Vzc2lvbklkID09PSBsb2NhbFBhcnRpY2lwYW50Py5zZXNzaW9uSWRcbiAgICApIHtcbiAgICAgIGNvbnN0IGxvZ2dlciA9IGNhbGwubG9nZ2VyO1xuICAgICAgbG9nZ2VyKFxuICAgICAgICAnaW5mbycsXG4gICAgICAgIGBMb2NhbCBwYXJ0aWNpcGFudCdzICR7VHJhY2tUeXBlW3R5cGVdfSB0cmFjayBpcyBtdXRlZCByZW1vdGVseWAsXG4gICAgICApO1xuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGUgPT09IFRyYWNrVHlwZS5WSURFTykge1xuICAgICAgICAgIGF3YWl0IGNhbGwuY2FtZXJhLmRpc2FibGUoKTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSBUcmFja1R5cGUuQVVESU8pIHtcbiAgICAgICAgICBhd2FpdCBjYWxsLm1pY3JvcGhvbmUuZGlzYWJsZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxvZ2dlcihcbiAgICAgICAgICAgICd3YXJuJyxcbiAgICAgICAgICAgICdVbnN1cHBvcnRlZCB0cmFjayB0eXBlIHRvIHNvZnQgbXV0ZScsXG4gICAgICAgICAgICBUcmFja1R5cGVbdHlwZV0sXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2FsbC5wdWJsaXNoZXI/LmlzUHVibGlzaGluZyh0eXBlKSkge1xuICAgICAgICAgIGF3YWl0IGNhbGwuc3RvcFB1Ymxpc2godHlwZSk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGxvZ2dlcignZXJyb3InLCAnRmFpbGVkIHRvIHN0b3AgcHVibGlzaGluZycsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xufTtcbiIsImltcG9ydCB0eXBlIHtcbiAgUGFydGljaXBhbnRKb2luZWQsXG4gIFBhcnRpY2lwYW50TGVmdCxcbiAgVHJhY2tQdWJsaXNoZWQsXG4gIFRyYWNrVW5wdWJsaXNoZWQsXG59IGZyb20gJy4uL2dlbi92aWRlby9zZnUvZXZlbnQvZXZlbnRzJztcbmltcG9ydCB7IFN0cmVhbVZpZGVvUGFydGljaXBhbnQsIFZpc2liaWxpdHlTdGF0ZSB9IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCB7IENhbGxTdGF0ZSB9IGZyb20gJy4uL3N0b3JlJztcblxuLyoqXG4gKiBBbiBldmVudCByZXNwb25kZXIgd2hpY2ggaGFuZGxlcyB0aGUgYHBhcnRpY2lwYW50Sm9pbmVkYCBldmVudC5cbiAqL1xuZXhwb3J0IGNvbnN0IHdhdGNoUGFydGljaXBhbnRKb2luZWQgPSAoc3RhdGU6IENhbGxTdGF0ZSkgPT4ge1xuICByZXR1cm4gZnVuY3Rpb24gb25QYXJ0aWNpcGFudEpvaW5lZChlOiBQYXJ0aWNpcGFudEpvaW5lZCkge1xuICAgIGNvbnN0IHsgcGFydGljaXBhbnQgfSA9IGU7XG4gICAgaWYgKCFwYXJ0aWNpcGFudCkgcmV0dXJuO1xuICAgIC8vIGBzdGF0ZS51cGRhdGVPckFkZFBhcnRpY2lwYW50YCBhY3RzIGFzIGEgc2FmZWd1YXJkIGFnYWluc3RcbiAgICAvLyBwb3RlbnRpYWwgZHVwbGljYXRlIGV2ZW50cyBmcm9tIHRoZSBTRlUuXG4gICAgLy9cbiAgICAvLyBBbHRob3VnaCB0aGUgU0ZVIHNob3VsZCBub3Qgc2VuZCBkdXBsaWNhdGUgZXZlbnRzLCB3ZSBoYXZlIHNlZW5cbiAgICAvLyBzb21lIHJhY2UgY29uZGl0aW9ucyBpbiB0aGUgcGFzdCBkdXJpbmcgdGhlIGBqb2luLWZsb3dgIHdoZXJlXG4gICAgLy8gdGhlIFNGVSB3b3VsZCBzZW5kIHBhcnRpY2lwYW50IGluZm8gYXMgcGFydCBvZiB0aGUgYGpvaW5gXG4gICAgLy8gcmVzcG9uc2UgYW5kIHRoZW4gZm9sbG93IHVwIHdpdGggYSBgcGFydGljaXBhbnRKb2luZWRgIGV2ZW50IGZvclxuICAgIC8vIGFscmVhZHkgYW5ub3VuY2VkIHBhcnRpY2lwYW50cy5cbiAgICBzdGF0ZS51cGRhdGVPckFkZFBhcnRpY2lwYW50KFxuICAgICAgcGFydGljaXBhbnQuc2Vzc2lvbklkLFxuICAgICAgT2JqZWN0LmFzc2lnbjxTdHJlYW1WaWRlb1BhcnRpY2lwYW50LCBQYXJ0aWFsPFN0cmVhbVZpZGVvUGFydGljaXBhbnQ+PihcbiAgICAgICAgcGFydGljaXBhbnQsXG4gICAgICAgIHtcbiAgICAgICAgICB2aWV3cG9ydFZpc2liaWxpdHlTdGF0ZToge1xuICAgICAgICAgICAgdmlkZW9UcmFjazogVmlzaWJpbGl0eVN0YXRlLlVOS05PV04sXG4gICAgICAgICAgICBzY3JlZW5TaGFyZVRyYWNrOiBWaXNpYmlsaXR5U3RhdGUuVU5LTk9XTixcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgKSxcbiAgICApO1xuICB9O1xufTtcblxuLyoqXG4gKiBBbiBldmVudCByZXNwb25kZXIgd2hpY2ggaGFuZGxlcyB0aGUgYHBhcnRpY2lwYW50TGVmdGAgZXZlbnQuXG4gKi9cbmV4cG9ydCBjb25zdCB3YXRjaFBhcnRpY2lwYW50TGVmdCA9IChzdGF0ZTogQ2FsbFN0YXRlKSA9PiB7XG4gIHJldHVybiBmdW5jdGlvbiBvblBhcnRpY2lwYW50TGVmdChlOiBQYXJ0aWNpcGFudExlZnQpIHtcbiAgICBjb25zdCB7IHBhcnRpY2lwYW50IH0gPSBlO1xuICAgIGlmICghcGFydGljaXBhbnQpIHJldHVybjtcblxuICAgIHN0YXRlLnNldFBhcnRpY2lwYW50cygocGFydGljaXBhbnRzKSA9PlxuICAgICAgcGFydGljaXBhbnRzLmZpbHRlcigocCkgPT4gcC5zZXNzaW9uSWQgIT09IHBhcnRpY2lwYW50LnNlc3Npb25JZCksXG4gICAgKTtcbiAgfTtcbn07XG5cbi8qKlxuICogQW4gZXZlbnQgcmVzcG9uZGVyIHdoaWNoIGhhbmRsZXMgdGhlIGB0cmFja1B1Ymxpc2hlZGAgZXZlbnQuXG4gKiBUaGUgU0ZVIHdpbGwgc2VuZCB0aGlzIGV2ZW50IHdoZW4gYSBwYXJ0aWNpcGFudCBwdWJsaXNoZXMgYSB0cmFjay5cbiAqL1xuZXhwb3J0IGNvbnN0IHdhdGNoVHJhY2tQdWJsaXNoZWQgPSAoc3RhdGU6IENhbGxTdGF0ZSkgPT4ge1xuICByZXR1cm4gZnVuY3Rpb24gb25UcmFja1B1Ymxpc2hlZChlOiBUcmFja1B1Ymxpc2hlZCkge1xuICAgIGNvbnN0IHsgdHlwZSwgc2Vzc2lvbklkLCBwYXJ0aWNpcGFudCB9ID0gZTtcbiAgICAvLyBBbiBvcHRpbWl6YXRpb24gZm9yIGxhcmdlIGNhbGxzLlxuICAgIC8vIEFmdGVyIGEgY2VydGFpbiB0aHJlc2hvbGQsIHRoZSBTRlUgd291bGQgc3RvcCBlbWl0dGluZyBgcGFydGljaXBhbnRKb2luZWRgXG4gICAgLy8gZXZlbnRzLCBhbmQgaW5zdGVhZCwgaXQgd291bGQgb25seSBwcm92aWRlIHRoZSBwYXJ0aWNpcGFudCdzIGluZm9ybWF0aW9uXG4gICAgLy8gb25jZSB0aGV5IHN0YXJ0IHB1Ymxpc2hpbmcgYSB0cmFjay5cbiAgICBpZiAocGFydGljaXBhbnQpIHtcbiAgICAgIHN0YXRlLnVwZGF0ZU9yQWRkUGFydGljaXBhbnQoc2Vzc2lvbklkLCBwYXJ0aWNpcGFudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0YXRlLnVwZGF0ZVBhcnRpY2lwYW50KHNlc3Npb25JZCwgKHApID0+ICh7XG4gICAgICAgIHB1Ymxpc2hlZFRyYWNrczogWy4uLnAucHVibGlzaGVkVHJhY2tzLCB0eXBlXS5maWx0ZXIodW5pcXVlKSxcbiAgICAgIH0pKTtcbiAgICB9XG4gIH07XG59O1xuXG4vKipcbiAqIEFuIGV2ZW50IHJlc3BvbmRlciB3aGljaCBoYW5kbGVzIHRoZSBgdHJhY2tVbnB1Ymxpc2hlZGAgZXZlbnQuXG4gKiBUaGUgU0ZVIHdpbGwgc2VuZCB0aGlzIGV2ZW50IHdoZW4gYSBwYXJ0aWNpcGFudCB1bnB1Ymxpc2hlcyBhIHRyYWNrLlxuICovXG5leHBvcnQgY29uc3Qgd2F0Y2hUcmFja1VucHVibGlzaGVkID0gKHN0YXRlOiBDYWxsU3RhdGUpID0+IHtcbiAgcmV0dXJuIGZ1bmN0aW9uIG9uVHJhY2tVbnB1Ymxpc2hlZChlOiBUcmFja1VucHVibGlzaGVkKSB7XG4gICAgY29uc3QgeyB0eXBlLCBzZXNzaW9uSWQsIHBhcnRpY2lwYW50IH0gPSBlO1xuICAgIC8vIEFuIG9wdGltaXphdGlvbiBmb3IgbGFyZ2UgY2FsbHMuIFNlZSBgd2F0Y2hUcmFja1B1Ymxpc2hlZGAuXG4gICAgaWYgKHBhcnRpY2lwYW50KSB7XG4gICAgICBzdGF0ZS51cGRhdGVPckFkZFBhcnRpY2lwYW50KHNlc3Npb25JZCwgcGFydGljaXBhbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdGF0ZS51cGRhdGVQYXJ0aWNpcGFudChzZXNzaW9uSWQsIChwKSA9PiAoe1xuICAgICAgICBwdWJsaXNoZWRUcmFja3M6IHAucHVibGlzaGVkVHJhY2tzLmZpbHRlcigodCkgPT4gdCAhPT0gdHlwZSksXG4gICAgICB9KSk7XG4gICAgfVxuICB9O1xufTtcblxuY29uc3QgdW5pcXVlID0gPFQ+KHY6IFQsIGk6IG51bWJlciwgYXJyOiBUW10pID0+IGFyci5pbmRleE9mKHYpID09PSBpO1xuIiwiaW1wb3J0IHsgRGlzcGF0Y2hlciB9IGZyb20gJy4uL3J0Yyc7XG5pbXBvcnQgeyBDYWxsU3RhdGUgfSBmcm9tICcuLi9zdG9yZSc7XG5pbXBvcnQgeyBTdHJlYW1WaWRlb1BhcnRpY2lwYW50UGF0Y2hlcyB9IGZyb20gJy4uL3R5cGVzJztcblxuLyoqXG4gKiBXYXRjaGVzIGZvciBgZG9taW5hbnRTcGVha2VyQ2hhbmdlZGAgZXZlbnRzLlxuICovXG5leHBvcnQgY29uc3Qgd2F0Y2hEb21pbmFudFNwZWFrZXJDaGFuZ2VkID0gKFxuICBkaXNwYXRjaGVyOiBEaXNwYXRjaGVyLFxuICBzdGF0ZTogQ2FsbFN0YXRlLFxuKSA9PiB7XG4gIHJldHVybiBkaXNwYXRjaGVyLm9uKCdkb21pbmFudFNwZWFrZXJDaGFuZ2VkJywgKGUpID0+IHtcbiAgICBjb25zdCB7IHNlc3Npb25JZCB9ID0gZTtcbiAgICBpZiAoc2Vzc2lvbklkID09PSBzdGF0ZS5kb21pbmFudFNwZWFrZXI/LnNlc3Npb25JZCkgcmV0dXJuO1xuICAgIHN0YXRlLnNldFBhcnRpY2lwYW50cygocGFydGljaXBhbnRzKSA9PlxuICAgICAgcGFydGljaXBhbnRzLm1hcCgocGFydGljaXBhbnQpID0+IHtcbiAgICAgICAgLy8gbWFyayB0aGUgbmV3IGRvbWluYW50IHNwZWFrZXJcbiAgICAgICAgaWYgKHBhcnRpY2lwYW50LnNlc3Npb25JZCA9PT0gc2Vzc2lvbklkKSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnBhcnRpY2lwYW50LFxuICAgICAgICAgICAgaXNEb21pbmFudFNwZWFrZXI6IHRydWUsXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICAvLyB1bm1hcmsgdGhlIG9sZCBkb21pbmFudCBzcGVha2VyXG4gICAgICAgIGlmIChwYXJ0aWNpcGFudC5pc0RvbWluYW50U3BlYWtlcikge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5wYXJ0aWNpcGFudCxcbiAgICAgICAgICAgIGlzRG9taW5hbnRTcGVha2VyOiBmYWxzZSxcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXJ0aWNpcGFudDsgLy8gbm8gY2hhbmdlXG4gICAgICB9KSxcbiAgICApO1xuICB9KTtcbn07XG5cbi8qKlxuICogV2F0Y2hlcyBmb3IgYGF1ZGlvTGV2ZWxDaGFuZ2VkYCBldmVudHMuXG4gKi9cbmV4cG9ydCBjb25zdCB3YXRjaEF1ZGlvTGV2ZWxDaGFuZ2VkID0gKFxuICBkaXNwYXRjaGVyOiBEaXNwYXRjaGVyLFxuICBzdGF0ZTogQ2FsbFN0YXRlLFxuKSA9PiB7XG4gIHJldHVybiBkaXNwYXRjaGVyLm9uKCdhdWRpb0xldmVsQ2hhbmdlZCcsIChlKSA9PiB7XG4gICAgY29uc3QgeyBhdWRpb0xldmVscyB9ID0gZTtcbiAgICBzdGF0ZS51cGRhdGVQYXJ0aWNpcGFudHMoXG4gICAgICBhdWRpb0xldmVscy5yZWR1Y2U8U3RyZWFtVmlkZW9QYXJ0aWNpcGFudFBhdGNoZXM+KChwYXRjaGVzLCBjdXJyZW50KSA9PiB7XG4gICAgICAgIHBhdGNoZXNbY3VycmVudC5zZXNzaW9uSWRdID0ge1xuICAgICAgICAgIGF1ZGlvTGV2ZWw6IGN1cnJlbnQubGV2ZWwsXG4gICAgICAgICAgaXNTcGVha2luZzogY3VycmVudC5pc1NwZWFraW5nLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gcGF0Y2hlcztcbiAgICAgIH0sIHt9KSxcbiAgICApO1xuICB9KTtcbn07XG4iLCJpbXBvcnQgeyBDYWxsIH0gZnJvbSAnLi4vQ2FsbCc7XG5pbXBvcnQgeyBEaXNwYXRjaGVyIH0gZnJvbSAnLi4vcnRjJztcbmltcG9ydCB7IENhbGxTdGF0ZSB9IGZyb20gJy4uL3N0b3JlJztcbmltcG9ydCB7XG4gIGhhbmRsZVJlbW90ZVNvZnRNdXRlLFxuICB3YXRjaEF1ZGlvTGV2ZWxDaGFuZ2VkLFxuICB3YXRjaENhbGxBY2NlcHRlZCxcbiAgd2F0Y2hDYWxsRW5kZWQsXG4gIHdhdGNoQ2FsbEdyYW50c1VwZGF0ZWQsXG4gIHdhdGNoQ2FsbFJlamVjdGVkLFxuICB3YXRjaENoYW5nZVB1Ymxpc2hRdWFsaXR5LFxuICB3YXRjaENvbm5lY3Rpb25RdWFsaXR5Q2hhbmdlZCxcbiAgd2F0Y2hEb21pbmFudFNwZWFrZXJDaGFuZ2VkLFxuICB3YXRjaExpdmVFbmRlZCxcbiAgd2F0Y2hQYXJ0aWNpcGFudENvdW50Q2hhbmdlZCxcbiAgd2F0Y2hQYXJ0aWNpcGFudEpvaW5lZCxcbiAgd2F0Y2hQYXJ0aWNpcGFudExlZnQsXG4gIHdhdGNoUGluc1VwZGF0ZWQsXG4gIHdhdGNoU2Z1RXJyb3JSZXBvcnRzLFxuICB3YXRjaFRyYWNrUHVibGlzaGVkLFxuICB3YXRjaFRyYWNrVW5wdWJsaXNoZWQsXG59IGZyb20gJy4uL2V2ZW50cyc7XG5pbXBvcnQge1xuICBBbGxDYWxsRXZlbnRzLFxuICBBbGxDbGllbnRDYWxsRXZlbnRzLFxuICBDYWxsRXZlbnRMaXN0ZW5lcixcbn0gZnJvbSAnLi4vY29vcmRpbmF0b3IvY29ubmVjdGlvbi90eXBlcyc7XG5cbnR5cGUgUmluZ0NhbGxFdmVudHMgPSBFeHRyYWN0PFxuICBBbGxDbGllbnRDYWxsRXZlbnRzLFxuICAnY2FsbC5hY2NlcHRlZCcgfCAnY2FsbC5yZWplY3RlZCdcbj47XG5cbi8qKlxuICogUmVnaXN0ZXJzIHRoZSBkZWZhdWx0IGV2ZW50IGhhbmRsZXJzIGZvciBhIGNhbGwgZHVyaW5nIGl0cyBsaWZlY3ljbGUuXG4gKlxuICogQHBhcmFtIGNhbGwgdGhlIGNhbGwgdG8gcmVnaXN0ZXIgZXZlbnQgaGFuZGxlcnMgZm9yLlxuICogQHBhcmFtIHN0YXRlIHRoZSBjYWxsIHN0YXRlLlxuICogQHBhcmFtIGRpc3BhdGNoZXIgdGhlIGRpc3BhdGNoZXIuXG4gKi9cbmV4cG9ydCBjb25zdCByZWdpc3RlckV2ZW50SGFuZGxlcnMgPSAoXG4gIGNhbGw6IENhbGwsXG4gIHN0YXRlOiBDYWxsU3RhdGUsXG4gIGRpc3BhdGNoZXI6IERpc3BhdGNoZXIsXG4pID0+IHtcbiAgY29uc3QgZXZlbnRIYW5kbGVycyA9IFtcbiAgICBjYWxsLm9uKCdjYWxsLmVuZGVkJywgd2F0Y2hDYWxsRW5kZWQoY2FsbCkpLFxuXG4gICAgd2F0Y2hMaXZlRW5kZWQoZGlzcGF0Y2hlciwgY2FsbCksXG4gICAgd2F0Y2hTZnVFcnJvclJlcG9ydHMoZGlzcGF0Y2hlciksXG4gICAgd2F0Y2hDaGFuZ2VQdWJsaXNoUXVhbGl0eShkaXNwYXRjaGVyLCBjYWxsKSxcbiAgICB3YXRjaENvbm5lY3Rpb25RdWFsaXR5Q2hhbmdlZChkaXNwYXRjaGVyLCBzdGF0ZSksXG4gICAgd2F0Y2hQYXJ0aWNpcGFudENvdW50Q2hhbmdlZChkaXNwYXRjaGVyLCBzdGF0ZSksXG5cbiAgICBjYWxsLm9uKCdwYXJ0aWNpcGFudEpvaW5lZCcsIHdhdGNoUGFydGljaXBhbnRKb2luZWQoc3RhdGUpKSxcbiAgICBjYWxsLm9uKCdwYXJ0aWNpcGFudExlZnQnLCB3YXRjaFBhcnRpY2lwYW50TGVmdChzdGF0ZSkpLFxuXG4gICAgY2FsbC5vbigndHJhY2tQdWJsaXNoZWQnLCB3YXRjaFRyYWNrUHVibGlzaGVkKHN0YXRlKSksXG4gICAgY2FsbC5vbigndHJhY2tVbnB1Ymxpc2hlZCcsIHdhdGNoVHJhY2tVbnB1Ymxpc2hlZChzdGF0ZSkpLFxuXG4gICAgd2F0Y2hBdWRpb0xldmVsQ2hhbmdlZChkaXNwYXRjaGVyLCBzdGF0ZSksXG4gICAgd2F0Y2hEb21pbmFudFNwZWFrZXJDaGFuZ2VkKGRpc3BhdGNoZXIsIHN0YXRlKSxcblxuICAgIGNhbGwub24oJ2NhbGxHcmFudHNVcGRhdGVkJywgd2F0Y2hDYWxsR3JhbnRzVXBkYXRlZChzdGF0ZSkpLFxuICAgIGNhbGwub24oJ3BpbnNVcGRhdGVkJywgd2F0Y2hQaW5zVXBkYXRlZChzdGF0ZSkpLFxuXG4gICAgaGFuZGxlUmVtb3RlU29mdE11dGUoY2FsbCksXG4gIF07XG5cbiAgaWYgKGNhbGwucmluZ2luZykge1xuICAgIC8vIHRoZXNlIGV2ZW50cyBhcmUgb25seSByZWxldmFudCB3aGVuIHRoZSBjYWxsIGlzIHJpbmdpbmdcbiAgICBldmVudEhhbmRsZXJzLnB1c2gocmVnaXN0ZXJSaW5naW5nQ2FsbEV2ZW50SGFuZGxlcnMoY2FsbCkpO1xuICB9XG5cbiAgcmV0dXJuICgpID0+IHtcbiAgICBldmVudEhhbmRsZXJzLmZvckVhY2goKHVuc3Vic2NyaWJlKSA9PiB1bnN1YnNjcmliZSgpKTtcbiAgfTtcbn07XG5cbi8qKlxuICogUmVnaXN0ZXJzIGV2ZW50IGhhbmRsZXJzIGZvciBhIGNhbGwgdGhhdCBpcyBvZiByaW5naW5nIHR5cGUuXG4gKlxuICogQHBhcmFtIGNhbGwgdGhlIGNhbGwgdG8gcmVnaXN0ZXIgZXZlbnQgaGFuZGxlcnMgZm9yLlxuICovXG5leHBvcnQgY29uc3QgcmVnaXN0ZXJSaW5naW5nQ2FsbEV2ZW50SGFuZGxlcnMgPSAoY2FsbDogQ2FsbCkgPT4ge1xuICBjb25zdCBjb29yZGluYXRvclJpbmdFdmVudHM6IHtcbiAgICBba2V5IGluIFJpbmdDYWxsRXZlbnRzXTogKFxuICAgICAgY2FsbDogQ2FsbCxcbiAgICApID0+IENhbGxFdmVudExpc3RlbmVyPEFsbENhbGxFdmVudHNba2V5XT47XG4gIH0gPSB7XG4gICAgJ2NhbGwuYWNjZXB0ZWQnOiB3YXRjaENhbGxBY2NlcHRlZChjYWxsKSxcbiAgICAnY2FsbC5yZWplY3RlZCc6IHdhdGNoQ2FsbFJlamVjdGVkKGNhbGwpLFxuICB9O1xuXG4gIGNvbnN0IGV2ZW50SGFuZGxlcnMgPSBPYmplY3Qua2V5cyhjb29yZGluYXRvclJpbmdFdmVudHMpLm1hcCgoZXZlbnQpID0+IHtcbiAgICBjb25zdCBldmVudE5hbWUgPSBldmVudCBhcyBSaW5nQ2FsbEV2ZW50cztcbiAgICByZXR1cm4gY2FsbC5vbihldmVudE5hbWUsIGNvb3JkaW5hdG9yUmluZ0V2ZW50c1tldmVudE5hbWVdKTtcbiAgfSk7XG5cbiAgcmV0dXJuICgpID0+IHtcbiAgICBldmVudEhhbmRsZXJzLmZvckVhY2goKHVuc3Vic2NyaWJlKSA9PiB1bnN1YnNjcmliZSgpKTtcbiAgfTtcbn07XG4iLCJpbXBvcnQge1xuICBJQ0VTZXJ2ZXIsXG4gIEpvaW5DYWxsUmVxdWVzdCxcbiAgSm9pbkNhbGxSZXNwb25zZSxcbn0gZnJvbSAnLi4vLi4vZ2VuL2Nvb3JkaW5hdG9yJztcbmltcG9ydCB7IEpvaW5DYWxsRGF0YSB9IGZyb20gJy4uLy4uL3R5cGVzJztcbmltcG9ydCB7IFN0cmVhbUNsaWVudCB9IGZyb20gJy4uLy4uL2Nvb3JkaW5hdG9yL2Nvbm5lY3Rpb24vY2xpZW50JztcblxuLyoqXG4gKiBDb2xsZWN0cyBhbGwgbmVjZXNzYXJ5IGluZm9ybWF0aW9uIHRvIGpvaW4gYSBjYWxsLCB0YWxrcyB0byB0aGUgY29vcmRpbmF0b3JcbiAqIGFuZCByZXR1cm5zIHRoZSBuZWNlc3NhcnkgaW5mb3JtYXRpb24gdG8gam9pbiB0aGUgY2FsbC5cbiAqXG4gKiBAcGFyYW0gaHR0cENsaWVudCB0aGUgaHR0cCBjbGllbnQgdG8gdXNlLlxuICogQHBhcmFtIHR5cGUgdGhlIHR5cGUgb2YgdGhlIGNhbGwuXG4gKiBAcGFyYW0gaWQgdGhlIGlkIG9mIHRoZSBjYWxsLlxuICogQHBhcmFtIGRhdGEgdGhlIGRhdGEgZm9yIHRoZSBjYWxsLlxuICovXG5leHBvcnQgY29uc3Qgam9pbiA9IGFzeW5jIChcbiAgaHR0cENsaWVudDogU3RyZWFtQ2xpZW50LFxuICB0eXBlOiBzdHJpbmcsXG4gIGlkOiBzdHJpbmcsXG4gIGRhdGE/OiBKb2luQ2FsbERhdGEsXG4pID0+IHtcbiAgY29uc3Qgam9pbkNhbGxSZXNwb25zZSA9IGF3YWl0IGRvSm9pbihodHRwQ2xpZW50LCB0eXBlLCBpZCwgZGF0YSk7XG4gIGNvbnN0IHsgY2FsbCwgY3JlZGVudGlhbHMsIG1lbWJlcnMsIG93bl9jYXBhYmlsaXRpZXMgfSA9IGpvaW5DYWxsUmVzcG9uc2U7XG4gIHJldHVybiB7XG4gICAgY29ubmVjdGlvbkNvbmZpZzogdG9SdGNDb25maWd1cmF0aW9uKGNyZWRlbnRpYWxzLmljZV9zZXJ2ZXJzKSxcbiAgICBzZnVTZXJ2ZXI6IGNyZWRlbnRpYWxzLnNlcnZlcixcbiAgICB0b2tlbjogY3JlZGVudGlhbHMudG9rZW4sXG4gICAgbWV0YWRhdGE6IGNhbGwsXG4gICAgbWVtYmVycyxcbiAgICBvd25DYXBhYmlsaXRpZXM6IG93bl9jYXBhYmlsaXRpZXMsXG4gIH07XG59O1xuXG5jb25zdCBkb0pvaW4gPSBhc3luYyAoXG4gIGh0dHBDbGllbnQ6IFN0cmVhbUNsaWVudCxcbiAgdHlwZTogc3RyaW5nLFxuICBpZDogc3RyaW5nLFxuICBkYXRhPzogSm9pbkNhbGxEYXRhLFxuKSA9PiB7XG4gIGNvbnN0IGxvY2F0aW9uID0gYXdhaXQgaHR0cENsaWVudC5nZXRMb2NhdGlvbkhpbnQoKTtcbiAgY29uc3QgcmVxdWVzdDogSm9pbkNhbGxSZXF1ZXN0ID0ge1xuICAgIC4uLmRhdGEsXG4gICAgbG9jYXRpb24sXG4gIH07XG4gIHJldHVybiBodHRwQ2xpZW50LnBvc3Q8Sm9pbkNhbGxSZXNwb25zZSwgSm9pbkNhbGxSZXF1ZXN0PihcbiAgICBgL2NhbGwvJHt0eXBlfS8ke2lkfS9qb2luYCxcbiAgICByZXF1ZXN0LFxuICApO1xufTtcblxuY29uc3QgdG9SdGNDb25maWd1cmF0aW9uID0gKGNvbmZpZz86IElDRVNlcnZlcltdKSA9PiB7XG4gIGlmICghY29uZmlnIHx8IGNvbmZpZy5sZW5ndGggPT09IDApIHJldHVybiB1bmRlZmluZWQ7XG4gIGNvbnN0IHJ0Y0NvbmZpZzogUlRDQ29uZmlndXJhdGlvbiA9IHtcbiAgICBpY2VTZXJ2ZXJzOiBjb25maWcubWFwKChpY2UpID0+ICh7XG4gICAgICB1cmxzOiBpY2UudXJscyxcbiAgICAgIHVzZXJuYW1lOiBpY2UudXNlcm5hbWUsXG4gICAgICBjcmVkZW50aWFsOiBpY2UucGFzc3dvcmQsXG4gICAgfSkpLFxuICB9O1xuICByZXR1cm4gcnRjQ29uZmlnO1xufTtcbiIsImltcG9ydCB0eXBlIHtcbiAgQWdncmVnYXRlZFN0YXRzUmVwb3J0LFxuICBCYXNlU3RhdHMsXG4gIFBhcnRpY2lwYW50c1N0YXRzUmVwb3J0LFxuICBTdGF0c1JlcG9ydCxcbn0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQgeyBDYWxsU3RhdGUgfSBmcm9tICcuLi9zdG9yZSc7XG5pbXBvcnQgeyBQdWJsaXNoZXIsIFN1YnNjcmliZXIgfSBmcm9tICcuLi9ydGMnO1xuaW1wb3J0IHsgZ2V0TG9nZ2VyIH0gZnJvbSAnLi4vbG9nZ2VyJztcblxuZXhwb3J0IHR5cGUgU3RhdHNSZXBvcnRlck9wdHMgPSB7XG4gIHN1YnNjcmliZXI6IFN1YnNjcmliZXI7XG4gIHB1Ymxpc2hlcjogUHVibGlzaGVyO1xuICBzdGF0ZTogQ2FsbFN0YXRlO1xuICBwb2xsaW5nSW50ZXJ2YWxJbk1zPzogbnVtYmVyO1xufTtcblxuZXhwb3J0IHR5cGUgU3RhdHNSZXBvcnRlciA9IHtcbiAgLyoqXG4gICAqIFdpbGwgdHVybiBvbiBzdGF0cyByZXBvcnRpbmcgZm9yIGEgZ2l2ZW4gc2Vzc2lvbklkLlxuICAgKlxuICAgKiBAcGFyYW0gc2Vzc2lvbklkIHRoZSBzZXNzaW9uIGlkLlxuICAgKi9cbiAgc3RhcnRSZXBvcnRpbmdTdGF0c0ZvcjogKHNlc3Npb25JZDogc3RyaW5nKSA9PiB2b2lkO1xuXG4gIC8qKlxuICAgKiBXaWxsIHR1cm4gb2ZmIHN0YXRzIHJlcG9ydGluZyBmb3IgYSBnaXZlbiBzZXNzaW9uSWQuXG4gICAqXG4gICAqIEBwYXJhbSBzZXNzaW9uSWQgdGhlIHNlc3Npb24gaWQuXG4gICAqL1xuICBzdG9wUmVwb3J0aW5nU3RhdHNGb3I6IChzZXNzaW9uSWQ6IHN0cmluZykgPT4gdm9pZDtcblxuICAvKipcbiAgICogSGVscGVyIG1ldGhvZCBmb3IgcmV0cmlldmluZyBzdGF0cyBmb3IgYSBnaXZlbiBwZWVyIGNvbm5lY3Rpb24ga2luZFxuICAgKiBhbmQgbWVkaWEgc3RyZWFtIGZsb3dpbmcgdGhyb3VnaCBpdC5cbiAgICpcbiAgICogQHBhcmFtIGtpbmQgdGhlIHBlZXIgY29ubmVjdGlvbiBraW5kIChzdWJzY3JpYmVyIG9yIHB1Ymxpc2hlcikuXG4gICAqIEBwYXJhbSBtZWRpYVN0cmVhbSB0aGUgbWVkaWEgc3RyZWFtLlxuICAgKi9cbiAgZ2V0U3RhdHNGb3JTdHJlYW06IChcbiAgICBraW5kOiAnc3Vic2NyaWJlcicgfCAncHVibGlzaGVyJyxcbiAgICBtZWRpYVN0cmVhbTogTWVkaWFTdHJlYW0sXG4gICkgPT4gUHJvbWlzZTxTdGF0c1JlcG9ydFtdPjtcblxuICAvKipcbiAgICogSGVscGVyIG1ldGhvZCBmb3IgcmV0cmlldmluZyByYXcgc3RhdHMgZm9yIGEgZ2l2ZW4gcGVlciBjb25uZWN0aW9uIGtpbmQuXG4gICAqXG4gICAqIEBwYXJhbSBraW5kIHRoZSBwZWVyIGNvbm5lY3Rpb24ga2luZCAoc3Vic2NyaWJlciBvciBwdWJsaXNoZXIpLlxuICAgKiBAcGFyYW0gc2VsZWN0b3IgdGhlIHRyYWNrIHNlbGVjdG9yLiBJZiBub3QgcHJvdmlkZWQsIHN0YXRzIGZvciBhbGwgdHJhY2tzIHdpbGwgYmUgcmV0dXJuZWQuXG4gICAqL1xuICBnZXRSYXdTdGF0c0ZvclRyYWNrOiAoXG4gICAga2luZDogJ3N1YnNjcmliZXInIHwgJ3B1Ymxpc2hlcicsXG4gICAgc2VsZWN0b3I/OiBNZWRpYVN0cmVhbVRyYWNrLFxuICApID0+IFByb21pc2U8UlRDU3RhdHNSZXBvcnQgfCB1bmRlZmluZWQ+O1xuXG4gIC8qKlxuICAgKiBTdG9wcyB0aGUgc3RhdHMgcmVwb3J0ZXIgYW5kIHJlbGVhc2VzIGFsbCByZXNvdXJjZXMuXG4gICAqL1xuICBzdG9wOiAoKSA9PiB2b2lkO1xufTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IFN0YXRzUmVwb3J0ZXIgaW5zdGFuY2UgdGhhdCBjb2xsZWN0cyBtZXRyaWNzIGFib3V0IHRoZSBvbmdvaW5nIGNhbGwgYW5kIHJlcG9ydHMgdGhlbSB0byB0aGUgc3RhdGUgc3RvcmVcbiAqL1xuZXhwb3J0IGNvbnN0IGNyZWF0ZVN0YXRzUmVwb3J0ZXIgPSAoe1xuICBzdWJzY3JpYmVyLFxuICBwdWJsaXNoZXIsXG4gIHN0YXRlLFxuICBwb2xsaW5nSW50ZXJ2YWxJbk1zID0gMjAwMCxcbn06IFN0YXRzUmVwb3J0ZXJPcHRzKTogU3RhdHNSZXBvcnRlciA9PiB7XG4gIGNvbnN0IGxvZ2dlciA9IGdldExvZ2dlcihbJ3N0YXRzJ10pO1xuICBjb25zdCBnZXRSYXdTdGF0c0ZvclRyYWNrID0gYXN5bmMgKFxuICAgIGtpbmQ6ICdzdWJzY3JpYmVyJyB8ICdwdWJsaXNoZXInLFxuICAgIHNlbGVjdG9yPzogTWVkaWFTdHJlYW1UcmFjayxcbiAgKSA9PiB7XG4gICAgaWYgKGtpbmQgPT09ICdzdWJzY3JpYmVyJyAmJiBzdWJzY3JpYmVyKSB7XG4gICAgICByZXR1cm4gc3Vic2NyaWJlci5nZXRTdGF0cyhzZWxlY3Rvcik7XG4gICAgfSBlbHNlIGlmIChraW5kID09PSAncHVibGlzaGVyJyAmJiBwdWJsaXNoZXIpIHtcbiAgICAgIHJldHVybiBwdWJsaXNoZXIuZ2V0U3RhdHMoc2VsZWN0b3IpO1xuICAgIH0gZWxzZSB7XG4gICAgICBsb2dnZXIoJ3dhcm4nLCBgQ2FuJ3QgcmV0cmlldmUgUlRDIHN0YXRzIGZvciAke2tpbmR9YCk7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBnZXRTdGF0c0ZvclN0cmVhbSA9IGFzeW5jIChcbiAgICBraW5kOiAnc3Vic2NyaWJlcicgfCAncHVibGlzaGVyJyxcbiAgICBtZWRpYVN0cmVhbTogTWVkaWFTdHJlYW0sXG4gICkgPT4ge1xuICAgIGNvbnN0IHBjID0ga2luZCA9PT0gJ3N1YnNjcmliZXInID8gc3Vic2NyaWJlciA6IHB1Ymxpc2hlcjtcbiAgICBjb25zdCBzdGF0c0ZvclN0cmVhbTogU3RhdHNSZXBvcnRbXSA9IFtdO1xuICAgIGZvciAobGV0IHRyYWNrIG9mIG1lZGlhU3RyZWFtLmdldFRyYWNrcygpKSB7XG4gICAgICBjb25zdCByZXBvcnQgPSBhd2FpdCBwYy5nZXRTdGF0cyh0cmFjayk7XG4gICAgICBjb25zdCBzdGF0cyA9IHRyYW5zZm9ybShyZXBvcnQsIHtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICB0cmFja0tpbmQ6IHRyYWNrLmtpbmQsXG4gICAgICAgIGtpbmQsXG4gICAgICB9KTtcbiAgICAgIHN0YXRzRm9yU3RyZWFtLnB1c2goc3RhdHMpO1xuICAgIH1cbiAgICByZXR1cm4gc3RhdHNGb3JTdHJlYW07XG4gIH07XG5cbiAgY29uc3Qgc3RhcnRSZXBvcnRpbmdTdGF0c0ZvciA9IChzZXNzaW9uSWQ6IHN0cmluZykgPT4ge1xuICAgIHNlc3Npb25JZHNUb1RyYWNrLmFkZChzZXNzaW9uSWQpO1xuICAgIHZvaWQgcnVuKCk7XG4gIH07XG5cbiAgY29uc3Qgc3RvcFJlcG9ydGluZ1N0YXRzRm9yID0gKHNlc3Npb25JZDogc3RyaW5nKSA9PiB7XG4gICAgc2Vzc2lvbklkc1RvVHJhY2suZGVsZXRlKHNlc3Npb25JZCk7XG4gICAgdm9pZCBydW4oKTtcbiAgfTtcblxuICBjb25zdCBzZXNzaW9uSWRzVG9UcmFjayA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuXG4gIC8qKlxuICAgKiBUaGUgbWFpbiBzdGF0cyByZXBvcnRpbmcgbG9vcC5cbiAgICovXG4gIGNvbnN0IHJ1biA9IGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBwYXJ0aWNpcGFudFN0YXRzOiBQYXJ0aWNpcGFudHNTdGF0c1JlcG9ydCA9IHt9O1xuICAgIGNvbnN0IHNlc3Npb25JZHMgPSBuZXcgU2V0KHNlc3Npb25JZHNUb1RyYWNrKTtcbiAgICBpZiAoc2Vzc2lvbklkcy5zaXplID4gMCkge1xuICAgICAgZm9yIChsZXQgcGFydGljaXBhbnQgb2Ygc3RhdGUucGFydGljaXBhbnRzKSB7XG4gICAgICAgIGlmICghc2Vzc2lvbklkcy5oYXMocGFydGljaXBhbnQuc2Vzc2lvbklkKSkgY29udGludWU7XG4gICAgICAgIGNvbnN0IGtpbmQgPSBwYXJ0aWNpcGFudC5pc0xvY2FsUGFydGljaXBhbnRcbiAgICAgICAgICA/ICdwdWJsaXNoZXInXG4gICAgICAgICAgOiAnc3Vic2NyaWJlcic7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgbWVyZ2VkU3RyZWFtID0gbmV3IE1lZGlhU3RyZWFtKFtcbiAgICAgICAgICAgIC4uLihwYXJ0aWNpcGFudC52aWRlb1N0cmVhbT8uZ2V0VmlkZW9UcmFja3MoKSB8fCBbXSksXG4gICAgICAgICAgICAuLi4ocGFydGljaXBhbnQuYXVkaW9TdHJlYW0/LmdldEF1ZGlvVHJhY2tzKCkgfHwgW10pLFxuICAgICAgICAgIF0pO1xuICAgICAgICAgIHBhcnRpY2lwYW50U3RhdHNbcGFydGljaXBhbnQuc2Vzc2lvbklkXSA9IGF3YWl0IGdldFN0YXRzRm9yU3RyZWFtKFxuICAgICAgICAgICAga2luZCxcbiAgICAgICAgICAgIG1lcmdlZFN0cmVhbSxcbiAgICAgICAgICApO1xuICAgICAgICAgIG1lcmdlZFN0cmVhbS5nZXRUcmFja3MoKS5mb3JFYWNoKCh0KSA9PiB7XG4gICAgICAgICAgICBtZXJnZWRTdHJlYW0ucmVtb3ZlVHJhY2sodCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBsb2dnZXIoXG4gICAgICAgICAgICAnZXJyb3InLFxuICAgICAgICAgICAgYEZhaWxlZCB0byBjb2xsZWN0IHN0YXRzIGZvciAke2tpbmR9IGlmICR7cGFydGljaXBhbnQudXNlcklkfWAsXG4gICAgICAgICAgICBlLFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBbc3Vic2NyaWJlclN0YXRzLCBwdWJsaXNoZXJTdGF0c10gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICBzdWJzY3JpYmVyXG4gICAgICAgIC5nZXRTdGF0cygpXG4gICAgICAgIC50aGVuKChyZXBvcnQpID0+XG4gICAgICAgICAgdHJhbnNmb3JtKHJlcG9ydCwge1xuICAgICAgICAgICAga2luZDogJ3N1YnNjcmliZXInLFxuICAgICAgICAgICAgdHJhY2tLaW5kOiAndmlkZW8nLFxuICAgICAgICAgIH0pLFxuICAgICAgICApXG4gICAgICAgIC50aGVuKGFnZ3JlZ2F0ZSksXG4gICAgICBwdWJsaXNoZXJcbiAgICAgICAgLmdldFN0YXRzKClcbiAgICAgICAgLnRoZW4oKHJlcG9ydCkgPT5cbiAgICAgICAgICB0cmFuc2Zvcm0ocmVwb3J0LCB7XG4gICAgICAgICAgICBraW5kOiAncHVibGlzaGVyJyxcbiAgICAgICAgICAgIHRyYWNrS2luZDogJ3ZpZGVvJyxcbiAgICAgICAgICB9KSxcbiAgICAgICAgKVxuICAgICAgICAudGhlbihhZ2dyZWdhdGUpLFxuICAgIF0pO1xuXG4gICAgY29uc3QgW3N1YnNjcmliZXJSYXdTdGF0cywgcHVibGlzaGVyUmF3U3RhdHNdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgZ2V0UmF3U3RhdHNGb3JUcmFjaygnc3Vic2NyaWJlcicpLFxuICAgICAgZ2V0UmF3U3RhdHNGb3JUcmFjaygncHVibGlzaGVyJyksXG4gICAgXSk7XG5cbiAgICBzdGF0ZS5zZXRDYWxsU3RhdHNSZXBvcnQoe1xuICAgICAgZGF0YWNlbnRlcjogcHVibGlzaGVyLnNmdUNsaWVudC5lZGdlTmFtZSxcbiAgICAgIHB1Ymxpc2hlclN0YXRzLFxuICAgICAgc3Vic2NyaWJlclN0YXRzLFxuICAgICAgc3Vic2NyaWJlclJhd1N0YXRzLFxuICAgICAgcHVibGlzaGVyUmF3U3RhdHMsXG4gICAgICBwYXJ0aWNpcGFudHM6IHBhcnRpY2lwYW50U3RhdHMsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgfSk7XG4gIH07XG5cbiAgbGV0IHRpbWVvdXRJZDogTm9kZUpTLlRpbWVvdXQgfCB1bmRlZmluZWQ7XG4gIGlmIChwb2xsaW5nSW50ZXJ2YWxJbk1zID4gMCkge1xuICAgIGNvbnN0IGxvb3AgPSBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBydW4oKS5jYXRjaCgoZSkgPT4ge1xuICAgICAgICBsb2dnZXIoJ2RlYnVnJywgJ0ZhaWxlZCB0byBjb2xsZWN0IHN0YXRzJywgZSk7XG4gICAgICB9KTtcbiAgICAgIHRpbWVvdXRJZCA9IHNldFRpbWVvdXQobG9vcCwgcG9sbGluZ0ludGVydmFsSW5Ncyk7XG4gICAgfTtcbiAgICB2b2lkIGxvb3AoKTtcbiAgfVxuXG4gIGNvbnN0IHN0b3AgPSAoKSA9PiB7XG4gICAgaWYgKHRpbWVvdXRJZCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiB7XG4gICAgZ2V0UmF3U3RhdHNGb3JUcmFjayxcbiAgICBnZXRTdGF0c0ZvclN0cmVhbSxcbiAgICBzdGFydFJlcG9ydGluZ1N0YXRzRm9yLFxuICAgIHN0b3BSZXBvcnRpbmdTdGF0c0ZvcixcbiAgICBzdG9wLFxuICB9O1xufTtcblxuZXhwb3J0IHR5cGUgU3RhdHNUcmFuc2Zvcm1PcHRzID0ge1xuICAvKipcbiAgICogVGhlIGtpbmQgb2YgdHJhY2sgd2UgYXJlIHRyYW5zZm9ybWluZyBzdGF0cyBmb3IuXG4gICAqL1xuICB0cmFja0tpbmQ6ICdhdWRpbycgfCAndmlkZW8nO1xuXG4gIC8qKlxuICAgKiBUaGUga2luZCBvZiBwZWVyIGNvbm5lY3Rpb24gd2UgYXJlIHRyYW5zZm9ybWluZyBzdGF0cyBmb3IuXG4gICAqL1xuICBraW5kOiAnc3Vic2NyaWJlcicgfCAncHVibGlzaGVyJztcbn07XG5cbi8qKlxuICogVHJhbnNmb3JtcyByYXcgUlRDIHN0YXRzIGludG8gYSBzbGltbWVyIGFuZCB1bmlmb3JtIGFjcm9zcyBicm93c2VycyBmb3JtYXQuXG4gKlxuICogQHBhcmFtIHJlcG9ydCB0aGUgcmVwb3J0IHRvIHRyYW5zZm9ybS5cbiAqIEBwYXJhbSBvcHRzIHRoZSB0cmFuc2Zvcm0gb3B0aW9ucy5cbiAqL1xuY29uc3QgdHJhbnNmb3JtID0gKFxuICByZXBvcnQ6IFJUQ1N0YXRzUmVwb3J0LFxuICBvcHRzOiBTdGF0c1RyYW5zZm9ybU9wdHMsXG4pOiBTdGF0c1JlcG9ydCA9PiB7XG4gIGNvbnN0IHsgdHJhY2tLaW5kLCBraW5kIH0gPSBvcHRzO1xuICBjb25zdCBkaXJlY3Rpb24gPSBraW5kID09PSAnc3Vic2NyaWJlcicgPyAnaW5ib3VuZC1ydHAnIDogJ291dGJvdW5kLXJ0cCc7XG4gIGNvbnN0IHN0YXRzID0gZmxhdHRlbihyZXBvcnQpO1xuICBjb25zdCBzdHJlYW1zID0gc3RhdHNcbiAgICAuZmlsdGVyKFxuICAgICAgKHN0YXQpID0+XG4gICAgICAgIHN0YXQudHlwZSA9PT0gZGlyZWN0aW9uICYmXG4gICAgICAgIChzdGF0IGFzIFJUQ1J0cFN0cmVhbVN0YXRzKS5raW5kID09PSB0cmFja0tpbmQsXG4gICAgKVxuICAgIC5tYXAoKHN0YXQpOiBCYXNlU3RhdHMgPT4ge1xuICAgICAgY29uc3QgcnRjU3RyZWFtU3RhdHMgPSBzdGF0IGFzIFJUQ0luYm91bmRSdHBTdHJlYW1TdGF0cyAmXG4gICAgICAgIFJUQ091dGJvdW5kUnRwU3RyZWFtU3RhdHM7XG5cbiAgICAgIGNvbnN0IGNvZGVjID0gc3RhdHMuZmluZChcbiAgICAgICAgKHMpID0+IHMudHlwZSA9PT0gJ2NvZGVjJyAmJiBzLmlkID09PSBydGNTdHJlYW1TdGF0cy5jb2RlY0lkLFxuICAgICAgKSBhcyB7IG1pbWVUeXBlOiBzdHJpbmcgfSB8IHVuZGVmaW5lZDsgLy8gRklYTUUgT0w6IGluY29ycmVjdCB0eXBlIVxuXG4gICAgICBjb25zdCB0cmFuc3BvcnQgPSBzdGF0cy5maW5kKFxuICAgICAgICAocykgPT4gcy50eXBlID09PSAndHJhbnNwb3J0JyAmJiBzLmlkID09PSBydGNTdHJlYW1TdGF0cy50cmFuc3BvcnRJZCxcbiAgICAgICkgYXMgUlRDVHJhbnNwb3J0U3RhdHMgfCB1bmRlZmluZWQ7XG5cbiAgICAgIGxldCByb3VuZFRyaXBUaW1lOiBudW1iZXIgfCB1bmRlZmluZWQ7XG4gICAgICBpZiAodHJhbnNwb3J0ICYmIHRyYW5zcG9ydC5kdGxzU3RhdGUgPT09ICdjb25uZWN0ZWQnKSB7XG4gICAgICAgIGNvbnN0IGNhbmRpZGF0ZVBhaXIgPSBzdGF0cy5maW5kKFxuICAgICAgICAgIChzKSA9PlxuICAgICAgICAgICAgcy50eXBlID09PSAnY2FuZGlkYXRlLXBhaXInICYmXG4gICAgICAgICAgICBzLmlkID09PSB0cmFuc3BvcnQuc2VsZWN0ZWRDYW5kaWRhdGVQYWlySWQsXG4gICAgICAgICkgYXMgUlRDSWNlQ2FuZGlkYXRlUGFpclN0YXRzIHwgdW5kZWZpbmVkO1xuICAgICAgICByb3VuZFRyaXBUaW1lID0gY2FuZGlkYXRlUGFpcj8uY3VycmVudFJvdW5kVHJpcFRpbWU7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGJ5dGVzU2VudDogcnRjU3RyZWFtU3RhdHMuYnl0ZXNTZW50LFxuICAgICAgICBieXRlc1JlY2VpdmVkOiBydGNTdHJlYW1TdGF0cy5ieXRlc1JlY2VpdmVkLFxuICAgICAgICBjb2RlYzogY29kZWM/Lm1pbWVUeXBlLFxuICAgICAgICBjdXJyZW50Um91bmRUcmlwVGltZTogcm91bmRUcmlwVGltZSxcbiAgICAgICAgZnJhbWVIZWlnaHQ6IHJ0Y1N0cmVhbVN0YXRzLmZyYW1lSGVpZ2h0LFxuICAgICAgICBmcmFtZVdpZHRoOiBydGNTdHJlYW1TdGF0cy5mcmFtZVdpZHRoLFxuICAgICAgICBmcmFtZXNQZXJTZWNvbmQ6IHJ0Y1N0cmVhbVN0YXRzLmZyYW1lc1BlclNlY29uZCxcbiAgICAgICAgaml0dGVyOiBydGNTdHJlYW1TdGF0cy5qaXR0ZXIsXG4gICAgICAgIGtpbmQ6IHJ0Y1N0cmVhbVN0YXRzLmtpbmQsXG4gICAgICAgIC8vIEB0cy1pZ25vcmU6IGF2YWlsYWJsZSBpbiBDaHJvbWUgb25seSwgVFMgZG9lc24ndCByZWNvZ25pemUgdGhpc1xuICAgICAgICBxdWFsaXR5TGltaXRhdGlvblJlYXNvbjogcnRjU3RyZWFtU3RhdHMucXVhbGl0eUxpbWl0YXRpb25SZWFzb24sXG4gICAgICAgIHJpZDogcnRjU3RyZWFtU3RhdHMucmlkLFxuICAgICAgICBzc3JjOiBydGNTdHJlYW1TdGF0cy5zc3JjLFxuICAgICAgfTtcbiAgICB9KTtcblxuICByZXR1cm4ge1xuICAgIHJhd1N0YXRzOiByZXBvcnQsXG4gICAgc3RyZWFtcyxcbiAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gIH07XG59O1xuXG4vKipcbiAqIEFnZ3JlZ2F0ZXMgZ2VuZXJpYyBzdGF0cy5cbiAqXG4gKiBAcGFyYW0gc3RhdHMgdGhlIHN0YXRzIHRvIGFnZ3JlZ2F0ZS5cbiAqL1xuY29uc3QgYWdncmVnYXRlID0gKHN0YXRzOiBTdGF0c1JlcG9ydCk6IEFnZ3JlZ2F0ZWRTdGF0c1JlcG9ydCA9PiB7XG4gIGNvbnN0IGFnZ3JlZ2F0ZWRTdGF0czogQWdncmVnYXRlZFN0YXRzUmVwb3J0ID0ge1xuICAgIHJhd1JlcG9ydDogc3RhdHMsXG4gICAgdG90YWxCeXRlc1NlbnQ6IDAsXG4gICAgdG90YWxCeXRlc1JlY2VpdmVkOiAwLFxuICAgIGF2ZXJhZ2VKaXR0ZXJJbk1zOiAwLFxuICAgIGF2ZXJhZ2VSb3VuZFRyaXBUaW1lSW5NczogMCxcbiAgICBxdWFsaXR5TGltaXRhdGlvblJlYXNvbnM6ICdub25lJyxcbiAgICBoaWdoZXN0RnJhbWVXaWR0aDogMCxcbiAgICBoaWdoZXN0RnJhbWVIZWlnaHQ6IDAsXG4gICAgaGlnaGVzdEZyYW1lc1BlclNlY29uZDogMCxcbiAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gIH07XG5cbiAgbGV0IG1heEFyZWEgPSAtMTtcbiAgY29uc3QgYXJlYSA9ICh3OiBudW1iZXIsIGg6IG51bWJlcikgPT4gdyAqIGg7XG5cbiAgY29uc3QgcXVhbGl0eUxpbWl0YXRpb25SZWFzb25zID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gIGNvbnN0IHN0cmVhbXMgPSBzdGF0cy5zdHJlYW1zO1xuICBjb25zdCByZXBvcnQgPSBzdHJlYW1zLnJlZHVjZSgoYWNjLCBzdHJlYW0pID0+IHtcbiAgICBhY2MudG90YWxCeXRlc1NlbnQgKz0gc3RyZWFtLmJ5dGVzU2VudCB8fCAwO1xuICAgIGFjYy50b3RhbEJ5dGVzUmVjZWl2ZWQgKz0gc3RyZWFtLmJ5dGVzUmVjZWl2ZWQgfHwgMDtcbiAgICBhY2MuYXZlcmFnZUppdHRlckluTXMgKz0gc3RyZWFtLmppdHRlciB8fCAwO1xuICAgIGFjYy5hdmVyYWdlUm91bmRUcmlwVGltZUluTXMgKz0gc3RyZWFtLmN1cnJlbnRSb3VuZFRyaXBUaW1lIHx8IDA7XG5cbiAgICAvLyBuYWl2ZSBjYWxjdWxhdGlvbiBvZiB0aGUgaGlnaGVzdCByZXNvbHV0aW9uXG4gICAgY29uc3Qgc3RyZWFtQXJlYSA9IGFyZWEoc3RyZWFtLmZyYW1lV2lkdGggfHwgMCwgc3RyZWFtLmZyYW1lSGVpZ2h0IHx8IDApO1xuICAgIGlmIChzdHJlYW1BcmVhID4gbWF4QXJlYSkge1xuICAgICAgYWNjLmhpZ2hlc3RGcmFtZVdpZHRoID0gc3RyZWFtLmZyYW1lV2lkdGggfHwgMDtcbiAgICAgIGFjYy5oaWdoZXN0RnJhbWVIZWlnaHQgPSBzdHJlYW0uZnJhbWVIZWlnaHQgfHwgMDtcbiAgICAgIGFjYy5oaWdoZXN0RnJhbWVzUGVyU2Vjb25kID0gc3RyZWFtLmZyYW1lc1BlclNlY29uZCB8fCAwO1xuICAgICAgbWF4QXJlYSA9IHN0cmVhbUFyZWE7XG4gICAgfVxuXG4gICAgcXVhbGl0eUxpbWl0YXRpb25SZWFzb25zLmFkZChzdHJlYW0ucXVhbGl0eUxpbWl0YXRpb25SZWFzb24gfHwgJycpO1xuICAgIHJldHVybiBhY2M7XG4gIH0sIGFnZ3JlZ2F0ZWRTdGF0cyk7XG5cbiAgaWYgKHN0cmVhbXMubGVuZ3RoID4gMCkge1xuICAgIHJlcG9ydC5hdmVyYWdlSml0dGVySW5NcyA9IE1hdGgucm91bmQoXG4gICAgICAocmVwb3J0LmF2ZXJhZ2VKaXR0ZXJJbk1zIC8gc3RyZWFtcy5sZW5ndGgpICogMTAwMCxcbiAgICApO1xuICAgIHJlcG9ydC5hdmVyYWdlUm91bmRUcmlwVGltZUluTXMgPSBNYXRoLnJvdW5kKFxuICAgICAgKHJlcG9ydC5hdmVyYWdlUm91bmRUcmlwVGltZUluTXMgLyBzdHJlYW1zLmxlbmd0aCkgKiAxMDAwLFxuICAgICk7XG4gIH1cblxuICBjb25zdCBxdWFsaXR5TGltaXRhdGlvblJlYXNvbiA9IFtcbiAgICBxdWFsaXR5TGltaXRhdGlvblJlYXNvbnMuaGFzKCdjcHUnKSAmJiAnY3B1JyxcbiAgICBxdWFsaXR5TGltaXRhdGlvblJlYXNvbnMuaGFzKCdiYW5kd2lkdGgnKSAmJiAnYmFuZHdpZHRoJyxcbiAgICBxdWFsaXR5TGltaXRhdGlvblJlYXNvbnMuaGFzKCdvdGhlcicpICYmICdvdGhlcicsXG4gIF1cbiAgICAuZmlsdGVyKEJvb2xlYW4pXG4gICAgLmpvaW4oJywgJyk7XG4gIGlmIChxdWFsaXR5TGltaXRhdGlvblJlYXNvbikge1xuICAgIHJlcG9ydC5xdWFsaXR5TGltaXRhdGlvblJlYXNvbnMgPSBxdWFsaXR5TGltaXRhdGlvblJlYXNvbjtcbiAgfVxuXG4gIHJldHVybiByZXBvcnQ7XG59O1xuXG4vKipcbiAqIEZsYXR0ZW4gdGhlIHN0YXRzIHJlcG9ydCBpbnRvIGFuIGFycmF5IG9mIHN0YXRzIG9iamVjdHMuXG4gKlxuICogQHBhcmFtIHJlcG9ydCB0aGUgcmVwb3J0IHRvIGZsYXR0ZW4uXG4gKi9cbmNvbnN0IGZsYXR0ZW4gPSAocmVwb3J0OiBSVENTdGF0c1JlcG9ydCkgPT4ge1xuICBjb25zdCBzdGF0czogUlRDU3RhdHNbXSA9IFtdO1xuICByZXBvcnQuZm9yRWFjaCgocykgPT4ge1xuICAgIHN0YXRzLnB1c2gocyk7XG4gIH0pO1xuICByZXR1cm4gc3RhdHM7XG59O1xuIiwiY29uc3QgREVGQVVMVF9USFJFU0hPTEQgPSAwLjM1O1xuXG5leHBvcnQgdHlwZSBFbnRyeUhhbmRsZXIgPSAoZW50cnk6IEludGVyc2VjdGlvbk9ic2VydmVyRW50cnkpID0+IHZvaWQ7XG5cbmV4cG9ydCB0eXBlIFVub2JzZXJ2ZSA9ICgpID0+IHZvaWQ7XG5cbmV4cG9ydCB0eXBlIE9ic2VydmUgPSAoXG4gIGVsZW1lbnQ6IEhUTUxFbGVtZW50LFxuICBlbnRyeUhhbmRsZXI6IEVudHJ5SGFuZGxlcixcbikgPT4gVW5vYnNlcnZlO1xuXG5leHBvcnQgY2xhc3MgVmlld3BvcnRUcmFja2VyIHtcbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwcml2YXRlIGVsZW1lbnRIYW5kbGVyTWFwOiBNYXA8XG4gICAgSFRNTEVsZW1lbnQsXG4gICAgKGVudHJ5OiBJbnRlcnNlY3Rpb25PYnNlcnZlckVudHJ5KSA9PiB2b2lkXG4gID4gPSBuZXcgTWFwKCk7XG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcHJpdmF0ZSBvYnNlcnZlcjogSW50ZXJzZWN0aW9uT2JzZXJ2ZXIgfCBudWxsID0gbnVsbDtcbiAgLy8gaW4gUmVhY3QgY2hpbGRyZW4gcmVuZGVyIGJlZm9yZSB2aWV3cG9ydCBpcyBzZXQsIGFkZFxuICAvLyB0aGVtIHRvIHRoZSBxdWV1ZSBhbmQgb2JzZXJ2ZSB0aGVtIG9uY2UgdGhlIG9ic2VydmVyIGlzIHJlYWR5XG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcHJpdmF0ZSBxdWV1ZVNldDogU2V0PHJlYWRvbmx5IFtIVE1MRWxlbWVudCwgRW50cnlIYW5kbGVyXT4gPSBuZXcgU2V0KCk7XG5cbiAgLyoqXG4gICAqIE1ldGhvZCB0byBzZXQgc2Nyb2xsYWJsZSB2aWV3cG9ydCBhcyByb290IGZvciB0aGUgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIsIHJldHVybnNcbiAgICogY2xlYW51cCBmdW5jdGlvbiB0byBiZSBpbnZva2VkIHVwb24gZGlzcG9zaW5nIG9mIHRoZSBET00gZWxlbWVudCB0byBwcmV2ZW50IG1lbW9yeSBsZWFrc1xuICAgKlxuICAgKiBAcGFyYW0gdmlld3BvcnRFbGVtZW50XG4gICAqIEBwYXJhbSBvcHRpb25zXG4gICAqIEByZXR1cm5zIFVub2JzZXJ2ZVxuICAgKi9cbiAgcHVibGljIHNldFZpZXdwb3J0ID0gKFxuICAgIHZpZXdwb3J0RWxlbWVudDogSFRNTEVsZW1lbnQsXG4gICAgb3B0aW9ucz86IFBpY2s8SW50ZXJzZWN0aW9uT2JzZXJ2ZXJJbml0LCAndGhyZXNob2xkJyB8ICdyb290TWFyZ2luJz4sXG4gICkgPT4ge1xuICAgIGNvbnN0IGNsZWFudXAgPSAoKSA9PiB7XG4gICAgICB0aGlzLm9ic2VydmVyPy5kaXNjb25uZWN0KCk7XG4gICAgICB0aGlzLm9ic2VydmVyID0gbnVsbDtcbiAgICAgIHRoaXMuZWxlbWVudEhhbmRsZXJNYXAuY2xlYXIoKTtcbiAgICB9O1xuXG4gICAgdGhpcy5vYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihcbiAgICAgIChlbnRyaWVzKSA9PiB7XG4gICAgICAgIGVudHJpZXMuZm9yRWFjaCgoZW50cnkpID0+IHtcbiAgICAgICAgICBjb25zdCBoYW5kbGVyID0gdGhpcy5lbGVtZW50SGFuZGxlck1hcC5nZXQoXG4gICAgICAgICAgICBlbnRyeS50YXJnZXQgYXMgSFRNTEVsZW1lbnQsXG4gICAgICAgICAgKTtcbiAgICAgICAgICBoYW5kbGVyPy4oZW50cnkpO1xuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHJvb3Q6IHZpZXdwb3J0RWxlbWVudCxcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgdGhyZXNob2xkOiBvcHRpb25zPy50aHJlc2hvbGQgPz8gREVGQVVMVF9USFJFU0hPTEQsXG4gICAgICB9LFxuICAgICk7XG5cbiAgICBpZiAodGhpcy5xdWV1ZVNldC5zaXplKSB7XG4gICAgICB0aGlzLnF1ZXVlU2V0LmZvckVhY2goKFtxdWV1ZUVsZW1lbnQsIHF1ZXVlSGFuZGxlcl0pID0+IHtcbiAgICAgICAgLy8gY2hlY2sgaWYgZWxlbWVudCB3aGljaCByZXF1ZXN0ZWQgb2JzZXJ2YXRpb24gaXNcbiAgICAgICAgLy8gYSBjaGlsZCBvZiBhIHZpZXdwb3J0IGVsZW1lbnQsIHNraXAgaWYgaXNuJ3RcbiAgICAgICAgaWYgKCF2aWV3cG9ydEVsZW1lbnQuY29udGFpbnMocXVldWVFbGVtZW50KSkgcmV0dXJuO1xuXG4gICAgICAgIHRoaXMub2JzZXJ2ZXIhLm9ic2VydmUocXVldWVFbGVtZW50KTtcbiAgICAgICAgdGhpcy5lbGVtZW50SGFuZGxlck1hcC5zZXQocXVldWVFbGVtZW50LCBxdWV1ZUhhbmRsZXIpO1xuICAgICAgfSk7XG4gICAgICB0aGlzLnF1ZXVlU2V0LmNsZWFyKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNsZWFudXA7XG4gIH07XG5cbiAgLyoqXG4gICAqIE1ldGhvZCB0byBzZXQgZWxlbWVudCB0byBvYnNlcnZlIGFuZCBoYW5kbGVyIHRvIGJlIHRyaWdnZXJlZCB3aGVuZXZlciBJbnRlcnNlY3Rpb25PYnNlcnZlclxuICAgKiBkZXRlY3RzIGEgcG9zc2libGUgY2hhbmdlIGluIGVsZW1lbnQncyB2aXNpYmlsaXR5IHdpdGhpbiBzcGVjaWZpZWQgdmlld3BvcnQsIHJldHVybnNcbiAgICogY2xlYW51cCBmdW5jdGlvbiB0byBiZSBpbnZva2VkIHVwb24gZGlzcG9zaW5nIG9mIHRoZSBET00gZWxlbWVudCB0byBwcmV2ZW50IG1lbW9yeSBsZWFrc1xuICAgKlxuICAgKiBAcGFyYW0gZWxlbWVudFxuICAgKiBAcGFyYW0gaGFuZGxlclxuICAgKiBAcmV0dXJucyBVbm9ic2VydmVcbiAgICovXG4gIHB1YmxpYyBvYnNlcnZlOiBPYnNlcnZlID0gKGVsZW1lbnQsIGhhbmRsZXIpID0+IHtcbiAgICBjb25zdCBxdWV1ZUl0ZW0gPSBbZWxlbWVudCwgaGFuZGxlcl0gYXMgY29uc3Q7XG5cbiAgICBjb25zdCBjbGVhbnVwID0gKCkgPT4ge1xuICAgICAgdGhpcy5lbGVtZW50SGFuZGxlck1hcC5kZWxldGUoZWxlbWVudCk7XG4gICAgICB0aGlzLm9ic2VydmVyPy51bm9ic2VydmUoZWxlbWVudCk7XG4gICAgICB0aGlzLnF1ZXVlU2V0LmRlbGV0ZShxdWV1ZUl0ZW0pO1xuICAgIH07XG5cbiAgICBpZiAodGhpcy5lbGVtZW50SGFuZGxlck1hcC5oYXMoZWxlbWVudCkpIHJldHVybiBjbGVhbnVwO1xuXG4gICAgaWYgKCF0aGlzLm9ic2VydmVyKSB7XG4gICAgICB0aGlzLnF1ZXVlU2V0LmFkZChxdWV1ZUl0ZW0pO1xuICAgICAgcmV0dXJuIGNsZWFudXA7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMub2JzZXJ2ZXIucm9vdCEuY29udGFpbnMoZWxlbWVudCkpIHtcbiAgICAgIHRoaXMuZWxlbWVudEhhbmRsZXJNYXAuc2V0KGVsZW1lbnQsIGhhbmRsZXIpO1xuICAgICAgdGhpcy5vYnNlcnZlci5vYnNlcnZlKGVsZW1lbnQpO1xuICAgIH1cblxuICAgIHJldHVybiBjbGVhbnVwO1xuICB9O1xufVxuIiwiLyoqXG4gKiBDaGVja3Mgd2hldGhlciB0aGUgY3VycmVudCBicm93c2VyIGlzIFNhZmFyaS5cbiAqL1xuZXhwb3J0IGNvbnN0IGlzU2FmYXJpID0gKCkgPT4ge1xuICBpZiAodHlwZW9mIG5hdmlnYXRvciA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybiBmYWxzZTtcbiAgcmV0dXJuIC9eKCg/IWNocm9tZXxhbmRyb2lkKS4pKnNhZmFyaS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCB8fCAnJyk7XG59O1xuXG4vKipcbiAqIENoZWNrcyB3aGV0aGVyIHRoZSBjdXJyZW50IGJyb3dzZXIgaXMgRmlyZWZveC5cbiAqL1xuZXhwb3J0IGNvbnN0IGlzRmlyZWZveCA9ICgpID0+IHtcbiAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgPT09ICd1bmRlZmluZWQnKSByZXR1cm4gZmFsc2U7XG4gIHJldHVybiBuYXZpZ2F0b3IudXNlckFnZW50Py5pbmNsdWRlcygnRmlyZWZveCcpO1xufTtcblxuLyoqXG4gKiBDaGVja3Mgd2hldGhlciB0aGUgY3VycmVudCBicm93c2VyIGlzIEdvb2dsZSBDaHJvbWUuXG4gKi9cbmV4cG9ydCBjb25zdCBpc0Nocm9tZSA9ICgpID0+IHtcbiAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgPT09ICd1bmRlZmluZWQnKSByZXR1cm4gZmFsc2U7XG4gIHJldHVybiBuYXZpZ2F0b3IudXNlckFnZW50Py5pbmNsdWRlcygnQ2hyb21lJyk7XG59O1xuIiwiaW1wb3J0IHsgQ2FsbCB9IGZyb20gJy4uL0NhbGwnO1xuaW1wb3J0IHtcbiAgQXVkaW9UcmFja1R5cGUsXG4gIERlYm91bmNlVHlwZSxcbiAgU3RyZWFtVmlkZW9QYXJ0aWNpcGFudCxcbiAgVmlkZW9UcmFja1R5cGUsXG4gIFZpc2liaWxpdHlTdGF0ZSxcbn0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHsgVHJhY2tUeXBlLCBWaWRlb0RpbWVuc2lvbiB9IGZyb20gJy4uL2dlbi92aWRlby9zZnUvbW9kZWxzL21vZGVscyc7XG5pbXBvcnQge1xuICBkaXN0aW5jdFVudGlsQ2hhbmdlZCxcbiAgZGlzdGluY3RVbnRpbEtleUNoYW5nZWQsXG4gIG1hcCxcbiAgc2hhcmVSZXBsYXksXG4gIHRha2VXaGlsZSxcbn0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBWaWV3cG9ydFRyYWNrZXIgfSBmcm9tICcuL1ZpZXdwb3J0VHJhY2tlcic7XG5pbXBvcnQgeyBnZXRMb2dnZXIgfSBmcm9tICcuLi9sb2dnZXInO1xuaW1wb3J0IHsgaXNGaXJlZm94LCBpc1NhZmFyaSB9IGZyb20gJy4vYnJvd3NlcnMnO1xuXG5jb25zdCBERUZBVUxUX1ZJRVdQT1JUX1ZJU0lCSUxJVFlfU1RBVEU6IFJlY29yZDxcbiAgVmlkZW9UcmFja1R5cGUsXG4gIFZpc2liaWxpdHlTdGF0ZVxuPiA9IHtcbiAgdmlkZW9UcmFjazogVmlzaWJpbGl0eVN0YXRlLlVOS05PV04sXG4gIHNjcmVlblNoYXJlVHJhY2s6IFZpc2liaWxpdHlTdGF0ZS5VTktOT1dOLFxufSBhcyBjb25zdDtcblxuLyoqXG4gKiBBIG1hbmFnZXIgY2xhc3MgdGhhdCBoYW5kbGVzIGR5bmFzY2FsZSByZWxhdGVkIHRhc2tzIGxpa2U6XG4gKlxuICogLSBiaW5kaW5nIHZpZGVvIGVsZW1lbnRzIHRvIHNlc3Npb24gaWRzXG4gKiAtIGJpbmRpbmcgYXVkaW8gZWxlbWVudHMgdG8gc2Vzc2lvbiBpZHNcbiAqIC0gdHJhY2tpbmcgZWxlbWVudCB2aXNpYmlsaXR5XG4gKiAtIHVwZGF0aW5nIHN1YnNjcmlwdGlvbnMgYmFzZWQgb24gdmlld3BvcnQgdmlzaWJpbGl0eVxuICogLSB1cGRhdGluZyBzdWJzY3JpcHRpb25zIGJhc2VkIG9uIHZpZGVvIGVsZW1lbnQgZGltZW5zaW9uc1xuICogLSB1cGRhdGluZyBzdWJzY3JpcHRpb25zIGJhc2VkIG9uIHB1Ymxpc2hlZCB0cmFja3NcbiAqL1xuZXhwb3J0IGNsYXNzIER5bmFzY2FsZU1hbmFnZXIge1xuICAvKipcbiAgICogVGhlIHZpZXdwb3J0IHRyYWNrZXIgaW5zdGFuY2UuXG4gICAqL1xuICByZWFkb25seSB2aWV3cG9ydFRyYWNrZXIgPSBuZXcgVmlld3BvcnRUcmFja2VyKCk7XG5cbiAgcHJpdmF0ZSBsb2dnZXIgPSBnZXRMb2dnZXIoWydEeW5hc2NhbGVNYW5hZ2VyJ10pO1xuICBwcml2YXRlIGNhbGw6IENhbGw7XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgRHluYXNjYWxlTWFuYWdlciBpbnN0YW5jZS5cbiAgICpcbiAgICogQHBhcmFtIGNhbGwgdGhlIGNhbGwgdG8gbWFuYWdlLlxuICAgKi9cbiAgY29uc3RydWN0b3IoY2FsbDogQ2FsbCkge1xuICAgIHRoaXMuY2FsbCA9IGNhbGw7XG4gIH1cblxuICAvKipcbiAgICogV2lsbCBiZWdpbiB0cmFja2luZyB0aGUgZ2l2ZW4gZWxlbWVudCBmb3IgdmlzaWJpbGl0eSBjaGFuZ2VzIHdpdGhpbiB0aGVcbiAgICogY29uZmlndXJlZCB2aWV3cG9ydCBlbGVtZW50IChgY2FsbC5zZXRWaWV3cG9ydGApLlxuICAgKlxuICAgKiBAcGFyYW0gZWxlbWVudCB0aGUgZWxlbWVudCB0byB0cmFjay5cbiAgICogQHBhcmFtIHNlc3Npb25JZCB0aGUgc2Vzc2lvbiBpZC5cbiAgICogQHBhcmFtIHRyYWNrVHlwZSB0aGUga2luZCBvZiB2aWRlby5cbiAgICogQHJldHVybnMgVW50cmFjay5cbiAgICovXG4gIHRyYWNrRWxlbWVudFZpc2liaWxpdHkgPSA8VCBleHRlbmRzIEhUTUxFbGVtZW50PihcbiAgICBlbGVtZW50OiBULFxuICAgIHNlc3Npb25JZDogc3RyaW5nLFxuICAgIHRyYWNrVHlwZTogVmlkZW9UcmFja1R5cGUsXG4gICkgPT4ge1xuICAgIGNvbnN0IGNsZWFudXAgPSB0aGlzLnZpZXdwb3J0VHJhY2tlci5vYnNlcnZlKGVsZW1lbnQsIChlbnRyeSkgPT4ge1xuICAgICAgdGhpcy5jYWxsLnN0YXRlLnVwZGF0ZVBhcnRpY2lwYW50KHNlc3Npb25JZCwgKHBhcnRpY2lwYW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHByZXZpb3VzVmlzaWJpbGl0eVN0YXRlID1cbiAgICAgICAgICBwYXJ0aWNpcGFudC52aWV3cG9ydFZpc2liaWxpdHlTdGF0ZSA/P1xuICAgICAgICAgIERFRkFVTFRfVklFV1BPUlRfVklTSUJJTElUWV9TVEFURTtcblxuICAgICAgICAvLyBvYnNlcnZlciB0cmlnZ2VycyB3aGVuIHRoZSBlbGVtZW50IGlzIFwibW92ZWRcIiB0byBiZSBhIGZ1bGxzY3JlZW4gZWxlbWVudFxuICAgICAgICAvLyBrZWVwIGl0IFZJU0lCTEUgaWYgdGhhdCBoYXBwZW5zIHRvIHByZXZlbnQgZnVsbHNjcmVlbiB3aXRoIHBsYWNlaG9sZGVyXG4gICAgICAgIGNvbnN0IGlzVmlzaWJsZSA9XG4gICAgICAgICAgZW50cnkuaXNJbnRlcnNlY3RpbmcgfHwgZG9jdW1lbnQuZnVsbHNjcmVlbkVsZW1lbnQgPT09IGVsZW1lbnRcbiAgICAgICAgICAgID8gVmlzaWJpbGl0eVN0YXRlLlZJU0lCTEVcbiAgICAgICAgICAgIDogVmlzaWJpbGl0eVN0YXRlLklOVklTSUJMRTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5wYXJ0aWNpcGFudCxcbiAgICAgICAgICB2aWV3cG9ydFZpc2liaWxpdHlTdGF0ZToge1xuICAgICAgICAgICAgLi4ucHJldmlvdXNWaXNpYmlsaXR5U3RhdGUsXG4gICAgICAgICAgICBbdHJhY2tUeXBlXTogaXNWaXNpYmxlLFxuICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBjbGVhbnVwKCk7XG4gICAgICAvLyByZXNldCB2aXNpYmlsaXR5IHN0YXRlIHRvIFVOS05PV04gdXBvbiBjbGVhbnVwXG4gICAgICAvLyBzbyB0aGF0IHRoZSBsYXlvdXRzIHRoYXQgYXJlIG5vdCBhY3RpdmVseSBvYnNlcnZlZFxuICAgICAgLy8gY2FuIHN0aWxsIGZ1bmN0aW9uIG5vcm1hbGx5IChydW50aW1lIGxheW91dCBzd2l0Y2hpbmcpXG4gICAgICB0aGlzLmNhbGwuc3RhdGUudXBkYXRlUGFydGljaXBhbnQoc2Vzc2lvbklkLCAocGFydGljaXBhbnQpID0+IHtcbiAgICAgICAgY29uc3QgcHJldmlvdXNWaXNpYmlsaXR5U3RhdGUgPVxuICAgICAgICAgIHBhcnRpY2lwYW50LnZpZXdwb3J0VmlzaWJpbGl0eVN0YXRlID8/XG4gICAgICAgICAgREVGQVVMVF9WSUVXUE9SVF9WSVNJQklMSVRZX1NUQVRFO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLnBhcnRpY2lwYW50LFxuICAgICAgICAgIHZpZXdwb3J0VmlzaWJpbGl0eVN0YXRlOiB7XG4gICAgICAgICAgICAuLi5wcmV2aW91c1Zpc2liaWxpdHlTdGF0ZSxcbiAgICAgICAgICAgIFt0cmFja1R5cGVdOiBWaXNpYmlsaXR5U3RhdGUuVU5LTk9XTixcbiAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgfTtcbiAgfTtcblxuICAvKipcbiAgICogU2V0cyB0aGUgdmlld3BvcnQgZWxlbWVudCB0byB0cmFjayBib3VuZCB2aWRlbyBlbGVtZW50cyBmb3IgdmlzaWJpbGl0eS5cbiAgICpcbiAgICogQHBhcmFtIGVsZW1lbnQgdGhlIHZpZXdwb3J0IGVsZW1lbnQuXG4gICAqL1xuICBzZXRWaWV3cG9ydCA9IDxUIGV4dGVuZHMgSFRNTEVsZW1lbnQ+KGVsZW1lbnQ6IFQpID0+IHtcbiAgICByZXR1cm4gdGhpcy52aWV3cG9ydFRyYWNrZXIuc2V0Vmlld3BvcnQoZWxlbWVudCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEJpbmRzIGEgRE9NIDx2aWRlbz4gZWxlbWVudCB0byB0aGUgZ2l2ZW4gc2Vzc2lvbiBpZC5cbiAgICogVGhpcyBtZXRob2Qgd2lsbCBtYWtlIHN1cmUgdGhhdCB0aGUgdmlkZW8gZWxlbWVudCB3aWxsIHBsYXlcbiAgICogdGhlIGNvcnJlY3QgdmlkZW8gc3RyZWFtIGZvciB0aGUgZ2l2ZW4gc2Vzc2lvbiBpZC5cbiAgICpcbiAgICogVW5kZXIgdGhlIGhvb2QsIGl0IHdvdWxkIGFsc28ga2VlcCB0cmFjayBvZiB0aGUgdmlkZW8gZWxlbWVudCBkaW1lbnNpb25zXG4gICAqIGFuZCB1cGRhdGUgdGhlIHN1YnNjcmlwdGlvbiBhY2NvcmRpbmdseSBpbiBvcmRlciB0byBvcHRpbWl6ZSB0aGUgYmFuZHdpZHRoLlxuICAgKlxuICAgKiBJZiBhIFwidmlld3BvcnRcIiBpcyBjb25maWd1cmVkLCB0aGUgdmlkZW8gZWxlbWVudCB3aWxsIGJlIGF1dG9tYXRpY2FsbHlcbiAgICogdHJhY2tlZCBmb3IgdmlzaWJpbGl0eSBhbmQgdGhlIHN1YnNjcmlwdGlvbiB3aWxsIGJlIHVwZGF0ZWQgYWNjb3JkaW5nbHkuXG4gICAqXG4gICAqIEBwYXJhbSB2aWRlb0VsZW1lbnQgdGhlIHZpZGVvIGVsZW1lbnQgdG8gYmluZCB0by5cbiAgICogQHBhcmFtIHNlc3Npb25JZCB0aGUgc2Vzc2lvbiBpZC5cbiAgICogQHBhcmFtIHRyYWNrVHlwZSB0aGUga2luZCBvZiB2aWRlby5cbiAgICovXG4gIGJpbmRWaWRlb0VsZW1lbnQgPSAoXG4gICAgdmlkZW9FbGVtZW50OiBIVE1MVmlkZW9FbGVtZW50LFxuICAgIHNlc3Npb25JZDogc3RyaW5nLFxuICAgIHRyYWNrVHlwZTogVmlkZW9UcmFja1R5cGUsXG4gICkgPT4ge1xuICAgIGNvbnN0IGJvdW5kUGFydGljaXBhbnQgPVxuICAgICAgdGhpcy5jYWxsLnN0YXRlLmZpbmRQYXJ0aWNpcGFudEJ5U2Vzc2lvbklkKHNlc3Npb25JZCk7XG4gICAgaWYgKCFib3VuZFBhcnRpY2lwYW50KSByZXR1cm47XG5cbiAgICBjb25zdCByZXF1ZXN0VHJhY2tXaXRoRGltZW5zaW9ucyA9IChcbiAgICAgIGRlYm91bmNlVHlwZTogRGVib3VuY2VUeXBlLFxuICAgICAgZGltZW5zaW9uOiBWaWRlb0RpbWVuc2lvbiB8IHVuZGVmaW5lZCxcbiAgICApID0+IHtcbiAgICAgIGlmIChkaW1lbnNpb24gJiYgKGRpbWVuc2lvbi53aWR0aCA9PT0gMCB8fCBkaW1lbnNpb24uaGVpZ2h0ID09PSAwKSkge1xuICAgICAgICAvLyBpZ25vcmUgMHgwIGRpbWVuc2lvbnMuIHRoaXMgY2FuIGhhcHBlbiB3aGVuIHRoZSB2aWRlbyBlbGVtZW50XG4gICAgICAgIC8vIGlzIG5vdCB2aXNpYmxlIChlLmcuLCBoYXMgZGlzcGxheTogbm9uZSkuXG4gICAgICAgIC8vIHdlIHRyZWF0IHRoaXMgYXMgXCJ1bnN1YnNjcmlwdGlvblwiIGFzIHdlIGRvbid0IHdhbnQgdG8ga2VlcFxuICAgICAgICAvLyBjb25zdW1pbmcgYmFuZHdpZHRoIGZvciBhIHZpZGVvIHRoYXQgaXMgbm90IHZpc2libGUgb24gdGhlIHNjcmVlbi5cbiAgICAgICAgdGhpcy5sb2dnZXIoJ2RlYnVnJywgYElnbm9yaW5nIDB4MCBkaW1lbnNpb25gLCBib3VuZFBhcnRpY2lwYW50KTtcbiAgICAgICAgZGltZW5zaW9uID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgICAgdGhpcy5jYWxsLnVwZGF0ZVN1YnNjcmlwdGlvbnNQYXJ0aWFsKFxuICAgICAgICB0cmFja1R5cGUsXG4gICAgICAgIHsgW3Nlc3Npb25JZF06IHsgZGltZW5zaW9uIH0gfSxcbiAgICAgICAgZGVib3VuY2VUeXBlLFxuICAgICAgKTtcbiAgICB9O1xuXG4gICAgY29uc3QgcGFydGljaXBhbnQkID0gdGhpcy5jYWxsLnN0YXRlLnBhcnRpY2lwYW50cyQucGlwZShcbiAgICAgIG1hcChcbiAgICAgICAgKHBhcnRpY2lwYW50cykgPT5cbiAgICAgICAgICBwYXJ0aWNpcGFudHMuZmluZChcbiAgICAgICAgICAgIChwYXJ0aWNpcGFudCkgPT4gcGFydGljaXBhbnQuc2Vzc2lvbklkID09PSBzZXNzaW9uSWQsXG4gICAgICAgICAgKSBhcyBTdHJlYW1WaWRlb1BhcnRpY2lwYW50LFxuICAgICAgKSxcbiAgICAgIHRha2VXaGlsZSgocGFydGljaXBhbnQpID0+ICEhcGFydGljaXBhbnQpLFxuICAgICAgZGlzdGluY3RVbnRpbENoYW5nZWQoKSxcbiAgICAgIHNoYXJlUmVwbGF5KHsgYnVmZmVyU2l6ZTogMSwgcmVmQ291bnQ6IHRydWUgfSksXG4gICAgKTtcblxuICAgIC8qKlxuICAgICAqIFNpbmNlIHRoZSB2aWRlbyBlbGVtZW50cyBhcmUgbm93IGJlaW5nIHJlbW92ZWQgZnJvbSB0aGUgRE9NIChSZWFjdCBTREspIHVwb25cbiAgICAgKiB2aXNpYmlsaXR5IGNoYW5nZSwgdGhpcyBzdWJzY3JpcHRpb24gaXMgbm90IGluIHVzZSBhbiBzdGF5cyBoZXJlIG9ubHkgZm9yIHRoZVxuICAgICAqIHBsYWluIEpTIGludGVncmF0aW9ucyB3aGVyZSBpbnRlZ3JhdG9ycyBtaWdodCBjaG9vc2Ugbm90IHRvIHJlbW92ZSB0aGUgdmlkZW9cbiAgICAgKiBlbGVtZW50cyBmcm9tIHRoZSBET00uXG4gICAgICovXG4gICAgLy8ga2VlcCBjb3B5IGZvciByZXNpemUgb2JzZXJ2ZXIgaGFuZGxlclxuICAgIGxldCB2aWV3cG9ydFZpc2liaWxpdHlTdGF0ZTogVmlzaWJpbGl0eVN0YXRlIHwgdW5kZWZpbmVkO1xuICAgIGNvbnN0IHZpZXdwb3J0VmlzaWJpbGl0eVN0YXRlU3Vic2NyaXB0aW9uID1cbiAgICAgIGJvdW5kUGFydGljaXBhbnQuaXNMb2NhbFBhcnRpY2lwYW50XG4gICAgICAgID8gbnVsbFxuICAgICAgICA6IHBhcnRpY2lwYW50JFxuICAgICAgICAgICAgLnBpcGUoXG4gICAgICAgICAgICAgIG1hcCgocCkgPT4gcC52aWV3cG9ydFZpc2liaWxpdHlTdGF0ZT8uW3RyYWNrVHlwZV0pLFxuICAgICAgICAgICAgICBkaXN0aW5jdFVudGlsQ2hhbmdlZCgpLFxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgLnN1YnNjcmliZSgobmV4dFZpZXdwb3J0VmlzaWJpbGl0eVN0YXRlKSA9PiB7XG4gICAgICAgICAgICAgIC8vIHNraXAgaW5pdGlhbCB0cmlnZ2VyXG4gICAgICAgICAgICAgIGlmICghdmlld3BvcnRWaXNpYmlsaXR5U3RhdGUpIHtcbiAgICAgICAgICAgICAgICB2aWV3cG9ydFZpc2liaWxpdHlTdGF0ZSA9XG4gICAgICAgICAgICAgICAgICBuZXh0Vmlld3BvcnRWaXNpYmlsaXR5U3RhdGUgPz8gVmlzaWJpbGl0eVN0YXRlLlVOS05PV047XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHZpZXdwb3J0VmlzaWJpbGl0eVN0YXRlID1cbiAgICAgICAgICAgICAgICBuZXh0Vmlld3BvcnRWaXNpYmlsaXR5U3RhdGUgPz8gVmlzaWJpbGl0eVN0YXRlLlVOS05PV047XG5cbiAgICAgICAgICAgICAgaWYgKG5leHRWaWV3cG9ydFZpc2liaWxpdHlTdGF0ZSA9PT0gVmlzaWJpbGl0eVN0YXRlLklOVklTSUJMRSkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXF1ZXN0VHJhY2tXaXRoRGltZW5zaW9ucyhcbiAgICAgICAgICAgICAgICAgIERlYm91bmNlVHlwZS5NRURJVU0sXG4gICAgICAgICAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHJlcXVlc3RUcmFja1dpdGhEaW1lbnNpb25zKERlYm91bmNlVHlwZS5NRURJVU0sIHtcbiAgICAgICAgICAgICAgICB3aWR0aDogdmlkZW9FbGVtZW50LmNsaWVudFdpZHRoLFxuICAgICAgICAgICAgICAgIGhlaWdodDogdmlkZW9FbGVtZW50LmNsaWVudEhlaWdodCxcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgIGxldCBsYXN0RGltZW5zaW9uczogc3RyaW5nIHwgdW5kZWZpbmVkO1xuICAgIGNvbnN0IHJlc2l6ZU9ic2VydmVyID0gYm91bmRQYXJ0aWNpcGFudC5pc0xvY2FsUGFydGljaXBhbnRcbiAgICAgID8gbnVsbFxuICAgICAgOiBuZXcgUmVzaXplT2JzZXJ2ZXIoKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IGN1cnJlbnREaW1lbnNpb25zID0gYCR7dmlkZW9FbGVtZW50LmNsaWVudFdpZHRofSwke3ZpZGVvRWxlbWVudC5jbGllbnRIZWlnaHR9YDtcblxuICAgICAgICAgIC8vIHNraXAgaW5pdGlhbCB0cmlnZ2VyXG4gICAgICAgICAgaWYgKCFsYXN0RGltZW5zaW9ucykge1xuICAgICAgICAgICAgbGFzdERpbWVuc2lvbnMgPSBjdXJyZW50RGltZW5zaW9ucztcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBsYXN0RGltZW5zaW9ucyA9PT0gY3VycmVudERpbWVuc2lvbnMgfHxcbiAgICAgICAgICAgIHZpZXdwb3J0VmlzaWJpbGl0eVN0YXRlID09PSBWaXNpYmlsaXR5U3RhdGUuSU5WSVNJQkxFXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmVxdWVzdFRyYWNrV2l0aERpbWVuc2lvbnMoRGVib3VuY2VUeXBlLlNMT1csIHtcbiAgICAgICAgICAgIHdpZHRoOiB2aWRlb0VsZW1lbnQuY2xpZW50V2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQ6IHZpZGVvRWxlbWVudC5jbGllbnRIZWlnaHQsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgbGFzdERpbWVuc2lvbnMgPSBjdXJyZW50RGltZW5zaW9ucztcbiAgICAgICAgfSk7XG4gICAgcmVzaXplT2JzZXJ2ZXI/Lm9ic2VydmUodmlkZW9FbGVtZW50KTtcblxuICAgIC8vIGVsZW1lbnQgcmVuZGVycyBhbmQgZ2V0cyBib3VuZCAtIHRyYWNrIHN1YnNjcmlwdGlvbiBnZXRzXG4gICAgLy8gdHJpZ2dlcmVkIGZpcnN0IG90aGVyIG9uZXMgZ2V0IHNraXBwZWQgb24gaW5pdGlhbCBzdWJzY3JpcHRpb25zXG4gICAgY29uc3QgcHVibGlzaGVkVHJhY2tzU3Vic2NyaXB0aW9uID0gYm91bmRQYXJ0aWNpcGFudC5pc0xvY2FsUGFydGljaXBhbnRcbiAgICAgID8gbnVsbFxuICAgICAgOiBwYXJ0aWNpcGFudCRcbiAgICAgICAgICAucGlwZShcbiAgICAgICAgICAgIGRpc3RpbmN0VW50aWxLZXlDaGFuZ2VkKCdwdWJsaXNoZWRUcmFja3MnKSxcbiAgICAgICAgICAgIG1hcCgocCkgPT5cbiAgICAgICAgICAgICAgcC5wdWJsaXNoZWRUcmFja3MuaW5jbHVkZXMoXG4gICAgICAgICAgICAgICAgdHJhY2tUeXBlID09PSAndmlkZW9UcmFjaydcbiAgICAgICAgICAgICAgICAgID8gVHJhY2tUeXBlLlZJREVPXG4gICAgICAgICAgICAgICAgICA6IFRyYWNrVHlwZS5TQ1JFRU5fU0hBUkUsXG4gICAgICAgICAgICAgICksXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgZGlzdGluY3RVbnRpbENoYW5nZWQoKSxcbiAgICAgICAgICApXG4gICAgICAgICAgLnN1YnNjcmliZSgoaXNQdWJsaXNoaW5nKSA9PiB7XG4gICAgICAgICAgICBpZiAoaXNQdWJsaXNoaW5nKSB7XG4gICAgICAgICAgICAgIC8vIHRoZSBwYXJ0aWNpcGFudCBqdXN0IHN0YXJ0ZWQgdG8gcHVibGlzaCBhIHRyYWNrXG4gICAgICAgICAgICAgIHJlcXVlc3RUcmFja1dpdGhEaW1lbnNpb25zKERlYm91bmNlVHlwZS5GQVNULCB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IHZpZGVvRWxlbWVudC5jbGllbnRXaWR0aCxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IHZpZGVvRWxlbWVudC5jbGllbnRIZWlnaHQsXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gdGhlIHBhcnRpY2lwYW50IGp1c3Qgc3RvcHBlZCBwdWJsaXNoaW5nIGEgdHJhY2tcbiAgICAgICAgICAgICAgcmVxdWVzdFRyYWNrV2l0aERpbWVuc2lvbnMoRGVib3VuY2VUeXBlLkZBU1QsIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG5cbiAgICB2aWRlb0VsZW1lbnQuYXV0b3BsYXkgPSB0cnVlO1xuICAgIHZpZGVvRWxlbWVudC5wbGF5c0lubGluZSA9IHRydWU7XG5cbiAgICAvLyBleHBsaWNpdGx5IG1hcmtpbmcgdGhlIGVsZW1lbnQgYXMgbXV0ZWQgd2lsbCBhbGxvdyBhdXRvcGxheSB0byB3b3JrXG4gICAgLy8gd2l0aG91dCBwcmlvciB1c2VyIGludGVyYWN0aW9uOlxuICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL01lZGlhL0F1dG9wbGF5X2d1aWRlXG4gICAgdmlkZW9FbGVtZW50Lm11dGVkID0gdHJ1ZTtcblxuICAgIGNvbnN0IHN0cmVhbVN1YnNjcmlwdGlvbiA9IHBhcnRpY2lwYW50JFxuICAgICAgLnBpcGUoXG4gICAgICAgIGRpc3RpbmN0VW50aWxLZXlDaGFuZ2VkKFxuICAgICAgICAgIHRyYWNrVHlwZSA9PT0gJ3ZpZGVvVHJhY2snID8gJ3ZpZGVvU3RyZWFtJyA6ICdzY3JlZW5TaGFyZVN0cmVhbScsXG4gICAgICAgICksXG4gICAgICApXG4gICAgICAuc3Vic2NyaWJlKChwKSA9PiB7XG4gICAgICAgIGNvbnN0IHNvdXJjZSA9XG4gICAgICAgICAgdHJhY2tUeXBlID09PSAndmlkZW9UcmFjaycgPyBwLnZpZGVvU3RyZWFtIDogcC5zY3JlZW5TaGFyZVN0cmVhbTtcbiAgICAgICAgaWYgKHZpZGVvRWxlbWVudC5zcmNPYmplY3QgPT09IHNvdXJjZSkgcmV0dXJuO1xuICAgICAgICB2aWRlb0VsZW1lbnQuc3JjT2JqZWN0ID0gc291cmNlID8/IG51bGw7XG4gICAgICAgIGlmIChpc1NhZmFyaSgpIHx8IGlzRmlyZWZveCgpKSB7XG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICB2aWRlb0VsZW1lbnQuc3JjT2JqZWN0ID0gc291cmNlID8/IG51bGw7XG4gICAgICAgICAgICB2aWRlb0VsZW1lbnQucGxheSgpLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgICAgIHRoaXMubG9nZ2VyKCd3YXJuJywgYEZhaWxlZCB0byBwbGF5IHN0cmVhbWAsIGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyB3ZSBhZGQgZXh0cmEgZGVsYXkgdW50aWwgd2UgYXR0ZW1wdCB0byBmb3JjZS1wbGF5XG4gICAgICAgICAgICAvLyB0aGUgcGFydGljaXBhbnQncyBtZWRpYSBzdHJlYW0gaW4gRmlyZWZveCBhbmQgU2FmYXJpLFxuICAgICAgICAgICAgLy8gYXMgdGhleSBzZWVtIHRvIGhhdmUgc29tZSB0aW1pbmcgaXNzdWVzXG4gICAgICAgICAgfSwgMjUpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICByZXF1ZXN0VHJhY2tXaXRoRGltZW5zaW9ucyhEZWJvdW5jZVR5cGUuRkFTVCwgdW5kZWZpbmVkKTtcbiAgICAgIHZpZXdwb3J0VmlzaWJpbGl0eVN0YXRlU3Vic2NyaXB0aW9uPy51bnN1YnNjcmliZSgpO1xuICAgICAgcHVibGlzaGVkVHJhY2tzU3Vic2NyaXB0aW9uPy51bnN1YnNjcmliZSgpO1xuICAgICAgc3RyZWFtU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICByZXNpemVPYnNlcnZlcj8uZGlzY29ubmVjdCgpO1xuICAgIH07XG4gIH07XG5cbiAgLyoqXG4gICAqIEJpbmRzIGEgRE9NIDxhdWRpbz4gZWxlbWVudCB0byB0aGUgZ2l2ZW4gc2Vzc2lvbiBpZC5cbiAgICpcbiAgICogVGhpcyBtZXRob2Qgd2lsbCBtYWtlIHN1cmUgdGhhdCB0aGUgYXVkaW8gZWxlbWVudCB3aWxsXG4gICAqIHBsYXkgdGhlIGNvcnJlY3QgYXVkaW8gc3RyZWFtIGZvciB0aGUgZ2l2ZW4gc2Vzc2lvbiBpZC5cbiAgICpcbiAgICogQHBhcmFtIGF1ZGlvRWxlbWVudCB0aGUgYXVkaW8gZWxlbWVudCB0byBiaW5kIHRvLlxuICAgKiBAcGFyYW0gc2Vzc2lvbklkIHRoZSBzZXNzaW9uIGlkLlxuICAgKiBAcGFyYW0gdHJhY2tUeXBlIHRoZSBraW5kIG9mIGF1ZGlvLlxuICAgKiBAcmV0dXJucyBhIGNsZWFudXAgZnVuY3Rpb24gdGhhdCB3aWxsIHVuYmluZCB0aGUgYXVkaW8gZWxlbWVudC5cbiAgICovXG4gIGJpbmRBdWRpb0VsZW1lbnQgPSAoXG4gICAgYXVkaW9FbGVtZW50OiBIVE1MQXVkaW9FbGVtZW50LFxuICAgIHNlc3Npb25JZDogc3RyaW5nLFxuICAgIHRyYWNrVHlwZTogQXVkaW9UcmFja1R5cGUsXG4gICkgPT4ge1xuICAgIGNvbnN0IHBhcnRpY2lwYW50ID0gdGhpcy5jYWxsLnN0YXRlLmZpbmRQYXJ0aWNpcGFudEJ5U2Vzc2lvbklkKHNlc3Npb25JZCk7XG4gICAgaWYgKCFwYXJ0aWNpcGFudCB8fCBwYXJ0aWNpcGFudC5pc0xvY2FsUGFydGljaXBhbnQpIHJldHVybjtcblxuICAgIGNvbnN0IHBhcnRpY2lwYW50JCA9IHRoaXMuY2FsbC5zdGF0ZS5wYXJ0aWNpcGFudHMkLnBpcGUoXG4gICAgICBtYXAoXG4gICAgICAgIChwYXJ0aWNpcGFudHMpID0+XG4gICAgICAgICAgcGFydGljaXBhbnRzLmZpbmQoXG4gICAgICAgICAgICAocCkgPT4gcC5zZXNzaW9uSWQgPT09IHNlc3Npb25JZCxcbiAgICAgICAgICApIGFzIFN0cmVhbVZpZGVvUGFydGljaXBhbnQsXG4gICAgICApLFxuICAgICAgdGFrZVdoaWxlKChwKSA9PiAhIXApLFxuICAgICAgZGlzdGluY3RVbnRpbENoYW5nZWQoKSxcbiAgICAgIHNoYXJlUmVwbGF5KHsgYnVmZmVyU2l6ZTogMSwgcmVmQ291bnQ6IHRydWUgfSksXG4gICAgKTtcblxuICAgIGNvbnN0IHVwZGF0ZU1lZGlhU3RyZWFtU3Vic2NyaXB0aW9uID0gcGFydGljaXBhbnQkXG4gICAgICAucGlwZShcbiAgICAgICAgZGlzdGluY3RVbnRpbEtleUNoYW5nZWQoXG4gICAgICAgICAgdHJhY2tUeXBlID09PSAnc2NyZWVuU2hhcmVBdWRpb1RyYWNrJ1xuICAgICAgICAgICAgPyAnc2NyZWVuU2hhcmVBdWRpb1N0cmVhbSdcbiAgICAgICAgICAgIDogJ2F1ZGlvU3RyZWFtJyxcbiAgICAgICAgKSxcbiAgICAgIClcbiAgICAgIC5zdWJzY3JpYmUoKHApID0+IHtcbiAgICAgICAgY29uc3Qgc291cmNlID1cbiAgICAgICAgICB0cmFja1R5cGUgPT09ICdzY3JlZW5TaGFyZUF1ZGlvVHJhY2snXG4gICAgICAgICAgICA/IHAuc2NyZWVuU2hhcmVBdWRpb1N0cmVhbVxuICAgICAgICAgICAgOiBwLmF1ZGlvU3RyZWFtO1xuICAgICAgICBpZiAoYXVkaW9FbGVtZW50LnNyY09iamVjdCA9PT0gc291cmNlKSByZXR1cm47XG5cbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgYXVkaW9FbGVtZW50LnNyY09iamVjdCA9IHNvdXJjZSA/PyBudWxsO1xuICAgICAgICAgIGlmIChhdWRpb0VsZW1lbnQuc3JjT2JqZWN0KSB7XG4gICAgICAgICAgICBhdWRpb0VsZW1lbnQucGxheSgpLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgICAgIHRoaXMubG9nZ2VyKCd3YXJuJywgYEZhaWxlZCB0byBwbGF5IHN0cmVhbWAsIGUpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIGF1ZGlvIG91dHB1dCBkZXZpY2Ugc2hhbGwgYmUgc2V0IGFmdGVyIHRoZSBhdWRpbyBlbGVtZW50IGlzIHBsYXllZFxuICAgICAgICAgICAgLy8gb3RoZXJ3aXNlLCB0aGUgYnJvd3NlciB3aWxsIG5vdCBwaWNrIGl0IHVwLCBhbmQgd2lsbCBhbHdheXNcbiAgICAgICAgICAgIC8vIHBsYXkgYXVkaW8gdGhyb3VnaCB0aGUgc3lzdGVtJ3MgZGVmYXVsdCBkZXZpY2VcbiAgICAgICAgICAgIGNvbnN0IHsgc2VsZWN0ZWREZXZpY2UgfSA9IHRoaXMuY2FsbC5zcGVha2VyLnN0YXRlO1xuICAgICAgICAgICAgaWYgKHNlbGVjdGVkRGV2aWNlICYmICdzZXRTaW5rSWQnIGluIGF1ZGlvRWxlbWVudCkge1xuICAgICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIHNldFNpbmtJZCBpcyBub3QgeWV0IGluIHRoZSBsaWJcbiAgICAgICAgICAgICAgYXVkaW9FbGVtZW50LnNldFNpbmtJZChzZWxlY3RlZERldmljZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgY29uc3Qgc2lua0lkU3Vic2NyaXB0aW9uID0gISgnc2V0U2lua0lkJyBpbiBhdWRpb0VsZW1lbnQpXG4gICAgICA/IG51bGxcbiAgICAgIDogdGhpcy5jYWxsLnNwZWFrZXIuc3RhdGUuc2VsZWN0ZWREZXZpY2UkLnN1YnNjcmliZSgoZGV2aWNlSWQpID0+IHtcbiAgICAgICAgICBpZiAoZGV2aWNlSWQpIHtcbiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3Igc2V0U2lua0lkIGlzIG5vdCB5ZXQgaW4gdGhlIGxpYlxuICAgICAgICAgICAgYXVkaW9FbGVtZW50LnNldFNpbmtJZChkZXZpY2VJZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgIGNvbnN0IHZvbHVtZVN1YnNjcmlwdGlvbiA9IHRoaXMuY2FsbC5zcGVha2VyLnN0YXRlLnZvbHVtZSQuc3Vic2NyaWJlKFxuICAgICAgKHZvbHVtZSkgPT4ge1xuICAgICAgICBhdWRpb0VsZW1lbnQudm9sdW1lID0gdm9sdW1lO1xuICAgICAgfSxcbiAgICApO1xuXG4gICAgYXVkaW9FbGVtZW50LmF1dG9wbGF5ID0gdHJ1ZTtcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBzaW5rSWRTdWJzY3JpcHRpb24/LnVuc3Vic2NyaWJlKCk7XG4gICAgICB2b2x1bWVTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgIHVwZGF0ZU1lZGlhU3RyZWFtU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgfTtcbiAgfTtcbn1cbiIsImltcG9ydCB7IENhbGxTZXR0aW5nc1Jlc3BvbnNlLCBPd25DYXBhYmlsaXR5IH0gZnJvbSAnLi4vZ2VuL2Nvb3JkaW5hdG9yJztcblxuLyoqXG4gKiBTdG9yZXMgdGhlIHBlcm1pc3Npb25zIGZvciB0aGUgY3VycmVudCB1c2VyIGFuZCBleHBvc2VzXG4gKiBhIGZldyBoZWxwZXIgbWV0aG9kcyB3aGljaCBtYWtlIGl0IGVhc2llciB0byB3b3JrIHdpdGggcGVybWlzc2lvbnMuXG4gKlxuICogVGhpcyBpcyBhbiBpbnRlcm5hbCBjbGFzcyBtZWFudCB0byBiZSB1c2VkIGluIGNvbWJpbmF0aW9uIHdpdGhcbiAqIGEge0BsaW5rIENhbGx9IGluc3RhbmNlLlxuICpcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgY2xhc3MgUGVybWlzc2lvbnNDb250ZXh0IHtcbiAgcHJpdmF0ZSBwZXJtaXNzaW9uczogT3duQ2FwYWJpbGl0eVtdID0gW107XG4gIHByaXZhdGUgc2V0dGluZ3M/OiBDYWxsU2V0dGluZ3NSZXNwb25zZTtcblxuICAvKipcbiAgICogU2V0cyB0aGUgcGVybWlzc2lvbnMgZm9yIHRoZSBjdXJyZW50IHVzZXIuXG4gICAqXG4gICAqIEBwYXJhbSBwZXJtaXNzaW9ucyB0aGUgcGVybWlzc2lvbnMgdG8gc2V0LlxuICAgKi9cbiAgc2V0UGVybWlzc2lvbnMgPSAocGVybWlzc2lvbnM6IE93bkNhcGFiaWxpdHlbXSkgPT4ge1xuICAgIHRoaXMucGVybWlzc2lvbnMgPSBwZXJtaXNzaW9ucyB8fCBbXTtcbiAgfTtcblxuICAvKipcbiAgICogU2V0cyB0aGUgc2V0dGluZ3MgZm9yIHRoZSBib3VuZCBjYWxsLlxuICAgKiBAcGFyYW0gc2V0dGluZ3NcbiAgICovXG4gIHNldENhbGxTZXR0aW5ncyA9IChzZXR0aW5nczogQ2FsbFNldHRpbmdzUmVzcG9uc2UpID0+IHtcbiAgICB0aGlzLnNldHRpbmdzID0gc2V0dGluZ3M7XG4gIH07XG5cbiAgLyoqXG4gICAqIENoZWNrcyBpZiB0aGUgY3VycmVudCB1c2VyIGhhcyBhIHNwZWNpZmljIHBlcm1pc3Npb24uXG4gICAqXG4gICAqIEBwYXJhbSBwZXJtaXNzaW9uIHRoZSBwZXJtaXNzaW9uIHRvIGNoZWNrIGZvci5cbiAgICovXG4gIGhhc1Blcm1pc3Npb24gPSAocGVybWlzc2lvbjogT3duQ2FwYWJpbGl0eSkgPT4ge1xuICAgIHJldHVybiB0aGlzLnBlcm1pc3Npb25zLmluY2x1ZGVzKHBlcm1pc3Npb24pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgdGhlIGN1cnJlbnQgdXNlciBjYW4gcmVxdWVzdCBhIHNwZWNpZmljIHBlcm1pc3Npb25cbiAgICogd2l0aGluIHRoZSBjYWxsLlxuICAgKlxuICAgKiBAcGFyYW0gcGVybWlzc2lvbiB0aGUgcGVybWlzc2lvbiB0byBjaGVjayBmb3IuXG4gICAqIEBwYXJhbSBzZXR0aW5ncyB0aGUgY2FsbCBzZXR0aW5ncyB0byBjaGVjayBhZ2FpbnN0IChvcHRpb25hbCkuXG4gICAqL1xuICBjYW5SZXF1ZXN0ID0gKFxuICAgIHBlcm1pc3Npb246IE93bkNhcGFiaWxpdHksXG4gICAgc2V0dGluZ3M6IENhbGxTZXR0aW5nc1Jlc3BvbnNlIHwgdW5kZWZpbmVkID0gdGhpcy5zZXR0aW5ncyxcbiAgKSA9PiB7XG4gICAgaWYgKCFzZXR0aW5ncykgcmV0dXJuIGZhbHNlO1xuXG4gICAgY29uc3QgeyBhdWRpbywgdmlkZW8sIHNjcmVlbnNoYXJpbmcgfSA9IHNldHRpbmdzO1xuICAgIHN3aXRjaCAocGVybWlzc2lvbikge1xuICAgICAgY2FzZSBPd25DYXBhYmlsaXR5LlNFTkRfQVVESU86XG4gICAgICAgIHJldHVybiBhdWRpby5hY2Nlc3NfcmVxdWVzdF9lbmFibGVkO1xuICAgICAgY2FzZSBPd25DYXBhYmlsaXR5LlNFTkRfVklERU86XG4gICAgICAgIHJldHVybiB2aWRlby5hY2Nlc3NfcmVxdWVzdF9lbmFibGVkO1xuICAgICAgY2FzZSBPd25DYXBhYmlsaXR5LlNDUkVFTlNIQVJFOlxuICAgICAgICByZXR1cm4gc2NyZWVuc2hhcmluZy5hY2Nlc3NfcmVxdWVzdF9lbmFibGVkO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfTtcbn1cbiIsImltcG9ydCB7IFN0cmVhbVZpZGVvUGFydGljaXBhbnQgfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7XG4gIENvbXBhcmF0b3IsXG4gIGRlZmF1bHRTb3J0UHJlc2V0LFxuICBsaXZlc3RyZWFtT3JBdWRpb1Jvb21Tb3J0UHJlc2V0LFxufSBmcm9tICcuL3NvcnRpbmcnO1xuXG4vKipcbiAqIFRoZSBvcHRpb25zIGZvciBhIHtAbGluayBDYWxsVHlwZX0uXG4gKi9cbmV4cG9ydCB0eXBlIENhbGxUeXBlT3B0aW9ucyA9IHtcbiAgLyoqXG4gICAqIFRoZSB7QGxpbmsgQ29tcGFyYXRvcn0gdG8gdXNlIHRvIHNvcnRpbmcgdGhlIHBhcnRpY2lwYW50cyBpbiB0aGUgY2FsbC5cbiAgICovXG4gIHNvcnRQYXJ0aWNpcGFudHNCeT86IENvbXBhcmF0b3I8U3RyZWFtVmlkZW9QYXJ0aWNpcGFudD47XG59O1xuXG4vKipcbiAqIFJlcHJlc2VudHMgYSBjYWxsIHR5cGUuXG4gKi9cbmV4cG9ydCBjbGFzcyBDYWxsVHlwZSB7XG4gIC8qKlxuICAgKiBUaGUgbmFtZSBvZiB0aGUgY2FsbCB0eXBlLlxuICAgKi9cbiAgbmFtZTogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgb3B0aW9ucyBmb3IgdGhlIGNhbGwgdHlwZS5cbiAgICovXG4gIG9wdGlvbnM6IENhbGxUeXBlT3B0aW9ucztcblxuICAvKipcbiAgICogQ29uc3RydWN0cyBhIG5ldyBDYWxsVHlwZS5cbiAgICpcbiAgICogQHBhcmFtIG5hbWUgdGhlIG5hbWUgb2YgdGhlIGNhbGwgdHlwZS5cbiAgICogQHBhcmFtIG9wdGlvbnMgdGhlIG9wdGlvbnMgZm9yIHRoZSBjYWxsIHR5cGUuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihcbiAgICBuYW1lOiBzdHJpbmcsXG4gICAgb3B0aW9uczogQ2FsbFR5cGVPcHRpb25zID0ge1xuICAgICAgc29ydFBhcnRpY2lwYW50c0J5OiBkZWZhdWx0U29ydFByZXNldCxcbiAgICB9LFxuICApIHtcbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gIH1cbn1cblxuLyoqXG4gKiBBIHJlZ2lzdHJ5IG9mIHtAbGluayBDYWxsVHlwZX1zLlxuICogWW91IGNhbiByZWdpc3RlciBhbmQgdW5yZWdpc3RlciBjYWxsIHR5cGVzLlxuICovXG5jbGFzcyBDYWxsVHlwZXNSZWdpc3RyeSB7XG4gIC8qKlxuICAgKiBUaGUgY2FsbCB0eXBlcyByZWdpc3RlcmVkIGluIHRoaXMgcmVnaXN0cnkuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwcml2YXRlIHJlYWRvbmx5IGNhbGxUeXBlczogeyBba2V5OiBzdHJpbmddOiBDYWxsVHlwZSB9O1xuXG4gIC8qKlxuICAgKiBDb25zdHJ1Y3RzIGEgbmV3IENhbGxUeXBlc1JlZ2lzdHJ5LlxuICAgKlxuICAgKiBAcGFyYW0gY2FsbFR5cGVzIHRoZSBpbml0aWFsIGNhbGwgdHlwZXMgdG8gcmVnaXN0ZXIuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihjYWxsVHlwZXM6IENhbGxUeXBlW10pIHtcbiAgICB0aGlzLmNhbGxUeXBlcyA9IGNhbGxUeXBlcy5yZWR1Y2U8eyBba2V5OiBzdHJpbmddOiBDYWxsVHlwZSB9PihcbiAgICAgIChhY2MsIGNhbGxUeXBlKSA9PiB7XG4gICAgICAgIGFjY1tjYWxsVHlwZS5uYW1lXSA9IGNhbGxUeXBlO1xuICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgfSxcbiAgICAgIHt9LFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXJzIGEgbmV3IGNhbGwgdHlwZS5cbiAgICpcbiAgICogQHBhcmFtIGNhbGxUeXBlIHRoZSBjYWxsIHR5cGUgdG8gcmVnaXN0ZXIuXG4gICAqL1xuICByZWdpc3RlciA9IChjYWxsVHlwZTogQ2FsbFR5cGUpID0+IHtcbiAgICB0aGlzLmNhbGxUeXBlc1tjYWxsVHlwZS5uYW1lXSA9IGNhbGxUeXBlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBVbnJlZ2lzdGVycyBhIGNhbGwgdHlwZS5cbiAgICpcbiAgICogQHBhcmFtIG5hbWUgdGhlIG5hbWUgb2YgdGhlIGNhbGwgdHlwZSB0byB1bnJlZ2lzdGVyLlxuICAgKi9cbiAgdW5yZWdpc3RlciA9IChuYW1lOiBzdHJpbmcpID0+IHtcbiAgICBkZWxldGUgdGhpcy5jYWxsVHlwZXNbbmFtZV07XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldHMgYSBjYWxsIHR5cGUgYnkgbmFtZS5cbiAgICpcbiAgICogQHBhcmFtIG5hbWUgdGhlIG5hbWUgb2YgdGhlIGNhbGwgdHlwZSB0byBnZXQuXG4gICAqL1xuICBnZXQgPSAobmFtZTogc3RyaW5nKTogQ2FsbFR5cGUgPT4ge1xuICAgIGlmICghdGhpcy5jYWxsVHlwZXNbbmFtZV0pIHtcbiAgICAgIHRoaXMucmVnaXN0ZXIobmV3IENhbGxUeXBlKG5hbWUpKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuY2FsbFR5cGVzW25hbWVdO1xuICB9O1xufVxuXG4vKipcbiAqIFRoZSBkZWZhdWx0IGNhbGwgdHlwZXMgcmVnaXN0cnkuXG4gKiBZb3UgY2FuIHVzZSB0aGlzIGluc3RhbmNlIHRvIGR5bmFtaWNhbGx5IHJlZ2lzdGVyIGFuZCB1bnJlZ2lzdGVyIGNhbGwgdHlwZXMuXG4gKi9cbmV4cG9ydCBjb25zdCBDYWxsVHlwZXMgPSBuZXcgQ2FsbFR5cGVzUmVnaXN0cnkoW1xuICBuZXcgQ2FsbFR5cGUoJ2RlZmF1bHQnLCB7XG4gICAgc29ydFBhcnRpY2lwYW50c0J5OiBkZWZhdWx0U29ydFByZXNldCxcbiAgfSksXG4gIG5ldyBDYWxsVHlwZSgnZGV2ZWxvcG1lbnQnLCB7XG4gICAgc29ydFBhcnRpY2lwYW50c0J5OiBkZWZhdWx0U29ydFByZXNldCxcbiAgfSksXG4gIG5ldyBDYWxsVHlwZSgnbGl2ZXN0cmVhbScsIHtcbiAgICBzb3J0UGFydGljaXBhbnRzQnk6IGxpdmVzdHJlYW1PckF1ZGlvUm9vbVNvcnRQcmVzZXQsXG4gIH0pLFxuICBuZXcgQ2FsbFR5cGUoJ2F1ZGlvX3Jvb20nLCB7XG4gICAgc29ydFBhcnRpY2lwYW50c0J5OiBsaXZlc3RyZWFtT3JBdWRpb1Jvb21Tb3J0UHJlc2V0LFxuICB9KSxcbl0pO1xuIiwiaW1wb3J0IHtcbiAgY29uY2F0TWFwLFxuICBkZWJvdW5jZVRpbWUsXG4gIGZyb20sXG4gIG1hcCxcbiAgbWVyZ2UsXG4gIE9ic2VydmFibGUsXG4gIHNoYXJlUmVwbGF5LFxufSBmcm9tICdyeGpzJztcbmltcG9ydCB7IGdldExvZ2dlciB9IGZyb20gJy4uL2xvZ2dlcic7XG5cbi8qKlxuICogUmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgdGhlIGxpc3Qgb2YgYXZhaWxhYmxlIGRldmljZXNcbiAqIHRoYXQgbWVldCB0aGUgZ2l2ZW4gY29uc3RyYWludHMuXG4gKlxuICogQHBhcmFtIGNvbnN0cmFpbnRzIHRoZSBjb25zdHJhaW50cyB0byB1c2Ugd2hlbiByZXF1ZXN0aW5nIHRoZSBkZXZpY2VzLlxuICogQHBhcmFtIGtpbmQgdGhlIGtpbmQgb2YgZGV2aWNlcyB0byBlbnVtZXJhdGUuXG4gKi9cbmNvbnN0IGdldERldmljZXMgPSAoXG4gIGNvbnN0cmFpbnRzOiBNZWRpYVN0cmVhbUNvbnN0cmFpbnRzLFxuICBraW5kOiBNZWRpYURldmljZUtpbmQsXG4pID0+IHtcbiAgcmV0dXJuIG5ldyBPYnNlcnZhYmxlPE1lZGlhRGV2aWNlSW5mb1tdPigoc3Vic2NyaWJlcikgPT4ge1xuICAgIGNvbnN0IGVudW1lcmF0ZSA9IGFzeW5jICgpID0+IHtcbiAgICAgIGxldCBkZXZpY2VzID0gYXdhaXQgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5lbnVtZXJhdGVEZXZpY2VzKCk7XG4gICAgICAvLyBzb21lIGJyb3dzZXJzIHJlcG9ydCBlbXB0eSBkZXZpY2UgbGFiZWxzIChGaXJlZm94KS5cbiAgICAgIC8vIGluIHRoYXQgY2FzZSwgd2UgbmVlZCB0byByZXF1ZXN0IHBlcm1pc3Npb25zICh2aWEgZ2V0VXNlck1lZGlhKVxuICAgICAgLy8gdG8gYmUgYWJsZSB0byBnZXQgdGhlIGRldmljZSBsYWJlbHNcbiAgICAgIGNvbnN0IG5lZWRzR2V0VXNlck1lZGlhID0gZGV2aWNlcy5zb21lKFxuICAgICAgICAoZGV2aWNlKSA9PiBkZXZpY2Uua2luZCA9PT0ga2luZCAmJiBkZXZpY2UubGFiZWwgPT09ICcnLFxuICAgICAgKTtcbiAgICAgIGlmIChuZWVkc0dldFVzZXJNZWRpYSkge1xuICAgICAgICBsZXQgbWVkaWFTdHJlYW06IE1lZGlhU3RyZWFtIHwgdW5kZWZpbmVkO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIG1lZGlhU3RyZWFtID0gYXdhaXQgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoY29uc3RyYWludHMpO1xuICAgICAgICAgIGRldmljZXMgPSBhd2FpdCBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmVudW1lcmF0ZURldmljZXMoKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICBpZiAobWVkaWFTdHJlYW0pIGRpc3Bvc2VPZk1lZGlhU3RyZWFtKG1lZGlhU3RyZWFtKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGRldmljZXM7XG4gICAgfTtcblxuICAgIGVudW1lcmF0ZSgpXG4gICAgICAudGhlbigoZGV2aWNlcykgPT4ge1xuICAgICAgICAvLyBub3RpZnkgc3Vic2NyaWJlcnMgYW5kIGNvbXBsZXRlXG4gICAgICAgIHN1YnNjcmliZXIubmV4dChkZXZpY2VzKTtcbiAgICAgICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgY29uc3QgbG9nZ2VyID0gZ2V0TG9nZ2VyKFsnZGV2aWNlcyddKTtcbiAgICAgICAgbG9nZ2VyKCdlcnJvcicsICdGYWlsZWQgdG8gZW51bWVyYXRlIGRldmljZXMnLCBlcnJvcik7XG4gICAgICAgIHN1YnNjcmliZXIuZXJyb3IoZXJyb3IpO1xuICAgICAgfSk7XG4gIH0pO1xufTtcblxuLyoqXG4gKiBbVGVsbHMgaWYgdGhlIGJyb3dzZXIgc3VwcG9ydHMgYXVkaW8gb3V0cHV0IGNoYW5nZSBvbiAnYXVkaW8nIGVsZW1lbnRzXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvSFRNTE1lZGlhRWxlbWVudC9zZXRTaW5rSWQpLlxuICpcbiAqICAqL1xuZXhwb3J0IGNvbnN0IGNoZWNrSWZBdWRpb091dHB1dENoYW5nZVN1cHBvcnRlZCA9ICgpID0+IHtcbiAgaWYgKHR5cGVvZiBkb2N1bWVudCA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybiBmYWxzZTtcbiAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2F1ZGlvJyk7XG4gIHJldHVybiAnc2V0U2lua0lkJyBpbiBlbGVtZW50O1xufTtcblxuLyoqXG4gKiBUaGUgZGVmYXVsdCBjb25zdHJhaW50cyB1c2VkIHRvIHJlcXVlc3QgYXVkaW8gZGV2aWNlcy5cbiAqL1xuY29uc3QgYXVkaW9EZXZpY2VDb25zdHJhaW50cyA9IHtcbiAgYXVkaW86IHtcbiAgICBhdXRvR2FpbkNvbnRyb2w6IHRydWUsXG4gICAgbm9pc2VTdXBwcmVzc2lvbjogdHJ1ZSxcbiAgICBlY2hvQ2FuY2VsbGF0aW9uOiB0cnVlLFxuICB9LFxufSBzYXRpc2ZpZXMgTWVkaWFTdHJlYW1Db25zdHJhaW50cztcblxuLyoqXG4gKiBUaGUgZGVmYXVsdCBjb25zdHJhaW50cyB1c2VkIHRvIHJlcXVlc3QgdmlkZW8gZGV2aWNlcy5cbiAqL1xuY29uc3QgdmlkZW9EZXZpY2VDb25zdHJhaW50cyA9IHtcbiAgdmlkZW86IHtcbiAgICB3aWR0aDogMTI4MCxcbiAgICBoZWlnaHQ6IDcyMCxcbiAgfSxcbn0gc2F0aXNmaWVzIE1lZGlhU3RyZWFtQ29uc3RyYWludHM7XG5cbi8qKlxuICogQ3JlYXRlcyBhIG1lbW9pemVkIG9ic2VydmFibGUgaW5zdGFuY2VcbiAqIHRoYXQgd2lsbCBiZSBjcmVhdGVkIG9ubHkgb25jZSBhbmQgc2hhcmVkIGJldHdlZW4gYWxsIGNhbGxlcnMuXG4gKlxuICogQHBhcmFtIGNyZWF0ZSBhIGZ1bmN0aW9uIHRoYXQgY3JlYXRlcyBhbiBPYnNlcnZhYmxlLlxuICovXG5jb25zdCBtZW1vaXplZE9ic2VydmFibGUgPSA8VD4oY3JlYXRlOiAoKSA9PiBPYnNlcnZhYmxlPFQ+KSA9PiB7XG4gIGxldCBtZW1vaXplZDogT2JzZXJ2YWJsZTxUPjtcbiAgcmV0dXJuICgpID0+IHtcbiAgICBpZiAoIW1lbW9pemVkKSBtZW1vaXplZCA9IGNyZWF0ZSgpO1xuICAgIHJldHVybiBtZW1vaXplZDtcbiAgfTtcbn07XG5cbmNvbnN0IGdldERldmljZUNoYW5nZU9ic2VydmVyID0gbWVtb2l6ZWRPYnNlcnZhYmxlKCgpID0+IHtcbiAgLy8gQXVkaW8gYW5kIHZpZGVvIGRldmljZXMgYXJlIHJlcXVlc3RlZCBpbiB0d28gc2VwYXJhdGUgcmVxdWVzdHMuXG4gIC8vIFRoYXQgd2F5LCB1c2VycyB3aWxsIGJlIHByZXNlbnRlZCB3aXRoIHR3byBzZXBhcmF0ZSBwcm9tcHRzXG4gIC8vIC0+IHRoZXkgY2FuIGdpdmUgYWNjZXNzIHRvIGp1c3QgY2FtZXJhLCBvciBqdXN0IG1pY3JvcGhvbmVcbiAgcmV0dXJuIG5ldyBPYnNlcnZhYmxlKChzdWJzY3JpYmVyKSA9PiB7XG4gICAgLy8gJ2FkZEV2ZW50TGlzdGVuZXInIGlzIG5vdCBhdmFpbGFibGUgaW4gUmVhY3QgTmF0aXZlXG4gICAgaWYgKCFuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmFkZEV2ZW50TGlzdGVuZXIpIHJldHVybjtcblxuICAgIGNvbnN0IG5vdGlmeSA9ICgpID0+IHN1YnNjcmliZXIubmV4dCgpO1xuICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMuYWRkRXZlbnRMaXN0ZW5lcignZGV2aWNlY2hhbmdlJywgbm90aWZ5KTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5yZW1vdmVFdmVudExpc3RlbmVyKCdkZXZpY2VjaGFuZ2UnLCBub3RpZnkpO1xuICAgIH07XG4gIH0pLnBpcGUoXG4gICAgZGVib3VuY2VUaW1lKDUwMCksXG4gICAgY29uY2F0TWFwKCgpID0+IGZyb20obmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5lbnVtZXJhdGVEZXZpY2VzKCkpKSxcbiAgICBzaGFyZVJlcGxheSgxKSxcbiAgKTtcbn0pO1xuXG5jb25zdCBnZXRBdWRpb0RldmljZXNPYnNlcnZlciA9IG1lbW9pemVkT2JzZXJ2YWJsZSgoKSA9PiB7XG4gIHJldHVybiBtZXJnZShcbiAgICBnZXREZXZpY2VzKGF1ZGlvRGV2aWNlQ29uc3RyYWludHMsICdhdWRpb2lucHV0JyksXG4gICAgZ2V0RGV2aWNlQ2hhbmdlT2JzZXJ2ZXIoKSxcbiAgKS5waXBlKHNoYXJlUmVwbGF5KDEpKTtcbn0pO1xuXG5jb25zdCBnZXRBdWRpb091dHB1dERldmljZXNPYnNlcnZlciA9IG1lbW9pemVkT2JzZXJ2YWJsZSgoKSA9PiB7XG4gIHJldHVybiBtZXJnZShcbiAgICBnZXREZXZpY2VzKGF1ZGlvRGV2aWNlQ29uc3RyYWludHMsICdhdWRpb291dHB1dCcpLFxuICAgIGdldERldmljZUNoYW5nZU9ic2VydmVyKCksXG4gICkucGlwZShzaGFyZVJlcGxheSgxKSk7XG59KTtcblxuY29uc3QgZ2V0VmlkZW9EZXZpY2VzT2JzZXJ2ZXIgPSBtZW1vaXplZE9ic2VydmFibGUoKCkgPT4ge1xuICByZXR1cm4gbWVyZ2UoXG4gICAgZ2V0RGV2aWNlcyh2aWRlb0RldmljZUNvbnN0cmFpbnRzLCAndmlkZW9pbnB1dCcpLFxuICAgIGdldERldmljZUNoYW5nZU9ic2VydmVyKCksXG4gICkucGlwZShzaGFyZVJlcGxheSgxKSk7XG59KTtcblxuLyoqXG4gKiBQcm9tcHRzIHRoZSB1c2VyIGZvciBhIHBlcm1pc3Npb24gdG8gdXNlIGF1ZGlvIGRldmljZXMgKGlmIG5vdCBhbHJlYWR5IGdyYW50ZWQpIGFuZCBsaXN0cyB0aGUgYXZhaWxhYmxlICdhdWRpb2lucHV0JyBkZXZpY2VzLCBpZiBkZXZpY2VzIGFyZSBhZGRlZC9yZW1vdmVkIHRoZSBsaXN0IGlzIHVwZGF0ZWQuXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRBdWRpb0RldmljZXMgPSAoKSA9PiB7XG4gIHJldHVybiBnZXRBdWRpb0RldmljZXNPYnNlcnZlcigpLnBpcGUoXG4gICAgbWFwKCh2YWx1ZXMpID0+IHZhbHVlcy5maWx0ZXIoKGQpID0+IGQua2luZCA9PT0gJ2F1ZGlvaW5wdXQnKSksXG4gICk7XG59O1xuXG4vKipcbiAqIFByb21wdHMgdGhlIHVzZXIgZm9yIGEgcGVybWlzc2lvbiB0byB1c2UgdmlkZW8gZGV2aWNlcyAoaWYgbm90IGFscmVhZHkgZ3JhbnRlZCkgYW5kIGxpc3RzIHRoZSBhdmFpbGFibGUgJ3ZpZGVvaW5wdXQnIGRldmljZXMsIGlmIGRldmljZXMgYXJlIGFkZGVkL3JlbW92ZWQgdGhlIGxpc3QgaXMgdXBkYXRlZC5cbiAqL1xuZXhwb3J0IGNvbnN0IGdldFZpZGVvRGV2aWNlcyA9ICgpID0+IHtcbiAgcmV0dXJuIGdldFZpZGVvRGV2aWNlc09ic2VydmVyKCkucGlwZShcbiAgICBtYXAoKHZhbHVlcykgPT4gdmFsdWVzLmZpbHRlcigoZCkgPT4gZC5raW5kID09PSAndmlkZW9pbnB1dCcpKSxcbiAgKTtcbn07XG5cbi8qKlxuICogUHJvbXB0cyB0aGUgdXNlciBmb3IgYSBwZXJtaXNzaW9uIHRvIHVzZSBhdWRpbyBkZXZpY2VzIChpZiBub3QgYWxyZWFkeSBncmFudGVkKSBhbmQgbGlzdHMgdGhlIGF2YWlsYWJsZSAnYXVkaW9vdXRwdXQnIGRldmljZXMsIGlmIGRldmljZXMgYXJlIGFkZGVkL3JlbW92ZWQgdGhlIGxpc3QgaXMgdXBkYXRlZC4gU2VsZWN0aW5nICdhdWRpb291dHB1dCcgZGV2aWNlIG9ubHkgbWFrZXMgc2Vuc2UgaWYgW3RoZSBicm93c2VyIGhhcyBzdXBwb3J0IGZvciBjaGFuZ2luZyBhdWRpbyBvdXRwdXQgb24gJ2F1ZGlvJyBlbGVtZW50c10oI2NoZWNraWZhdWRpb291dHB1dGNoYW5nZXN1cHBvcnRlZClcbiAqL1xuZXhwb3J0IGNvbnN0IGdldEF1ZGlvT3V0cHV0RGV2aWNlcyA9ICgpID0+IHtcbiAgcmV0dXJuIGdldEF1ZGlvT3V0cHV0RGV2aWNlc09ic2VydmVyKCkucGlwZShcbiAgICBtYXAoKHZhbHVlcykgPT4gdmFsdWVzLmZpbHRlcigoZCkgPT4gZC5raW5kID09PSAnYXVkaW9vdXRwdXQnKSksXG4gICk7XG59O1xuXG5jb25zdCBnZXRTdHJlYW0gPSBhc3luYyAoY29uc3RyYWludHM6IE1lZGlhU3RyZWFtQ29uc3RyYWludHMpID0+IHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gYXdhaXQgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoY29uc3RyYWludHMpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgZ2V0TG9nZ2VyKFsnZGV2aWNlcyddKSgnZXJyb3InLCBgRmFpbGVkIGdldCB1c2VyIG1lZGlhYCwge1xuICAgICAgZXJyb3I6IGUsXG4gICAgICBjb25zdHJhaW50czogY29uc3RyYWludHMsXG4gICAgfSk7XG4gICAgdGhyb3cgZTtcbiAgfVxufTtcblxuLyoqXG4gKiBSZXR1cm5zIGFuIGF1ZGlvIG1lZGlhIHN0cmVhbSB0aGF0IGZ1bGZpbGxzIHRoZSBnaXZlbiBjb25zdHJhaW50cy5cbiAqIElmIG5vIGNvbnN0cmFpbnRzIGFyZSBwcm92aWRlZCwgaXQgdXNlcyB0aGUgYnJvd3NlcidzIGRlZmF1bHQgb25lcy5cbiAqXG4gKiBAYW5ndWxhciBJdCdzIHJlY29tbWVuZGVkIHRvIHVzZSB0aGUgW2BEZXZpY2VNYW5hZ2VyU2VydmljZWBdKC4vRGV2aWNlTWFuYWdlclNlcnZpY2UubWQpIGZvciBhIGhpZ2hlciBsZXZlbCBBUEksIHVzZSB0aGlzIGxvdy1sZXZlbCBtZXRob2Qgb25seSBpZiB0aGUgYERldmljZU1hbmFnZXJTZXJ2aWNlYCBkb2Vzbid0IHN1aXQgeW91ciByZXF1aXJlbWVudHMuXG4gKiBAcGFyYW0gdHJhY2tDb25zdHJhaW50cyB0aGUgY29uc3RyYWludHMgdG8gdXNlIHdoZW4gcmVxdWVzdGluZyB0aGUgc3RyZWFtLlxuICogQHJldHVybnMgdGhlIG5ldyBgTWVkaWFTdHJlYW1gIGZ1bGZpbGxpbmcgdGhlIGdpdmVuIGNvbnN0cmFpbnRzLlxuICovXG5leHBvcnQgY29uc3QgZ2V0QXVkaW9TdHJlYW0gPSBhc3luYyAoXG4gIHRyYWNrQ29uc3RyYWludHM/OiBNZWRpYVRyYWNrQ29uc3RyYWludHMsXG4pID0+IHtcbiAgY29uc3QgY29uc3RyYWludHM6IE1lZGlhU3RyZWFtQ29uc3RyYWludHMgPSB7XG4gICAgYXVkaW86IHtcbiAgICAgIC4uLmF1ZGlvRGV2aWNlQ29uc3RyYWludHMuYXVkaW8sXG4gICAgICAuLi50cmFja0NvbnN0cmFpbnRzLFxuICAgIH0sXG4gIH07XG4gIHJldHVybiBnZXRTdHJlYW0oY29uc3RyYWludHMpO1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIGEgdmlkZW8gbWVkaWEgc3RyZWFtIHRoYXQgZnVsZmlsbHMgdGhlIGdpdmVuIGNvbnN0cmFpbnRzLlxuICogSWYgbm8gY29uc3RyYWludHMgYXJlIHByb3ZpZGVkLCBpdCB1c2VzIHRoZSBicm93c2VyJ3MgZGVmYXVsdCBvbmVzLlxuICpcbiAqIEBhbmd1bGFyIEl0J3MgcmVjb21tZW5kZWQgdG8gdXNlIHRoZSBbYERldmljZU1hbmFnZXJTZXJ2aWNlYF0oLi9EZXZpY2VNYW5hZ2VyU2VydmljZS5tZCkgZm9yIGEgaGlnaGVyIGxldmVsIEFQSSwgdXNlIHRoaXMgbG93LWxldmVsIG1ldGhvZCBvbmx5IGlmIHRoZSBgRGV2aWNlTWFuYWdlclNlcnZpY2VgIGRvZXNuJ3Qgc3VpdCB5b3VyIHJlcXVpcmVtZW50cy5cbiAqIEBwYXJhbSB0cmFja0NvbnN0cmFpbnRzIHRoZSBjb25zdHJhaW50cyB0byB1c2Ugd2hlbiByZXF1ZXN0aW5nIHRoZSBzdHJlYW0uXG4gKiBAcmV0dXJucyBhIG5ldyBgTWVkaWFTdHJlYW1gIGZ1bGZpbGxpbmcgdGhlIGdpdmVuIGNvbnN0cmFpbnRzLlxuICovXG5leHBvcnQgY29uc3QgZ2V0VmlkZW9TdHJlYW0gPSBhc3luYyAoXG4gIHRyYWNrQ29uc3RyYWludHM/OiBNZWRpYVRyYWNrQ29uc3RyYWludHMsXG4pID0+IHtcbiAgY29uc3QgY29uc3RyYWludHM6IE1lZGlhU3RyZWFtQ29uc3RyYWludHMgPSB7XG4gICAgdmlkZW86IHtcbiAgICAgIC4uLnZpZGVvRGV2aWNlQ29uc3RyYWludHMudmlkZW8sXG4gICAgICAuLi50cmFja0NvbnN0cmFpbnRzLFxuICAgIH0sXG4gIH07XG4gIHJldHVybiBnZXRTdHJlYW0oY29uc3RyYWludHMpO1xufTtcblxuLyoqXG4gKiBQcm9tcHRzIHRoZSB1c2VyIGZvciBhIHBlcm1pc3Npb24gdG8gc2hhcmUgYSBzY3JlZW4uXG4gKiBJZiB0aGUgdXNlciBncmFudHMgdGhlIHBlcm1pc3Npb24sIGEgc2NyZWVuIHNoYXJpbmcgc3RyZWFtIGlzIHJldHVybmVkLiBUaHJvd3Mgb3RoZXJ3aXNlLlxuICpcbiAqIFRoZSBjYWxsZXJzIG9mIHRoaXMgQVBJIGFyZSByZXNwb25zaWJsZSB0byBoYW5kbGUgdGhlIHBvc3NpYmxlIGVycm9ycy5cbiAqXG4gKiBAYW5ndWxhciBJdCdzIHJlY29tbWVuZGVkIHRvIHVzZSB0aGUgW2BEZXZpY2VNYW5hZ2VyU2VydmljZWBdKC4vRGV2aWNlTWFuYWdlclNlcnZpY2UubWQpIGZvciBhIGhpZ2hlciBsZXZlbCBBUEksIHVzZSB0aGlzIGxvdy1sZXZlbCBtZXRob2Qgb25seSBpZiB0aGUgYERldmljZU1hbmFnZXJTZXJ2aWNlYCBkb2Vzbid0IHN1aXQgeW91ciByZXF1aXJlbWVudHMuXG4gKlxuICogQHBhcmFtIG9wdGlvbnMgYW55IGFkZGl0aW9uYWwgb3B0aW9ucyB0byBwYXNzIHRvIHRoZSBbYGdldERpc3BsYXlNZWRpYWBdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9NZWRpYURldmljZXMvZ2V0RGlzcGxheU1lZGlhKSBBUEkuXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRTY3JlZW5TaGFyZVN0cmVhbSA9IGFzeW5jIChcbiAgb3B0aW9ucz86IERpc3BsYXlNZWRpYVN0cmVhbU9wdGlvbnMsXG4pID0+IHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gYXdhaXQgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXREaXNwbGF5TWVkaWEoe1xuICAgICAgdmlkZW86IHRydWUsXG4gICAgICBhdWRpbzoge1xuICAgICAgICBjaGFubmVsQ291bnQ6IHtcbiAgICAgICAgICBpZGVhbDogMixcbiAgICAgICAgfSxcbiAgICAgICAgZWNob0NhbmNlbGxhdGlvbjogZmFsc2UsXG4gICAgICAgIGF1dG9HYWluQ29udHJvbDogZmFsc2UsXG4gICAgICAgIG5vaXNlU3VwcHJlc3Npb246IGZhbHNlLFxuICAgICAgfSxcbiAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgLSBub3QgcHJlc2VudCBpbiB0eXBlcyB5ZXRcbiAgICAgIHN5c3RlbUF1ZGlvOiAnaW5jbHVkZScsXG4gICAgICAuLi5vcHRpb25zLFxuICAgIH0pO1xuICB9IGNhdGNoIChlKSB7XG4gICAgZ2V0TG9nZ2VyKFsnZGV2aWNlcyddKSgnZXJyb3InLCAnRmFpbGVkIHRvIGdldCBzY3JlZW4gc2hhcmUgc3RyZWFtJywgZSk7XG4gICAgdGhyb3cgZTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGRldmljZUlkcyQgPVxuICB0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJlxuICB0eXBlb2YgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcyAhPT0gJ3VuZGVmaW5lZCdcbiAgICA/IG1lbW9pemVkT2JzZXJ2YWJsZSgoKSA9PlxuICAgICAgICBtZXJnZShcbiAgICAgICAgICBmcm9tKG5hdmlnYXRvci5tZWRpYURldmljZXMuZW51bWVyYXRlRGV2aWNlcygpKSxcbiAgICAgICAgICBnZXREZXZpY2VDaGFuZ2VPYnNlcnZlcigpLFxuICAgICAgICApLnBpcGUoc2hhcmVSZXBsYXkoMSkpLFxuICAgICAgKSgpXG4gICAgOiB1bmRlZmluZWQ7XG5cbi8qKlxuICogRGVhY3RpdmF0ZXMgTWVkaWFTdHJlYW0gKHN0b3BzIGFuZCByZW1vdmVzIHRyYWNrcykgdG8gYmUgbGF0ZXIgZ2FyYmFnZSBjb2xsZWN0ZWRcbiAqXG4gKiBAcGFyYW0gc3RyZWFtIE1lZGlhU3RyZWFtXG4gKiBAcmV0dXJucyB2b2lkXG4gKi9cbmV4cG9ydCBjb25zdCBkaXNwb3NlT2ZNZWRpYVN0cmVhbSA9IChzdHJlYW06IE1lZGlhU3RyZWFtKSA9PiB7XG4gIGlmICghc3RyZWFtLmFjdGl2ZSkgcmV0dXJuO1xuICBzdHJlYW0uZ2V0VHJhY2tzKCkuZm9yRWFjaCgodHJhY2spID0+IHtcbiAgICB0cmFjay5zdG9wKCk7XG4gICAgc3RyZWFtLnJlbW92ZVRyYWNrKHRyYWNrKTtcbiAgfSk7XG4gIC8vIEB0cy1leHBlY3QtZXJyb3IgcmVsZWFzZSgpIGlzIHByZXNlbnQgaW4gcmVhY3QtbmF0aXZlLXdlYnJ0YyBhbmQgbXVzdCBiZSBjYWxsZWQgdG8gZGlzcG9zZSB0aGUgc3RyZWFtXG4gIGlmICh0eXBlb2Ygc3RyZWFtLnJlbGVhc2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yXG4gICAgc3RyZWFtLnJlbGVhc2UoKTtcbiAgfVxufTtcbiIsImltcG9ydCB7IE9ic2VydmFibGUsIFN1YnNjcmlwdGlvbiwgY29tYmluZUxhdGVzdCwgcGFpcndpc2UgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IENhbGwgfSBmcm9tICcuLi9DYWxsJztcbmltcG9ydCB7IENhbGxpbmdTdGF0ZSB9IGZyb20gJy4uL3N0b3JlJztcbmltcG9ydCB7IElucHV0TWVkaWFEZXZpY2VNYW5hZ2VyU3RhdGUgfSBmcm9tICcuL0lucHV0TWVkaWFEZXZpY2VNYW5hZ2VyU3RhdGUnO1xuaW1wb3J0IHsgaXNSZWFjdE5hdGl2ZSB9IGZyb20gJy4uL2hlbHBlcnMvcGxhdGZvcm1zJztcbmltcG9ydCB7IExvZ2dlciB9IGZyb20gJy4uL2Nvb3JkaW5hdG9yL2Nvbm5lY3Rpb24vdHlwZXMnO1xuaW1wb3J0IHsgZ2V0TG9nZ2VyIH0gZnJvbSAnLi4vbG9nZ2VyJztcbmltcG9ydCB7IFRyYWNrVHlwZSB9IGZyb20gJy4uL2dlbi92aWRlby9zZnUvbW9kZWxzL21vZGVscyc7XG5pbXBvcnQgeyBkZXZpY2VJZHMkIH0gZnJvbSAnLi9kZXZpY2VzJztcblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIElucHV0TWVkaWFEZXZpY2VNYW5hZ2VyPFxuICBUIGV4dGVuZHMgSW5wdXRNZWRpYURldmljZU1hbmFnZXJTdGF0ZTxDPixcbiAgQyA9IE1lZGlhVHJhY2tDb25zdHJhaW50cyxcbj4ge1xuICAvKipcbiAgICogQGludGVybmFsXG4gICAqL1xuICBlbmFibGVQcm9taXNlPzogUHJvbWlzZTx2b2lkPjtcbiAgLyoqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZGlzYWJsZVByb21pc2U/OiBQcm9taXNlPHZvaWQ+O1xuICAvKipcbiAgICogaWYgdHJ1ZSwgc3RvcHMgdGhlIG1lZGlhIHN0cmVhbSB3aGVuIGNhbGwgaXMgbGVmdFxuICAgKi9cbiAgc3RvcE9uTGVhdmUgPSB0cnVlO1xuICBsb2dnZXI6IExvZ2dlcjtcbiAgcHJpdmF0ZSBzdWJzY3JpcHRpb25zOiBTdWJzY3JpcHRpb25bXSA9IFtdO1xuICBwcml2YXRlIGlzVHJhY2tTdG9wcGVkRHVlVG9UcmFja0VuZCA9IGZhbHNlO1xuXG4gIHByb3RlY3RlZCBjb25zdHJ1Y3RvcihcbiAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgY2FsbDogQ2FsbCxcbiAgICBwdWJsaWMgcmVhZG9ubHkgc3RhdGU6IFQsXG4gICAgcHJvdGVjdGVkIHJlYWRvbmx5IHRyYWNrVHlwZTogVHJhY2tUeXBlLFxuICApIHtcbiAgICB0aGlzLmxvZ2dlciA9IGdldExvZ2dlcihbYCR7VHJhY2tUeXBlW3RyYWNrVHlwZV0udG9Mb3dlckNhc2UoKX0gbWFuYWdlcmBdKTtcbiAgICBpZiAoXG4gICAgICBkZXZpY2VJZHMkICYmXG4gICAgICAhaXNSZWFjdE5hdGl2ZSgpICYmXG4gICAgICAodGhpcy50cmFja1R5cGUgPT09IFRyYWNrVHlwZS5BVURJTyB8fCB0aGlzLnRyYWNrVHlwZSA9PT0gVHJhY2tUeXBlLlZJREVPKVxuICAgICkge1xuICAgICAgdGhpcy5oYW5kbGVEaXNjb25uZWN0ZWRPclJlcGxhY2VkRGV2aWNlcygpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBMaXN0cyB0aGUgYXZhaWxhYmxlIGF1ZGlvL3ZpZGVvIGRldmljZXNcbiAgICpcbiAgICogTm90ZTogSXQgcHJvbXB0cyB0aGUgdXNlciBmb3IgYSBwZXJtaXNzaW9uIHRvIHVzZSBkZXZpY2VzIChpZiBub3QgYWxyZWFkeSBncmFudGVkKVxuICAgKlxuICAgKiBAcmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXQgd2lsbCBiZSB1cGRhdGVkIGlmIGEgZGV2aWNlIGlzIGNvbm5lY3RlZCBvciBkaXNjb25uZWN0ZWRcbiAgICovXG4gIGxpc3REZXZpY2VzKCkge1xuICAgIHJldHVybiB0aGlzLmdldERldmljZXMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdGFydHMgc3RyZWFtLlxuICAgKi9cbiAgYXN5bmMgZW5hYmxlKCkge1xuICAgIGlmICh0aGlzLnN0YXRlLnN0YXR1cyA9PT0gJ2VuYWJsZWQnKSByZXR1cm47XG4gICAgdGhpcy5lbmFibGVQcm9taXNlID0gdGhpcy51bm11dGVTdHJlYW0oKTtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgdGhpcy5lbmFibGVQcm9taXNlO1xuICAgICAgdGhpcy5zdGF0ZS5zZXRTdGF0dXMoJ2VuYWJsZWQnKTtcbiAgICAgIHRoaXMuZW5hYmxlUHJvbWlzZSA9IHVuZGVmaW5lZDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhpcy5lbmFibGVQcm9taXNlID0gdW5kZWZpbmVkO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFN0b3BzIG9yIHBhdXNlcyB0aGUgc3RyZWFtIGJhc2VkIG9uIHN0YXRlLmRpc2FibGVNb2RlXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2ZvcmNlU3RvcD1mYWxzZV0gd2hlbiB0cnVlLCBzdG9wcyB0aGUgdHJhY2tzIHJlZ2FyZGxlc3Mgb2YgdGhlIHN0YXRlLmRpc2FibGVNb2RlXG4gICAqL1xuICBhc3luYyBkaXNhYmxlKGZvcmNlU3RvcDogYm9vbGVhbiA9IGZhbHNlKSB7XG4gICAgdGhpcy5zdGF0ZS5wcmV2U3RhdHVzID0gdGhpcy5zdGF0ZS5zdGF0dXM7XG4gICAgaWYgKCFmb3JjZVN0b3AgJiYgdGhpcy5zdGF0ZS5zdGF0dXMgPT09ICdkaXNhYmxlZCcpIHJldHVybjtcbiAgICBjb25zdCBzdG9wVHJhY2tzID0gZm9yY2VTdG9wIHx8IHRoaXMuc3RhdGUuZGlzYWJsZU1vZGUgPT09ICdzdG9wLXRyYWNrcyc7XG4gICAgdGhpcy5kaXNhYmxlUHJvbWlzZSA9IHRoaXMubXV0ZVN0cmVhbShzdG9wVHJhY2tzKTtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgdGhpcy5kaXNhYmxlUHJvbWlzZTtcbiAgICAgIHRoaXMuc3RhdGUuc2V0U3RhdHVzKCdkaXNhYmxlZCcpO1xuICAgICAgdGhpcy5kaXNhYmxlUHJvbWlzZSA9IHVuZGVmaW5lZDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhpcy5kaXNhYmxlUHJvbWlzZSA9IHVuZGVmaW5lZDtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBJZiBzdGF0dXMgd2FzIHByZXZpb3VzbHkgZW5hYmxlZCwgaXQgd2lsbCByZS1lbmFibGUgdGhlIGRldmljZS5cbiAgICovXG4gIGFzeW5jIHJlc3VtZSgpIHtcbiAgICBpZiAoXG4gICAgICB0aGlzLnN0YXRlLnByZXZTdGF0dXMgPT09ICdlbmFibGVkJyAmJlxuICAgICAgdGhpcy5zdGF0ZS5zdGF0dXMgPT09ICdkaXNhYmxlZCdcbiAgICApIHtcbiAgICAgIGF3YWl0IHRoaXMuZW5hYmxlKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIElmIHRoZSBjdXJyZW50IGRldmljZSBzdGF0dXMgaXMgZGlzYWJsZWQsIGl0IHdpbGwgZW5hYmxlIHRoZSBkZXZpY2UsXG4gICAqIGVsc2UgaXQgd2lsbCBkaXNhYmxlIGl0LlxuICAgKi9cbiAgYXN5bmMgdG9nZ2xlKCkge1xuICAgIGlmICh0aGlzLnN0YXRlLnN0YXR1cyA9PT0gJ2VuYWJsZWQnKSB7XG4gICAgICByZXR1cm4gdGhpcy5kaXNhYmxlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLmVuYWJsZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBXaWxsIHNldCB0aGUgZGVmYXVsdCBjb25zdHJhaW50cyBmb3IgdGhlIGRldmljZS5cbiAgICpcbiAgICogQHBhcmFtIGNvbnN0cmFpbnRzIHRoZSBjb25zdHJhaW50cyB0byBzZXQuXG4gICAqL1xuICBzZXREZWZhdWx0Q29uc3RyYWludHMoY29uc3RyYWludHM6IEMpIHtcbiAgICB0aGlzLnN0YXRlLnNldERlZmF1bHRDb25zdHJhaW50cyhjb25zdHJhaW50cyk7XG4gIH1cblxuICAvKipcbiAgICogU2VsZWN0cyBhIGRldmljZS5cbiAgICpcbiAgICogTm90ZTogdGhpcyBtZXRob2QgaXMgbm90IHN1cHBvcnRlZCBpbiBSZWFjdCBOYXRpdmVcbiAgICogQHBhcmFtIGRldmljZUlkIHRoZSBkZXZpY2UgaWQgdG8gc2VsZWN0LlxuICAgKi9cbiAgYXN5bmMgc2VsZWN0KGRldmljZUlkOiBzdHJpbmcgfCB1bmRlZmluZWQpIHtcbiAgICBpZiAoaXNSZWFjdE5hdGl2ZSgpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoaXMgbWV0aG9kIGlzIG5vdCBzdXBwb3J0ZWQgaW4gUmVhY3QgTmF0aXZlJyk7XG4gICAgfVxuICAgIGlmIChkZXZpY2VJZCA9PT0gdGhpcy5zdGF0ZS5zZWxlY3RlZERldmljZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnN0YXRlLnNldERldmljZShkZXZpY2VJZCk7XG4gICAgYXdhaXQgdGhpcy5hcHBseVNldHRpbmdzVG9TdHJlYW0oKTtcbiAgfVxuXG4gIHJlbW92ZVN1YnNjcmlwdGlvbnMgPSAoKSA9PiB7XG4gICAgdGhpcy5zdWJzY3JpcHRpb25zLmZvckVhY2goKHMpID0+IHMudW5zdWJzY3JpYmUoKSk7XG4gIH07XG5cbiAgcHJvdGVjdGVkIGFzeW5jIGFwcGx5U2V0dGluZ3NUb1N0cmVhbSgpIHtcbiAgICBpZiAodGhpcy5zdGF0ZS5zdGF0dXMgPT09ICdlbmFibGVkJykge1xuICAgICAgYXdhaXQgdGhpcy5tdXRlU3RyZWFtKCk7XG4gICAgICBhd2FpdCB0aGlzLnVubXV0ZVN0cmVhbSgpO1xuICAgIH1cbiAgfVxuXG4gIHByb3RlY3RlZCBhYnN0cmFjdCBnZXREZXZpY2VzKCk6IE9ic2VydmFibGU8TWVkaWFEZXZpY2VJbmZvW10gfCB1bmRlZmluZWQ+O1xuXG4gIHByb3RlY3RlZCBhYnN0cmFjdCBnZXRTdHJlYW0oY29uc3RyYWludHM6IEMpOiBQcm9taXNlPE1lZGlhU3RyZWFtPjtcblxuICBwcm90ZWN0ZWQgYWJzdHJhY3QgcHVibGlzaFN0cmVhbShzdHJlYW06IE1lZGlhU3RyZWFtKTogUHJvbWlzZTx2b2lkPjtcblxuICBwcm90ZWN0ZWQgYWJzdHJhY3Qgc3RvcFB1Ymxpc2hTdHJlYW0oc3RvcFRyYWNrczogYm9vbGVhbik6IFByb21pc2U8dm9pZD47XG5cbiAgcHJvdGVjdGVkIGdldFRyYWNrcygpOiBNZWRpYVN0cmVhbVRyYWNrW10ge1xuICAgIHJldHVybiB0aGlzLnN0YXRlLm1lZGlhU3RyZWFtPy5nZXRUcmFja3MoKSA/PyBbXTtcbiAgfVxuXG4gIHByb3RlY3RlZCBhc3luYyBtdXRlU3RyZWFtKHN0b3BUcmFja3M6IGJvb2xlYW4gPSB0cnVlKSB7XG4gICAgaWYgKCF0aGlzLnN0YXRlLm1lZGlhU3RyZWFtKSByZXR1cm47XG4gICAgdGhpcy5sb2dnZXIoJ2RlYnVnJywgYCR7c3RvcFRyYWNrcyA/ICdTdG9wcGluZycgOiAnRGlzYWJsaW5nJ30gc3RyZWFtYCk7XG4gICAgaWYgKHRoaXMuY2FsbC5zdGF0ZS5jYWxsaW5nU3RhdGUgPT09IENhbGxpbmdTdGF0ZS5KT0lORUQpIHtcbiAgICAgIGF3YWl0IHRoaXMuc3RvcFB1Ymxpc2hTdHJlYW0oc3RvcFRyYWNrcyk7XG4gICAgfVxuICAgIHRoaXMubXV0ZUxvY2FsU3RyZWFtKHN0b3BUcmFja3MpO1xuICAgIGNvbnN0IGFsbEVuZGVkID0gdGhpcy5nZXRUcmFja3MoKS5ldmVyeSgodCkgPT4gdC5yZWFkeVN0YXRlID09PSAnZW5kZWQnKTtcbiAgICBpZiAoYWxsRW5kZWQpIHtcbiAgICAgIGlmIChcbiAgICAgICAgdGhpcy5zdGF0ZS5tZWRpYVN0cmVhbSAmJlxuICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIHJlbGVhc2UoKSBpcyBwcmVzZW50IGluIHJlYWN0LW5hdGl2ZS13ZWJydGNcbiAgICAgICAgdHlwZW9mIHRoaXMuc3RhdGUubWVkaWFTdHJlYW0ucmVsZWFzZSA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgKSB7XG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgY2FsbGVkIHRvIGRpc3Bvc2UgdGhlIHN0cmVhbSBpbiBSTlxuICAgICAgICB0aGlzLnN0YXRlLm1lZGlhU3RyZWFtLnJlbGVhc2UoKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuc3RhdGUuc2V0TWVkaWFTdHJlYW0odW5kZWZpbmVkKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIG11dGVUcmFja3MoKSB7XG4gICAgdGhpcy5nZXRUcmFja3MoKS5mb3JFYWNoKCh0cmFjaykgPT4ge1xuICAgICAgaWYgKHRyYWNrLmVuYWJsZWQpIHRyYWNrLmVuYWJsZWQgPSBmYWxzZTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgdW5tdXRlVHJhY2tzKCkge1xuICAgIHRoaXMuZ2V0VHJhY2tzKCkuZm9yRWFjaCgodHJhY2spID0+IHtcbiAgICAgIGlmICghdHJhY2suZW5hYmxlZCkgdHJhY2suZW5hYmxlZCA9IHRydWU7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHN0b3BUcmFja3MoKSB7XG4gICAgdGhpcy5nZXRUcmFja3MoKS5mb3JFYWNoKCh0cmFjaykgPT4ge1xuICAgICAgaWYgKHRyYWNrLnJlYWR5U3RhdGUgPT09ICdsaXZlJykgdHJhY2suc3RvcCgpO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBtdXRlTG9jYWxTdHJlYW0oc3RvcFRyYWNrczogYm9vbGVhbikge1xuICAgIGlmICghdGhpcy5zdGF0ZS5tZWRpYVN0cmVhbSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoc3RvcFRyYWNrcykge1xuICAgICAgdGhpcy5zdG9wVHJhY2tzKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubXV0ZVRyYWNrcygpO1xuICAgIH1cbiAgfVxuXG4gIHByb3RlY3RlZCBhc3luYyB1bm11dGVTdHJlYW0oKSB7XG4gICAgdGhpcy5sb2dnZXIoJ2RlYnVnJywgJ1N0YXJ0aW5nIHN0cmVhbScpO1xuICAgIGxldCBzdHJlYW06IE1lZGlhU3RyZWFtO1xuICAgIGlmIChcbiAgICAgIHRoaXMuc3RhdGUubWVkaWFTdHJlYW0gJiZcbiAgICAgIHRoaXMuZ2V0VHJhY2tzKCkuZXZlcnkoKHQpID0+IHQucmVhZHlTdGF0ZSA9PT0gJ2xpdmUnKVxuICAgICkge1xuICAgICAgc3RyZWFtID0gdGhpcy5zdGF0ZS5tZWRpYVN0cmVhbTtcbiAgICAgIHRoaXMudW5tdXRlVHJhY2tzKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGRlZmF1bHRDb25zdHJhaW50cyA9IHRoaXMuc3RhdGUuZGVmYXVsdENvbnN0cmFpbnRzO1xuICAgICAgY29uc3QgY29uc3RyYWludHM6IE1lZGlhVHJhY2tDb25zdHJhaW50cyA9IHtcbiAgICAgICAgLi4uZGVmYXVsdENvbnN0cmFpbnRzLFxuICAgICAgICBkZXZpY2VJZDogdGhpcy5zdGF0ZS5zZWxlY3RlZERldmljZSxcbiAgICAgIH07XG4gICAgICBzdHJlYW0gPSBhd2FpdCB0aGlzLmdldFN0cmVhbShjb25zdHJhaW50cyBhcyBDKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuY2FsbC5zdGF0ZS5jYWxsaW5nU3RhdGUgPT09IENhbGxpbmdTdGF0ZS5KT0lORUQpIHtcbiAgICAgIGF3YWl0IHRoaXMucHVibGlzaFN0cmVhbShzdHJlYW0pO1xuICAgIH1cbiAgICBpZiAodGhpcy5zdGF0ZS5tZWRpYVN0cmVhbSAhPT0gc3RyZWFtKSB7XG4gICAgICB0aGlzLnN0YXRlLnNldE1lZGlhU3RyZWFtKHN0cmVhbSk7XG4gICAgICB0aGlzLmdldFRyYWNrcygpLmZvckVhY2goKHRyYWNrKSA9PiB7XG4gICAgICAgIHRyYWNrLmFkZEV2ZW50TGlzdGVuZXIoJ2VuZGVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGlmICh0aGlzLmVuYWJsZVByb21pc2UpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZW5hYmxlUHJvbWlzZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHRoaXMuZGlzYWJsZVByb21pc2UpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZGlzYWJsZVByb21pc2U7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh0aGlzLnN0YXRlLnN0YXR1cyA9PT0gJ2VuYWJsZWQnKSB7XG4gICAgICAgICAgICB0aGlzLmlzVHJhY2tTdG9wcGVkRHVlVG9UcmFja0VuZCA9IHRydWU7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgdGhpcy5pc1RyYWNrU3RvcHBlZER1ZVRvVHJhY2tFbmQgPSBmYWxzZTtcbiAgICAgICAgICAgIH0sIDIwMDApO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5kaXNhYmxlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZ2V0IG1lZGlhRGV2aWNlS2luZCgpIHtcbiAgICBpZiAodGhpcy50cmFja1R5cGUgPT09IFRyYWNrVHlwZS5BVURJTykge1xuICAgICAgcmV0dXJuICdhdWRpb2lucHV0JztcbiAgICB9XG4gICAgaWYgKHRoaXMudHJhY2tUeXBlID09PSBUcmFja1R5cGUuVklERU8pIHtcbiAgICAgIHJldHVybiAndmlkZW9pbnB1dCc7XG4gICAgfVxuICAgIHJldHVybiAnJztcbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlRGlzY29ubmVjdGVkT3JSZXBsYWNlZERldmljZXMoKSB7XG4gICAgdGhpcy5zdWJzY3JpcHRpb25zLnB1c2goXG4gICAgICBjb21iaW5lTGF0ZXN0KFtcbiAgICAgICAgZGV2aWNlSWRzJCEucGlwZShwYWlyd2lzZSgpKSxcbiAgICAgICAgdGhpcy5zdGF0ZS5zZWxlY3RlZERldmljZSQsXG4gICAgICBdKS5zdWJzY3JpYmUoYXN5bmMgKFtbcHJldkRldmljZXMsIGN1cnJlbnREZXZpY2VzXSwgZGV2aWNlSWRdKSA9PiB7XG4gICAgICAgIGlmICghZGV2aWNlSWQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZW5hYmxlUHJvbWlzZSkge1xuICAgICAgICAgIGF3YWl0IHRoaXMuZW5hYmxlUHJvbWlzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5kaXNhYmxlUHJvbWlzZSkge1xuICAgICAgICAgIGF3YWl0IHRoaXMuZGlzYWJsZVByb21pc2U7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaXNEZXZpY2VEaXNjb25uZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgbGV0IGlzRGV2aWNlUmVwbGFjZWQgPSBmYWxzZTtcbiAgICAgICAgY29uc3QgY3VycmVudERldmljZSA9IHRoaXMuZmluZERldmljZUluTGlzdChjdXJyZW50RGV2aWNlcywgZGV2aWNlSWQpO1xuICAgICAgICBjb25zdCBwcmV2RGV2aWNlID0gdGhpcy5maW5kRGV2aWNlSW5MaXN0KHByZXZEZXZpY2VzLCBkZXZpY2VJZCk7XG4gICAgICAgIGlmICghY3VycmVudERldmljZSAmJiBwcmV2RGV2aWNlKSB7XG4gICAgICAgICAgaXNEZXZpY2VEaXNjb25uZWN0ZWQgPSB0cnVlO1xuICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgIGN1cnJlbnREZXZpY2UgJiZcbiAgICAgICAgICBwcmV2RGV2aWNlICYmXG4gICAgICAgICAgY3VycmVudERldmljZS5kZXZpY2VJZCA9PT0gcHJldkRldmljZS5kZXZpY2VJZCAmJlxuICAgICAgICAgIGN1cnJlbnREZXZpY2UuZ3JvdXBJZCAhPT0gcHJldkRldmljZS5ncm91cElkXG4gICAgICAgICkge1xuICAgICAgICAgIGlzRGV2aWNlUmVwbGFjZWQgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzRGV2aWNlRGlzY29ubmVjdGVkKSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5kaXNhYmxlKCk7XG4gICAgICAgICAgdGhpcy5zZWxlY3QodW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNEZXZpY2VSZXBsYWNlZCkge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHRoaXMuaXNUcmFja1N0b3BwZWREdWVUb1RyYWNrRW5kICYmXG4gICAgICAgICAgICB0aGlzLnN0YXRlLnN0YXR1cyA9PT0gJ2Rpc2FibGVkJ1xuICAgICAgICAgICkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5lbmFibGUoKTtcbiAgICAgICAgICAgIHRoaXMuaXNUcmFja1N0b3BwZWREdWVUb1RyYWNrRW5kID0gZmFsc2U7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwbHlTZXR0aW5nc1RvU3RyZWFtKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KSxcbiAgICApO1xuICB9XG5cbiAgcHJpdmF0ZSBmaW5kRGV2aWNlSW5MaXN0KGRldmljZXM6IE1lZGlhRGV2aWNlSW5mb1tdLCBkZXZpY2VJZDogc3RyaW5nKSB7XG4gICAgcmV0dXJuIGRldmljZXMuZmluZChcbiAgICAgIChkKSA9PiBkLmRldmljZUlkID09PSBkZXZpY2VJZCAmJiBkLmtpbmQgPT09IHRoaXMubWVkaWFEZXZpY2VLaW5kLFxuICAgICk7XG4gIH1cbn1cbiIsImltcG9ydCB7XG4gIEJlaGF2aW9yU3ViamVjdCxcbiAgZGlzdGluY3RVbnRpbENoYW5nZWQsXG4gIE9ic2VydmFibGUsXG4gIHNoYXJlUmVwbGF5LFxufSBmcm9tICdyeGpzJztcbmltcG9ydCB7IGlzUmVhY3ROYXRpdmUgfSBmcm9tICcuLi9oZWxwZXJzL3BsYXRmb3Jtcyc7XG5pbXBvcnQgeyBSeFV0aWxzIH0gZnJvbSAnLi4vc3RvcmUnO1xuaW1wb3J0IHsgZ2V0TG9nZ2VyIH0gZnJvbSAnLi4vbG9nZ2VyJztcbmltcG9ydCB7IGlzU2FmYXJpIH0gZnJvbSAnLi4vaGVscGVycy9icm93c2Vycyc7XG5cbmV4cG9ydCB0eXBlIElucHV0RGV2aWNlU3RhdHVzID0gJ2VuYWJsZWQnIHwgJ2Rpc2FibGVkJyB8IHVuZGVmaW5lZDtcblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIElucHV0TWVkaWFEZXZpY2VNYW5hZ2VyU3RhdGU8QyA9IE1lZGlhVHJhY2tDb25zdHJhaW50cz4ge1xuICBwcm90ZWN0ZWQgc3RhdHVzU3ViamVjdCA9IG5ldyBCZWhhdmlvclN1YmplY3Q8SW5wdXREZXZpY2VTdGF0dXM+KHVuZGVmaW5lZCk7XG4gIHByb3RlY3RlZCBtZWRpYVN0cmVhbVN1YmplY3QgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PE1lZGlhU3RyZWFtIHwgdW5kZWZpbmVkPihcbiAgICB1bmRlZmluZWQsXG4gICk7XG4gIHByb3RlY3RlZCBzZWxlY3RlZERldmljZVN1YmplY3QgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PHN0cmluZyB8IHVuZGVmaW5lZD4oXG4gICAgdW5kZWZpbmVkLFxuICApO1xuICBwcm90ZWN0ZWQgZGVmYXVsdENvbnN0cmFpbnRzU3ViamVjdCA9IG5ldyBCZWhhdmlvclN1YmplY3Q8QyB8IHVuZGVmaW5lZD4oXG4gICAgdW5kZWZpbmVkLFxuICApO1xuXG4gIC8qKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIHByZXZTdGF0dXM6IElucHV0RGV2aWNlU3RhdHVzO1xuXG4gIC8qKlxuICAgKiBBbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgdGhlIGN1cnJlbnQgbWVkaWEgc3RyZWFtLCBvciBgdW5kZWZpbmVkYCBpZiB0aGUgZGV2aWNlIGlzIGN1cnJlbnRseSBkaXNhYmxlZC5cbiAgICpcbiAgICovXG4gIG1lZGlhU3RyZWFtJCA9IHRoaXMubWVkaWFTdHJlYW1TdWJqZWN0LmFzT2JzZXJ2YWJsZSgpO1xuXG4gIC8qKlxuICAgKiBBbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgdGhlIGN1cnJlbnRseSBzZWxlY3RlZCBkZXZpY2VcbiAgICovXG4gIHNlbGVjdGVkRGV2aWNlJCA9IHRoaXMuc2VsZWN0ZWREZXZpY2VTdWJqZWN0XG4gICAgLmFzT2JzZXJ2YWJsZSgpXG4gICAgLnBpcGUoZGlzdGluY3RVbnRpbENoYW5nZWQoKSk7XG5cbiAgLyoqXG4gICAqIEFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyB0aGUgZGV2aWNlIHN0YXR1c1xuICAgKi9cbiAgc3RhdHVzJCA9IHRoaXMuc3RhdHVzU3ViamVjdC5hc09ic2VydmFibGUoKS5waXBlKGRpc3RpbmN0VW50aWxDaGFuZ2VkKCkpO1xuXG4gIC8qKlxuICAgKiBUaGUgZGVmYXVsdCBjb25zdHJhaW50cyBmb3IgdGhlIGRldmljZS5cbiAgICovXG4gIGRlZmF1bHRDb25zdHJhaW50cyQgPSB0aGlzLmRlZmF1bHRDb25zdHJhaW50c1N1YmplY3QuYXNPYnNlcnZhYmxlKCk7XG5cbiAgLyoqXG4gICAqIEFuIG9ic2VydmFibGUgdGhhdCB3aWxsIGVtaXQgYHRydWVgIGlmIGJyb3dzZXIvc3lzdGVtIHBlcm1pc3Npb25cbiAgICogaXMgZ3JhbnRlZCwgYGZhbHNlYCBvdGhlcndpc2UuXG4gICAqL1xuICBoYXNCcm93c2VyUGVybWlzc2lvbiQgPSBuZXcgT2JzZXJ2YWJsZTxib29sZWFuPigoc3Vic2NyaWJlcikgPT4ge1xuICAgIGNvbnN0IG5vdGlmeUdyYW50ZWQgPSAoKSA9PiBzdWJzY3JpYmVyLm5leHQodHJ1ZSk7XG4gICAgY29uc3QgcGVybWlzc2lvbnNBUElBdmFpbGFibGUgPSAhIW5hdmlnYXRvcj8ucGVybWlzc2lvbnM/LnF1ZXJ5O1xuICAgIGlmIChpc1JlYWN0TmF0aXZlKCkgfHwgIXRoaXMucGVybWlzc2lvbk5hbWUgfHwgIXBlcm1pc3Npb25zQVBJQXZhaWxhYmxlKSB7XG4gICAgICBnZXRMb2dnZXIoWydkZXZpY2VzJ10pKFxuICAgICAgICAnd2FybicsXG4gICAgICAgIGBQZXJtaXNzaW9ucyBjYW4ndCBiZSBxdWVyaWVkLiBBc3N1bWluZyBncmFudGVkLmAsXG4gICAgICApO1xuICAgICAgcmV0dXJuIG5vdGlmeUdyYW50ZWQoKTtcbiAgICB9XG5cbiAgICBsZXQgcGVybWlzc2lvblN0YXRlOiBQZXJtaXNzaW9uU3RhdHVzO1xuICAgIGNvbnN0IG5vdGlmeSA9ICgpID0+XG4gICAgICBzdWJzY3JpYmVyLm5leHQoXG4gICAgICAgIC8vIEluIFNhZmFyaSwgdGhlIGBjaGFuZ2VgIGV2ZW50IGRvZXNuJ3QgcmVsaWFibHkgZW1pdCBhbmQgaGVuY2UsXG4gICAgICAgIC8vIHBlcm1pc3Npb25TdGF0ZSBzdGF5cyBpbiAncHJvbXB0JyBzdGF0ZSBmb3JldmVyLlxuICAgICAgICAvLyBJbnN0ZWFkIG9mIGNoZWNraW5nIGlmIGEgcGVybWlzc2lvbiBpcyBncmFudGVkLCB3ZSBjaGVjayBpZiBpdCBpc24ndCBkZW5pZWRcbiAgICAgICAgaXNTYWZhcmkoKVxuICAgICAgICAgID8gcGVybWlzc2lvblN0YXRlLnN0YXRlICE9PSAnZGVuaWVkJ1xuICAgICAgICAgIDogcGVybWlzc2lvblN0YXRlLnN0YXRlID09PSAnZ3JhbnRlZCcsXG4gICAgICApO1xuICAgIG5hdmlnYXRvci5wZXJtaXNzaW9uc1xuICAgICAgLnF1ZXJ5KHsgbmFtZTogdGhpcy5wZXJtaXNzaW9uTmFtZSB9KVxuICAgICAgLnRoZW4oKHBlcm1pc3Npb25TdGF0dXMpID0+IHtcbiAgICAgICAgcGVybWlzc2lvblN0YXRlID0gcGVybWlzc2lvblN0YXR1cztcbiAgICAgICAgcGVybWlzc2lvblN0YXRlLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIG5vdGlmeSk7XG4gICAgICAgIG5vdGlmeSgpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoKSA9PiB7XG4gICAgICAgIC8vIHBlcm1pc3Npb24gZG9lc24ndCBleGlzdCBvciBjYW4ndCBiZSBxdWVyaWVkIC0+IGFzc3VtZSBpdCdzIGdyYW50ZWRcbiAgICAgICAgLy8gYW4gZXhhbXBsZSB3b3VsZCBiZSBGaXJlZm94LFxuICAgICAgICAvLyB3aGVyZSBuZWl0aGVyIGNhbWVyYSBtaWNyb3Bob25lIHBlcm1pc3Npb24gY2FuIGJlIHF1ZXJpZWRcbiAgICAgICAgbm90aWZ5R3JhbnRlZCgpO1xuICAgICAgfSk7XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgcGVybWlzc2lvblN0YXRlPy5yZW1vdmVFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBub3RpZnkpO1xuICAgIH07XG4gIH0pLnBpcGUoc2hhcmVSZXBsYXkoMSkpO1xuXG4gIC8qKlxuICAgKiBDb25zdHJ1Y3RzIG5ldyBJbnB1dE1lZGlhRGV2aWNlTWFuYWdlclN0YXRlIGluc3RhbmNlLlxuICAgKlxuICAgKiBAcGFyYW0gZGlzYWJsZU1vZGUgdGhlIGRpc2FibGUgbW9kZSB0byB1c2UuXG4gICAqIEBwYXJhbSBwZXJtaXNzaW9uTmFtZSB0aGUgcGVybWlzc2lvbiBuYW1lIHRvIHVzZSBmb3IgcXVlcnlpbmcuXG4gICAqIGB1bmRlZmluZWRgIG1lYW5zIG5vIHBlcm1pc3Npb24gaXMgcmVxdWlyZWQuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihcbiAgICBwdWJsaWMgcmVhZG9ubHkgZGlzYWJsZU1vZGU6XG4gICAgICB8ICdzdG9wLXRyYWNrcydcbiAgICAgIHwgJ2Rpc2FibGUtdHJhY2tzJyA9ICdzdG9wLXRyYWNrcycsXG4gICAgcHJpdmF0ZSByZWFkb25seSBwZXJtaXNzaW9uTmFtZTogUGVybWlzc2lvbk5hbWUgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQsXG4gICkge31cblxuICAvKipcbiAgICogVGhlIGRldmljZSBzdGF0dXNcbiAgICovXG4gIGdldCBzdGF0dXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q3VycmVudFZhbHVlKHRoaXMuc3RhdHVzJCk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIGN1cnJlbnRseSBzZWxlY3RlZCBkZXZpY2VcbiAgICovXG4gIGdldCBzZWxlY3RlZERldmljZSgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRDdXJyZW50VmFsdWUodGhpcy5zZWxlY3RlZERldmljZSQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBjdXJyZW50IG1lZGlhIHN0cmVhbSwgb3IgYHVuZGVmaW5lZGAgaWYgdGhlIGRldmljZSBpcyBjdXJyZW50bHkgZGlzYWJsZWQuXG4gICAqL1xuICBnZXQgbWVkaWFTdHJlYW0oKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q3VycmVudFZhbHVlKHRoaXMubWVkaWFTdHJlYW0kKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBjdXJyZW50IHZhbHVlIG9mIGFuIG9ic2VydmFibGUsIG9yIHVuZGVmaW5lZCBpZiB0aGUgb2JzZXJ2YWJsZSBoYXNcbiAgICogbm90IGVtaXR0ZWQgYSB2YWx1ZSB5ZXQuXG4gICAqXG4gICAqIEBwYXJhbSBvYnNlcnZhYmxlJCB0aGUgb2JzZXJ2YWJsZSB0byBnZXQgdGhlIHZhbHVlIGZyb20uXG4gICAqL1xuICBnZXRDdXJyZW50VmFsdWUgPSBSeFV0aWxzLmdldEN1cnJlbnRWYWx1ZTtcblxuICAvKipcbiAgICogQGludGVybmFsXG4gICAqIEBwYXJhbSBzdGF0dXNcbiAgICovXG4gIHNldFN0YXR1cyhzdGF0dXM6IElucHV0RGV2aWNlU3RhdHVzKSB7XG4gICAgdGhpcy5zZXRDdXJyZW50VmFsdWUodGhpcy5zdGF0dXNTdWJqZWN0LCBzdGF0dXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBpbnRlcm5hbFxuICAgKiBAcGFyYW0gc3RyZWFtIHRoZSBzdHJlYW0gdG8gc2V0LlxuICAgKi9cbiAgc2V0TWVkaWFTdHJlYW0oc3RyZWFtOiBNZWRpYVN0cmVhbSB8IHVuZGVmaW5lZCkge1xuICAgIHRoaXMuc2V0Q3VycmVudFZhbHVlKHRoaXMubWVkaWFTdHJlYW1TdWJqZWN0LCBzdHJlYW0pO1xuICAgIGlmIChzdHJlYW0pIHtcbiAgICAgIHRoaXMuc2V0RGV2aWNlKHRoaXMuZ2V0RGV2aWNlSWRGcm9tU3RyZWFtKHN0cmVhbSkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAaW50ZXJuYWxcbiAgICogQHBhcmFtIGRldmljZUlkIHRoZSBkZXZpY2UgaWQgdG8gc2V0LlxuICAgKi9cbiAgc2V0RGV2aWNlKGRldmljZUlkOiBzdHJpbmcgfCB1bmRlZmluZWQpIHtcbiAgICB0aGlzLnNldEN1cnJlbnRWYWx1ZSh0aGlzLnNlbGVjdGVkRGV2aWNlU3ViamVjdCwgZGV2aWNlSWQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGRlZmF1bHQgY29uc3RyYWludHMgZm9yIHRoZSBkZXZpY2UuXG4gICAqL1xuICBnZXQgZGVmYXVsdENvbnN0cmFpbnRzKCkge1xuICAgIHJldHVybiB0aGlzLmdldEN1cnJlbnRWYWx1ZSh0aGlzLmRlZmF1bHRDb25zdHJhaW50cyQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIGRlZmF1bHQgY29uc3RyYWludHMgZm9yIHRoZSBkZXZpY2UuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKiBAcGFyYW0gY29uc3RyYWludHMgdGhlIGNvbnN0cmFpbnRzIHRvIHNldC5cbiAgICovXG4gIHNldERlZmF1bHRDb25zdHJhaW50cyhjb25zdHJhaW50czogQyB8IHVuZGVmaW5lZCkge1xuICAgIHRoaXMuc2V0Q3VycmVudFZhbHVlKHRoaXMuZGVmYXVsdENvbnN0cmFpbnRzU3ViamVjdCwgY29uc3RyYWludHMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhlIHZhbHVlIG9mIHRoZSBwcm92aWRlZCBTdWJqZWN0LlxuICAgKiBBbiBgdXBkYXRlYCBjYW4gZWl0aGVyIGJlIGEgbmV3IHZhbHVlIG9yIGEgZnVuY3Rpb24gd2hpY2ggdGFrZXNcbiAgICogdGhlIGN1cnJlbnQgdmFsdWUgYW5kIHJldHVybnMgYSBuZXcgdmFsdWUuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKlxuICAgKiBAcGFyYW0gc3ViamVjdCB0aGUgc3ViamVjdCB0byB1cGRhdGUuXG4gICAqIEBwYXJhbSB1cGRhdGUgdGhlIHVwZGF0ZSB0byBhcHBseSB0byB0aGUgc3ViamVjdC5cbiAgICogQHJldHVybiB0aGUgdXBkYXRlZCB2YWx1ZS5cbiAgICovXG4gIHByb3RlY3RlZCBzZXRDdXJyZW50VmFsdWUgPSBSeFV0aWxzLnNldEN1cnJlbnRWYWx1ZTtcblxuICBwcm90ZWN0ZWQgYWJzdHJhY3QgZ2V0RGV2aWNlSWRGcm9tU3RyZWFtKFxuICAgIHN0cmVhbTogTWVkaWFTdHJlYW0sXG4gICk6IHN0cmluZyB8IHVuZGVmaW5lZDtcbn1cbiIsImltcG9ydCB7IEJlaGF2aW9yU3ViamVjdCwgZGlzdGluY3RVbnRpbENoYW5nZWQsIE9ic2VydmFibGUgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IElucHV0TWVkaWFEZXZpY2VNYW5hZ2VyU3RhdGUgfSBmcm9tICcuL0lucHV0TWVkaWFEZXZpY2VNYW5hZ2VyU3RhdGUnO1xuaW1wb3J0IHsgaXNSZWFjdE5hdGl2ZSB9IGZyb20gJy4uL2hlbHBlcnMvcGxhdGZvcm1zJztcblxuZXhwb3J0IHR5cGUgQ2FtZXJhRGlyZWN0aW9uID0gJ2Zyb250JyB8ICdiYWNrJyB8IHVuZGVmaW5lZDtcblxuZXhwb3J0IGNsYXNzIENhbWVyYU1hbmFnZXJTdGF0ZSBleHRlbmRzIElucHV0TWVkaWFEZXZpY2VNYW5hZ2VyU3RhdGUge1xuICBwcml2YXRlIGRpcmVjdGlvblN1YmplY3QgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PENhbWVyYURpcmVjdGlvbj4odW5kZWZpbmVkKTtcblxuICAvKipcbiAgICogT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHRoZSBwcmVmZXJyZWQgY2FtZXJhIGRpcmVjdGlvblxuICAgKiBmcm9udCAtIG1lYW5zIHRoZSBjYW1lcmEgZmFjaW5nIHRoZSB1c2VyXG4gICAqIGJhY2sgLSBtZWFucyB0aGUgY2FtZXJhIGZhY2luZyB0aGUgZW52aXJvbm1lbnRcbiAgICovXG4gIGRpcmVjdGlvbiQ6IE9ic2VydmFibGU8Q2FtZXJhRGlyZWN0aW9uPjtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcihcbiAgICAgICdzdG9wLXRyYWNrcycsXG4gICAgICAvLyBgY2FtZXJhYCBpcyBub3QgaW4gdGhlIFczQyBzdGFuZGFyZCB5ZXQsXG4gICAgICAvLyBidXQgaXQncyBzdXBwb3J0ZWQgYnkgQ2hyb21lIGFuZCBTYWZhcmkuXG4gICAgICAnY2FtZXJhJyBhcyBQZXJtaXNzaW9uTmFtZSxcbiAgICApO1xuICAgIHRoaXMuZGlyZWN0aW9uJCA9IHRoaXMuZGlyZWN0aW9uU3ViamVjdFxuICAgICAgLmFzT2JzZXJ2YWJsZSgpXG4gICAgICAucGlwZShkaXN0aW5jdFVudGlsQ2hhbmdlZCgpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgcHJlZmVycmVkIGNhbWVyYSBkaXJlY3Rpb25cbiAgICogZnJvbnQgLSBtZWFucyB0aGUgY2FtZXJhIGZhY2luZyB0aGUgdXNlclxuICAgKiBiYWNrIC0gbWVhbnMgdGhlIGNhbWVyYSBmYWNpbmcgdGhlIGVudmlyb25tZW50XG4gICAqL1xuICBnZXQgZGlyZWN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmdldEN1cnJlbnRWYWx1ZSh0aGlzLmRpcmVjdGlvbiQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgc2V0RGlyZWN0aW9uKGRpcmVjdGlvbjogQ2FtZXJhRGlyZWN0aW9uKSB7XG4gICAgdGhpcy5zZXRDdXJyZW50VmFsdWUodGhpcy5kaXJlY3Rpb25TdWJqZWN0LCBkaXJlY3Rpb24pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgc2V0TWVkaWFTdHJlYW0oc3RyZWFtOiBNZWRpYVN0cmVhbSB8IHVuZGVmaW5lZCk6IHZvaWQge1xuICAgIHN1cGVyLnNldE1lZGlhU3RyZWFtKHN0cmVhbSk7XG4gICAgaWYgKHN0cmVhbSkge1xuICAgICAgLy8gUk4gZ2V0U2V0dGluZ3MoKSBkb2Vzbid0IHJldHVybiBmYWNpbmdNb2RlLCBzbyB3ZSBkb24ndCB2ZXJpZnkgY2FtZXJhIGRpcmVjdGlvblxuICAgICAgY29uc3QgZGlyZWN0aW9uID0gaXNSZWFjdE5hdGl2ZSgpXG4gICAgICAgID8gdGhpcy5kaXJlY3Rpb25cbiAgICAgICAgOiBzdHJlYW0uZ2V0VmlkZW9UcmFja3MoKVswXT8uZ2V0U2V0dGluZ3MoKS5mYWNpbmdNb2RlID09PSAnZW52aXJvbm1lbnQnXG4gICAgICAgID8gJ2JhY2snXG4gICAgICAgIDogJ2Zyb250JztcbiAgICAgIHRoaXMuc2V0RGlyZWN0aW9uKGRpcmVjdGlvbik7XG4gICAgfVxuICB9XG5cbiAgcHJvdGVjdGVkIGdldERldmljZUlkRnJvbVN0cmVhbShzdHJlYW06IE1lZGlhU3RyZWFtKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gc3RyZWFtLmdldFZpZGVvVHJhY2tzKClbMF0/LmdldFNldHRpbmdzKCkuZGV2aWNlSWQgYXNcbiAgICAgIHwgc3RyaW5nXG4gICAgICB8IHVuZGVmaW5lZDtcbiAgfVxufVxuIiwiaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgQ2FsbCB9IGZyb20gJy4uL0NhbGwnO1xuaW1wb3J0IHsgQ2FtZXJhRGlyZWN0aW9uLCBDYW1lcmFNYW5hZ2VyU3RhdGUgfSBmcm9tICcuL0NhbWVyYU1hbmFnZXJTdGF0ZSc7XG5pbXBvcnQgeyBJbnB1dE1lZGlhRGV2aWNlTWFuYWdlciB9IGZyb20gJy4vSW5wdXRNZWRpYURldmljZU1hbmFnZXInO1xuaW1wb3J0IHsgZ2V0VmlkZW9EZXZpY2VzLCBnZXRWaWRlb1N0cmVhbSB9IGZyb20gJy4vZGV2aWNlcyc7XG5pbXBvcnQgeyBUcmFja1R5cGUgfSBmcm9tICcuLi9nZW4vdmlkZW8vc2Z1L21vZGVscy9tb2RlbHMnO1xuXG50eXBlIFByZWZlcnJlZENvZGVjID0gJ3ZwOCcgfCAnaDI2NCcgfCBzdHJpbmc7XG5cbmV4cG9ydCBjbGFzcyBDYW1lcmFNYW5hZ2VyIGV4dGVuZHMgSW5wdXRNZWRpYURldmljZU1hbmFnZXI8Q2FtZXJhTWFuYWdlclN0YXRlPiB7XG4gIHByaXZhdGUgdGFyZ2V0UmVzb2x1dGlvbiA9IHtcbiAgICB3aWR0aDogMTI4MCxcbiAgICBoZWlnaHQ6IDcyMCxcbiAgfTtcblxuICAvKipcbiAgICogVGhlIHByZWZlcnJlZCBjb2RlYyBmb3IgZW5jb2RpbmcgdGhlIHZpZGVvLlxuICAgKlxuICAgKiBAaW50ZXJuYWwgaW50ZXJuYWwgdXNlIG9ubHksIG5vdCBwYXJ0IG9mIHRoZSBwdWJsaWMgQVBJLlxuICAgKi9cbiAgcHJlZmVycmVkQ29kZWM6IFByZWZlcnJlZENvZGVjIHwgdW5kZWZpbmVkO1xuXG4gIGNvbnN0cnVjdG9yKGNhbGw6IENhbGwpIHtcbiAgICBzdXBlcihjYWxsLCBuZXcgQ2FtZXJhTWFuYWdlclN0YXRlKCksIFRyYWNrVHlwZS5WSURFTyk7XG4gIH1cblxuICAvKipcbiAgICogU2VsZWN0IHRoZSBjYW1lcmEgZGlyZWN0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0gZGlyZWN0aW9uIHRoZSBkaXJlY3Rpb24gb2YgdGhlIGNhbWVyYSB0byBzZWxlY3QuXG4gICAqL1xuICBhc3luYyBzZWxlY3REaXJlY3Rpb24oZGlyZWN0aW9uOiBFeGNsdWRlPENhbWVyYURpcmVjdGlvbiwgdW5kZWZpbmVkPikge1xuICAgIHRoaXMuc3RhdGUuc2V0RGlyZWN0aW9uKGRpcmVjdGlvbik7XG4gICAgLy8gUHJvdmlkaW5nIGJvdGggZGV2aWNlIGlkIGFuZCBkaXJlY3Rpb24gZG9lc24ndCB3b3JrLCBzbyB3ZSBkZXNlbGVjdCB0aGUgZGV2aWNlXG4gICAgdGhpcy5zdGF0ZS5zZXREZXZpY2UodW5kZWZpbmVkKTtcbiAgICBhd2FpdCB0aGlzLmFwcGx5U2V0dGluZ3NUb1N0cmVhbSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEZsaXBzIHRoZSBjYW1lcmEgZGlyZWN0aW9uOiBpZiBpdCdzIGZyb250IGl0IHdpbGwgY2hhbmdlIHRvIGJhY2ssIGlmIGl0J3MgYmFjaywgaXQgd2lsbCBjaGFuZ2UgdG8gZnJvbnQuXG4gICAqXG4gICAqIE5vdGU6IGlmIHRoZXJlIGlzIG5vIGF2YWlsYWJsZSBjYW1lcmEgd2l0aCB0aGUgZGVzaXJlZCBkaXJlY3Rpb24sIHRoaXMgbWV0aG9kIHdpbGwgZG8gbm90aGluZy5cbiAgICogQHJldHVybnNcbiAgICovXG4gIGFzeW5jIGZsaXAoKSB7XG4gICAgY29uc3QgbmV3RGlyZWN0aW9uID0gdGhpcy5zdGF0ZS5kaXJlY3Rpb24gPT09ICdmcm9udCcgPyAnYmFjaycgOiAnZnJvbnQnO1xuICAgIGF3YWl0IHRoaXMuc2VsZWN0RGlyZWN0aW9uKG5ld0RpcmVjdGlvbik7XG4gIH1cblxuICAvKipcbiAgICogQGludGVybmFsXG4gICAqL1xuICBhc3luYyBzZWxlY3RUYXJnZXRSZXNvbHV0aW9uKHJlc29sdXRpb246IHsgd2lkdGg6IG51bWJlcjsgaGVpZ2h0OiBudW1iZXIgfSkge1xuICAgIHRoaXMudGFyZ2V0UmVzb2x1dGlvbi5oZWlnaHQgPSByZXNvbHV0aW9uLmhlaWdodDtcbiAgICB0aGlzLnRhcmdldFJlc29sdXRpb24ud2lkdGggPSByZXNvbHV0aW9uLndpZHRoO1xuICAgIGlmICh0aGlzLmVuYWJsZVByb21pc2UpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IHRoaXMuZW5hYmxlUHJvbWlzZTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIC8vIGNvdWxkbid0IGVuYWJsZSBkZXZpY2UsIHRhcmdldCByZXNvbHV0aW9uIHdpbGwgYmUgYXBwbGllZCB0aGUgbmV4dCB0aW1lIHVzZXIgYXR0ZW1wdHMgdG8gc3RhcnQgdGhlIGRldmljZVxuICAgICAgICB0aGlzLmxvZ2dlcignd2FybicsICdjb3VsZCBub3QgYXBwbHkgdGFyZ2V0IHJlc29sdXRpb24nLCBlcnJvcik7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLnN0YXRlLnN0YXR1cyA9PT0gJ2VuYWJsZWQnKSB7XG4gICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IHRoaXMuc3RhdGVcbiAgICAgICAgLm1lZGlhU3RyZWFtIS5nZXRWaWRlb1RyYWNrcygpWzBdXG4gICAgICAgID8uZ2V0U2V0dGluZ3MoKTtcbiAgICAgIGlmIChcbiAgICAgICAgd2lkdGggIT09IHRoaXMudGFyZ2V0UmVzb2x1dGlvbi53aWR0aCB8fFxuICAgICAgICBoZWlnaHQgIT09IHRoaXMudGFyZ2V0UmVzb2x1dGlvbi5oZWlnaHRcbiAgICAgICkge1xuICAgICAgICBhd2FpdCB0aGlzLmFwcGx5U2V0dGluZ3NUb1N0cmVhbSgpO1xuICAgICAgICB0aGlzLmxvZ2dlcihcbiAgICAgICAgICAnZGVidWcnLFxuICAgICAgICAgIGAke3dpZHRofXgke2hlaWdodH0gdGFyZ2V0IHJlc29sdXRpb24gYXBwbGllZCB0byBtZWRpYSBzdHJlYW1gLFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBwcmVmZXJyZWQgY29kZWMgZm9yIGVuY29kaW5nIHRoZSB2aWRlby5cbiAgICpcbiAgICogQGludGVybmFsIGludGVybmFsIHVzZSBvbmx5LCBub3QgcGFydCBvZiB0aGUgcHVibGljIEFQSS5cbiAgICogQHBhcmFtIGNvZGVjIHRoZSBjb2RlYyB0byB1c2UgZm9yIGVuY29kaW5nIHRoZSB2aWRlby5cbiAgICovXG4gIHNldFByZWZlcnJlZENvZGVjKGNvZGVjOiAndnA4JyB8ICdoMjY0JyB8IHN0cmluZyB8IHVuZGVmaW5lZCkge1xuICAgIHRoaXMucHJlZmVycmVkQ29kZWMgPSBjb2RlYztcbiAgfVxuXG4gIHByb3RlY3RlZCBnZXREZXZpY2VzKCk6IE9ic2VydmFibGU8TWVkaWFEZXZpY2VJbmZvW10+IHtcbiAgICByZXR1cm4gZ2V0VmlkZW9EZXZpY2VzKCk7XG4gIH1cblxuICBwcm90ZWN0ZWQgZ2V0U3RyZWFtKFxuICAgIGNvbnN0cmFpbnRzOiBNZWRpYVRyYWNrQ29uc3RyYWludHMsXG4gICk6IFByb21pc2U8TWVkaWFTdHJlYW0+IHtcbiAgICBjb25zdHJhaW50cy53aWR0aCA9IHRoaXMudGFyZ2V0UmVzb2x1dGlvbi53aWR0aDtcbiAgICBjb25zdHJhaW50cy5oZWlnaHQgPSB0aGlzLnRhcmdldFJlc29sdXRpb24uaGVpZ2h0O1xuICAgIC8vIFdlIGNhbid0IHNldCBib3RoIGRldmljZSBpZCBhbmQgZmFjaW5nIG1vZGVcbiAgICAvLyBEZXZpY2UgaWQgaGFzIGhpZ2hlciBwcmlvcml0eVxuICAgIGlmICghY29uc3RyYWludHMuZGV2aWNlSWQgJiYgdGhpcy5zdGF0ZS5kaXJlY3Rpb24pIHtcbiAgICAgIGNvbnN0cmFpbnRzLmZhY2luZ01vZGUgPVxuICAgICAgICB0aGlzLnN0YXRlLmRpcmVjdGlvbiA9PT0gJ2Zyb250JyA/ICd1c2VyJyA6ICdlbnZpcm9ubWVudCc7XG4gICAgfVxuICAgIHJldHVybiBnZXRWaWRlb1N0cmVhbShjb25zdHJhaW50cyk7XG4gIH1cblxuICBwcm90ZWN0ZWQgcHVibGlzaFN0cmVhbShzdHJlYW06IE1lZGlhU3RyZWFtKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgcmV0dXJuIHRoaXMuY2FsbC5wdWJsaXNoVmlkZW9TdHJlYW0oc3RyZWFtLCB7XG4gICAgICBwcmVmZXJyZWRDb2RlYzogdGhpcy5wcmVmZXJyZWRDb2RlYyxcbiAgICB9KTtcbiAgfVxuXG4gIHByb3RlY3RlZCBzdG9wUHVibGlzaFN0cmVhbShzdG9wVHJhY2tzOiBib29sZWFuKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgcmV0dXJuIHRoaXMuY2FsbC5zdG9wUHVibGlzaChUcmFja1R5cGUuVklERU8sIHN0b3BUcmFja3MpO1xuICB9XG59XG4iLCJpbXBvcnQgeyBCZWhhdmlvclN1YmplY3QsIGRpc3RpbmN0VW50aWxDaGFuZ2VkLCBPYnNlcnZhYmxlIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBJbnB1dE1lZGlhRGV2aWNlTWFuYWdlclN0YXRlIH0gZnJvbSAnLi9JbnB1dE1lZGlhRGV2aWNlTWFuYWdlclN0YXRlJztcblxuZXhwb3J0IGNsYXNzIE1pY3JvcGhvbmVNYW5hZ2VyU3RhdGUgZXh0ZW5kcyBJbnB1dE1lZGlhRGV2aWNlTWFuYWdlclN0YXRlIHtcbiAgcHJpdmF0ZSBzcGVha2luZ1doaWxlTXV0ZWRTdWJqZWN0ID0gbmV3IEJlaGF2aW9yU3ViamVjdDxib29sZWFuPihmYWxzZSk7XG5cbiAgLyoqXG4gICAqIEFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBgdHJ1ZWAgaWYgdGhlIHVzZXIncyBtaWNyb3Bob25lIGlzIG11dGVkIGJ1dCB0aGV5J2FyZSBzcGVha2luZy5cbiAgICpcbiAgICogVGhpcyBmZWF0dXJlIGlzIG5vdCBhdmFpbGFibGUgaW4gdGhlIFJlYWN0IE5hdGl2ZSBTREsuXG4gICAqL1xuICBzcGVha2luZ1doaWxlTXV0ZWQkOiBPYnNlcnZhYmxlPGJvb2xlYW4+O1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKFxuICAgICAgJ2Rpc2FibGUtdHJhY2tzJyxcbiAgICAgIC8vIGBtaWNyb3Bob25lYCBpcyBub3QgaW4gdGhlIFczQyBzdGFuZGFyZCB5ZXQsXG4gICAgICAvLyBidXQgaXQncyBzdXBwb3J0ZWQgYnkgQ2hyb21lIGFuZCBTYWZhcmkuXG4gICAgICAnbWljcm9waG9uZScgYXMgUGVybWlzc2lvbk5hbWUsXG4gICAgKTtcblxuICAgIHRoaXMuc3BlYWtpbmdXaGlsZU11dGVkJCA9IHRoaXMuc3BlYWtpbmdXaGlsZU11dGVkU3ViamVjdFxuICAgICAgLmFzT2JzZXJ2YWJsZSgpXG4gICAgICAucGlwZShkaXN0aW5jdFVudGlsQ2hhbmdlZCgpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBgdHJ1ZWAgaWYgdGhlIHVzZXIncyBtaWNyb3Bob25lIGlzIG11dGVkIGJ1dCB0aGV5J2FyZSBzcGVha2luZy5cbiAgICpcbiAgICogVGhpcyBmZWF0dXJlIGlzIG5vdCBhdmFpbGFibGUgaW4gdGhlIFJlYWN0IE5hdGl2ZSBTREsuXG4gICAqL1xuICBnZXQgc3BlYWtpbmdXaGlsZU11dGVkKCkge1xuICAgIHJldHVybiB0aGlzLmdldEN1cnJlbnRWYWx1ZSh0aGlzLnNwZWFraW5nV2hpbGVNdXRlZCQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgc2V0U3BlYWtpbmdXaGlsZU11dGVkKGlzU3BlYWtpbmc6IGJvb2xlYW4pIHtcbiAgICB0aGlzLnNldEN1cnJlbnRWYWx1ZSh0aGlzLnNwZWFraW5nV2hpbGVNdXRlZFN1YmplY3QsIGlzU3BlYWtpbmcpO1xuICB9XG5cbiAgcHJvdGVjdGVkIGdldERldmljZUlkRnJvbVN0cmVhbShzdHJlYW06IE1lZGlhU3RyZWFtKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gc3RyZWFtLmdldEF1ZGlvVHJhY2tzKClbMF0/LmdldFNldHRpbmdzKCkuZGV2aWNlSWQgYXNcbiAgICAgIHwgc3RyaW5nXG4gICAgICB8IHVuZGVmaW5lZDtcbiAgfVxufVxuIiwiZXhwb3J0IHR5cGUgU291bmREZXRlY3Rvck9wdGlvbnMgPSB7XG4gIC8qKlxuICAgKiBEZWZpbmVzIGhvdyBvZnRlbiB0aGUgZGV0ZWN0b3Igc2hvdWxkIGNoZWNrIHdoZXRoZXIgYSBzb3VuZCBpcyBwcmVzZW50LlxuICAgKiBEZWZhdWx0cyB0byA1MDBtcy5cbiAgICovXG4gIGRldGVjdGlvbkZyZXF1ZW5jeUluTXM/OiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIERlZmluZXMgdGhlIGF1ZGlvIGxldmVsIHRocmVzaG9sZCBiZWZvcmUgYSBcImNoYW5nZVwiIGlzIGVtaXR0ZWQuXG4gICAqIERlZmF1bHRzIHRvIDE1MC4gVGhpcyB2YWx1ZSBzaG91bGQgYmUgaW4gdGhlIHJhbmdlIG9mIDAtMjU1LlxuICAgKi9cbiAgYXVkaW9MZXZlbFRocmVzaG9sZD86IG51bWJlcjtcblxuICAvKipcbiAgICogU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3Mvd2ViL2FwaS9hbmFseXNlcm5vZGUvZmZ0c2l6ZVxuICAgKlxuICAgKiBEZWZhdWx0cyB0byAxMjguXG4gICAqL1xuICBmZnRTaXplPzogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBEZWZpbmVzIHdoZXRoZXIgdGhlIHByb3ZpZGVkIGF1ZGlvIHN0cmVhbSBzaG91bGQgYmUgc3RvcHBlZCAoZGVzdHJveWVkKVxuICAgKiB3aGVuIHRoZSBzb3VuZCBkZXRlY3RvciBpcyBzdG9wcGVkLlxuICAgKlxuICAgKiBEZWZhdWx0cyB0byBgdHJ1ZWAuXG4gICAqL1xuICBkZXN0cm95U3RyZWFtT25TdG9wPzogYm9vbGVhbjtcbn07XG5cbmV4cG9ydCB0eXBlIFNvdW5kRGV0ZWN0b3JTdGF0ZSA9IHtcbiAgaXNTb3VuZERldGVjdGVkOiBib29sZWFuO1xuICAvKipcbiAgICogUmVwcmVzZW50ZWQgYXMgcGVyY2VudGFnZSAoMC0xMDApIHdoZXJlIDEwMCUgaXMgZGVmaW5lZCBieSBgYXVkaW9MZXZlbFRocmVzaG9sZGAgcHJvcGVydHkuXG4gICAqIERlY3JlYXNlIHRpbWUgYmV0d2VlbiBzYW1wbGVzICh0byA1MC0xMDBtcykgd2l0aCBgZGV0ZWN0aW9uRnJlcXVlbmN5SW5Nc2AgcHJvcGVydHkuXG4gICAqL1xuICBhdWRpb0xldmVsOiBudW1iZXI7XG59O1xuXG5leHBvcnQgdHlwZSBTb3VuZFN0YXRlQ2hhbmdlSGFuZGxlciA9IChzdGF0ZTogU291bmREZXRlY3RvclN0YXRlKSA9PiB2b2lkO1xuXG5jb25zdCBERVRFQ1RJT05fRlJFUVVFTkNZX0lOX01TID0gNTAwO1xuY29uc3QgQVVESU9fTEVWRUxfVEhSRVNIT0xEID0gMTUwO1xuY29uc3QgRkZUX1NJWkUgPSAxMjg7XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBzb3VuZCBkZXRlY3Rvci5cbiAqXG4gKiBAcGFyYW0gYXVkaW9TdHJlYW0gdGhlIGF1ZGlvIHN0cmVhbSB0byBvYnNlcnZlLiBEZXBlbmRpbmcgb24gdGhlIHByb3ZpZGVkIGNvbmZpZ3VyYXRpb24sIHRoaXMgc3RyZWFtIG1pZ2h0IGJlIGRlc3Ryb3llZCB3aGVuIHRoZSBzb3VuZCBkZXRlY3RvciBpcyBzdG9wcGVkLlxuICogQHBhcmFtIG9uU291bmREZXRlY3RlZFN0YXRlQ2hhbmdlZCBhIGNhbGxiYWNrIHdoaWNoIGlzIGNhbGxlZCB3aGVuIHRoZSBzb3VuZCBzdGF0ZSBjaGFuZ2VzLlxuICogQHBhcmFtIG9wdGlvbnMgY3VzdG9tIG9wdGlvbnMgZm9yIHRoZSBzb3VuZCBkZXRlY3Rvci5cbiAqIEByZXR1cm5zIGEgY2xlYW4tdXAgZnVuY3Rpb24gd2hpY2ggb25jZSBpbnZva2VkIHN0b3BzIHRoZSBzb3VuZCBkZXRlY3Rvci5cbiAqL1xuZXhwb3J0IGNvbnN0IGNyZWF0ZVNvdW5kRGV0ZWN0b3IgPSAoXG4gIGF1ZGlvU3RyZWFtOiBNZWRpYVN0cmVhbSxcbiAgb25Tb3VuZERldGVjdGVkU3RhdGVDaGFuZ2VkOiBTb3VuZFN0YXRlQ2hhbmdlSGFuZGxlcixcbiAgb3B0aW9uczogU291bmREZXRlY3Rvck9wdGlvbnMgPSB7fSxcbikgPT4ge1xuICBjb25zdCB7XG4gICAgZGV0ZWN0aW9uRnJlcXVlbmN5SW5NcyA9IERFVEVDVElPTl9GUkVRVUVOQ1lfSU5fTVMsXG4gICAgYXVkaW9MZXZlbFRocmVzaG9sZCA9IEFVRElPX0xFVkVMX1RIUkVTSE9MRCxcbiAgICBmZnRTaXplID0gRkZUX1NJWkUsXG4gICAgZGVzdHJveVN0cmVhbU9uU3RvcCA9IHRydWUsXG4gIH0gPSBvcHRpb25zO1xuXG4gIGNvbnN0IGF1ZGlvQ29udGV4dCA9IG5ldyBBdWRpb0NvbnRleHQoKTtcbiAgY29uc3QgYW5hbHlzZXIgPSBhdWRpb0NvbnRleHQuY3JlYXRlQW5hbHlzZXIoKTtcbiAgYW5hbHlzZXIuZmZ0U2l6ZSA9IGZmdFNpemU7XG5cbiAgY29uc3QgbWljcm9waG9uZSA9IGF1ZGlvQ29udGV4dC5jcmVhdGVNZWRpYVN0cmVhbVNvdXJjZShhdWRpb1N0cmVhbSk7XG4gIG1pY3JvcGhvbmUuY29ubmVjdChhbmFseXNlcik7XG5cbiAgY29uc3QgaW50ZXJ2YWxJZCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICBjb25zdCBkYXRhID0gbmV3IFVpbnQ4QXJyYXkoYW5hbHlzZXIuZnJlcXVlbmN5QmluQ291bnQpO1xuICAgIGFuYWx5c2VyLmdldEJ5dGVGcmVxdWVuY3lEYXRhKGRhdGEpO1xuXG4gICAgY29uc3QgaXNTb3VuZERldGVjdGVkID0gZGF0YS5zb21lKCh2YWx1ZSkgPT4gdmFsdWUgPj0gYXVkaW9MZXZlbFRocmVzaG9sZCk7XG5cbiAgICBjb25zdCBhdmVyYWdlZERhdGFWYWx1ZSA9IGRhdGEucmVkdWNlKChwdiwgY3YpID0+IHB2ICsgY3YsIDApIC8gZGF0YS5sZW5ndGg7XG5cbiAgICBjb25zdCBwZXJjZW50YWdlID1cbiAgICAgIGF2ZXJhZ2VkRGF0YVZhbHVlID4gYXVkaW9MZXZlbFRocmVzaG9sZFxuICAgICAgICA/IDEwMFxuICAgICAgICA6IE1hdGgucm91bmQoKGF2ZXJhZ2VkRGF0YVZhbHVlIC8gYXVkaW9MZXZlbFRocmVzaG9sZCkgKiAxMDApO1xuXG4gICAgLy8gV2hlbiB0aGUgdHJhY2sgaXMgZGlzYWJsZWQsIGl0IHRha2VzIHRpbWUgZm9yIHRoZSBidWZmZXIgdG8gZW1wdHlcbiAgICAvLyBUaGlzIGNoZWNrIHdpbGwgZW5zdXJlIHRoYXQgd2UgZG9uJ3Qgc2VuZCBhbnl0aGluZyBpZiB0aGUgdHJhY2sgaXMgZGlzYWJsZWRcbiAgICBpZiAoYXVkaW9TdHJlYW0uZ2V0QXVkaW9UcmFja3MoKVswXT8uZW5hYmxlZCkge1xuICAgICAgb25Tb3VuZERldGVjdGVkU3RhdGVDaGFuZ2VkKHsgaXNTb3VuZERldGVjdGVkLCBhdWRpb0xldmVsOiBwZXJjZW50YWdlIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBvblNvdW5kRGV0ZWN0ZWRTdGF0ZUNoYW5nZWQoeyBpc1NvdW5kRGV0ZWN0ZWQ6IGZhbHNlLCBhdWRpb0xldmVsOiAwIH0pO1xuICAgIH1cbiAgfSwgZGV0ZWN0aW9uRnJlcXVlbmN5SW5Ncyk7XG5cbiAgcmV0dXJuIGFzeW5jIGZ1bmN0aW9uIHN0b3AoKSB7XG4gICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbElkKTtcblxuICAgIC8vIGNsZWFuLXVwIHRoZSBBdWRpb0NvbnRleHQgZWxlbWVudHNcbiAgICBtaWNyb3Bob25lLmRpc2Nvbm5lY3QoKTtcbiAgICBhbmFseXNlci5kaXNjb25uZWN0KCk7XG4gICAgYXdhaXQgYXVkaW9Db250ZXh0LmNsb3NlKCk7XG5cbiAgICAvLyBzdG9wIHRoZSBzdHJlYW1cbiAgICBpZiAoZGVzdHJveVN0cmVhbU9uU3RvcCkge1xuICAgICAgYXVkaW9TdHJlYW0uZ2V0VHJhY2tzKCkuZm9yRWFjaCgodHJhY2spID0+IHtcbiAgICAgICAgdHJhY2suc3RvcCgpO1xuICAgICAgICBhdWRpb1N0cmVhbS5yZW1vdmVUcmFjayh0cmFjayk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59O1xuIiwiaW1wb3J0IHsgQmFzZVN0YXRzIH0gZnJvbSAnLi4vc3RhdHMvdHlwZXMnO1xuaW1wb3J0IHsgU291bmRTdGF0ZUNoYW5nZUhhbmRsZXIgfSBmcm9tICcuL3NvdW5kLWRldGVjdG9yJztcblxuLyoqXG4gKiBGbGF0dGVuIHRoZSBzdGF0cyByZXBvcnQgaW50byBhbiBhcnJheSBvZiBzdGF0cyBvYmplY3RzLlxuICpcbiAqIEBwYXJhbSByZXBvcnQgdGhlIHJlcG9ydCB0byBmbGF0dGVuLlxuICovXG5jb25zdCBmbGF0dGVuID0gKHJlcG9ydDogUlRDU3RhdHNSZXBvcnQpID0+IHtcbiAgY29uc3Qgc3RhdHM6IFJUQ1N0YXRzW10gPSBbXTtcbiAgcmVwb3J0LmZvckVhY2goKHMpID0+IHtcbiAgICBzdGF0cy5wdXNoKHMpO1xuICB9KTtcbiAgcmV0dXJuIHN0YXRzO1xufTtcblxuY29uc3QgQVVESU9fTEVWRUxfVEhSRVNIT0xEID0gMC4yO1xuXG5leHBvcnQgY2xhc3MgUk5TcGVlY2hEZXRlY3RvciB7XG4gIHByaXZhdGUgcGMxID0gbmV3IFJUQ1BlZXJDb25uZWN0aW9uKHt9KTtcbiAgcHJpdmF0ZSBwYzIgPSBuZXcgUlRDUGVlckNvbm5lY3Rpb24oe30pO1xuICBwcml2YXRlIGludGVydmFsSWQ6IE5vZGVKUy5UaW1lciB8IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogU3RhcnRzIHRoZSBzcGVlY2ggZGV0ZWN0aW9uLlxuICAgKi9cbiAgcHVibGljIGFzeW5jIHN0YXJ0KCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBhdWRpb1N0cmVhbSA9IGF3YWl0IG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKHtcbiAgICAgICAgYXVkaW86IHRydWUsXG4gICAgICB9KTtcblxuICAgICAgdGhpcy5wYzEuYWRkRXZlbnRMaXN0ZW5lcignaWNlY2FuZGlkYXRlJywgYXN5bmMgKGUpID0+IHtcbiAgICAgICAgYXdhaXQgdGhpcy5wYzIuYWRkSWNlQ2FuZGlkYXRlKFxuICAgICAgICAgIGUuY2FuZGlkYXRlIGFzIFJUQ0ljZUNhbmRpZGF0ZUluaXQgfCB1bmRlZmluZWQsXG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICAgIHRoaXMucGMyLmFkZEV2ZW50TGlzdGVuZXIoJ2ljZWNhbmRpZGF0ZScsIGFzeW5jIChlKSA9PiB7XG4gICAgICAgIGF3YWl0IHRoaXMucGMxLmFkZEljZUNhbmRpZGF0ZShcbiAgICAgICAgICBlLmNhbmRpZGF0ZSBhcyBSVENJY2VDYW5kaWRhdGVJbml0IHwgdW5kZWZpbmVkLFxuICAgICAgICApO1xuICAgICAgfSk7XG5cbiAgICAgIGF1ZGlvU3RyZWFtXG4gICAgICAgIC5nZXRUcmFja3MoKVxuICAgICAgICAuZm9yRWFjaCgodHJhY2spID0+IHRoaXMucGMxLmFkZFRyYWNrKHRyYWNrLCBhdWRpb1N0cmVhbSkpO1xuICAgICAgY29uc3Qgb2ZmZXIgPSBhd2FpdCB0aGlzLnBjMS5jcmVhdGVPZmZlcih7fSk7XG4gICAgICBhd2FpdCB0aGlzLnBjMi5zZXRSZW1vdGVEZXNjcmlwdGlvbihvZmZlcik7XG4gICAgICBhd2FpdCB0aGlzLnBjMS5zZXRMb2NhbERlc2NyaXB0aW9uKG9mZmVyKTtcbiAgICAgIGNvbnN0IGFuc3dlciA9IGF3YWl0IHRoaXMucGMyLmNyZWF0ZUFuc3dlcigpO1xuICAgICAgYXdhaXQgdGhpcy5wYzEuc2V0UmVtb3RlRGVzY3JpcHRpb24oYW5zd2VyKTtcbiAgICAgIGF3YWl0IHRoaXMucGMyLnNldExvY2FsRGVzY3JpcHRpb24oYW5zd2VyKTtcbiAgICAgIGNvbnN0IGF1ZGlvVHJhY2tzID0gYXVkaW9TdHJlYW0uZ2V0QXVkaW9UcmFja3MoKTtcbiAgICAgIC8vIFdlIG5lZWQgdG8gbXV0ZSB0aGUgYXVkaW8gdHJhY2sgZm9yIHRoaXMgdGVtcG9yYXJ5IHN0cmVhbSwgb3IgZWxzZSB5b3Ugd2lsbCBoZWFyIHlvdXJzZWxmIHR3aWNlIHdoaWxlIGluIHRoZSBjYWxsLlxuICAgICAgYXVkaW9UcmFja3MuZm9yRWFjaCgodHJhY2spID0+ICh0cmFjay5lbmFibGVkID0gZmFsc2UpKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgJ0Vycm9yIGNvbm5lY3RpbmcgYW5kIG5lZ290aWF0aW5nIGJldHdlZW4gUGVlckNvbm5lY3Rpb25zOicsXG4gICAgICAgIGVycm9yLFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU3RvcHMgdGhlIHNwZWVjaCBkZXRlY3Rpb24gYW5kIHJlbGVhc2VzIGFsbCBhbGxvY2F0ZWQgcmVzb3VyY2VzLlxuICAgKi9cbiAgcHVibGljIHN0b3AoKSB7XG4gICAgdGhpcy5wYzEuY2xvc2UoKTtcbiAgICB0aGlzLnBjMi5jbG9zZSgpO1xuICAgIGlmICh0aGlzLmludGVydmFsSWQpIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbElkKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUHVibGljIG1ldGhvZCB0aGF0IGRldGVjdHMgdGhlIGF1ZGlvIGxldmVscyBhbmQgcmV0dXJucyB0aGUgc3RhdHVzLlxuICAgKi9cbiAgcHVibGljIG9uU3BlYWtpbmdEZXRlY3RlZFN0YXRlQ2hhbmdlKFxuICAgIG9uU291bmREZXRlY3RlZFN0YXRlQ2hhbmdlZDogU291bmRTdGF0ZUNoYW5nZUhhbmRsZXIsXG4gICkge1xuICAgIHRoaXMuaW50ZXJ2YWxJZCA9IHNldEludGVydmFsKGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHN0YXRzID0gKGF3YWl0IHRoaXMucGMxLmdldFN0YXRzKCkpIGFzIFJUQ1N0YXRzUmVwb3J0O1xuICAgICAgY29uc3QgcmVwb3J0ID0gZmxhdHRlbihzdGF0cyk7XG4gICAgICAvLyBBdWRpbyBsZXZlbHMgYXJlIHByZXNlbnQgaW5zaWRlIHN0YXRzIG9mIHR5cGUgYG1lZGlhLXNvdXJjZWAgYW5kIG9mIGtpbmQgYGF1ZGlvYFxuICAgICAgY29uc3QgYXVkaW9NZWRpYVNvdXJjZVN0YXRzID0gcmVwb3J0LmZpbmQoXG4gICAgICAgIChzdGF0KSA9PlxuICAgICAgICAgIHN0YXQudHlwZSA9PT0gJ21lZGlhLXNvdXJjZScgJiZcbiAgICAgICAgICAoc3RhdCBhcyBSVENSdHBTdHJlYW1TdGF0cykua2luZCA9PT0gJ2F1ZGlvJyxcbiAgICAgICkgYXMgQmFzZVN0YXRzO1xuICAgICAgaWYgKGF1ZGlvTWVkaWFTb3VyY2VTdGF0cykge1xuICAgICAgICBjb25zdCB7IGF1ZGlvTGV2ZWwgfSA9IGF1ZGlvTWVkaWFTb3VyY2VTdGF0cztcbiAgICAgICAgaWYgKGF1ZGlvTGV2ZWwpIHtcbiAgICAgICAgICBpZiAoYXVkaW9MZXZlbCA+PSBBVURJT19MRVZFTF9USFJFU0hPTEQpIHtcbiAgICAgICAgICAgIG9uU291bmREZXRlY3RlZFN0YXRlQ2hhbmdlZCh7XG4gICAgICAgICAgICAgIGlzU291bmREZXRlY3RlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgYXVkaW9MZXZlbCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBvblNvdW5kRGV0ZWN0ZWRTdGF0ZUNoYW5nZWQoe1xuICAgICAgICAgICAgICBpc1NvdW5kRGV0ZWN0ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICBhdWRpb0xldmVsOiAwLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwgMTAwMCk7XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsSWQpO1xuICAgIH07XG4gIH1cbn1cbiIsImltcG9ydCB7IGNvbWJpbmVMYXRlc3QsIE9ic2VydmFibGUgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IENhbGwgfSBmcm9tICcuLi9DYWxsJztcbmltcG9ydCB7IElucHV0TWVkaWFEZXZpY2VNYW5hZ2VyIH0gZnJvbSAnLi9JbnB1dE1lZGlhRGV2aWNlTWFuYWdlcic7XG5pbXBvcnQgeyBNaWNyb3Bob25lTWFuYWdlclN0YXRlIH0gZnJvbSAnLi9NaWNyb3Bob25lTWFuYWdlclN0YXRlJztcbmltcG9ydCB7IGdldEF1ZGlvRGV2aWNlcywgZ2V0QXVkaW9TdHJlYW0gfSBmcm9tICcuL2RldmljZXMnO1xuaW1wb3J0IHsgVHJhY2tUeXBlIH0gZnJvbSAnLi4vZ2VuL3ZpZGVvL3NmdS9tb2RlbHMvbW9kZWxzJztcbmltcG9ydCB7IGNyZWF0ZVNvdW5kRGV0ZWN0b3IgfSBmcm9tICcuLi9oZWxwZXJzL3NvdW5kLWRldGVjdG9yJztcbmltcG9ydCB7IGlzUmVhY3ROYXRpdmUgfSBmcm9tICcuLi9oZWxwZXJzL3BsYXRmb3Jtcyc7XG5pbXBvcnQgeyBPd25DYXBhYmlsaXR5IH0gZnJvbSAnLi4vZ2VuL2Nvb3JkaW5hdG9yJztcbmltcG9ydCB7IENhbGxpbmdTdGF0ZSB9IGZyb20gJy4uL3N0b3JlJztcbmltcG9ydCB7IFJOU3BlZWNoRGV0ZWN0b3IgfSBmcm9tICcuLi9oZWxwZXJzL1JOU3BlZWNoRGV0ZWN0b3InO1xuXG5leHBvcnQgY2xhc3MgTWljcm9waG9uZU1hbmFnZXIgZXh0ZW5kcyBJbnB1dE1lZGlhRGV2aWNlTWFuYWdlcjxNaWNyb3Bob25lTWFuYWdlclN0YXRlPiB7XG4gIHByaXZhdGUgc291bmREZXRlY3RvckNsZWFudXA/OiBGdW5jdGlvbjtcbiAgcHJpdmF0ZSByblNwZWVjaERldGVjdG9yOiBSTlNwZWVjaERldGVjdG9yIHwgdW5kZWZpbmVkO1xuXG4gIGNvbnN0cnVjdG9yKGNhbGw6IENhbGwpIHtcbiAgICBzdXBlcihjYWxsLCBuZXcgTWljcm9waG9uZU1hbmFnZXJTdGF0ZSgpLCBUcmFja1R5cGUuQVVESU8pO1xuXG4gICAgY29tYmluZUxhdGVzdChbXG4gICAgICB0aGlzLmNhbGwuc3RhdGUuY2FsbGluZ1N0YXRlJCxcbiAgICAgIHRoaXMuY2FsbC5zdGF0ZS5vd25DYXBhYmlsaXRpZXMkLFxuICAgICAgdGhpcy5zdGF0ZS5zZWxlY3RlZERldmljZSQsXG4gICAgICB0aGlzLnN0YXRlLnN0YXR1cyQsXG4gICAgXSkuc3Vic2NyaWJlKGFzeW5jIChbY2FsbGluZ1N0YXRlLCBvd25DYXBhYmlsaXRpZXMsIGRldmljZUlkLCBzdGF0dXNdKSA9PiB7XG4gICAgICBpZiAoY2FsbGluZ1N0YXRlICE9PSBDYWxsaW5nU3RhdGUuSk9JTkVEKSB7XG4gICAgICAgIGlmIChjYWxsaW5nU3RhdGUgPT09IENhbGxpbmdTdGF0ZS5MRUZUKSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5zdG9wU3BlYWtpbmdXaGlsZU11dGVkRGV0ZWN0aW9uKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKG93bkNhcGFiaWxpdGllcy5pbmNsdWRlcyhPd25DYXBhYmlsaXR5LlNFTkRfQVVESU8pKSB7XG4gICAgICAgIGlmIChzdGF0dXMgPT09ICdkaXNhYmxlZCcpIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLnN0YXJ0U3BlYWtpbmdXaGlsZU11dGVkRGV0ZWN0aW9uKGRldmljZUlkKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLnN0b3BTcGVha2luZ1doaWxlTXV0ZWREZXRlY3Rpb24oKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXdhaXQgdGhpcy5zdG9wU3BlYWtpbmdXaGlsZU11dGVkRGV0ZWN0aW9uKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwcm90ZWN0ZWQgZ2V0RGV2aWNlcygpOiBPYnNlcnZhYmxlPE1lZGlhRGV2aWNlSW5mb1tdPiB7XG4gICAgcmV0dXJuIGdldEF1ZGlvRGV2aWNlcygpO1xuICB9XG5cbiAgcHJvdGVjdGVkIGdldFN0cmVhbShcbiAgICBjb25zdHJhaW50czogTWVkaWFUcmFja0NvbnN0cmFpbnRzLFxuICApOiBQcm9taXNlPE1lZGlhU3RyZWFtPiB7XG4gICAgcmV0dXJuIGdldEF1ZGlvU3RyZWFtKGNvbnN0cmFpbnRzKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBwdWJsaXNoU3RyZWFtKHN0cmVhbTogTWVkaWFTdHJlYW0pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICByZXR1cm4gdGhpcy5jYWxsLnB1Ymxpc2hBdWRpb1N0cmVhbShzdHJlYW0pO1xuICB9XG5cbiAgcHJvdGVjdGVkIHN0b3BQdWJsaXNoU3RyZWFtKHN0b3BUcmFja3M6IGJvb2xlYW4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICByZXR1cm4gdGhpcy5jYWxsLnN0b3BQdWJsaXNoKFRyYWNrVHlwZS5BVURJTywgc3RvcFRyYWNrcyk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHN0YXJ0U3BlYWtpbmdXaGlsZU11dGVkRGV0ZWN0aW9uKGRldmljZUlkPzogc3RyaW5nKSB7XG4gICAgYXdhaXQgdGhpcy5zdG9wU3BlYWtpbmdXaGlsZU11dGVkRGV0ZWN0aW9uKCk7XG4gICAgaWYgKGlzUmVhY3ROYXRpdmUoKSkge1xuICAgICAgdGhpcy5yblNwZWVjaERldGVjdG9yID0gbmV3IFJOU3BlZWNoRGV0ZWN0b3IoKTtcbiAgICAgIGF3YWl0IHRoaXMucm5TcGVlY2hEZXRlY3Rvci5zdGFydCgpO1xuICAgICAgY29uc3QgdW5zdWJzY3JpYmUgPSB0aGlzLnJuU3BlZWNoRGV0ZWN0b3I/Lm9uU3BlYWtpbmdEZXRlY3RlZFN0YXRlQ2hhbmdlKFxuICAgICAgICAoZXZlbnQpID0+IHtcbiAgICAgICAgICB0aGlzLnN0YXRlLnNldFNwZWFraW5nV2hpbGVNdXRlZChldmVudC5pc1NvdW5kRGV0ZWN0ZWQpO1xuICAgICAgICB9LFxuICAgICAgKTtcbiAgICAgIHRoaXMuc291bmREZXRlY3RvckNsZWFudXAgPSAoKSA9PiB7XG4gICAgICAgIHVuc3Vic2NyaWJlKCk7XG4gICAgICAgIHRoaXMucm5TcGVlY2hEZXRlY3Rvcj8uc3RvcCgpO1xuICAgICAgICB0aGlzLnJuU3BlZWNoRGV0ZWN0b3IgPSB1bmRlZmluZWQ7XG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBOZWVkIHRvIHN0YXJ0IGEgbmV3IHN0cmVhbSB0aGF0J3Mgbm90IGNvbm5lY3RlZCB0byBwdWJsaXNoZXJcbiAgICAgIGNvbnN0IHN0cmVhbSA9IGF3YWl0IHRoaXMuZ2V0U3RyZWFtKHtcbiAgICAgICAgZGV2aWNlSWQsXG4gICAgICB9KTtcbiAgICAgIHRoaXMuc291bmREZXRlY3RvckNsZWFudXAgPSBjcmVhdGVTb3VuZERldGVjdG9yKHN0cmVhbSwgKGV2ZW50KSA9PiB7XG4gICAgICAgIHRoaXMuc3RhdGUuc2V0U3BlYWtpbmdXaGlsZU11dGVkKGV2ZW50LmlzU291bmREZXRlY3RlZCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHN0b3BTcGVha2luZ1doaWxlTXV0ZWREZXRlY3Rpb24oKSB7XG4gICAgaWYgKCF0aGlzLnNvdW5kRGV0ZWN0b3JDbGVhbnVwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuc3RhdGUuc2V0U3BlYWtpbmdXaGlsZU11dGVkKGZhbHNlKTtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgdGhpcy5zb3VuZERldGVjdG9yQ2xlYW51cCgpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICB0aGlzLnNvdW5kRGV0ZWN0b3JDbGVhbnVwID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHsgQmVoYXZpb3JTdWJqZWN0LCBkaXN0aW5jdFVudGlsQ2hhbmdlZCB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgSW5wdXRNZWRpYURldmljZU1hbmFnZXJTdGF0ZSB9IGZyb20gJy4vSW5wdXRNZWRpYURldmljZU1hbmFnZXJTdGF0ZSc7XG5pbXBvcnQgeyBTY3JlZW5TaGFyZVNldHRpbmdzIH0gZnJvbSAnLi4vdHlwZXMnO1xuXG5leHBvcnQgY2xhc3MgU2NyZWVuU2hhcmVTdGF0ZSBleHRlbmRzIElucHV0TWVkaWFEZXZpY2VNYW5hZ2VyU3RhdGU8RGlzcGxheU1lZGlhU3RyZWFtT3B0aW9ucz4ge1xuICBwcml2YXRlIGF1ZGlvRW5hYmxlZFN1YmplY3QgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PGJvb2xlYW4+KHRydWUpO1xuICBwcml2YXRlIHNldHRpbmdzU3ViamVjdCA9IG5ldyBCZWhhdmlvclN1YmplY3Q8XG4gICAgU2NyZWVuU2hhcmVTZXR0aW5ncyB8IHVuZGVmaW5lZFxuICA+KHVuZGVmaW5lZCk7XG5cbiAgLyoqXG4gICAqIEFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyB0aGUgY3VycmVudCBzY3JlZW4gc2hhcmUgYXVkaW8gc3RhdHVzLlxuICAgKi9cbiAgYXVkaW9FbmFibGVkJCA9IHRoaXMuYXVkaW9FbmFibGVkU3ViamVjdFxuICAgIC5hc09ic2VydmFibGUoKVxuICAgIC5waXBlKGRpc3RpbmN0VW50aWxDaGFuZ2VkKCkpO1xuXG4gIC8qKlxuICAgKiBBbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgdGhlIGN1cnJlbnQgc2NyZWVuIHNoYXJlIHNldHRpbmdzLlxuICAgKi9cbiAgc2V0dGluZ3MkID0gdGhpcy5zZXR0aW5nc1N1YmplY3QuYXNPYnNlcnZhYmxlKCk7XG5cbiAgLyoqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgcHJvdGVjdGVkIGdldERldmljZUlkRnJvbVN0cmVhbSA9IChcbiAgICBzdHJlYW06IE1lZGlhU3RyZWFtLFxuICApOiBzdHJpbmcgfCB1bmRlZmluZWQgPT4ge1xuICAgIGNvbnN0IFt0cmFja10gPSBzdHJlYW0uZ2V0VHJhY2tzKCk7XG4gICAgcmV0dXJuIHRyYWNrPy5nZXRTZXR0aW5ncygpLmRldmljZUlkO1xuICB9O1xuXG4gIC8qKlxuICAgKiBUaGUgY3VycmVudCBzY3JlZW4gc2hhcmUgYXVkaW8gc3RhdHVzLlxuICAgKi9cbiAgZ2V0IGF1ZGlvRW5hYmxlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRDdXJyZW50VmFsdWUodGhpcy5hdWRpb0VuYWJsZWQkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGN1cnJlbnQgc2NyZWVuIHNoYXJlIGF1ZGlvIHN0YXR1cy5cbiAgICovXG4gIHNldEF1ZGlvRW5hYmxlZChpc0VuYWJsZWQ6IGJvb2xlYW4pIHtcbiAgICB0aGlzLnNldEN1cnJlbnRWYWx1ZSh0aGlzLmF1ZGlvRW5hYmxlZFN1YmplY3QsIGlzRW5hYmxlZCk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIGN1cnJlbnQgc2NyZWVuIHNoYXJlIHNldHRpbmdzLlxuICAgKi9cbiAgZ2V0IHNldHRpbmdzKCkge1xuICAgIHJldHVybiB0aGlzLmdldEN1cnJlbnRWYWx1ZSh0aGlzLnNldHRpbmdzJCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBjdXJyZW50IHNjcmVlbiBzaGFyZSBzZXR0aW5ncy5cbiAgICpcbiAgICogQHBhcmFtIHNldHRpbmdzIHRoZSBzY3JlZW4gc2hhcmUgc2V0dGluZ3MgdG8gc2V0LlxuICAgKi9cbiAgc2V0U2V0dGluZ3Moc2V0dGluZ3M6IFNjcmVlblNoYXJlU2V0dGluZ3MgfCB1bmRlZmluZWQpIHtcbiAgICB0aGlzLnNldEN1cnJlbnRWYWx1ZSh0aGlzLnNldHRpbmdzU3ViamVjdCwgc2V0dGluZ3MpO1xuICB9XG59XG4iLCJpbXBvcnQgeyBPYnNlcnZhYmxlLCBvZiB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgSW5wdXRNZWRpYURldmljZU1hbmFnZXIgfSBmcm9tICcuL0lucHV0TWVkaWFEZXZpY2VNYW5hZ2VyJztcbmltcG9ydCB7IFNjcmVlblNoYXJlU3RhdGUgfSBmcm9tICcuL1NjcmVlblNoYXJlU3RhdGUnO1xuaW1wb3J0IHsgQ2FsbCB9IGZyb20gJy4uL0NhbGwnO1xuaW1wb3J0IHsgVHJhY2tUeXBlIH0gZnJvbSAnLi4vZ2VuL3ZpZGVvL3NmdS9tb2RlbHMvbW9kZWxzJztcbmltcG9ydCB7IGdldFNjcmVlblNoYXJlU3RyZWFtIH0gZnJvbSAnLi9kZXZpY2VzJztcbmltcG9ydCB7IFNjcmVlblNoYXJlU2V0dGluZ3MgfSBmcm9tICcuLi90eXBlcyc7XG5cbmV4cG9ydCBjbGFzcyBTY3JlZW5TaGFyZU1hbmFnZXIgZXh0ZW5kcyBJbnB1dE1lZGlhRGV2aWNlTWFuYWdlcjxcbiAgU2NyZWVuU2hhcmVTdGF0ZSxcbiAgRGlzcGxheU1lZGlhU3RyZWFtT3B0aW9uc1xuPiB7XG4gIGNvbnN0cnVjdG9yKGNhbGw6IENhbGwpIHtcbiAgICBzdXBlcihjYWxsLCBuZXcgU2NyZWVuU2hhcmVTdGF0ZSgpLCBUcmFja1R5cGUuU0NSRUVOX1NIQVJFKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBXaWxsIGVuYWJsZSBzY3JlZW4gc2hhcmUgYXVkaW8gb3B0aW9ucyBvbiBzdXBwb3J0ZWQgcGxhdGZvcm1zLlxuICAgKlxuICAgKiBOb3RlOiBmb3Igb25nb2luZyBzY3JlZW4gc2hhcmUsIGF1ZGlvIHdvbid0IGJlIGVuYWJsZWQgdW50aWwgeW91XG4gICAqIHJlLXB1Ymxpc2ggdGhlIHNjcmVlbiBzaGFyZSBzdHJlYW0uXG4gICAqL1xuICBlbmFibGVTY3JlZW5TaGFyZUF1ZGlvKCk6IHZvaWQge1xuICAgIHRoaXMuc3RhdGUuc2V0QXVkaW9FbmFibGVkKHRydWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFdpbGwgZGlzYWJsZSBzY3JlZW4gc2hhcmUgYXVkaW8gb3B0aW9ucyBvbiBzdXBwb3J0ZWQgcGxhdGZvcm1zLlxuICAgKi9cbiAgYXN5bmMgZGlzYWJsZVNjcmVlblNoYXJlQXVkaW8oKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdGhpcy5zdGF0ZS5zZXRBdWRpb0VuYWJsZWQoZmFsc2UpO1xuICAgIGlmICh0aGlzLmNhbGwucHVibGlzaGVyPy5pc1B1Ymxpc2hpbmcoVHJhY2tUeXBlLlNDUkVFTl9TSEFSRV9BVURJTykpIHtcbiAgICAgIGF3YWl0IHRoaXMuY2FsbC5zdG9wUHVibGlzaChUcmFja1R5cGUuU0NSRUVOX1NIQVJFX0FVRElPLCB0cnVlKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgY3VycmVudCBzY3JlZW4gc2hhcmUgc2V0dGluZ3MuXG4gICAqL1xuICBnZXRTZXR0aW5ncygpOiBTY3JlZW5TaGFyZVNldHRpbmdzIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZS5zZXR0aW5ncztcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBjdXJyZW50IHNjcmVlbiBzaGFyZSBzZXR0aW5ncy5cbiAgICpcbiAgICogQHBhcmFtIHNldHRpbmdzIHRoZSBzZXR0aW5ncyB0byBzZXQuXG4gICAqL1xuICBzZXRTZXR0aW5ncyhzZXR0aW5nczogU2NyZWVuU2hhcmVTZXR0aW5ncyB8IHVuZGVmaW5lZCk6IHZvaWQge1xuICAgIHRoaXMuc3RhdGUuc2V0U2V0dGluZ3Moc2V0dGluZ3MpO1xuICB9XG5cbiAgcHJvdGVjdGVkIGdldERldmljZXMoKTogT2JzZXJ2YWJsZTxNZWRpYURldmljZUluZm9bXT4ge1xuICAgIHJldHVybiBvZihbXSk7IC8vIHRoZXJlIGFyZSBubyBkZXZpY2VzIHRvIGJlIGxpc3RlZCBmb3IgU2NyZWVuIFNoYXJlXG4gIH1cblxuICBwcm90ZWN0ZWQgZ2V0U3RyZWFtKFxuICAgIGNvbnN0cmFpbnRzOiBEaXNwbGF5TWVkaWFTdHJlYW1PcHRpb25zLFxuICApOiBQcm9taXNlPE1lZGlhU3RyZWFtPiB7XG4gICAgaWYgKCF0aGlzLnN0YXRlLmF1ZGlvRW5hYmxlZCkge1xuICAgICAgY29uc3RyYWludHMuYXVkaW8gPSBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIGdldFNjcmVlblNoYXJlU3RyZWFtKGNvbnN0cmFpbnRzKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBwdWJsaXNoU3RyZWFtKHN0cmVhbTogTWVkaWFTdHJlYW0pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICByZXR1cm4gdGhpcy5jYWxsLnB1Ymxpc2hTY3JlZW5TaGFyZVN0cmVhbShzdHJlYW0sIHtcbiAgICAgIHNjcmVlblNoYXJlU2V0dGluZ3M6IHRoaXMuc3RhdGUuc2V0dGluZ3MsXG4gICAgfSk7XG4gIH1cblxuICBwcm90ZWN0ZWQgYXN5bmMgc3RvcFB1Ymxpc2hTdHJlYW0oc3RvcFRyYWNrczogYm9vbGVhbik6IFByb21pc2U8dm9pZD4ge1xuICAgIGF3YWl0IHRoaXMuY2FsbC5zdG9wUHVibGlzaChUcmFja1R5cGUuU0NSRUVOX1NIQVJFLCBzdG9wVHJhY2tzKTtcbiAgICBhd2FpdCB0aGlzLmNhbGwuc3RvcFB1Ymxpc2goVHJhY2tUeXBlLlNDUkVFTl9TSEFSRV9BVURJTywgc3RvcFRyYWNrcyk7XG4gIH1cblxuICAvKipcbiAgICogT3ZlcnJpZGVzIHRoZSBkZWZhdWx0IGBzZWxlY3RgIG1ldGhvZCB0byB0aHJvdyBhbiBlcnJvci5cbiAgICpcbiAgICogQHBhcmFtIGRldmljZUlkIGlnbm9yZWQuXG4gICAqL1xuICBhc3luYyBzZWxlY3QoZGV2aWNlSWQ6IHN0cmluZyB8IHVuZGVmaW5lZCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRocm93IG5ldyBFcnJvcignVGhpcyBtZXRob2QgaXMgbm90IHN1cHBvcnRlZCBpbiBmb3IgU2NyZWVuIFNoYXJlJyk7XG4gIH1cbn1cbiIsImltcG9ydCB7IEJlaGF2aW9yU3ViamVjdCwgT2JzZXJ2YWJsZSwgZGlzdGluY3RVbnRpbENoYW5nZWQgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IFJ4VXRpbHMgfSBmcm9tICcuLi9zdG9yZSc7XG5pbXBvcnQgeyBjaGVja0lmQXVkaW9PdXRwdXRDaGFuZ2VTdXBwb3J0ZWQgfSBmcm9tICcuL2RldmljZXMnO1xuXG5leHBvcnQgY2xhc3MgU3BlYWtlclN0YXRlIHtcbiAgcHJvdGVjdGVkIHNlbGVjdGVkRGV2aWNlU3ViamVjdCA9IG5ldyBCZWhhdmlvclN1YmplY3Q8c3RyaW5nPignJyk7XG4gIHByb3RlY3RlZCB2b2x1bWVTdWJqZWN0ID0gbmV3IEJlaGF2aW9yU3ViamVjdDxudW1iZXI+KDEpO1xuICAvKipcbiAgICogW1RlbGxzIGlmIHRoZSBicm93c2VyIHN1cHBvcnRzIGF1ZGlvIG91dHB1dCBjaGFuZ2Ugb24gJ2F1ZGlvJyBlbGVtZW50c10oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0hUTUxNZWRpYUVsZW1lbnQvc2V0U2lua0lkKS5cbiAgICovXG4gIHJlYWRvbmx5IGlzRGV2aWNlU2VsZWN0aW9uU3VwcG9ydGVkID0gY2hlY2tJZkF1ZGlvT3V0cHV0Q2hhbmdlU3VwcG9ydGVkKCk7XG5cbiAgLyoqXG4gICAqIEFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyB0aGUgY3VycmVudGx5IHNlbGVjdGVkIGRldmljZVxuICAgKlxuICAgKiBOb3RlOiB0aGlzIGZlYXR1cmUgaXMgbm90IHN1cHBvcnRlZCBpbiBSZWFjdCBOYXRpdmVcbiAgICovXG4gIHNlbGVjdGVkRGV2aWNlJDogT2JzZXJ2YWJsZTxzdHJpbmc+O1xuXG4gIC8qKlxuICAgKiBBbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgdGhlIGN1cnJlbnRseSBzZWxlY3RlZCB2b2x1bWVcbiAgICpcbiAgICogTm90ZTogdGhpcyBmZWF0dXJlIGlzIG5vdCBzdXBwb3J0ZWQgaW4gUmVhY3QgTmF0aXZlXG4gICAqL1xuICB2b2x1bWUkOiBPYnNlcnZhYmxlPG51bWJlcj47XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5zZWxlY3RlZERldmljZSQgPSB0aGlzLnNlbGVjdGVkRGV2aWNlU3ViamVjdFxuICAgICAgLmFzT2JzZXJ2YWJsZSgpXG4gICAgICAucGlwZShkaXN0aW5jdFVudGlsQ2hhbmdlZCgpKTtcbiAgICB0aGlzLnZvbHVtZSQgPSB0aGlzLnZvbHVtZVN1YmplY3RcbiAgICAgIC5hc09ic2VydmFibGUoKVxuICAgICAgLnBpcGUoZGlzdGluY3RVbnRpbENoYW5nZWQoKSk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIGN1cnJlbnRseSBzZWxlY3RlZCBkZXZpY2VcbiAgICpcbiAgICogTm90ZTogdGhpcyBmZWF0dXJlIGlzIG5vdCBzdXBwb3J0ZWQgaW4gUmVhY3QgTmF0aXZlXG4gICAqL1xuICBnZXQgc2VsZWN0ZWREZXZpY2UoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q3VycmVudFZhbHVlKHRoaXMuc2VsZWN0ZWREZXZpY2UkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgY3VycmVudGx5IHNlbGVjdGVkIHZvbHVtZVxuICAgKlxuICAgKiBOb3RlOiB0aGlzIGZlYXR1cmUgaXMgbm90IHN1cHBvcnRlZCBpbiBSZWFjdCBOYXRpdmVcbiAgICovXG4gIGdldCB2b2x1bWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q3VycmVudFZhbHVlKHRoaXMudm9sdW1lJCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgY3VycmVudCB2YWx1ZSBvZiBhbiBvYnNlcnZhYmxlLCBvciB1bmRlZmluZWQgaWYgdGhlIG9ic2VydmFibGUgaGFzXG4gICAqIG5vdCBlbWl0dGVkIGEgdmFsdWUgeWV0LlxuICAgKlxuICAgKiBAcGFyYW0gb2JzZXJ2YWJsZSQgdGhlIG9ic2VydmFibGUgdG8gZ2V0IHRoZSB2YWx1ZSBmcm9tLlxuICAgKi9cbiAgZ2V0Q3VycmVudFZhbHVlID0gUnhVdGlscy5nZXRDdXJyZW50VmFsdWU7XG5cbiAgLyoqXG4gICAqIEBpbnRlcm5hbFxuICAgKiBAcGFyYW0gZGV2aWNlSWRcbiAgICovXG4gIHNldERldmljZShkZXZpY2VJZDogc3RyaW5nKSB7XG4gICAgdGhpcy5zZXRDdXJyZW50VmFsdWUodGhpcy5zZWxlY3RlZERldmljZVN1YmplY3QsIGRldmljZUlkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAaW50ZXJuYWxcbiAgICogQHBhcmFtIHZvbHVtZVxuICAgKi9cbiAgc2V0Vm9sdW1lKHZvbHVtZTogbnVtYmVyKSB7XG4gICAgdGhpcy5zZXRDdXJyZW50VmFsdWUodGhpcy52b2x1bWVTdWJqZWN0LCB2b2x1bWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhlIHZhbHVlIG9mIHRoZSBwcm92aWRlZCBTdWJqZWN0LlxuICAgKiBBbiBgdXBkYXRlYCBjYW4gZWl0aGVyIGJlIGEgbmV3IHZhbHVlIG9yIGEgZnVuY3Rpb24gd2hpY2ggdGFrZXNcbiAgICogdGhlIGN1cnJlbnQgdmFsdWUgYW5kIHJldHVybnMgYSBuZXcgdmFsdWUuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKlxuICAgKiBAcGFyYW0gc3ViamVjdCB0aGUgc3ViamVjdCB0byB1cGRhdGUuXG4gICAqIEBwYXJhbSB1cGRhdGUgdGhlIHVwZGF0ZSB0byBhcHBseSB0byB0aGUgc3ViamVjdC5cbiAgICogQHJldHVybiB0aGUgdXBkYXRlZCB2YWx1ZS5cbiAgICovXG4gIHByb3RlY3RlZCBzZXRDdXJyZW50VmFsdWUgPSBSeFV0aWxzLnNldEN1cnJlbnRWYWx1ZTtcbn1cbiIsImltcG9ydCB7IFN1YnNjcmlwdGlvbiwgY29tYmluZUxhdGVzdCB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgaXNSZWFjdE5hdGl2ZSB9IGZyb20gJy4uL2hlbHBlcnMvcGxhdGZvcm1zJztcbmltcG9ydCB7IFNwZWFrZXJTdGF0ZSB9IGZyb20gJy4vU3BlYWtlclN0YXRlJztcbmltcG9ydCB7IGRldmljZUlkcyQsIGdldEF1ZGlvT3V0cHV0RGV2aWNlcyB9IGZyb20gJy4vZGV2aWNlcyc7XG5cbmV4cG9ydCBjbGFzcyBTcGVha2VyTWFuYWdlciB7XG4gIHB1YmxpYyByZWFkb25seSBzdGF0ZSA9IG5ldyBTcGVha2VyU3RhdGUoKTtcbiAgcHJpdmF0ZSBzdWJzY3JpcHRpb25zOiBTdWJzY3JpcHRpb25bXSA9IFtdO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIGlmIChkZXZpY2VJZHMkICYmICFpc1JlYWN0TmF0aXZlKCkpIHtcbiAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5wdXNoKFxuICAgICAgICBjb21iaW5lTGF0ZXN0KFtkZXZpY2VJZHMkISwgdGhpcy5zdGF0ZS5zZWxlY3RlZERldmljZSRdKS5zdWJzY3JpYmUoXG4gICAgICAgICAgKFtkZXZpY2VzLCBkZXZpY2VJZF0pID0+IHtcbiAgICAgICAgICAgIGlmICghZGV2aWNlSWQpIHtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZGV2aWNlID0gZGV2aWNlcy5maW5kKFxuICAgICAgICAgICAgICAoZCkgPT4gZC5kZXZpY2VJZCA9PT0gZGV2aWNlSWQgJiYgZC5raW5kID09PSAnYXVkaW9vdXRwdXQnLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGlmICghZGV2aWNlKSB7XG4gICAgICAgICAgICAgIHRoaXMuc2VsZWN0KCcnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICApLFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTGlzdHMgdGhlIGF2YWlsYWJsZSBhdWRpbyBvdXRwdXQgZGV2aWNlc1xuICAgKlxuICAgKiBOb3RlOiBJdCBwcm9tcHRzIHRoZSB1c2VyIGZvciBhIHBlcm1pc3Npb24gdG8gdXNlIGRldmljZXMgKGlmIG5vdCBhbHJlYWR5IGdyYW50ZWQpXG4gICAqXG4gICAqIEByZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCB3aWxsIGJlIHVwZGF0ZWQgaWYgYSBkZXZpY2UgaXMgY29ubmVjdGVkIG9yIGRpc2Nvbm5lY3RlZFxuICAgKi9cbiAgbGlzdERldmljZXMoKSB7XG4gICAgcmV0dXJuIGdldEF1ZGlvT3V0cHV0RGV2aWNlcygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNlbGVjdCBkZXZpY2VcbiAgICpcbiAgICogTm90ZTogdGhpcyBtZXRob2QgaXMgbm90IHN1cHBvcnRlZCBpbiBSZWFjdCBOYXRpdmVcbiAgICpcbiAgICogQHBhcmFtIGRldmljZUlkIGVtcHR5IHN0cmluZyBtZWFucyB0aGUgc3lzdGVtIGRlZmF1bHRcbiAgICovXG4gIHNlbGVjdChkZXZpY2VJZDogc3RyaW5nKSB7XG4gICAgaWYgKGlzUmVhY3ROYXRpdmUoKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGlzIGZlYXR1cmUgaXMgbm90IHN1cHBvcnRlZCBpbiBSZWFjdCBOYXRpdmUnKTtcbiAgICB9XG4gICAgdGhpcy5zdGF0ZS5zZXREZXZpY2UoZGV2aWNlSWQpO1xuICB9XG5cbiAgcmVtb3ZlU3Vic2NyaXB0aW9ucyA9ICgpID0+IHtcbiAgICB0aGlzLnN1YnNjcmlwdGlvbnMuZm9yRWFjaCgocykgPT4gcy51bnN1YnNjcmliZSgpKTtcbiAgfTtcblxuICAvKipcbiAgICogU2V0IHRoZSB2b2x1bWUgb2YgdGhlIGF1ZGlvIGVsZW1lbnRzXG4gICAqIEBwYXJhbSB2b2x1bWUgYSBudW1iZXIgYmV0d2VlbiAwIGFuZCAxXG4gICAqXG4gICAqIE5vdGU6IHRoaXMgbWV0aG9kIGlzIG5vdCBzdXBwb3J0ZWQgaW4gUmVhY3QgTmF0aXZlXG4gICAqL1xuICBzZXRWb2x1bWUodm9sdW1lOiBudW1iZXIpIHtcbiAgICBpZiAoaXNSZWFjdE5hdGl2ZSgpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoaXMgZmVhdHVyZSBpcyBub3Qgc3VwcG9ydGVkIGluIFJlYWN0IE5hdGl2ZScpO1xuICAgIH1cbiAgICBpZiAodm9sdW1lICYmICh2b2x1bWUgPCAwIHx8IHZvbHVtZSA+IDEpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1ZvbHVtZSBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMScpO1xuICAgIH1cbiAgICB0aGlzLnN0YXRlLnNldFZvbHVtZSh2b2x1bWUpO1xuICB9XG59XG4iLCJpbXBvcnQgeyBTdHJlYW1TZnVDbGllbnQgfSBmcm9tICcuL1N0cmVhbVNmdUNsaWVudCc7XG5pbXBvcnQge1xuICBEaXNwYXRjaGVyLFxuICBnZXRHZW5lcmljU2RwLFxuICBpc1NmdUV2ZW50LFxuICBQdWJsaXNoZXIsXG4gIFN1YnNjcmliZXIsXG59IGZyb20gJy4vcnRjJztcbmltcG9ydCB7IG11dGVUeXBlVG9UcmFja1R5cGUgfSBmcm9tICcuL3J0Yy9oZWxwZXJzL3RyYWNrcyc7XG5pbXBvcnQgeyBHb0F3YXlSZWFzb24sIFRyYWNrVHlwZSB9IGZyb20gJy4vZ2VuL3ZpZGVvL3NmdS9tb2RlbHMvbW9kZWxzJztcbmltcG9ydCB7XG4gIHJlZ2lzdGVyRXZlbnRIYW5kbGVycyxcbiAgcmVnaXN0ZXJSaW5naW5nQ2FsbEV2ZW50SGFuZGxlcnMsXG59IGZyb20gJy4vZXZlbnRzL2NhbGxFdmVudEhhbmRsZXJzJztcbmltcG9ydCB7XG4gIENhbGxpbmdTdGF0ZSxcbiAgQ2FsbFN0YXRlLFxuICBTdHJlYW1WaWRlb1dyaXRlYWJsZVN0YXRlU3RvcmUsXG59IGZyb20gJy4vc3RvcmUnO1xuaW1wb3J0IHsgY3JlYXRlU3Vic2NyaXB0aW9uLCBnZXRDdXJyZW50VmFsdWUgfSBmcm9tICcuL3N0b3JlL3J4VXRpbHMnO1xuaW1wb3J0IHtcbiAgQWNjZXB0Q2FsbFJlc3BvbnNlLFxuICBCbG9ja1VzZXJSZXF1ZXN0LFxuICBCbG9ja1VzZXJSZXNwb25zZSxcbiAgRW5kQ2FsbFJlc3BvbnNlLFxuICBHZXRDYWxsUmVzcG9uc2UsXG4gIEdldE9yQ3JlYXRlQ2FsbFJlcXVlc3QsXG4gIEdldE9yQ3JlYXRlQ2FsbFJlc3BvbnNlLFxuICBHb0xpdmVSZXF1ZXN0LFxuICBHb0xpdmVSZXNwb25zZSxcbiAgTGlzdFJlY29yZGluZ3NSZXNwb25zZSxcbiAgTXV0ZVVzZXJzUmVxdWVzdCxcbiAgTXV0ZVVzZXJzUmVzcG9uc2UsXG4gIE93bkNhcGFiaWxpdHksXG4gIFBpblJlcXVlc3QsXG4gIFBpblJlc3BvbnNlLFxuICBRdWVyeU1lbWJlcnNSZXF1ZXN0LFxuICBRdWVyeU1lbWJlcnNSZXNwb25zZSxcbiAgUmVqZWN0Q2FsbFJlc3BvbnNlLFxuICBSZXF1ZXN0UGVybWlzc2lvblJlcXVlc3QsXG4gIFJlcXVlc3RQZXJtaXNzaW9uUmVzcG9uc2UsXG4gIFNlbmRFdmVudFJlcXVlc3QsXG4gIFNlbmRFdmVudFJlc3BvbnNlLFxuICBTZW5kUmVhY3Rpb25SZXF1ZXN0LFxuICBTZW5kUmVhY3Rpb25SZXNwb25zZSxcbiAgU0ZVUmVzcG9uc2UsXG4gIFN0YXJ0SExTQnJvYWRjYXN0aW5nUmVzcG9uc2UsXG4gIFN0YXJ0UmVjb3JkaW5nUmVxdWVzdCxcbiAgU3RhcnRSZWNvcmRpbmdSZXNwb25zZSxcbiAgU3RvcEhMU0Jyb2FkY2FzdGluZ1Jlc3BvbnNlLFxuICBTdG9wTGl2ZVJlc3BvbnNlLFxuICBTdG9wUmVjb3JkaW5nUmVzcG9uc2UsXG4gIFVuYmxvY2tVc2VyUmVxdWVzdCxcbiAgVW5ibG9ja1VzZXJSZXNwb25zZSxcbiAgVW5waW5SZXF1ZXN0LFxuICBVbnBpblJlc3BvbnNlLFxuICBVcGRhdGVDYWxsTWVtYmVyc1JlcXVlc3QsXG4gIFVwZGF0ZUNhbGxNZW1iZXJzUmVzcG9uc2UsXG4gIFVwZGF0ZUNhbGxSZXF1ZXN0LFxuICBVcGRhdGVDYWxsUmVzcG9uc2UsXG4gIFVwZGF0ZVVzZXJQZXJtaXNzaW9uc1JlcXVlc3QsXG4gIFVwZGF0ZVVzZXJQZXJtaXNzaW9uc1Jlc3BvbnNlLFxufSBmcm9tICcuL2dlbi9jb29yZGluYXRvcic7XG5pbXBvcnQgeyBqb2luIH0gZnJvbSAnLi9ydGMvZmxvd3Mvam9pbic7XG5pbXBvcnQge1xuICBBdWRpb1RyYWNrVHlwZSxcbiAgQ2FsbENvbnN0cnVjdG9yLFxuICBDYWxsTGVhdmVPcHRpb25zLFxuICBEZWJvdW5jZVR5cGUsXG4gIEpvaW5DYWxsRGF0YSxcbiAgUHVibGlzaE9wdGlvbnMsXG4gIFN0cmVhbVZpZGVvUGFydGljaXBhbnQsXG4gIFN0cmVhbVZpZGVvUGFydGljaXBhbnRQYXRjaGVzLFxuICBTdWJzY3JpcHRpb25DaGFuZ2VzLFxuICBUcmFja011dGVUeXBlLFxuICBWaWRlb1RyYWNrVHlwZSxcbiAgVmlzaWJpbGl0eVN0YXRlLFxufSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7XG4gIEJlaGF2aW9yU3ViamVjdCxcbiAgZGVib3VuY2UsXG4gIGZpbHRlcixcbiAgbWFwLFxuICBTdWJqZWN0LFxuICB0YWtlV2hpbGUsXG4gIHRpbWVyLFxufSBmcm9tICdyeGpzJztcbmltcG9ydCB7IFRyYWNrU3Vic2NyaXB0aW9uRGV0YWlscyB9IGZyb20gJy4vZ2VuL3ZpZGVvL3NmdS9zaWduYWxfcnBjL3NpZ25hbCc7XG5pbXBvcnQge1xuICBKb2luUmVzcG9uc2UsXG4gIE1pZ3JhdGlvbixcbiAgVmlkZW9MYXllclNldHRpbmcsXG59IGZyb20gJy4vZ2VuL3ZpZGVvL3NmdS9ldmVudC9ldmVudHMnO1xuaW1wb3J0IHsgVGltZXN0YW1wIH0gZnJvbSAnLi9nZW4vZ29vZ2xlL3Byb3RvYnVmL3RpbWVzdGFtcCc7XG5pbXBvcnQge1xuICBjcmVhdGVTdGF0c1JlcG9ydGVyLFxuICBTdGF0c1JlcG9ydGVyLFxufSBmcm9tICcuL3N0YXRzL3N0YXRlLXN0b3JlLXN0YXRzLXJlcG9ydGVyJztcbmltcG9ydCB7IER5bmFzY2FsZU1hbmFnZXIgfSBmcm9tICcuL2hlbHBlcnMvRHluYXNjYWxlTWFuYWdlcic7XG5pbXBvcnQgeyBQZXJtaXNzaW9uc0NvbnRleHQgfSBmcm9tICcuL3Blcm1pc3Npb25zJztcbmltcG9ydCB7IENhbGxUeXBlcyB9IGZyb20gJy4vQ2FsbFR5cGUnO1xuaW1wb3J0IHsgU3RyZWFtQ2xpZW50IH0gZnJvbSAnLi9jb29yZGluYXRvci9jb25uZWN0aW9uL2NsaWVudCc7XG5pbXBvcnQge1xuICBLbm93bkNvZGVzLFxuICByZXRyeUludGVydmFsLFxuICBzbGVlcCxcbn0gZnJvbSAnLi9jb29yZGluYXRvci9jb25uZWN0aW9uL3V0aWxzJztcbmltcG9ydCB7XG4gIEFsbENhbGxFdmVudHMsXG4gIENhbGxFdmVudExpc3RlbmVyLFxuICBMb2dnZXIsXG4gIFN0cmVhbUNhbGxFdmVudCxcbn0gZnJvbSAnLi9jb29yZGluYXRvci9jb25uZWN0aW9uL3R5cGVzJztcbmltcG9ydCB7IGdldENsaWVudERldGFpbHMgfSBmcm9tICcuL2NsaWVudC1kZXRhaWxzJztcbmltcG9ydCB7IGdldExvZ2dlciB9IGZyb20gJy4vbG9nZ2VyJztcbmltcG9ydCB7XG4gIENhbWVyYURpcmVjdGlvbixcbiAgQ2FtZXJhTWFuYWdlcixcbiAgTWljcm9waG9uZU1hbmFnZXIsXG4gIFNjcmVlblNoYXJlTWFuYWdlcixcbiAgU3BlYWtlck1hbmFnZXIsXG59IGZyb20gJy4vZGV2aWNlcyc7XG5cbi8qKlxuICogQW4gb2JqZWN0IHJlcHJlc2VudGF0aW9uIG9mIGEgYENhbGxgLlxuICovXG5leHBvcnQgY2xhc3MgQ2FsbCB7XG4gIC8qKlxuICAgKiBUaGUgdHlwZSBvZiB0aGUgY2FsbC5cbiAgICovXG4gIHJlYWRvbmx5IHR5cGU6IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIElEIG9mIHRoZSBjYWxsLlxuICAgKi9cbiAgcmVhZG9ubHkgaWQ6IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIGNhbGwgQ0lELlxuICAgKi9cbiAgcmVhZG9ubHkgY2lkOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSBzdGF0ZSBvZiB0aGlzIGNhbGwuXG4gICAqL1xuICByZWFkb25seSBzdGF0ZSA9IG5ldyBDYWxsU3RhdGUoKTtcblxuICAvKipcbiAgICogRmxhZyBpbmRpY2F0aW5nIHdoZXRoZXIgdGhpcyBjYWxsIGlzIFwid2F0Y2hlZFwiIGFuZCByZWNlaXZlc1xuICAgKiB1cGRhdGVzIGZyb20gdGhlIGJhY2tlbmQuXG4gICAqL1xuICB3YXRjaGluZzogYm9vbGVhbjtcblxuICAvKipcbiAgICogRGV2aWNlIG1hbmFnZXIgZm9yIHRoZSBjYW1lcmFcbiAgICovXG4gIHJlYWRvbmx5IGNhbWVyYTogQ2FtZXJhTWFuYWdlcjtcblxuICAvKipcbiAgICogRGV2aWNlIG1hbmFnZXIgZm9yIHRoZSBtaWNyb3Bob25lLlxuICAgKi9cbiAgcmVhZG9ubHkgbWljcm9waG9uZTogTWljcm9waG9uZU1hbmFnZXI7XG5cbiAgLyoqXG4gICAqIERldmljZSBtYW5hZ2VyIGZvciB0aGUgc3BlYWtlci5cbiAgICovXG4gIHJlYWRvbmx5IHNwZWFrZXI6IFNwZWFrZXJNYW5hZ2VyO1xuXG4gIC8qKlxuICAgKiBEZXZpY2UgbWFuYWdlciBmb3IgdGhlIHNjcmVlbi5cbiAgICovXG4gIHJlYWRvbmx5IHNjcmVlblNoYXJlOiBTY3JlZW5TaGFyZU1hbmFnZXI7XG5cbiAgLyoqXG4gICAqIFRoZSBEeW5hc2NhbGVNYW5hZ2VyIGluc3RhbmNlLlxuICAgKi9cbiAgcmVhZG9ubHkgZHluYXNjYWxlTWFuYWdlciA9IG5ldyBEeW5hc2NhbGVNYW5hZ2VyKHRoaXMpO1xuXG4gIHN1YnNjcmliZXI/OiBTdWJzY3JpYmVyO1xuICBwdWJsaXNoZXI/OiBQdWJsaXNoZXI7XG5cbiAgLyoqXG4gICAqIEZsYWcgdGVsbGluZyB3aGV0aGVyIHRoaXMgY2FsbCBpcyBhIFwicmluZ2luZ1wiIGNhbGwuXG4gICAqL1xuICBwcml2YXRlIHJlYWRvbmx5IHJpbmdpbmdTdWJqZWN0OiBTdWJqZWN0PGJvb2xlYW4+O1xuXG4gIC8qKlxuICAgKiBUaGUgcGVybWlzc2lvbnMgY29udGV4dCBvZiB0aGlzIGNhbGwuXG4gICAqL1xuICByZWFkb25seSBwZXJtaXNzaW9uc0NvbnRleHQgPSBuZXcgUGVybWlzc2lvbnNDb250ZXh0KCk7XG4gIHJlYWRvbmx5IGxvZ2dlcjogTG9nZ2VyO1xuXG4gIC8qKlxuICAgKiBUaGUgZXZlbnQgZGlzcGF0Y2hlciBpbnN0YW5jZSBkZWRpY2F0ZWQgdG8gdGhpcyBDYWxsIGluc3RhbmNlLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcHJpdmF0ZSByZWFkb25seSBkaXNwYXRjaGVyID0gbmV3IERpc3BhdGNoZXIoKTtcblxuICBwcml2YXRlIHRyYWNrU3Vic2NyaXB0aW9uc1N1YmplY3QgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PHtcbiAgICB0eXBlOiBEZWJvdW5jZVR5cGU7XG4gICAgZGF0YTogVHJhY2tTdWJzY3JpcHRpb25EZXRhaWxzW107XG4gIH0+KHsgdHlwZTogRGVib3VuY2VUeXBlLk1FRElVTSwgZGF0YTogW10gfSk7XG5cbiAgcHJpdmF0ZSBzdGF0c1JlcG9ydGVyPzogU3RhdHNSZXBvcnRlcjtcbiAgcHJpdmF0ZSBkcm9wVGltZW91dDogUmV0dXJuVHlwZTx0eXBlb2Ygc2V0VGltZW91dD4gfCB1bmRlZmluZWQ7XG5cbiAgcHJpdmF0ZSByZWFkb25seSBjbGllbnRTdG9yZTogU3RyZWFtVmlkZW9Xcml0ZWFibGVTdGF0ZVN0b3JlO1xuICBwdWJsaWMgcmVhZG9ubHkgc3RyZWFtQ2xpZW50OiBTdHJlYW1DbGllbnQ7XG4gIHByaXZhdGUgc2Z1Q2xpZW50PzogU3RyZWFtU2Z1Q2xpZW50O1xuICBwcml2YXRlIHJlY29ubmVjdEF0dGVtcHRzID0gMDtcbiAgcHJpdmF0ZSBtYXhSZWNvbm5lY3RBdHRlbXB0cyA9IDEwO1xuXG4gIC8qKlxuICAgKiBBIGxpc3QgaG9va3MvZnVuY3Rpb25zIHRvIGludm9rZSB3aGVuIHRoZSBjYWxsIGlzIGxlZnQuXG4gICAqIEEgdHlwaWNhbCB1c2UgY2FzZSBpcyB0byBjbGVhbiB1cCBzb21lIGdsb2JhbCBldmVudCBoYW5kbGVycy5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHByaXZhdGUgcmVhZG9ubHkgbGVhdmVDYWxsSG9va3M6IFNldDxGdW5jdGlvbj4gPSBuZXcgU2V0KCk7XG5cbiAgcHJpdmF0ZSByZWFkb25seSBzdHJlYW1DbGllbnRCYXNlUGF0aDogc3RyaW5nO1xuICBwcml2YXRlIHN0cmVhbUNsaWVudEV2ZW50SGFuZGxlcnMgPSBuZXcgTWFwPEZ1bmN0aW9uLCAoKSA9PiB2b2lkPigpO1xuXG4gIC8qKlxuICAgKiBDb25zdHJ1Y3RzIGEgbmV3IGBDYWxsYCBpbnN0YW5jZS5cbiAgICpcbiAgICogTk9URTogRG9uJ3QgY2FsbCB0aGUgY29uc3RydWN0b3IgZGlyZWN0bHksIGluc3RlYWRcbiAgICogVXNlIHRoZSBbYFN0cmVhbVZpZGVvQ2xpZW50LmNhbGxgXSguL1N0cmVhbVZpZGVvQ2xpZW50Lm1kLyNjYWxsKVxuICAgKiBtZXRob2QgdG8gY29uc3RydWN0IGEgYENhbGxgIGluc3RhbmNlLlxuICAgKi9cbiAgY29uc3RydWN0b3Ioe1xuICAgIHR5cGUsXG4gICAgaWQsXG4gICAgc3RyZWFtQ2xpZW50LFxuICAgIG1lbWJlcnMsXG4gICAgb3duQ2FwYWJpbGl0aWVzLFxuICAgIHNvcnRQYXJ0aWNpcGFudHNCeSxcbiAgICBjbGllbnRTdG9yZSxcbiAgICByaW5naW5nID0gZmFsc2UsXG4gICAgd2F0Y2hpbmcgPSBmYWxzZSxcbiAgfTogQ2FsbENvbnN0cnVjdG9yKSB7XG4gICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICB0aGlzLmlkID0gaWQ7XG4gICAgdGhpcy5jaWQgPSBgJHt0eXBlfToke2lkfWA7XG4gICAgdGhpcy5yaW5naW5nU3ViamVjdCA9IG5ldyBCZWhhdmlvclN1YmplY3QocmluZ2luZyk7XG4gICAgdGhpcy53YXRjaGluZyA9IHdhdGNoaW5nO1xuICAgIHRoaXMuc3RyZWFtQ2xpZW50ID0gc3RyZWFtQ2xpZW50O1xuICAgIHRoaXMuY2xpZW50U3RvcmUgPSBjbGllbnRTdG9yZTtcbiAgICB0aGlzLnN0cmVhbUNsaWVudEJhc2VQYXRoID0gYC9jYWxsLyR7dGhpcy50eXBlfS8ke3RoaXMuaWR9YDtcbiAgICB0aGlzLmxvZ2dlciA9IGdldExvZ2dlcihbJ0NhbGwnXSk7XG5cbiAgICBjb25zdCBjYWxsVHlwZUNvbmZpZyA9IENhbGxUeXBlcy5nZXQodHlwZSk7XG4gICAgY29uc3QgcGFydGljaXBhbnRTb3J0ZXIgPVxuICAgICAgc29ydFBhcnRpY2lwYW50c0J5IHx8IGNhbGxUeXBlQ29uZmlnLm9wdGlvbnMuc29ydFBhcnRpY2lwYW50c0J5O1xuICAgIGlmIChwYXJ0aWNpcGFudFNvcnRlcikge1xuICAgICAgdGhpcy5zdGF0ZS5zZXRTb3J0UGFydGljaXBhbnRzQnkocGFydGljaXBhbnRTb3J0ZXIpO1xuICAgIH1cblxuICAgIHRoaXMuc3RhdGUuc2V0TWVtYmVycyhtZW1iZXJzIHx8IFtdKTtcbiAgICB0aGlzLnN0YXRlLnNldE93bkNhcGFiaWxpdGllcyhvd25DYXBhYmlsaXRpZXMgfHwgW10pO1xuICAgIHRoaXMuc3RhdGUuc2V0Q2FsbGluZ1N0YXRlKFxuICAgICAgcmluZ2luZyA/IENhbGxpbmdTdGF0ZS5SSU5HSU5HIDogQ2FsbGluZ1N0YXRlLklETEUsXG4gICAgKTtcblxuICAgIHRoaXMub24oJ2FsbCcsIChldmVudCkgPT4ge1xuICAgICAgLy8gdXBkYXRlIHN0YXRlIHdpdGggdGhlIGxhdGVzdCBldmVudCBkYXRhXG4gICAgICB0aGlzLnN0YXRlLnVwZGF0ZUZyb21FdmVudChldmVudCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLmxlYXZlQ2FsbEhvb2tzLmFkZChcbiAgICAgIHJlZ2lzdGVyRXZlbnRIYW5kbGVycyh0aGlzLCB0aGlzLnN0YXRlLCB0aGlzLmRpc3BhdGNoZXIpLFxuICAgICk7XG4gICAgdGhpcy5yZWdpc3RlckVmZmVjdHMoKTtcblxuICAgIHRoaXMubGVhdmVDYWxsSG9va3MuYWRkKFxuICAgICAgY3JlYXRlU3Vic2NyaXB0aW9uKFxuICAgICAgICB0aGlzLnRyYWNrU3Vic2NyaXB0aW9uc1N1YmplY3QucGlwZShcbiAgICAgICAgICBkZWJvdW5jZSgodikgPT4gdGltZXIodi50eXBlKSksXG4gICAgICAgICAgbWFwKCh2KSA9PiB2LmRhdGEpLFxuICAgICAgICApLFxuICAgICAgICAoc3Vic2NyaXB0aW9ucykgPT4gdGhpcy5zZnVDbGllbnQ/LnVwZGF0ZVN1YnNjcmlwdGlvbnMoc3Vic2NyaXB0aW9ucyksXG4gICAgICApLFxuICAgICk7XG5cbiAgICB0aGlzLmNhbWVyYSA9IG5ldyBDYW1lcmFNYW5hZ2VyKHRoaXMpO1xuICAgIHRoaXMubWljcm9waG9uZSA9IG5ldyBNaWNyb3Bob25lTWFuYWdlcih0aGlzKTtcbiAgICB0aGlzLnNwZWFrZXIgPSBuZXcgU3BlYWtlck1hbmFnZXIoKTtcbiAgICB0aGlzLnNjcmVlblNoYXJlID0gbmV3IFNjcmVlblNoYXJlTWFuYWdlcih0aGlzKTtcbiAgfVxuXG4gIHByaXZhdGUgcmVnaXN0ZXJFZmZlY3RzKCkge1xuICAgIHRoaXMubGVhdmVDYWxsSG9va3MuYWRkKFxuICAgICAgLy8gaGFuZGxlcyB1cGRhdGluZyB0aGUgcGVybWlzc2lvbnMgY29udGV4dCB3aGVuIHRoZSBzZXR0aW5ncyBjaGFuZ2UuXG4gICAgICBjcmVhdGVTdWJzY3JpcHRpb24odGhpcy5zdGF0ZS5zZXR0aW5ncyQsIChzZXR0aW5ncykgPT4ge1xuICAgICAgICBpZiAoIXNldHRpbmdzKSByZXR1cm47XG4gICAgICAgIHRoaXMucGVybWlzc2lvbnNDb250ZXh0LnNldENhbGxTZXR0aW5ncyhzZXR0aW5ncyk7XG4gICAgICB9KSxcbiAgICApO1xuXG4gICAgdGhpcy5sZWF2ZUNhbGxIb29rcy5hZGQoXG4gICAgICAvLyBoYW5kbGUgdGhlIGNhc2Ugd2hlbiB0aGUgdXNlciBwZXJtaXNzaW9ucyBhcmUgbW9kaWZpZWQuXG4gICAgICBjcmVhdGVTdWJzY3JpcHRpb24odGhpcy5zdGF0ZS5vd25DYXBhYmlsaXRpZXMkLCAob3duQ2FwYWJpbGl0aWVzKSA9PiB7XG4gICAgICAgIC8vIHVwZGF0ZSB0aGUgcGVybWlzc2lvbiBjb250ZXh0LlxuICAgICAgICB0aGlzLnBlcm1pc3Npb25zQ29udGV4dC5zZXRQZXJtaXNzaW9ucyhvd25DYXBhYmlsaXRpZXMpO1xuXG4gICAgICAgIGlmICghdGhpcy5wdWJsaXNoZXIpIHJldHVybjtcblxuICAgICAgICAvLyBjaGVjayBpZiB0aGUgdXNlciBzdGlsbCBoYXMgcHVibGlzaGluZyBwZXJtaXNzaW9ucyBhbmQgc3RvcCBwdWJsaXNoaW5nIGlmIG5vdC5cbiAgICAgICAgY29uc3QgcGVybWlzc2lvblRvVHJhY2tUeXBlID0ge1xuICAgICAgICAgIFtPd25DYXBhYmlsaXR5LlNFTkRfQVVESU9dOiBUcmFja1R5cGUuQVVESU8sXG4gICAgICAgICAgW093bkNhcGFiaWxpdHkuU0VORF9WSURFT106IFRyYWNrVHlwZS5WSURFTyxcbiAgICAgICAgICBbT3duQ2FwYWJpbGl0eS5TQ1JFRU5TSEFSRV06IFRyYWNrVHlwZS5TQ1JFRU5fU0hBUkUsXG4gICAgICAgIH07XG4gICAgICAgIGZvciAoY29uc3QgW3Blcm1pc3Npb24sIHRyYWNrVHlwZV0gb2YgT2JqZWN0LmVudHJpZXMoXG4gICAgICAgICAgcGVybWlzc2lvblRvVHJhY2tUeXBlLFxuICAgICAgICApKSB7XG4gICAgICAgICAgY29uc3QgaGFzUGVybWlzc2lvbiA9IHRoaXMucGVybWlzc2lvbnNDb250ZXh0Lmhhc1Blcm1pc3Npb24oXG4gICAgICAgICAgICBwZXJtaXNzaW9uIGFzIE93bkNhcGFiaWxpdHksXG4gICAgICAgICAgKTtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAhaGFzUGVybWlzc2lvbiAmJlxuICAgICAgICAgICAgKHRoaXMucHVibGlzaGVyLmlzUHVibGlzaGluZyh0cmFja1R5cGUpIHx8XG4gICAgICAgICAgICAgIHRoaXMucHVibGlzaGVyLmlzTGl2ZSh0cmFja1R5cGUpKVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgLy8gU3RvcCB0cmFja3MsIHRoZW4gbm90aWZ5IGRldmljZSBtYW5hZ2VyXG4gICAgICAgICAgICB0aGlzLnN0b3BQdWJsaXNoKHRyYWNrVHlwZSlcbiAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlcihcbiAgICAgICAgICAgICAgICAgICdlcnJvcicsXG4gICAgICAgICAgICAgICAgICBgRXJyb3Igc3RvcHBpbmcgcHVibGlzaCAke3RyYWNrVHlwZX1gLFxuICAgICAgICAgICAgICAgICAgZXJyLFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICB0cmFja1R5cGUgPT09IFRyYWNrVHlwZS5WSURFTyAmJlxuICAgICAgICAgICAgICAgICAgdGhpcy5jYW1lcmEuc3RhdGUuc3RhdHVzID09PSAnZW5hYmxlZCdcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgIHRoaXMuY2FtZXJhXG4gICAgICAgICAgICAgICAgICAgIC5kaXNhYmxlKClcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+XG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIoXG4gICAgICAgICAgICAgICAgICAgICAgICAnZXJyb3InLFxuICAgICAgICAgICAgICAgICAgICAgICAgYEVycm9yIGRpc2FibGluZyBjYW1lcmEgYWZ0ZXIgcGVybWlzc2lvbiByZXZva2VkYCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycixcbiAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICB0cmFja1R5cGUgPT09IFRyYWNrVHlwZS5BVURJTyAmJlxuICAgICAgICAgICAgICAgICAgdGhpcy5taWNyb3Bob25lLnN0YXRlLnN0YXR1cyA9PT0gJ2VuYWJsZWQnXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICB0aGlzLm1pY3JvcGhvbmVcbiAgICAgICAgICAgICAgICAgICAgLmRpc2FibGUoKVxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKGVycikgPT5cbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlcihcbiAgICAgICAgICAgICAgICAgICAgICAgICdlcnJvcicsXG4gICAgICAgICAgICAgICAgICAgICAgICBgRXJyb3IgZGlzYWJsaW5nIG1pY3JvcGhvbmUgYWZ0ZXIgcGVybWlzc2lvbiByZXZva2VkYCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycixcbiAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KSxcbiAgICApO1xuXG4gICAgdGhpcy5sZWF2ZUNhbGxIb29rcy5hZGQoXG4gICAgICAvLyBoYW5kbGVzIHRoZSBjYXNlIHdoZW4gdGhlIHVzZXIgaXMgYmxvY2tlZCBieSB0aGUgY2FsbCBvd25lci5cbiAgICAgIGNyZWF0ZVN1YnNjcmlwdGlvbih0aGlzLnN0YXRlLmJsb2NrZWRVc2VySWRzJCwgYXN5bmMgKGJsb2NrZWRVc2VySWRzKSA9PiB7XG4gICAgICAgIGlmICghYmxvY2tlZFVzZXJJZHMgfHwgYmxvY2tlZFVzZXJJZHMubGVuZ3RoID09PSAwKSByZXR1cm47XG4gICAgICAgIGNvbnN0IGN1cnJlbnRVc2VySWQgPSB0aGlzLmN1cnJlbnRVc2VySWQ7XG4gICAgICAgIGlmIChjdXJyZW50VXNlcklkICYmIGJsb2NrZWRVc2VySWRzLmluY2x1ZGVzKGN1cnJlbnRVc2VySWQpKSB7XG4gICAgICAgICAgdGhpcy5sb2dnZXIoJ2luZm8nLCAnTGVhdmluZyBjYWxsIGJlY2F1c2Ugb2YgYmVpbmcgYmxvY2tlZCcpO1xuICAgICAgICAgIGF3YWl0IHRoaXMubGVhdmUoKTtcbiAgICAgICAgfVxuICAgICAgfSksXG4gICAgKTtcblxuICAgIHRoaXMubGVhdmVDYWxsSG9va3MuYWRkKFxuICAgICAgLy8gd2F0Y2ggZm9yIGF1dG8gZHJvcCBjYW5jZWxsYXRpb25cbiAgICAgIGNyZWF0ZVN1YnNjcmlwdGlvbih0aGlzLnN0YXRlLmNhbGxpbmdTdGF0ZSQsIChjYWxsaW5nU3RhdGUpID0+IHtcbiAgICAgICAgaWYgKCF0aGlzLnJpbmdpbmcpIHJldHVybjtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGNhbGxpbmdTdGF0ZSA9PT0gQ2FsbGluZ1N0YXRlLkpPSU5FRCB8fFxuICAgICAgICAgIGNhbGxpbmdTdGF0ZSA9PT0gQ2FsbGluZ1N0YXRlLkpPSU5JTkcgfHxcbiAgICAgICAgICBjYWxsaW5nU3RhdGUgPT09IENhbGxpbmdTdGF0ZS5MRUZUXG4gICAgICAgICkge1xuICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmRyb3BUaW1lb3V0KTtcbiAgICAgICAgICB0aGlzLmRyb3BUaW1lb3V0ID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICB9KSxcbiAgICApO1xuXG4gICAgdGhpcy5sZWF2ZUNhbGxIb29rcy5hZGQoXG4gICAgICAvLyBcInJpbmdpbmdcIiBtb2RlIGVmZmVjdHMgYW5kIGV2ZW50IGhhbmRsZXJzXG4gICAgICBjcmVhdGVTdWJzY3JpcHRpb24odGhpcy5yaW5naW5nU3ViamVjdCwgKGlzUmluZ2luZykgPT4ge1xuICAgICAgICBpZiAoIWlzUmluZ2luZykgcmV0dXJuO1xuICAgICAgICB0aGlzLnNjaGVkdWxlQXV0b0Ryb3AoKTtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuY2FsbGluZ1N0YXRlID09PSBDYWxsaW5nU3RhdGUuSURMRSkge1xuICAgICAgICAgIHRoaXMuc3RhdGUuc2V0Q2FsbGluZ1N0YXRlKENhbGxpbmdTdGF0ZS5SSU5HSU5HKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxlYXZlQ2FsbEhvb2tzLmFkZChyZWdpc3RlclJpbmdpbmdDYWxsRXZlbnRIYW5kbGVycyh0aGlzKSk7XG4gICAgICB9KSxcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFlvdSBjYW4gc3Vic2NyaWJlIHRvIFdlYlNvY2tldCBldmVudHMgcHJvdmlkZWQgYnkgdGhlIEFQSS4gVG8gcmVtb3ZlIGEgc3Vic2NyaXB0aW9uLCBjYWxsIHRoZSBgb2ZmYCBtZXRob2QuXG4gICAqIFBsZWFzZSBub3RlIHRoYXQgc3Vic2NyaWJpbmcgdG8gV2ViU29ja2V0IGV2ZW50cyBpcyBhbiBhZHZhbmNlZCB1c2UtY2FzZS5cbiAgICogRm9yIG1vc3QgdXNlLWNhc2VzLCBpdCBzaG91bGQgYmUgZW5vdWdoIHRvIHdhdGNoIGZvciBzdGF0ZSBjaGFuZ2VzLlxuICAgKlxuICAgKiBAcGFyYW0gZXZlbnROYW1lIHRoZSBldmVudCBuYW1lLlxuICAgKiBAcGFyYW0gZm4gdGhlIGV2ZW50IGhhbmRsZXIuXG4gICAqL1xuICBvbiA9IDxFIGV4dGVuZHMga2V5b2YgQWxsQ2FsbEV2ZW50cz4oXG4gICAgZXZlbnROYW1lOiBFLFxuICAgIGZuOiBDYWxsRXZlbnRMaXN0ZW5lcjxFPixcbiAgKSA9PiB7XG4gICAgaWYgKGlzU2Z1RXZlbnQoZXZlbnROYW1lKSkge1xuICAgICAgcmV0dXJuIHRoaXMuZGlzcGF0Y2hlci5vbihldmVudE5hbWUsIGZuKTtcbiAgICB9XG5cbiAgICBjb25zdCBvZmZIYW5kbGVyID0gdGhpcy5zdHJlYW1DbGllbnQub24oZXZlbnROYW1lLCAoZSkgPT4ge1xuICAgICAgY29uc3QgZXZlbnQgPSBlIGFzIFN0cmVhbUNhbGxFdmVudDtcbiAgICAgIGlmIChldmVudC5jYWxsX2NpZCAmJiBldmVudC5jYWxsX2NpZCA9PT0gdGhpcy5jaWQpIHtcbiAgICAgICAgZm4oZXZlbnQgYXMgQWxsQ2FsbEV2ZW50c1tFXSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBrZWVwIHRoZSAnb2ZmJyByZWZlcmVuY2UgcmV0dXJuZWQgYnkgdGhlIHN0cmVhbSBjbGllbnRcbiAgICB0aGlzLnN0cmVhbUNsaWVudEV2ZW50SGFuZGxlcnMuc2V0KGZuLCBvZmZIYW5kbGVyKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgdGhpcy5vZmYoZXZlbnROYW1lLCBmbik7XG4gICAgfTtcbiAgfTtcblxuICAvKipcbiAgICogUmVtb3ZlIHN1YnNjcmlwdGlvbiBmb3IgV2ViU29ja2V0IGV2ZW50cyB0aGF0IHdlcmUgY3JlYXRlZCBieSB0aGUgYG9uYCBtZXRob2QuXG4gICAqXG4gICAqIEBwYXJhbSBldmVudE5hbWUgdGhlIGV2ZW50IG5hbWUuXG4gICAqIEBwYXJhbSBmbiB0aGUgZXZlbnQgaGFuZGxlci5cbiAgICovXG4gIG9mZiA9IDxFIGV4dGVuZHMga2V5b2YgQWxsQ2FsbEV2ZW50cz4oXG4gICAgZXZlbnROYW1lOiBFLFxuICAgIGZuOiBDYWxsRXZlbnRMaXN0ZW5lcjxFPixcbiAgKSA9PiB7XG4gICAgaWYgKGlzU2Z1RXZlbnQoZXZlbnROYW1lKSkge1xuICAgICAgcmV0dXJuIHRoaXMuZGlzcGF0Y2hlci5vZmYoZXZlbnROYW1lLCBmbik7XG4gICAgfVxuXG4gICAgLy8gdW5zdWJzY3JpYmUgZnJvbSB0aGUgc3RyZWFtIGNsaWVudCBldmVudCBieSB1c2luZyB0aGUgJ29mZicgcmVmZXJlbmNlXG4gICAgY29uc3QgcmVnaXN0ZXJlZE9mZkhhbmRsZXIgPSB0aGlzLnN0cmVhbUNsaWVudEV2ZW50SGFuZGxlcnMuZ2V0KGZuKTtcbiAgICBpZiAocmVnaXN0ZXJlZE9mZkhhbmRsZXIpIHtcbiAgICAgIHJlZ2lzdGVyZWRPZmZIYW5kbGVyKCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBMZWF2ZSB0aGUgY2FsbCBhbmQgc3RvcCB0aGUgbWVkaWEgc3RyZWFtcyB0aGF0IHdlcmUgcHVibGlzaGVkIGJ5IHRoZSBjYWxsLlxuICAgKi9cbiAgbGVhdmUgPSBhc3luYyAoeyByZWplY3QgPSBmYWxzZSB9OiBDYWxsTGVhdmVPcHRpb25zID0ge30pID0+IHtcbiAgICBjb25zdCBjYWxsaW5nU3RhdGUgPSB0aGlzLnN0YXRlLmNhbGxpbmdTdGF0ZTtcbiAgICBpZiAoY2FsbGluZ1N0YXRlID09PSBDYWxsaW5nU3RhdGUuTEVGVCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgbGVhdmUgY2FsbCB0aGF0IGhhcyBhbHJlYWR5IGJlZW4gbGVmdC4nKTtcbiAgICB9XG5cbiAgICBpZiAoY2FsbGluZ1N0YXRlID09PSBDYWxsaW5nU3RhdGUuSk9JTklORykge1xuICAgICAgYXdhaXQgdGhpcy5hc3NlcnRDYWxsSm9pbmVkKCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucmluZ2luZykge1xuICAgICAgLy8gSSdtIHRoZSBvbmUgd2hvIHN0YXJ0ZWQgdGhlIGNhbGwsIHNvIEkgc2hvdWxkIGNhbmNlbCBpdC5cbiAgICAgIGNvbnN0IGhhc090aGVyUGFydGljaXBhbnRzID0gdGhpcy5zdGF0ZS5yZW1vdGVQYXJ0aWNpcGFudHMubGVuZ3RoID4gMDtcbiAgICAgIGlmICh0aGlzLmlzQ3JlYXRlZEJ5TWUgJiYgIWhhc090aGVyUGFydGljaXBhbnRzKSB7XG4gICAgICAgIC8vIFNpZ25hbHMgb3RoZXIgdXNlcnMgdGhhdCBJIGhhdmUgY2FuY2VsbGVkIG15IGNhbGwgdG8gdGhlbVxuICAgICAgICAvLyBiZWZvcmUgdGhleSBhY2NlcHRlZCBpdC5cbiAgICAgICAgYXdhaXQgdGhpcy5yZWplY3QoKTtcbiAgICAgIH0gZWxzZSBpZiAocmVqZWN0ICYmIGNhbGxpbmdTdGF0ZSA9PT0gQ2FsbGluZ1N0YXRlLlJJTkdJTkcpIHtcbiAgICAgICAgLy8gU2lnbmFscyBvdGhlciB1c2VycyB0aGF0IEkgaGF2ZSByZWplY3RlZCB0aGUgaW5jb21pbmcgY2FsbC5cbiAgICAgICAgYXdhaXQgdGhpcy5yZWplY3QoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnN0YXRzUmVwb3J0ZXI/LnN0b3AoKTtcbiAgICB0aGlzLnN0YXRzUmVwb3J0ZXIgPSB1bmRlZmluZWQ7XG5cbiAgICB0aGlzLnN1YnNjcmliZXI/LmNsb3NlKCk7XG4gICAgdGhpcy5zdWJzY3JpYmVyID0gdW5kZWZpbmVkO1xuXG4gICAgdGhpcy5wdWJsaXNoZXI/LmNsb3NlKCk7XG4gICAgdGhpcy5wdWJsaXNoZXIgPSB1bmRlZmluZWQ7XG5cbiAgICB0aGlzLnNmdUNsaWVudD8uY2xvc2UoKTtcbiAgICB0aGlzLnNmdUNsaWVudCA9IHVuZGVmaW5lZDtcblxuICAgIHRoaXMuZGlzcGF0Y2hlci5vZmZBbGwoKTtcblxuICAgIHRoaXMuc3RhdGUuc2V0Q2FsbGluZ1N0YXRlKENhbGxpbmdTdGF0ZS5MRUZUKTtcblxuICAgIC8vIENhbGwgYWxsIGxlYXZlIGNhbGwgaG9va3MsIGUuZy4gdG8gY2xlYW4gdXAgZ2xvYmFsIGV2ZW50IGhhbmRsZXJzXG4gICAgdGhpcy5sZWF2ZUNhbGxIb29rcy5mb3JFYWNoKChob29rKSA9PiBob29rKCkpO1xuXG4gICAgdGhpcy5jbGllbnRTdG9yZS51bnJlZ2lzdGVyQ2FsbCh0aGlzKTtcblxuICAgIHRoaXMuY2FtZXJhLnJlbW92ZVN1YnNjcmlwdGlvbnMoKTtcbiAgICB0aGlzLm1pY3JvcGhvbmUucmVtb3ZlU3Vic2NyaXB0aW9ucygpO1xuICAgIHRoaXMuc2NyZWVuU2hhcmUucmVtb3ZlU3Vic2NyaXB0aW9ucygpO1xuICAgIHRoaXMuc3BlYWtlci5yZW1vdmVTdWJzY3JpcHRpb25zKCk7XG5cbiAgICBjb25zdCBzdG9wT25MZWF2ZVByb21pc2VzOiBQcm9taXNlPHZvaWQ+W10gPSBbXTtcbiAgICBpZiAodGhpcy5jYW1lcmEuc3RvcE9uTGVhdmUpIHtcbiAgICAgIHN0b3BPbkxlYXZlUHJvbWlzZXMucHVzaCh0aGlzLmNhbWVyYS5kaXNhYmxlKHRydWUpKTtcbiAgICB9XG4gICAgaWYgKHRoaXMubWljcm9waG9uZS5zdG9wT25MZWF2ZSkge1xuICAgICAgc3RvcE9uTGVhdmVQcm9taXNlcy5wdXNoKHRoaXMubWljcm9waG9uZS5kaXNhYmxlKHRydWUpKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuc2NyZWVuU2hhcmUuc3RvcE9uTGVhdmUpIHtcbiAgICAgIHN0b3BPbkxlYXZlUHJvbWlzZXMucHVzaCh0aGlzLnNjcmVlblNoYXJlLmRpc2FibGUodHJ1ZSkpO1xuICAgIH1cbiAgICBhd2FpdCBQcm9taXNlLmFsbChzdG9wT25MZWF2ZVByb21pc2VzKTtcbiAgfTtcblxuICAvKipcbiAgICogQSBmbGFnIGluZGljYXRpbmcgd2hldGhlciB0aGUgY2FsbCBpcyBcInJpbmdpbmdcIiB0eXBlIG9mIGNhbGwuXG4gICAqL1xuICBnZXQgcmluZ2luZygpIHtcbiAgICByZXR1cm4gZ2V0Q3VycmVudFZhbHVlKHRoaXMucmluZ2luZ1N1YmplY3QpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHJpZXZlcyB0aGUgY3VycmVudCB1c2VyIElELlxuICAgKi9cbiAgZ2V0IGN1cnJlbnRVc2VySWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuY2xpZW50U3RvcmUuY29ubmVjdGVkVXNlcj8uaWQ7XG4gIH1cblxuICAvKipcbiAgICogQSBmbGFnIGluZGljYXRpbmcgd2hldGhlciB0aGUgY2FsbCB3YXMgY3JlYXRlZCBieSB0aGUgY3VycmVudCB1c2VyLlxuICAgKi9cbiAgZ2V0IGlzQ3JlYXRlZEJ5TWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGUuY3JlYXRlZEJ5Py5pZCA9PT0gdGhpcy5jdXJyZW50VXNlcklkO1xuICB9XG5cbiAgLyoqXG4gICAqIExvYWRzIHRoZSBpbmZvcm1hdGlvbiBhYm91dCB0aGUgY2FsbC5cbiAgICpcbiAgICogQHBhcmFtIHBhcmFtcy5yaW5nIGlmIHNldCB0byB0cnVlLCBhIGBjYWxsLnJpbmdgIGV2ZW50IHdpbGwgYmUgc2VudCB0byB0aGUgY2FsbCBtZW1iZXJzLlxuICAgKiBAcGFyYW0gcGFyYW1zLm5vdGlmeSBpZiBzZXQgdG8gdHJ1ZSwgYSBgY2FsbC5ub3RpZmljYXRpb25gIGV2ZW50IHdpbGwgYmUgc2VudCB0byB0aGUgY2FsbCBtZW1iZXJzLlxuICAgKiBAcGFyYW0gcGFyYW1zLm1lbWJlcnNfbGltaXQgdGhlIHRvdGFsIG51bWJlciBvZiBtZW1iZXJzIHRvIHJldHVybiBhcyBwYXJ0IG9mIHRoZSByZXNwb25zZS5cbiAgICovXG4gIGdldCA9IGFzeW5jIChwYXJhbXM/OiB7XG4gICAgcmluZz86IGJvb2xlYW47XG4gICAgbm90aWZ5PzogYm9vbGVhbjtcbiAgICBtZW1iZXJzX2xpbWl0PzogbnVtYmVyO1xuICB9KSA9PiB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnN0cmVhbUNsaWVudC5nZXQ8R2V0Q2FsbFJlc3BvbnNlPihcbiAgICAgIHRoaXMuc3RyZWFtQ2xpZW50QmFzZVBhdGgsXG4gICAgICBwYXJhbXMsXG4gICAgKTtcblxuICAgIGlmIChwYXJhbXM/LnJpbmcgJiYgIXRoaXMucmluZ2luZykge1xuICAgICAgdGhpcy5yaW5naW5nU3ViamVjdC5uZXh0KHRydWUpO1xuICAgIH1cblxuICAgIHRoaXMuc3RhdGUudXBkYXRlRnJvbUNhbGxSZXNwb25zZShyZXNwb25zZS5jYWxsKTtcbiAgICB0aGlzLnN0YXRlLnNldE1lbWJlcnMocmVzcG9uc2UubWVtYmVycyk7XG4gICAgdGhpcy5zdGF0ZS5zZXRPd25DYXBhYmlsaXRpZXMocmVzcG9uc2Uub3duX2NhcGFiaWxpdGllcyk7XG5cbiAgICBpZiAodGhpcy5zdHJlYW1DbGllbnQuX2hhc0Nvbm5lY3Rpb25JRCgpKSB7XG4gICAgICB0aGlzLndhdGNoaW5nID0gdHJ1ZTtcbiAgICAgIHRoaXMuY2xpZW50U3RvcmUucmVnaXN0ZXJDYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIHRoaXMuYXBwbHlEZXZpY2VDb25maWcoKTtcblxuICAgIHJldHVybiByZXNwb25zZTtcbiAgfTtcblxuICAvKipcbiAgICogTG9hZHMgdGhlIGluZm9ybWF0aW9uIGFib3V0IHRoZSBjYWxsIGFuZCBjcmVhdGVzIGl0IGlmIGl0IGRvZXNuJ3QgZXhpc3QuXG4gICAqXG4gICAqIEBwYXJhbSBkYXRhIHRoZSBkYXRhIHRvIGNyZWF0ZSB0aGUgY2FsbCB3aXRoLlxuICAgKi9cbiAgZ2V0T3JDcmVhdGUgPSBhc3luYyAoZGF0YT86IEdldE9yQ3JlYXRlQ2FsbFJlcXVlc3QpID0+IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc3RyZWFtQ2xpZW50LnBvc3Q8XG4gICAgICBHZXRPckNyZWF0ZUNhbGxSZXNwb25zZSxcbiAgICAgIEdldE9yQ3JlYXRlQ2FsbFJlcXVlc3RcbiAgICA+KHRoaXMuc3RyZWFtQ2xpZW50QmFzZVBhdGgsIGRhdGEpO1xuXG4gICAgaWYgKGRhdGE/LnJpbmcgJiYgIXRoaXMucmluZ2luZykge1xuICAgICAgdGhpcy5yaW5naW5nU3ViamVjdC5uZXh0KHRydWUpO1xuICAgIH1cblxuICAgIHRoaXMuc3RhdGUudXBkYXRlRnJvbUNhbGxSZXNwb25zZShyZXNwb25zZS5jYWxsKTtcbiAgICB0aGlzLnN0YXRlLnNldE1lbWJlcnMocmVzcG9uc2UubWVtYmVycyk7XG4gICAgdGhpcy5zdGF0ZS5zZXRPd25DYXBhYmlsaXRpZXMocmVzcG9uc2Uub3duX2NhcGFiaWxpdGllcyk7XG5cbiAgICBpZiAodGhpcy5zdHJlYW1DbGllbnQuX2hhc0Nvbm5lY3Rpb25JRCgpKSB7XG4gICAgICB0aGlzLndhdGNoaW5nID0gdHJ1ZTtcbiAgICAgIHRoaXMuY2xpZW50U3RvcmUucmVnaXN0ZXJDYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIHRoaXMuYXBwbHlEZXZpY2VDb25maWcoKTtcblxuICAgIHJldHVybiByZXNwb25zZTtcbiAgfTtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhIGNhbGxcbiAgICpcbiAgICogQHBhcmFtIGRhdGEgdGhlIGRhdGEgdG8gY3JlYXRlIHRoZSBjYWxsIHdpdGguXG4gICAqL1xuICBjcmVhdGUgPSBhc3luYyAoZGF0YT86IEdldE9yQ3JlYXRlQ2FsbFJlcXVlc3QpID0+IHtcbiAgICByZXR1cm4gdGhpcy5nZXRPckNyZWF0ZShkYXRhKTtcbiAgfTtcblxuICAvKipcbiAgICogQSBzaG9ydGN1dCBmb3Ige0BsaW5rIENhbGwuZ2V0fSB3aXRoIGByaW5nYCBwYXJhbWV0ZXIgc2V0IHRvIGB0cnVlYC5cbiAgICogV2lsbCBzZW5kIGEgYGNhbGwucmluZ2AgZXZlbnQgdG8gdGhlIGNhbGwgbWVtYmVycy5cbiAgICovXG4gIHJpbmcgPSBhc3luYyAoKTogUHJvbWlzZTxHZXRDYWxsUmVzcG9uc2U+ID0+IHtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5nZXQoeyByaW5nOiB0cnVlIH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBIHNob3J0Y3V0IGZvciB7QGxpbmsgQ2FsbC5nZXR9IHdpdGggYG5vdGlmeWAgcGFyYW1ldGVyIHNldCB0byBgdHJ1ZWAuXG4gICAqIFdpbGwgc2VuZCBhIGBjYWxsLm5vdGlmaWNhdGlvbmAgZXZlbnQgdG8gdGhlIGNhbGwgbWVtYmVycy5cbiAgICovXG4gIG5vdGlmeSA9IGFzeW5jICgpOiBQcm9taXNlPEdldENhbGxSZXNwb25zZT4gPT4ge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLmdldCh7IG5vdGlmeTogdHJ1ZSB9KTtcbiAgfTtcblxuICAvKipcbiAgICogTWFya3MgdGhlIGluY29taW5nIGNhbGwgYXMgYWNjZXB0ZWQuXG4gICAqXG4gICAqIFRoaXMgbWV0aG9kIHNob3VsZCBiZSB1c2VkIG9ubHkgZm9yIFwicmluZ2luZ1wiIGNhbGwgZmxvd3MuXG4gICAqIHtAbGluayBDYWxsLmpvaW59IGludm9rZXMgdGhpcyBtZXRob2QgYXV0b21hdGljYWxseSBmb3IgeW91IHdoZW4gam9pbmluZyBhIGNhbGwuXG4gICAqIFVubGVzcyB5b3UgYXJlIGltcGxlbWVudGluZyBhIGN1c3RvbSBcInJpbmdpbmdcIiBmbG93LCB5b3Ugc2hvdWxkIG5vdCB1c2UgdGhpcyBtZXRob2QuXG4gICAqL1xuICBhY2NlcHQgPSBhc3luYyAoKSA9PiB7XG4gICAgcmV0dXJuIHRoaXMuc3RyZWFtQ2xpZW50LnBvc3Q8QWNjZXB0Q2FsbFJlc3BvbnNlPihcbiAgICAgIGAke3RoaXMuc3RyZWFtQ2xpZW50QmFzZVBhdGh9L2FjY2VwdGAsXG4gICAgKTtcbiAgfTtcblxuICAvKipcbiAgICogTWFya3MgdGhlIGluY29taW5nIGNhbGwgYXMgcmVqZWN0ZWQuXG4gICAqXG4gICAqIFRoaXMgbWV0aG9kIHNob3VsZCBiZSB1c2VkIG9ubHkgZm9yIFwicmluZ2luZ1wiIGNhbGwgZmxvd3MuXG4gICAqIHtAbGluayBDYWxsLmxlYXZlfSBpbnZva2VzIHRoaXMgbWV0aG9kIGF1dG9tYXRpY2FsbHkgZm9yIHlvdSB3aGVuIHlvdSBsZWF2ZSBvciByZWplY3QgdGhpcyBjYWxsLlxuICAgKiBVbmxlc3MgeW91IGFyZSBpbXBsZW1lbnRpbmcgYSBjdXN0b20gXCJyaW5naW5nXCIgZmxvdywgeW91IHNob3VsZCBub3QgdXNlIHRoaXMgbWV0aG9kLlxuICAgKi9cbiAgcmVqZWN0ID0gYXN5bmMgKCkgPT4ge1xuICAgIHJldHVybiB0aGlzLnN0cmVhbUNsaWVudC5wb3N0PFJlamVjdENhbGxSZXNwb25zZT4oXG4gICAgICBgJHt0aGlzLnN0cmVhbUNsaWVudEJhc2VQYXRofS9yZWplY3RgLFxuICAgICk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFdpbGwgc3RhcnQgdG8gd2F0Y2ggZm9yIGNhbGwgcmVsYXRlZCBXZWJTb2NrZXQgZXZlbnRzIGFuZCBpbml0aWF0ZSBhIGNhbGwgc2Vzc2lvbiB3aXRoIHRoZSBzZXJ2ZXIuXG4gICAqXG4gICAqIEByZXR1cm5zIGEgcHJvbWlzZSB3aGljaCByZXNvbHZlcyBvbmNlIHRoZSBjYWxsIGpvaW4tZmxvdyBoYXMgZmluaXNoZWQuXG4gICAqL1xuICBqb2luID0gYXN5bmMgKGRhdGE/OiBKb2luQ2FsbERhdGEpOiBQcm9taXNlPHZvaWQ+ID0+IHtcbiAgICBjb25zdCBjYWxsaW5nU3RhdGUgPSB0aGlzLnN0YXRlLmNhbGxpbmdTdGF0ZTtcbiAgICBpZiAoW0NhbGxpbmdTdGF0ZS5KT0lORUQsIENhbGxpbmdTdGF0ZS5KT0lOSU5HXS5pbmNsdWRlcyhjYWxsaW5nU3RhdGUpKSB7XG4gICAgICB0aGlzLmxvZ2dlcihcbiAgICAgICAgJ3dhcm4nLFxuICAgICAgICAnSm9pbiBtZXRob2QgY2FsbGVkIHR3aWNlLCB5b3Ugc2hvdWxkIG9ubHkgY2FsbCB0aGlzIG9uY2UnLFxuICAgICAgKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgSWxsZWdhbCBTdGF0ZTogQWxyZWFkeSBqb2luZWQuYCk7XG4gICAgfVxuXG4gICAgaWYgKGNhbGxpbmdTdGF0ZSA9PT0gQ2FsbGluZ1N0YXRlLkxFRlQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ0lsbGVnYWwgU3RhdGU6IENhbm5vdCBqb2luIGFscmVhZHkgbGVmdCBjYWxsLiBDcmVhdGUgYSBuZXcgQ2FsbCBpbnN0YW5jZSB0byBqb2luIGEgY2FsbC4nLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCBpc01pZ3JhdGluZyA9IGNhbGxpbmdTdGF0ZSA9PT0gQ2FsbGluZ1N0YXRlLk1JR1JBVElORztcbiAgICBjb25zdCBpc1JlY29ubmVjdGluZyA9IGNhbGxpbmdTdGF0ZSA9PT0gQ2FsbGluZ1N0YXRlLlJFQ09OTkVDVElORztcbiAgICB0aGlzLnN0YXRlLnNldENhbGxpbmdTdGF0ZShDYWxsaW5nU3RhdGUuSk9JTklORyk7XG4gICAgdGhpcy5sb2dnZXIoJ2RlYnVnJywgJ1N0YXJ0aW5nIGpvaW4gZmxvdycpO1xuXG4gICAgaWYgKGRhdGE/LnJpbmcgJiYgIXRoaXMucmluZ2luZykge1xuICAgICAgdGhpcy5yaW5naW5nU3ViamVjdC5uZXh0KHRydWUpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnJpbmdpbmcgJiYgIXRoaXMuaXNDcmVhdGVkQnlNZSkge1xuICAgICAgLy8gc2lnbmFscyBvdGhlciB1c2VycyB0aGF0IEkgaGF2ZSBhY2NlcHRlZCB0aGUgaW5jb21pbmcgY2FsbC5cbiAgICAgIGF3YWl0IHRoaXMuYWNjZXB0KCk7XG4gICAgfVxuXG4gICAgbGV0IHNmdVNlcnZlcjogU0ZVUmVzcG9uc2U7XG4gICAgbGV0IHNmdVRva2VuOiBzdHJpbmc7XG4gICAgbGV0IGNvbm5lY3Rpb25Db25maWc6IFJUQ0NvbmZpZ3VyYXRpb24gfCB1bmRlZmluZWQ7XG4gICAgdHJ5IHtcbiAgICAgIGlmICh0aGlzLnNmdUNsaWVudD8uaXNGYXN0UmVjb25uZWN0aW5nKSB7XG4gICAgICAgIC8vIHVzZSBwcmV2aW91cyBTRlUgY29uZmlndXJhdGlvbiBhbmQgdmFsdWVzXG4gICAgICAgIGNvbm5lY3Rpb25Db25maWcgPSB0aGlzLnB1Ymxpc2hlcj8uY29ubmVjdGlvbkNvbmZpZ3VyYXRpb247XG4gICAgICAgIHNmdVNlcnZlciA9IHRoaXMuc2Z1Q2xpZW50LnNmdVNlcnZlcjtcbiAgICAgICAgc2Z1VG9rZW4gPSB0aGlzLnNmdUNsaWVudC50b2tlbjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGZ1bGwgam9pbiBmbG93IC0gbGV0IHRoZSBDb29yZGluYXRvciBwaWNrIGEgbmV3IFNGVSBmb3IgdXNcbiAgICAgICAgY29uc3QgY2FsbCA9IGF3YWl0IGpvaW4odGhpcy5zdHJlYW1DbGllbnQsIHRoaXMudHlwZSwgdGhpcy5pZCwgZGF0YSk7XG4gICAgICAgIHRoaXMuc3RhdGUudXBkYXRlRnJvbUNhbGxSZXNwb25zZShjYWxsLm1ldGFkYXRhKTtcbiAgICAgICAgdGhpcy5zdGF0ZS5zZXRNZW1iZXJzKGNhbGwubWVtYmVycyk7XG4gICAgICAgIHRoaXMuc3RhdGUuc2V0T3duQ2FwYWJpbGl0aWVzKGNhbGwub3duQ2FwYWJpbGl0aWVzKTtcbiAgICAgICAgY29ubmVjdGlvbkNvbmZpZyA9IGNhbGwuY29ubmVjdGlvbkNvbmZpZztcbiAgICAgICAgc2Z1U2VydmVyID0gY2FsbC5zZnVTZXJ2ZXI7XG4gICAgICAgIHNmdVRva2VuID0gY2FsbC50b2tlbjtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuc3RyZWFtQ2xpZW50Ll9oYXNDb25uZWN0aW9uSUQoKSkge1xuICAgICAgICB0aGlzLndhdGNoaW5nID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5jbGllbnRTdG9yZS5yZWdpc3RlckNhbGwodGhpcyk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIC8vIHJlc3RvcmUgdGhlIHByZXZpb3VzIGNhbGwgc3RhdGUgaWYgdGhlIGpvaW4tZmxvdyBmYWlsc1xuICAgICAgdGhpcy5zdGF0ZS5zZXRDYWxsaW5nU3RhdGUoY2FsbGluZ1N0YXRlKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cblxuICAgIGNvbnN0IHByZXZpb3VzU2Z1Q2xpZW50ID0gdGhpcy5zZnVDbGllbnQ7XG4gICAgY29uc3Qgc2Z1Q2xpZW50ID0gKHRoaXMuc2Z1Q2xpZW50ID0gbmV3IFN0cmVhbVNmdUNsaWVudCh7XG4gICAgICBkaXNwYXRjaGVyOiB0aGlzLmRpc3BhdGNoZXIsXG4gICAgICBzZnVTZXJ2ZXIsXG4gICAgICB0b2tlbjogc2Z1VG9rZW4sXG4gICAgICBzZXNzaW9uSWQ6IHByZXZpb3VzU2Z1Q2xpZW50Py5zZXNzaW9uSWQsXG4gICAgfSkpO1xuXG4gICAgLyoqXG4gICAgICogQSBjbG9zdXJlIHdoaWNoIGhpZGVzIGF3YXkgdGhlIHJlLWNvbm5lY3Rpb24gbG9naWMuXG4gICAgICovXG4gICAgY29uc3QgcmVjb25uZWN0ID0gYXN5bmMgKFxuICAgICAgc3RyYXRlZ3k6ICdmdWxsJyB8ICdmYXN0JyB8ICdtaWdyYXRlJyA9ICdmdWxsJyxcbiAgICApOiBQcm9taXNlPHZvaWQ+ID0+IHtcbiAgICAgIGNvbnN0IGN1cnJlbnRTdGF0ZSA9IHRoaXMuc3RhdGUuY2FsbGluZ1N0YXRlO1xuICAgICAgaWYgKFxuICAgICAgICBjdXJyZW50U3RhdGUgPT09IENhbGxpbmdTdGF0ZS5NSUdSQVRJTkcgfHxcbiAgICAgICAgY3VycmVudFN0YXRlID09PSBDYWxsaW5nU3RhdGUuUkVDT05ORUNUSU5HXG4gICAgICApIHtcbiAgICAgICAgLy8gcHJldmVudCBwYXJhbGxlbCByZWNvbm5lY3Rpb24gYXR0ZW1wdHNcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdGhpcy5yZWNvbm5lY3RBdHRlbXB0cysrO1xuICAgICAgdGhpcy5zdGF0ZS5zZXRDYWxsaW5nU3RhdGUoXG4gICAgICAgIHN0cmF0ZWd5ID09PSAnbWlncmF0ZSdcbiAgICAgICAgICA/IENhbGxpbmdTdGF0ZS5NSUdSQVRJTkdcbiAgICAgICAgICA6IENhbGxpbmdTdGF0ZS5SRUNPTk5FQ1RJTkcsXG4gICAgICApO1xuXG4gICAgICBpZiAoc3RyYXRlZ3kgPT09ICdtaWdyYXRlJykge1xuICAgICAgICB0aGlzLmxvZ2dlcihcbiAgICAgICAgICAnZGVidWcnLFxuICAgICAgICAgIGBbTWlncmF0aW9uXTogbWlncmF0aW5nIGNhbGwgJHt0aGlzLmNpZH0gYXdheSBmcm9tICR7c2Z1U2VydmVyLmVkZ2VfbmFtZX1gLFxuICAgICAgICApO1xuICAgICAgICBzZnVDbGllbnQuaXNNaWdyYXRpbmdBd2F5ID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMubG9nZ2VyKFxuICAgICAgICAgICdkZWJ1ZycsXG4gICAgICAgICAgYFtSZWpvaW5dOiAke3N0cmF0ZWd5fSByZWpvaW4gY2FsbCAke3RoaXMuY2lkfSAoJHt0aGlzLnJlY29ubmVjdEF0dGVtcHRzfSkuLi5gLFxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICAvLyB0YWtlIGEgc25hcHNob3Qgb2YgdGhlIGN1cnJlbnQgXCJsb2NhbCBwYXJ0aWNpcGFudFwiIHN0YXRlXG4gICAgICAvLyB3ZSdsbCBuZWVkIGl0IGZvciByZXN0b3JpbmcgdGhlIHByZXZpb3VzIHB1Ymxpc2hpbmcgc3RhdGUgbGF0ZXJcbiAgICAgIGNvbnN0IGxvY2FsUGFydGljaXBhbnQgPSB0aGlzLnN0YXRlLmxvY2FsUGFydGljaXBhbnQ7XG5cbiAgICAgIGlmIChzdHJhdGVneSA9PT0gJ2Zhc3QnKSB7XG4gICAgICAgIHNmdUNsaWVudC5jbG9zZShcbiAgICAgICAgICBTdHJlYW1TZnVDbGllbnQuRVJST1JfQ09OTkVDVElPTl9CUk9LRU4sXG4gICAgICAgICAgJ2pzLWNsaWVudDogYXR0ZW1wdGluZyBmYXN0IHJlY29ubmVjdCcsXG4gICAgICAgICk7XG4gICAgICB9IGVsc2UgaWYgKHN0cmF0ZWd5ID09PSAnZnVsbCcpIHtcbiAgICAgICAgLy8gaW4gbWlncmF0aW9uIG9yIHJlY292ZXJ5IHNjZW5hcmlvcywgd2UgZG9uJ3Qgd2FudCB0b1xuICAgICAgICAvLyB3YWl0IGJlZm9yZSBhdHRlbXB0aW5nIHRvIHJlY29ubmVjdCB0byBhbiBTRlUgc2VydmVyXG4gICAgICAgIGF3YWl0IHNsZWVwKHJldHJ5SW50ZXJ2YWwodGhpcy5yZWNvbm5lY3RBdHRlbXB0cykpO1xuXG4gICAgICAgIC8vIGluIGZ1bGwtcmVjb25uZWN0LCB3ZSBuZWVkIHRvIGRpc3Bvc2UgYWxsIFBlZXIgQ29ubmVjdGlvbnNcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVyPy5jbG9zZSgpO1xuICAgICAgICB0aGlzLnN1YnNjcmliZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMucHVibGlzaGVyPy5jbG9zZSh7IHN0b3BUcmFja3M6IGZhbHNlIH0pO1xuICAgICAgICB0aGlzLnB1Ymxpc2hlciA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5zdGF0c1JlcG9ydGVyPy5zdG9wKCk7XG4gICAgICAgIHRoaXMuc3RhdHNSZXBvcnRlciA9IHVuZGVmaW5lZDtcblxuICAgICAgICAvLyBjbGVhbiB1cCBjdXJyZW50IGNvbm5lY3Rpb25cbiAgICAgICAgc2Z1Q2xpZW50LmNsb3NlKFxuICAgICAgICAgIFN0cmVhbVNmdUNsaWVudC5OT1JNQUxfQ0xPU1VSRSxcbiAgICAgICAgICAnanMtY2xpZW50OiBhdHRlbXB0aW5nIGZ1bGwgcmVjb25uZWN0JyxcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGF3YWl0IHRoaXMuam9pbih7XG4gICAgICAgIC4uLmRhdGEsXG4gICAgICAgIC4uLihzdHJhdGVneSA9PT0gJ21pZ3JhdGUnICYmIHsgbWlncmF0aW5nX2Zyb206IHNmdVNlcnZlci5lZGdlX25hbWUgfSksXG4gICAgICB9KTtcblxuICAgICAgLy8gY2xlYW4gdXAgcHJldmlvdXMgY29ubmVjdGlvblxuICAgICAgaWYgKHN0cmF0ZWd5ID09PSAnbWlncmF0ZScpIHtcbiAgICAgICAgc2Z1Q2xpZW50LmNsb3NlKFxuICAgICAgICAgIFN0cmVhbVNmdUNsaWVudC5OT1JNQUxfQ0xPU1VSRSxcbiAgICAgICAgICAnanMtY2xpZW50OiBhdHRlbXB0aW5nIG1pZ3JhdGlvbicsXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMubG9nZ2VyKFxuICAgICAgICAnaW5mbycsXG4gICAgICAgIGBbUmVqb2luXTogQXR0ZW1wdCAke3RoaXMucmVjb25uZWN0QXR0ZW1wdHN9IHN1Y2Nlc3NmdWwhYCxcbiAgICAgICk7XG4gICAgICAvLyB3ZSBzaG91bGRuJ3QgYmUgcmVwdWJsaXNoaW5nIHRoZSBzdHJlYW1zIGlmIHdlJ3JlIG1pZ3JhdGluZ1xuICAgICAgLy8gYXMgdGhlIHVuZGVybHlpbmcgcGVlciBjb25uZWN0aW9uIHdpbGwgdGFrZSBjYXJlIG9mIGl0IGFzIHBhcnRcbiAgICAgIC8vIG9mIHRoZSBpY2UtcmVzdGFydCBwcm9jZXNzXG4gICAgICBpZiAobG9jYWxQYXJ0aWNpcGFudCAmJiBzdHJhdGVneSA9PT0gJ2Z1bGwnKSB7XG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICBhdWRpb1N0cmVhbSxcbiAgICAgICAgICB2aWRlb1N0cmVhbSxcbiAgICAgICAgICBzY3JlZW5TaGFyZVN0cmVhbSxcbiAgICAgICAgICBzY3JlZW5TaGFyZUF1ZGlvU3RyZWFtLFxuICAgICAgICB9ID0gbG9jYWxQYXJ0aWNpcGFudDtcblxuICAgICAgICBsZXQgc2NyZWVuU2hhcmU6IE1lZGlhU3RyZWFtIHwgdW5kZWZpbmVkO1xuICAgICAgICBpZiAoc2NyZWVuU2hhcmVTdHJlYW0gfHwgc2NyZWVuU2hhcmVBdWRpb1N0cmVhbSkge1xuICAgICAgICAgIHNjcmVlblNoYXJlID0gbmV3IE1lZGlhU3RyZWFtKCk7XG4gICAgICAgICAgc2NyZWVuU2hhcmVTdHJlYW0/LmdldFZpZGVvVHJhY2tzKCkuZm9yRWFjaCgodHJhY2spID0+IHtcbiAgICAgICAgICAgIHNjcmVlblNoYXJlPy5hZGRUcmFjayh0cmFjayk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2NyZWVuU2hhcmVBdWRpb1N0cmVhbT8uZ2V0QXVkaW9UcmFja3MoKS5mb3JFYWNoKCh0cmFjaykgPT4ge1xuICAgICAgICAgICAgc2NyZWVuU2hhcmU/LmFkZFRyYWNrKHRyYWNrKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHJlc3RvcmUgcHJldmlvdXMgcHVibGlzaGluZyBzdGF0ZVxuICAgICAgICBpZiAoYXVkaW9TdHJlYW0pIGF3YWl0IHRoaXMucHVibGlzaEF1ZGlvU3RyZWFtKGF1ZGlvU3RyZWFtKTtcbiAgICAgICAgaWYgKHZpZGVvU3RyZWFtKSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5wdWJsaXNoVmlkZW9TdHJlYW0odmlkZW9TdHJlYW0sIHtcbiAgICAgICAgICAgIHByZWZlcnJlZENvZGVjOiB0aGlzLmNhbWVyYS5wcmVmZXJyZWRDb2RlYyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2NyZWVuU2hhcmUpIGF3YWl0IHRoaXMucHVibGlzaFNjcmVlblNoYXJlU3RyZWFtKHNjcmVlblNoYXJlKTtcblxuICAgICAgICB0aGlzLmxvZ2dlcihcbiAgICAgICAgICAnaW5mbycsXG4gICAgICAgICAgYFtSZWpvaW5dOiBTdGF0ZSByZXN0b3JlZC4gQXR0ZW1wdDogJHt0aGlzLnJlY29ubmVjdEF0dGVtcHRzfWAsXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8vIHJlY29ubmVjdCBpZiB0aGUgY29ubmVjdGlvbiB3YXMgY2xvc2VkIHVuZXhwZWN0ZWRseS4gZXhhbXBsZTpcbiAgICAvLyAtIFNGVSBjcmFzaCBvciByZXN0YXJ0XG4gICAgLy8gLSBuZXR3b3JrIGNoYW5nZVxuICAgIHNmdUNsaWVudC5zaWduYWxSZWFkeS50aGVuKCgpID0+IHtcbiAgICAgIC8vIHJlZ2lzdGVyIGEgaGFuZGxlciBmb3IgdGhlIFwiZ29Bd2F5XCIgZXZlbnRcbiAgICAgIGNvbnN0IHVucmVnaXN0ZXJHb0F3YXkgPSB0aGlzLmRpc3BhdGNoZXIub24oJ2dvQXdheScsIChldmVudCkgPT4ge1xuICAgICAgICBjb25zdCB7IHJlYXNvbiB9ID0gZXZlbnQ7XG4gICAgICAgIHRoaXMubG9nZ2VyKFxuICAgICAgICAgICdpbmZvJyxcbiAgICAgICAgICBgW01pZ3JhdGlvbl06IEdvaW5nIGF3YXkgZnJvbSBTRlUuLi4gUmVhc29uOiAke0dvQXdheVJlYXNvbltyZWFzb25dfWAsXG4gICAgICAgICk7XG4gICAgICAgIHJlY29ubmVjdCgnbWlncmF0ZScpLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICB0aGlzLmxvZ2dlcihcbiAgICAgICAgICAgICd3YXJuJyxcbiAgICAgICAgICAgIGBbTWlncmF0aW9uXTogRmFpbGVkIHRvIG1pZ3JhdGUgdG8gYW5vdGhlciBTRlUuYCxcbiAgICAgICAgICAgIGVycixcbiAgICAgICAgICApO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBzZnVDbGllbnQuc2lnbmFsV3MuYWRkRXZlbnRMaXN0ZW5lcignY2xvc2UnLCAoZSkgPT4ge1xuICAgICAgICAvLyB1bnJlZ2lzdGVyIHRoZSBcImdvQXdheVwiIGhhbmRsZXIsIGFzIHdlIHdvbid0IG5lZWQgaXQgYW55bW9yZSBmb3IgdGhpcyBjb25uZWN0aW9uLlxuICAgICAgICAvLyB0aGUgdXBjb21pbmcgcmUtam9pbiB3aWxsIHJlZ2lzdGVyIGEgbmV3IGhhbmRsZXIgYW55d2F5XG4gICAgICAgIHVucmVnaXN0ZXJHb0F3YXkoKTtcbiAgICAgICAgLy8gZG8gbm90aGluZyBpZiB0aGUgY29ubmVjdGlvbiB3YXMgY2xvc2VkIG9uIHB1cnBvc2VcbiAgICAgICAgaWYgKGUuY29kZSA9PT0gU3RyZWFtU2Z1Q2xpZW50Lk5PUk1BTF9DTE9TVVJFKSByZXR1cm47XG4gICAgICAgIC8vIGRvIG5vdGhpbmcgaWYgdGhlIGNvbm5lY3Rpb24gd2FzIGNsb3NlZCBiZWNhdXNlIG9mIGEgcG9saWN5IHZpb2xhdGlvblxuICAgICAgICAvLyBlLmcuLCB0aGUgdXNlciBoYXMgYmVlbiBibG9ja2VkIGJ5IGFuIGFkbWluIG9yIG1vZGVyYXRvclxuICAgICAgICBpZiAoZS5jb2RlID09PSBLbm93bkNvZGVzLldTX1BPTElDWV9WSU9MQVRJT04pIHJldHVybjtcbiAgICAgICAgLy8gV2hlbiB0aGUgU0ZVIGlzIGJlaW5nIHNodXQgZG93biwgaXQgc2VuZHMgYSBnb0F3YXkgbWVzc2FnZS5cbiAgICAgICAgLy8gV2hpbGUgd2UgbWlncmF0ZSB0byBhbm90aGVyIFNGVSwgd2UgbWlnaHQgaGF2ZSB0aGUgV1MgY29ubmVjdGlvblxuICAgICAgICAvLyB0byB0aGUgb2xkIFNGVSBjbG9zZWQgYWJydXB0bHkuIEluIHRoaXMgY2FzZSwgd2UgZG9uJ3Qgd2FudFxuICAgICAgICAvLyB0byByZWNvbm5lY3QgdG8gdGhlIG9sZCBTRlUsIGJ1dCByYXRoZXIgdG8gdGhlIG5ldyBvbmUuXG4gICAgICAgIGNvbnN0IGlzTWlncmF0aW5nQXdheSA9XG4gICAgICAgICAgZS5jb2RlID09PSBLbm93bkNvZGVzLldTX0NMT1NFRF9BQlJVUFRMWSAmJiBzZnVDbGllbnQuaXNNaWdyYXRpbmdBd2F5O1xuICAgICAgICBjb25zdCBpc0Zhc3RSZWNvbm5lY3RpbmcgPVxuICAgICAgICAgIGUuY29kZSA9PT0gS25vd25Db2Rlcy5XU19DTE9TRURfQUJSVVBUTFkgJiZcbiAgICAgICAgICBzZnVDbGllbnQuaXNGYXN0UmVjb25uZWN0aW5nO1xuICAgICAgICBpZiAoaXNNaWdyYXRpbmdBd2F5IHx8IGlzRmFzdFJlY29ubmVjdGluZykgcmV0dXJuO1xuXG4gICAgICAgIC8vIGRvIG5vdGhpbmcgaWYgdGhlIGNvbm5lY3Rpb24gd2FzIGNsb3NlZCBiZWNhdXNlIG9mIGEgZmFzdCByZWNvbm5lY3RcbiAgICAgICAgaWYgKGUuY29kZSA9PT0gU3RyZWFtU2Z1Q2xpZW50LkVSUk9SX0NPTk5FQ1RJT05fQlJPS0VOKSByZXR1cm47XG5cbiAgICAgICAgaWYgKHRoaXMucmVjb25uZWN0QXR0ZW1wdHMgPCB0aGlzLm1heFJlY29ubmVjdEF0dGVtcHRzKSB7XG4gICAgICAgICAgc2Z1Q2xpZW50LmlzRmFzdFJlY29ubmVjdGluZyA9IHRoaXMucmVjb25uZWN0QXR0ZW1wdHMgPT09IDA7XG4gICAgICAgICAgY29uc3Qgc3RyYXRlZ3kgPSBzZnVDbGllbnQuaXNGYXN0UmVjb25uZWN0aW5nID8gJ2Zhc3QnIDogJ2Z1bGwnO1xuICAgICAgICAgIHJlY29ubmVjdChzdHJhdGVneSkuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIoXG4gICAgICAgICAgICAgICdlcnJvcicsXG4gICAgICAgICAgICAgIGBbUmVqb2luXTogJHtzdHJhdGVneX0gcmVqb2luIGZhaWxlZCBmb3IgJHt0aGlzLnJlY29ubmVjdEF0dGVtcHRzfSB0aW1lcy4gR2l2aW5nIHVwLmAsXG4gICAgICAgICAgICAgIGVycixcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB0aGlzLnN0YXRlLnNldENhbGxpbmdTdGF0ZShDYWxsaW5nU3RhdGUuUkVDT05ORUNUSU5HX0ZBSUxFRCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5sb2dnZXIoXG4gICAgICAgICAgICAnZXJyb3InLFxuICAgICAgICAgICAgJ1tSZWpvaW5dOiBSZWNvbm5lY3QgYXR0ZW1wdHMgZXhjZWVkZWQuIEdpdmluZyB1cC4uLicsXG4gICAgICAgICAgKTtcbiAgICAgICAgICB0aGlzLnN0YXRlLnNldENhbGxpbmdTdGF0ZShDYWxsaW5nU3RhdGUuUkVDT05ORUNUSU5HX0ZBSUxFRCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLy8gaGFuZGxlcnMgZm9yIGNvbm5lY3Rpb24gb25saW5lL29mZmxpbmUgZXZlbnRzXG4gICAgY29uc3QgdW5zdWJzY3JpYmVPbmxpbmVFdmVudCA9IHRoaXMuc3RyZWFtQ2xpZW50Lm9uKFxuICAgICAgJ2Nvbm5lY3Rpb24uY2hhbmdlZCcsXG4gICAgICBhc3luYyAoZSkgPT4ge1xuICAgICAgICBpZiAoZS50eXBlICE9PSAnY29ubmVjdGlvbi5jaGFuZ2VkJykgcmV0dXJuO1xuICAgICAgICBpZiAoIWUub25saW5lKSByZXR1cm47XG4gICAgICAgIHVuc3Vic2NyaWJlT25saW5lRXZlbnQoKTtcbiAgICAgICAgY29uc3QgY3VycmVudENhbGxpbmdTdGF0ZSA9IHRoaXMuc3RhdGUuY2FsbGluZ1N0YXRlO1xuICAgICAgICBjb25zdCBzaG91bGRSZWNvbm5lY3QgPVxuICAgICAgICAgIGN1cnJlbnRDYWxsaW5nU3RhdGUgPT09IENhbGxpbmdTdGF0ZS5PRkZMSU5FIHx8XG4gICAgICAgICAgY3VycmVudENhbGxpbmdTdGF0ZSA9PT0gQ2FsbGluZ1N0YXRlLlJFQ09OTkVDVElOR19GQUlMRUQ7XG4gICAgICAgIGlmICghc2hvdWxkUmVjb25uZWN0KSByZXR1cm47XG4gICAgICAgIHRoaXMubG9nZ2VyKCdpbmZvJywgJ1tSZWpvaW5dOiBHb2luZyBvbmxpbmUuLi4nKTtcbiAgICAgICAgbGV0IGlzRmlyc3RSZWNvbm5lY3RBdHRlbXB0ID0gdHJ1ZTtcbiAgICAgICAgZG8ge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBzZnVDbGllbnQuaXNGYXN0UmVjb25uZWN0aW5nID0gaXNGaXJzdFJlY29ubmVjdEF0dGVtcHQ7XG4gICAgICAgICAgICBhd2FpdCByZWNvbm5lY3QoaXNGaXJzdFJlY29ubmVjdEF0dGVtcHQgPyAnZmFzdCcgOiAnZnVsbCcpO1xuICAgICAgICAgICAgcmV0dXJuOyAvLyBicmVhayB0aGUgbG9vcCBpZiByZWpvaW4gaXMgc3VjY2Vzc2Z1bFxuICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIoXG4gICAgICAgICAgICAgICdlcnJvcicsXG4gICAgICAgICAgICAgIGBbUmVqb2luXVtOZXR3b3JrXTogUmVqb2luIGZhaWxlZCBmb3IgYXR0ZW1wdCAke3RoaXMucmVjb25uZWN0QXR0ZW1wdHN9YCxcbiAgICAgICAgICAgICAgZXJyLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gd2FpdCBmb3IgYSBiaXQgYmVmb3JlIHRyeWluZyB0byByZWNvbm5lY3QgYWdhaW5cbiAgICAgICAgICBhd2FpdCBzbGVlcChyZXRyeUludGVydmFsKHRoaXMucmVjb25uZWN0QXR0ZW1wdHMpKTtcbiAgICAgICAgICBpc0ZpcnN0UmVjb25uZWN0QXR0ZW1wdCA9IGZhbHNlO1xuICAgICAgICB9IHdoaWxlICh0aGlzLnJlY29ubmVjdEF0dGVtcHRzIDwgdGhpcy5tYXhSZWNvbm5lY3RBdHRlbXB0cyk7XG5cbiAgICAgICAgLy8gaWYgd2UncmUgaGVyZSwgaXQgbWVhbnMgdGhhdCB3ZSd2ZSBleGhhdXN0ZWQgYWxsIHRoZSByZWNvbm5lY3QgYXR0ZW1wdHNcbiAgICAgICAgdGhpcy5sb2dnZXIoJ2Vycm9yJywgYFtSZWpvaW5dW05ldHdvcmtdOiBSZWpvaW4gZmFpbGVkLiBHaXZpbmcgdXAuYCk7XG4gICAgICAgIHRoaXMuc3RhdGUuc2V0Q2FsbGluZ1N0YXRlKENhbGxpbmdTdGF0ZS5SRUNPTk5FQ1RJTkdfRkFJTEVEKTtcbiAgICAgIH0sXG4gICAgKTtcbiAgICBjb25zdCB1bnN1YnNjcmliZU9mZmxpbmVFdmVudCA9IHRoaXMuc3RyZWFtQ2xpZW50Lm9uKFxuICAgICAgJ2Nvbm5lY3Rpb24uY2hhbmdlZCcsXG4gICAgICAoZSkgPT4ge1xuICAgICAgICBpZiAoZS50eXBlICE9PSAnY29ubmVjdGlvbi5jaGFuZ2VkJykgcmV0dXJuO1xuICAgICAgICBpZiAoZS5vbmxpbmUpIHJldHVybjtcbiAgICAgICAgdW5zdWJzY3JpYmVPZmZsaW5lRXZlbnQoKTtcbiAgICAgICAgdGhpcy5zdGF0ZS5zZXRDYWxsaW5nU3RhdGUoQ2FsbGluZ1N0YXRlLk9GRkxJTkUpO1xuICAgICAgfSxcbiAgICApO1xuXG4gICAgdGhpcy5sZWF2ZUNhbGxIb29rcy5hZGQoKCkgPT4ge1xuICAgICAgdW5zdWJzY3JpYmVPbmxpbmVFdmVudCgpO1xuICAgICAgdW5zdWJzY3JpYmVPZmZsaW5lRXZlbnQoKTtcbiAgICB9KTtcblxuICAgIGlmICghdGhpcy5zdWJzY3JpYmVyKSB7XG4gICAgICB0aGlzLnN1YnNjcmliZXIgPSBuZXcgU3Vic2NyaWJlcih7XG4gICAgICAgIHNmdUNsaWVudCxcbiAgICAgICAgZGlzcGF0Y2hlcjogdGhpcy5kaXNwYXRjaGVyLFxuICAgICAgICBzdGF0ZTogdGhpcy5zdGF0ZSxcbiAgICAgICAgY29ubmVjdGlvbkNvbmZpZyxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IGF1ZGlvU2V0dGluZ3MgPSB0aGlzLnN0YXRlLnNldHRpbmdzPy5hdWRpbztcbiAgICBjb25zdCBpc0R0eEVuYWJsZWQgPSAhIWF1ZGlvU2V0dGluZ3M/Lm9wdXNfZHR4X2VuYWJsZWQ7XG4gICAgY29uc3QgaXNSZWRFbmFibGVkID0gISFhdWRpb1NldHRpbmdzPy5yZWR1bmRhbnRfY29kaW5nX2VuYWJsZWQ7XG5cbiAgICBpZiAoIXRoaXMucHVibGlzaGVyKSB7XG4gICAgICB0aGlzLnB1Ymxpc2hlciA9IG5ldyBQdWJsaXNoZXIoe1xuICAgICAgICBzZnVDbGllbnQsXG4gICAgICAgIGRpc3BhdGNoZXI6IHRoaXMuZGlzcGF0Y2hlcixcbiAgICAgICAgc3RhdGU6IHRoaXMuc3RhdGUsXG4gICAgICAgIGNvbm5lY3Rpb25Db25maWcsXG4gICAgICAgIGlzRHR4RW5hYmxlZCxcbiAgICAgICAgaXNSZWRFbmFibGVkLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLnN0YXRzUmVwb3J0ZXIpIHtcbiAgICAgIHRoaXMuc3RhdHNSZXBvcnRlciA9IGNyZWF0ZVN0YXRzUmVwb3J0ZXIoe1xuICAgICAgICBzdWJzY3JpYmVyOiB0aGlzLnN1YnNjcmliZXIsXG4gICAgICAgIHB1Ymxpc2hlcjogdGhpcy5wdWJsaXNoZXIsXG4gICAgICAgIHN0YXRlOiB0aGlzLnN0YXRlLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIC8vIDEuIHdhaXQgZm9yIHRoZSBzaWduYWwgc2VydmVyIHRvIGJlIHJlYWR5IGJlZm9yZSBzZW5kaW5nIFwiam9pblJlcXVlc3RcIlxuICAgICAgc2Z1Q2xpZW50LnNpZ25hbFJlYWR5XG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiB0aGlzLmxvZ2dlcignZXJyb3InLCAnU2lnbmFsIHJlYWR5IGZhaWxlZCcsIGVycikpXG4gICAgICAgIC8vIHByZXBhcmUgYSBnZW5lcmljIFNEUCBhbmQgc2VuZCBpdCB0byB0aGUgU0ZVLlxuICAgICAgICAvLyB0aGlzIGlzIGEgdGhyb3ctYXdheSBTRFAgdGhhdCB0aGUgU0ZVIHdpbGwgdXNlIHRvIGRldGVybWluZVxuICAgICAgICAvLyB0aGUgY2FwYWJpbGl0aWVzIG9mIHRoZSBjbGllbnQgKGNvZGVjIHN1cHBvcnQsIGV0Yy4pXG4gICAgICAgIC50aGVuKCgpID0+IGdldEdlbmVyaWNTZHAoJ3JlY3Zvbmx5JykpXG4gICAgICAgIC50aGVuKChzZHApID0+IHtcbiAgICAgICAgICBjb25zdCBzdWJzY3JpcHRpb25zID0gZ2V0Q3VycmVudFZhbHVlKHRoaXMudHJhY2tTdWJzY3JpcHRpb25zU3ViamVjdCk7XG4gICAgICAgICAgY29uc3QgbWlncmF0aW9uOiBNaWdyYXRpb24gfCB1bmRlZmluZWQgPSBpc01pZ3JhdGluZ1xuICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgZnJvbVNmdUlkOiBkYXRhPy5taWdyYXRpbmdfZnJvbSB8fCAnJyxcbiAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb25zOiBzdWJzY3JpcHRpb25zLmRhdGEgfHwgW10sXG4gICAgICAgICAgICAgICAgYW5ub3VuY2VkVHJhY2tzOiB0aGlzLnB1Ymxpc2hlcj8uZ2V0Q3VycmVudFRyYWNrSW5mb3MoKSB8fCBbXSxcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG5cbiAgICAgICAgICByZXR1cm4gc2Z1Q2xpZW50LmpvaW4oe1xuICAgICAgICAgICAgc3Vic2NyaWJlclNkcDogc2RwIHx8ICcnLFxuICAgICAgICAgICAgY2xpZW50RGV0YWlsczogZ2V0Q2xpZW50RGV0YWlscygpLFxuICAgICAgICAgICAgbWlncmF0aW9uLFxuICAgICAgICAgICAgZmFzdFJlY29ubmVjdDogcHJldmlvdXNTZnVDbGllbnQ/LmlzRmFzdFJlY29ubmVjdGluZyA/PyBmYWxzZSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgIC8vIDIuIGluIHBhcmFsbGVsLCB3YWl0IGZvciB0aGUgU0ZVIHRvIHNlbmQgdXMgdGhlIFwiam9pblJlc3BvbnNlXCJcbiAgICAgIC8vIHRoaXMgd2lsbCB0aHJvdyBhbiBlcnJvciBpZiB0aGUgU0ZVIHJlamVjdHMgdGhlIGpvaW4gcmVxdWVzdCBvclxuICAgICAgLy8gZmFpbHMgdG8gcmVzcG9uZCBpbiB0aW1lXG4gICAgICBjb25zdCB7IGNhbGxTdGF0ZSwgcmVjb25uZWN0ZWQgfSA9IGF3YWl0IHRoaXMud2FpdEZvckpvaW5SZXNwb25zZSgpO1xuICAgICAgaWYgKGlzUmVjb25uZWN0aW5nKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyKCdkZWJ1ZycsICdbUmVqb2luXSBmYXN0IHJlY29ubmVjdGVkOicsIHJlY29ubmVjdGVkKTtcbiAgICAgIH1cbiAgICAgIGlmIChpc01pZ3JhdGluZykge1xuICAgICAgICBhd2FpdCB0aGlzLnN1YnNjcmliZXIubWlncmF0ZVRvKHNmdUNsaWVudCwgY29ubmVjdGlvbkNvbmZpZyk7XG4gICAgICAgIGF3YWl0IHRoaXMucHVibGlzaGVyLm1pZ3JhdGVUbyhzZnVDbGllbnQsIGNvbm5lY3Rpb25Db25maWcpO1xuICAgICAgfSBlbHNlIGlmIChpc1JlY29ubmVjdGluZykge1xuICAgICAgICBpZiAocmVjb25uZWN0ZWQpIHtcbiAgICAgICAgICAvLyB1cGRhdGUgdGhlIFNGVSBjbGllbnQgaW5zdGFuY2Ugb24gdGhlIHN1YnNjcmliZXIgYW5kIHB1Ymxpc2hlclxuICAgICAgICAgIHRoaXMuc3Vic2NyaWJlci5zZXRTZnVDbGllbnQoc2Z1Q2xpZW50KTtcbiAgICAgICAgICB0aGlzLnB1Ymxpc2hlci5zZXRTZnVDbGllbnQoc2Z1Q2xpZW50KTtcbiAgICAgICAgICAvLyBhbmQgcGVyZm9ybSBhIGZ1bGwgSUNFIHJlc3RhcnQgb24gdGhlIHB1Ymxpc2hlclxuICAgICAgICAgIGF3YWl0IHRoaXMucHVibGlzaGVyLnJlc3RhcnRJY2UoKTtcbiAgICAgICAgfSBlbHNlIGlmIChwcmV2aW91c1NmdUNsaWVudD8uaXNGYXN0UmVjb25uZWN0aW5nKSB7XG4gICAgICAgICAgLy8gcmVjb25uZWN0aW9uIHdhc24ndCBwb3NzaWJsZSwgc28gd2UgbmVlZCB0byBkbyBhIGZ1bGwgcmVqb2luXG4gICAgICAgICAgcmV0dXJuIGF3YWl0IHJlY29ubmVjdCgnZnVsbCcpLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyKFxuICAgICAgICAgICAgICAnZXJyb3InLFxuICAgICAgICAgICAgICBgW1Jlam9pbl06IFJlam9pbiBmYWlsZWQgZm9yY2VkIGZ1bGwgcmVqb2luLmAsXG4gICAgICAgICAgICAgIGVycixcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IGN1cnJlbnRQYXJ0aWNpcGFudHMgPSBjYWxsU3RhdGU/LnBhcnRpY2lwYW50cyB8fCBbXTtcbiAgICAgIGNvbnN0IHBhcnRpY2lwYW50Q291bnQgPSBjYWxsU3RhdGU/LnBhcnRpY2lwYW50Q291bnQ7XG4gICAgICBjb25zdCBzdGFydGVkQXQgPSBjYWxsU3RhdGU/LnN0YXJ0ZWRBdFxuICAgICAgICA/IFRpbWVzdGFtcC50b0RhdGUoY2FsbFN0YXRlLnN0YXJ0ZWRBdClcbiAgICAgICAgOiBuZXcgRGF0ZSgpO1xuICAgICAgY29uc3QgcGlucyA9IGNhbGxTdGF0ZT8ucGlucyA/PyBbXTtcbiAgICAgIHRoaXMuc3RhdGUuc2V0UGFydGljaXBhbnRzKCgpID0+IHtcbiAgICAgICAgY29uc3QgcGFydGljaXBhbnRMb29rdXAgPSB0aGlzLnN0YXRlLmdldFBhcnRpY2lwYW50TG9va3VwQnlTZXNzaW9uSWQoKTtcbiAgICAgICAgcmV0dXJuIGN1cnJlbnRQYXJ0aWNpcGFudHMubWFwPFN0cmVhbVZpZGVvUGFydGljaXBhbnQ+KChwKSA9PiB7XG4gICAgICAgICAgLy8gV2UgbmVlZCB0byBwcmVzZXJ2ZSB0aGUgbG9jYWwgc3RhdGUgb2YgdGhlIHBhcnRpY2lwYW50XG4gICAgICAgICAgLy8gKGUuZy4gdmlkZW9EaW1lbnNpb24sIHZpc2liaWxpdHlTdGF0ZSwgcGlubmVkQXQsIGV0Yy4pXG4gICAgICAgICAgLy8gYXMgaXQgZG9lc24ndCBleGlzdCBvbiB0aGUgc2VydmVyLlxuICAgICAgICAgIGNvbnN0IGV4aXN0aW5nUGFydGljaXBhbnQgPSBwYXJ0aWNpcGFudExvb2t1cFtwLnNlc3Npb25JZF07XG4gICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24ocCwgZXhpc3RpbmdQYXJ0aWNpcGFudCwge1xuICAgICAgICAgICAgaXNMb2NhbFBhcnRpY2lwYW50OiBwLnNlc3Npb25JZCA9PT0gc2Z1Q2xpZW50LnNlc3Npb25JZCxcbiAgICAgICAgICAgIHZpZXdwb3J0VmlzaWJpbGl0eVN0YXRlOlxuICAgICAgICAgICAgICBleGlzdGluZ1BhcnRpY2lwYW50Py52aWV3cG9ydFZpc2liaWxpdHlTdGF0ZSA/PyB7XG4gICAgICAgICAgICAgICAgdmlkZW9UcmFjazogVmlzaWJpbGl0eVN0YXRlLlVOS05PV04sXG4gICAgICAgICAgICAgICAgc2NyZWVuU2hhcmVUcmFjazogVmlzaWJpbGl0eVN0YXRlLlVOS05PV04sXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSBzYXRpc2ZpZXMgUGFydGlhbDxTdHJlYW1WaWRlb1BhcnRpY2lwYW50Pik7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICB0aGlzLnN0YXRlLnNldFBhcnRpY2lwYW50Q291bnQocGFydGljaXBhbnRDb3VudD8udG90YWwgfHwgMCk7XG4gICAgICB0aGlzLnN0YXRlLnNldEFub255bW91c1BhcnRpY2lwYW50Q291bnQocGFydGljaXBhbnRDb3VudD8uYW5vbnltb3VzIHx8IDApO1xuICAgICAgdGhpcy5zdGF0ZS5zZXRTdGFydGVkQXQoc3RhcnRlZEF0KTtcbiAgICAgIHRoaXMuc3RhdGUuc2V0U2VydmVyU2lkZVBpbnMocGlucyk7XG5cbiAgICAgIHRoaXMucmVjb25uZWN0QXR0ZW1wdHMgPSAwOyAvLyByZXNldCB0aGUgcmVjb25uZWN0IGF0dGVtcHRzIGNvdW50ZXJcbiAgICAgIHRoaXMuc3RhdGUuc2V0Q2FsbGluZ1N0YXRlKENhbGxpbmdTdGF0ZS5KT0lORUQpO1xuXG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCB0aGlzLmluaXRDYW1lcmEoeyBzZXRTdGF0dXM6IHRydWUgfSk7XG4gICAgICAgIGF3YWl0IHRoaXMuaW5pdE1pYyh7IHNldFN0YXR1czogdHJ1ZSB9KTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyKFxuICAgICAgICAgICd3YXJuJyxcbiAgICAgICAgICAnQ2FtZXJhIGFuZC9vciBtaWMgaW5pdCBmYWlsZWQgZHVyaW5nIGpvaW4gY2FsbCcsXG4gICAgICAgICAgZXJyb3IsXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIC8vIDMuIG9uY2Ugd2UgaGF2ZSB0aGUgXCJqb2luUmVzcG9uc2VcIiwgYW5kIHBvc3NpYmx5IHJlY29uY2lsZWQgdGhlIGxvY2FsIHN0YXRlXG4gICAgICAvLyB3ZSBzY2hlZHVsZSBhIGZhc3Qgc3Vic2NyaXB0aW9uIHVwZGF0ZSBmb3IgYWxsIHJlbW90ZSBwYXJ0aWNpcGFudHNcbiAgICAgIC8vIHRoYXQgd2VyZSB2aXNpYmxlIGJlZm9yZSB3ZSByZWNvbm5lY3RlZCBvciBtaWdyYXRlZCB0byBhIG5ldyBTRlUuXG4gICAgICBjb25zdCB7IHJlbW90ZVBhcnRpY2lwYW50cyB9ID0gdGhpcy5zdGF0ZTtcbiAgICAgIGlmIChyZW1vdGVQYXJ0aWNpcGFudHMubGVuZ3RoID4gMCkge1xuICAgICAgICB0aGlzLnVwZGF0ZVN1YnNjcmlwdGlvbnMocmVtb3RlUGFydGljaXBhbnRzLCBEZWJvdW5jZVR5cGUuRkFTVCk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMubG9nZ2VyKCdpbmZvJywgYEpvaW5lZCBjYWxsICR7dGhpcy5jaWR9YCk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAvLyBqb2luIGZhaWxlZCwgdHJ5IHRvIHJlam9pblxuICAgICAgaWYgKHRoaXMucmVjb25uZWN0QXR0ZW1wdHMgPCB0aGlzLm1heFJlY29ubmVjdEF0dGVtcHRzKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyKFxuICAgICAgICAgICdlcnJvcicsXG4gICAgICAgICAgYFtSZWpvaW5dOiBSZWpvaW4gJHt0aGlzLnJlY29ubmVjdEF0dGVtcHRzfSBmYWlsZWQuYCxcbiAgICAgICAgICBlcnIsXG4gICAgICAgICk7XG4gICAgICAgIGF3YWl0IHJlY29ubmVjdCgpO1xuICAgICAgICB0aGlzLmxvZ2dlcihcbiAgICAgICAgICAnaW5mbycsXG4gICAgICAgICAgYFtSZWpvaW5dOiBSZWpvaW4gJHt0aGlzLnJlY29ubmVjdEF0dGVtcHRzfSBzdWNjZXNzZnVsIWAsXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmxvZ2dlcihcbiAgICAgICAgICAnZXJyb3InLFxuICAgICAgICAgIGBbUmVqb2luXTogUmVqb2luIGZhaWxlZCBmb3IgJHt0aGlzLnJlY29ubmVjdEF0dGVtcHRzfSB0aW1lcy4gR2l2aW5nIHVwLmAsXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMuc3RhdGUuc2V0Q2FsbGluZ1N0YXRlKENhbGxpbmdTdGF0ZS5SRUNPTk5FQ1RJTkdfRkFJTEVEKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdKb2luIGZhaWxlZCcpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBwcml2YXRlIHdhaXRGb3JKb2luUmVzcG9uc2UgPSAodGltZW91dDogbnVtYmVyID0gNTAwMCkgPT4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZTxKb2luUmVzcG9uc2U+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGNvbnN0IHVuc3Vic2NyaWJlID0gdGhpcy5vbignam9pblJlc3BvbnNlJywgKGV2ZW50KSA9PiB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuICAgICAgICB1bnN1YnNjcmliZSgpO1xuICAgICAgICByZXNvbHZlKGV2ZW50KTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdW5zdWJzY3JpYmUoKTtcbiAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignV2FpdGluZyBmb3IgXCJqb2luUmVzcG9uc2VcIiBoYXMgdGltZWQgb3V0JykpO1xuICAgICAgfSwgdGltZW91dCk7XG4gICAgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFN0YXJ0cyBwdWJsaXNoaW5nIHRoZSBnaXZlbiB2aWRlbyBzdHJlYW0gdG8gdGhlIGNhbGwuXG4gICAqIFRoZSBzdHJlYW0gd2lsbCBiZSBzdG9wcGVkIGlmIHRoZSB1c2VyIGNoYW5nZXMgYW4gaW5wdXQgZGV2aWNlLCBvciBpZiB0aGUgdXNlciBsZWF2ZXMgdGhlIGNhbGwuXG4gICAqXG4gICAqIENvbnNlY3V0aXZlIGNhbGxzIHRvIHRoaXMgbWV0aG9kIHdpbGwgcmVwbGFjZSB0aGUgcHJldmlvdXNseSBwdWJsaXNoZWQgc3RyZWFtLlxuICAgKiBUaGUgcHJldmlvdXMgdmlkZW8gc3RyZWFtIHdpbGwgYmUgc3RvcHBlZC5cbiAgICpcbiAgICogQHBhcmFtIHZpZGVvU3RyZWFtIHRoZSB2aWRlbyBzdHJlYW0gdG8gcHVibGlzaC5cbiAgICogQHBhcmFtIG9wdHMgdGhlIG9wdGlvbnMgdG8gdXNlIHdoZW4gcHVibGlzaGluZyB0aGUgc3RyZWFtLlxuICAgKi9cbiAgcHVibGlzaFZpZGVvU3RyZWFtID0gYXN5bmMgKFxuICAgIHZpZGVvU3RyZWFtOiBNZWRpYVN0cmVhbSxcbiAgICBvcHRzOiBQdWJsaXNoT3B0aW9ucyA9IHt9LFxuICApID0+IHtcbiAgICAvLyB3ZSBzaG91bGQgd2FpdCB1bnRpbCB3ZSBnZXQgYSBKb2luUmVzcG9uc2UgZnJvbSB0aGUgU0ZVLFxuICAgIC8vIG90aGVyd2lzZSB3ZSByaXNrIGJyZWFraW5nIHRoZSBJQ0VUcmlja2xlIGZsb3cuXG4gICAgYXdhaXQgdGhpcy5hc3NlcnRDYWxsSm9pbmVkKCk7XG4gICAgaWYgKCF0aGlzLnB1Ymxpc2hlcikge1xuICAgICAgdGhpcy5sb2dnZXIoJ2Vycm9yJywgJ1RyeWluZyB0byBwdWJsaXNoIHZpZGVvIGJlZm9yZSBqb2luIGlzIGNvbXBsZXRlZCcpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYWxsIG5vdCBqb2luZWQgeWV0LmApO1xuICAgIH1cblxuICAgIGNvbnN0IFt2aWRlb1RyYWNrXSA9IHZpZGVvU3RyZWFtLmdldFZpZGVvVHJhY2tzKCk7XG4gICAgaWYgKCF2aWRlb1RyYWNrKSB7XG4gICAgICB0aGlzLmxvZ2dlcignZXJyb3InLCBgVGhlcmUgaXMgbm8gdmlkZW8gdHJhY2sgdG8gcHVibGlzaCBpbiB0aGUgc3RyZWFtLmApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGF3YWl0IHRoaXMucHVibGlzaGVyLnB1Ymxpc2hTdHJlYW0oXG4gICAgICB2aWRlb1N0cmVhbSxcbiAgICAgIHZpZGVvVHJhY2ssXG4gICAgICBUcmFja1R5cGUuVklERU8sXG4gICAgICBvcHRzLFxuICAgICk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFN0YXJ0cyBwdWJsaXNoaW5nIHRoZSBnaXZlbiBhdWRpbyBzdHJlYW0gdG8gdGhlIGNhbGwuXG4gICAqIFRoZSBzdHJlYW0gd2lsbCBiZSBzdG9wcGVkIGlmIHRoZSB1c2VyIGNoYW5nZXMgYW4gaW5wdXQgZGV2aWNlLCBvciBpZiB0aGUgdXNlciBsZWF2ZXMgdGhlIGNhbGwuXG4gICAqXG4gICAqIENvbnNlY3V0aXZlIGNhbGxzIHRvIHRoaXMgbWV0aG9kIHdpbGwgcmVwbGFjZSB0aGUgYXVkaW8gc3RyZWFtIHRoYXQgaXMgY3VycmVudGx5IGJlaW5nIHB1Ymxpc2hlZC5cbiAgICogVGhlIHByZXZpb3VzIGF1ZGlvIHN0cmVhbSB3aWxsIGJlIHN0b3BwZWQuXG4gICAqXG4gICAqIEBwYXJhbSBhdWRpb1N0cmVhbSB0aGUgYXVkaW8gc3RyZWFtIHRvIHB1Ymxpc2guXG4gICAqL1xuICBwdWJsaXNoQXVkaW9TdHJlYW0gPSBhc3luYyAoYXVkaW9TdHJlYW06IE1lZGlhU3RyZWFtKSA9PiB7XG4gICAgLy8gd2Ugc2hvdWxkIHdhaXQgdW50aWwgd2UgZ2V0IGEgSm9pblJlc3BvbnNlIGZyb20gdGhlIFNGVSxcbiAgICAvLyBvdGhlcndpc2Ugd2UgcmlzayBicmVha2luZyB0aGUgSUNFVHJpY2tsZSBmbG93LlxuICAgIGF3YWl0IHRoaXMuYXNzZXJ0Q2FsbEpvaW5lZCgpO1xuICAgIGlmICghdGhpcy5wdWJsaXNoZXIpIHtcbiAgICAgIHRoaXMubG9nZ2VyKCdlcnJvcicsICdUcnlpbmcgdG8gcHVibGlzaCBhdWRpbyBiZWZvcmUgam9pbiBpcyBjb21wbGV0ZWQnKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQ2FsbCBub3Qgam9pbmVkIHlldC5gKTtcbiAgICB9XG5cbiAgICBjb25zdCBbYXVkaW9UcmFja10gPSBhdWRpb1N0cmVhbS5nZXRBdWRpb1RyYWNrcygpO1xuICAgIGlmICghYXVkaW9UcmFjaykge1xuICAgICAgdGhpcy5sb2dnZXIoJ2Vycm9yJywgYFRoZXJlIGlzIG5vIGF1ZGlvIHRyYWNrIGluIHRoZSBzdHJlYW0gdG8gcHVibGlzaGApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGF3YWl0IHRoaXMucHVibGlzaGVyLnB1Ymxpc2hTdHJlYW0oXG4gICAgICBhdWRpb1N0cmVhbSxcbiAgICAgIGF1ZGlvVHJhY2ssXG4gICAgICBUcmFja1R5cGUuQVVESU8sXG4gICAgKTtcbiAgfTtcblxuICAvKipcbiAgICogU3RhcnRzIHB1Ymxpc2hpbmcgdGhlIGdpdmVuIHNjcmVlbi1zaGFyZSBzdHJlYW0gdG8gdGhlIGNhbGwuXG4gICAqXG4gICAqIENvbnNlY3V0aXZlIGNhbGxzIHRvIHRoaXMgbWV0aG9kIHdpbGwgcmVwbGFjZSB0aGUgcHJldmlvdXMgc2NyZWVuLXNoYXJlIHN0cmVhbS5cbiAgICogVGhlIHByZXZpb3VzIHNjcmVlbi1zaGFyZSBzdHJlYW0gd2lsbCBiZSBzdG9wcGVkLlxuICAgKlxuICAgKiBAcGFyYW0gc2NyZWVuU2hhcmVTdHJlYW0gdGhlIHNjcmVlbi1zaGFyZSBzdHJlYW0gdG8gcHVibGlzaC5cbiAgICogQHBhcmFtIG9wdHMgdGhlIG9wdGlvbnMgdG8gdXNlIHdoZW4gcHVibGlzaGluZyB0aGUgc3RyZWFtLlxuICAgKi9cbiAgcHVibGlzaFNjcmVlblNoYXJlU3RyZWFtID0gYXN5bmMgKFxuICAgIHNjcmVlblNoYXJlU3RyZWFtOiBNZWRpYVN0cmVhbSxcbiAgICBvcHRzOiBQdWJsaXNoT3B0aW9ucyA9IHt9LFxuICApID0+IHtcbiAgICAvLyB3ZSBzaG91bGQgd2FpdCB1bnRpbCB3ZSBnZXQgYSBKb2luUmVzcG9uc2UgZnJvbSB0aGUgU0ZVLFxuICAgIC8vIG90aGVyd2lzZSB3ZSByaXNrIGJyZWFraW5nIHRoZSBJQ0VUcmlja2xlIGZsb3cuXG4gICAgYXdhaXQgdGhpcy5hc3NlcnRDYWxsSm9pbmVkKCk7XG4gICAgaWYgKCF0aGlzLnB1Ymxpc2hlcikge1xuICAgICAgdGhpcy5sb2dnZXIoXG4gICAgICAgICdlcnJvcicsXG4gICAgICAgICdUcnlpbmcgdG8gcHVibGlzaCBzY3JlZW4gc2hhcmUgYmVmb3JlIGpvaW4gaXMgY29tcGxldGVkJyxcbiAgICAgICk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbGwgbm90IGpvaW5lZCB5ZXQuYCk7XG4gICAgfVxuXG4gICAgY29uc3QgW3NjcmVlblNoYXJlVHJhY2tdID0gc2NyZWVuU2hhcmVTdHJlYW0uZ2V0VmlkZW9UcmFja3MoKTtcbiAgICBpZiAoIXNjcmVlblNoYXJlVHJhY2spIHtcbiAgICAgIHRoaXMubG9nZ2VyKFxuICAgICAgICAnZXJyb3InLFxuICAgICAgICBgVGhlcmUgaXMgbm8gdmlkZW8gdHJhY2sgaW4gdGhlIHNjcmVlbiBzaGFyZSBzdHJlYW0gdG8gcHVibGlzaGAsXG4gICAgICApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGF3YWl0IHRoaXMucHVibGlzaGVyLnB1Ymxpc2hTdHJlYW0oXG4gICAgICBzY3JlZW5TaGFyZVN0cmVhbSxcbiAgICAgIHNjcmVlblNoYXJlVHJhY2ssXG4gICAgICBUcmFja1R5cGUuU0NSRUVOX1NIQVJFLFxuICAgICAgb3B0cyxcbiAgICApO1xuXG4gICAgY29uc3QgW3NjcmVlblNoYXJlQXVkaW9UcmFja10gPSBzY3JlZW5TaGFyZVN0cmVhbS5nZXRBdWRpb1RyYWNrcygpO1xuICAgIGlmIChzY3JlZW5TaGFyZUF1ZGlvVHJhY2spIHtcbiAgICAgIGF3YWl0IHRoaXMucHVibGlzaGVyLnB1Ymxpc2hTdHJlYW0oXG4gICAgICAgIHNjcmVlblNoYXJlU3RyZWFtLFxuICAgICAgICBzY3JlZW5TaGFyZUF1ZGlvVHJhY2ssXG4gICAgICAgIFRyYWNrVHlwZS5TQ1JFRU5fU0hBUkVfQVVESU8sXG4gICAgICAgIG9wdHMsXG4gICAgICApO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogU3RvcHMgcHVibGlzaGluZyB0aGUgZ2l2ZW4gdHJhY2sgdHlwZSB0byB0aGUgY2FsbCwgaWYgaXQgaXMgY3VycmVudGx5IGJlaW5nIHB1Ymxpc2hlZC5cbiAgICogVW5kZXJseWluZyB0cmFjayB3aWxsIGJlIHN0b3BwZWQgYW5kIHJlbW92ZWQgZnJvbSB0aGUgcHVibGlzaGVyLlxuICAgKlxuICAgKiBAcGFyYW0gdHJhY2tUeXBlIHRoZSB0cmFjayB0eXBlIHRvIHN0b3AgcHVibGlzaGluZy5cbiAgICogQHBhcmFtIHN0b3BUcmFjayBpZiBgdHJ1ZWAgdGhlIHRyYWNrIHdpbGwgYmUgc3RvcHBlZCwgZWxzZSBpdCB3aWxsIGJlIGp1c3QgZGlzYWJsZWRcbiAgICovXG4gIHN0b3BQdWJsaXNoID0gYXN5bmMgKHRyYWNrVHlwZTogVHJhY2tUeXBlLCBzdG9wVHJhY2s6IGJvb2xlYW4gPSB0cnVlKSA9PiB7XG4gICAgdGhpcy5sb2dnZXIoXG4gICAgICAnaW5mbycsXG4gICAgICBgc3RvcFB1Ymxpc2ggJHtUcmFja1R5cGVbdHJhY2tUeXBlXX0sIHN0b3AgdHJhY2tzOiAke3N0b3BUcmFja31gLFxuICAgICk7XG4gICAgYXdhaXQgdGhpcy5wdWJsaXNoZXI/LnVucHVibGlzaFN0cmVhbSh0cmFja1R5cGUsIHN0b3BUcmFjayk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSB0cmFjayBzdWJzY3JpcHRpb24gY29uZmlndXJhdGlvbiBmb3Igb25lIG9yIG1vcmUgcGFydGljaXBhbnRzLlxuICAgKiBZb3UgaGF2ZSB0byBjcmVhdGUgYSBzdWJzY3JpcHRpb24gZm9yIGVhY2ggcGFydGljaXBhbnQgZm9yIGFsbCB0aGUgZGlmZmVyZW50IGtpbmRzIG9mIHRyYWNrcyB5b3Ugd2FudCB0byByZWNlaXZlLlxuICAgKiBZb3UgY2FuIG9ubHkgc3Vic2NyaWJlIGZvciB0cmFja3MgYWZ0ZXIgdGhlIHBhcnRpY2lwYW50IHN0YXJ0ZWQgcHVibGlzaGluZyB0aGUgZ2l2ZW4ga2luZCBvZiB0cmFjay5cbiAgICpcbiAgICogQHBhcmFtIHRyYWNrVHlwZSB0aGUga2luZCBvZiBzdWJzY3JpcHRpb24gdG8gdXBkYXRlLlxuICAgKiBAcGFyYW0gY2hhbmdlcyB0aGUgbGlzdCBvZiBzdWJzY3JpcHRpb24gY2hhbmdlcyB0byBkby5cbiAgICogQHBhcmFtIHR5cGUgdGhlIGRlYm91bmNlIHR5cGUgdG8gdXNlIGZvciB0aGUgdXBkYXRlLlxuICAgKi9cbiAgdXBkYXRlU3Vic2NyaXB0aW9uc1BhcnRpYWwgPSAoXG4gICAgdHJhY2tUeXBlOiBWaWRlb1RyYWNrVHlwZSB8ICd2aWRlbycgfCAnc2NyZWVuJyxcbiAgICBjaGFuZ2VzOiBTdWJzY3JpcHRpb25DaGFuZ2VzLFxuICAgIHR5cGU6IERlYm91bmNlVHlwZSA9IERlYm91bmNlVHlwZS5TTE9XLFxuICApID0+IHtcbiAgICBpZiAodHJhY2tUeXBlID09PSAndmlkZW8nKSB7XG4gICAgICB0aGlzLmxvZ2dlcihcbiAgICAgICAgJ3dhcm4nLFxuICAgICAgICBgdXBkYXRlU3Vic2NyaXB0aW9uc1BhcnRpYWw6ICR7dHJhY2tUeXBlfSBpcyBkZXByZWNhdGVkLiBQbGVhc2Ugc3dpdGNoIHRvICd2aWRlb1RyYWNrJ2AsXG4gICAgICApO1xuICAgICAgdHJhY2tUeXBlID0gJ3ZpZGVvVHJhY2snO1xuICAgIH0gZWxzZSBpZiAodHJhY2tUeXBlID09PSAnc2NyZWVuJykge1xuICAgICAgdGhpcy5sb2dnZXIoXG4gICAgICAgICd3YXJuJyxcbiAgICAgICAgYHVwZGF0ZVN1YnNjcmlwdGlvbnNQYXJ0aWFsOiAke3RyYWNrVHlwZX0gaXMgZGVwcmVjYXRlZC4gUGxlYXNlIHN3aXRjaCB0byAnc2NyZWVuU2hhcmVUcmFjaydgLFxuICAgICAgKTtcbiAgICAgIHRyYWNrVHlwZSA9ICdzY3JlZW5TaGFyZVRyYWNrJztcbiAgICB9XG5cbiAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSB0aGlzLnN0YXRlLnVwZGF0ZVBhcnRpY2lwYW50cyhcbiAgICAgIE9iamVjdC5lbnRyaWVzKGNoYW5nZXMpLnJlZHVjZTxTdHJlYW1WaWRlb1BhcnRpY2lwYW50UGF0Y2hlcz4oXG4gICAgICAgIChhY2MsIFtzZXNzaW9uSWQsIGNoYW5nZV0pID0+IHtcbiAgICAgICAgICBpZiAoY2hhbmdlLmRpbWVuc2lvbj8uaGVpZ2h0KSB7XG4gICAgICAgICAgICBjaGFuZ2UuZGltZW5zaW9uLmhlaWdodCA9IE1hdGguY2VpbChjaGFuZ2UuZGltZW5zaW9uLmhlaWdodCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChjaGFuZ2UuZGltZW5zaW9uPy53aWR0aCkge1xuICAgICAgICAgICAgY2hhbmdlLmRpbWVuc2lvbi53aWR0aCA9IE1hdGguY2VpbChjaGFuZ2UuZGltZW5zaW9uLndpZHRoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgcHJvcDoga2V5b2YgU3RyZWFtVmlkZW9QYXJ0aWNpcGFudCB8IHVuZGVmaW5lZCA9XG4gICAgICAgICAgICB0cmFja1R5cGUgPT09ICd2aWRlb1RyYWNrJ1xuICAgICAgICAgICAgICA/ICd2aWRlb0RpbWVuc2lvbidcbiAgICAgICAgICAgICAgOiB0cmFja1R5cGUgPT09ICdzY3JlZW5TaGFyZVRyYWNrJ1xuICAgICAgICAgICAgICA/ICdzY3JlZW5TaGFyZURpbWVuc2lvbidcbiAgICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgaWYgKHByb3ApIHtcbiAgICAgICAgICAgIGFjY1tzZXNzaW9uSWRdID0ge1xuICAgICAgICAgICAgICBbcHJvcF06IGNoYW5nZS5kaW1lbnNpb24sXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICB9LFxuICAgICAgICB7fSxcbiAgICAgICksXG4gICAgKTtcblxuICAgIGlmIChwYXJ0aWNpcGFudHMpIHtcbiAgICAgIHRoaXMudXBkYXRlU3Vic2NyaXB0aW9ucyhwYXJ0aWNpcGFudHMsIHR5cGUpO1xuICAgIH1cbiAgfTtcblxuICBwcml2YXRlIHVwZGF0ZVN1YnNjcmlwdGlvbnMgPSAoXG4gICAgcGFydGljaXBhbnRzOiBTdHJlYW1WaWRlb1BhcnRpY2lwYW50W10sXG4gICAgdHlwZTogRGVib3VuY2VUeXBlID0gRGVib3VuY2VUeXBlLlNMT1csXG4gICkgPT4ge1xuICAgIGNvbnN0IHN1YnNjcmlwdGlvbnM6IFRyYWNrU3Vic2NyaXB0aW9uRGV0YWlsc1tdID0gW107XG4gICAgZm9yIChjb25zdCBwIG9mIHBhcnRpY2lwYW50cykge1xuICAgICAgLy8gd2UgZG9uJ3Qgd2FudCB0byBzdWJzY3JpYmUgdG8gb3VyIG93biB0cmFja3NcbiAgICAgIGlmIChwLmlzTG9jYWxQYXJ0aWNpcGFudCkgY29udGludWU7XG5cbiAgICAgIC8vIE5PVEU6IGF1ZGlvIHRyYWNrcyBkb24ndCBoYXZlIHRvIGJlIHJlcXVlc3RlZCBleHBsaWNpdGx5XG4gICAgICAvLyBhcyB0aGUgU0ZVIHdpbGwgaW1wbGljaXRseSBzdWJzY3JpYmUgdXMgdG8gYWxsIG9mIHRoZW0sXG4gICAgICAvLyBvbmNlIHRoZXkgYmVjb21lIGF2YWlsYWJsZS5cblxuICAgICAgaWYgKHAudmlkZW9EaW1lbnNpb24gJiYgcC5wdWJsaXNoZWRUcmFja3MuaW5jbHVkZXMoVHJhY2tUeXBlLlZJREVPKSkge1xuICAgICAgICBzdWJzY3JpcHRpb25zLnB1c2goe1xuICAgICAgICAgIHVzZXJJZDogcC51c2VySWQsXG4gICAgICAgICAgc2Vzc2lvbklkOiBwLnNlc3Npb25JZCxcbiAgICAgICAgICB0cmFja1R5cGU6IFRyYWNrVHlwZS5WSURFTyxcbiAgICAgICAgICBkaW1lbnNpb246IHAudmlkZW9EaW1lbnNpb24sXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKFxuICAgICAgICBwLnNjcmVlblNoYXJlRGltZW5zaW9uICYmXG4gICAgICAgIHAucHVibGlzaGVkVHJhY2tzLmluY2x1ZGVzKFRyYWNrVHlwZS5TQ1JFRU5fU0hBUkUpXG4gICAgICApIHtcbiAgICAgICAgc3Vic2NyaXB0aW9ucy5wdXNoKHtcbiAgICAgICAgICB1c2VySWQ6IHAudXNlcklkLFxuICAgICAgICAgIHNlc3Npb25JZDogcC5zZXNzaW9uSWQsXG4gICAgICAgICAgdHJhY2tUeXBlOiBUcmFja1R5cGUuU0NSRUVOX1NIQVJFLFxuICAgICAgICAgIGRpbWVuc2lvbjogcC5zY3JlZW5TaGFyZURpbWVuc2lvbixcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAocC5wdWJsaXNoZWRUcmFja3MuaW5jbHVkZXMoVHJhY2tUeXBlLlNDUkVFTl9TSEFSRV9BVURJTykpIHtcbiAgICAgICAgc3Vic2NyaXB0aW9ucy5wdXNoKHtcbiAgICAgICAgICB1c2VySWQ6IHAudXNlcklkLFxuICAgICAgICAgIHNlc3Npb25JZDogcC5zZXNzaW9uSWQsXG4gICAgICAgICAgdHJhY2tUeXBlOiBUcmFja1R5cGUuU0NSRUVOX1NIQVJFX0FVRElPLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gc2NoZWR1bGUgdXBkYXRlXG4gICAgdGhpcy50cmFja1N1YnNjcmlwdGlvbnNTdWJqZWN0Lm5leHQoeyB0eXBlLCBkYXRhOiBzdWJzY3JpcHRpb25zIH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBXaWxsIGVuaGFuY2UgdGhlIHJlcG9ydGVkIHN0YXRzIHdpdGggYWRkaXRpb25hbCBwYXJ0aWNpcGFudC1zcGVjaWZpYyBpbmZvcm1hdGlvbiAoYGNhbGxTdGF0c1JlcG9ydCRgIHN0YXRlIFtzdG9yZSB2YXJpYWJsZV0oLi9TdHJlYW1WaWRlb0NsaWVudC5tZC8jcmVhZG9ubHlzdGF0ZXN0b3JlKSkuXG4gICAqIFRoaXMgaXMgdXN1YWxseSBoZWxwZnVsIHdoZW4gZGV0YWlsZWQgc3RhdHMgZm9yIGEgc3BlY2lmaWMgcGFydGljaXBhbnQgYXJlIG5lZWRlZC5cbiAgICpcbiAgICogQHBhcmFtIHNlc3Npb25JZCB0aGUgc2Vzc2lvbklkIHRvIHN0YXJ0IHJlcG9ydGluZyBmb3IuXG4gICAqL1xuICBzdGFydFJlcG9ydGluZ1N0YXRzRm9yID0gKHNlc3Npb25JZDogc3RyaW5nKSA9PiB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdHNSZXBvcnRlcj8uc3RhcnRSZXBvcnRpbmdTdGF0c0ZvcihzZXNzaW9uSWQpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBPcHBvc2l0ZSBvZiBgc3RhcnRSZXBvcnRpbmdTdGF0c0ZvcmAuXG4gICAqIFdpbGwgdHVybiBvZmYgc3RhdHMgcmVwb3J0aW5nIGZvciBhIHNwZWNpZmljIHBhcnRpY2lwYW50LlxuICAgKlxuICAgKiBAcGFyYW0gc2Vzc2lvbklkIHRoZSBzZXNzaW9uSWQgdG8gc3RvcCByZXBvcnRpbmcgZm9yLlxuICAgKi9cbiAgc3RvcFJlcG9ydGluZ1N0YXRzRm9yID0gKHNlc3Npb25JZDogc3RyaW5nKSA9PiB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdHNSZXBvcnRlcj8uc3RvcFJlcG9ydGluZ1N0YXRzRm9yKHNlc3Npb25JZCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlc2V0cyB0aGUgbGFzdCBzZW50IHJlYWN0aW9uIGZvciB0aGUgdXNlciBob2xkaW5nIHRoZSBnaXZlbiBgc2Vzc2lvbklkYC4gVGhpcyBpcyBhIGxvY2FsIGFjdGlvbiwgaXQgd29uJ3QgcmVzZXQgdGhlIHJlYWN0aW9uIG9uIHRoZSBiYWNrZW5kLlxuICAgKlxuICAgKiBAcGFyYW0gc2Vzc2lvbklkIHRoZSBzZXNzaW9uIGlkLlxuICAgKi9cbiAgcmVzZXRSZWFjdGlvbiA9IChzZXNzaW9uSWQ6IHN0cmluZykgPT4ge1xuICAgIHRoaXMuc3RhdGUudXBkYXRlUGFydGljaXBhbnQoc2Vzc2lvbklkLCB7XG4gICAgICByZWFjdGlvbjogdW5kZWZpbmVkLFxuICAgIH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBsaXN0IG9mIGNyaXRlcmlhIHRvIHNvcnQgdGhlIHBhcnRpY2lwYW50cyBieS5cbiAgICpcbiAgICogQHBhcmFtIGNyaXRlcmlhIHRoZSBsaXN0IG9mIGNyaXRlcmlhIHRvIHNvcnQgdGhlIHBhcnRpY2lwYW50cyBieS5cbiAgICovXG4gIHNldFNvcnRQYXJ0aWNpcGFudHNCeTogQ2FsbFN0YXRlWydzZXRTb3J0UGFydGljaXBhbnRzQnknXSA9IChjcml0ZXJpYSkgPT4ge1xuICAgIHJldHVybiB0aGlzLnN0YXRlLnNldFNvcnRQYXJ0aWNpcGFudHNCeShjcml0ZXJpYSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhlIGxpc3Qgb2YgdmlkZW8gbGF5ZXJzIHRvIHB1Ymxpc2guXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKiBAcGFyYW0gZW5hYmxlZExheWVycyB0aGUgbGlzdCBvZiBsYXllcnMgdG8gZW5hYmxlLlxuICAgKi9cbiAgdXBkYXRlUHVibGlzaFF1YWxpdHkgPSBhc3luYyAoZW5hYmxlZExheWVyczogVmlkZW9MYXllclNldHRpbmdbXSkgPT4ge1xuICAgIHJldHVybiB0aGlzLnB1Ymxpc2hlcj8udXBkYXRlVmlkZW9QdWJsaXNoUXVhbGl0eShlbmFibGVkTGF5ZXJzKTtcbiAgfTtcblxuICBwcml2YXRlIGFzc2VydENhbGxKb2luZWQgPSAoKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlKSA9PiB7XG4gICAgICB0aGlzLnN0YXRlLmNhbGxpbmdTdGF0ZSRcbiAgICAgICAgLnBpcGUoXG4gICAgICAgICAgdGFrZVdoaWxlKChzdGF0ZSkgPT4gc3RhdGUgIT09IENhbGxpbmdTdGF0ZS5KT0lORUQsIHRydWUpLFxuICAgICAgICAgIGZpbHRlcigocykgPT4gcyA9PT0gQ2FsbGluZ1N0YXRlLkpPSU5FRCksXG4gICAgICAgIClcbiAgICAgICAgLnN1YnNjcmliZSgoKSA9PiByZXNvbHZlKCkpO1xuICAgIH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZW5kcyBhIHJlYWN0aW9uIHRvIHRoZSBvdGhlciBjYWxsIHBhcnRpY2lwYW50cy5cbiAgICpcbiAgICogQHBhcmFtIHJlYWN0aW9uIHRoZSByZWFjdGlvbiB0byBzZW5kLlxuICAgKi9cbiAgc2VuZFJlYWN0aW9uID0gYXN5bmMgKFxuICAgIHJlYWN0aW9uOiBTZW5kUmVhY3Rpb25SZXF1ZXN0LFxuICApOiBQcm9taXNlPFNlbmRSZWFjdGlvblJlc3BvbnNlPiA9PiB7XG4gICAgcmV0dXJuIHRoaXMuc3RyZWFtQ2xpZW50LnBvc3Q8U2VuZFJlYWN0aW9uUmVzcG9uc2UsIFNlbmRSZWFjdGlvblJlcXVlc3Q+KFxuICAgICAgYCR7dGhpcy5zdHJlYW1DbGllbnRCYXNlUGF0aH0vcmVhY3Rpb25gLFxuICAgICAgcmVhY3Rpb24sXG4gICAgKTtcbiAgfTtcblxuICAvKipcbiAgICogQmxvY2tzIHRoZSB1c2VyIHdpdGggdGhlIGdpdmVuIGB1c2VySWRgLlxuICAgKlxuICAgKiBAcGFyYW0gdXNlcklkIHRoZSBpZCBvZiB0aGUgdXNlciB0byBibG9jay5cbiAgICovXG4gIGJsb2NrVXNlciA9IGFzeW5jICh1c2VySWQ6IHN0cmluZykgPT4ge1xuICAgIHJldHVybiB0aGlzLnN0cmVhbUNsaWVudC5wb3N0PEJsb2NrVXNlclJlc3BvbnNlLCBCbG9ja1VzZXJSZXF1ZXN0PihcbiAgICAgIGAke3RoaXMuc3RyZWFtQ2xpZW50QmFzZVBhdGh9L2Jsb2NrYCxcbiAgICAgIHtcbiAgICAgICAgdXNlcl9pZDogdXNlcklkLFxuICAgICAgfSxcbiAgICApO1xuICB9O1xuXG4gIC8qKlxuICAgKiBVbmJsb2NrcyB0aGUgdXNlciB3aXRoIHRoZSBnaXZlbiBgdXNlcklkYC5cbiAgICpcbiAgICogQHBhcmFtIHVzZXJJZCB0aGUgaWQgb2YgdGhlIHVzZXIgdG8gdW5ibG9jay5cbiAgICovXG4gIHVuYmxvY2tVc2VyID0gYXN5bmMgKHVzZXJJZDogc3RyaW5nKSA9PiB7XG4gICAgcmV0dXJuIHRoaXMuc3RyZWFtQ2xpZW50LnBvc3Q8VW5ibG9ja1VzZXJSZXNwb25zZSwgVW5ibG9ja1VzZXJSZXF1ZXN0PihcbiAgICAgIGAke3RoaXMuc3RyZWFtQ2xpZW50QmFzZVBhdGh9L3VuYmxvY2tgLFxuICAgICAge1xuICAgICAgICB1c2VyX2lkOiB1c2VySWQsXG4gICAgICB9LFxuICAgICk7XG4gIH07XG5cbiAgLyoqXG4gICAqIE11dGVzIHRoZSBjdXJyZW50IHVzZXIuXG4gICAqXG4gICAqIEBwYXJhbSB0eXBlIHRoZSB0eXBlIG9mIHRoZSBtdXRlIG9wZXJhdGlvbi5cbiAgICovXG4gIG11dGVTZWxmID0gKHR5cGU6IFRyYWNrTXV0ZVR5cGUpID0+IHtcbiAgICBjb25zdCBteVVzZXJJZCA9IHRoaXMuY3VycmVudFVzZXJJZDtcbiAgICBpZiAobXlVc2VySWQpIHtcbiAgICAgIHJldHVybiB0aGlzLm11dGVVc2VyKG15VXNlcklkLCB0eXBlKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIE11dGVzIGFsbCB0aGUgb3RoZXIgcGFydGljaXBhbnRzLlxuICAgKlxuICAgKiBAcGFyYW0gdHlwZSB0aGUgdHlwZSBvZiB0aGUgbXV0ZSBvcGVyYXRpb24uXG4gICAqL1xuICBtdXRlT3RoZXJzID0gKHR5cGU6IFRyYWNrTXV0ZVR5cGUpID0+IHtcbiAgICBjb25zdCB0cmFja1R5cGUgPSBtdXRlVHlwZVRvVHJhY2tUeXBlKHR5cGUpO1xuICAgIGlmICghdHJhY2tUeXBlKSByZXR1cm47XG4gICAgY29uc3QgdXNlcklkc1RvTXV0ZTogc3RyaW5nW10gPSBbXTtcbiAgICBmb3IgKGNvbnN0IHBhcnRpY2lwYW50IG9mIHRoaXMuc3RhdGUucmVtb3RlUGFydGljaXBhbnRzKSB7XG4gICAgICBpZiAocGFydGljaXBhbnQucHVibGlzaGVkVHJhY2tzLmluY2x1ZGVzKHRyYWNrVHlwZSkpIHtcbiAgICAgICAgdXNlcklkc1RvTXV0ZS5wdXNoKHBhcnRpY2lwYW50LnVzZXJJZCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMubXV0ZVVzZXIodXNlcklkc1RvTXV0ZSwgdHlwZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIE11dGVzIHRoZSB1c2VyIHdpdGggdGhlIGdpdmVuIGB1c2VySWRgLlxuICAgKlxuICAgKiBAcGFyYW0gdXNlcklkIHRoZSBpZCBvZiB0aGUgdXNlciB0byBtdXRlLlxuICAgKiBAcGFyYW0gdHlwZSB0aGUgdHlwZSBvZiB0aGUgbXV0ZSBvcGVyYXRpb24uXG4gICAqL1xuICBtdXRlVXNlciA9ICh1c2VySWQ6IHN0cmluZyB8IHN0cmluZ1tdLCB0eXBlOiBUcmFja011dGVUeXBlKSA9PiB7XG4gICAgcmV0dXJuIHRoaXMuc3RyZWFtQ2xpZW50LnBvc3Q8TXV0ZVVzZXJzUmVzcG9uc2UsIE11dGVVc2Vyc1JlcXVlc3Q+KFxuICAgICAgYCR7dGhpcy5zdHJlYW1DbGllbnRCYXNlUGF0aH0vbXV0ZV91c2Vyc2AsXG4gICAgICB7XG4gICAgICAgIHVzZXJfaWRzOiBBcnJheS5pc0FycmF5KHVzZXJJZCkgPyB1c2VySWQgOiBbdXNlcklkXSxcbiAgICAgICAgW3R5cGVdOiB0cnVlLFxuICAgICAgfSxcbiAgICApO1xuICB9O1xuXG4gIC8qKlxuICAgKiBXaWxsIG11dGUgYWxsIHVzZXJzIGluIHRoZSBjYWxsLlxuICAgKlxuICAgKiBAcGFyYW0gdHlwZSB0aGUgdHlwZSBvZiB0aGUgbXV0ZSBvcGVyYXRpb24uXG4gICAqL1xuICBtdXRlQWxsVXNlcnMgPSAodHlwZTogVHJhY2tNdXRlVHlwZSkgPT4ge1xuICAgIHJldHVybiB0aGlzLnN0cmVhbUNsaWVudC5wb3N0PE11dGVVc2Vyc1Jlc3BvbnNlLCBNdXRlVXNlcnNSZXF1ZXN0PihcbiAgICAgIGAke3RoaXMuc3RyZWFtQ2xpZW50QmFzZVBhdGh9L211dGVfdXNlcnNgLFxuICAgICAge1xuICAgICAgICBtdXRlX2FsbF91c2VyczogdHJ1ZSxcbiAgICAgICAgW3R5cGVdOiB0cnVlLFxuICAgICAgfSxcbiAgICApO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTdGFydHMgcmVjb3JkaW5nIHRoZSBjYWxsXG4gICAqL1xuICBzdGFydFJlY29yZGluZyA9IGFzeW5jIChyZXF1ZXN0PzogU3RhcnRSZWNvcmRpbmdSZXF1ZXN0KSA9PiB7XG4gICAgcmV0dXJuIHRoaXMuc3RyZWFtQ2xpZW50LnBvc3Q8XG4gICAgICBTdGFydFJlY29yZGluZ1Jlc3BvbnNlLFxuICAgICAgU3RhcnRSZWNvcmRpbmdSZXF1ZXN0XG4gICAgPihgJHt0aGlzLnN0cmVhbUNsaWVudEJhc2VQYXRofS9zdGFydF9yZWNvcmRpbmdgLCByZXF1ZXN0ID8gcmVxdWVzdCA6IHt9KTtcbiAgfTtcblxuICAvKipcbiAgICogU3RvcHMgcmVjb3JkaW5nIHRoZSBjYWxsXG4gICAqL1xuICBzdG9wUmVjb3JkaW5nID0gYXN5bmMgKCkgPT4ge1xuICAgIHJldHVybiB0aGlzLnN0cmVhbUNsaWVudC5wb3N0PFN0b3BSZWNvcmRpbmdSZXNwb25zZT4oXG4gICAgICBgJHt0aGlzLnN0cmVhbUNsaWVudEJhc2VQYXRofS9zdG9wX3JlY29yZGluZ2AsXG4gICAgICB7fSxcbiAgICApO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZW5kcyBhIGBjYWxsLnBlcm1pc3Npb25fcmVxdWVzdGAgZXZlbnQgdG8gYWxsIHVzZXJzIGNvbm5lY3RlZCB0byB0aGUgY2FsbC4gVGhlIGNhbGwgc2V0dGluZ3Mgb2JqZWN0IGNvbnRhaW5zIGluZm9tcmF0aW9uIGFib3V0IHdoaWNoIHBlcm1pc3Npb25zIGNhbiBiZSByZXF1ZXN0ZWQgZHVyaW5nIGEgY2FsbCAoZm9yIGV4YW1wbGUgYSB1c2VyIG1pZ2h0IGJlIGFsbG93ZWQgdG8gcmVxdWVzdCBwZXJtaXNzaW9uIHRvIHB1Ymxpc2ggYXVkaW8sIGJ1dCBub3QgdmlkZW8pLlxuICAgKi9cbiAgcmVxdWVzdFBlcm1pc3Npb25zID0gYXN5bmMgKFxuICAgIGRhdGE6IFJlcXVlc3RQZXJtaXNzaW9uUmVxdWVzdCxcbiAgKTogUHJvbWlzZTxSZXF1ZXN0UGVybWlzc2lvblJlc3BvbnNlPiA9PiB7XG4gICAgY29uc3QgeyBwZXJtaXNzaW9ucyB9ID0gZGF0YTtcbiAgICBjb25zdCBjYW5SZXF1ZXN0UGVybWlzc2lvbnMgPSBwZXJtaXNzaW9ucy5ldmVyeSgocGVybWlzc2lvbikgPT5cbiAgICAgIHRoaXMucGVybWlzc2lvbnNDb250ZXh0LmNhblJlcXVlc3QocGVybWlzc2lvbiBhcyBPd25DYXBhYmlsaXR5KSxcbiAgICApO1xuICAgIGlmICghY2FuUmVxdWVzdFBlcm1pc3Npb25zKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBZb3UgYXJlIG5vdCBhbGxvd2VkIHRvIHJlcXVlc3QgcGVybWlzc2lvbnM6ICR7cGVybWlzc2lvbnMuam9pbignLCAnKX1gLFxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc3RyZWFtQ2xpZW50LnBvc3Q8XG4gICAgICBSZXF1ZXN0UGVybWlzc2lvblJlc3BvbnNlLFxuICAgICAgUmVxdWVzdFBlcm1pc3Npb25SZXF1ZXN0XG4gICAgPihgJHt0aGlzLnN0cmVhbUNsaWVudEJhc2VQYXRofS9yZXF1ZXN0X3Blcm1pc3Npb25gLCBkYXRhKTtcbiAgfTtcblxuICAvKipcbiAgICogQWxsb3dzIHlvdSB0byBncmFudCBjZXJ0YWluIHBlcm1pc3Npb25zIHRvIGEgdXNlciBpbiBhIGNhbGwuXG4gICAqIFRoZSBwZXJtaXNzaW9ucyBhcmUgc3BlY2lmaWMgdG8gdGhlIGNhbGwgZXhwZXJpZW5jZSBhbmQgZG8gbm90IHN1cnZpdmUgdGhlIGNhbGwgaXRzZWxmLlxuICAgKlxuICAgKiBTdXBwb3J0ZWQgcGVybWlzc2lvbnMgdGhhdCBjYW4gYmUgZ3JhbnRlZCBhcmU6XG4gICAqIC0gYHNlbmQtYXVkaW9gXG4gICAqIC0gYHNlbmQtdmlkZW9gXG4gICAqIC0gYHNjcmVlbnNoYXJlYFxuICAgKlxuICAgKiBAcGFyYW0gdXNlcklkIHRoZSBpZCBvZiB0aGUgdXNlciB0byBncmFudCBwZXJtaXNzaW9ucyB0by5cbiAgICogQHBhcmFtIHBlcm1pc3Npb25zIHRoZSBwZXJtaXNzaW9ucyB0byBncmFudC5cbiAgICovXG4gIGdyYW50UGVybWlzc2lvbnMgPSBhc3luYyAodXNlcklkOiBzdHJpbmcsIHBlcm1pc3Npb25zOiBzdHJpbmdbXSkgPT4ge1xuICAgIHJldHVybiB0aGlzLnVwZGF0ZVVzZXJQZXJtaXNzaW9ucyh7XG4gICAgICB1c2VyX2lkOiB1c2VySWQsXG4gICAgICBncmFudF9wZXJtaXNzaW9uczogcGVybWlzc2lvbnMsXG4gICAgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEFsbG93cyB5b3UgdG8gcmV2b2tlIGNlcnRhaW4gcGVybWlzc2lvbnMgZnJvbSBhIHVzZXIgaW4gYSBjYWxsLlxuICAgKiBUaGUgcGVybWlzc2lvbnMgYXJlIHNwZWNpZmljIHRvIHRoZSBjYWxsIGV4cGVyaWVuY2UgYW5kIGRvIG5vdCBzdXJ2aXZlIHRoZSBjYWxsIGl0c2VsZi5cbiAgICpcbiAgICogU3VwcG9ydGVkIHBlcm1pc3Npb25zIHRoYXQgY2FuIGJlIHJldm9rZWQgYXJlOlxuICAgKiAtIGBzZW5kLWF1ZGlvYFxuICAgKiAtIGBzZW5kLXZpZGVvYFxuICAgKiAtIGBzY3JlZW5zaGFyZWBcbiAgICpcbiAgICogQHBhcmFtIHVzZXJJZCB0aGUgaWQgb2YgdGhlIHVzZXIgdG8gcmV2b2tlIHBlcm1pc3Npb25zIGZyb20uXG4gICAqIEBwYXJhbSBwZXJtaXNzaW9ucyB0aGUgcGVybWlzc2lvbnMgdG8gcmV2b2tlLlxuICAgKi9cbiAgcmV2b2tlUGVybWlzc2lvbnMgPSBhc3luYyAodXNlcklkOiBzdHJpbmcsIHBlcm1pc3Npb25zOiBzdHJpbmdbXSkgPT4ge1xuICAgIHJldHVybiB0aGlzLnVwZGF0ZVVzZXJQZXJtaXNzaW9ucyh7XG4gICAgICB1c2VyX2lkOiB1c2VySWQsXG4gICAgICByZXZva2VfcGVybWlzc2lvbnM6IHBlcm1pc3Npb25zLFxuICAgIH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBbGxvd3MgeW91IHRvIGdyYW50IG9yIHJldm9rZSBhIHNwZWNpZmljIHBlcm1pc3Npb24gdG8gYSB1c2VyIGluIGEgY2FsbC4gVGhlIHBlcm1pc3Npb25zIGFyZSBzcGVjaWZpYyB0byB0aGUgY2FsbCBleHBlcmllbmNlIGFuZCBkbyBub3Qgc3Vydml2ZSB0aGUgY2FsbCBpdHNlbGYuXG4gICAqXG4gICAqIFdoZW4gcmV2b2tpbmcgYSBwZXJtaXNzaW9uLCB0aGlzIGVuZHBvaW50IHdpbGwgYWxzbyBtdXRlIHRoZSByZWxldmFudCB0cmFjayBmcm9tIHRoZSB1c2VyLiBUaGlzIGlzIHNpbWlsYXIgdG8gbXV0aW5nIGEgdXNlciB3aXRoIHRoZSBkaWZmZXJlbmNlIHRoYXQgdGhlIHVzZXIgd2lsbCBub3QgYmUgYWJsZSB0byB1bm11dGUgYWZ0ZXJ3YXJkcy5cbiAgICpcbiAgICogU3VwcG9ydGVkIHBlcm1pc3Npb25zIHRoYXQgY2FuIGJlIGdyYW50ZWQgb3IgcmV2b2tlZDogYHNlbmQtYXVkaW9gLCBgc2VuZC12aWRlb2AgYW5kIGBzY3JlZW5zaGFyZWAuXG4gICAqXG4gICAqIGBjYWxsLnBlcm1pc3Npb25zX3VwZGF0ZWRgIGV2ZW50IGlzIHNlbnQgdG8gYWxsIG1lbWJlcnMgb2YgdGhlIGNhbGwuXG4gICAqXG4gICAqL1xuICB1cGRhdGVVc2VyUGVybWlzc2lvbnMgPSBhc3luYyAoZGF0YTogVXBkYXRlVXNlclBlcm1pc3Npb25zUmVxdWVzdCkgPT4ge1xuICAgIHJldHVybiB0aGlzLnN0cmVhbUNsaWVudC5wb3N0PFxuICAgICAgVXBkYXRlVXNlclBlcm1pc3Npb25zUmVzcG9uc2UsXG4gICAgICBVcGRhdGVVc2VyUGVybWlzc2lvbnNSZXF1ZXN0XG4gICAgPihgJHt0aGlzLnN0cmVhbUNsaWVudEJhc2VQYXRofS91c2VyX3Blcm1pc3Npb25zYCwgZGF0YSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFN0YXJ0cyB0aGUgbGl2ZXN0cmVhbWluZyBvZiB0aGUgY2FsbC5cbiAgICpcbiAgICogQHBhcmFtIGRhdGEgdGhlIHJlcXVlc3QgZGF0YS5cbiAgICogQHBhcmFtIHBhcmFtcyB0aGUgcmVxdWVzdCBwYXJhbXMuXG4gICAqL1xuICBnb0xpdmUgPSBhc3luYyAoZGF0YTogR29MaXZlUmVxdWVzdCA9IHt9LCBwYXJhbXM/OiB7IG5vdGlmeT86IGJvb2xlYW4gfSkgPT4ge1xuICAgIHJldHVybiB0aGlzLnN0cmVhbUNsaWVudC5wb3N0PEdvTGl2ZVJlc3BvbnNlLCBHb0xpdmVSZXF1ZXN0PihcbiAgICAgIGAke3RoaXMuc3RyZWFtQ2xpZW50QmFzZVBhdGh9L2dvX2xpdmVgLFxuICAgICAgZGF0YSxcbiAgICAgIHBhcmFtcyxcbiAgICApO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTdG9wcyB0aGUgbGl2ZXN0cmVhbWluZyBvZiB0aGUgY2FsbC5cbiAgICovXG4gIHN0b3BMaXZlID0gYXN5bmMgKCkgPT4ge1xuICAgIHJldHVybiB0aGlzLnN0cmVhbUNsaWVudC5wb3N0PFN0b3BMaXZlUmVzcG9uc2U+KFxuICAgICAgYCR7dGhpcy5zdHJlYW1DbGllbnRCYXNlUGF0aH0vc3RvcF9saXZlYCxcbiAgICAgIHt9LFxuICAgICk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFN0YXJ0cyB0aGUgYnJvYWRjYXN0aW5nIG9mIHRoZSBjYWxsLlxuICAgKi9cbiAgc3RhcnRITFMgPSBhc3luYyAoKSA9PiB7XG4gICAgcmV0dXJuIHRoaXMuc3RyZWFtQ2xpZW50LnBvc3Q8U3RhcnRITFNCcm9hZGNhc3RpbmdSZXNwb25zZT4oXG4gICAgICBgJHt0aGlzLnN0cmVhbUNsaWVudEJhc2VQYXRofS9zdGFydF9icm9hZGNhc3RpbmdgLFxuICAgICAge30sXG4gICAgKTtcbiAgfTtcblxuICAvKipcbiAgICogU3RvcHMgdGhlIGJyb2FkY2FzdGluZyBvZiB0aGUgY2FsbC5cbiAgICovXG4gIHN0b3BITFMgPSBhc3luYyAoKSA9PiB7XG4gICAgcmV0dXJuIHRoaXMuc3RyZWFtQ2xpZW50LnBvc3Q8U3RvcEhMU0Jyb2FkY2FzdGluZ1Jlc3BvbnNlPihcbiAgICAgIGAke3RoaXMuc3RyZWFtQ2xpZW50QmFzZVBhdGh9L3N0b3BfYnJvYWRjYXN0aW5nYCxcbiAgICAgIHt9LFxuICAgICk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhlIGNhbGwgc2V0dGluZ3Mgb3IgY3VzdG9tIGRhdGEuXG4gICAqXG4gICAqIEBwYXJhbSB1cGRhdGVzIHRoZSB1cGRhdGVzIHRvIGFwcGx5IHRvIHRoZSBjYWxsLlxuICAgKi9cbiAgdXBkYXRlID0gYXN5bmMgKHVwZGF0ZXM6IFVwZGF0ZUNhbGxSZXF1ZXN0KSA9PiB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnN0cmVhbUNsaWVudC5wYXRjaDxcbiAgICAgIFVwZGF0ZUNhbGxSZXNwb25zZSxcbiAgICAgIFVwZGF0ZUNhbGxSZXF1ZXN0XG4gICAgPihgJHt0aGlzLnN0cmVhbUNsaWVudEJhc2VQYXRofWAsIHVwZGF0ZXMpO1xuXG4gICAgY29uc3QgeyBjYWxsLCBtZW1iZXJzLCBvd25fY2FwYWJpbGl0aWVzIH0gPSByZXNwb25zZTtcbiAgICB0aGlzLnN0YXRlLnVwZGF0ZUZyb21DYWxsUmVzcG9uc2UoY2FsbCk7XG4gICAgdGhpcy5zdGF0ZS5zZXRNZW1iZXJzKG1lbWJlcnMpO1xuICAgIHRoaXMuc3RhdGUuc2V0T3duQ2FwYWJpbGl0aWVzKG93bl9jYXBhYmlsaXRpZXMpO1xuXG4gICAgcmV0dXJuIHJlc3BvbnNlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBFbmRzIHRoZSBjYWxsLiBPbmNlIHRoZSBjYWxsIGlzIGVuZGVkLCBpdCBjYW5ub3QgYmUgcmUtam9pbmVkLlxuICAgKi9cbiAgZW5kQ2FsbCA9IGFzeW5jICgpID0+IHtcbiAgICByZXR1cm4gdGhpcy5zdHJlYW1DbGllbnQucG9zdDxFbmRDYWxsUmVzcG9uc2U+KFxuICAgICAgYCR7dGhpcy5zdHJlYW1DbGllbnRCYXNlUGF0aH0vbWFya19lbmRlZGAsXG4gICAgKTtcbiAgfTtcblxuICAvKipcbiAgICogUGlucyB0aGUgZ2l2ZW4gc2Vzc2lvbiB0byB0aGUgdG9wIG9mIHRoZSBwYXJ0aWNpcGFudHMgbGlzdC5cbiAgICpcbiAgICogQHBhcmFtIHNlc3Npb25JZCB0aGUgc2Vzc2lvbklkIHRvIHBpbi5cbiAgICovXG4gIHBpbiA9IChzZXNzaW9uSWQ6IHN0cmluZykgPT4ge1xuICAgIHRoaXMuc3RhdGUudXBkYXRlUGFydGljaXBhbnQoc2Vzc2lvbklkLCB7XG4gICAgICBwaW46IHtcbiAgICAgICAgaXNMb2NhbFBpbjogdHJ1ZSxcbiAgICAgICAgcGlubmVkQXQ6IERhdGUubm93KCksXG4gICAgICB9LFxuICAgIH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBVbnBpbnMgdGhlIGdpdmVuIHNlc3Npb24gZnJvbSB0aGUgdG9wIG9mIHRoZSBwYXJ0aWNpcGFudHMgbGlzdC5cbiAgICpcbiAgICogQHBhcmFtIHNlc3Npb25JZCB0aGUgc2Vzc2lvbklkIHRvIHVucGluLlxuICAgKi9cbiAgdW5waW4gPSAoc2Vzc2lvbklkOiBzdHJpbmcpID0+IHtcbiAgICB0aGlzLnN0YXRlLnVwZGF0ZVBhcnRpY2lwYW50KHNlc3Npb25JZCwge1xuICAgICAgcGluOiB1bmRlZmluZWQsXG4gICAgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFBpbnMgdGhlIGdpdmVuIHNlc3Npb24gdG8gdGhlIHRvcCBvZiB0aGUgcGFydGljaXBhbnRzIGxpc3QgZm9yIGV2ZXJ5b25lXG4gICAqIGluIHRoZSBjYWxsLlxuICAgKiBZb3UgY2FuIGV4ZWN1dGUgdGhpcyBtZXRob2Qgb25seSBpZiB5b3UgaGF2ZSB0aGUgYHBpbi1mb3ItZXZlcnlvbmVgIGNhcGFiaWxpdHkuXG4gICAqXG4gICAqIEBwYXJhbSByZXF1ZXN0IHRoZSByZXF1ZXN0IG9iamVjdC5cbiAgICovXG4gIHBpbkZvckV2ZXJ5b25lID0gYXN5bmMgKHJlcXVlc3Q6IFBpblJlcXVlc3QpID0+IHtcbiAgICByZXR1cm4gdGhpcy5zdHJlYW1DbGllbnQucG9zdDxQaW5SZXNwb25zZSwgUGluUmVxdWVzdD4oXG4gICAgICBgJHt0aGlzLnN0cmVhbUNsaWVudEJhc2VQYXRofS9waW5gLFxuICAgICAgcmVxdWVzdCxcbiAgICApO1xuICB9O1xuXG4gIC8qKlxuICAgKiBVbnBpbnMgdGhlIGdpdmVuIHNlc3Npb24gZnJvbSB0aGUgdG9wIG9mIHRoZSBwYXJ0aWNpcGFudHMgbGlzdCBmb3IgZXZlcnlvbmVcbiAgICogaW4gdGhlIGNhbGwuXG4gICAqIFlvdSBjYW4gZXhlY3V0ZSB0aGlzIG1ldGhvZCBvbmx5IGlmIHlvdSBoYXZlIHRoZSBgcGluLWZvci1ldmVyeW9uZWAgY2FwYWJpbGl0eS5cbiAgICpcbiAgICogQHBhcmFtIHJlcXVlc3QgdGhlIHJlcXVlc3Qgb2JqZWN0LlxuICAgKi9cbiAgdW5waW5Gb3JFdmVyeW9uZSA9IGFzeW5jIChyZXF1ZXN0OiBVbnBpblJlcXVlc3QpID0+IHtcbiAgICByZXR1cm4gdGhpcy5zdHJlYW1DbGllbnQucG9zdDxVbnBpblJlc3BvbnNlLCBVbnBpblJlcXVlc3Q+KFxuICAgICAgYCR7dGhpcy5zdHJlYW1DbGllbnRCYXNlUGF0aH0vdW5waW5gLFxuICAgICAgcmVxdWVzdCxcbiAgICApO1xuICB9O1xuXG4gIC8qKlxuICAgKiBRdWVyeSBjYWxsIG1lbWJlcnMgd2l0aCBmaWx0ZXIgcXVlcnkuIFRoZSByZXN1bHQgd29uJ3QgYmUgc3RvcmVkIGluIGNhbGwgc3RhdGUuXG4gICAqIEBwYXJhbSByZXF1ZXN0XG4gICAqIEByZXR1cm5zXG4gICAqL1xuICBxdWVyeU1lbWJlcnMgPSAocmVxdWVzdD86IE9taXQ8UXVlcnlNZW1iZXJzUmVxdWVzdCwgJ3R5cGUnIHwgJ2lkJz4pID0+IHtcbiAgICByZXR1cm4gdGhpcy5zdHJlYW1DbGllbnQucG9zdDxRdWVyeU1lbWJlcnNSZXNwb25zZSwgUXVlcnlNZW1iZXJzUmVxdWVzdD4oXG4gICAgICAnL2NhbGwvbWVtYmVycycsXG4gICAgICB7XG4gICAgICAgIC4uLihyZXF1ZXN0IHx8IHt9KSxcbiAgICAgICAgaWQ6IHRoaXMuaWQsXG4gICAgICAgIHR5cGU6IHRoaXMudHlwZSxcbiAgICAgIH0sXG4gICAgKTtcbiAgfTtcblxuICAvKipcbiAgICogV2lsbCB1cGRhdGUgdGhlIGNhbGwgbWVtYmVycy5cbiAgICpcbiAgICogQHBhcmFtIGRhdGEgdGhlIHJlcXVlc3QgZGF0YS5cbiAgICovXG4gIHVwZGF0ZUNhbGxNZW1iZXJzID0gYXN5bmMgKFxuICAgIGRhdGE6IFVwZGF0ZUNhbGxNZW1iZXJzUmVxdWVzdCxcbiAgKTogUHJvbWlzZTxVcGRhdGVDYWxsTWVtYmVyc1Jlc3BvbnNlPiA9PiB7XG4gICAgcmV0dXJuIHRoaXMuc3RyZWFtQ2xpZW50LnBvc3Q8XG4gICAgICBVcGRhdGVDYWxsTWVtYmVyc1Jlc3BvbnNlLFxuICAgICAgVXBkYXRlQ2FsbE1lbWJlcnNSZXF1ZXN0XG4gICAgPihgJHt0aGlzLnN0cmVhbUNsaWVudEJhc2VQYXRofS9tZW1iZXJzYCwgZGF0YSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNjaGVkdWxlcyBhbiBhdXRvLWRyb3AgdGltZW91dCBiYXNlZCBvbiB0aGUgY2FsbCBzZXR0aW5ncy5cbiAgICogQXBwbGljYWJsZSBvbmx5IGZvciByaW5naW5nIGNhbGxzLlxuICAgKi9cbiAgcHJpdmF0ZSBzY2hlZHVsZUF1dG9Ecm9wID0gKCkgPT4ge1xuICAgIGNsZWFyVGltZW91dCh0aGlzLmRyb3BUaW1lb3V0KTtcbiAgICB0aGlzLmxlYXZlQ2FsbEhvb2tzLmFkZChcbiAgICAgIGNyZWF0ZVN1YnNjcmlwdGlvbih0aGlzLnN0YXRlLnNldHRpbmdzJCwgKHNldHRpbmdzKSA9PiB7XG4gICAgICAgIGlmICghc2V0dGluZ3MpIHJldHVybjtcbiAgICAgICAgLy8gaWdub3JlIGlmIHRoZSBjYWxsIGlzIG5vdCByaW5naW5nXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmNhbGxpbmdTdGF0ZSAhPT0gQ2FsbGluZ1N0YXRlLlJJTkdJTkcpIHJldHVybjtcblxuICAgICAgICBjb25zdCB0aW1lb3V0SW5NcyA9IHNldHRpbmdzLnJpbmcuYXV0b19jYW5jZWxfdGltZW91dF9tcztcbiAgICAgICAgLy8gMCBtZWFucyBubyBhdXRvLWRyb3BcbiAgICAgICAgaWYgKHRpbWVvdXRJbk1zIDw9IDApIHJldHVybjtcblxuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5kcm9wVGltZW91dCk7XG4gICAgICAgIHRoaXMuZHJvcFRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICB0aGlzLmxlYXZlKCkuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIoJ2Vycm9yJywgJ0ZhaWxlZCB0byBkcm9wIGNhbGwnLCBlcnIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9LCB0aW1lb3V0SW5Ncyk7XG4gICAgICB9KSxcbiAgICApO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZXMgdGhlIGxpc3Qgb2YgcmVjb3JkaW5ncyBmb3IgdGhlIGN1cnJlbnQgY2FsbCBvciBjYWxsIHNlc3Npb24uXG4gICAqXG4gICAqIElmIGBjYWxsU2Vzc2lvbklkYCBpcyBwcm92aWRlZCwgaXQgd2lsbCByZXR1cm4gdGhlIHJlY29yZGluZ3MgZm9yIHRoYXQgY2FsbCBzZXNzaW9uLlxuICAgKiBPdGhlcndpc2UsIGFsbCByZWNvcmRpbmdzIGZvciB0aGUgY3VycmVudCBjYWxsIHdpbGwgYmUgcmV0dXJuZWQuXG4gICAqXG4gICAqIEBwYXJhbSBjYWxsU2Vzc2lvbklkIHRoZSBjYWxsIHNlc3Npb24gaWQgdG8gcmV0cmlldmUgcmVjb3JkaW5ncyBmb3IuXG4gICAqL1xuICBxdWVyeVJlY29yZGluZ3MgPSBhc3luYyAoXG4gICAgY2FsbFNlc3Npb25JZD86IHN0cmluZyxcbiAgKTogUHJvbWlzZTxMaXN0UmVjb3JkaW5nc1Jlc3BvbnNlPiA9PiB7XG4gICAgbGV0IGVuZHBvaW50ID0gdGhpcy5zdHJlYW1DbGllbnRCYXNlUGF0aDtcbiAgICBpZiAoY2FsbFNlc3Npb25JZCkge1xuICAgICAgZW5kcG9pbnQgPSBgJHtlbmRwb2ludH0vJHtjYWxsU2Vzc2lvbklkfWA7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnN0cmVhbUNsaWVudC5nZXQ8TGlzdFJlY29yZGluZ3NSZXNwb25zZT4oXG4gICAgICBgJHtlbmRwb2ludH0vcmVjb3JkaW5nc2AsXG4gICAgKTtcbiAgfTtcblxuICAvKipcbiAgICogU2VuZHMgYSBjdXN0b20gZXZlbnQgdG8gYWxsIGNhbGwgcGFydGljaXBhbnRzLlxuICAgKlxuICAgKiBAcGFyYW0gcGF5bG9hZCB0aGUgcGF5bG9hZCB0byBzZW5kLlxuICAgKi9cbiAgc2VuZEN1c3RvbUV2ZW50ID0gYXN5bmMgKHBheWxvYWQ6IHsgW2tleTogc3RyaW5nXTogYW55IH0pID0+IHtcbiAgICByZXR1cm4gdGhpcy5zdHJlYW1DbGllbnQucG9zdDxTZW5kRXZlbnRSZXNwb25zZSwgU2VuZEV2ZW50UmVxdWVzdD4oXG4gICAgICBgJHt0aGlzLnN0cmVhbUNsaWVudEJhc2VQYXRofS9ldmVudGAsXG4gICAgICB7IGN1c3RvbTogcGF5bG9hZCB9LFxuICAgICk7XG4gIH07XG5cbiAgYXBwbHlEZXZpY2VDb25maWcgPSAoKSA9PiB7XG4gICAgdGhpcy5pbml0Q2FtZXJhKHsgc2V0U3RhdHVzOiBmYWxzZSB9KTtcbiAgICB0aGlzLmluaXRNaWMoeyBzZXRTdGF0dXM6IGZhbHNlIH0pO1xuICB9O1xuXG4gIHByaXZhdGUgYXN5bmMgaW5pdENhbWVyYShvcHRpb25zOiB7IHNldFN0YXR1czogYm9vbGVhbiB9KSB7XG4gICAgLy8gV2FpdCBmb3IgYW55IGluIHByb2dyZXNzIGNhbWVyYSBvcGVyYXRpb25cbiAgICBpZiAodGhpcy5jYW1lcmEuZW5hYmxlUHJvbWlzZSkge1xuICAgICAgYXdhaXQgdGhpcy5jYW1lcmEuZW5hYmxlUHJvbWlzZTtcbiAgICB9XG4gICAgaWYgKHRoaXMuY2FtZXJhLmRpc2FibGVQcm9taXNlKSB7XG4gICAgICBhd2FpdCB0aGlzLmNhbWVyYS5kaXNhYmxlUHJvbWlzZTtcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICB0aGlzLnN0YXRlLmxvY2FsUGFydGljaXBhbnQ/LnZpZGVvU3RyZWFtIHx8XG4gICAgICAhdGhpcy5wZXJtaXNzaW9uc0NvbnRleHQuaGFzUGVybWlzc2lvbignc2VuZC12aWRlbycpXG4gICAgKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gU2V0IGNhbWVyYSBkaXJlY3Rpb24gaWYgaXQncyBub3QgeWV0IHNldFxuICAgIGlmICghdGhpcy5jYW1lcmEuc3RhdGUuZGlyZWN0aW9uICYmICF0aGlzLmNhbWVyYS5zdGF0ZS5zZWxlY3RlZERldmljZSkge1xuICAgICAgbGV0IGRlZmF1bHREaXJlY3Rpb246IENhbWVyYURpcmVjdGlvbiA9ICdmcm9udCc7XG4gICAgICBjb25zdCBiYWNrZW5kU2V0dGluZyA9IHRoaXMuc3RhdGUuc2V0dGluZ3M/LnZpZGVvLmNhbWVyYV9mYWNpbmc7XG4gICAgICBpZiAoYmFja2VuZFNldHRpbmcpIHtcbiAgICAgICAgZGVmYXVsdERpcmVjdGlvbiA9IGJhY2tlbmRTZXR0aW5nID09PSAnZnJvbnQnID8gJ2Zyb250JyA6ICdiYWNrJztcbiAgICAgIH1cbiAgICAgIHRoaXMuY2FtZXJhLnN0YXRlLnNldERpcmVjdGlvbihkZWZhdWx0RGlyZWN0aW9uKTtcbiAgICB9XG5cbiAgICAvLyBTZXQgdGFyZ2V0IHJlc29sdXRpb25cbiAgICBjb25zdCB0YXJnZXRSZXNvbHV0aW9uID0gdGhpcy5zdGF0ZS5zZXR0aW5ncz8udmlkZW8udGFyZ2V0X3Jlc29sdXRpb247XG4gICAgaWYgKHRhcmdldFJlc29sdXRpb24pIHtcbiAgICAgIGF3YWl0IHRoaXMuY2FtZXJhLnNlbGVjdFRhcmdldFJlc29sdXRpb24odGFyZ2V0UmVzb2x1dGlvbik7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMuc2V0U3RhdHVzKSB7XG4gICAgICAvLyBQdWJsaXNoIGFscmVhZHkgdGhhdCB3YXMgc2V0IGJlZm9yZSB3ZSBqb2luZWRcbiAgICAgIGlmIChcbiAgICAgICAgdGhpcy5jYW1lcmEuc3RhdGUuc3RhdHVzID09PSAnZW5hYmxlZCcgJiZcbiAgICAgICAgdGhpcy5jYW1lcmEuc3RhdGUubWVkaWFTdHJlYW0gJiZcbiAgICAgICAgIXRoaXMucHVibGlzaGVyPy5pc1B1Ymxpc2hpbmcoVHJhY2tUeXBlLlZJREVPKVxuICAgICAgKSB7XG4gICAgICAgIGF3YWl0IHRoaXMucHVibGlzaFZpZGVvU3RyZWFtKHRoaXMuY2FtZXJhLnN0YXRlLm1lZGlhU3RyZWFtLCB7XG4gICAgICAgICAgcHJlZmVycmVkQ29kZWM6IHRoaXMuY2FtZXJhLnByZWZlcnJlZENvZGVjLFxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLy8gU3RhcnQgY2FtZXJhIGlmIGJhY2tlbmQgY29uZmlnIHNwZWNpZmllcywgYW5kIHRoZXJlIGlzIG5vIGxvY2FsIHNldHRpbmdcbiAgICAgIGlmIChcbiAgICAgICAgdGhpcy5jYW1lcmEuc3RhdGUuc3RhdHVzID09PSB1bmRlZmluZWQgJiZcbiAgICAgICAgdGhpcy5zdGF0ZS5zZXR0aW5ncz8udmlkZW8uY2FtZXJhX2RlZmF1bHRfb25cbiAgICAgICkge1xuICAgICAgICBhd2FpdCB0aGlzLmNhbWVyYS5lbmFibGUoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGluaXRNaWMob3B0aW9uczogeyBzZXRTdGF0dXM6IGJvb2xlYW4gfSkge1xuICAgIC8vIFdhaXQgZm9yIGFueSBpbiBwcm9ncmVzcyBtaWMgb3BlcmF0aW9uXG4gICAgaWYgKHRoaXMubWljcm9waG9uZS5lbmFibGVQcm9taXNlKSB7XG4gICAgICBhd2FpdCB0aGlzLm1pY3JvcGhvbmUuZW5hYmxlUHJvbWlzZTtcbiAgICB9XG4gICAgaWYgKHRoaXMubWljcm9waG9uZS5kaXNhYmxlUHJvbWlzZSkge1xuICAgICAgYXdhaXQgdGhpcy5taWNyb3Bob25lLmRpc2FibGVQcm9taXNlO1xuICAgIH1cblxuICAgIGlmIChcbiAgICAgIHRoaXMuc3RhdGUubG9jYWxQYXJ0aWNpcGFudD8uYXVkaW9TdHJlYW0gfHxcbiAgICAgICF0aGlzLnBlcm1pc3Npb25zQ29udGV4dC5oYXNQZXJtaXNzaW9uKCdzZW5kLWF1ZGlvJylcbiAgICApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucy5zZXRTdGF0dXMpIHtcbiAgICAgIC8vIFB1Ymxpc2ggbWVkaWEgc3RyZWFtIHRoYXQgd2FzIHNldCBiZWZvcmUgd2Ugam9pbmVkXG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMubWljcm9waG9uZS5zdGF0ZS5zdGF0dXMgPT09ICdlbmFibGVkJyAmJlxuICAgICAgICB0aGlzLm1pY3JvcGhvbmUuc3RhdGUubWVkaWFTdHJlYW0gJiZcbiAgICAgICAgIXRoaXMucHVibGlzaGVyPy5pc1B1Ymxpc2hpbmcoVHJhY2tUeXBlLkFVRElPKVxuICAgICAgKSB7XG4gICAgICAgIGF3YWl0IHRoaXMucHVibGlzaEF1ZGlvU3RyZWFtKHRoaXMubWljcm9waG9uZS5zdGF0ZS5tZWRpYVN0cmVhbSk7XG4gICAgICB9XG5cbiAgICAgIC8vIFN0YXJ0IG1pYyBpZiBiYWNrZW5kIGNvbmZpZyBzcGVjaWZpZXMsIGFuZCB0aGVyZSBpcyBubyBsb2NhbCBzZXR0aW5nXG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMubWljcm9waG9uZS5zdGF0ZS5zdGF0dXMgPT09IHVuZGVmaW5lZCAmJlxuICAgICAgICB0aGlzLnN0YXRlLnNldHRpbmdzPy5hdWRpby5taWNfZGVmYXVsdF9vblxuICAgICAgKSB7XG4gICAgICAgIGF3YWl0IHRoaXMubWljcm9waG9uZS5lbmFibGUoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogV2lsbCBiZWdpbiB0cmFja2luZyB0aGUgZ2l2ZW4gZWxlbWVudCBmb3IgdmlzaWJpbGl0eSBjaGFuZ2VzIHdpdGhpbiB0aGVcbiAgICogY29uZmlndXJlZCB2aWV3cG9ydCBlbGVtZW50IChgY2FsbC5zZXRWaWV3cG9ydGApLlxuICAgKlxuICAgKiBAcGFyYW0gZWxlbWVudCB0aGUgZWxlbWVudCB0byB0cmFjay5cbiAgICogQHBhcmFtIHNlc3Npb25JZCB0aGUgc2Vzc2lvbiBpZC5cbiAgICogQHBhcmFtIHRyYWNrVHlwZSB0aGUgdmlkZW8gbW9kZS5cbiAgICovXG4gIHRyYWNrRWxlbWVudFZpc2liaWxpdHkgPSA8VCBleHRlbmRzIEhUTUxFbGVtZW50PihcbiAgICBlbGVtZW50OiBULFxuICAgIHNlc3Npb25JZDogc3RyaW5nLFxuICAgIHRyYWNrVHlwZTogVmlkZW9UcmFja1R5cGUsXG4gICkgPT4ge1xuICAgIHJldHVybiB0aGlzLmR5bmFzY2FsZU1hbmFnZXIudHJhY2tFbGVtZW50VmlzaWJpbGl0eShcbiAgICAgIGVsZW1lbnQsXG4gICAgICBzZXNzaW9uSWQsXG4gICAgICB0cmFja1R5cGUsXG4gICAgKTtcbiAgfTtcblxuICAvKipcbiAgICogU2V0cyB0aGUgdmlld3BvcnQgZWxlbWVudCB0byB0cmFjayBib3VuZCB2aWRlbyBlbGVtZW50cyBmb3IgdmlzaWJpbGl0eS5cbiAgICpcbiAgICogQHBhcmFtIGVsZW1lbnQgdGhlIHZpZXdwb3J0IGVsZW1lbnQuXG4gICAqL1xuICBzZXRWaWV3cG9ydCA9IDxUIGV4dGVuZHMgSFRNTEVsZW1lbnQ+KGVsZW1lbnQ6IFQpID0+IHtcbiAgICByZXR1cm4gdGhpcy5keW5hc2NhbGVNYW5hZ2VyLnNldFZpZXdwb3J0KGVsZW1lbnQpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBCaW5kcyBhIERPTSA8dmlkZW8+IGVsZW1lbnQgdG8gdGhlIGdpdmVuIHNlc3Npb24gaWQuXG4gICAqIFRoaXMgbWV0aG9kIHdpbGwgbWFrZSBzdXJlIHRoYXQgdGhlIHZpZGVvIGVsZW1lbnQgd2lsbCBwbGF5XG4gICAqIHRoZSBjb3JyZWN0IHZpZGVvIHN0cmVhbSBmb3IgdGhlIGdpdmVuIHNlc3Npb24gaWQuXG4gICAqXG4gICAqIFVuZGVyIHRoZSBob29kLCBpdCB3b3VsZCBhbHNvIGtlZXAgdHJhY2sgb2YgdGhlIHZpZGVvIGVsZW1lbnQgZGltZW5zaW9uc1xuICAgKiBhbmQgdXBkYXRlIHRoZSBzdWJzY3JpcHRpb24gYWNjb3JkaW5nbHkgaW4gb3JkZXIgdG8gb3B0aW1pemUgdGhlIGJhbmR3aWR0aC5cbiAgICpcbiAgICogSWYgYSBcInZpZXdwb3J0XCIgaXMgY29uZmlndXJlZCwgdGhlIHZpZGVvIGVsZW1lbnQgd2lsbCBiZSBhdXRvbWF0aWNhbGx5XG4gICAqIHRyYWNrZWQgZm9yIHZpc2liaWxpdHkgYW5kIHRoZSBzdWJzY3JpcHRpb24gd2lsbCBiZSB1cGRhdGVkIGFjY29yZGluZ2x5LlxuICAgKlxuICAgKiBAcGFyYW0gdmlkZW9FbGVtZW50IHRoZSB2aWRlbyBlbGVtZW50IHRvIGJpbmQgdG8uXG4gICAqIEBwYXJhbSBzZXNzaW9uSWQgdGhlIHNlc3Npb24gaWQuXG4gICAqIEBwYXJhbSB0cmFja1R5cGUgdGhlIGtpbmQgb2YgdmlkZW8uXG4gICAqL1xuICBiaW5kVmlkZW9FbGVtZW50ID0gKFxuICAgIHZpZGVvRWxlbWVudDogSFRNTFZpZGVvRWxlbWVudCxcbiAgICBzZXNzaW9uSWQ6IHN0cmluZyxcbiAgICB0cmFja1R5cGU6IFZpZGVvVHJhY2tUeXBlLFxuICApID0+IHtcbiAgICBjb25zdCB1bmJpbmQgPSB0aGlzLmR5bmFzY2FsZU1hbmFnZXIuYmluZFZpZGVvRWxlbWVudChcbiAgICAgIHZpZGVvRWxlbWVudCxcbiAgICAgIHNlc3Npb25JZCxcbiAgICAgIHRyYWNrVHlwZSxcbiAgICApO1xuXG4gICAgaWYgKCF1bmJpbmQpIHJldHVybjtcbiAgICB0aGlzLmxlYXZlQ2FsbEhvb2tzLmFkZCh1bmJpbmQpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICB0aGlzLmxlYXZlQ2FsbEhvb2tzLmRlbGV0ZSh1bmJpbmQpO1xuICAgICAgdW5iaW5kKCk7XG4gICAgfTtcbiAgfTtcblxuICAvKipcbiAgICogQmluZHMgYSBET00gPGF1ZGlvPiBlbGVtZW50IHRvIHRoZSBnaXZlbiBzZXNzaW9uIGlkLlxuICAgKlxuICAgKiBUaGlzIG1ldGhvZCB3aWxsIG1ha2Ugc3VyZSB0aGF0IHRoZSBhdWRpbyBlbGVtZW50IHdpbGxcbiAgICogcGxheSB0aGUgY29ycmVjdCBhdWRpbyBzdHJlYW0gZm9yIHRoZSBnaXZlbiBzZXNzaW9uIGlkLlxuICAgKlxuICAgKiBAcGFyYW0gYXVkaW9FbGVtZW50IHRoZSBhdWRpbyBlbGVtZW50IHRvIGJpbmQgdG8uXG4gICAqIEBwYXJhbSBzZXNzaW9uSWQgdGhlIHNlc3Npb24gaWQuXG4gICAqIEBwYXJhbSB0cmFja1R5cGUgdGhlIGtpbmQgb2YgYXVkaW8uXG4gICAqL1xuICBiaW5kQXVkaW9FbGVtZW50ID0gKFxuICAgIGF1ZGlvRWxlbWVudDogSFRNTEF1ZGlvRWxlbWVudCxcbiAgICBzZXNzaW9uSWQ6IHN0cmluZyxcbiAgICB0cmFja1R5cGU6IEF1ZGlvVHJhY2tUeXBlID0gJ2F1ZGlvVHJhY2snLFxuICApID0+IHtcbiAgICBjb25zdCB1bmJpbmQgPSB0aGlzLmR5bmFzY2FsZU1hbmFnZXIuYmluZEF1ZGlvRWxlbWVudChcbiAgICAgIGF1ZGlvRWxlbWVudCxcbiAgICAgIHNlc3Npb25JZCxcbiAgICAgIHRyYWNrVHlwZSxcbiAgICApO1xuXG4gICAgaWYgKCF1bmJpbmQpIHJldHVybjtcbiAgICB0aGlzLmxlYXZlQ2FsbEhvb2tzLmFkZCh1bmJpbmQpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICB0aGlzLmxlYXZlQ2FsbEhvb2tzLmRlbGV0ZSh1bmJpbmQpO1xuICAgICAgdW5iaW5kKCk7XG4gICAgfTtcbiAgfTtcblxuICAvKipcbiAgICogQmluZHMgYSBET00gPGltZz4gZWxlbWVudCB0byB0aGlzIGNhbGwncyB0aHVtYm5haWwgKGlmIGVuYWJsZWQgaW4gc2V0dGluZ3MpLlxuICAgKlxuICAgKiBAcGFyYW0gaW1hZ2VFbGVtZW50IHRoZSBpbWFnZSBlbGVtZW50IHRvIGJpbmQgdG8uXG4gICAqIEBwYXJhbSBvcHRzIG9wdGlvbnMgZm9yIHRoZSBiaW5kaW5nLlxuICAgKi9cbiAgYmluZENhbGxUaHVtYm5haWxFbGVtZW50ID0gKFxuICAgIGltYWdlRWxlbWVudDogSFRNTEltYWdlRWxlbWVudCxcbiAgICBvcHRzOiB7XG4gICAgICBmYWxsYmFja0ltYWdlU291cmNlPzogc3RyaW5nO1xuICAgIH0gPSB7fSxcbiAgKSA9PiB7XG4gICAgY29uc3QgaGFuZGxlRXJyb3IgPSAoKSA9PiB7XG4gICAgICBpbWFnZUVsZW1lbnQuc3JjID1cbiAgICAgICAgb3B0cy5mYWxsYmFja0ltYWdlU291cmNlIHx8XG4gICAgICAgICdodHRwczovL2dldHN0cmVhbS5pby9yYW5kb21fc3ZnLz9uYW1lPXgmaWQ9eCc7XG4gICAgfTtcblxuICAgIGNvbnN0IHVuc3Vic2NyaWJlID0gY3JlYXRlU3Vic2NyaXB0aW9uKFxuICAgICAgdGhpcy5zdGF0ZS50aHVtYm5haWxzJCxcbiAgICAgICh0aHVtYm5haWxzKSA9PiB7XG4gICAgICAgIGlmICghdGh1bWJuYWlscykgcmV0dXJuO1xuICAgICAgICBpbWFnZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBoYW5kbGVFcnJvcik7XG5cbiAgICAgICAgY29uc3QgdGh1bWJuYWlsVXJsID0gbmV3IFVSTCh0aHVtYm5haWxzLmltYWdlX3VybCk7XG4gICAgICAgIHRodW1ibmFpbFVybC5zZWFyY2hQYXJhbXMuc2V0KCd3JywgU3RyaW5nKGltYWdlRWxlbWVudC5jbGllbnRXaWR0aCkpO1xuICAgICAgICB0aHVtYm5haWxVcmwuc2VhcmNoUGFyYW1zLnNldCgnaCcsIFN0cmluZyhpbWFnZUVsZW1lbnQuY2xpZW50SGVpZ2h0KSk7XG5cbiAgICAgICAgaW1hZ2VFbGVtZW50LnNyYyA9IHRodW1ibmFpbFVybC50b1N0cmluZygpO1xuICAgICAgfSxcbiAgICApO1xuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHVuc3Vic2NyaWJlKCk7XG4gICAgICBpbWFnZUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignZXJyb3InLCBoYW5kbGVFcnJvcik7XG4gICAgfTtcbiAgfTtcbn1cbiIsImltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7XG5pbXBvcnQgeyBTdGFibGVXU0Nvbm5lY3Rpb24gfSBmcm9tICcuL2Nvbm5lY3Rpb24nO1xuaW1wb3J0IHsgcmFuZG9tSWQsIHNsZWVwIH0gZnJvbSAnLi91dGlscyc7XG5cbmV4cG9ydCB0eXBlIEluc2lnaHRUeXBlcyA9XG4gIHwgJ3dzX2ZhdGFsJ1xuICB8ICd3c19zdWNjZXNzX2FmdGVyX2ZhaWx1cmUnXG4gIHwgJ2h0dHBfaGlfZmFpbGVkJztcbmV4cG9ydCBjbGFzcyBJbnNpZ2h0TWV0cmljcyB7XG4gIGNvbm5lY3Rpb25TdGFydFRpbWVzdGFtcDogbnVtYmVyIHwgbnVsbDtcbiAgd3NDb25zZWN1dGl2ZUZhaWx1cmVzOiBudW1iZXI7XG4gIHdzVG90YWxGYWlsdXJlczogbnVtYmVyO1xuICBpbnN0YW5jZUNsaWVudElkOiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5jb25uZWN0aW9uU3RhcnRUaW1lc3RhbXAgPSBudWxsO1xuICAgIHRoaXMud3NUb3RhbEZhaWx1cmVzID0gMDtcbiAgICB0aGlzLndzQ29uc2VjdXRpdmVGYWlsdXJlcyA9IDA7XG4gICAgdGhpcy5pbnN0YW5jZUNsaWVudElkID0gcmFuZG9tSWQoKTtcbiAgfVxufVxuXG4vKipcbiAqIHBvc3RJbnNpZ2h0cyBpcyBub3Qgc3VwcG9zZWQgdG8gYmUgdXNlZCBieSBlbmQgdXNlcnMgZGlyZWN0bHkgd2l0aGluIGNoYXQgYXBwbGljYXRpb24sIGFuZCB0aHVzIGlzIGtlcHQgaXNvbGF0ZWRcbiAqIGZyb20gYWxsIHRoZSBjbGllbnQvY29ubmVjdGlvbiBjb2RlL2xvZ2ljLlxuICpcbiAqIEBwYXJhbSBpbnNpZ2h0VHlwZVxuICogQHBhcmFtIGluc2lnaHRzXG4gKi9cbmV4cG9ydCBjb25zdCBwb3N0SW5zaWdodHMgPSBhc3luYyAoXG4gIGluc2lnaHRUeXBlOiBJbnNpZ2h0VHlwZXMsXG4gIGluc2lnaHRzOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPixcbikgPT4ge1xuICBjb25zdCBtYXhBdHRlbXB0cyA9IDM7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbWF4QXR0ZW1wdHM7IGkrKykge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBheGlvcy5wb3N0KFxuICAgICAgICBgaHR0cHM6Ly9jaGF0LWluc2lnaHRzLmdldHN0cmVhbS5pby9pbnNpZ2h0cy8ke2luc2lnaHRUeXBlfWAsXG4gICAgICAgIGluc2lnaHRzLFxuICAgICAgKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBhd2FpdCBzbGVlcCgoaSArIDEpICogMzAwMCk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgYnJlYWs7XG4gIH1cbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBidWlsZFdzRmF0YWxJbnNpZ2h0KFxuICBjb25uZWN0aW9uOiBTdGFibGVXU0Nvbm5lY3Rpb24sXG4gIGV2ZW50OiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPixcbikge1xuICByZXR1cm4ge1xuICAgIC4uLmV2ZW50LFxuICAgIC4uLmJ1aWxkV3NCYXNlSW5zaWdodChjb25uZWN0aW9uKSxcbiAgfTtcbn1cblxuZnVuY3Rpb24gYnVpbGRXc0Jhc2VJbnNpZ2h0KGNvbm5lY3Rpb246IFN0YWJsZVdTQ29ubmVjdGlvbikge1xuICBjb25zdCB7IGNsaWVudCB9ID0gY29ubmVjdGlvbjtcbiAgcmV0dXJuIHtcbiAgICByZWFkeV9zdGF0ZTogY29ubmVjdGlvbi53cz8ucmVhZHlTdGF0ZSxcbiAgICB1cmw6IGNvbm5lY3Rpb24uX2J1aWxkVXJsKCksXG4gICAgYXBpX2tleTogY2xpZW50LmtleSxcbiAgICBzdGFydF90czogY2xpZW50Lmluc2lnaHRNZXRyaWNzLmNvbm5lY3Rpb25TdGFydFRpbWVzdGFtcCxcbiAgICBlbmRfdHM6IG5ldyBEYXRlKCkuZ2V0VGltZSgpLFxuICAgIGF1dGhfdHlwZTogY2xpZW50LmdldEF1dGhUeXBlKCksXG4gICAgdG9rZW46IGNsaWVudC50b2tlbk1hbmFnZXIudG9rZW4sXG4gICAgdXNlcl9pZDogY2xpZW50LnVzZXJJRCxcbiAgICB1c2VyX2RldGFpbHM6IGNsaWVudC5fdXNlcixcbiAgICAvLyBkZXZpY2U6IGNsaWVudC5vcHRpb25zLmRldmljZSxcbiAgICBkZXZpY2U6ICdicm93c2VyJyxcbiAgICBjbGllbnRfaWQ6IGNvbm5lY3Rpb24uY29ubmVjdGlvbklELFxuICAgIHdzX2RldGFpbHM6IGNvbm5lY3Rpb24ud3MsXG4gICAgd3NfY29uc2VjdXRpdmVfZmFpbHVyZXM6IGNsaWVudC5pbnNpZ2h0TWV0cmljcy53c0NvbnNlY3V0aXZlRmFpbHVyZXMsXG4gICAgd3NfdG90YWxfZmFpbHVyZXM6IGNsaWVudC5pbnNpZ2h0TWV0cmljcy53c1RvdGFsRmFpbHVyZXMsXG4gICAgcmVxdWVzdF9pZDogY29ubmVjdGlvbi5yZXF1ZXN0SUQsXG4gICAgb25saW5lOiB0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyA/IG5hdmlnYXRvcj8ub25MaW5lIDogbnVsbCxcbiAgICB1c2VyX2FnZW50OiB0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyA/IG5hdmlnYXRvcj8udXNlckFnZW50IDogbnVsbCxcbiAgICBpbnN0YW5jZV9jbGllbnRfaWQ6IGNsaWVudC5pbnNpZ2h0TWV0cmljcy5pbnN0YW5jZUNsaWVudElkLFxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYnVpbGRXc1N1Y2Nlc3NBZnRlckZhaWx1cmVJbnNpZ2h0KFxuICBjb25uZWN0aW9uOiBTdGFibGVXU0Nvbm5lY3Rpb24sXG4pIHtcbiAgcmV0dXJuIGJ1aWxkV3NCYXNlSW5zaWdodChjb25uZWN0aW9uKTtcbn1cbiIsImltcG9ydCBXZWJTb2NrZXQgZnJvbSAnaXNvbW9ycGhpYy13cyc7XG5pbXBvcnQgeyBTdHJlYW1DbGllbnQgfSBmcm9tICcuL2NsaWVudCc7XG5pbXBvcnQge1xuICBidWlsZFdzRmF0YWxJbnNpZ2h0LFxuICBidWlsZFdzU3VjY2Vzc0FmdGVyRmFpbHVyZUluc2lnaHQsXG4gIHBvc3RJbnNpZ2h0cyxcbn0gZnJvbSAnLi9pbnNpZ2h0cyc7XG5pbXBvcnQge1xuICBhZGRDb25uZWN0aW9uRXZlbnRMaXN0ZW5lcnMsXG4gIGNvbnZlcnRFcnJvclRvSnNvbixcbiAgS25vd25Db2RlcyxcbiAgcmFuZG9tSWQsXG4gIHJlbW92ZUNvbm5lY3Rpb25FdmVudExpc3RlbmVycyxcbiAgcmV0cnlJbnRlcnZhbCxcbiAgc2xlZXAsXG59IGZyb20gJy4vdXRpbHMnO1xuaW1wb3J0IHR5cGUge1xuICBDb25uZWN0QVBJUmVzcG9uc2UsXG4gIExvZ0xldmVsLFxuICBTdHJlYW1WaWRlb0V2ZW50LFxuICBVUixcbn0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQgdHlwZSB7XG4gIENvbm5lY3RlZEV2ZW50LFxuICBXU0F1dGhNZXNzYWdlUmVxdWVzdCxcbn0gZnJvbSAnLi4vLi4vZ2VuL2Nvb3JkaW5hdG9yJztcblxuLy8gVHlwZSBndWFyZHMgdG8gY2hlY2sgV2ViU29ja2V0IGVycm9yIHR5cGVcbmNvbnN0IGlzQ2xvc2VFdmVudCA9IChcbiAgcmVzOiBXZWJTb2NrZXQuQ2xvc2VFdmVudCB8IFdlYlNvY2tldC5EYXRhIHwgV2ViU29ja2V0LkVycm9yRXZlbnQsXG4pOiByZXMgaXMgV2ViU29ja2V0LkNsb3NlRXZlbnQgPT5cbiAgKHJlcyBhcyBXZWJTb2NrZXQuQ2xvc2VFdmVudCkuY29kZSAhPT0gdW5kZWZpbmVkO1xuXG5jb25zdCBpc0Vycm9yRXZlbnQgPSAoXG4gIHJlczogV2ViU29ja2V0LkNsb3NlRXZlbnQgfCBXZWJTb2NrZXQuRGF0YSB8IFdlYlNvY2tldC5FcnJvckV2ZW50LFxuKTogcmVzIGlzIFdlYlNvY2tldC5FcnJvckV2ZW50ID0+XG4gIChyZXMgYXMgV2ViU29ja2V0LkVycm9yRXZlbnQpLmVycm9yICE9PSB1bmRlZmluZWQ7XG5cbi8qKlxuICogU3RhYmxlV1NDb25uZWN0aW9uIC0gQSBXUyBjb25uZWN0aW9uIHRoYXQgcmVjb25uZWN0cyB1cG9uIGZhaWx1cmUuXG4gKiAtIHRoZSBicm93c2VyIHdpbGwgc29tZXRpbWVzIHJlcG9ydCB0aGF0IHlvdSdyZSBvbmxpbmUgb3Igb2ZmbGluZVxuICogLSB0aGUgV1MgY29ubmVjdGlvbiBjYW4gYnJlYWsgYW5kIGZhaWwgKHRoZXJlIGlzIGEgMzBzIGhlYWx0aCBjaGVjaylcbiAqIC0gc29tZXRpbWVzIHlvdXIgV1MgY29ubmVjdGlvbiB3aWxsIHNlZW0gdG8gd29yayB3aGlsZSB0aGUgdXNlciBpcyBpbiBmYWN0IG9mZmxpbmVcbiAqIC0gdG8gc3BlZWQgdXAgb25saW5lL29mZmxpbmUgZGV0ZWN0aW9uIHlvdSBjYW4gdXNlIHRoZSB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignb2ZmbGluZScpO1xuICpcbiAqIFRoZXJlIGFyZSA0IHdheXMgaW4gd2hpY2ggYSBjb25uZWN0aW9uIGNhbiBiZWNvbWUgdW5oZWFsdGh5OlxuICogLSB3ZWJzb2NrZXQub25lcnJvciBpcyBjYWxsZWRcbiAqIC0gd2Vic29ja2V0Lm9uY2xvc2UgaXMgY2FsbGVkXG4gKiAtIHRoZSBoZWFsdGggY2hlY2sgZmFpbHMgYW5kIG5vIGV2ZW50IGlzIHJlY2VpdmVkIGZvciB+NDAgc2Vjb25kc1xuICogLSB0aGUgYnJvd3NlciBpbmRpY2F0ZXMgdGhlIGNvbm5lY3Rpb24gaXMgbm93IG9mZmxpbmVcbiAqXG4gKiBUaGVyZSBhcmUgMiBhc3N1bXB0aW9ucyB3ZSBtYWtlIGFib3V0IHRoZSBzZXJ2ZXI6XG4gKiAtIHN0YXRlIGNhbiBiZSByZWNvdmVyZWQgYnkgcXVlcnlpbmcgdGhlIGNoYW5uZWwgYWdhaW5cbiAqIC0gaWYgdGhlIHNlcnZlcnMgZmFpbHMgdG8gcHVibGlzaCBhIG1lc3NhZ2UgdG8gdGhlIGNsaWVudCwgdGhlIFdTIGNvbm5lY3Rpb24gaXMgZGVzdHJveWVkXG4gKi9cbmV4cG9ydCBjbGFzcyBTdGFibGVXU0Nvbm5lY3Rpb24ge1xuICAvLyBsb2NhbCB2YXJzXG4gIGNvbm5lY3Rpb25JRD86IHN0cmluZztcbiAgY29ubmVjdGlvbk9wZW4/OiBDb25uZWN0QVBJUmVzcG9uc2U7XG4gIGF1dGhlbnRpY2F0aW9uU2VudDogYm9vbGVhbjtcbiAgY29uc2VjdXRpdmVGYWlsdXJlczogbnVtYmVyO1xuICBwaW5nSW50ZXJ2YWw6IG51bWJlcjtcbiAgaGVhbHRoQ2hlY2tUaW1lb3V0UmVmPzogTm9kZUpTLlRpbWVvdXQ7XG4gIGlzQ29ubmVjdGluZzogYm9vbGVhbjtcbiAgaXNEaXNjb25uZWN0ZWQ6IGJvb2xlYW47XG4gIGlzSGVhbHRoeTogYm9vbGVhbjtcbiAgaXNSZXNvbHZlZD86IGJvb2xlYW47XG4gIGxhc3RFdmVudDogRGF0ZSB8IG51bGw7XG4gIGNvbm5lY3Rpb25DaGVja1RpbWVvdXQ6IG51bWJlcjtcbiAgY29ubmVjdGlvbkNoZWNrVGltZW91dFJlZj86IE5vZGVKUy5UaW1lb3V0O1xuICByZWplY3RQcm9taXNlPzogKFxuICAgIHJlYXNvbj86IEVycm9yICYge1xuICAgICAgY29kZT86IHN0cmluZyB8IG51bWJlcjtcbiAgICAgIGlzV1NGYWlsdXJlPzogYm9vbGVhbjtcbiAgICAgIFN0YXR1c0NvZGU/OiBzdHJpbmcgfCBudW1iZXI7XG4gICAgfSxcbiAgKSA9PiB2b2lkO1xuICByZXF1ZXN0SUQ6IHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgcmVzb2x2ZVByb21pc2U/OiAodmFsdWU6IENvbm5lY3RlZEV2ZW50KSA9PiB2b2lkO1xuICB0b3RhbEZhaWx1cmVzOiBudW1iZXI7XG4gIHdzPzogV2ViU29ja2V0O1xuICB3c0lEOiBudW1iZXI7XG5cbiAgY2xpZW50OiBTdHJlYW1DbGllbnQ7XG5cbiAgY29uc3RydWN0b3IoY2xpZW50OiBTdHJlYW1DbGllbnQpIHtcbiAgICB0aGlzLmNsaWVudCA9IGNsaWVudDtcbiAgICAvKiogY29uc2VjdXRpdmUgZmFpbHVyZXMgaW5mbHVlbmNlIHRoZSBkdXJhdGlvbiBvZiB0aGUgdGltZW91dCAqL1xuICAgIHRoaXMuY29uc2VjdXRpdmVGYWlsdXJlcyA9IDA7XG4gICAgLyoqIGtlZXAgdHJhY2sgb2YgdGhlIHRvdGFsIG51bWJlciBvZiBmYWlsdXJlcyAqL1xuICAgIHRoaXMudG90YWxGYWlsdXJlcyA9IDA7XG4gICAgLyoqIFdlIG9ubHkgbWFrZSAxIGF0dGVtcHQgdG8gcmVjb25uZWN0IGF0IHRoZSBzYW1lIHRpbWUuLiAqL1xuICAgIHRoaXMuaXNDb25uZWN0aW5nID0gZmFsc2U7XG4gICAgLyoqIFRydWUgYWZ0ZXIgdGhlIGF1dGggcGF5bG9hZCBpcyBzZW50IHRvIHRoZSBzZXJ2ZXIgKi9cbiAgICB0aGlzLmF1dGhlbnRpY2F0aW9uU2VudCA9IGZhbHNlO1xuICAgIC8qKiBUbyBhdm9pZCByZWNvbm5lY3QgaWYgY2xpZW50IGlzIGRpc2Nvbm5lY3RlZCAqL1xuICAgIHRoaXMuaXNEaXNjb25uZWN0ZWQgPSBmYWxzZTtcbiAgICAvKiogQm9vbGVhbiB0aGF0IGluZGljYXRlcyBpZiB0aGUgY29ubmVjdGlvbiBwcm9taXNlIGlzIHJlc29sdmVkICovXG4gICAgdGhpcy5pc1Jlc29sdmVkID0gZmFsc2U7XG4gICAgLyoqIEJvb2xlYW4gdGhhdCBpbmRpY2F0ZXMgaWYgd2UgaGF2ZSBhIHdvcmtpbmcgY29ubmVjdGlvbiB0byB0aGUgc2VydmVyICovXG4gICAgdGhpcy5pc0hlYWx0aHkgPSBmYWxzZTtcbiAgICAvKiogSW5jcmVtZW50ZWQgd2hlbiBhIG5ldyBXUyBjb25uZWN0aW9uIGlzIG1hZGUgKi9cbiAgICB0aGlzLndzSUQgPSAxO1xuICAgIC8qKiBTdG9yZSB0aGUgbGFzdCBldmVudCB0aW1lIGZvciBoZWFsdGggY2hlY2tzICovXG4gICAgdGhpcy5sYXN0RXZlbnQgPSBudWxsO1xuICAgIC8qKiBTZW5kIGEgaGVhbHRoIGNoZWNrIG1lc3NhZ2UgZXZlcnkgMjUgc2Vjb25kcyAqL1xuICAgIHRoaXMucGluZ0ludGVydmFsID0gMjUgKiAxMDAwO1xuICAgIHRoaXMuY29ubmVjdGlvbkNoZWNrVGltZW91dCA9IHRoaXMucGluZ0ludGVydmFsICsgMTAgKiAxMDAwO1xuXG4gICAgYWRkQ29ubmVjdGlvbkV2ZW50TGlzdGVuZXJzKHRoaXMub25saW5lU3RhdHVzQ2hhbmdlZCk7XG4gIH1cblxuICBfbG9nID0gKG1zZzogc3RyaW5nLCBleHRyYTogVVIgPSB7fSwgbGV2ZWw6IExvZ0xldmVsID0gJ2luZm8nKSA9PiB7XG4gICAgdGhpcy5jbGllbnQubG9nZ2VyKGxldmVsLCAnY29ubmVjdGlvbjonICsgbXNnLCB7XG4gICAgICAuLi5leHRyYSxcbiAgICB9KTtcbiAgfTtcblxuICBzZXRDbGllbnQgPSAoY2xpZW50OiBTdHJlYW1DbGllbnQpID0+IHtcbiAgICB0aGlzLmNsaWVudCA9IGNsaWVudDtcbiAgfTtcblxuICAvKipcbiAgICogY29ubmVjdCAtIENvbm5lY3QgdG8gdGhlIFdTIFVSTFxuICAgKiB0aGUgZGVmYXVsdCAxNXMgdGltZW91dCBhbGxvd3MgYmV0d2VlbiAyfjMgdHJpZXNcbiAgICogQHJldHVybiB7Q29ubmVjdEFQSVJlc3BvbnNlPENvbm5lY3RlZEV2ZW50Pn0gUHJvbWlzZSB0aGF0IGNvbXBsZXRlcyBvbmNlIHRoZSBmaXJzdCBoZWFsdGggY2hlY2sgbWVzc2FnZSBpcyByZWNlaXZlZFxuICAgKi9cbiAgYXN5bmMgY29ubmVjdCh0aW1lb3V0ID0gMTUwMDApIHtcbiAgICBpZiAodGhpcy5pc0Nvbm5lY3RpbmcpIHtcbiAgICAgIHRocm93IEVycm9yKFxuICAgICAgICBgWW91J3ZlIGNhbGxlZCBjb25uZWN0IHR3aWNlLCBjYW4gb25seSBhdHRlbXB0IDEgY29ubmVjdGlvbiBhdCB0aGUgdGltZWAsXG4gICAgICApO1xuICAgIH1cblxuICAgIHRoaXMuaXNEaXNjb25uZWN0ZWQgPSBmYWxzZTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBoZWFsdGhDaGVjayA9IGF3YWl0IHRoaXMuX2Nvbm5lY3QoKTtcbiAgICAgIHRoaXMuY29uc2VjdXRpdmVGYWlsdXJlcyA9IDA7XG5cbiAgICAgIHRoaXMuX2xvZyhcbiAgICAgICAgYGNvbm5lY3QoKSAtIEVzdGFibGlzaGVkIHdzIGNvbm5lY3Rpb24gd2l0aCBoZWFsdGhjaGVjazogJHtoZWFsdGhDaGVja31gLFxuICAgICAgKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhpcy5pc0hlYWx0aHkgPSBmYWxzZTtcbiAgICAgIHRoaXMuY29uc2VjdXRpdmVGYWlsdXJlcyArPSAxO1xuXG4gICAgICBpZiAoXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgZXJyb3IuY29kZSA9PT0gS25vd25Db2Rlcy5UT0tFTl9FWFBJUkVEICYmXG4gICAgICAgICF0aGlzLmNsaWVudC50b2tlbk1hbmFnZXIuaXNTdGF0aWMoKVxuICAgICAgKSB7XG4gICAgICAgIHRoaXMuX2xvZyhcbiAgICAgICAgICAnY29ubmVjdCgpIC0gV1MgZmFpbHVyZSBkdWUgdG8gZXhwaXJlZCB0b2tlbiwgc28gZ29pbmcgdG8gdHJ5IHRvIHJlbG9hZCB0b2tlbiBhbmQgcmVjb25uZWN0JyxcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5fcmVjb25uZWN0KHsgcmVmcmVzaFRva2VuOiB0cnVlIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBpZiAoIWVycm9yLmlzV1NGYWlsdXJlKSB7XG4gICAgICAgICAgLy8gQVBJIHJlamVjdGVkIHRoZSBjb25uZWN0aW9uIGFuZCB3ZSBzaG91bGQgbm90IHJldHJ5XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICAgIGNvZGU6IGVycm9yLmNvZGUsXG4gICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgICAgU3RhdHVzQ29kZTogZXJyb3IuU3RhdHVzQ29kZSxcbiAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICAgIGlzV1NGYWlsdXJlOiBlcnJvci5pc1dTRmFpbHVyZSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gYXdhaXQgdGhpcy5fd2FpdEZvckhlYWx0aHkodGltZW91dCk7XG4gIH1cblxuICAvKipcbiAgICogX3dhaXRGb3JIZWFsdGh5IHBvbGxzIHRoZSBwcm9taXNlIGNvbm5lY3Rpb24gdG8gc2VlIGlmIGl0cyByZXNvbHZlZCB1bnRpbCBpdCB0aW1lcyBvdXRcbiAgICogdGhlIGRlZmF1bHQgMTVzIHRpbWVvdXQgYWxsb3dzIGJldHdlZW4gMn4zIHRyaWVzXG4gICAqIEBwYXJhbSB0aW1lb3V0IGR1cmF0aW9uKG1zKVxuICAgKi9cbiAgYXN5bmMgX3dhaXRGb3JIZWFsdGh5KHRpbWVvdXQgPSAxNTAwMCkge1xuICAgIHJldHVybiBQcm9taXNlLnJhY2UoW1xuICAgICAgKGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgaW50ZXJ2YWwgPSA1MDsgLy8gbXNcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gdGltZW91dDsgaSArPSBpbnRlcnZhbCkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5jb25uZWN0aW9uT3BlbjtcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICAgICAgICBpZiAoaSA9PT0gdGltZW91dCkge1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgY29kZTogZXJyb3IuY29kZSxcbiAgICAgICAgICAgICAgICAgIFN0YXR1c0NvZGU6IGVycm9yLlN0YXR1c0NvZGUsXG4gICAgICAgICAgICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgaXNXU0ZhaWx1cmU6IGVycm9yLmlzV1NGYWlsdXJlLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgc2xlZXAoaW50ZXJ2YWwpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSkoKSxcbiAgICAgIChhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IHNsZWVwKHRpbWVvdXQpO1xuICAgICAgICB0aGlzLmlzQ29ubmVjdGluZyA9IGZhbHNlO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgY29kZTogJycsXG4gICAgICAgICAgICBTdGF0dXNDb2RlOiAnJyxcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdpbml0aWFsIFdTIGNvbm5lY3Rpb24gY291bGQgbm90IGJlIGVzdGFibGlzaGVkJyxcbiAgICAgICAgICAgIGlzV1NGYWlsdXJlOiB0cnVlLFxuICAgICAgICAgIH0pLFxuICAgICAgICApO1xuICAgICAgfSkoKSxcbiAgICBdKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBCdWlsZHMgYW5kIHJldHVybnMgdGhlIHVybCBmb3Igd2Vic29ja2V0LlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcmV0dXJucyB1cmwgc3RyaW5nXG4gICAqL1xuICBfYnVpbGRVcmwgPSAoKSA9PiB7XG4gICAgY29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpO1xuICAgIC8vIGNvbnN0IHFzID0gZW5jb2RlVVJJQ29tcG9uZW50KHRoaXMuY2xpZW50Ll9idWlsZFdTUGF5bG9hZCh0aGlzLnJlcXVlc3RJRCkpO1xuICAgIC8vIHBhcmFtcy5zZXQoJ2pzb24nLCBxcyk7XG4gICAgcGFyYW1zLnNldCgnYXBpX2tleScsIHRoaXMuY2xpZW50LmtleSk7XG4gICAgcGFyYW1zLnNldCgnc3RyZWFtLWF1dGgtdHlwZScsIHRoaXMuY2xpZW50LmdldEF1dGhUeXBlKCkpO1xuICAgIHBhcmFtcy5zZXQoJ1gtU3RyZWFtLUNsaWVudCcsIHRoaXMuY2xpZW50LmdldFVzZXJBZ2VudCgpKTtcbiAgICAvLyBwYXJhbXMuYXBwZW5kKCdhdXRob3JpemF0aW9uJywgdGhpcy5jbGllbnQuX2dldFRva2VuKCkhKTtcblxuICAgIHJldHVybiBgJHt0aGlzLmNsaWVudC53c0Jhc2VVUkx9L2Nvbm5lY3Q/JHtwYXJhbXMudG9TdHJpbmcoKX1gO1xuICB9O1xuXG4gIC8qKlxuICAgKiBkaXNjb25uZWN0IC0gRGlzY29ubmVjdCB0aGUgY29ubmVjdGlvbiBhbmQgZG9lc24ndCByZWNvdmVyLi4uXG4gICAqXG4gICAqL1xuICBkaXNjb25uZWN0KHRpbWVvdXQ/OiBudW1iZXIpIHtcbiAgICB0aGlzLl9sb2coXG4gICAgICBgZGlzY29ubmVjdCgpIC0gQ2xvc2luZyB0aGUgd2Vic29ja2V0IGNvbm5lY3Rpb24gZm9yIHdzSUQgJHt0aGlzLndzSUR9YCxcbiAgICApO1xuXG4gICAgdGhpcy53c0lEICs9IDE7XG4gICAgdGhpcy5pc0Nvbm5lY3RpbmcgPSBmYWxzZTtcbiAgICB0aGlzLmlzRGlzY29ubmVjdGVkID0gdHJ1ZTtcblxuICAgIC8vIHN0YXJ0IGJ5IHJlbW92aW5nIGFsbCB0aGUgbGlzdGVuZXJzXG4gICAgaWYgKHRoaXMuaGVhbHRoQ2hlY2tUaW1lb3V0UmVmKSB7XG4gICAgICBjbGVhckludGVydmFsKHRoaXMuaGVhbHRoQ2hlY2tUaW1lb3V0UmVmKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuY29ubmVjdGlvbkNoZWNrVGltZW91dFJlZikge1xuICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmNvbm5lY3Rpb25DaGVja1RpbWVvdXRSZWYpO1xuICAgIH1cblxuICAgIHJlbW92ZUNvbm5lY3Rpb25FdmVudExpc3RlbmVycyh0aGlzLm9ubGluZVN0YXR1c0NoYW5nZWQpO1xuXG4gICAgdGhpcy5pc0hlYWx0aHkgPSBmYWxzZTtcblxuICAgIC8vIHJlbW92ZSB3cyBoYW5kbGVycy4uLlxuICAgIGlmICh0aGlzLndzICYmIHRoaXMud3MucmVtb3ZlQWxsTGlzdGVuZXJzKSB7XG4gICAgICB0aGlzLndzLnJlbW92ZUFsbExpc3RlbmVycygpO1xuICAgIH1cblxuICAgIGxldCBpc0Nsb3NlZFByb21pc2U6IFByb21pc2U8dm9pZD47XG4gICAgLy8gYW5kIGZpbmFsbHkgY2xvc2UuLi5cbiAgICAvLyBBc3NpZ25pbmcgdG8gbG9jYWwgaGVyZSBiZWNhdXNlIHdlIHdpbGwgcmVtb3ZlIGl0IGZyb20gdGhpcyBiZWZvcmUgdGhlXG4gICAgLy8gcHJvbWlzZSByZXNvbHZlcy5cbiAgICBjb25zdCB7IHdzIH0gPSB0aGlzO1xuICAgIGlmICh3cyAmJiB3cy5jbG9zZSAmJiB3cy5yZWFkeVN0YXRlID09PSB3cy5PUEVOKSB7XG4gICAgICBpc0Nsb3NlZFByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICBjb25zdCBvbmNsb3NlID0gKGV2ZW50OiBXZWJTb2NrZXQuQ2xvc2VFdmVudCkgPT4ge1xuICAgICAgICAgIHRoaXMuX2xvZyhcbiAgICAgICAgICAgIGBkaXNjb25uZWN0KCkgLSByZXNvbHZpbmcgaXNDbG9zZWRQcm9taXNlICR7XG4gICAgICAgICAgICAgIGV2ZW50ID8gJ3dpdGgnIDogJ3dpdGhvdXQnXG4gICAgICAgICAgICB9IGNsb3NlIGZyYW1lYCxcbiAgICAgICAgICAgIHsgZXZlbnQgfSxcbiAgICAgICAgICApO1xuICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgfTtcblxuICAgICAgICB3cy5vbmNsb3NlID0gb25jbG9zZTtcbiAgICAgICAgLy8gSW4gY2FzZSB3ZSBkb24ndCByZWNlaXZlIGNsb3NlIGZyYW1lIHdlYnNvY2tldCBzZXJ2ZXIgaW4gdGltZSxcbiAgICAgICAgLy8gbGV0cyBub3Qgd2FpdCBmb3IgbW9yZSB0aGFuIDEgc2Vjb25kLlxuICAgICAgICBzZXRUaW1lb3V0KG9uY2xvc2UsIHRpbWVvdXQgIT0gbnVsbCA/IHRpbWVvdXQgOiAxMDAwKTtcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLl9sb2coXG4gICAgICAgIGBkaXNjb25uZWN0KCkgLSBNYW51YWxseSBjbG9zZWQgY29ubmVjdGlvbiBieSBjYWxsaW5nIGNsaWVudC5kaXNjb25uZWN0KClgLFxuICAgICAgKTtcblxuICAgICAgd3MuY2xvc2UoXG4gICAgICAgIEtub3duQ29kZXMuV1NfQ0xPU0VEX1NVQ0NFU1MsXG4gICAgICAgICdNYW51YWxseSBjbG9zZWQgY29ubmVjdGlvbiBieSBjYWxsaW5nIGNsaWVudC5kaXNjb25uZWN0KCknLFxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fbG9nKFxuICAgICAgICBgZGlzY29ubmVjdCgpIC0gd3MgY29ubmVjdGlvbiBkb2Vzbid0IGV4aXN0IG9yIGl0IGlzIGFscmVhZHkgY2xvc2VkLmAsXG4gICAgICApO1xuICAgICAgaXNDbG9zZWRQcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgZGVsZXRlIHRoaXMud3M7XG5cbiAgICByZXR1cm4gaXNDbG9zZWRQcm9taXNlO1xuICB9XG5cbiAgLyoqXG4gICAqIF9jb25uZWN0IC0gQ29ubmVjdCB0byB0aGUgV1MgZW5kcG9pbnRcbiAgICpcbiAgICogQHJldHVybiB7Q29ubmVjdEFQSVJlc3BvbnNlPENvbm5lY3RlZEV2ZW50Pn0gUHJvbWlzZSB0aGF0IGNvbXBsZXRlcyBvbmNlIHRoZSBmaXJzdCBoZWFsdGggY2hlY2sgbWVzc2FnZSBpcyByZWNlaXZlZFxuICAgKi9cbiAgYXN5bmMgX2Nvbm5lY3QoKSB7XG4gICAgaWYgKFxuICAgICAgdGhpcy5pc0Nvbm5lY3RpbmcgfHxcbiAgICAgICh0aGlzLmlzRGlzY29ubmVjdGVkICYmIHRoaXMuY2xpZW50Lm9wdGlvbnMuZW5hYmxlV1NGYWxsYmFjaylcbiAgICApXG4gICAgICByZXR1cm47IC8vIHNpbXBseSBpZ25vcmUgX2Nvbm5lY3QgaWYgaXQncyBjdXJyZW50bHkgdHJ5aW5nIHRvIGNvbm5lY3RcbiAgICB0aGlzLmlzQ29ubmVjdGluZyA9IHRydWU7XG4gICAgdGhpcy5yZXF1ZXN0SUQgPSByYW5kb21JZCgpO1xuICAgIHRoaXMuY2xpZW50Lmluc2lnaHRNZXRyaWNzLmNvbm5lY3Rpb25TdGFydFRpbWVzdGFtcCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgIGxldCBpc1Rva2VuUmVhZHkgPSBmYWxzZTtcbiAgICB0cnkge1xuICAgICAgdGhpcy5fbG9nKGBfY29ubmVjdCgpIC0gd2FpdGluZyBmb3IgdG9rZW5gKTtcbiAgICAgIGF3YWl0IHRoaXMuY2xpZW50LnRva2VuTWFuYWdlci50b2tlblJlYWR5KCk7XG4gICAgICBpc1Rva2VuUmVhZHkgPSB0cnVlO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIC8vIHRva2VuIHByb3ZpZGVyIGhhcyBmYWlsZWQgYmVmb3JlLCBzbyB0cnkgYWdhaW5cbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgaWYgKCFpc1Rva2VuUmVhZHkpIHtcbiAgICAgICAgdGhpcy5fbG9nKFxuICAgICAgICAgIGBfY29ubmVjdCgpIC0gdG9rZW5Qcm92aWRlciBmYWlsZWQgYmVmb3JlLCBzbyBnb2luZyB0byByZXRyeWAsXG4gICAgICAgICk7XG4gICAgICAgIGF3YWl0IHRoaXMuY2xpZW50LnRva2VuTWFuYWdlci5sb2FkVG9rZW4oKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5fc2V0dXBDb25uZWN0aW9uUHJvbWlzZSgpO1xuICAgICAgY29uc3Qgd3NVUkwgPSB0aGlzLl9idWlsZFVybCgpO1xuICAgICAgdGhpcy5fbG9nKGBfY29ubmVjdCgpIC0gQ29ubmVjdGluZyB0byAke3dzVVJMfWAsIHtcbiAgICAgICAgd3NVUkwsXG4gICAgICAgIHJlcXVlc3RJRDogdGhpcy5yZXF1ZXN0SUQsXG4gICAgICB9KTtcbiAgICAgIHRoaXMud3MgPSBuZXcgV2ViU29ja2V0KHdzVVJMKTtcbiAgICAgIHRoaXMud3Mub25vcGVuID0gdGhpcy5vbm9wZW4uYmluZCh0aGlzLCB0aGlzLndzSUQpO1xuICAgICAgdGhpcy53cy5vbmNsb3NlID0gdGhpcy5vbmNsb3NlLmJpbmQodGhpcywgdGhpcy53c0lEKTtcbiAgICAgIHRoaXMud3Mub25lcnJvciA9IHRoaXMub25lcnJvci5iaW5kKHRoaXMsIHRoaXMud3NJRCk7XG4gICAgICB0aGlzLndzLm9ubWVzc2FnZSA9IHRoaXMub25tZXNzYWdlLmJpbmQodGhpcywgdGhpcy53c0lEKTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5jb25uZWN0aW9uT3BlbjtcbiAgICAgIHRoaXMuaXNDb25uZWN0aW5nID0gZmFsc2U7XG5cbiAgICAgIGlmIChyZXNwb25zZSkge1xuICAgICAgICB0aGlzLmNvbm5lY3Rpb25JRCA9IHJlc3BvbnNlLmNvbm5lY3Rpb25faWQ7XG4gICAgICAgIHRoaXMuY2xpZW50LnJlc29sdmVDb25uZWN0aW9uSWQ/Lih0aGlzLmNvbm5lY3Rpb25JRCk7XG4gICAgICAgIGlmIChcbiAgICAgICAgICB0aGlzLmNsaWVudC5pbnNpZ2h0TWV0cmljcy53c0NvbnNlY3V0aXZlRmFpbHVyZXMgPiAwICYmXG4gICAgICAgICAgdGhpcy5jbGllbnQub3B0aW9ucy5lbmFibGVJbnNpZ2h0c1xuICAgICAgICApIHtcbiAgICAgICAgICBwb3N0SW5zaWdodHMoXG4gICAgICAgICAgICAnd3Nfc3VjY2Vzc19hZnRlcl9mYWlsdXJlJyxcbiAgICAgICAgICAgIGJ1aWxkV3NTdWNjZXNzQWZ0ZXJGYWlsdXJlSW5zaWdodChcbiAgICAgICAgICAgICAgdGhpcyBhcyB1bmtub3duIGFzIFN0YWJsZVdTQ29ubmVjdGlvbixcbiAgICAgICAgICAgICksXG4gICAgICAgICAgKTtcbiAgICAgICAgICB0aGlzLmNsaWVudC5pbnNpZ2h0TWV0cmljcy53c0NvbnNlY3V0aXZlRmFpbHVyZXMgPSAwO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHRoaXMuaXNDb25uZWN0aW5nID0gZmFsc2U7XG4gICAgICAvLyBAdHMtaWdub3JlXG4gICAgICB0aGlzLl9sb2coYF9jb25uZWN0KCkgLSBFcnJvciAtIGAsIGVycik7XG4gICAgICBpZiAodGhpcy5jbGllbnQub3B0aW9ucy5lbmFibGVJbnNpZ2h0cykge1xuICAgICAgICB0aGlzLmNsaWVudC5pbnNpZ2h0TWV0cmljcy53c0NvbnNlY3V0aXZlRmFpbHVyZXMrKztcbiAgICAgICAgdGhpcy5jbGllbnQuaW5zaWdodE1ldHJpY3Mud3NUb3RhbEZhaWx1cmVzKys7XG5cbiAgICAgICAgY29uc3QgaW5zaWdodHMgPSBidWlsZFdzRmF0YWxJbnNpZ2h0KFxuICAgICAgICAgIHRoaXMgYXMgdW5rbm93biBhcyBTdGFibGVXU0Nvbm5lY3Rpb24sXG4gICAgICAgICAgY29udmVydEVycm9yVG9Kc29uKGVyciBhcyBFcnJvciksXG4gICAgICAgICk7XG4gICAgICAgIHBvc3RJbnNpZ2h0cz8uKCd3c19mYXRhbCcsIGluc2lnaHRzKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuY2xpZW50LnJlamVjdENvbm5lY3Rpb25JZD8uKCk7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIF9yZWNvbm5lY3QgLSBSZXRyeSB0aGUgY29ubmVjdGlvbiB0byBXUyBlbmRwb2ludFxuICAgKlxuICAgKiBAcGFyYW0ge3sgaW50ZXJ2YWw/OiBudW1iZXI7IHJlZnJlc2hUb2tlbj86IGJvb2xlYW4gfX0gb3B0aW9ucyBGb2xsb3dpbmcgb3B0aW9ucyBhcmUgYXZhaWxhYmxlXG4gICAqXG4gICAqIC0gYGludGVydmFsYFx0e2ludH1cdFx0XHRudW1iZXIgb2YgbXMgdGhhdCBmdW5jdGlvbiBzaG91bGQgd2FpdCBiZWZvcmUgcmVjb25uZWN0aW5nXG4gICAqIC0gYHJlZnJlc2hUb2tlbmAge2Jvb2xlYW59XHRyZWxvYWQvcmVmcmVzaCB1c2VyIHRva2VuIGJlIHJlZnJlc2hlZCBiZWZvcmUgYXR0ZW1wdGluZyByZWNvbm5lY3Rpb24uXG4gICAqL1xuICBhc3luYyBfcmVjb25uZWN0KFxuICAgIG9wdGlvbnM6IHsgaW50ZXJ2YWw/OiBudW1iZXI7IHJlZnJlc2hUb2tlbj86IGJvb2xlYW4gfSA9IHt9LFxuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0aGlzLl9sb2coJ19yZWNvbm5lY3QoKSAtIEluaXRpYXRpbmcgdGhlIHJlY29ubmVjdCcpO1xuXG4gICAgLy8gb25seSBhbGxvdyAxIGNvbm5lY3Rpb24gYXQgdGhlIHRpbWVcbiAgICBpZiAodGhpcy5pc0Nvbm5lY3RpbmcgfHwgdGhpcy5pc0hlYWx0aHkpIHtcbiAgICAgIHRoaXMuX2xvZygnX3JlY29ubmVjdCgpIC0gQWJvcnQgKDEpIHNpbmNlIGFscmVhZHkgY29ubmVjdGluZyBvciBoZWFsdGh5Jyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gcmVjb25uZWN0IGluIGNhc2Ugb2Ygb24gZXJyb3Igb3Igb24gY2xvc2VcbiAgICAvLyBhbHNvIHJlY29ubmVjdCBpZiB0aGUgaGVhbHRoIGNoZWNrIGN5Y2xlIGZhaWxzXG4gICAgbGV0IGludGVydmFsID0gb3B0aW9ucy5pbnRlcnZhbDtcbiAgICBpZiAoIWludGVydmFsKSB7XG4gICAgICBpbnRlcnZhbCA9IHJldHJ5SW50ZXJ2YWwodGhpcy5jb25zZWN1dGl2ZUZhaWx1cmVzKTtcbiAgICB9XG4gICAgLy8gcmVjb25uZWN0LCBvciB0cnkgYWdhaW4gYWZ0ZXIgYSBsaXR0bGUgd2hpbGUuLi5cbiAgICBhd2FpdCBzbGVlcChpbnRlcnZhbCk7XG5cbiAgICAvLyBDaGVjayBvbmNlIGFnYWluIGlmIGJ5IHNvbWUgb3RoZXIgY2FsbCB0byBfcmVjb25uZWN0IGlzIGFjdGl2ZSBvciBjb25uZWN0aW9uIGlzXG4gICAgLy8gYWxyZWFkeSByZXN0b3JlZCwgdGhlbiBubyBuZWVkIHRvIHByb2NlZWQuXG4gICAgaWYgKHRoaXMuaXNDb25uZWN0aW5nIHx8IHRoaXMuaXNIZWFsdGh5KSB7XG4gICAgICB0aGlzLl9sb2coJ19yZWNvbm5lY3QoKSAtIEFib3J0ICgyKSBzaW5jZSBhbHJlYWR5IGNvbm5lY3Rpbmcgb3IgaGVhbHRoeScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmlzRGlzY29ubmVjdGVkICYmIHRoaXMuY2xpZW50Lm9wdGlvbnMuZW5hYmxlV1NGYWxsYmFjaykge1xuICAgICAgdGhpcy5fbG9nKCdfcmVjb25uZWN0KCkgLSBBYm9ydCAoMykgc2luY2UgZGlzY29ubmVjdCgpIGlzIGNhbGxlZCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX2xvZygnX3JlY29ubmVjdCgpIC0gRGVzdHJveWluZyBjdXJyZW50IFdTIGNvbm5lY3Rpb24nKTtcblxuICAgIC8vIGNsZWFudXAgdGhlIG9sZCBjb25uZWN0aW9uXG4gICAgdGhpcy5fZGVzdHJveUN1cnJlbnRXU0Nvbm5lY3Rpb24oKTtcblxuICAgIGlmIChvcHRpb25zLnJlZnJlc2hUb2tlbikge1xuICAgICAgYXdhaXQgdGhpcy5jbGllbnQudG9rZW5NYW5hZ2VyLmxvYWRUb2tlbigpO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBhd2FpdCB0aGlzLl9jb25uZWN0KCk7XG4gICAgICB0aGlzLl9sb2coJ19yZWNvbm5lY3QoKSAtIFdhaXRpbmcgZm9yIHJlY292ZXJDYWxsQmFjaycpO1xuICAgICAgLy8gYXdhaXQgdGhpcy5jbGllbnQucmVjb3ZlclN0YXRlKCk7XG4gICAgICB0aGlzLl9sb2coJ19yZWNvbm5lY3QoKSAtIEZpbmlzaGVkIHJlY292ZXJDYWxsQmFjaycpO1xuXG4gICAgICB0aGlzLmNvbnNlY3V0aXZlRmFpbHVyZXMgPSAwO1xuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgIHRoaXMuaXNIZWFsdGh5ID0gZmFsc2U7XG4gICAgICB0aGlzLmNvbnNlY3V0aXZlRmFpbHVyZXMgKz0gMTtcbiAgICAgIGlmIChcbiAgICAgICAgZXJyb3IuY29kZSA9PT0gS25vd25Db2Rlcy5UT0tFTl9FWFBJUkVEICYmXG4gICAgICAgICF0aGlzLmNsaWVudC50b2tlbk1hbmFnZXIuaXNTdGF0aWMoKVxuICAgICAgKSB7XG4gICAgICAgIHRoaXMuX2xvZyhcbiAgICAgICAgICAnX3JlY29ubmVjdCgpIC0gV1MgZmFpbHVyZSBkdWUgdG8gZXhwaXJlZCB0b2tlbiwgc28gZ29pbmcgdG8gdHJ5IHRvIHJlbG9hZCB0b2tlbiBhbmQgcmVjb25uZWN0JyxcbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4gdGhpcy5fcmVjb25uZWN0KHsgcmVmcmVzaFRva2VuOiB0cnVlIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyByZWNvbm5lY3Qgb24gV1MgZmFpbHVyZXMsIGRvbid0IHJlY29ubmVjdCBpZiB0aGVyZSBpcyBhIGNvZGUgYnVnXG4gICAgICBpZiAoZXJyb3IuaXNXU0ZhaWx1cmUpIHtcbiAgICAgICAgdGhpcy5fbG9nKCdfcmVjb25uZWN0KCkgLSBXUyBmYWlsdXJlLCBzbyBnb2luZyB0byB0cnkgdG8gcmVjb25uZWN0Jyk7XG5cbiAgICAgICAgdGhpcy5fcmVjb25uZWN0KCk7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuX2xvZygnX3JlY29ubmVjdCgpIC0gPT0gRU5EID09Jyk7XG4gIH1cblxuICAvKipcbiAgICogb25saW5lU3RhdHVzQ2hhbmdlZCAtIHRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkIHdoZW4gdGhlIGJyb3dzZXIgY29ubmVjdHMgb3IgZGlzY29ubmVjdHMgZnJvbSB0aGUgaW50ZXJuZXQuXG4gICAqXG4gICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50IEV2ZW50IHdpdGggdHlwZSBvbmxpbmUgb3Igb2ZmbGluZVxuICAgKlxuICAgKi9cbiAgb25saW5lU3RhdHVzQ2hhbmdlZCA9IChldmVudDogRXZlbnQpID0+IHtcbiAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ29mZmxpbmUnKSB7XG4gICAgICAvLyBtYXJrIHRoZSBjb25uZWN0aW9uIGFzIGRvd25cbiAgICAgIHRoaXMuX2xvZygnb25saW5lU3RhdHVzQ2hhbmdlZCgpIC0gU3RhdHVzIGNoYW5naW5nIHRvIG9mZmxpbmUnKTtcbiAgICAgIC8vIHdlIGtub3cgdGhhdCB0aGUgYXBwIGlzIG9mZmxpbmUgc28gZGlzcGF0Y2ggdGhlIHVuaGVhbHRoeSBjb25uZWN0aW9uIGV2ZW50IGltbWVkaWF0ZWx5XG4gICAgICB0aGlzLl9zZXRIZWFsdGgoZmFsc2UsIHRydWUpO1xuICAgIH0gZWxzZSBpZiAoZXZlbnQudHlwZSA9PT0gJ29ubGluZScpIHtcbiAgICAgIC8vIHJldHJ5IHJpZ2h0IG5vdy4uLlxuICAgICAgLy8gV2UgY2hlY2sgdGhpcy5pc0hlYWx0aHksIG5vdCBzdXJlIGlmIGl0J3MgYWx3YXlzXG4gICAgICAvLyBzbWFydCB0byBjcmVhdGUgYSBuZXcgV1MgY29ubmVjdGlvbiBpZiB0aGUgb2xkIG9uZSBpcyBzdGlsbCB1cCBhbmQgcnVubmluZy5cbiAgICAgIC8vIGl0J3MgcG9zc2libGUgd2UgZGlkbid0IG1pc3MgYW55IG1lc3NhZ2VzLCBzbyB0aGlzIHByb2Nlc3MgaXMganVzdCBleHBlbnNpdmUgYW5kIG5vdCBuZWVkZWQuXG4gICAgICB0aGlzLl9sb2coXG4gICAgICAgIGBvbmxpbmVTdGF0dXNDaGFuZ2VkKCkgLSBTdGF0dXMgY2hhbmdpbmcgdG8gb25saW5lLiBpc0hlYWx0aHk6ICR7dGhpcy5pc0hlYWx0aHl9YCxcbiAgICAgICk7XG4gICAgICBpZiAoIXRoaXMuaXNIZWFsdGh5KSB7XG4gICAgICAgIHRoaXMuX3JlY29ubmVjdCh7IGludGVydmFsOiAxMCB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgb25vcGVuID0gKHdzSUQ6IG51bWJlcikgPT4ge1xuICAgIGlmICh0aGlzLndzSUQgIT09IHdzSUQpIHJldHVybjtcblxuICAgIGNvbnN0IHVzZXIgPSB0aGlzLmNsaWVudC51c2VyO1xuICAgIGlmICghdXNlcikge1xuICAgICAgdGhpcy5jbGllbnQubG9nZ2VyKCdlcnJvcicsIGBVc2VyIG5vdCBzZXQsIGNhbid0IGNvbm5lY3QgdG8gV1NgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB0b2tlbiA9IHRoaXMuY2xpZW50Ll9nZXRUb2tlbigpO1xuICAgIGlmICghdG9rZW4pIHtcbiAgICAgIHRoaXMuY2xpZW50LmxvZ2dlcignZXJyb3InLCBgVG9rZW4gbm90IHNldCwgY2FuJ3QgY29ubmVjdCBhdXRoZW50aWNhdGVgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBhdXRoTWVzc2FnZTogV1NBdXRoTWVzc2FnZVJlcXVlc3QgPSB7XG4gICAgICB0b2tlbixcbiAgICAgIHVzZXJfZGV0YWlsczoge1xuICAgICAgICBpZDogdXNlci5pZCxcbiAgICAgICAgbmFtZTogdXNlci5uYW1lLFxuICAgICAgICBpbWFnZTogdXNlci5pbWFnZSxcbiAgICAgICAgY3VzdG9tOiB1c2VyLmN1c3RvbSxcbiAgICAgIH0sXG4gICAgfTtcblxuICAgIHRoaXMuYXV0aGVudGljYXRpb25TZW50ID0gdHJ1ZTtcbiAgICB0aGlzLndzPy5zZW5kKEpTT04uc3RyaW5naWZ5KGF1dGhNZXNzYWdlKSk7XG4gICAgdGhpcy5fbG9nKCdvbm9wZW4oKSAtIG9ub3BlbiBjYWxsYmFjaycsIHsgd3NJRCB9KTtcbiAgfTtcblxuICBvbm1lc3NhZ2UgPSAod3NJRDogbnVtYmVyLCBldmVudDogV2ViU29ja2V0Lk1lc3NhZ2VFdmVudCkgPT4ge1xuICAgIGlmICh0aGlzLndzSUQgIT09IHdzSUQpIHJldHVybjtcblxuICAgIHRoaXMuX2xvZygnb25tZXNzYWdlKCkgLSBvbm1lc3NhZ2UgY2FsbGJhY2snLCB7IGV2ZW50LCB3c0lEIH0pO1xuICAgIGNvbnN0IGRhdGEgPVxuICAgICAgdHlwZW9mIGV2ZW50LmRhdGEgPT09ICdzdHJpbmcnXG4gICAgICAgID8gKEpTT04ucGFyc2UoZXZlbnQuZGF0YSkgYXMgU3RyZWFtVmlkZW9FdmVudClcbiAgICAgICAgOiBudWxsO1xuXG4gICAgLy8gd2Ugd2FpdCB0aWxsIHRoZSBmaXJzdCBtZXNzYWdlIGJlZm9yZSB3ZSBjb25zaWRlciB0aGUgY29ubmVjdGlvbiBvcGVuLlxuICAgIC8vIHRoZSByZWFzb24gZm9yIHRoaXMgaXMgdGhhdCBhdXRoIGVycm9ycyBhbmQgc2ltaWxhciBlcnJvcnMgdHJpZ2dlciBhIHdzLm9ub3BlbiBhbmQgaW1tZWRpYXRlbHlcbiAgICAvLyBhZnRlciB0aGF0IGEgd3Mub25jbG9zZS5cbiAgICBpZiAoIXRoaXMuaXNSZXNvbHZlZCAmJiBkYXRhICYmIGRhdGEudHlwZSA9PT0gJ2Nvbm5lY3Rpb24uZXJyb3InKSB7XG4gICAgICB0aGlzLmlzUmVzb2x2ZWQgPSB0cnVlO1xuICAgICAgaWYgKGRhdGEuZXJyb3IpIHtcbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciAtIHRoZSB0eXBlcyBvZiBfZXJyb3JGcm9tV1NFdmVudCBhcmUgaW5jb3JyZWN0XG4gICAgICAgIHRoaXMucmVqZWN0UHJvbWlzZT8uKHRoaXMuX2Vycm9yRnJvbVdTRXZlbnQoZGF0YSwgZmFsc2UpKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIHRyaWdnZXIgdGhlIGV2ZW50Li5cbiAgICB0aGlzLmxhc3RFdmVudCA9IG5ldyBEYXRlKCk7XG5cbiAgICBpZiAoXG4gICAgICBkYXRhICYmXG4gICAgICAoZGF0YS50eXBlID09PSAnaGVhbHRoLmNoZWNrJyB8fCBkYXRhLnR5cGUgPT09ICdjb25uZWN0aW9uLm9rJylcbiAgICApIHtcbiAgICAgIC8vIHRoZSBpbml0aWFsIGhlYWx0aC1jaGVjayBzaG91bGQgY29tZSBmcm9tIHRoZSBjbGllbnRcbiAgICAgIHRoaXMuc2NoZWR1bGVOZXh0UGluZygpO1xuICAgIH1cblxuICAgIGlmIChkYXRhICYmIGRhdGEudHlwZSA9PT0gJ2Nvbm5lY3Rpb24ub2snKSB7XG4gICAgICB0aGlzLnJlc29sdmVQcm9taXNlPy4oZGF0YSk7XG4gICAgICB0aGlzLl9zZXRIZWFsdGgodHJ1ZSk7XG4gICAgfVxuXG4gICAgaWYgKGRhdGEgJiYgZGF0YS50eXBlID09PSAnY29ubmVjdGlvbi5lcnJvcicgJiYgZGF0YS5lcnJvcikge1xuICAgICAgY29uc3QgeyBjb2RlIH0gPSBkYXRhLmVycm9yO1xuICAgICAgdGhpcy5pc0hlYWx0aHkgPSBmYWxzZTtcbiAgICAgIHRoaXMuaXNDb25uZWN0aW5nID0gZmFsc2U7XG4gICAgICB0aGlzLmNvbnNlY3V0aXZlRmFpbHVyZXMgKz0gMTtcbiAgICAgIGlmIChcbiAgICAgICAgY29kZSA9PT0gS25vd25Db2Rlcy5UT0tFTl9FWFBJUkVEICYmXG4gICAgICAgICF0aGlzLmNsaWVudC50b2tlbk1hbmFnZXIuaXNTdGF0aWMoKVxuICAgICAgKSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmNvbm5lY3Rpb25DaGVja1RpbWVvdXRSZWYpO1xuICAgICAgICB0aGlzLl9sb2coXG4gICAgICAgICAgJ2Nvbm5lY3QoKSAtIFdTIGZhaWx1cmUgZHVlIHRvIGV4cGlyZWQgdG9rZW4sIHNvIGdvaW5nIHRvIHRyeSB0byByZWxvYWQgdG9rZW4gYW5kIHJlY29ubmVjdCcsXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMuX3JlY29ubmVjdCh7IHJlZnJlc2hUb2tlbjogdHJ1ZSB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZGF0YSkge1xuICAgICAgdGhpcy5jbGllbnQuZGlzcGF0Y2hFdmVudChkYXRhKTtcbiAgICB9XG4gICAgdGhpcy5zY2hlZHVsZUNvbm5lY3Rpb25DaGVjaygpO1xuICB9O1xuXG4gIG9uY2xvc2UgPSAod3NJRDogbnVtYmVyLCBldmVudDogV2ViU29ja2V0LkNsb3NlRXZlbnQpID0+IHtcbiAgICBpZiAodGhpcy53c0lEICE9PSB3c0lEKSByZXR1cm47XG5cbiAgICB0aGlzLl9sb2coJ29uY2xvc2UoKSAtIG9uY2xvc2UgY2FsbGJhY2sgLSAnICsgZXZlbnQuY29kZSwgeyBldmVudCwgd3NJRCB9KTtcblxuICAgIGlmIChldmVudC5jb2RlID09PSBLbm93bkNvZGVzLldTX0NMT1NFRF9TVUNDRVNTKSB7XG4gICAgICAvLyB0aGlzIGlzIGEgcGVybWFuZW50IGVycm9yIHJhaXNlZCBieSBzdHJlYW0uLlxuICAgICAgLy8gdXN1YWxseSBjYXVzZWQgYnkgaW52YWxpZCBhdXRoIGRldGFpbHNcbiAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKFxuICAgICAgICBgV1MgY29ubmVjdGlvbiByZWplY3Qgd2l0aCBlcnJvciAke2V2ZW50LnJlYXNvbn1gLFxuICAgICAgKSBhcyBFcnJvciAmIFdlYlNvY2tldC5DbG9zZUV2ZW50O1xuXG4gICAgICBlcnJvci5yZWFzb24gPSBldmVudC5yZWFzb247XG4gICAgICBlcnJvci5jb2RlID0gZXZlbnQuY29kZTtcbiAgICAgIGVycm9yLndhc0NsZWFuID0gZXZlbnQud2FzQ2xlYW47XG4gICAgICBlcnJvci50YXJnZXQgPSBldmVudC50YXJnZXQ7XG5cbiAgICAgIHRoaXMucmVqZWN0UHJvbWlzZT8uKGVycm9yKTtcbiAgICAgIHRoaXMuX2xvZyhgb25jbG9zZSgpIC0gV1MgY29ubmVjdGlvbiByZWplY3Qgd2l0aCBlcnJvciAke2V2ZW50LnJlYXNvbn1gLCB7XG4gICAgICAgIGV2ZW50LFxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuY29uc2VjdXRpdmVGYWlsdXJlcyArPSAxO1xuICAgICAgdGhpcy50b3RhbEZhaWx1cmVzICs9IDE7XG4gICAgICB0aGlzLl9zZXRIZWFsdGgoZmFsc2UpO1xuICAgICAgdGhpcy5pc0Nvbm5lY3RpbmcgPSBmYWxzZTtcblxuICAgICAgdGhpcy5yZWplY3RQcm9taXNlPy4odGhpcy5fZXJyb3JGcm9tV1NFdmVudChldmVudCkpO1xuXG4gICAgICB0aGlzLl9sb2coYG9uY2xvc2UoKSAtIFdTIGNvbm5lY3Rpb24gY2xvc2VkLiBDYWxsaW5nIHJlY29ubmVjdCAuLi5gLCB7XG4gICAgICAgIGV2ZW50LFxuICAgICAgfSk7XG5cbiAgICAgIC8vIHJlY29ubmVjdCBpZiBpdHMgYW4gYWJub3JtYWwgZmFpbHVyZVxuICAgICAgdGhpcy5fcmVjb25uZWN0KCk7XG4gICAgfVxuICB9O1xuXG4gIG9uZXJyb3IgPSAod3NJRDogbnVtYmVyLCBldmVudDogV2ViU29ja2V0LkVycm9yRXZlbnQpID0+IHtcbiAgICBpZiAodGhpcy53c0lEICE9PSB3c0lEKSByZXR1cm47XG5cbiAgICB0aGlzLmNvbnNlY3V0aXZlRmFpbHVyZXMgKz0gMTtcbiAgICB0aGlzLnRvdGFsRmFpbHVyZXMgKz0gMTtcbiAgICB0aGlzLl9zZXRIZWFsdGgoZmFsc2UpO1xuICAgIHRoaXMuaXNDb25uZWN0aW5nID0gZmFsc2U7XG4gICAgdGhpcy5yZWplY3RQcm9taXNlPy4odGhpcy5fZXJyb3JGcm9tV1NFdmVudChldmVudCkpO1xuICAgIHRoaXMuX2xvZyhgb25lcnJvcigpIC0gV1MgY29ubmVjdGlvbiByZXN1bHRlZCBpbnRvIGVycm9yYCwgeyBldmVudCB9KTtcblxuICAgIHRoaXMuX3JlY29ubmVjdCgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBfc2V0SGVhbHRoIC0gU2V0cyB0aGUgY29ubmVjdGlvbiB0byBoZWFsdGh5IG9yIHVuaGVhbHRoeS5cbiAgICogQnJvYWRjYXN0cyBhbiBldmVudCBpbiBjYXNlIHRoZSBjb25uZWN0aW9uIHN0YXR1cyBjaGFuZ2VkLlxuICAgKlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGhlYWx0aHkgYm9vbGVhbiBpbmRpY2F0aW5nIGlmIHRoZSBjb25uZWN0aW9uIGlzIGhlYWx0aHkgb3Igbm90XG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gZGlzcGF0Y2hJbW1lZGlhdGVseSBib29sZWFuIGluZGljYXRpbmcgdG8gZGlzcGF0Y2ggZXZlbnQgaW1tZWRpYXRlbHkgZXZlbiBpZiB0aGUgY29ubmVjdGlvbiBpcyB1bmhlYWx0aHlcbiAgICpcbiAgICovXG4gIF9zZXRIZWFsdGggPSAoaGVhbHRoeTogYm9vbGVhbiwgZGlzcGF0Y2hJbW1lZGlhdGVseSA9IGZhbHNlKSA9PiB7XG4gICAgaWYgKGhlYWx0aHkgPT09IHRoaXMuaXNIZWFsdGh5KSByZXR1cm47XG5cbiAgICB0aGlzLmlzSGVhbHRoeSA9IGhlYWx0aHk7XG5cbiAgICBpZiAodGhpcy5pc0hlYWx0aHkgfHwgZGlzcGF0Y2hJbW1lZGlhdGVseSkge1xuICAgICAgdGhpcy5jbGllbnQuZGlzcGF0Y2hFdmVudCh7XG4gICAgICAgIHR5cGU6ICdjb25uZWN0aW9uLmNoYW5nZWQnLFxuICAgICAgICBvbmxpbmU6IHRoaXMuaXNIZWFsdGh5LFxuICAgICAgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gd2UncmUgb2ZmbGluZSwgd2FpdCBmZXcgc2Vjb25kcyBhbmQgZmlyZSBhbmQgZXZlbnQgaWYgc3RpbGwgb2ZmbGluZVxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgaWYgKHRoaXMuaXNIZWFsdGh5KSByZXR1cm47XG4gICAgICB0aGlzLmNsaWVudC5kaXNwYXRjaEV2ZW50KHtcbiAgICAgICAgdHlwZTogJ2Nvbm5lY3Rpb24uY2hhbmdlZCcsXG4gICAgICAgIG9ubGluZTogdGhpcy5pc0hlYWx0aHksXG4gICAgICB9KTtcbiAgICB9LCA1MDAwKTtcbiAgfTtcblxuICAvKipcbiAgICogX2Vycm9yRnJvbVdTRXZlbnQgLSBDcmVhdGVzIGFuIGVycm9yIG9iamVjdCBmb3IgdGhlIFdTIGV2ZW50XG4gICAqXG4gICAqL1xuICBfZXJyb3JGcm9tV1NFdmVudCA9IChcbiAgICBldmVudDogV2ViU29ja2V0LkNsb3NlRXZlbnQgfCBXZWJTb2NrZXQuRGF0YSB8IFdlYlNvY2tldC5FcnJvckV2ZW50LFxuICAgIGlzV1NGYWlsdXJlID0gdHJ1ZSxcbiAgKSA9PiB7XG4gICAgbGV0IGNvZGU7XG4gICAgbGV0IHN0YXR1c0NvZGU7XG4gICAgbGV0IG1lc3NhZ2U7XG4gICAgaWYgKGlzQ2xvc2VFdmVudChldmVudCkpIHtcbiAgICAgIGNvZGUgPSBldmVudC5jb2RlO1xuICAgICAgc3RhdHVzQ29kZSA9ICd1bmtub3duJztcbiAgICAgIG1lc3NhZ2UgPSBldmVudC5yZWFzb247XG4gICAgfVxuXG4gICAgaWYgKGlzRXJyb3JFdmVudChldmVudCkpIHtcbiAgICAgIGNvZGUgPSBldmVudC5lcnJvci5jb2RlO1xuICAgICAgc3RhdHVzQ29kZSA9IGV2ZW50LmVycm9yLlN0YXR1c0NvZGU7XG4gICAgICBtZXNzYWdlID0gZXZlbnQuZXJyb3IubWVzc2FnZTtcbiAgICB9XG5cbiAgICAvLyBLZWVwaW5nIHRoaXMgYHdhcm5gIGxldmVsIGxvZywgdG8gYXZvaWQgY2x1dHRlcmluZyBvZiBlcnJvciBsb2dzIGZyb20gd3MgZmFpbHVyZXMuXG4gICAgdGhpcy5fbG9nKFxuICAgICAgYF9lcnJvckZyb21XU0V2ZW50KCkgLSBXUyBmYWlsZWQgd2l0aCBjb2RlICR7Y29kZX1gLFxuICAgICAgeyBldmVudCB9LFxuICAgICAgJ3dhcm4nLFxuICAgICk7XG5cbiAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcihcbiAgICAgIGBXUyBmYWlsZWQgd2l0aCBjb2RlICR7Y29kZX0gYW5kIHJlYXNvbiAtICR7bWVzc2FnZX1gLFxuICAgICkgYXMgRXJyb3IgJiB7XG4gICAgICBjb2RlPzogc3RyaW5nIHwgbnVtYmVyO1xuICAgICAgaXNXU0ZhaWx1cmU/OiBib29sZWFuO1xuICAgICAgU3RhdHVzQ29kZT86IHN0cmluZyB8IG51bWJlcjtcbiAgICB9O1xuICAgIGVycm9yLmNvZGUgPSBjb2RlO1xuICAgIC8qKlxuICAgICAqIFN0YXR1c0NvZGUgZG9lcyBub3QgZXhpc3Qgb24gYW55IGV2ZW50IHR5cGVzIGJ1dCBoYXMgYmVlbiBsZWZ0XG4gICAgICogYXMgaXMgdG8gcHJlc2VydmUgSlMgZnVuY3Rpb25hbGl0eSBkdXJpbmcgdGhlIFRTIGltcGxlbWVudGF0aW9uXG4gICAgICovXG4gICAgZXJyb3IuU3RhdHVzQ29kZSA9IHN0YXR1c0NvZGU7XG4gICAgZXJyb3IuaXNXU0ZhaWx1cmUgPSBpc1dTRmFpbHVyZTtcbiAgICByZXR1cm4gZXJyb3I7XG4gIH07XG5cbiAgLyoqXG4gICAqIF9kZXN0cm95Q3VycmVudFdTQ29ubmVjdGlvbiAtIFJlbW92ZXMgdGhlIGN1cnJlbnQgV1MgY29ubmVjdGlvblxuICAgKlxuICAgKi9cbiAgX2Rlc3Ryb3lDdXJyZW50V1NDb25uZWN0aW9uKCkge1xuICAgIC8vIGluY3JlbWVudCB0aGUgSUQsIG1lYW5pbmcgd2Ugd2lsbCBpZ25vcmUgYWxsIG1lc3NhZ2VzIGZyb20gdGhlIG9sZFxuICAgIC8vIHdzIGNvbm5lY3Rpb24gZnJvbSBub3cgb24uXG4gICAgdGhpcy53c0lEICs9IDE7XG5cbiAgICB0cnkge1xuICAgICAgdGhpcz8ud3M/LnJlbW92ZUFsbExpc3RlbmVycygpO1xuICAgICAgdGhpcz8ud3M/LmNsb3NlKCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgLy8gd2UgZG9uJ3QgY2FyZVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBfc2V0dXBQcm9taXNlIC0gc2V0cyB1cCB0aGUgdGhpcy5jb25uZWN0T3BlbiBwcm9taXNlXG4gICAqL1xuICBfc2V0dXBDb25uZWN0aW9uUHJvbWlzZSA9ICgpID0+IHtcbiAgICB0aGlzLmlzUmVzb2x2ZWQgPSBmYWxzZTtcbiAgICAvKiogYSBwcm9taXNlIHRoYXQgaXMgcmVzb2x2ZWQgb25jZSB3cy5vcGVuIGlzIGNhbGxlZCAqL1xuICAgIHRoaXMuY29ubmVjdGlvbk9wZW4gPSBuZXcgUHJvbWlzZTxDb25uZWN0ZWRFdmVudD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdGhpcy5yZXNvbHZlUHJvbWlzZSA9IHJlc29sdmU7XG4gICAgICB0aGlzLnJlamVjdFByb21pc2UgPSByZWplY3Q7XG4gICAgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNjaGVkdWxlcyBhIG5leHQgaGVhbHRoIGNoZWNrIHBpbmcgZm9yIHdlYnNvY2tldC5cbiAgICovXG4gIHNjaGVkdWxlTmV4dFBpbmcgPSAoKSA9PiB7XG4gICAgaWYgKHRoaXMuaGVhbHRoQ2hlY2tUaW1lb3V0UmVmKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5oZWFsdGhDaGVja1RpbWVvdXRSZWYpO1xuICAgIH1cblxuICAgIC8vIDMwIHNlY29uZHMgaXMgdGhlIHJlY29tbWVuZGVkIGludGVydmFsIChtZXNzZW5nZXIgdXNlcyB0aGlzKVxuICAgIHRoaXMuaGVhbHRoQ2hlY2tUaW1lb3V0UmVmID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAvLyBzZW5kIHRoZSBoZWFsdGhjaGVjay4uLiwgc2VydmVyIHJlcGxpZXMgd2l0aCBhIGhlYWx0aCBjaGVjayBldmVudFxuICAgICAgY29uc3QgZGF0YSA9IFt7IHR5cGU6ICdoZWFsdGguY2hlY2snLCBjbGllbnRfaWQ6IHRoaXMuY2xpZW50LmNsaWVudElEIH1dO1xuICAgICAgLy8gdHJ5IHRvIHNlbmQgb24gdGhlIGNvbm5lY3Rpb25cbiAgICAgIHRyeSB7XG4gICAgICAgIHRoaXMud3M/LnNlbmQoSlNPTi5zdHJpbmdpZnkoZGF0YSkpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBlcnJvciB3aWxsIGFscmVhZHkgYmUgZGV0ZWN0ZWQgZWxzZXdoZXJlXG4gICAgICB9XG4gICAgfSwgdGhpcy5waW5nSW50ZXJ2YWwpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBzY2hlZHVsZUNvbm5lY3Rpb25DaGVjayAtIHNjaGVkdWxlcyBhIGNoZWNrIGZvciB0aW1lIGRpZmZlcmVuY2UgYmV0d2VlbiBsYXN0IHJlY2VpdmVkIGV2ZW50IGFuZCBub3cuXG4gICAqIElmIHRoZSBkaWZmZXJlbmNlIGlzIG1vcmUgdGhhbiAzNSBzZWNvbmRzLCBpdCBtZWFucyBvdXIgaGVhbHRoIGNoZWNrIGxvZ2ljIGhhcyBmYWlsZWQgYW5kIHdlYnNvY2tldCBuZWVkc1xuICAgKiB0byBiZSByZWNvbm5lY3RlZC5cbiAgICovXG4gIHNjaGVkdWxlQ29ubmVjdGlvbkNoZWNrID0gKCkgPT4ge1xuICAgIGlmICh0aGlzLmNvbm5lY3Rpb25DaGVja1RpbWVvdXRSZWYpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLmNvbm5lY3Rpb25DaGVja1RpbWVvdXRSZWYpO1xuICAgIH1cblxuICAgIHRoaXMuY29ubmVjdGlvbkNoZWNrVGltZW91dFJlZiA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICAgIGlmIChcbiAgICAgICAgdGhpcy5sYXN0RXZlbnQgJiZcbiAgICAgICAgbm93LmdldFRpbWUoKSAtIHRoaXMubGFzdEV2ZW50LmdldFRpbWUoKSA+IHRoaXMuY29ubmVjdGlvbkNoZWNrVGltZW91dFxuICAgICAgKSB7XG4gICAgICAgIHRoaXMuX2xvZygnc2NoZWR1bGVDb25uZWN0aW9uQ2hlY2sgLSBnb2luZyB0byByZWNvbm5lY3QnKTtcbiAgICAgICAgdGhpcy5fc2V0SGVhbHRoKGZhbHNlKTtcbiAgICAgICAgdGhpcy5fcmVjb25uZWN0KCk7XG4gICAgICB9XG4gICAgfSwgdGhpcy5jb25uZWN0aW9uQ2hlY2tUaW1lb3V0KTtcbiAgfTtcbn1cbiIsImltcG9ydCB7IGZyb21CeXRlQXJyYXkgfSBmcm9tICdiYXNlNjQtanMnO1xuXG5mdW5jdGlvbiBpc1N0cmluZzxUPihhcnJheU9yU3RyaW5nOiBzdHJpbmcgfCBUW10pOiBhcnJheU9yU3RyaW5nIGlzIHN0cmluZyB7XG4gIHJldHVybiB0eXBlb2YgKGFycmF5T3JTdHJpbmcgYXMgc3RyaW5nKSA9PT0gJ3N0cmluZyc7XG59XG5cbnR5cGUgTWFwR2VuZXJpY0NhbGxiYWNrPFQsIFU+ID0gKHZhbHVlOiBULCBpbmRleDogbnVtYmVyLCBhcnJheTogVFtdKSA9PiBVO1xudHlwZSBNYXBTdHJpbmdDYWxsYmFjazxVPiA9ICh2YWx1ZTogc3RyaW5nLCBpbmRleDogbnVtYmVyLCBzdHJpbmc6IHN0cmluZykgPT4gVTtcblxuZnVuY3Rpb24gaXNNYXBTdHJpbmdDYWxsYmFjazxULCBVPihcbiAgYXJyYXlPclN0cmluZzogc3RyaW5nIHwgVFtdLFxuICBjYWxsYmFjazogTWFwR2VuZXJpY0NhbGxiYWNrPFQsIFU+IHwgTWFwU3RyaW5nQ2FsbGJhY2s8VT4sXG4pOiBjYWxsYmFjayBpcyBNYXBTdHJpbmdDYWxsYmFjazxVPiB7XG4gIHJldHVybiAhIWNhbGxiYWNrICYmIGlzU3RyaW5nKGFycmF5T3JTdHJpbmcpO1xufVxuXG4vLyBzb3VyY2UgLSBodHRwczovL2dpdGh1Yi5jb20vYmVhdGdhbW1pdC9iYXNlNjQtanMvYmxvYi9tYXN0ZXIvdGVzdC9jb252ZXJ0LmpzI0w3MlxuZnVuY3Rpb24gbWFwPFQsIFU+KGFycmF5OiBUW10sIGNhbGxiYWNrOiBNYXBHZW5lcmljQ2FsbGJhY2s8VCwgVT4pOiBVW107XG5mdW5jdGlvbiBtYXA8VT4oc3RyaW5nOiBzdHJpbmcsIGNhbGxiYWNrOiBNYXBTdHJpbmdDYWxsYmFjazxVPik6IFVbXTtcbmZ1bmN0aW9uIG1hcDxULCBVPihcbiAgYXJyYXlPclN0cmluZzogc3RyaW5nIHwgVFtdLFxuICBjYWxsYmFjazogTWFwR2VuZXJpY0NhbGxiYWNrPFQsIFU+IHwgTWFwU3RyaW5nQ2FsbGJhY2s8VT4sXG4pOiBVW10ge1xuICBjb25zdCByZXMgPSBbXTtcblxuICBpZiAoaXNTdHJpbmcoYXJyYXlPclN0cmluZykgJiYgaXNNYXBTdHJpbmdDYWxsYmFjayhhcnJheU9yU3RyaW5nLCBjYWxsYmFjaykpIHtcbiAgICBmb3IgKGxldCBrID0gMCwgbGVuID0gYXJyYXlPclN0cmluZy5sZW5ndGg7IGsgPCBsZW47IGsrKykge1xuICAgICAgaWYgKGFycmF5T3JTdHJpbmcuY2hhckF0KGspKSB7XG4gICAgICAgIGNvbnN0IGtWYWx1ZSA9IGFycmF5T3JTdHJpbmcuY2hhckF0KGspO1xuICAgICAgICBjb25zdCBtYXBwZWRWYWx1ZSA9IGNhbGxiYWNrKGtWYWx1ZSwgaywgYXJyYXlPclN0cmluZyk7XG4gICAgICAgIHJlc1trXSA9IG1hcHBlZFZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIGlmIChcbiAgICAhaXNTdHJpbmcoYXJyYXlPclN0cmluZykgJiZcbiAgICAhaXNNYXBTdHJpbmdDYWxsYmFjayhhcnJheU9yU3RyaW5nLCBjYWxsYmFjaylcbiAgKSB7XG4gICAgZm9yIChsZXQgayA9IDAsIGxlbiA9IGFycmF5T3JTdHJpbmcubGVuZ3RoOyBrIDwgbGVuOyBrKyspIHtcbiAgICAgIGlmIChrIGluIGFycmF5T3JTdHJpbmcpIHtcbiAgICAgICAgY29uc3Qga1ZhbHVlID0gYXJyYXlPclN0cmluZ1trXTtcbiAgICAgICAgY29uc3QgbWFwcGVkVmFsdWUgPSBjYWxsYmFjayhrVmFsdWUsIGssIGFycmF5T3JTdHJpbmcpO1xuICAgICAgICByZXNba10gPSBtYXBwZWRWYWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmVzO1xufVxuXG5leHBvcnQgY29uc3QgZW5jb2RlQmFzZTY0ID0gKGRhdGE6IHN0cmluZyk6IHN0cmluZyA9PlxuICBmcm9tQnl0ZUFycmF5KG5ldyBVaW50OEFycmF5KG1hcChkYXRhLCAoY2hhcikgPT4gY2hhci5jaGFyQ29kZUF0KDApKSkpO1xuXG4vLyBiYXNlLTY0IGRlY29kZXIgdGhyb3dzIGV4Y2VwdGlvbiBpZiBlbmNvZGVkIHN0cmluZyBpcyBub3QgcGFkZGVkIGJ5ICc9JyB0byBtYWtlIHN0cmluZyBsZW5ndGhcbi8vIGluIG11bHRpcGxlcyBvZiA0LiBTbyBnb25uYSB1c2Ugb3VyIG93biBtZXRob2QgZm9yIHRoaXMgcHVycG9zZSB0byBrZWVwIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5XG4vLyBodHRwczovL2dpdGh1Yi5jb20vYmVhdGdhbW1pdC9iYXNlNjQtanMvYmxvYi9tYXN0ZXIvaW5kZXguanMjTDI2XG5leHBvcnQgY29uc3QgZGVjb2RlQmFzZTY0ID0gKHM6IHN0cmluZyk6IHN0cmluZyA9PiB7XG4gIGNvbnN0IGUgPSB7fSBhcyB7IFtrZXk6IHN0cmluZ106IG51bWJlciB9LFxuICAgIHcgPSBTdHJpbmcuZnJvbUNoYXJDb2RlLFxuICAgIEwgPSBzLmxlbmd0aDtcbiAgbGV0IGksXG4gICAgYiA9IDAsXG4gICAgYyxcbiAgICB4LFxuICAgIGwgPSAwLFxuICAgIGEsXG4gICAgciA9ICcnO1xuICBjb25zdCBBID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky8nO1xuICBmb3IgKGkgPSAwOyBpIDwgNjQ7IGkrKykge1xuICAgIGVbQS5jaGFyQXQoaSldID0gaTtcbiAgfVxuICBmb3IgKHggPSAwOyB4IDwgTDsgeCsrKSB7XG4gICAgYyA9IGVbcy5jaGFyQXQoeCldO1xuICAgIGIgPSAoYiA8PCA2KSArIGM7XG4gICAgbCArPSA2O1xuICAgIHdoaWxlIChsID49IDgpIHtcbiAgICAgICgoYSA9IChiID4+PiAobCAtPSA4KSkgJiAweGZmKSB8fCB4IDwgTCAtIDIpICYmIChyICs9IHcoYSkpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcjtcbn07XG4iLCJpbXBvcnQgand0LCB7IFNlY3JldCwgU2lnbk9wdGlvbnMgfSBmcm9tICdqc29ud2VidG9rZW4nO1xuaW1wb3J0IGNyeXB0byBmcm9tICdjcnlwdG8nO1xuaW1wb3J0IHsgZW5jb2RlQmFzZTY0LCBkZWNvZGVCYXNlNjQgfSBmcm9tICcuL2Jhc2U2NCc7XG5pbXBvcnQgeyBVUiB9IGZyb20gJy4vdHlwZXMnO1xuXG4vKipcbiAqIENyZWF0ZXMgdGhlIEpXVCB0b2tlbiB0aGF0IGNhbiBiZSB1c2VkIGZvciBhIFVzZXJTZXNzaW9uXG4gKiBAbWV0aG9kIEpXVFVzZXJUb2tlblxuICogQG1lbWJlcm9mIHNpZ25pbmdcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge1NlY3JldH0gYXBpU2VjcmV0IC0gQVBJIFNlY3JldCBrZXlcbiAqIEBwYXJhbSB7c3RyaW5nfSB1c2VySWQgLSBUaGUgdXNlcl9pZCBrZXkgaW4gdGhlIEpXVCBwYXlsb2FkXG4gKiBAcGFyYW0ge1VSfSBbZXh0cmFEYXRhXSAtIEV4dHJhIHRoYXQgc2hvdWxkIGJlIHBhcnQgb2YgdGhlIEpXVCB0b2tlblxuICogQHBhcmFtIHtTaWduT3B0aW9uc30gW2p3dE9wdGlvbnNdIC0gT3B0aW9ucyB0aGF0IGNhbiBiZSBwYXN0IHRvIGp3dC5zaWduXG4gKiBAcmV0dXJuIHtzdHJpbmd9IEpXVCBUb2tlblxuICovXG5leHBvcnQgZnVuY3Rpb24gSldUVXNlclRva2VuKFxuICBhcGlTZWNyZXQ6IFNlY3JldCxcbiAgdXNlcklkOiBzdHJpbmcsXG4gIGV4dHJhRGF0YTogVVIgPSB7fSxcbiAgand0T3B0aW9uczogU2lnbk9wdGlvbnMgPSB7fSxcbikge1xuICBpZiAodHlwZW9mIHVzZXJJZCAhPT0gJ3N0cmluZycpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCd1c2VySWQgc2hvdWxkIGJlIGEgc3RyaW5nJyk7XG4gIH1cblxuICBjb25zdCBwYXlsb2FkOiB7IHVzZXJfaWQ6IHN0cmluZyB9ICYgVVIgPSB7XG4gICAgdXNlcl9pZDogdXNlcklkLFxuICAgIC4uLmV4dHJhRGF0YSxcbiAgfTtcblxuICAvLyBtYWtlIHN1cmUgd2UgcmV0dXJuIGEgY2xlYXIgZXJyb3Igd2hlbiBqd3QgaXMgc2hpbW1lZCAoaWUuIGJyb3dzZXIgYnVpbGQpXG4gIGlmIChqd3QgPT0gbnVsbCB8fCBqd3Quc2lnbiA9PSBudWxsKSB7XG4gICAgdGhyb3cgRXJyb3IoXG4gICAgICBgVW5hYmxlIHRvIGZpbmQgand0IGNyeXB0bywgaWYgeW91IGFyZSBnZXR0aW5nIHRoaXMgZXJyb3IgaXMgcHJvYmFibHkgYmVjYXVzZSB5b3UgYXJlIHRyeWluZyB0byBnZW5lcmF0ZSB0b2tlbnMgb24gYnJvd3NlciBvciBSZWFjdCBOYXRpdmUgKG9yIG90aGVyIGVudmlyb25tZW50IHdoZXJlIGNyeXB0byBmdW5jdGlvbnMgYXJlIG5vdCBhdmFpbGFibGUpLiBQbGVhc2UgTm90ZTogdG9rZW4gc2hvdWxkIG9ubHkgYmUgZ2VuZXJhdGVkIHNlcnZlci1zaWRlLmAsXG4gICAgKTtcbiAgfVxuXG4gIGNvbnN0IG9wdHM6IFNpZ25PcHRpb25zID0gT2JqZWN0LmFzc2lnbihcbiAgICB7IGFsZ29yaXRobTogJ0hTMjU2Jywgbm9UaW1lc3RhbXA6IHRydWUgfSxcbiAgICBqd3RPcHRpb25zLFxuICApO1xuXG4gIGlmIChwYXlsb2FkLmlhdCkge1xuICAgIG9wdHMubm9UaW1lc3RhbXAgPSBmYWxzZTtcbiAgfVxuICByZXR1cm4gand0LnNpZ24ocGF5bG9hZCwgYXBpU2VjcmV0LCBvcHRzKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIEpXVFNlcnZlclRva2VuKFxuICBhcGlTZWNyZXQ6IFNlY3JldCxcbiAgand0T3B0aW9uczogU2lnbk9wdGlvbnMgPSB7fSxcbikge1xuICBjb25zdCBwYXlsb2FkID0ge1xuICAgIHNlcnZlcjogdHJ1ZSxcbiAgfTtcblxuICBjb25zdCBvcHRzOiBTaWduT3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oXG4gICAgeyBhbGdvcml0aG06ICdIUzI1NicsIG5vVGltZXN0YW1wOiB0cnVlIH0sXG4gICAgand0T3B0aW9ucyxcbiAgKTtcbiAgcmV0dXJuIGp3dC5zaWduKHBheWxvYWQsIGFwaVNlY3JldCwgb3B0cyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBVc2VyRnJvbVRva2VuKHRva2VuOiBzdHJpbmcpIHtcbiAgY29uc3QgZnJhZ21lbnRzID0gdG9rZW4uc3BsaXQoJy4nKTtcbiAgaWYgKGZyYWdtZW50cy5sZW5ndGggIT09IDMpIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cbiAgY29uc3QgYjY0UGF5bG9hZCA9IGZyYWdtZW50c1sxXTtcbiAgY29uc3QgcGF5bG9hZCA9IGRlY29kZUJhc2U2NChiNjRQYXlsb2FkKTtcbiAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UocGF5bG9hZCk7XG4gIHJldHVybiBkYXRhLnVzZXJfaWQgYXMgc3RyaW5nO1xufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdXNlcklkIHRoZSBpZCBvZiB0aGUgdXNlclxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gRGV2VG9rZW4odXNlcklkOiBzdHJpbmcpIHtcbiAgcmV0dXJuIFtcbiAgICAnZXlKaGJHY2lPaUpJVXpJMU5pSXNJblI1Y0NJNklrcFhWQ0o5JywgLy97XCJhbGdcIjogXCJIUzI1NlwiLCBcInR5cFwiOiBcIkpXVFwifVxuICAgIGVuY29kZUJhc2U2NChKU09OLnN0cmluZ2lmeSh7IHVzZXJfaWQ6IHVzZXJJZCB9KSksXG4gICAgJ2RldnRva2VuJywgLy8gaGFyZGNvZGVkIHNpZ25hdHVyZVxuICBdLmpvaW4oJy4nKTtcbn1cblxuLyoqXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGJvZHkgdGhlIHNpZ25lZCBtZXNzYWdlXG4gKiBAcGFyYW0ge3N0cmluZ30gc2VjcmV0IHRoZSBzaGFyZWQgc2VjcmV0IHVzZWQgdG8gZ2VuZXJhdGUgdGhlIHNpZ25hdHVyZSAoU3RyZWFtIEFQSSBzZWNyZXQpXG4gKiBAcGFyYW0ge3N0cmluZ30gc2lnbmF0dXJlIHRoZSBzaWduYXR1cmUgdG8gdmFsaWRhdGVcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBDaGVja1NpZ25hdHVyZShcbiAgYm9keTogc3RyaW5nLFxuICBzZWNyZXQ6IHN0cmluZyxcbiAgc2lnbmF0dXJlOiBzdHJpbmcsXG4pIHtcbiAgY29uc3Qga2V5ID0gQnVmZmVyLmZyb20oc2VjcmV0LCAnYXNjaWknKTtcbiAgY29uc3QgaGFzaCA9IGNyeXB0by5jcmVhdGVIbWFjKCdzaGEyNTYnLCBrZXkpLnVwZGF0ZShib2R5KS5kaWdlc3QoJ2hleCcpO1xuICByZXR1cm4gaGFzaCA9PT0gc2lnbmF0dXJlO1xufVxuIiwiaW1wb3J0IHsgU2VjcmV0IH0gZnJvbSAnanNvbndlYnRva2VuJztcbmltcG9ydCB7IEpXVFNlcnZlclRva2VuLCBKV1RVc2VyVG9rZW4sIFVzZXJGcm9tVG9rZW4gfSBmcm9tICcuL3NpZ25pbmcnO1xuaW1wb3J0IHsgaXNGdW5jdGlvbiB9IGZyb20gJy4vdXRpbHMnO1xuaW1wb3J0IHR5cGUgeyBUb2tlbk9yUHJvdmlkZXIsIFVzZXJXaXRoSWQgfSBmcm9tICcuL3R5cGVzJztcblxuLyoqXG4gKiBUb2tlbk1hbmFnZXJcbiAqXG4gKiBIYW5kbGVzIGFsbCB0aGUgb3BlcmF0aW9ucyBhcm91bmQgdXNlciB0b2tlbi5cbiAqL1xuZXhwb3J0IGNsYXNzIFRva2VuTWFuYWdlciB7XG4gIGxvYWRUb2tlblByb21pc2U6IFByb21pc2U8c3RyaW5nPiB8IG51bGw7XG4gIHR5cGU6ICdzdGF0aWMnIHwgJ3Byb3ZpZGVyJztcbiAgc2VjcmV0PzogU2VjcmV0O1xuICB0b2tlbj86IHN0cmluZztcbiAgdG9rZW5Qcm92aWRlcj86IFRva2VuT3JQcm92aWRlcjtcbiAgdXNlcj86IFVzZXJXaXRoSWQ7XG4gIC8qKlxuICAgKiBDb25zdHJ1Y3RvclxuICAgKlxuICAgKiBAcGFyYW0ge1NlY3JldH0gc2VjcmV0XG4gICAqL1xuICBjb25zdHJ1Y3RvcihzZWNyZXQ/OiBTZWNyZXQpIHtcbiAgICB0aGlzLmxvYWRUb2tlblByb21pc2UgPSBudWxsO1xuICAgIGlmIChzZWNyZXQpIHtcbiAgICAgIHRoaXMuc2VjcmV0ID0gc2VjcmV0O1xuICAgIH1cblxuICAgIHRoaXMudHlwZSA9ICdzdGF0aWMnO1xuXG4gICAgaWYgKHRoaXMuc2VjcmV0KSB7XG4gICAgICB0aGlzLnRva2VuID0gSldUU2VydmVyVG9rZW4odGhpcy5zZWNyZXQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIHN0YXRpYyBzdHJpbmcgdG9rZW4gb3IgdG9rZW4gcHJvdmlkZXIuXG4gICAqIFRva2VuIHByb3ZpZGVyIHNob3VsZCByZXR1cm4gYSB0b2tlbiBzdHJpbmcgb3IgYSBwcm9taXNlIHdoaWNoIHJlc29sdmVzIHRvIHN0cmluZyB0b2tlbi5cbiAgICpcbiAgICogQHBhcmFtIHtUb2tlbk9yUHJvdmlkZXJ9IHRva2VuT3JQcm92aWRlciAtIHRoZSB0b2tlbiBvciB0b2tlbiBwcm92aWRlci5cbiAgICogQHBhcmFtIHtVc2VyUmVzcG9uc2V9IHVzZXIgLSB0aGUgdXNlciBvYmplY3QuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gaXNBbm9ueW1vdXMgLSB3aGV0aGVyIHRoZSB1c2VyIGlzIGFub255bW91cyBvciBub3QuXG4gICAqL1xuICBzZXRUb2tlbk9yUHJvdmlkZXIgPSBhc3luYyAoXG4gICAgdG9rZW5PclByb3ZpZGVyOiBUb2tlbk9yUHJvdmlkZXIsXG4gICAgdXNlcjogVXNlcldpdGhJZCxcbiAgICBpc0Fub255bW91czogYm9vbGVhbixcbiAgKSA9PiB7XG4gICAgdGhpcy52YWxpZGF0ZVRva2VuKHRva2VuT3JQcm92aWRlciwgdXNlciwgaXNBbm9ueW1vdXMpO1xuICAgIHRoaXMudXNlciA9IHVzZXI7XG5cbiAgICBpZiAoaXNGdW5jdGlvbih0b2tlbk9yUHJvdmlkZXIpKSB7XG4gICAgICB0aGlzLnRva2VuUHJvdmlkZXIgPSB0b2tlbk9yUHJvdmlkZXI7XG4gICAgICB0aGlzLnR5cGUgPSAncHJvdmlkZXInO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgdG9rZW5PclByb3ZpZGVyID09PSAnc3RyaW5nJykge1xuICAgICAgdGhpcy50b2tlbiA9IHRva2VuT3JQcm92aWRlcjtcbiAgICAgIHRoaXMudHlwZSA9ICdzdGF0aWMnO1xuICAgIH1cblxuICAgIGlmICghdG9rZW5PclByb3ZpZGVyICYmIHRoaXMudXNlciAmJiB0aGlzLnNlY3JldCkge1xuICAgICAgdGhpcy50b2tlbiA9IEpXVFVzZXJUb2tlbih0aGlzLnNlY3JldCwgdXNlci5pZCwge30sIHt9KTtcbiAgICAgIHRoaXMudHlwZSA9ICdzdGF0aWMnO1xuICAgIH1cblxuICAgIGF3YWl0IHRoaXMubG9hZFRva2VuKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlc2V0cyB0aGUgdG9rZW4gbWFuYWdlci5cbiAgICogVXNlZnVsIGZvciBjbGllbnQgZGlzY29ubmVjdGlvbiBvciBzd2l0Y2hpbmcgdXNlci5cbiAgICovXG4gIHJlc2V0ID0gKCkgPT4ge1xuICAgIHRoaXMudG9rZW4gPSB1bmRlZmluZWQ7XG4gICAgdGhpcy51c2VyID0gdW5kZWZpbmVkO1xuICAgIHRoaXMubG9hZFRva2VuUHJvbWlzZSA9IG51bGw7XG4gIH07XG5cbiAgLy8gVmFsaWRhdGVzIHRoZSB1c2VyIHRva2VuLlxuICB2YWxpZGF0ZVRva2VuID0gKFxuICAgIHRva2VuT3JQcm92aWRlcjogVG9rZW5PclByb3ZpZGVyLFxuICAgIHVzZXI6IFVzZXJXaXRoSWQsXG4gICAgaXNBbm9ueW1vdXM6IGJvb2xlYW4sXG4gICkgPT4ge1xuICAgIC8vIGFsbG93IGVtcHR5IHRva2VuIGZvciBhbm9uIHVzZXJcbiAgICBpZiAodXNlciAmJiBpc0Fub255bW91cyAmJiAhdG9rZW5PclByb3ZpZGVyKSByZXR1cm47XG5cbiAgICAvLyBEb24ndCBhbGxvdyBlbXB0eSB0b2tlbiBmb3Igbm9uLXNlcnZlciBzaWRlIGNsaWVudC5cbiAgICBpZiAoIXRoaXMuc2VjcmV0ICYmICF0b2tlbk9yUHJvdmlkZXIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVXNlcldpdGhJZCB0b2tlbiBjYW4gbm90IGJlIGVtcHR5Jyk7XG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgdG9rZW5PclByb3ZpZGVyICYmXG4gICAgICB0eXBlb2YgdG9rZW5PclByb3ZpZGVyICE9PSAnc3RyaW5nJyAmJlxuICAgICAgIWlzRnVuY3Rpb24odG9rZW5PclByb3ZpZGVyKVxuICAgICkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCd1c2VyIHRva2VuIHNob3VsZCBlaXRoZXIgYmUgYSBzdHJpbmcgb3IgYSBmdW5jdGlvbicpO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgdG9rZW5PclByb3ZpZGVyID09PSAnc3RyaW5nJykge1xuICAgICAgLy8gQWxsb3cgZW1wdHkgdG9rZW4gZm9yIGFub255bW91cyB1c2Vyc1xuICAgICAgaWYgKGlzQW5vbnltb3VzICYmIHRva2VuT3JQcm92aWRlciA9PT0gJycpIHJldHVybjtcblxuICAgICAgY29uc3QgdG9rZW5Vc2VySWQgPSBVc2VyRnJvbVRva2VuKHRva2VuT3JQcm92aWRlcik7XG4gICAgICBpZiAoXG4gICAgICAgIHRva2VuT3JQcm92aWRlciAhPSBudWxsICYmXG4gICAgICAgICh0b2tlblVzZXJJZCA9PSBudWxsIHx8XG4gICAgICAgICAgdG9rZW5Vc2VySWQgPT09ICcnIHx8XG4gICAgICAgICAgKCFpc0Fub255bW91cyAmJiB0b2tlblVzZXJJZCAhPT0gdXNlci5pZCkpXG4gICAgICApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICd1c2VyVG9rZW4gZG9lcyBub3QgaGF2ZSBhIHVzZXJfaWQgb3IgaXMgbm90IG1hdGNoaW5nIHdpdGggdXNlci5pZCcsXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8vIFJlc29sdmVzIHdoZW4gdG9rZW4gaXMgcmVhZHkuIFRoaXMgZnVuY3Rpb24gaXMgc2ltcGx5IHRvIGNoZWNrIGlmIGxvYWRUb2tlbiBpcyBpbiBwcm9ncmVzcywgaW4gd2hpY2hcbiAgLy8gY2FzZSBhIGZ1bmN0aW9uIHNob3VsZCB3YWl0LlxuICB0b2tlblJlYWR5ID0gKCkgPT4gdGhpcy5sb2FkVG9rZW5Qcm9taXNlO1xuXG4gIC8vIEZldGNoZXMgYSB0b2tlbiBmcm9tIHRva2VuUHJvdmlkZXIgZnVuY3Rpb24gYW5kIHNldHMgaW4gdG9rZW5NYW5hZ2VyLlxuICAvLyBJbiBjYXNlIG9mIHN0YXRpYyB0b2tlbiwgaXQgd2lsbCBzaW1wbHkgcmVzb2x2ZSB0byBzdGF0aWMgdG9rZW4uXG4gIGxvYWRUb2tlbiA9ICgpID0+IHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tYXN5bmMtcHJvbWlzZS1leGVjdXRvclxuICAgIHRoaXMubG9hZFRva2VuUHJvbWlzZSA9IG5ldyBQcm9taXNlKGFzeW5jIChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGlmICh0aGlzLnR5cGUgPT09ICdzdGF0aWMnKSB7XG4gICAgICAgIHJldHVybiByZXNvbHZlKHRoaXMudG9rZW4gYXMgc3RyaW5nKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMudG9rZW5Qcm92aWRlciAmJiB0eXBlb2YgdGhpcy50b2tlblByb3ZpZGVyICE9PSAnc3RyaW5nJykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHRoaXMudG9rZW4gPSBhd2FpdCB0aGlzLnRva2VuUHJvdmlkZXIoKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIHJldHVybiByZWplY3QoXG4gICAgICAgICAgICBuZXcgRXJyb3IoYENhbGwgdG8gdG9rZW5Qcm92aWRlciBmYWlsZWQgd2l0aCBtZXNzYWdlOiAke2V9YCksXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICByZXNvbHZlKHRoaXMudG9rZW4pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRoaXMubG9hZFRva2VuUHJvbWlzZTtcbiAgfTtcblxuICAvLyBSZXR1cm5zIGEgY3VycmVudCB0b2tlblxuICBnZXRUb2tlbiA9ICgpID0+IHtcbiAgICBpZiAodGhpcy50b2tlbikge1xuICAgICAgcmV0dXJuIHRoaXMudG9rZW47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMudXNlciAmJiAhdGhpcy50b2tlbikge1xuICAgICAgcmV0dXJuIHRoaXMudG9rZW47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc2VjcmV0KSB7XG4gICAgICByZXR1cm4gSldUU2VydmVyVG9rZW4odGhpcy5zZWNyZXQpO1xuICAgIH1cblxuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBCb3RoIHNlY3JldCBhbmQgdXNlciB0b2tlbnMgYXJlIG5vdCBzZXQuIEVpdGhlciBjbGllbnQuY29ubmVjdFVzZXIgd2Fzbid0IGNhbGxlZCBvciBjbGllbnQuZGlzY29ubmVjdCB3YXMgY2FsbGVkYCxcbiAgICApO1xuICB9O1xuXG4gIGlzU3RhdGljID0gKCkgPT4gdGhpcy50eXBlID09PSAnc3RhdGljJztcbn1cbiIsImltcG9ydCB7IEF4aW9zUmVzcG9uc2UgfSBmcm9tICdheGlvcyc7XG5pbXBvcnQgeyBBUElFcnJvclJlc3BvbnNlIH0gZnJvbSAnLi90eXBlcyc7XG5cbmV4cG9ydCBjb25zdCBBUElFcnJvckNvZGVzOiBSZWNvcmQ8XG4gIHN0cmluZyxcbiAgeyBuYW1lOiBzdHJpbmc7IHJldHJ5YWJsZTogYm9vbGVhbiB9XG4+ID0ge1xuICAnLTEnOiB7IG5hbWU6ICdJbnRlcm5hbFN5c3RlbUVycm9yJywgcmV0cnlhYmxlOiB0cnVlIH0sXG4gICcyJzogeyBuYW1lOiAnQWNjZXNzS2V5RXJyb3InLCByZXRyeWFibGU6IGZhbHNlIH0sXG4gICczJzogeyBuYW1lOiAnQXV0aGVudGljYXRpb25GYWlsZWRFcnJvcicsIHJldHJ5YWJsZTogdHJ1ZSB9LFxuICAnNCc6IHsgbmFtZTogJ0lucHV0RXJyb3InLCByZXRyeWFibGU6IGZhbHNlIH0sXG4gICc2JzogeyBuYW1lOiAnRHVwbGljYXRlVXNlcm5hbWVFcnJvcicsIHJldHJ5YWJsZTogZmFsc2UgfSxcbiAgJzknOiB7IG5hbWU6ICdSYXRlTGltaXRFcnJvcicsIHJldHJ5YWJsZTogdHJ1ZSB9LFxuICAnMTYnOiB7IG5hbWU6ICdEb2VzTm90RXhpc3RFcnJvcicsIHJldHJ5YWJsZTogZmFsc2UgfSxcbiAgJzE3JzogeyBuYW1lOiAnTm90QWxsb3dlZEVycm9yJywgcmV0cnlhYmxlOiBmYWxzZSB9LFxuICAnMTgnOiB7IG5hbWU6ICdFdmVudE5vdFN1cHBvcnRlZEVycm9yJywgcmV0cnlhYmxlOiBmYWxzZSB9LFxuICAnMTknOiB7IG5hbWU6ICdDaGFubmVsRmVhdHVyZU5vdFN1cHBvcnRlZEVycm9yJywgcmV0cnlhYmxlOiBmYWxzZSB9LFxuICAnMjAnOiB7IG5hbWU6ICdNZXNzYWdlVG9vTG9uZ0Vycm9yJywgcmV0cnlhYmxlOiBmYWxzZSB9LFxuICAnMjEnOiB7IG5hbWU6ICdNdWx0aXBsZU5lc3RpbmdMZXZlbEVycm9yJywgcmV0cnlhYmxlOiBmYWxzZSB9LFxuICAnMjInOiB7IG5hbWU6ICdQYXlsb2FkVG9vQmlnRXJyb3InLCByZXRyeWFibGU6IGZhbHNlIH0sXG4gICcyMyc6IHsgbmFtZTogJ1JlcXVlc3RUaW1lb3V0RXJyb3InLCByZXRyeWFibGU6IHRydWUgfSxcbiAgJzI0JzogeyBuYW1lOiAnTWF4SGVhZGVyU2l6ZUV4Y2VlZGVkRXJyb3InLCByZXRyeWFibGU6IGZhbHNlIH0sXG4gICc0MCc6IHsgbmFtZTogJ0F1dGhFcnJvclRva2VuRXhwaXJlZCcsIHJldHJ5YWJsZTogZmFsc2UgfSxcbiAgJzQxJzogeyBuYW1lOiAnQXV0aEVycm9yVG9rZW5Ob3RWYWxpZFlldCcsIHJldHJ5YWJsZTogZmFsc2UgfSxcbiAgJzQyJzogeyBuYW1lOiAnQXV0aEVycm9yVG9rZW5Vc2VkQmVmb3JlSXNzdWVkQXQnLCByZXRyeWFibGU6IGZhbHNlIH0sXG4gICc0Myc6IHsgbmFtZTogJ0F1dGhFcnJvclRva2VuU2lnbmF0dXJlSW52YWxpZCcsIHJldHJ5YWJsZTogZmFsc2UgfSxcbiAgJzQ0JzogeyBuYW1lOiAnQ3VzdG9tQ29tbWFuZEVuZHBvaW50TWlzc2luZ0Vycm9yJywgcmV0cnlhYmxlOiBmYWxzZSB9LFxuICAnNDUnOiB7IG5hbWU6ICdDdXN0b21Db21tYW5kRW5kcG9pbnRDYWxsRXJyb3InLCByZXRyeWFibGU6IHRydWUgfSxcbiAgJzQ2JzogeyBuYW1lOiAnQ29ubmVjdGlvbklETm90Rm91bmRFcnJvcicsIHJldHJ5YWJsZTogZmFsc2UgfSxcbiAgJzYwJzogeyBuYW1lOiAnQ29vbERvd25FcnJvcicsIHJldHJ5YWJsZTogdHJ1ZSB9LFxuICAnNjknOiB7IG5hbWU6ICdFcnJXcm9uZ1JlZ2lvbicsIHJldHJ5YWJsZTogZmFsc2UgfSxcbiAgJzcwJzogeyBuYW1lOiAnRXJyUXVlcnlDaGFubmVsUGVybWlzc2lvbnMnLCByZXRyeWFibGU6IGZhbHNlIH0sXG4gICc3MSc6IHsgbmFtZTogJ0VyclRvb01hbnlDb25uZWN0aW9ucycsIHJldHJ5YWJsZTogdHJ1ZSB9LFxuICAnOTknOiB7IG5hbWU6ICdBcHBTdXNwZW5kZWRFcnJvcicsIHJldHJ5YWJsZTogZmFsc2UgfSxcbn07XG5cbi8vIHRvZG86IHRoaXMgaXMgbm90IGEgY29ycmVjdCBlcnJvciBkZWNsYXJhdGlvbi4gL3JlY29yZGluZ3MgZW5kcG9pbnQgcmV0dXJucyBlcnJvciBvYmplY3RzIGFzIGZvbGxvd3M6XG4vLyB7XG4vLyAgICAgXCJjb2RlXCI6IDE2LFxuLy8gICAgIFwibWVzc2FnZVwiOiBcIkxpc3RSZWNvcmRpbmdzIGZhaWxlZCB3aXRoIGVycm9yOiBcXFwiQ2FuJ3QgZmluZCBjYWxsIHdpdGggaWQgZGVmYXVsdDpiYmJiXFxcIlwiLFxuLy8gICAgIFwiU3RhdHVzQ29kZVwiOiA0MDQsXG4vLyAgICAgXCJkdXJhdGlvblwiOiBcIjAuMDBtc1wiLFxuLy8gICAgIFwibW9yZV9pbmZvXCI6IFwiaHR0cHM6Ly9nZXRzdHJlYW0uaW8vY2hhdC9kb2NzL2FwaV9lcnJvcnNfcmVzcG9uc2VcIixcbi8vICAgICBcImRldGFpbHNcIjogW11cbi8vIH1cblxudHlwZSBBUElFcnJvciA9IEVycm9yICYgeyBjb2RlOiBudW1iZXI7IGlzV1NGYWlsdXJlPzogYm9vbGVhbiB9O1xuXG5leHBvcnQgZnVuY3Rpb24gaXNBUElFcnJvcihlcnJvcjogRXJyb3IpOiBlcnJvciBpcyBBUElFcnJvciB7XG4gIHJldHVybiAoZXJyb3IgYXMgQVBJRXJyb3IpLmNvZGUgIT09IHVuZGVmaW5lZDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzRXJyb3JSZXRyeWFibGUoZXJyb3I6IEFQSUVycm9yKSB7XG4gIGlmICghZXJyb3IuY29kZSkgcmV0dXJuIGZhbHNlO1xuICBjb25zdCBlcnIgPSBBUElFcnJvckNvZGVzW2Ake2Vycm9yLmNvZGV9YF07XG4gIGlmICghZXJyKSByZXR1cm4gZmFsc2U7XG4gIHJldHVybiBlcnIucmV0cnlhYmxlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNDb25uZWN0aW9uSURFcnJvcihlcnJvcjogQVBJRXJyb3IpIHtcbiAgcmV0dXJuIGVycm9yLmNvZGUgPT09IDQ2OyAvLyBDb25uZWN0aW9uSUROb3RGb3VuZEVycm9yXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1dTRmFpbHVyZShlcnI6IEFQSUVycm9yKTogYm9vbGVhbiB7XG4gIGlmICh0eXBlb2YgZXJyLmlzV1NGYWlsdXJlID09PSAnYm9vbGVhbicpIHtcbiAgICByZXR1cm4gZXJyLmlzV1NGYWlsdXJlO1xuICB9XG5cbiAgdHJ5IHtcbiAgICByZXR1cm4gSlNPTi5wYXJzZShlcnIubWVzc2FnZSkuaXNXU0ZhaWx1cmU7XG4gIH0gY2F0Y2ggKF8pIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzRXJyb3JSZXNwb25zZShcbiAgcmVzOiBBeGlvc1Jlc3BvbnNlPHVua25vd24+LFxuKTogcmVzIGlzIEF4aW9zUmVzcG9uc2U8QVBJRXJyb3JSZXNwb25zZT4ge1xuICByZXR1cm4gIXJlcy5zdGF0dXMgfHwgcmVzLnN0YXR1cyA8IDIwMCB8fCAzMDAgPD0gcmVzLnN0YXR1cztcbn1cbiIsImltcG9ydCBheGlvcywgeyBBeGlvc1JlcXVlc3RDb25maWcsIENhbmNlbFRva2VuU291cmNlIH0gZnJvbSAnYXhpb3MnO1xuaW1wb3J0IHsgU3RyZWFtQ2xpZW50IH0gZnJvbSAnLi9jbGllbnQnO1xuaW1wb3J0IHtcbiAgYWRkQ29ubmVjdGlvbkV2ZW50TGlzdGVuZXJzLFxuICByZW1vdmVDb25uZWN0aW9uRXZlbnRMaXN0ZW5lcnMsXG4gIHJldHJ5SW50ZXJ2YWwsXG4gIHNsZWVwLFxufSBmcm9tICcuL3V0aWxzJztcbmltcG9ydCB7IGlzQVBJRXJyb3IsIGlzQ29ubmVjdGlvbklERXJyb3IsIGlzRXJyb3JSZXRyeWFibGUgfSBmcm9tICcuL2Vycm9ycyc7XG5pbXBvcnQgeyBMb2dMZXZlbCwgU3RyZWFtVmlkZW9FdmVudCwgVVIgfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7IENvbm5lY3RlZEV2ZW50IH0gZnJvbSAnLi4vLi4vZ2VuL2Nvb3JkaW5hdG9yJztcblxuZXhwb3J0IGVudW0gQ29ubmVjdGlvblN0YXRlIHtcbiAgQ2xvc2VkID0gJ0NMT1NFRCcsXG4gIENvbm5lY3RlZCA9ICdDT05ORUNURUQnLFxuICBDb25uZWN0aW5nID0gJ0NPTk5FQ1RJTkcnLFxuICBEaXNjb25uZWN0ZWQgPSAnRElTQ09OTkVDVEVEJyxcbiAgSW5pdCA9ICdJTklUJyxcbn1cblxuZXhwb3J0IGNsYXNzIFdTQ29ubmVjdGlvbkZhbGxiYWNrIHtcbiAgY2xpZW50OiBTdHJlYW1DbGllbnQ7XG4gIHN0YXRlOiBDb25uZWN0aW9uU3RhdGU7XG4gIGNvbnNlY3V0aXZlRmFpbHVyZXM6IG51bWJlcjtcbiAgY29ubmVjdGlvbklEPzogc3RyaW5nO1xuICBjYW5jZWxUb2tlbj86IENhbmNlbFRva2VuU291cmNlO1xuXG4gIGNvbnN0cnVjdG9yKGNsaWVudDogU3RyZWFtQ2xpZW50KSB7XG4gICAgdGhpcy5jbGllbnQgPSBjbGllbnQ7XG4gICAgdGhpcy5zdGF0ZSA9IENvbm5lY3Rpb25TdGF0ZS5Jbml0O1xuICAgIHRoaXMuY29uc2VjdXRpdmVGYWlsdXJlcyA9IDA7XG5cbiAgICBhZGRDb25uZWN0aW9uRXZlbnRMaXN0ZW5lcnModGhpcy5fb25saW5lU3RhdHVzQ2hhbmdlZCk7XG4gIH1cblxuICBfbG9nKG1zZzogc3RyaW5nLCBleHRyYTogVVIgPSB7fSwgbGV2ZWw6IExvZ0xldmVsID0gJ2luZm8nKSB7XG4gICAgdGhpcy5jbGllbnQubG9nZ2VyKGxldmVsLCAnV1NDb25uZWN0aW9uRmFsbGJhY2s6JyArIG1zZywge1xuICAgICAgLi4uZXh0cmEsXG4gICAgfSk7XG4gIH1cblxuICBfc2V0U3RhdGUoc3RhdGU6IENvbm5lY3Rpb25TdGF0ZSkge1xuICAgIHRoaXMuX2xvZyhgX3NldFN0YXRlKCkgLSAke3N0YXRlfWApO1xuXG4gICAgLy8gdHJhbnNpdGlvbiBmcm9tIGNvbm5lY3RpbmcgPT4gY29ubmVjdGVkXG4gICAgaWYgKFxuICAgICAgdGhpcy5zdGF0ZSA9PT0gQ29ubmVjdGlvblN0YXRlLkNvbm5lY3RpbmcgJiZcbiAgICAgIHN0YXRlID09PSBDb25uZWN0aW9uU3RhdGUuQ29ubmVjdGVkXG4gICAgKSB7XG4gICAgICB0aGlzLmNsaWVudC5kaXNwYXRjaEV2ZW50KHsgdHlwZTogJ2Nvbm5lY3Rpb24uY2hhbmdlZCcsIG9ubGluZTogdHJ1ZSB9KTtcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICBzdGF0ZSA9PT0gQ29ubmVjdGlvblN0YXRlLkNsb3NlZCB8fFxuICAgICAgc3RhdGUgPT09IENvbm5lY3Rpb25TdGF0ZS5EaXNjb25uZWN0ZWRcbiAgICApIHtcbiAgICAgIHRoaXMuY2xpZW50LmRpc3BhdGNoRXZlbnQoeyB0eXBlOiAnY29ubmVjdGlvbi5jaGFuZ2VkJywgb25saW5lOiBmYWxzZSB9KTtcbiAgICB9XG5cbiAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gIH1cblxuICAvKiogQHByaXZhdGUgKi9cbiAgX29ubGluZVN0YXR1c0NoYW5nZWQgPSAoZXZlbnQ6IHsgdHlwZTogc3RyaW5nIH0pID0+IHtcbiAgICB0aGlzLl9sb2coYF9vbmxpbmVTdGF0dXNDaGFuZ2VkKCkgLSAke2V2ZW50LnR5cGV9YCk7XG5cbiAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ29mZmxpbmUnKSB7XG4gICAgICB0aGlzLl9zZXRTdGF0ZShDb25uZWN0aW9uU3RhdGUuQ2xvc2VkKTtcbiAgICAgIHRoaXMuY2FuY2VsVG9rZW4/LmNhbmNlbCgnZGlzY29ubmVjdCgpIGlzIGNhbGxlZCcpO1xuICAgICAgdGhpcy5jYW5jZWxUb2tlbiA9IHVuZGVmaW5lZDtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ29ubGluZScgJiYgdGhpcy5zdGF0ZSA9PT0gQ29ubmVjdGlvblN0YXRlLkNsb3NlZCkge1xuICAgICAgdGhpcy5jb25uZWN0KHRydWUpO1xuICAgIH1cbiAgfTtcblxuICAvKiogQHByaXZhdGUgKi9cbiAgX3JlcSA9IGFzeW5jIDxUID0gVVI+KFxuICAgIHBhcmFtczogVVIsXG4gICAgY29uZmlnOiBBeGlvc1JlcXVlc3RDb25maWcsXG4gICAgcmV0cnk6IGJvb2xlYW4sXG4gICk6IFByb21pc2U8VD4gPT4ge1xuICAgIGlmICghdGhpcy5jYW5jZWxUb2tlbiAmJiAhcGFyYW1zLmNsb3NlKSB7XG4gICAgICB0aGlzLmNhbmNlbFRva2VuID0gYXhpb3MuQ2FuY2VsVG9rZW4uc291cmNlKCk7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuY2xpZW50LmRvQXhpb3NSZXF1ZXN0PFQ+KFxuICAgICAgICAnZ2V0JyxcbiAgICAgICAgKHRoaXMuY2xpZW50LmJhc2VVUkwgYXMgc3RyaW5nKS5yZXBsYWNlKCc6MzAzMCcsICc6ODkwMCcpICsgJy9sb25ncG9sbCcsIC8vIHJlcGxhY2UgcG9ydCBpZiBwcmVzZW50IGZvciB0ZXN0aW5nIHdpdGggbG9jYWwgQVBJXG4gICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAge1xuICAgICAgICAgIGNvbmZpZzogeyAuLi5jb25maWcsIGNhbmNlbFRva2VuOiB0aGlzLmNhbmNlbFRva2VuPy50b2tlbiB9LFxuICAgICAgICAgIHBhcmFtcyxcbiAgICAgICAgICBwdWJsaWNFbmRwb2ludDogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgICk7XG5cbiAgICAgIHRoaXMuY29uc2VjdXRpdmVGYWlsdXJlcyA9IDA7IC8vIGFsd2F5cyByZXNldCBpbiBjYXNlIG9mIG5vIGVycm9yXG4gICAgICByZXR1cm4gcmVzO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgdGhpcy5jb25zZWN1dGl2ZUZhaWx1cmVzICs9IDE7XG5cbiAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgIGlmIChyZXRyeSAmJiBpc0Vycm9yUmV0cnlhYmxlKGVycikpIHtcbiAgICAgICAgdGhpcy5fbG9nKGBfcmVxKCkgLSBSZXRyeWFibGUgZXJyb3IsIHJldHJ5aW5nIHJlcXVlc3RgKTtcbiAgICAgICAgYXdhaXQgc2xlZXAocmV0cnlJbnRlcnZhbCh0aGlzLmNvbnNlY3V0aXZlRmFpbHVyZXMpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlcTxUPihwYXJhbXMsIGNvbmZpZywgcmV0cnkpO1xuICAgICAgfVxuXG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICB9O1xuXG4gIC8qKiBAcHJpdmF0ZSAqL1xuICBfcG9sbCA9IGFzeW5jICgpID0+IHtcbiAgICB3aGlsZSAodGhpcy5zdGF0ZSA9PT0gQ29ubmVjdGlvblN0YXRlLkNvbm5lY3RlZCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMuX3JlcTx7XG4gICAgICAgICAgZXZlbnRzOiBTdHJlYW1WaWRlb0V2ZW50W107XG4gICAgICAgIH0+KFxuICAgICAgICAgIHt9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHRpbWVvdXQ6IDMwMDAwLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgdHJ1ZSxcbiAgICAgICAgKTsgLy8gMzBzID0+IEFQSSByZXNwb25kcyBpbiAyMHMgaWYgdGhlcmUgaXMgbm8gZXZlbnRcblxuICAgICAgICBpZiAoZGF0YS5ldmVudHM/Lmxlbmd0aCkge1xuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YS5ldmVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuY2xpZW50LmRpc3BhdGNoRXZlbnQoZGF0YS5ldmVudHNbaV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGlmIChheGlvcy5pc0NhbmNlbChlcnIpKSB7XG4gICAgICAgICAgdGhpcy5fbG9nKGBfcG9sbCgpIC0gYXhpb3MgY2FuY2VsZWQgcmVxdWVzdGApO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKiBjbGllbnQuZG9BeGlvc1JlcXVlc3Qgd2lsbCB0YWtlIGNhcmUgb2YgVE9LRU5fRVhQSVJFRCBlcnJvciAqL1xuXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgaWYgKGlzQ29ubmVjdGlvbklERXJyb3IoZXJyKSkge1xuICAgICAgICAgIHRoaXMuX2xvZyhgX3BvbGwoKSAtIENvbm5lY3Rpb25JRCBlcnJvciwgY29ubmVjdGluZyB3aXRob3V0IElELi4uYCk7XG4gICAgICAgICAgdGhpcy5fc2V0U3RhdGUoQ29ubmVjdGlvblN0YXRlLkRpc2Nvbm5lY3RlZCk7XG4gICAgICAgICAgdGhpcy5jb25uZWN0KHRydWUpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgaWYgKGlzQVBJRXJyb3IoZXJyKSAmJiAhaXNFcnJvclJldHJ5YWJsZShlcnIpKSB7XG4gICAgICAgICAgdGhpcy5fc2V0U3RhdGUoQ29ubmVjdGlvblN0YXRlLkNsb3NlZCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgc2xlZXAocmV0cnlJbnRlcnZhbCh0aGlzLmNvbnNlY3V0aXZlRmFpbHVyZXMpKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIGNvbm5lY3QgdHJ5IHRvIG9wZW4gYSBsb25ncG9sbCByZXF1ZXN0XG4gICAqIEBwYXJhbSByZWNvbm5lY3Qgc2hvdWxkIGJlIGZhbHNlIGZvciBmaXJzdCBjYWxsIGFuZCB0cnVlIGZvciBzdWJzZXF1ZW50IGNhbGxzIHRvIGtlZXAgdGhlIGNvbm5lY3Rpb24gYWxpdmUgYW5kIGNhbGwgcmVjb3ZlclN0YXRlXG4gICAqL1xuICBjb25uZWN0ID0gYXN5bmMgKHJlY29ubmVjdCA9IGZhbHNlKSA9PiB7XG4gICAgaWYgKHRoaXMuc3RhdGUgPT09IENvbm5lY3Rpb25TdGF0ZS5Db25uZWN0aW5nKSB7XG4gICAgICB0aGlzLl9sb2coXG4gICAgICAgICdjb25uZWN0KCkgLSBjb25uZWN0aW5nIGFscmVhZHkgaW4gcHJvZ3Jlc3MnLFxuICAgICAgICB7IHJlY29ubmVjdCB9LFxuICAgICAgICAnd2FybicsXG4gICAgICApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy5zdGF0ZSA9PT0gQ29ubmVjdGlvblN0YXRlLkNvbm5lY3RlZCkge1xuICAgICAgdGhpcy5fbG9nKFxuICAgICAgICAnY29ubmVjdCgpIC0gYWxyZWFkeSBjb25uZWN0ZWQgYW5kIHBvbGxpbmcnLFxuICAgICAgICB7IHJlY29ubmVjdCB9LFxuICAgICAgICAnd2FybicsXG4gICAgICApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX3NldFN0YXRlKENvbm5lY3Rpb25TdGF0ZS5Db25uZWN0aW5nKTtcbiAgICB0aGlzLmNvbm5lY3Rpb25JRCA9IHVuZGVmaW5lZDsgLy8gY29ubmVjdCBzaG91bGQgYmUgc2VudCB3aXRoIGVtcHR5IGNvbm5lY3Rpb25faWQgc28gQVBJIGNyZWF0ZXMgb25lXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZXZlbnQgfSA9IGF3YWl0IHRoaXMuX3JlcTx7XG4gICAgICAgIGV2ZW50OiBDb25uZWN0ZWRFdmVudDtcbiAgICAgIH0+KFxuICAgICAgICB7IGpzb246IHRoaXMuY2xpZW50Ll9idWlsZFdTUGF5bG9hZCgpIH0sXG4gICAgICAgIHtcbiAgICAgICAgICB0aW1lb3V0OiA4MDAwLCAvLyA4c1xuICAgICAgICB9LFxuICAgICAgICByZWNvbm5lY3QsXG4gICAgICApO1xuXG4gICAgICB0aGlzLl9zZXRTdGF0ZShDb25uZWN0aW9uU3RhdGUuQ29ubmVjdGVkKTtcbiAgICAgIHRoaXMuY29ubmVjdGlvbklEID0gZXZlbnQuY29ubmVjdGlvbl9pZDtcbiAgICAgIHRoaXMuY2xpZW50LnJlc29sdmVDb25uZWN0aW9uSWQ/LigpO1xuICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvclxuICAgICAgdGhpcy5jbGllbnQuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgICB0aGlzLl9wb2xsKCk7XG4gICAgICByZXR1cm4gZXZlbnQ7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICB0aGlzLl9zZXRTdGF0ZShDb25uZWN0aW9uU3RhdGUuQ2xvc2VkKTtcbiAgICAgIHRoaXMuY2xpZW50LnJlamVjdENvbm5lY3Rpb25JZD8uKCk7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBpc0hlYWx0aHkgY2hlY2tzIGlmIHRoZXJlIGlzIGEgY29ubmVjdGlvbklEIGFuZCBjb25uZWN0aW9uIGlzIGluIENvbm5lY3RlZCBzdGF0ZVxuICAgKi9cbiAgaXNIZWFsdGh5ID0gKCkgPT4ge1xuICAgIHJldHVybiAhIXRoaXMuY29ubmVjdGlvbklEICYmIHRoaXMuc3RhdGUgPT09IENvbm5lY3Rpb25TdGF0ZS5Db25uZWN0ZWQ7XG4gIH07XG5cbiAgZGlzY29ubmVjdCA9IGFzeW5jICh0aW1lb3V0ID0gMjAwMCkgPT4ge1xuICAgIHJlbW92ZUNvbm5lY3Rpb25FdmVudExpc3RlbmVycyh0aGlzLl9vbmxpbmVTdGF0dXNDaGFuZ2VkKTtcblxuICAgIHRoaXMuX3NldFN0YXRlKENvbm5lY3Rpb25TdGF0ZS5EaXNjb25uZWN0ZWQpO1xuICAgIHRoaXMuY2FuY2VsVG9rZW4/LmNhbmNlbCgnZGlzY29ubmVjdCgpIGlzIGNhbGxlZCcpO1xuICAgIHRoaXMuY2FuY2VsVG9rZW4gPSB1bmRlZmluZWQ7XG5cbiAgICBjb25zdCBjb25uZWN0aW9uX2lkID0gdGhpcy5jb25uZWN0aW9uSUQ7XG4gICAgdGhpcy5jb25uZWN0aW9uSUQgPSB1bmRlZmluZWQ7XG5cbiAgICB0cnkge1xuICAgICAgYXdhaXQgdGhpcy5fcmVxKFxuICAgICAgICB7IGNsb3NlOiB0cnVlLCBjb25uZWN0aW9uX2lkIH0sXG4gICAgICAgIHtcbiAgICAgICAgICB0aW1lb3V0LFxuICAgICAgICB9LFxuICAgICAgICBmYWxzZSxcbiAgICAgICk7XG4gICAgICB0aGlzLl9sb2coYGRpc2Nvbm5lY3QoKSAtIENsb3NlZCBjb25uZWN0aW9uSURgKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHRoaXMuX2xvZyhgZGlzY29ubmVjdCgpIC0gRmFpbGVkYCwgeyBlcnIgfSwgJ2Vycm9yJyk7XG4gICAgfVxuICB9O1xufVxuIiwiaW1wb3J0IHsgZ2V0TG9nZ2VyIH0gZnJvbSAnLi4vLi4vbG9nZ2VyJztcblxuY29uc3QgbG9nZ2VyID0gZ2V0TG9nZ2VyKFsnbG9jYXRpb24nXSk7XG5jb25zdCBISU5UX1VSTCA9IGBodHRwczovL2hpbnQuc3RyZWFtLWlvLXZpZGVvLmNvbS9gO1xuXG5leHBvcnQgY29uc3QgZ2V0TG9jYXRpb25IaW50ID0gYXN5bmMgKFxuICBoaW50VXJsOiBzdHJpbmcgPSBISU5UX1VSTCxcbiAgdGltZW91dDogbnVtYmVyID0gMjAwMCxcbikgPT4ge1xuICBjb25zdCBhYm9ydENvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG4gIGNvbnN0IHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4gYWJvcnRDb250cm9sbGVyLmFib3J0KCksIHRpbWVvdXQpO1xuICB0cnkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goSElOVF9VUkwsIHtcbiAgICAgIG1ldGhvZDogJ0hFQUQnLFxuICAgICAgc2lnbmFsOiBhYm9ydENvbnRyb2xsZXIuc2lnbmFsLFxuICAgIH0pO1xuICAgIGNvbnN0IGF3c1BvcCA9IHJlc3BvbnNlLmhlYWRlcnMuZ2V0KCd4LWFtei1jZi1wb3AnKSB8fCAnRVJSJztcbiAgICBsb2dnZXIoJ2RlYnVnJywgYExvY2F0aW9uIGhlYWRlcjogJHthd3NQb3B9YCk7XG4gICAgcmV0dXJuIGF3c1BvcC5zdWJzdHJpbmcoMCwgMyk7IC8vIEFNUzEtUDIgLT4gQU1TXG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBsb2dnZXIoJ3dhcm4nLCBgRmFpbGVkIHRvIGdldCBsb2NhdGlvbiBoaW50IGZyb20gJHtISU5UX1VSTH1gLCBlKTtcbiAgICByZXR1cm4gJ0VSUic7XG4gIH0gZmluYWxseSB7XG4gICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gIH1cbn07XG4iLCJpbXBvcnQgYXhpb3MsIHtcbiAgQXhpb3NFcnJvcixcbiAgQXhpb3NIZWFkZXJzLFxuICBBeGlvc0luc3RhbmNlLFxuICBBeGlvc1JlcXVlc3RDb25maWcsXG4gIEF4aW9zUmVzcG9uc2UsXG59IGZyb20gJ2F4aW9zJztcbmltcG9ydCBodHRwcyBmcm9tICdodHRwcyc7XG5pbXBvcnQgeyBTdGFibGVXU0Nvbm5lY3Rpb24gfSBmcm9tICcuL2Nvbm5lY3Rpb24nO1xuaW1wb3J0IHsgRGV2VG9rZW4sIEpXVFVzZXJUb2tlbiB9IGZyb20gJy4vc2lnbmluZyc7XG5pbXBvcnQgeyBUb2tlbk1hbmFnZXIgfSBmcm9tICcuL3Rva2VuX21hbmFnZXInO1xuaW1wb3J0IHsgV1NDb25uZWN0aW9uRmFsbGJhY2sgfSBmcm9tICcuL2Nvbm5lY3Rpb25fZmFsbGJhY2snO1xuaW1wb3J0IHsgaXNFcnJvclJlc3BvbnNlLCBpc1dTRmFpbHVyZSB9IGZyb20gJy4vZXJyb3JzJztcbmltcG9ydCB7XG4gIGlzRnVuY3Rpb24sXG4gIGlzT25saW5lLFxuICBLbm93bkNvZGVzLFxuICByYW5kb21JZCxcbiAgcmV0cnlJbnRlcnZhbCxcbiAgc2xlZXAsXG59IGZyb20gJy4vdXRpbHMnO1xuXG5pbXBvcnQge1xuICBBbGxDbGllbnRFdmVudHMsXG4gIEFsbENsaWVudEV2ZW50VHlwZXMsXG4gIEFQSUVycm9yUmVzcG9uc2UsXG4gIENsaWVudEV2ZW50TGlzdGVuZXIsXG4gIENvbm5lY3RBUElSZXNwb25zZSxcbiAgRXJyb3JGcm9tUmVzcG9uc2UsXG4gIExvZ2dlcixcbiAgU3RyZWFtQ2xpZW50T3B0aW9ucyxcbiAgU3RyZWFtVmlkZW9FdmVudCxcbiAgVG9rZW5PclByb3ZpZGVyLFxuICBVc2VyLFxuICBVc2VyV2l0aElkLFxufSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7IEluc2lnaHRNZXRyaWNzLCBwb3N0SW5zaWdodHMgfSBmcm9tICcuL2luc2lnaHRzJztcbmltcG9ydCB7IGdldExvY2F0aW9uSGludCB9IGZyb20gJy4vbG9jYXRpb24nO1xuaW1wb3J0IHsgQ3JlYXRlR3Vlc3RSZXF1ZXN0LCBDcmVhdGVHdWVzdFJlc3BvbnNlIH0gZnJvbSAnLi4vLi4vZ2VuL2Nvb3JkaW5hdG9yJztcblxuZXhwb3J0IGNsYXNzIFN0cmVhbUNsaWVudCB7XG4gIF91c2VyPzogVXNlcldpdGhJZDtcbiAgYW5vbnltb3VzOiBib29sZWFuO1xuICBwZXJzaXN0VXNlck9uQ29ubmVjdGlvbkZhaWx1cmU/OiBib29sZWFuO1xuICBheGlvc0luc3RhbmNlOiBBeGlvc0luc3RhbmNlO1xuICBiYXNlVVJMPzogc3RyaW5nO1xuICBicm93c2VyOiBib29sZWFuO1xuICBjbGVhbmluZ0ludGVydmFsUmVmPzogTm9kZUpTLlRpbWVvdXQ7XG4gIGNsaWVudElEPzogc3RyaW5nO1xuICBrZXk6IHN0cmluZztcbiAgbGlzdGVuZXJzOiBQYXJ0aWFsPFxuICAgIFJlY29yZDxBbGxDbGllbnRFdmVudFR5cGVzLCBDbGllbnRFdmVudExpc3RlbmVyPGFueT5bXSB8IHVuZGVmaW5lZD5cbiAgPiA9IHt9O1xuICBsb2dnZXI6IExvZ2dlcjtcblxuICBwcml2YXRlIGxvY2F0aW9uSGludDogUHJvbWlzZTxzdHJpbmc+IHwgdW5kZWZpbmVkO1xuXG4gIG5vZGU6IGJvb2xlYW47XG4gIG9wdGlvbnM6IFN0cmVhbUNsaWVudE9wdGlvbnM7XG4gIHNlY3JldD86IHN0cmluZztcbiAgc2V0VXNlclByb21pc2U6IENvbm5lY3RBUElSZXNwb25zZSB8IG51bGw7XG4gIHRva2VuTWFuYWdlcjogVG9rZW5NYW5hZ2VyO1xuICB1c2VyPzogVXNlcldpdGhJZDtcbiAgdXNlckFnZW50Pzogc3RyaW5nO1xuICB1c2VySUQ/OiBzdHJpbmc7XG4gIHdzQmFzZVVSTD86IHN0cmluZztcbiAgd3NDb25uZWN0aW9uOiBTdGFibGVXU0Nvbm5lY3Rpb24gfCBudWxsO1xuICB3c0ZhbGxiYWNrPzogV1NDb25uZWN0aW9uRmFsbGJhY2s7XG4gIHdzUHJvbWlzZTogQ29ubmVjdEFQSVJlc3BvbnNlIHwgbnVsbDtcbiAgY29uc2VjdXRpdmVGYWlsdXJlczogbnVtYmVyO1xuICBpbnNpZ2h0TWV0cmljczogSW5zaWdodE1ldHJpY3M7XG4gIGRlZmF1bHRXU1RpbWVvdXRXaXRoRmFsbGJhY2s6IG51bWJlcjtcbiAgZGVmYXVsdFdTVGltZW91dDogbnVtYmVyO1xuICByZXNvbHZlQ29ubmVjdGlvbklkPzogRnVuY3Rpb247XG4gIHJlamVjdENvbm5lY3Rpb25JZD86IEZ1bmN0aW9uO1xuICBjb25uZWN0aW9uSWRQcm9taXNlPzogUHJvbWlzZTxzdHJpbmcgfCB1bmRlZmluZWQ+O1xuICBndWVzdFVzZXJDcmVhdGVQcm9taXNlPzogUHJvbWlzZTxDcmVhdGVHdWVzdFJlc3BvbnNlPjtcbiAgcHJpdmF0ZSBuZXh0UmVxdWVzdEFib3J0Q29udHJvbGxlcjogQWJvcnRDb250cm9sbGVyIHwgbnVsbCA9IG51bGw7XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemUgYSBjbGllbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgLSB0aGUgYXBpIGtleVxuICAgKiBAcGFyYW0ge1N0cmVhbUNsaWVudE9wdGlvbnN9IFtvcHRpb25zXSAtIGFkZGl0aW9uYWwgb3B0aW9ucywgaGVyZSB5b3UgY2FuIHBhc3MgY3VzdG9tIG9wdGlvbnMgdG8gYXhpb3MgaW5zdGFuY2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLnNlY3JldF0gLSB0aGUgYXBpIHNlY3JldFxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmJyb3dzZXJdIC0gZW5mb3JjZSB0aGUgY2xpZW50IHRvIGJlIGluIGJyb3dzZXIgbW9kZVxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLndhcm1VcF0gLSBkZWZhdWx0IHRvIGZhbHNlLCBpZiB0cnVlLCBjbGllbnQgd2lsbCBvcGVuIGEgY29ubmVjdGlvbiBhcyBzb29uIGFzIHBvc3NpYmxlIHRvIHNwZWVkIHVwIGZvbGxvd2luZyByZXF1ZXN0c1xuICAgKiBAcGFyYW0ge0xvZ2dlcn0gW29wdGlvbnMuTG9nZ2VyXSAtIGN1c3RvbSBsb2dnZXJcbiAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLnRpbWVvdXRdIC0gZGVmYXVsdCB0byAzMDAwXG4gICAqIEBwYXJhbSB7aHR0cHNBZ2VudH0gW29wdGlvbnMuaHR0cHNBZ2VudF0gLSBjdXN0b20gaHR0cHNBZ2VudCwgaW4gbm9kZSBpdCdzIGRlZmF1bHQgdG8gaHR0cHMuYWdlbnQoKVxuICAgKi9cbiAgY29uc3RydWN0b3Ioa2V5OiBzdHJpbmcsIG9wdGlvbnM/OiBTdHJlYW1DbGllbnRPcHRpb25zKSB7XG4gICAgLy8gc2V0IHRoZSBrZXlcbiAgICB0aGlzLmtleSA9IGtleTtcblxuICAgIC8vIHNldCB0aGUgc2VjcmV0XG4gICAgdGhpcy5zZWNyZXQgPSBvcHRpb25zPy5zZWNyZXQ7XG5cbiAgICAvLyBzZXQgdGhlIG9wdGlvbnMuLi4gYW5kIGZpZ3VyZSBvdXQgZGVmYXVsdHMuLi5cbiAgICBjb25zdCBpbnB1dE9wdGlvbnMgPSBvcHRpb25zXG4gICAgICA/IG9wdGlvbnNcbiAgICAgIDogKHtcbiAgICAgICAgICBicm93c2VyOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyxcbiAgICAgICAgfSBhcyBQYXJ0aWFsPFN0cmVhbUNsaWVudE9wdGlvbnM+KTtcblxuICAgIHRoaXMuYnJvd3NlciA9IGlucHV0T3B0aW9ucy5icm93c2VyIHx8IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnO1xuICAgIHRoaXMubm9kZSA9ICF0aGlzLmJyb3dzZXI7XG5cbiAgICBpZiAodGhpcy5icm93c2VyKSB7XG4gICAgICB0aGlzLmxvY2F0aW9uSGludCA9IGdldExvY2F0aW9uSGludChcbiAgICAgICAgb3B0aW9ucz8ubG9jYXRpb25IaW50VXJsLFxuICAgICAgICBvcHRpb25zPy5sb2NhdGlvbkhpbnRUaW1lb3V0LFxuICAgICAgKTtcbiAgICB9XG5cbiAgICB0aGlzLm9wdGlvbnMgPSB7XG4gICAgICB0aW1lb3V0OiA1MDAwLFxuICAgICAgd2l0aENyZWRlbnRpYWxzOiBmYWxzZSwgLy8gbWFraW5nIHN1cmUgY29va2llcyBhcmUgbm90IHNlbnRcbiAgICAgIHdhcm1VcDogZmFsc2UsXG4gICAgICAuLi5pbnB1dE9wdGlvbnMsXG4gICAgfTtcblxuICAgIGlmICh0aGlzLm5vZGUgJiYgIXRoaXMub3B0aW9ucy5odHRwc0FnZW50KSB7XG4gICAgICB0aGlzLm9wdGlvbnMuaHR0cHNBZ2VudCA9IG5ldyBodHRwcy5BZ2VudCh7XG4gICAgICAgIGtlZXBBbGl2ZTogdHJ1ZSxcbiAgICAgICAga2VlcEFsaXZlTXNlY3M6IDMwMDAsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB0aGlzLnNldEJhc2VVUkwoXG4gICAgICB0aGlzLm9wdGlvbnMuYmFzZVVSTCB8fCAnaHR0cHM6Ly92aWRlby5zdHJlYW0taW8tYXBpLmNvbS92aWRlbycsXG4gICAgKTtcblxuICAgIGlmICh0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcgJiYgcHJvY2Vzcy5lbnYuU1RSRUFNX0xPQ0FMX1RFU1RfUlVOKSB7XG4gICAgICB0aGlzLnNldEJhc2VVUkwoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAzMC92aWRlbycpO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcgJiYgcHJvY2Vzcy5lbnYuU1RSRUFNX0xPQ0FMX1RFU1RfSE9TVCkge1xuICAgICAgdGhpcy5zZXRCYXNlVVJMKGBodHRwOi8vJHtwcm9jZXNzLmVudi5TVFJFQU1fTE9DQUxfVEVTVF9IT1NUfS92aWRlb2ApO1xuICAgIH1cblxuICAgIHRoaXMuYXhpb3NJbnN0YW5jZSA9IGF4aW9zLmNyZWF0ZSh7XG4gICAgICAuLi50aGlzLm9wdGlvbnMsXG4gICAgICBiYXNlVVJMOiB0aGlzLmJhc2VVUkwsXG4gICAgfSk7XG5cbiAgICAvLyBXUyBjb25uZWN0aW9uIGlzIGluaXRpYWxpemVkIHdoZW4gc2V0VXNlciBpcyBjYWxsZWRcbiAgICB0aGlzLndzQ29ubmVjdGlvbiA9IG51bGw7XG4gICAgdGhpcy53c1Byb21pc2UgPSBudWxsO1xuICAgIHRoaXMuc2V0VXNlclByb21pc2UgPSBudWxsO1xuXG4gICAgLy8gbWFwcGluZyBiZXR3ZWVuIGNoYW5uZWwgZ3JvdXBzIGFuZCBjb25maWdzXG4gICAgdGhpcy5hbm9ueW1vdXMgPSBmYWxzZTtcbiAgICB0aGlzLnBlcnNpc3RVc2VyT25Db25uZWN0aW9uRmFpbHVyZSA9XG4gICAgICB0aGlzLm9wdGlvbnM/LnBlcnNpc3RVc2VyT25Db25uZWN0aW9uRmFpbHVyZTtcblxuICAgIC8vIElmIGl0IGlzIGEgc2VydmVyLXNpZGUgY2xpZW50LCB0aGVuIGxldHMgaW5pdGlhbGl6ZSB0aGUgdG9rZW5NYW5hZ2VyLCBzaW5jZSB0b2tlbiB3aWxsIGJlXG4gICAgLy8gZ2VuZXJhdGVkIGZyb20gc2VjcmV0LlxuICAgIHRoaXMudG9rZW5NYW5hZ2VyID0gbmV3IFRva2VuTWFuYWdlcih0aGlzLnNlY3JldCk7XG4gICAgdGhpcy5jb25zZWN1dGl2ZUZhaWx1cmVzID0gMDtcbiAgICB0aGlzLmluc2lnaHRNZXRyaWNzID0gbmV3IEluc2lnaHRNZXRyaWNzKCk7XG5cbiAgICB0aGlzLmRlZmF1bHRXU1RpbWVvdXRXaXRoRmFsbGJhY2sgPSA2MDAwO1xuICAgIHRoaXMuZGVmYXVsdFdTVGltZW91dCA9IDE1MDAwO1xuXG4gICAgdGhpcy5sb2dnZXIgPSBpc0Z1bmN0aW9uKGlucHV0T3B0aW9ucy5sb2dnZXIpXG4gICAgICA/IGlucHV0T3B0aW9ucy5sb2dnZXJcbiAgICAgIDogKCkgPT4gbnVsbDtcbiAgfVxuXG4gIGRldlRva2VuID0gKHVzZXJJRDogc3RyaW5nKSA9PiB7XG4gICAgcmV0dXJuIERldlRva2VuKHVzZXJJRCk7XG4gIH07XG5cbiAgZ2V0QXV0aFR5cGUgPSAoKSA9PiB7XG4gICAgcmV0dXJuIHRoaXMuYW5vbnltb3VzID8gJ2Fub255bW91cycgOiAnand0JztcbiAgfTtcblxuICBzZXRCYXNlVVJMID0gKGJhc2VVUkw6IHN0cmluZykgPT4ge1xuICAgIHRoaXMuYmFzZVVSTCA9IGJhc2VVUkw7XG4gICAgdGhpcy53c0Jhc2VVUkwgPSB0aGlzLmJhc2VVUkxcbiAgICAgIC5yZXBsYWNlKCdodHRwJywgJ3dzJylcbiAgICAgIC5yZXBsYWNlKCc6MzAzMCcsICc6ODgwMCcpO1xuICB9O1xuXG4gIGdldExvY2F0aW9uSGludCA9IGFzeW5jIChcbiAgICBoaW50VXJsPzogc3RyaW5nLFxuICAgIHRpbWVvdXQ/OiBudW1iZXIsXG4gICk6IFByb21pc2U8c3RyaW5nPiA9PiB7XG4gICAgY29uc3QgaGludCA9IGF3YWl0IHRoaXMubG9jYXRpb25IaW50O1xuICAgIGlmICghaGludCB8fCBoaW50ID09PSAnRVJSJykge1xuICAgICAgdGhpcy5sb2NhdGlvbkhpbnQgPSBnZXRMb2NhdGlvbkhpbnQoXG4gICAgICAgIGhpbnRVcmwgPz8gdGhpcy5vcHRpb25zLmxvY2F0aW9uSGludFVybCxcbiAgICAgICAgdGltZW91dCA/PyB0aGlzLm9wdGlvbnMubG9jYXRpb25IaW50VGltZW91dCxcbiAgICAgICk7XG4gICAgICByZXR1cm4gdGhpcy5sb2NhdGlvbkhpbnQ7XG4gICAgfVxuICAgIHJldHVybiBoaW50O1xuICB9O1xuXG4gIF9nZXRDb25uZWN0aW9uSUQgPSAoKSA9PlxuICAgIHRoaXMud3NDb25uZWN0aW9uPy5jb25uZWN0aW9uSUQgfHwgdGhpcy53c0ZhbGxiYWNrPy5jb25uZWN0aW9uSUQ7XG5cbiAgX2hhc0Nvbm5lY3Rpb25JRCA9ICgpID0+IEJvb2xlYW4odGhpcy5fZ2V0Q29ubmVjdGlvbklEKCkpO1xuXG4gIC8qKlxuICAgKiBjb25uZWN0VXNlciAtIFNldCB0aGUgY3VycmVudCB1c2VyIGFuZCBvcGVuIGEgV2ViU29ja2V0IGNvbm5lY3Rpb25cbiAgICpcbiAgICogQHBhcmFtIHVzZXIgRGF0YSBhYm91dCB0aGlzIHVzZXIuIElFIHtuYW1lOiBcImpvaG5cIn1cbiAgICogQHBhcmFtIHtUb2tlbk9yUHJvdmlkZXJ9IHVzZXJUb2tlbk9yUHJvdmlkZXIgVG9rZW4gb3IgcHJvdmlkZXJcbiAgICpcbiAgICogQHJldHVybiB7Q29ubmVjdEFQSVJlc3BvbnNlfSBSZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIGNvbm5lY3Rpb24gaXMgc2V0dXBcbiAgICovXG4gIGNvbm5lY3RVc2VyID0gYXN5bmMgKFxuICAgIHVzZXI6IFVzZXJXaXRoSWQsXG4gICAgdXNlclRva2VuT3JQcm92aWRlcjogVG9rZW5PclByb3ZpZGVyLFxuICApID0+IHtcbiAgICBpZiAoIXVzZXIuaWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIFwiaWRcIiBmaWVsZCBvbiB0aGUgdXNlciBpcyBtaXNzaW5nJyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2FsbGluZyBjb25uZWN0VXNlciBtdWx0aXBsZSB0aW1lcyBpcyBwb3RlbnRpYWxseSB0aGUgcmVzdWx0IG9mIGEgIGJhZCBpbnRlZ3JhdGlvbiwgaG93ZXZlcixcbiAgICAgKiBJZiB0aGUgdXNlciBpZCByZW1haW5zIHRoZSBzYW1lIHdlIGRvbid0IHRocm93IGVycm9yXG4gICAgICovXG4gICAgaWYgKHRoaXMudXNlcklEID09PSB1c2VyLmlkICYmIHRoaXMuc2V0VXNlclByb21pc2UpIHtcbiAgICAgIHRoaXMubG9nZ2VyKFxuICAgICAgICAnd2FybicsXG4gICAgICAgICdDb25zZWN1dGl2ZSBjYWxscyB0byBjb25uZWN0VXNlciBpcyBkZXRlY3RlZCwgaWRlYWxseSB5b3Ugc2hvdWxkIG9ubHkgY2FsbCB0aGlzIGZ1bmN0aW9uIG9uY2UgaW4geW91ciBhcHAuJyxcbiAgICAgICk7XG4gICAgICByZXR1cm4gdGhpcy5zZXRVc2VyUHJvbWlzZTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy51c2VySUQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ1VzZSBjbGllbnQuZGlzY29ubmVjdCgpIGJlZm9yZSB0cnlpbmcgdG8gY29ubmVjdCBhcyBhIGRpZmZlcmVudCB1c2VyLiBjb25uZWN0VXNlciB3YXMgY2FsbGVkIHR3aWNlLicsXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmIChcbiAgICAgICh0aGlzLl9pc1VzaW5nU2VydmVyQXV0aCgpIHx8IHRoaXMubm9kZSkgJiZcbiAgICAgICF0aGlzLm9wdGlvbnMuYWxsb3dTZXJ2ZXJTaWRlQ29ubmVjdFxuICAgICkge1xuICAgICAgdGhpcy5sb2dnZXIoXG4gICAgICAgICd3YXJuJyxcbiAgICAgICAgJ1BsZWFzZSBkbyBub3QgdXNlIGNvbm5lY3RVc2VyIHNlcnZlciBzaWRlLiBjb25uZWN0VXNlciBpbXBhY3RzIE1BVSBhbmQgY29uY3VycmVudCBjb25uZWN0aW9uIHVzYWdlIGFuZCB0aHVzIHlvdXIgYmlsbC4gSWYgeW91IGhhdmUgYSB2YWxpZCB1c2UtY2FzZSwgYWRkIFwiYWxsb3dTZXJ2ZXJTaWRlQ29ubmVjdDogdHJ1ZVwiIHRvIHRoZSBjbGllbnQgb3B0aW9ucyB0byBkaXNhYmxlIHRoaXMgd2FybmluZy4nLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyB3ZSBnZW5lcmF0ZSB0aGUgY2xpZW50IGlkIGNsaWVudCBzaWRlXG4gICAgdGhpcy51c2VySUQgPSB1c2VyLmlkO1xuICAgIHRoaXMuYW5vbnltb3VzID0gZmFsc2U7XG5cbiAgICBjb25zdCBzZXRUb2tlblByb21pc2UgPSB0aGlzLl9zZXRUb2tlbihcbiAgICAgIHVzZXIsXG4gICAgICB1c2VyVG9rZW5PclByb3ZpZGVyLFxuICAgICAgdGhpcy5hbm9ueW1vdXMsXG4gICAgKTtcbiAgICB0aGlzLl9zZXRVc2VyKHVzZXIpO1xuXG4gICAgY29uc3Qgd3NQcm9taXNlID0gdGhpcy5vcGVuQ29ubmVjdGlvbigpO1xuXG4gICAgdGhpcy5zZXRVc2VyUHJvbWlzZSA9IFByb21pc2UuYWxsKFtzZXRUb2tlblByb21pc2UsIHdzUHJvbWlzZV0pLnRoZW4oXG4gICAgICAocmVzdWx0KSA9PiByZXN1bHRbMV0sIC8vIFdlIG9ubHkgcmV0dXJuIGNvbm5lY3Rpb24gcHJvbWlzZTtcbiAgICApO1xuXG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLnNldFVzZXJQcm9taXNlO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgaWYgKHRoaXMucGVyc2lzdFVzZXJPbkNvbm5lY3Rpb25GYWlsdXJlKSB7XG4gICAgICAgIC8vIGNsZWFudXAgY2xpZW50IHRvIGFsbG93IHRoZSB1c2VyIHRvIHJldHJ5IGNvbm5lY3RVc2VyIGFnYWluXG4gICAgICAgIHRoaXMuY2xvc2VDb25uZWN0aW9uKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmRpc2Nvbm5lY3RVc2VyKCk7XG4gICAgICB9XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICB9O1xuXG4gIF9zZXRUb2tlbiA9IChcbiAgICB1c2VyOiBVc2VyV2l0aElkLFxuICAgIHVzZXJUb2tlbk9yUHJvdmlkZXI6IFRva2VuT3JQcm92aWRlcixcbiAgICBpc0Fub255bW91czogYm9vbGVhbixcbiAgKSA9PlxuICAgIHRoaXMudG9rZW5NYW5hZ2VyLnNldFRva2VuT3JQcm92aWRlcihcbiAgICAgIHVzZXJUb2tlbk9yUHJvdmlkZXIsXG4gICAgICB1c2VyLFxuICAgICAgaXNBbm9ueW1vdXMsXG4gICAgKTtcblxuICBfc2V0VXNlciA9ICh1c2VyOiBVc2VyV2l0aElkKSA9PiB7XG4gICAgLyoqXG4gICAgICogVGhpcyBvbmUgaXMgdXNlZCBieSB0aGUgZnJvbnRlbmQuIFRoaXMgaXMgYSBjb3B5IG9mIHRoZSBjdXJyZW50IHVzZXIgb2JqZWN0IHN0b3JlZCBvbiBiYWNrZW5kLlxuICAgICAqIEl0IGNvbnRhaW5zIHJlc2VydmVkIHByb3BlcnRpZXMgYW5kIG93biB1c2VyIHByb3BlcnRpZXMgd2hpY2ggYXJlIG5vdCBwcmVzZW50IGluIGB0aGlzLl91c2VyYC5cbiAgICAgKi9cbiAgICB0aGlzLnVzZXIgPSB1c2VyO1xuICAgIHRoaXMudXNlcklEID0gdXNlci5pZDtcbiAgICAvLyB0aGlzIG9uZSBpcyBhY3R1YWxseSB1c2VkIGZvciByZXF1ZXN0cy4gVGhpcyBpcyBhIGNvcHkgb2YgY3VycmVudCB1c2VyIHByb3ZpZGVkIHRvIGBjb25uZWN0VXNlcmAgZnVuY3Rpb24uXG4gICAgdGhpcy5fdXNlciA9IHsgLi4udXNlciB9O1xuICB9O1xuXG4gIC8qKlxuICAgKiBEaXNjb25uZWN0cyB0aGUgd2Vic29ja2V0IGNvbm5lY3Rpb24sIHdpdGhvdXQgcmVtb3ZpbmcgdGhlIHVzZXIgc2V0IG9uIGNsaWVudC5cbiAgICogY2xpZW50LmNsb3NlQ29ubmVjdGlvbiB3aWxsIG5vdCB0cmlnZ2VyIGRlZmF1bHQgYXV0by1yZXRyeSBtZWNoYW5pc20gZm9yIHJlY29ubmVjdGlvbi4gWW91IG5lZWRcbiAgICogdG8gY2FsbCBjbGllbnQub3BlbkNvbm5lY3Rpb24gdG8gcmVjb25uZWN0IHRvIHdlYnNvY2tldC5cbiAgICpcbiAgICogVGhpcyBpcyBtYWlubHkgdXNlZnVsIG9uIG1vYmlsZSBzaWRlLiBZb3UgY2FuIG9ubHkgcmVjZWl2ZSBwdXNoIG5vdGlmaWNhdGlvbnNcbiAgICogaWYgeW91IGRvbid0IGhhdmUgYWN0aXZlIHdlYnNvY2tldCBjb25uZWN0aW9uLlxuICAgKiBTbyB3aGVuIHlvdXIgYXBwIGdvZXMgdG8gYmFja2dyb3VuZCwgeW91IGNhbiBjYWxsIGBjbGllbnQuY2xvc2VDb25uZWN0aW9uYC5cbiAgICogQW5kIHdoZW4gYXBwIGNvbWVzIGJhY2sgdG8gZm9yZWdyb3VuZCwgY2FsbCBgY2xpZW50Lm9wZW5Db25uZWN0aW9uYC5cbiAgICpcbiAgICogQHBhcmFtIHRpbWVvdXQgTWF4IG51bWJlciBvZiBtcywgdG8gd2FpdCBmb3IgY2xvc2UgZXZlbnQgb2Ygd2Vic29ja2V0LCBiZWZvcmUgZm9yY2VmdWxseSBhc3N1bWluZyBzdWNjZXNmdWwgZGlzY29ubmVjdGlvbi5cbiAgICogICAgICAgICAgICAgICAgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0Nsb3NlRXZlbnRcbiAgICovXG4gIGNsb3NlQ29ubmVjdGlvbiA9IGFzeW5jICh0aW1lb3V0PzogbnVtYmVyKSA9PiB7XG4gICAgaWYgKHRoaXMuY2xlYW5pbmdJbnRlcnZhbFJlZiAhPSBudWxsKSB7XG4gICAgICBjbGVhckludGVydmFsKHRoaXMuY2xlYW5pbmdJbnRlcnZhbFJlZik7XG4gICAgICB0aGlzLmNsZWFuaW5nSW50ZXJ2YWxSZWYgPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgdGhpcy53c0Nvbm5lY3Rpb24/LmRpc2Nvbm5lY3QodGltZW91dCksXG4gICAgICB0aGlzLndzRmFsbGJhY2s/LmRpc2Nvbm5lY3QodGltZW91dCksXG4gICAgXSk7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IFdlYlNvY2tldCBjb25uZWN0aW9uIHdpdGggdGhlIGN1cnJlbnQgdXNlci4gUmV0dXJucyBlbXB0eSBwcm9taXNlLCBpZiB0aGVyZSBpcyBhbiBhY3RpdmUgY29ubmVjdGlvblxuICAgKi9cbiAgb3BlbkNvbm5lY3Rpb24gPSBhc3luYyAoKSA9PiB7XG4gICAgaWYgKCF0aGlzLnVzZXJJRCkge1xuICAgICAgdGhyb3cgRXJyb3IoXG4gICAgICAgICdVc2VyV2l0aElkIGlzIG5vdCBzZXQgb24gY2xpZW50LCB1c2UgY2xpZW50LmNvbm5lY3RVc2VyIG9yIGNsaWVudC5jb25uZWN0QW5vbnltb3VzVXNlciBpbnN0ZWFkJyxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMud3NDb25uZWN0aW9uPy5pc0Nvbm5lY3RpbmcgJiYgdGhpcy53c1Byb21pc2UpIHtcbiAgICAgIHRoaXMubG9nZ2VyKFxuICAgICAgICAnaW5mbycsXG4gICAgICAgICdjbGllbnQ6b3BlbkNvbm5lY3Rpb24oKSAtIGNvbm5lY3Rpb24gYWxyZWFkeSBpbiBwcm9ncmVzcycsXG4gICAgICApO1xuICAgICAgcmV0dXJuIHRoaXMud3NQcm9taXNlO1xuICAgIH1cblxuICAgIGlmIChcbiAgICAgICh0aGlzLndzQ29ubmVjdGlvbj8uaXNIZWFsdGh5IHx8IHRoaXMud3NGYWxsYmFjaz8uaXNIZWFsdGh5KCkpICYmXG4gICAgICB0aGlzLl9oYXNDb25uZWN0aW9uSUQoKVxuICAgICkge1xuICAgICAgdGhpcy5sb2dnZXIoXG4gICAgICAgICdpbmZvJyxcbiAgICAgICAgJ2NsaWVudDpvcGVuQ29ubmVjdGlvbigpIC0gb3BlbkNvbm5lY3Rpb24gY2FsbGVkIHR3aWNlLCBoZWFsdGh5IGNvbm5lY3Rpb24gYWxyZWFkeSBleGlzdHMnLFxuICAgICAgKTtcblxuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIHRoaXMuY29ubmVjdGlvbklkUHJvbWlzZSA9IG5ldyBQcm9taXNlPHN0cmluZyB8IHVuZGVmaW5lZD4oXG4gICAgICAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIHRoaXMucmVzb2x2ZUNvbm5lY3Rpb25JZCA9IHJlc29sdmU7XG4gICAgICAgIHRoaXMucmVqZWN0Q29ubmVjdGlvbklkID0gcmVqZWN0O1xuICAgICAgfSxcbiAgICApO1xuXG4gICAgdGhpcy5jbGllbnRJRCA9IGAke3RoaXMudXNlcklEfS0tJHtyYW5kb21JZCgpfWA7XG4gICAgdGhpcy53c1Byb21pc2UgPSB0aGlzLmNvbm5lY3QoKTtcbiAgICByZXR1cm4gdGhpcy53c1Byb21pc2U7XG4gIH07XG5cbiAgX25vcm1hbGl6ZURhdGUgPSAoYmVmb3JlOiBEYXRlIHwgc3RyaW5nIHwgbnVsbCk6IHN0cmluZyB8IG51bGwgPT4ge1xuICAgIGlmIChiZWZvcmUgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICBiZWZvcmUgPSBiZWZvcmUudG9JU09TdHJpbmcoKTtcbiAgICB9XG5cbiAgICBpZiAoYmVmb3JlID09PSAnJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBcIkRvbid0IHBhc3MgYmxhbmsgc3RyaW5nIGZvciBzaW5jZSwgdXNlIG51bGwgaW5zdGVhZCBpZiByZXNldHRpbmcgdGhlIHRva2VuIHJldm9rZVwiLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gYmVmb3JlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBEaXNjb25uZWN0cyB0aGUgd2Vic29ja2V0IGFuZCByZW1vdmVzIHRoZSB1c2VyIGZyb20gY2xpZW50LlxuICAgKlxuICAgKiBAcGFyYW0gdGltZW91dCBNYXggbnVtYmVyIG9mIG1zLCB0byB3YWl0IGZvciBjbG9zZSBldmVudCBvZiB3ZWJzb2NrZXQsIGJlZm9yZSBmb3JjZWZ1bGx5IGFzc3VtaW5nIHN1Y2Nlc3NmdWwgZGlzY29ubmVjdGlvbi5cbiAgICogICAgICAgICAgICAgICAgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0Nsb3NlRXZlbnRcbiAgICovXG4gIGRpc2Nvbm5lY3RVc2VyID0gYXN5bmMgKHRpbWVvdXQ/OiBudW1iZXIpID0+IHtcbiAgICB0aGlzLmxvZ2dlcignaW5mbycsICdjbGllbnQ6ZGlzY29ubmVjdCgpIC0gRGlzY29ubmVjdGluZyB0aGUgY2xpZW50Jyk7XG5cbiAgICAvLyByZW1vdmUgdGhlIHVzZXIgc3BlY2lmaWMgZmllbGRzXG4gICAgZGVsZXRlIHRoaXMudXNlcjtcbiAgICBkZWxldGUgdGhpcy5fdXNlcjtcbiAgICBkZWxldGUgdGhpcy51c2VySUQ7XG5cbiAgICB0aGlzLmFub255bW91cyA9IGZhbHNlO1xuXG4gICAgYXdhaXQgdGhpcy5jbG9zZUNvbm5lY3Rpb24odGltZW91dCk7XG5cbiAgICB0aGlzLnRva2VuTWFuYWdlci5yZXNldCgpO1xuXG4gICAgdGhpcy5jb25uZWN0aW9uSWRQcm9taXNlID0gdW5kZWZpbmVkO1xuICAgIHRoaXMucmVqZWN0Q29ubmVjdGlvbklkID0gdW5kZWZpbmVkO1xuICAgIHRoaXMucmVzb2x2ZUNvbm5lY3Rpb25JZCA9IHVuZGVmaW5lZDtcbiAgfTtcblxuICBjb25uZWN0R3Vlc3RVc2VyID0gYXN5bmMgKHVzZXI6IFVzZXIgJiB7IHR5cGU6ICdndWVzdCcgfSkgPT4ge1xuICAgIHRoaXMuZ3Vlc3RVc2VyQ3JlYXRlUHJvbWlzZSA9IHRoaXMuZG9BeGlvc1JlcXVlc3Q8XG4gICAgICBDcmVhdGVHdWVzdFJlc3BvbnNlLFxuICAgICAgQ3JlYXRlR3Vlc3RSZXF1ZXN0XG4gICAgPihcbiAgICAgICdwb3N0JyxcbiAgICAgICcvZ3Vlc3QnLFxuICAgICAge1xuICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgLi4udXNlcixcbiAgICAgICAgICByb2xlOiAnZ3Vlc3QnLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIHsgcHVibGljRW5kcG9pbnQ6IHRydWUgfSxcbiAgICApO1xuXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmd1ZXN0VXNlckNyZWF0ZVByb21pc2U7XG4gICAgdGhpcy5ndWVzdFVzZXJDcmVhdGVQcm9taXNlLmZpbmFsbHkoXG4gICAgICAoKSA9PiAodGhpcy5ndWVzdFVzZXJDcmVhdGVQcm9taXNlID0gdW5kZWZpbmVkKSxcbiAgICApO1xuXG4gICAgcmV0dXJuIHRoaXMuY29ubmVjdFVzZXIocmVzcG9uc2UudXNlciwgcmVzcG9uc2UuYWNjZXNzX3Rva2VuKTtcbiAgfTtcblxuICAvKipcbiAgICogY29ubmVjdEFub255bW91c1VzZXIgLSBTZXQgYW4gYW5vbnltb3VzIHVzZXIgYW5kIG9wZW4gYSBXZWJTb2NrZXQgY29ubmVjdGlvblxuICAgKi9cbiAgY29ubmVjdEFub255bW91c1VzZXIgPSBhc3luYyAoXG4gICAgdXNlcjogVXNlcldpdGhJZCxcbiAgICB0b2tlbk9yUHJvdmlkZXI6IFRva2VuT3JQcm92aWRlcixcbiAgKSA9PiB7XG4gICAgdGhpcy5jb25uZWN0aW9uSWRQcm9taXNlID0gbmV3IFByb21pc2U8c3RyaW5nIHwgdW5kZWZpbmVkPihcbiAgICAgIChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgdGhpcy5yZXNvbHZlQ29ubmVjdGlvbklkID0gcmVzb2x2ZTtcbiAgICAgICAgdGhpcy5yZWplY3RDb25uZWN0aW9uSWQgPSByZWplY3Q7XG4gICAgICB9LFxuICAgICk7XG5cbiAgICB0aGlzLmFub255bW91cyA9IHRydWU7XG4gICAgYXdhaXQgdGhpcy5fc2V0VG9rZW4odXNlciwgdG9rZW5PclByb3ZpZGVyLCB0aGlzLmFub255bW91cyk7XG5cbiAgICB0aGlzLl9zZXRVc2VyKHVzZXIpO1xuICAgIC8vIHNvbWUgZW5kcG9pbnRzIHJlcXVpcmUgYSBjb25uZWN0aW9uX2lkIHRvIGJlIHJlc29sdmVkLlxuICAgIC8vIGFzIGFub255bW91cyB1c2VycyBhcmVuJ3QgYWxsb3dlZCB0byBvcGVuIFdTIGNvbm5lY3Rpb25zLCB3ZSBqdXN0XG4gICAgLy8gcmVzb2x2ZSB0aGUgY29ubmVjdGlvbl9pZCBoZXJlLlxuICAgIHRoaXMucmVzb2x2ZUNvbm5lY3Rpb25JZD8uKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIG9uIC0gTGlzdGVuIHRvIGV2ZW50cyBvbiBhbGwgY2hhbm5lbHMgYW5kIHVzZXJzIHlvdXIgd2F0Y2hpbmdcbiAgICpcbiAgICogY2xpZW50Lm9uKCdtZXNzYWdlLm5ldycsIGV2ZW50ID0+IHtjb25zb2xlLmxvZyhcIm15IG5ldyBtZXNzYWdlXCIsIGV2ZW50LCBjaGFubmVsLnN0YXRlLm1lc3NhZ2VzKX0pXG4gICAqXG4gICAqIEBwYXJhbSBldmVudE5hbWUgVGhlIGV2ZW50IHR5cGUgdG8gbGlzdGVuIGZvciAob3B0aW9uYWwpXG4gICAqIEBwYXJhbSBjYWxsYmFjayBUaGUgY2FsbGJhY2sgdG8gY2FsbFxuICAgKlxuICAgKiBAcmV0dXJuICBSZXR1cm5zIGEgZnVuY3Rpb24gd2hpY2gsIHdoZW4gY2FsbGVkLCB1bnN1YnNjcmliZXMgdGhlIGV2ZW50IGhhbmRsZXIuXG4gICAqL1xuICBvbiA9IDxFIGV4dGVuZHMga2V5b2YgQWxsQ2xpZW50RXZlbnRzPihcbiAgICBldmVudE5hbWU6IEUsXG4gICAgY2FsbGJhY2s6IENsaWVudEV2ZW50TGlzdGVuZXI8RT4sXG4gICkgPT4ge1xuICAgIGlmICghdGhpcy5saXN0ZW5lcnNbZXZlbnROYW1lXSkge1xuICAgICAgdGhpcy5saXN0ZW5lcnNbZXZlbnROYW1lXSA9IFtdO1xuICAgIH1cblxuICAgIHRoaXMubG9nZ2VyKCdkZWJ1ZycsIGBBZGRpbmcgbGlzdGVuZXIgZm9yICR7ZXZlbnROYW1lfSBldmVudGApO1xuICAgIHRoaXMubGlzdGVuZXJzW2V2ZW50TmFtZV0/LnB1c2goY2FsbGJhY2sgYXMgQ2xpZW50RXZlbnRMaXN0ZW5lcjxhbnk+KTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgdGhpcy5vZmYoZXZlbnROYW1lLCBjYWxsYmFjayk7XG4gICAgfTtcbiAgfTtcblxuICAvKipcbiAgICogb2ZmIC0gUmVtb3ZlIHRoZSBldmVudCBoYW5kbGVyXG4gICAqL1xuICBvZmYgPSA8RSBleHRlbmRzIGtleW9mIEFsbENsaWVudEV2ZW50cz4oXG4gICAgZXZlbnROYW1lOiBFLFxuICAgIGNhbGxiYWNrOiBDbGllbnRFdmVudExpc3RlbmVyPEU+LFxuICApID0+IHtcbiAgICBpZiAoIXRoaXMubGlzdGVuZXJzW2V2ZW50TmFtZV0pIHtcbiAgICAgIHRoaXMubGlzdGVuZXJzW2V2ZW50TmFtZV0gPSBbXTtcbiAgICB9XG5cbiAgICB0aGlzLmxvZ2dlcignZGVidWcnLCBgUmVtb3ZpbmcgbGlzdGVuZXIgZm9yICR7ZXZlbnROYW1lfSBldmVudGApO1xuICAgIHRoaXMubGlzdGVuZXJzW2V2ZW50TmFtZV0gPSB0aGlzLmxpc3RlbmVyc1tldmVudE5hbWVdPy5maWx0ZXIoXG4gICAgICAodmFsdWUpID0+IHZhbHVlICE9PSBjYWxsYmFjayxcbiAgICApO1xuICB9O1xuXG4gIF9sb2dBcGlSZXF1ZXN0ID0gKFxuICAgIHR5cGU6IHN0cmluZyxcbiAgICB1cmw6IHN0cmluZyxcbiAgICBkYXRhOiB1bmtub3duLFxuICAgIGNvbmZpZzogQXhpb3NSZXF1ZXN0Q29uZmlnICYge1xuICAgICAgY29uZmlnPzogQXhpb3NSZXF1ZXN0Q29uZmlnICYgeyBtYXhCb2R5TGVuZ3RoPzogbnVtYmVyIH07XG4gICAgfSxcbiAgKSA9PiB7XG4gICAgdGhpcy5sb2dnZXIoJ3RyYWNlJywgYGNsaWVudDogJHt0eXBlfSAtIFJlcXVlc3QgLSAke3VybH1gLCB7XG4gICAgICBwYXlsb2FkOiBkYXRhLFxuICAgICAgY29uZmlnLFxuICAgIH0pO1xuICB9O1xuXG4gIF9sb2dBcGlSZXNwb25zZSA9IDxUPihcbiAgICB0eXBlOiBzdHJpbmcsXG4gICAgdXJsOiBzdHJpbmcsXG4gICAgcmVzcG9uc2U6IEF4aW9zUmVzcG9uc2U8VD4sXG4gICkgPT4ge1xuICAgIHRoaXMubG9nZ2VyKFxuICAgICAgJ3RyYWNlJyxcbiAgICAgIGBjbGllbnQ6JHt0eXBlfSAtIFJlc3BvbnNlIC0gdXJsOiAke3VybH0gPiBzdGF0dXMgJHtyZXNwb25zZS5zdGF0dXN9YCxcbiAgICAgIHtcbiAgICAgICAgcmVzcG9uc2UsXG4gICAgICB9LFxuICAgICk7XG4gIH07XG5cbiAgX2xvZ0FwaUVycm9yID0gKHR5cGU6IHN0cmluZywgdXJsOiBzdHJpbmcsIGVycm9yOiB1bmtub3duKSA9PiB7XG4gICAgdGhpcy5sb2dnZXIoJ2Vycm9yJywgYGNsaWVudDoke3R5cGV9IC0gRXJyb3IgLSB1cmw6ICR7dXJsfWAsIHtcbiAgICAgIHVybCxcbiAgICAgIGVycm9yLFxuICAgIH0pO1xuICB9O1xuXG4gIGRvQXhpb3NSZXF1ZXN0ID0gYXN5bmMgPFQsIEQgPSB1bmtub3duPihcbiAgICB0eXBlOiBzdHJpbmcsXG4gICAgdXJsOiBzdHJpbmcsXG4gICAgZGF0YT86IEQsXG4gICAgb3B0aW9uczogQXhpb3NSZXF1ZXN0Q29uZmlnICYge1xuICAgICAgY29uZmlnPzogQXhpb3NSZXF1ZXN0Q29uZmlnICYgeyBtYXhCb2R5TGVuZ3RoPzogbnVtYmVyIH07XG4gICAgfSAmIHsgcHVibGljRW5kcG9pbnQ/OiBib29sZWFuIH0gPSB7fSxcbiAgKTogUHJvbWlzZTxUPiA9PiB7XG4gICAgaWYgKCFvcHRpb25zLnB1YmxpY0VuZHBvaW50KSB7XG4gICAgICBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgIHRoaXMudG9rZW5NYW5hZ2VyLnRva2VuUmVhZHkoKSxcbiAgICAgICAgdGhpcy5ndWVzdFVzZXJDcmVhdGVQcm9taXNlLFxuICAgICAgICB0aGlzLmNvbm5lY3Rpb25JZFByb21pc2UsXG4gICAgICBdKTtcbiAgICB9XG4gICAgY29uc3QgcmVxdWVzdENvbmZpZyA9IHRoaXMuX2VucmljaEF4aW9zT3B0aW9ucyhvcHRpb25zKTtcbiAgICB0cnkge1xuICAgICAgbGV0IHJlc3BvbnNlOiBBeGlvc1Jlc3BvbnNlPFQ+O1xuICAgICAgdGhpcy5fbG9nQXBpUmVxdWVzdCh0eXBlLCB1cmwsIGRhdGEsIHJlcXVlc3RDb25maWcpO1xuICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgIGNhc2UgJ2dldCc6XG4gICAgICAgICAgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmF4aW9zSW5zdGFuY2UuZ2V0KHVybCwgcmVxdWVzdENvbmZpZyk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2RlbGV0ZSc6XG4gICAgICAgICAgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmF4aW9zSW5zdGFuY2UuZGVsZXRlKHVybCwgcmVxdWVzdENvbmZpZyk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3Bvc3QnOlxuICAgICAgICAgIHJlc3BvbnNlID0gYXdhaXQgdGhpcy5heGlvc0luc3RhbmNlLnBvc3QodXJsLCBkYXRhLCByZXF1ZXN0Q29uZmlnKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAncHV0JzpcbiAgICAgICAgICByZXNwb25zZSA9IGF3YWl0IHRoaXMuYXhpb3NJbnN0YW5jZS5wdXQodXJsLCBkYXRhLCByZXF1ZXN0Q29uZmlnKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAncGF0Y2gnOlxuICAgICAgICAgIHJlc3BvbnNlID0gYXdhaXQgdGhpcy5heGlvc0luc3RhbmNlLnBhdGNoKHVybCwgZGF0YSwgcmVxdWVzdENvbmZpZyk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ29wdGlvbnMnOlxuICAgICAgICAgIHJlc3BvbnNlID0gYXdhaXQgdGhpcy5heGlvc0luc3RhbmNlLm9wdGlvbnModXJsLCByZXF1ZXN0Q29uZmlnKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgcmVxdWVzdCB0eXBlJyk7XG4gICAgICB9XG4gICAgICB0aGlzLl9sb2dBcGlSZXNwb25zZTxUPih0eXBlLCB1cmwsIHJlc3BvbnNlKTtcbiAgICAgIHRoaXMuY29uc2VjdXRpdmVGYWlsdXJlcyA9IDA7XG4gICAgICByZXR1cm4gdGhpcy5oYW5kbGVSZXNwb25zZShyZXNwb25zZSk7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIH0gY2F0Y2ggKGU6IGFueSAvKipUT0RPOiBnZW5lcmFsaXplIGVycm9yIHR5cGVzICAqLykge1xuICAgICAgZS5jbGllbnRfcmVxdWVzdF9pZCA9IHJlcXVlc3RDb25maWcuaGVhZGVycz8uWyd4LWNsaWVudC1yZXF1ZXN0LWlkJ107XG4gICAgICB0aGlzLmNvbnNlY3V0aXZlRmFpbHVyZXMgKz0gMTtcbiAgICAgIGlmIChlLnJlc3BvbnNlKSB7XG4gICAgICAgIHRoaXMuX2xvZ0FwaUVycm9yKHR5cGUsIHVybCwgZS5yZXNwb25zZSk7XG4gICAgICAgIC8qKiBjb25uZWN0aW9uX2ZhbGxiYWNrIGRlcGVuZHMgb24gdGhpcyB0b2tlbiBleHBpcmF0aW9uIGxvZ2ljICovXG4gICAgICAgIGlmIChcbiAgICAgICAgICBlLnJlc3BvbnNlLmRhdGEuY29kZSA9PT0gS25vd25Db2Rlcy5UT0tFTl9FWFBJUkVEICYmXG4gICAgICAgICAgIXRoaXMudG9rZW5NYW5hZ2VyLmlzU3RhdGljKClcbiAgICAgICAgKSB7XG4gICAgICAgICAgaWYgKHRoaXMuY29uc2VjdXRpdmVGYWlsdXJlcyA+IDEpIHtcbiAgICAgICAgICAgIGF3YWl0IHNsZWVwKHJldHJ5SW50ZXJ2YWwodGhpcy5jb25zZWN1dGl2ZUZhaWx1cmVzKSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGF3YWl0IHRoaXMudG9rZW5NYW5hZ2VyLmxvYWRUb2tlbigpO1xuICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmRvQXhpb3NSZXF1ZXN0PFQsIEQ+KHR5cGUsIHVybCwgZGF0YSwgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlUmVzcG9uc2UoZS5yZXNwb25zZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9sb2dBcGlFcnJvcih0eXBlLCB1cmwsIGUpO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdGhyb3ctbGl0ZXJhbFxuICAgICAgICB0aHJvdyBlIGFzIEF4aW9zRXJyb3I8QVBJRXJyb3JSZXNwb25zZT47XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIGdldCA9IDxUPih1cmw6IHN0cmluZywgcGFyYW1zPzogQXhpb3NSZXF1ZXN0Q29uZmlnWydwYXJhbXMnXSkgPT4ge1xuICAgIHJldHVybiB0aGlzLmRvQXhpb3NSZXF1ZXN0PFQsIHVua25vd24+KCdnZXQnLCB1cmwsIG51bGwsIHtcbiAgICAgIHBhcmFtcyxcbiAgICB9KTtcbiAgfTtcblxuICBwdXQgPSA8VCwgRCA9IHVua25vd24+KFxuICAgIHVybDogc3RyaW5nLFxuICAgIGRhdGE/OiBELFxuICAgIHBhcmFtcz86IEF4aW9zUmVxdWVzdENvbmZpZ1sncGFyYW1zJ10sXG4gICkgPT4ge1xuICAgIHJldHVybiB0aGlzLmRvQXhpb3NSZXF1ZXN0PFQsIEQ+KCdwdXQnLCB1cmwsIGRhdGEsIHsgcGFyYW1zIH0pO1xuICB9O1xuXG4gIHBvc3QgPSA8VCwgRCA9IHVua25vd24+KFxuICAgIHVybDogc3RyaW5nLFxuICAgIGRhdGE/OiBELFxuICAgIHBhcmFtcz86IEF4aW9zUmVxdWVzdENvbmZpZ1sncGFyYW1zJ10sXG4gICkgPT4ge1xuICAgIHJldHVybiB0aGlzLmRvQXhpb3NSZXF1ZXN0PFQsIEQ+KCdwb3N0JywgdXJsLCBkYXRhLCB7IHBhcmFtcyB9KTtcbiAgfTtcblxuICBwYXRjaCA9IDxULCBEID0gdW5rbm93bj4oXG4gICAgdXJsOiBzdHJpbmcsXG4gICAgZGF0YT86IEQsXG4gICAgcGFyYW1zPzogQXhpb3NSZXF1ZXN0Q29uZmlnWydwYXJhbXMnXSxcbiAgKSA9PiB7XG4gICAgcmV0dXJuIHRoaXMuZG9BeGlvc1JlcXVlc3Q8VCwgRD4oJ3BhdGNoJywgdXJsLCBkYXRhLCB7IHBhcmFtcyB9KTtcbiAgfTtcblxuICBkZWxldGUgPSA8VD4odXJsOiBzdHJpbmcsIHBhcmFtcz86IEF4aW9zUmVxdWVzdENvbmZpZ1sncGFyYW1zJ10pID0+IHtcbiAgICByZXR1cm4gdGhpcy5kb0F4aW9zUmVxdWVzdDxULCB1bmtub3duPignZGVsZXRlJywgdXJsLCBudWxsLCB7XG4gICAgICBwYXJhbXMsXG4gICAgfSk7XG4gIH07XG5cbiAgZXJyb3JGcm9tUmVzcG9uc2UgPSAoXG4gICAgcmVzcG9uc2U6IEF4aW9zUmVzcG9uc2U8QVBJRXJyb3JSZXNwb25zZT4sXG4gICk6IEVycm9yRnJvbVJlc3BvbnNlPEFQSUVycm9yUmVzcG9uc2U+ID0+IHtcbiAgICBsZXQgZXJyOiBFcnJvckZyb21SZXNwb25zZTxBUElFcnJvclJlc3BvbnNlPjtcbiAgICBlcnIgPSBuZXcgRXJyb3JGcm9tUmVzcG9uc2UoYFN0cmVhbSBlcnJvciBIVFRQIGNvZGU6ICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xuICAgIGlmIChyZXNwb25zZS5kYXRhICYmIHJlc3BvbnNlLmRhdGEuY29kZSkge1xuICAgICAgZXJyID0gbmV3IEVycm9yKFxuICAgICAgICBgU3RyZWFtIGVycm9yIGNvZGUgJHtyZXNwb25zZS5kYXRhLmNvZGV9OiAke3Jlc3BvbnNlLmRhdGEubWVzc2FnZX1gLFxuICAgICAgKTtcbiAgICAgIGVyci5jb2RlID0gcmVzcG9uc2UuZGF0YS5jb2RlO1xuICAgIH1cbiAgICBlcnIucmVzcG9uc2UgPSByZXNwb25zZTtcbiAgICBlcnIuc3RhdHVzID0gcmVzcG9uc2Uuc3RhdHVzO1xuICAgIHJldHVybiBlcnI7XG4gIH07XG5cbiAgaGFuZGxlUmVzcG9uc2UgPSA8VD4ocmVzcG9uc2U6IEF4aW9zUmVzcG9uc2U8VD4pID0+IHtcbiAgICBjb25zdCBkYXRhID0gcmVzcG9uc2UuZGF0YTtcbiAgICBpZiAoaXNFcnJvclJlc3BvbnNlKHJlc3BvbnNlKSkge1xuICAgICAgdGhyb3cgdGhpcy5lcnJvckZyb21SZXNwb25zZShyZXNwb25zZSk7XG4gICAgfVxuICAgIHJldHVybiBkYXRhO1xuICB9O1xuXG4gIGRpc3BhdGNoRXZlbnQgPSAoZXZlbnQ6IFN0cmVhbVZpZGVvRXZlbnQpID0+IHtcbiAgICBpZiAoIWV2ZW50LnJlY2VpdmVkX2F0KSBldmVudC5yZWNlaXZlZF9hdCA9IG5ldyBEYXRlKCk7XG4gICAgdGhpcy5sb2dnZXIoJ2RlYnVnJywgYERpc3BhdGNoaW5nIGV2ZW50OiAke2V2ZW50LnR5cGV9YCwgZXZlbnQpO1xuICAgIGlmICghdGhpcy5saXN0ZW5lcnMpIHJldHVybjtcblxuICAgIC8vIGNhbGwgZ2VuZXJpYyBsaXN0ZW5lcnNcbiAgICBmb3IgKGNvbnN0IGxpc3RlbmVyIG9mIHRoaXMubGlzdGVuZXJzLmFsbCB8fCBbXSkge1xuICAgICAgbGlzdGVuZXIoZXZlbnQpO1xuICAgIH1cblxuICAgIC8vIGNhbGwgdHlwZSBzcGVjaWZpYyBsaXN0ZW5lcnNcbiAgICBmb3IgKGNvbnN0IGxpc3RlbmVyIG9mIHRoaXMubGlzdGVuZXJzW2V2ZW50LnR5cGVdIHx8IFtdKSB7XG4gICAgICBsaXN0ZW5lcihldmVudCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgY29ubmVjdCA9IGFzeW5jICgpID0+IHtcbiAgICBpZiAoIXRoaXMudXNlcklEIHx8ICF0aGlzLl91c2VyKSB7XG4gICAgICB0aHJvdyBFcnJvcihcbiAgICAgICAgJ0NhbGwgY29ubmVjdFVzZXIgb3IgY29ubmVjdEFub255bW91c1VzZXIgYmVmb3JlIHN0YXJ0aW5nIHRoZSBjb25uZWN0aW9uJyxcbiAgICAgICk7XG4gICAgfVxuICAgIGlmICghdGhpcy53c0Jhc2VVUkwpIHtcbiAgICAgIHRocm93IEVycm9yKCdXZWJzb2NrZXQgYmFzZSB1cmwgbm90IHNldCcpO1xuICAgIH1cbiAgICBpZiAoIXRoaXMuY2xpZW50SUQpIHtcbiAgICAgIHRocm93IEVycm9yKCdjbGllbnRJRCBpcyBub3Qgc2V0Jyk7XG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgIXRoaXMud3NDb25uZWN0aW9uICYmXG4gICAgICAodGhpcy5vcHRpb25zLndhcm1VcCB8fCB0aGlzLm9wdGlvbnMuZW5hYmxlSW5zaWdodHMpXG4gICAgKSB7XG4gICAgICB0aGlzLl9zYXlIaSgpO1xuICAgIH1cbiAgICAvLyBUaGUgU3RhYmxlV1NDb25uZWN0aW9uIGhhbmRsZXMgYWxsIHRoZSByZWNvbm5lY3Rpb24gbG9naWMuXG4gICAgaWYgKHRoaXMub3B0aW9ucy53c0Nvbm5lY3Rpb24gJiYgdGhpcy5ub2RlKSB7XG4gICAgICAvLyBJbnRlbnRpb25hbGx5IGF2b2lkaW5nIGFkZGluZyB0cyBnZW5lcmljcyBvbiB3c0Nvbm5lY3Rpb24gaW4gb3B0aW9ucyBzaW5jZSBpdHMgb25seSB1c2VmdWwgZm9yIHVuaXQgdGVzdCBwdXJwb3NlLlxuICAgICAgKHRoaXMub3B0aW9ucy53c0Nvbm5lY3Rpb24gYXMgdW5rbm93biBhcyBTdGFibGVXU0Nvbm5lY3Rpb24pLnNldENsaWVudChcbiAgICAgICAgdGhpcyxcbiAgICAgICk7XG4gICAgICB0aGlzLndzQ29ubmVjdGlvbiA9IHRoaXMub3B0aW9uc1xuICAgICAgICAud3NDb25uZWN0aW9uIGFzIHVua25vd24gYXMgU3RhYmxlV1NDb25uZWN0aW9uO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLndzQ29ubmVjdGlvbiA9IG5ldyBTdGFibGVXU0Nvbm5lY3Rpb24odGhpcyk7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIC8vIGlmIGZhbGxiYWNrIGlzIHVzZWQgYmVmb3JlLCBjb250aW51ZSB1c2luZyBpdCBpbnN0ZWFkIG9mIHdhaXRpbmcgZm9yIFdTIHRvIGZhaWxcbiAgICAgIGlmICh0aGlzLndzRmFsbGJhY2spIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMud3NGYWxsYmFjay5jb25uZWN0KCk7XG4gICAgICB9XG4gICAgICB0aGlzLmxvZ2dlcignaW5mbycsICdTdHJlYW1DbGllbnQuY29ubmVjdDogdGhpcy53c0Nvbm5lY3Rpb24uY29ubmVjdCgpJyk7XG4gICAgICAvLyBpZiBXU0ZhbGxiYWNrIGlzIGVuYWJsZWQsIHdzIGNvbm5lY3Qgc2hvdWxkIHRpbWVvdXQgZmFzdGVyIHNvIGZhbGxiYWNrIGNhbiB0cnlcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLndzQ29ubmVjdGlvbi5jb25uZWN0KFxuICAgICAgICB0aGlzLm9wdGlvbnMuZW5hYmxlV1NGYWxsYmFja1xuICAgICAgICAgID8gdGhpcy5kZWZhdWx0V1NUaW1lb3V0V2l0aEZhbGxiYWNrXG4gICAgICAgICAgOiB0aGlzLmRlZmF1bHRXU1RpbWVvdXQsXG4gICAgICApO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgLy8gcnVuIGZhbGxiYWNrIG9ubHkgaWYgaXQncyBXUy9OZXR3b3JrIGVycm9yIGFuZCBub3QgYSBub3JtYWwgQVBJIGVycm9yXG4gICAgICAvLyBtYWtlIHN1cmUgYnJvd3NlciBpcyBvbmxpbmUgYmVmb3JlIGV2ZW4gdHJ5aW5nIHRoZSBsb25ncG9sbFxuICAgICAgaWYgKFxuICAgICAgICB0aGlzLm9wdGlvbnMuZW5hYmxlV1NGYWxsYmFjayAmJlxuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIGlzV1NGYWlsdXJlKGVycikgJiZcbiAgICAgICAgaXNPbmxpbmUodGhpcy5sb2dnZXIpXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5sb2dnZXIoXG4gICAgICAgICAgJ3dhcm4nLFxuICAgICAgICAgICdjbGllbnQ6Y29ubmVjdCgpIC0gV1MgZmFpbGVkLCBmYWxsYmFjayB0byBsb25ncG9sbCcsXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudCh7IHR5cGU6ICd0cmFuc3BvcnQuY2hhbmdlZCcsIG1vZGU6ICdsb25ncG9sbCcgfSk7XG5cbiAgICAgICAgdGhpcy53c0Nvbm5lY3Rpb24uX2Rlc3Ryb3lDdXJyZW50V1NDb25uZWN0aW9uKCk7XG4gICAgICAgIHRoaXMud3NDb25uZWN0aW9uLmRpc2Nvbm5lY3QoKS50aGVuKCk7IC8vIGNsb3NlIFdTIHNvIG5vIHJldHJ5XG4gICAgICAgIHRoaXMud3NGYWxsYmFjayA9IG5ldyBXU0Nvbm5lY3Rpb25GYWxsYmFjayh0aGlzKTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMud3NGYWxsYmFjay5jb25uZWN0KCk7XG4gICAgICB9XG5cbiAgICAgIHRocm93IGVycjtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIENoZWNrIHRoZSBjb25uZWN0aXZpdHkgd2l0aCBzZXJ2ZXIgZm9yIHdhcm11cCBwdXJwb3NlLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3NheUhpID0gKCkgPT4ge1xuICAgIGNvbnN0IGNsaWVudF9yZXF1ZXN0X2lkID0gcmFuZG9tSWQoKTtcbiAgICBjb25zdCBvcHRzID0ge1xuICAgICAgaGVhZGVyczogQXhpb3NIZWFkZXJzLmZyb20oe1xuICAgICAgICAneC1jbGllbnQtcmVxdWVzdC1pZCc6IGNsaWVudF9yZXF1ZXN0X2lkLFxuICAgICAgfSksXG4gICAgfTtcbiAgICB0aGlzLmRvQXhpb3NSZXF1ZXN0KCdnZXQnLCB0aGlzLmJhc2VVUkwgKyAnL2hpJywgbnVsbCwgb3B0cykuY2F0Y2goKGUpID0+IHtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuZW5hYmxlSW5zaWdodHMpIHtcbiAgICAgICAgcG9zdEluc2lnaHRzKCdodHRwX2hpX2ZhaWxlZCcsIHtcbiAgICAgICAgICBhcGlfa2V5OiB0aGlzLmtleSxcbiAgICAgICAgICBlcnI6IGUsXG4gICAgICAgICAgY2xpZW50X3JlcXVlc3RfaWQsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIGdldFVzZXJBZ2VudCA9ICgpID0+IHtcbiAgICBjb25zdCB2ZXJzaW9uID0gcHJvY2Vzcy5lbnYuUEtHX1ZFUlNJT04gfHwgJzAuMC4wLWRldmVsb3BtZW50JztcbiAgICByZXR1cm4gKFxuICAgICAgdGhpcy51c2VyQWdlbnQgfHxcbiAgICAgIGBzdHJlYW0tdmlkZW8tamF2YXNjcmlwdC1jbGllbnQtJHtcbiAgICAgICAgdGhpcy5ub2RlID8gJ25vZGUnIDogJ2Jyb3dzZXInXG4gICAgICB9LSR7dmVyc2lvbn1gXG4gICAgKTtcbiAgfTtcblxuICBzZXRVc2VyQWdlbnQgPSAodXNlckFnZW50OiBzdHJpbmcpID0+IHtcbiAgICB0aGlzLnVzZXJBZ2VudCA9IHVzZXJBZ2VudDtcbiAgfTtcblxuICAvKipcbiAgICogX2lzVXNpbmdTZXJ2ZXJBdXRoIC0gUmV0dXJucyB0cnVlIGlmIHdlJ3JlIHVzaW5nIHNlcnZlciBzaWRlIGF1dGhcbiAgICovXG4gIF9pc1VzaW5nU2VydmVyQXV0aCA9ICgpID0+ICEhdGhpcy5zZWNyZXQ7XG5cbiAgX2VucmljaEF4aW9zT3B0aW9ucyA9IChcbiAgICBvcHRpb25zOiBBeGlvc1JlcXVlc3RDb25maWcgJiB7IGNvbmZpZz86IEF4aW9zUmVxdWVzdENvbmZpZyB9ICYge1xuICAgICAgcHVibGljRW5kcG9pbnQ/OiBib29sZWFuO1xuICAgIH0gPSB7XG4gICAgICBwYXJhbXM6IHt9LFxuICAgICAgaGVhZGVyczoge30sXG4gICAgICBjb25maWc6IHt9LFxuICAgIH0sXG4gICk6IEF4aW9zUmVxdWVzdENvbmZpZyA9PiB7XG4gICAgY29uc3QgdG9rZW4gPVxuICAgICAgb3B0aW9ucy5wdWJsaWNFbmRwb2ludCAmJiAhdGhpcy51c2VyID8gdW5kZWZpbmVkIDogdGhpcy5fZ2V0VG9rZW4oKTtcbiAgICBjb25zdCBhdXRob3JpemF0aW9uID0gdG9rZW4gPyB7IEF1dGhvcml6YXRpb246IHRva2VuIH0gOiB1bmRlZmluZWQ7XG4gICAgbGV0IHNpZ25hbDogQWJvcnRTaWduYWwgfCBudWxsID0gbnVsbDtcbiAgICBpZiAodGhpcy5uZXh0UmVxdWVzdEFib3J0Q29udHJvbGxlciAhPT0gbnVsbCkge1xuICAgICAgc2lnbmFsID0gdGhpcy5uZXh0UmVxdWVzdEFib3J0Q29udHJvbGxlci5zaWduYWw7XG4gICAgICB0aGlzLm5leHRSZXF1ZXN0QWJvcnRDb250cm9sbGVyID0gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAoIW9wdGlvbnMuaGVhZGVycz8uWyd4LWNsaWVudC1yZXF1ZXN0LWlkJ10pIHtcbiAgICAgIG9wdGlvbnMuaGVhZGVycyA9IHtcbiAgICAgICAgLi4ub3B0aW9ucy5oZWFkZXJzLFxuICAgICAgICAneC1jbGllbnQtcmVxdWVzdC1pZCc6IHJhbmRvbUlkKCksXG4gICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBwYXJhbXM6IHtcbiAgICAgICAgdXNlcl9pZDogdGhpcy51c2VySUQsXG4gICAgICAgIGNvbm5lY3Rpb25faWQ6IHRoaXMuX2dldENvbm5lY3Rpb25JRCgpLFxuICAgICAgICBhcGlfa2V5OiB0aGlzLmtleSxcbiAgICAgICAgLi4ub3B0aW9ucy5wYXJhbXMsXG4gICAgICB9LFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAuLi5hdXRob3JpemF0aW9uLFxuICAgICAgICAnc3RyZWFtLWF1dGgtdHlwZSc6XG4gICAgICAgICAgb3B0aW9ucy5wdWJsaWNFbmRwb2ludCAmJiAhdGhpcy51c2VyXG4gICAgICAgICAgICA/ICdhbm9ueW1vdXMnXG4gICAgICAgICAgICA6IHRoaXMuZ2V0QXV0aFR5cGUoKSxcbiAgICAgICAgJ1gtU3RyZWFtLUNsaWVudCc6IHRoaXMuZ2V0VXNlckFnZW50KCksXG4gICAgICAgIC4uLm9wdGlvbnMuaGVhZGVycyxcbiAgICAgIH0sXG4gICAgICAuLi4oc2lnbmFsID8geyBzaWduYWwgfSA6IHt9KSxcbiAgICAgIC4uLm9wdGlvbnMuY29uZmlnLFxuICAgICAgLi4udGhpcy5vcHRpb25zLmF4aW9zUmVxdWVzdENvbmZpZyxcbiAgICB9O1xuICB9O1xuXG4gIF9nZXRUb2tlbiA9ICgpID0+IHtcbiAgICBpZiAoIXRoaXMudG9rZW5NYW5hZ2VyKSByZXR1cm4gbnVsbDtcblxuICAgIHJldHVybiB0aGlzLnRva2VuTWFuYWdlci5nZXRUb2tlbigpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBlbmNvZGUgd3MgdXJsIHBheWxvYWRcbiAgICogQHByaXZhdGVcbiAgICogQHJldHVybnMganNvbiBzdHJpbmdcbiAgICovXG4gIF9idWlsZFdTUGF5bG9hZCA9IChjbGllbnRfcmVxdWVzdF9pZD86IHN0cmluZykgPT4ge1xuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICB1c2VyX2lkOiB0aGlzLnVzZXJJRCxcbiAgICAgIHVzZXJfZGV0YWlsczogdGhpcy5fdXNlcixcbiAgICAgIGNsaWVudF9yZXF1ZXN0X2lkLFxuICAgIH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBjcmVhdGVzIGFuIGFib3J0IGNvbnRyb2xsZXIgdGhhdCB3aWxsIGJlIHVzZWQgYnkgdGhlIG5leHQgSFRUUCBSZXF1ZXN0LlxuICAgKi9cbiAgY3JlYXRlQWJvcnRDb250cm9sbGVyRm9yTmV4dFJlcXVlc3QgPSAoKSA9PiB7XG4gICAgcmV0dXJuICh0aGlzLm5leHRSZXF1ZXN0QWJvcnRDb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpKTtcbiAgfTtcblxuICAvKipcbiAgICogY3JlYXRlVG9rZW4gLSBDcmVhdGVzIGEgdG9rZW4gdG8gYXV0aGVudGljYXRlIHRoaXMgdXNlci4gVGhpcyBmdW5jdGlvbiBpcyB1c2VkIHNlcnZlciBzaWRlLlxuICAgKiBUaGUgcmVzdWx0aW5nIHRva2VuIHNob3VsZCBiZSBwYXNzZWQgdG8gdGhlIGNsaWVudCBzaWRlIHdoZW4gdGhlIHVzZXJzIHJlZ2lzdGVycyBvciBsb2dzIGluLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdXNlcklEIFRoZSBVc2VyV2l0aElkIElEXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbZXhwXSBUaGUgZXhwaXJhdGlvbiB0aW1lIGZvciB0aGUgdG9rZW4gZXhwcmVzc2VkIGluIHRoZSBudW1iZXIgb2Ygc2Vjb25kcyBzaW5jZSB0aGUgZXBvY2hcbiAgICogQHBhcmFtIGNhbGxfY2lkcyBmb3IgYW5vbnltb3VzIHRva2VucyB5b3UgaGF2ZSB0byBwcm92aWRlIHRoZSBjYWxsIGNpZHMgdGhlIHVzZSBjYW4gam9pblxuICAgKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IFJldHVybnMgYSB0b2tlblxuICAgKi9cbiAgY3JlYXRlVG9rZW4gPSAoXG4gICAgdXNlcklEOiBzdHJpbmcsXG4gICAgZXhwPzogbnVtYmVyLFxuICAgIGlhdD86IG51bWJlcixcbiAgICBjYWxsX2NpZHM/OiBzdHJpbmdbXSxcbiAgKSA9PiB7XG4gICAgaWYgKHRoaXMuc2VjcmV0ID09IG51bGwpIHtcbiAgICAgIHRocm93IEVycm9yKFxuICAgICAgICBgdG9rZW5zIGNhbiBvbmx5IGJlIGNyZWF0ZWQgc2VydmVyLXNpZGUgdXNpbmcgdGhlIEFQSSBTZWNyZXRgLFxuICAgICAgKTtcbiAgICB9XG4gICAgY29uc3QgZXh0cmE6IHsgZXhwPzogbnVtYmVyOyBpYXQ/OiBudW1iZXI7IGNhbGxfY2lkcz86IHN0cmluZ1tdIH0gPSB7fTtcblxuICAgIGlmIChleHApIHtcbiAgICAgIGV4dHJhLmV4cCA9IGV4cDtcbiAgICB9XG5cbiAgICBpZiAoaWF0KSB7XG4gICAgICBleHRyYS5pYXQgPSBpYXQ7XG4gICAgfVxuXG4gICAgaWYgKGNhbGxfY2lkcykge1xuICAgICAgZXh0cmEuY2FsbF9jaWRzID0gY2FsbF9jaWRzO1xuICAgIH1cblxuICAgIHJldHVybiBKV1RVc2VyVG9rZW4odGhpcy5zZWNyZXQsIHVzZXJJRCwgZXh0cmEsIHt9KTtcbiAgfTtcbn1cbiIsImltcG9ydCB7IENhbGwgfSBmcm9tICcuL0NhbGwnO1xuaW1wb3J0IHsgU3RyZWFtQ2xpZW50IH0gZnJvbSAnLi9jb29yZGluYXRvci9jb25uZWN0aW9uL2NsaWVudCc7XG5pbXBvcnQge1xuICBTdHJlYW1WaWRlb1JlYWRPbmx5U3RhdGVTdG9yZSxcbiAgU3RyZWFtVmlkZW9Xcml0ZWFibGVTdGF0ZVN0b3JlLFxufSBmcm9tICcuL3N0b3JlJztcbmltcG9ydCB0eXBlIHtcbiAgQ29ubmVjdGVkRXZlbnQsXG4gIENyZWF0ZURldmljZVJlcXVlc3QsXG4gIENyZWF0ZUd1ZXN0UmVxdWVzdCxcbiAgQ3JlYXRlR3Vlc3RSZXNwb25zZSxcbiAgR2V0RWRnZXNSZXNwb25zZSxcbiAgTGlzdERldmljZXNSZXNwb25zZSxcbiAgUXVlcnlDYWxsc1JlcXVlc3QsXG4gIFF1ZXJ5Q2FsbHNSZXNwb25zZSxcbn0gZnJvbSAnLi9nZW4vY29vcmRpbmF0b3InO1xuaW1wb3J0IHtcbiAgQWxsQ2xpZW50RXZlbnRzLFxuICBDbGllbnRFdmVudExpc3RlbmVyLFxuICBMb2dnZXIsXG4gIExvZ0xldmVsLFxuICBTdHJlYW1DbGllbnRPcHRpb25zLFxuICBUb2tlbk9yUHJvdmlkZXIsXG4gIFRva2VuUHJvdmlkZXIsXG4gIFVzZXIsXG4gIFVzZXJXaXRoSWQsXG59IGZyb20gJy4vY29vcmRpbmF0b3IvY29ubmVjdGlvbi90eXBlcyc7XG5pbXBvcnQgeyBnZXRMb2dnZXIsIGxvZ1RvQ29uc29sZSwgc2V0TG9nZ2VyIH0gZnJvbSAnLi9sb2dnZXInO1xuaW1wb3J0IHsgZ2V0U2RrSW5mbyB9IGZyb20gJy4vY2xpZW50LWRldGFpbHMnO1xuaW1wb3J0IHsgU2RrVHlwZSB9IGZyb20gJy4vZ2VuL3ZpZGVvL3NmdS9tb2RlbHMvbW9kZWxzJztcblxuLyoqXG4gKiBBIGBTdHJlYW1WaWRlb0NsaWVudGAgaW5zdGFuY2UgbGV0cyB5b3UgY29tbXVuaWNhdGUgd2l0aCBvdXIgQVBJLCBhbmQgYXV0aGVudGljYXRlIHVzZXJzLlxuICovXG5leHBvcnQgY2xhc3MgU3RyZWFtVmlkZW9DbGllbnQge1xuICAvKipcbiAgICogQSByZWFjdGl2ZSBzdG9yZSB0aGF0IGV4cG9zZXMgYWxsIHRoZSBzdGF0ZSB2YXJpYWJsZXMgaW4gYSByZWFjdGl2ZSBtYW5uZXIgLSB5b3UgY2FuIHN1YnNjcmliZSB0byBjaGFuZ2VzIG9mIHRoZSBkaWZmZXJlbnQgc3RhdGUgdmFyaWFibGVzLiBPdXIgbGlicmFyeSBpcyBidWlsdCBpbiBhIHdheSB0aGF0IGFsbCBzdGF0ZSBjaGFuZ2VzIGFyZSBleHBvc2VkIGluIHRoaXMgc3RvcmUsIHNvIGFsbCBVSSBjaGFuZ2VzIGluIHlvdXIgYXBwbGljYXRpb24gc2hvdWxkIGJlIGhhbmRsZWQgYnkgc3Vic2NyaWJpbmcgdG8gdGhlc2UgdmFyaWFibGVzLlxuICAgKi9cbiAgcmVhZG9ubHkgcmVhZE9ubHlTdGF0ZVN0b3JlOiBTdHJlYW1WaWRlb1JlYWRPbmx5U3RhdGVTdG9yZTtcbiAgcmVhZG9ubHkgbG9nTGV2ZWw6IExvZ0xldmVsID0gJ3dhcm4nO1xuICByZWFkb25seSBsb2dnZXI6IExvZ2dlcjtcblxuICBwcm90ZWN0ZWQgcmVhZG9ubHkgd3JpdGVhYmxlU3RhdGVTdG9yZTogU3RyZWFtVmlkZW9Xcml0ZWFibGVTdGF0ZVN0b3JlO1xuICBzdHJlYW1DbGllbnQ6IFN0cmVhbUNsaWVudDtcblxuICBwcm90ZWN0ZWQgZXZlbnRIYW5kbGVyc1RvVW5yZWdpc3RlcjogQXJyYXk8KCkgPT4gdm9pZD4gPSBbXTtcbiAgcHJvdGVjdGVkIGNvbm5lY3Rpb25Qcm9taXNlOiBQcm9taXNlPHZvaWQgfCBDb25uZWN0ZWRFdmVudD4gfCB1bmRlZmluZWQ7XG4gIHByb3RlY3RlZCBkaXNjb25uZWN0aW9uUHJvbWlzZTogUHJvbWlzZTx2b2lkPiB8IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogWW91IHNob3VsZCBjcmVhdGUgb25seSBvbmUgaW5zdGFuY2Ugb2YgYFN0cmVhbVZpZGVvQ2xpZW50YC5cbiAgICovXG4gIGNvbnN0cnVjdG9yKGFwaUtleTogc3RyaW5nLCBvcHRzPzogU3RyZWFtQ2xpZW50T3B0aW9ucyk7XG4gIGNvbnN0cnVjdG9yKGFyZ3M6IHtcbiAgICBhcGlLZXk6IHN0cmluZztcbiAgICBvcHRpb25zPzogU3RyZWFtQ2xpZW50T3B0aW9ucztcbiAgICB1c2VyPzogVXNlcjtcbiAgICB0b2tlbj86IHN0cmluZztcbiAgICB0b2tlblByb3ZpZGVyPzogVG9rZW5Qcm92aWRlcjtcbiAgfSk7XG4gIGNvbnN0cnVjdG9yKFxuICAgIGFwaUtleU9yQXJnczpcbiAgICAgIHwgc3RyaW5nXG4gICAgICB8IHtcbiAgICAgICAgICBhcGlLZXk6IHN0cmluZztcbiAgICAgICAgICBvcHRpb25zPzogU3RyZWFtQ2xpZW50T3B0aW9ucztcbiAgICAgICAgICB1c2VyPzogVXNlcjtcbiAgICAgICAgICB0b2tlbj86IHN0cmluZztcbiAgICAgICAgICB0b2tlblByb3ZpZGVyPzogVG9rZW5Qcm92aWRlcjtcbiAgICAgICAgfSxcbiAgICBvcHRzPzogU3RyZWFtQ2xpZW50T3B0aW9ucyxcbiAgKSB7XG4gICAgbGV0IGxvZ2dlcjogTG9nZ2VyID0gbG9nVG9Db25zb2xlO1xuICAgIGxldCBsb2dMZXZlbDogTG9nTGV2ZWwgPSAnd2Fybic7XG4gICAgaWYgKHR5cGVvZiBhcGlLZXlPckFyZ3MgPT09ICdzdHJpbmcnKSB7XG4gICAgICBsb2dMZXZlbCA9IG9wdHM/LmxvZ0xldmVsIHx8IGxvZ0xldmVsO1xuICAgICAgbG9nZ2VyID0gb3B0cz8ubG9nZ2VyIHx8IGxvZ2dlcjtcbiAgICB9IGVsc2Uge1xuICAgICAgbG9nTGV2ZWwgPSBhcGlLZXlPckFyZ3Mub3B0aW9ucz8ubG9nTGV2ZWwgfHwgbG9nTGV2ZWw7XG4gICAgICBsb2dnZXIgPSBhcGlLZXlPckFyZ3Mub3B0aW9ucz8ubG9nZ2VyIHx8IGxvZ2dlcjtcbiAgICB9XG5cbiAgICBzZXRMb2dnZXIobG9nZ2VyLCBsb2dMZXZlbCk7XG4gICAgdGhpcy5sb2dnZXIgPSBnZXRMb2dnZXIoWydjbGllbnQnXSk7XG5cbiAgICBpZiAodHlwZW9mIGFwaUtleU9yQXJncyA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHRoaXMuc3RyZWFtQ2xpZW50ID0gbmV3IFN0cmVhbUNsaWVudChhcGlLZXlPckFyZ3MsIHtcbiAgICAgICAgcGVyc2lzdFVzZXJPbkNvbm5lY3Rpb25GYWlsdXJlOiB0cnVlLFxuICAgICAgICAuLi5vcHRzLFxuICAgICAgICBsb2dMZXZlbCxcbiAgICAgICAgbG9nZ2VyOiB0aGlzLmxvZ2dlcixcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnN0cmVhbUNsaWVudCA9IG5ldyBTdHJlYW1DbGllbnQoYXBpS2V5T3JBcmdzLmFwaUtleSwge1xuICAgICAgICBwZXJzaXN0VXNlck9uQ29ubmVjdGlvbkZhaWx1cmU6IHRydWUsXG4gICAgICAgIC4uLmFwaUtleU9yQXJncy5vcHRpb25zLFxuICAgICAgICBsb2dMZXZlbCxcbiAgICAgICAgbG9nZ2VyOiB0aGlzLmxvZ2dlcixcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBzZGtJbmZvID0gZ2V0U2RrSW5mbygpO1xuICAgICAgaWYgKHNka0luZm8pIHtcbiAgICAgICAgdGhpcy5zdHJlYW1DbGllbnQuc2V0VXNlckFnZW50KFxuICAgICAgICAgIHRoaXMuc3RyZWFtQ2xpZW50LmdldFVzZXJBZ2VudCgpICtcbiAgICAgICAgICAgIGAtdmlkZW8tJHtTZGtUeXBlW3Nka0luZm8udHlwZV0udG9Mb3dlckNhc2UoKX0tc2RrLSR7XG4gICAgICAgICAgICAgIHNka0luZm8ubWFqb3JcbiAgICAgICAgICAgIH0uJHtzZGtJbmZvLm1pbm9yfS4ke3Nka0luZm8ucGF0Y2h9YCxcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLndyaXRlYWJsZVN0YXRlU3RvcmUgPSBuZXcgU3RyZWFtVmlkZW9Xcml0ZWFibGVTdGF0ZVN0b3JlKCk7XG4gICAgdGhpcy5yZWFkT25seVN0YXRlU3RvcmUgPSBuZXcgU3RyZWFtVmlkZW9SZWFkT25seVN0YXRlU3RvcmUoXG4gICAgICB0aGlzLndyaXRlYWJsZVN0YXRlU3RvcmUsXG4gICAgKTtcblxuICAgIGlmICh0eXBlb2YgYXBpS2V5T3JBcmdzICE9PSAnc3RyaW5nJykge1xuICAgICAgY29uc3QgdXNlciA9IGFwaUtleU9yQXJncy51c2VyO1xuICAgICAgY29uc3QgdG9rZW4gPSBhcGlLZXlPckFyZ3MudG9rZW4gfHwgYXBpS2V5T3JBcmdzLnRva2VuUHJvdmlkZXI7XG4gICAgICBpZiAodXNlcikge1xuICAgICAgICB0aGlzLmNvbm5lY3RVc2VyKHVzZXIsIHRva2VuKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIHRoZSByZWFjdGl2ZSBzdGF0ZSBzdG9yZSwgdXNlIHRoaXMgaWYgeW91IHdhbnQgdG8gYmUgbm90aWZpZWQgYWJvdXQgY2hhbmdlcyB0byB0aGUgY2xpZW50IHN0YXRlXG4gICAqL1xuICBnZXQgc3RhdGUoKSB7XG4gICAgcmV0dXJuIHRoaXMucmVhZE9ubHlTdGF0ZVN0b3JlO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbm5lY3RzIHRoZSBnaXZlbiB1c2VyIHRvIHRoZSBjbGllbnQuXG4gICAqIE9ubHkgb25lIHVzZXIgY2FuIGNvbm5lY3QgYXQgYSB0aW1lLCBpZiB5b3Ugd2FudCB0byBjaGFuZ2UgdXNlcnMsIGNhbGwgYGRpc2Nvbm5lY3RVc2VyYCBiZWZvcmUgY29ubmVjdGluZyBhIG5ldyB1c2VyLlxuICAgKiBJZiB0aGUgY29ubmVjdGlvbiBpcyBzdWNjZXNzZnVsLCB0aGUgY29ubmVjdGVkIHVzZXIgW3N0YXRlIHZhcmlhYmxlXSgjcmVhZG9ubHlzdGF0ZXN0b3JlKSB3aWxsIGJlIHVwZGF0ZWQgYWNjb3JkaW5nbHkuXG4gICAqXG4gICAqIEBwYXJhbSB1c2VyIHRoZSB1c2VyIHRvIGNvbm5lY3QuXG4gICAqIEBwYXJhbSB0b2tlbiBhIHRva2VuIG9yIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgdG9rZW4uXG4gICAqL1xuICBhc3luYyBjb25uZWN0VXNlcihcbiAgICB1c2VyOiBVc2VyLFxuICAgIHRva2VuPzogVG9rZW5PclByb3ZpZGVyLFxuICApOiBQcm9taXNlPHZvaWQgfCBDb25uZWN0ZWRFdmVudD4ge1xuICAgIGlmICh1c2VyLnR5cGUgPT09ICdhbm9ueW1vdXMnKSB7XG4gICAgICB1c2VyLmlkID0gJyFhbm9uJztcbiAgICAgIHJldHVybiB0aGlzLmNvbm5lY3RBbm9ueW1vdXNVc2VyKHVzZXIgYXMgVXNlcldpdGhJZCwgdG9rZW4pO1xuICAgIH1cbiAgICBsZXQgY29ubmVjdFVzZXIgPSAoKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5zdHJlYW1DbGllbnQuY29ubmVjdFVzZXIodXNlciwgdG9rZW4pO1xuICAgIH07XG4gICAgaWYgKHVzZXIudHlwZSA9PT0gJ2d1ZXN0Jykge1xuICAgICAgY29ubmVjdFVzZXIgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0cmVhbUNsaWVudC5jb25uZWN0R3Vlc3RVc2VyKHVzZXIpO1xuICAgICAgfTtcbiAgICB9XG4gICAgdGhpcy5jb25uZWN0aW9uUHJvbWlzZSA9IHRoaXMuZGlzY29ubmVjdGlvblByb21pc2VcbiAgICAgID8gdGhpcy5kaXNjb25uZWN0aW9uUHJvbWlzZS50aGVuKCgpID0+IGNvbm5lY3RVc2VyKCkpXG4gICAgICA6IGNvbm5lY3RVc2VyKCk7XG5cbiAgICB0aGlzLmNvbm5lY3Rpb25Qcm9taXNlPy5maW5hbGx5KCgpID0+ICh0aGlzLmNvbm5lY3Rpb25Qcm9taXNlID0gdW5kZWZpbmVkKSk7XG4gICAgY29uc3QgY29ubmVjdFVzZXJSZXNwb25zZSA9IGF3YWl0IHRoaXMuY29ubmVjdGlvblByb21pc2U7XG4gICAgLy8gY29ubmVjdFVzZXJSZXNwb25zZSB3aWxsIGJlIHZvaWQgaWYgY29ubmVjdFVzZXIgY2FsbGVkIHR3aWNlIGZvciB0aGUgc2FtZSB1c2VyXG4gICAgaWYgKGNvbm5lY3RVc2VyUmVzcG9uc2U/Lm1lKSB7XG4gICAgICB0aGlzLndyaXRlYWJsZVN0YXRlU3RvcmUuc2V0Q29ubmVjdGVkVXNlcihjb25uZWN0VXNlclJlc3BvbnNlLm1lKTtcbiAgICB9XG5cbiAgICB0aGlzLmV2ZW50SGFuZGxlcnNUb1VucmVnaXN0ZXIucHVzaChcbiAgICAgIHRoaXMub24oJ2Nvbm5lY3Rpb24uY2hhbmdlZCcsIChldmVudCkgPT4ge1xuICAgICAgICBpZiAoZXZlbnQub25saW5lKSB7XG4gICAgICAgICAgY29uc3QgY2FsbHNUb1JlV2F0Y2ggPSB0aGlzLndyaXRlYWJsZVN0YXRlU3RvcmUuY2FsbHNcbiAgICAgICAgICAgIC5maWx0ZXIoKGNhbGwpID0+IGNhbGwud2F0Y2hpbmcpXG4gICAgICAgICAgICAubWFwKChjYWxsKSA9PiBjYWxsLmNpZCk7XG5cbiAgICAgICAgICB0aGlzLmxvZ2dlcihcbiAgICAgICAgICAgICdpbmZvJyxcbiAgICAgICAgICAgIGBSZXdhdGNoaW5nIGNhbGxzIGFmdGVyIGNvbm5lY3Rpb24gY2hhbmdlZCAke2NhbGxzVG9SZVdhdGNoLmpvaW4oXG4gICAgICAgICAgICAgICcsICcsXG4gICAgICAgICAgICApfWAsXG4gICAgICAgICAgKTtcbiAgICAgICAgICBpZiAoY2FsbHNUb1JlV2F0Y2gubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGhpcy5xdWVyeUNhbGxzKHtcbiAgICAgICAgICAgICAgd2F0Y2g6IHRydWUsXG4gICAgICAgICAgICAgIGZpbHRlcl9jb25kaXRpb25zOiB7XG4gICAgICAgICAgICAgICAgY2lkOiB7ICRpbjogY2FsbHNUb1JlV2F0Y2ggfSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgc29ydDogW3sgZmllbGQ6ICdjaWQnLCBkaXJlY3Rpb246IDEgfV0sXG4gICAgICAgICAgICB9KS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICAgIHRoaXMubG9nZ2VyKCdlcnJvcicsICdGYWlsZWQgdG8gcmUtd2F0Y2ggY2FsbHMnLCBlcnIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KSxcbiAgICApO1xuXG4gICAgdGhpcy5ldmVudEhhbmRsZXJzVG9VbnJlZ2lzdGVyLnB1c2goXG4gICAgICB0aGlzLm9uKCdjYWxsLmNyZWF0ZWQnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgeyBjYWxsLCBtZW1iZXJzIH0gPSBldmVudDtcbiAgICAgICAgaWYgKHVzZXIuaWQgPT09IGNhbGwuY3JlYXRlZF9ieS5pZCkge1xuICAgICAgICAgIHRoaXMubG9nZ2VyKFxuICAgICAgICAgICAgJ3dhcm4nLFxuICAgICAgICAgICAgJ1JlY2VpdmVkIGBjYWxsLmNyZWF0ZWRgIHNlbnQgYnkgdGhlIGN1cnJlbnQgdXNlcicsXG4gICAgICAgICAgKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmxvZ2dlcignaW5mbycsIGBOZXcgY2FsbCBjcmVhdGVkIGFuZCByZWdpc3RlcmVkOiAke2NhbGwuY2lkfWApO1xuICAgICAgICBjb25zdCBuZXdDYWxsID0gbmV3IENhbGwoe1xuICAgICAgICAgIHN0cmVhbUNsaWVudDogdGhpcy5zdHJlYW1DbGllbnQsXG4gICAgICAgICAgdHlwZTogY2FsbC50eXBlLFxuICAgICAgICAgIGlkOiBjYWxsLmlkLFxuICAgICAgICAgIG1lbWJlcnMsXG4gICAgICAgICAgY2xpZW50U3RvcmU6IHRoaXMud3JpdGVhYmxlU3RhdGVTdG9yZSxcbiAgICAgICAgfSk7XG4gICAgICAgIG5ld0NhbGwuc3RhdGUudXBkYXRlRnJvbUNhbGxSZXNwb25zZShjYWxsKTtcbiAgICAgICAgdGhpcy53cml0ZWFibGVTdGF0ZVN0b3JlLnJlZ2lzdGVyQ2FsbChuZXdDYWxsKTtcbiAgICAgIH0pLFxuICAgICk7XG5cbiAgICB0aGlzLmV2ZW50SGFuZGxlcnNUb1VucmVnaXN0ZXIucHVzaChcbiAgICAgIHRoaXMub24oJ2NhbGwucmluZycsIGFzeW5jIChldmVudCkgPT4ge1xuICAgICAgICBjb25zdCB7IGNhbGwsIG1lbWJlcnMgfSA9IGV2ZW50O1xuICAgICAgICBpZiAodXNlci5pZCA9PT0gY2FsbC5jcmVhdGVkX2J5LmlkKSB7XG4gICAgICAgICAgdGhpcy5sb2dnZXIoXG4gICAgICAgICAgICAnZGVidWcnLFxuICAgICAgICAgICAgJ1JlY2VpdmVkIGBjYWxsLnJpbmdgIHNlbnQgYnkgdGhlIGN1cnJlbnQgdXNlciBzbyBpZ25vcmluZyB0aGUgZXZlbnQnLFxuICAgICAgICAgICk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVGhlIGNhbGwgbWlnaHQgYWxyZWFkeSBiZSB0cmFja2VkIGJ5IHRoZSBjbGllbnQsXG4gICAgICAgIC8vIGlmIGBjYWxsLmNyZWF0ZWRgIHdhcyByZWNlaXZlZCBiZWZvcmUgYGNhbGwucmluZ2AuXG4gICAgICAgIC8vIEluIHRoYXQgY2FzZSwgd2UgY2xlYW51cCB0aGUgYWxyZWFkeSB0cmFja2VkIGNhbGwuXG4gICAgICAgIGNvbnN0IHByZXZDYWxsID0gdGhpcy53cml0ZWFibGVTdGF0ZVN0b3JlLmZpbmRDYWxsKGNhbGwudHlwZSwgY2FsbC5pZCk7XG4gICAgICAgIGF3YWl0IHByZXZDYWxsPy5sZWF2ZSgpO1xuICAgICAgICAvLyB3ZSBjcmVhdGUgYSBuZXcgY2FsbFxuICAgICAgICBjb25zdCB0aGVDYWxsID0gbmV3IENhbGwoe1xuICAgICAgICAgIHN0cmVhbUNsaWVudDogdGhpcy5zdHJlYW1DbGllbnQsXG4gICAgICAgICAgdHlwZTogY2FsbC50eXBlLFxuICAgICAgICAgIGlkOiBjYWxsLmlkLFxuICAgICAgICAgIG1lbWJlcnMsXG4gICAgICAgICAgY2xpZW50U3RvcmU6IHRoaXMud3JpdGVhYmxlU3RhdGVTdG9yZSxcbiAgICAgICAgICByaW5naW5nOiB0cnVlLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhlQ2FsbC5zdGF0ZS51cGRhdGVGcm9tQ2FsbFJlc3BvbnNlKGNhbGwpO1xuICAgICAgICAvLyB3ZSBmZXRjaCB0aGUgbGF0ZXN0IG1ldGFkYXRhIGZvciB0aGUgY2FsbCBmcm9tIHRoZSBzZXJ2ZXJcbiAgICAgICAgYXdhaXQgdGhlQ2FsbC5nZXQoKTtcbiAgICAgICAgdGhpcy53cml0ZWFibGVTdGF0ZVN0b3JlLnJlZ2lzdGVyQ2FsbCh0aGVDYWxsKTtcbiAgICAgIH0pLFxuICAgICk7XG5cbiAgICByZXR1cm4gY29ubmVjdFVzZXJSZXNwb25zZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEaXNjb25uZWN0cyB0aGUgY3VycmVudGx5IGNvbm5lY3RlZCB1c2VyIGZyb20gdGhlIGNsaWVudC5cbiAgICpcbiAgICogSWYgdGhlIGNvbm5lY3Rpb24gaXMgc3VjY2Vzc2Z1bGx5IGRpc2Nvbm5lY3RlZCwgdGhlIGNvbm5lY3RlZCB1c2VyIFtzdGF0ZSB2YXJpYWJsZV0oI3JlYWRvbmx5c3RhdGVzdG9yZSkgd2lsbCBiZSB1cGRhdGVkIGFjY29yZGluZ2x5XG4gICAqXG4gICAqIEBwYXJhbSB0aW1lb3V0IE1heCBudW1iZXIgb2YgbXMsIHRvIHdhaXQgZm9yIGNsb3NlIGV2ZW50IG9mIHdlYnNvY2tldCwgYmVmb3JlIGZvcmNlZnVsbHkgYXNzdW1pbmcgc3VjY2Vzc2Z1bCBkaXNjb25uZWN0aW9uLlxuICAgKiAgICAgICAgICAgICAgICBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvQ2xvc2VFdmVudFxuICAgKi9cbiAgZGlzY29ubmVjdFVzZXIgPSBhc3luYyAodGltZW91dD86IG51bWJlcikgPT4ge1xuICAgIGlmICghdGhpcy5zdHJlYW1DbGllbnQudXNlciAmJiAhdGhpcy5jb25uZWN0aW9uUHJvbWlzZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBkaXNjb25uZWN0VXNlciA9ICgpID0+IHRoaXMuc3RyZWFtQ2xpZW50LmRpc2Nvbm5lY3RVc2VyKHRpbWVvdXQpO1xuICAgIHRoaXMuZGlzY29ubmVjdGlvblByb21pc2UgPSB0aGlzLmNvbm5lY3Rpb25Qcm9taXNlXG4gICAgICA/IHRoaXMuY29ubmVjdGlvblByb21pc2UudGhlbigoKSA9PiBkaXNjb25uZWN0VXNlcigpKVxuICAgICAgOiBkaXNjb25uZWN0VXNlcigpO1xuICAgIHRoaXMuZGlzY29ubmVjdGlvblByb21pc2UuZmluYWxseShcbiAgICAgICgpID0+ICh0aGlzLmRpc2Nvbm5lY3Rpb25Qcm9taXNlID0gdW5kZWZpbmVkKSxcbiAgICApO1xuICAgIGF3YWl0IHRoaXMuZGlzY29ubmVjdGlvblByb21pc2U7XG4gICAgdGhpcy5ldmVudEhhbmRsZXJzVG9VbnJlZ2lzdGVyLmZvckVhY2goKHVucmVnaXN0ZXIpID0+IHVucmVnaXN0ZXIoKSk7XG4gICAgdGhpcy5ldmVudEhhbmRsZXJzVG9VbnJlZ2lzdGVyID0gW107XG4gICAgdGhpcy53cml0ZWFibGVTdGF0ZVN0b3JlLnNldENvbm5lY3RlZFVzZXIodW5kZWZpbmVkKTtcbiAgfTtcblxuICAvKipcbiAgICogWW91IGNhbiBzdWJzY3JpYmUgdG8gV2ViU29ja2V0IGV2ZW50cyBwcm92aWRlZCBieSB0aGUgQVBJLlxuICAgKiBUbyByZW1vdmUgYSBzdWJzY3JpcHRpb24sIGNhbGwgdGhlIGBvZmZgIG1ldGhvZCBvciwgZXhlY3V0ZSB0aGUgcmV0dXJuZWQgdW5zdWJzY3JpYmUgZnVuY3Rpb24uXG4gICAqIFBsZWFzZSBub3RlIHRoYXQgc3Vic2NyaWJpbmcgdG8gV2ViU29ja2V0IGV2ZW50cyBpcyBhbiBhZHZhbmNlZCB1c2UtY2FzZSwgZm9yIG1vc3QgdXNlLWNhc2VzIGl0IHNob3VsZCBiZSBlbm91Z2ggdG8gd2F0Y2ggZm9yIGNoYW5nZXMgaW4gdGhlIHJlYWN0aXZlIFtzdGF0ZSBzdG9yZV0oI3JlYWRvbmx5c3RhdGVzdG9yZSkuXG4gICAqXG4gICAqIEBwYXJhbSBldmVudE5hbWUgdGhlIGV2ZW50IG5hbWUgb3IgJ2FsbCcuXG4gICAqIEBwYXJhbSBjYWxsYmFjayB0aGUgY2FsbGJhY2sgd2hpY2ggd2lsbCBiZSBjYWxsZWQgd2hlbiB0aGUgZXZlbnQgaXMgZW1pdHRlZC5cbiAgICogQHJldHVybnMgYW4gdW5zdWJzY3JpYmUgZnVuY3Rpb24uXG4gICAqL1xuICBvbiA9IDxFIGV4dGVuZHMga2V5b2YgQWxsQ2xpZW50RXZlbnRzPihcbiAgICBldmVudE5hbWU6IEUsXG4gICAgY2FsbGJhY2s6IENsaWVudEV2ZW50TGlzdGVuZXI8RT4sXG4gICkgPT4ge1xuICAgIHJldHVybiB0aGlzLnN0cmVhbUNsaWVudC5vbihldmVudE5hbWUsIGNhbGxiYWNrKTtcbiAgfTtcblxuICAvKipcbiAgICogUmVtb3ZlIHN1YnNjcmlwdGlvbiBmb3IgV2ViU29ja2V0IGV2ZW50cyB0aGF0IHdlcmUgY3JlYXRlZCBieSB0aGUgYG9uYCBtZXRob2QuXG4gICAqXG4gICAqIEBwYXJhbSBldmVudE5hbWUgdGhlIGV2ZW50IG5hbWUuXG4gICAqIEBwYXJhbSBjYWxsYmFjayB0aGUgY2FsbGJhY2sgd2hpY2ggd2FzIHBhc3NlZCB0byB0aGUgYG9uYCBtZXRob2QuXG4gICAqL1xuICBvZmYgPSA8RSBleHRlbmRzIGtleW9mIEFsbENsaWVudEV2ZW50cz4oXG4gICAgZXZlbnROYW1lOiBFLFxuICAgIGNhbGxiYWNrOiBDbGllbnRFdmVudExpc3RlbmVyPEU+LFxuICApID0+IHtcbiAgICByZXR1cm4gdGhpcy5zdHJlYW1DbGllbnQub2ZmKGV2ZW50TmFtZSwgY2FsbGJhY2spO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IGNhbGwuXG4gICAqXG4gICAqIEBwYXJhbSB0eXBlIHRoZSB0eXBlIG9mIHRoZSBjYWxsLlxuICAgKiBAcGFyYW0gaWQgdGhlIGlkIG9mIHRoZSBjYWxsLCBpZiBub3QgcHJvdmlkZWQgYSB1bmlxdWUgcmFuZG9tIHZhbHVlIGlzIHVzZWRcbiAgICovXG4gIGNhbGwgPSAodHlwZTogc3RyaW5nLCBpZDogc3RyaW5nKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBDYWxsKHtcbiAgICAgIHN0cmVhbUNsaWVudDogdGhpcy5zdHJlYW1DbGllbnQsXG4gICAgICBpZDogaWQsXG4gICAgICB0eXBlOiB0eXBlLFxuICAgICAgY2xpZW50U3RvcmU6IHRoaXMud3JpdGVhYmxlU3RhdGVTdG9yZSxcbiAgICB9KTtcbiAgfTtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBndWVzdCB1c2VyIHdpdGggdGhlIGdpdmVuIGRhdGEuXG4gICAqXG4gICAqIEBwYXJhbSBkYXRhIHRoZSBkYXRhIGZvciB0aGUgZ3Vlc3QgdXNlci5cbiAgICovXG4gIGNyZWF0ZUd1ZXN0VXNlciA9IGFzeW5jIChkYXRhOiBDcmVhdGVHdWVzdFJlcXVlc3QpID0+IHtcbiAgICByZXR1cm4gdGhpcy5zdHJlYW1DbGllbnQuZG9BeGlvc1JlcXVlc3Q8XG4gICAgICBDcmVhdGVHdWVzdFJlc3BvbnNlLFxuICAgICAgQ3JlYXRlR3Vlc3RSZXF1ZXN0XG4gICAgPigncG9zdCcsICcvZ3Vlc3QnLCBkYXRhLCB7IHB1YmxpY0VuZHBvaW50OiB0cnVlIH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBXaWxsIHF1ZXJ5IHRoZSBBUEkgZm9yIGNhbGxzIG1hdGNoaW5nIHRoZSBnaXZlbiBmaWx0ZXJzLlxuICAgKlxuICAgKiBAcGFyYW0gZGF0YSB0aGUgcXVlcnkgZGF0YS5cbiAgICovXG4gIHF1ZXJ5Q2FsbHMgPSBhc3luYyAoZGF0YTogUXVlcnlDYWxsc1JlcXVlc3QgPSB7fSkgPT4ge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zdHJlYW1DbGllbnQucG9zdDxcbiAgICAgIFF1ZXJ5Q2FsbHNSZXNwb25zZSxcbiAgICAgIFF1ZXJ5Q2FsbHNSZXF1ZXN0XG4gICAgPignL2NhbGxzJywgZGF0YSk7XG4gICAgY29uc3QgY2FsbHMgPSByZXNwb25zZS5jYWxscy5tYXAoKGMpID0+IHtcbiAgICAgIGNvbnN0IGNhbGwgPSBuZXcgQ2FsbCh7XG4gICAgICAgIHN0cmVhbUNsaWVudDogdGhpcy5zdHJlYW1DbGllbnQsXG4gICAgICAgIGlkOiBjLmNhbGwuaWQsXG4gICAgICAgIHR5cGU6IGMuY2FsbC50eXBlLFxuICAgICAgICBtZW1iZXJzOiBjLm1lbWJlcnMsXG4gICAgICAgIG93bkNhcGFiaWxpdGllczogYy5vd25fY2FwYWJpbGl0aWVzLFxuICAgICAgICB3YXRjaGluZzogZGF0YS53YXRjaCxcbiAgICAgICAgY2xpZW50U3RvcmU6IHRoaXMud3JpdGVhYmxlU3RhdGVTdG9yZSxcbiAgICAgIH0pO1xuICAgICAgY2FsbC5zdGF0ZS51cGRhdGVGcm9tQ2FsbFJlc3BvbnNlKGMuY2FsbCk7XG4gICAgICBjYWxsLmFwcGx5RGV2aWNlQ29uZmlnKCk7XG4gICAgICBpZiAoZGF0YS53YXRjaCkge1xuICAgICAgICB0aGlzLndyaXRlYWJsZVN0YXRlU3RvcmUucmVnaXN0ZXJDYWxsKGNhbGwpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNhbGw7XG4gICAgfSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLnJlc3BvbnNlLFxuICAgICAgY2FsbHM6IGNhbGxzLFxuICAgIH07XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBsaXN0IG9mIGF2YWlsYWJsZSBkYXRhIGNlbnRlcnMgYXZhaWxhYmxlIGZvciBob3N0aW5nIGNhbGxzLlxuICAgKi9cbiAgZWRnZXMgPSBhc3luYyAoKSA9PiB7XG4gICAgcmV0dXJuIHRoaXMuc3RyZWFtQ2xpZW50LmdldDxHZXRFZGdlc1Jlc3BvbnNlPihgL2VkZ2VzYCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIGFkZERldmljZSAtIEFkZHMgYSBwdXNoIGRldmljZSBmb3IgYSB1c2VyLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgdGhlIGRldmljZSBpZFxuICAgKiBAcGFyYW0ge3N0cmluZ30gcHVzaF9wcm92aWRlciB0aGUgcHVzaCBwcm92aWRlciBuYW1lIChlZy4gYXBuLCBmaXJlYmFzZSlcbiAgICogQHBhcmFtIHtzdHJpbmd9IHB1c2hfcHJvdmlkZXJfbmFtZSB1c2VyIHByb3ZpZGVkIHB1c2ggcHJvdmlkZXIgbmFtZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW3VzZXJJRF0gdGhlIHVzZXIgaWQgKGRlZmF1bHRzIHRvIGN1cnJlbnQgdXNlcilcbiAgICogQHBhcmFtIHtib29sZWFufSBbdm9pcF90b2tlbl0gZW5hYmxlcyB1c2Ugb2YgVm9JUCB0b2tlbiBmb3IgcHVzaCBub3RpZmljYXRpb25zIG9uIGlPUyBwbGF0Zm9ybVxuICAgKi9cbiAgYWRkRGV2aWNlID0gYXN5bmMgKFxuICAgIGlkOiBzdHJpbmcsXG4gICAgcHVzaF9wcm92aWRlcjogc3RyaW5nLFxuICAgIHB1c2hfcHJvdmlkZXJfbmFtZT86IHN0cmluZyxcbiAgICB1c2VySUQ/OiBzdHJpbmcsXG4gICAgdm9pcF90b2tlbj86IGJvb2xlYW4sXG4gICkgPT4ge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLnN0cmVhbUNsaWVudC5wb3N0PENyZWF0ZURldmljZVJlcXVlc3Q+KCcvZGV2aWNlcycsIHtcbiAgICAgIGlkLFxuICAgICAgcHVzaF9wcm92aWRlcixcbiAgICAgIHZvaXBfdG9rZW4sXG4gICAgICAuLi4odXNlcklEICE9IG51bGwgPyB7IHVzZXJfaWQ6IHVzZXJJRCB9IDoge30pLFxuICAgICAgLi4uKHB1c2hfcHJvdmlkZXJfbmFtZSAhPSBudWxsID8geyBwdXNoX3Byb3ZpZGVyX25hbWUgfSA6IHt9KSxcbiAgICB9KTtcbiAgfTtcblxuICAvKipcbiAgICogYWRkRGV2aWNlIC0gQWRkcyBhIHB1c2ggZGV2aWNlIGZvciBhIHVzZXIuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZCB0aGUgZGV2aWNlIGlkXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBwdXNoX3Byb3ZpZGVyIHRoZSBwdXNoIHByb3ZpZGVyIG5hbWUgKGVnLiBhcG4sIGZpcmViYXNlKVxuICAgKiBAcGFyYW0ge3N0cmluZ30gcHVzaF9wcm92aWRlcl9uYW1lIHVzZXIgcHJvdmlkZWQgcHVzaCBwcm92aWRlciBuYW1lXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbdXNlcklEXSB0aGUgdXNlciBpZCAoZGVmYXVsdHMgdG8gY3VycmVudCB1c2VyKVxuICAgKi9cbiAgYXN5bmMgYWRkVm9pcERldmljZShcbiAgICBpZDogc3RyaW5nLFxuICAgIHB1c2hfcHJvdmlkZXI6IHN0cmluZyxcbiAgICBwdXNoX3Byb3ZpZGVyX25hbWU6IHN0cmluZyxcbiAgICB1c2VySUQ/OiBzdHJpbmcsXG4gICkge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLmFkZERldmljZShcbiAgICAgIGlkLFxuICAgICAgcHVzaF9wcm92aWRlcixcbiAgICAgIHB1c2hfcHJvdmlkZXJfbmFtZSxcbiAgICAgIHVzZXJJRCxcbiAgICAgIHRydWUsXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBnZXREZXZpY2VzIC0gUmV0dXJucyB0aGUgZGV2aWNlcyBhc3NvY2lhdGVkIHdpdGggYSBjdXJyZW50IHVzZXJcbiAgICogQHBhcmFtIHtzdHJpbmd9IFt1c2VySURdIFVzZXIgSUQuIE9ubHkgd29ya3Mgb24gc2VydmVyc2lkZVxuICAgKi9cbiAgZ2V0RGV2aWNlcyA9IGFzeW5jICh1c2VySUQ/OiBzdHJpbmcpID0+IHtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5zdHJlYW1DbGllbnQuZ2V0PExpc3REZXZpY2VzUmVzcG9uc2U+KFxuICAgICAgJy9kZXZpY2VzJyxcbiAgICAgIHVzZXJJRCA/IHsgdXNlcl9pZDogdXNlcklEIH0gOiB7fSxcbiAgICApO1xuICB9O1xuXG4gIC8qKlxuICAgKiByZW1vdmVEZXZpY2UgLSBSZW1vdmVzIHRoZSBkZXZpY2Ugd2l0aCB0aGUgZ2l2ZW4gaWQuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZCBUaGUgZGV2aWNlIGlkXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbdXNlcklEXSBUaGUgdXNlciBpZC4gT25seSBzcGVjaWZ5IHRoaXMgZm9yIHNlcnZlcnNpZGUgcmVxdWVzdHNcbiAgICovXG4gIHJlbW92ZURldmljZSA9IGFzeW5jIChpZDogc3RyaW5nLCB1c2VySUQ/OiBzdHJpbmcpID0+IHtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5zdHJlYW1DbGllbnQuZGVsZXRlKCcvZGV2aWNlcycsIHtcbiAgICAgIGlkLFxuICAgICAgLi4uKHVzZXJJRCA/IHsgdXNlcl9pZDogdXNlcklEIH0gOiB7fSksXG4gICAgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEEgY2FsbGJhY2sgdGhhdCBjYW4gYmUgdXNlZCB0byBjcmVhdGUgcmluZ2luZyBjYWxscyBmcm9tIHB1c2ggbm90aWZpY2F0aW9ucy4gSWYgdGhlIGNhbGwgYWxyZWFkeSBleGlzdHMsIGl0IHdpbGwgZG8gbm90aGluZy5cbiAgICogQHBhcmFtIGNhbGxfY2lkXG4gICAqIEByZXR1cm5zXG4gICAqL1xuICBvblJpbmdpbmdDYWxsID0gYXN5bmMgKGNhbGxfY2lkOiBzdHJpbmcpID0+IHtcbiAgICAvLyBpZiB3ZSBmaW5kIHRoZSBjYWxsIGFuZCBpcyBhbHJlYWR5IHJpbmdpbmcsIHdlIGRvbid0IG5lZWQgdG8gY3JlYXRlIGEgbmV3IGNhbGxcbiAgICAvLyBhcyBjbGllbnQgd291bGQgaGF2ZSByZWNlaXZlZCB0aGUgY2FsbC5yaW5nIHN0YXRlIGJlY2F1c2UgdGhlIGFwcCBoYWQgV1MgYWxpdmUgd2hlbiByZWNlaXZpbmcgcHVzaCBub3RpZmljYXRpb25zXG4gICAgbGV0IGNhbGwgPSB0aGlzLnJlYWRPbmx5U3RhdGVTdG9yZS5jYWxscy5maW5kKFxuICAgICAgKGMpID0+IGMuY2lkID09PSBjYWxsX2NpZCAmJiBjLnJpbmdpbmcsXG4gICAgKTtcbiAgICBpZiAoIWNhbGwpIHtcbiAgICAgIC8vIGlmIG5vdCBpdCBtZWFucyB0aGF0IFdTIGlzIG5vdCBhbGl2ZSB3aGVuIHJlY2VpdmluZyB0aGUgcHVzaCBub3RpZmljYXRpb25zIGFuZCB3ZSBuZWVkIHRvIGZldGNoIHRoZSBjYWxsXG4gICAgICBjb25zdCBbY2FsbFR5cGUsIGNhbGxJZF0gPSBjYWxsX2NpZC5zcGxpdCgnOicpO1xuICAgICAgY2FsbCA9IG5ldyBDYWxsKHtcbiAgICAgICAgc3RyZWFtQ2xpZW50OiB0aGlzLnN0cmVhbUNsaWVudCxcbiAgICAgICAgdHlwZTogY2FsbFR5cGUsXG4gICAgICAgIGlkOiBjYWxsSWQsXG4gICAgICAgIGNsaWVudFN0b3JlOiB0aGlzLndyaXRlYWJsZVN0YXRlU3RvcmUsXG4gICAgICAgIHJpbmdpbmc6IHRydWUsXG4gICAgICB9KTtcbiAgICAgIGF3YWl0IGNhbGwuZ2V0KCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNhbGw7XG4gIH07XG5cbiAgLyoqXG4gICAqIENvbm5lY3RzIHRoZSBnaXZlbiBhbm9ueW1vdXMgdXNlciB0byB0aGUgY2xpZW50LlxuICAgKlxuICAgKiBAcGFyYW0gdXNlciB0aGUgdXNlciB0byBjb25uZWN0LlxuICAgKiBAcGFyYW0gdG9rZW5PclByb3ZpZGVyIGEgdG9rZW4gb3IgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSB0b2tlbi5cbiAgICovXG4gIHByb3RlY3RlZCBjb25uZWN0QW5vbnltb3VzVXNlciA9IGFzeW5jIChcbiAgICB1c2VyOiBVc2VyV2l0aElkLFxuICAgIHRva2VuT3JQcm92aWRlcjogVG9rZW5PclByb3ZpZGVyLFxuICApID0+IHtcbiAgICBjb25zdCBjb25uZWN0QW5vbnltb3VzVXNlciA9ICgpID0+XG4gICAgICB0aGlzLnN0cmVhbUNsaWVudC5jb25uZWN0QW5vbnltb3VzVXNlcih1c2VyLCB0b2tlbk9yUHJvdmlkZXIpO1xuICAgIHRoaXMuY29ubmVjdGlvblByb21pc2UgPSB0aGlzLmRpc2Nvbm5lY3Rpb25Qcm9taXNlXG4gICAgICA/IHRoaXMuZGlzY29ubmVjdGlvblByb21pc2UudGhlbigoKSA9PiBjb25uZWN0QW5vbnltb3VzVXNlcigpKVxuICAgICAgOiBjb25uZWN0QW5vbnltb3VzVXNlcigpO1xuICAgIHRoaXMuY29ubmVjdGlvblByb21pc2UuZmluYWxseSgoKSA9PiAodGhpcy5jb25uZWN0aW9uUHJvbWlzZSA9IHVuZGVmaW5lZCkpO1xuICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb25Qcm9taXNlO1xuICB9O1xufVxuIiwiaW1wb3J0IHsgU3RyZWFtVmlkZW9DbGllbnQgfSBmcm9tICcuL1N0cmVhbVZpZGVvQ2xpZW50JztcbmltcG9ydCB7IFN0cmVhbUNsaWVudE9wdGlvbnMgfSBmcm9tICcuL2Nvb3JkaW5hdG9yL2Nvbm5lY3Rpb24vdHlwZXMnO1xuaW1wb3J0IHtcbiAgQ2hlY2tFeHRlcm5hbFN0b3JhZ2VSZXNwb25zZSxcbiAgQ3JlYXRlQ2FsbFR5cGVSZXF1ZXN0LFxuICBDcmVhdGVDYWxsVHlwZVJlc3BvbnNlLFxuICBDcmVhdGVFeHRlcm5hbFN0b3JhZ2VSZXF1ZXN0LFxuICBDcmVhdGVFeHRlcm5hbFN0b3JhZ2VSZXNwb25zZSxcbiAgRGVsZXRlRXh0ZXJuYWxTdG9yYWdlUmVzcG9uc2UsXG4gIEdldENhbGxUeXBlUmVzcG9uc2UsXG4gIExpc3RDYWxsVHlwZVJlc3BvbnNlLFxuICBMaXN0RXh0ZXJuYWxTdG9yYWdlUmVzcG9uc2UsXG4gIFVwZGF0ZUNhbGxUeXBlUmVxdWVzdCxcbiAgVXBkYXRlQ2FsbFR5cGVSZXNwb25zZSxcbiAgVXBkYXRlRXh0ZXJuYWxTdG9yYWdlUmVxdWVzdCxcbiAgVXBkYXRlRXh0ZXJuYWxTdG9yYWdlUmVzcG9uc2UsXG59IGZyb20gJy4vZ2VuL2Nvb3JkaW5hdG9yJztcblxuLyoqXG4gKiBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIHRoZSBgQHN0cmVhbS1pby9ub2RlLXNka2AgcGFja2FnZSBpbnN0ZWFkLlxuICpcbiAqIEBzZWUgaHR0cHM6Ly9nZXRzdHJlYW0uaW8vdmlkZW8vZG9jcy9hcGkvXG4gKi9cbmV4cG9ydCBjbGFzcyBTdHJlYW1WaWRlb1NlcnZlckNsaWVudCBleHRlbmRzIFN0cmVhbVZpZGVvQ2xpZW50IHtcbiAgY29uc3RydWN0b3IoYXBpS2V5OiBzdHJpbmcsIG9wdGlvbnM6IFN0cmVhbUNsaWVudE9wdGlvbnMpIHtcbiAgICBzdXBlcih7IGFwaUtleSwgb3B0aW9ucyB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBjcmVhdGVUb2tlbiAtIENyZWF0ZXMgYSB0b2tlbiB0byBhdXRoZW50aWNhdGUgdGhpcyB1c2VyLiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgc2VydmVyIHNpZGUuXG4gICAqIFRoZSByZXN1bHRpbmcgdG9rZW4gc2hvdWxkIGJlIHBhc3NlZCB0byB0aGUgY2xpZW50IHNpZGUgd2hlbiB0aGUgdXNlcnMgcmVnaXN0ZXIgb3IgbG9ncyBpbi5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHVzZXJJRCBUaGUgVXNlciBJRFxuICAgKiBAcGFyYW0ge251bWJlcn0gW2V4cF0gVGhlIGV4cGlyYXRpb24gdGltZSBmb3IgdGhlIHRva2VuIGV4cHJlc3NlZCBpbiB0aGUgbnVtYmVyIG9mIHNlY29uZHMgc2luY2UgdGhlIGVwb2NoXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbaWF0XSBUaGUgdGltZXN0YW1wIHdoZW4gYSB0b2tlbiBoYXMgYmVlbiBpc3N1ZWRcbiAgICogQHBhcmFtIGNhbGxfY2lkcyBmb3IgYW5vbnltb3VzIHRva2VucyB5b3UgaGF2ZSB0byBwcm92aWRlIHRoZSBjYWxsIGNpZHMgdGhlIHVzZSBjYW4gam9pblxuICAgKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IFJldHVybnMgYSB0b2tlblxuICAgKi9cbiAgY3JlYXRlVG9rZW4oXG4gICAgdXNlcklEOiBzdHJpbmcsXG4gICAgZXhwPzogbnVtYmVyLFxuICAgIGlhdD86IG51bWJlcixcbiAgICBjYWxsX2NpZHM/OiBzdHJpbmdbXSxcbiAgKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RyZWFtQ2xpZW50LmNyZWF0ZVRva2VuKHVzZXJJRCwgZXhwLCBpYXQsIGNhbGxfY2lkcyk7XG4gIH1cblxuICBnZXRDYWxsVHlwZXMgPSAoKSA9PiB7XG4gICAgcmV0dXJuIHRoaXMuc3RyZWFtQ2xpZW50LmdldDxMaXN0Q2FsbFR5cGVSZXNwb25zZT4oJy9jYWxsdHlwZXMnKTtcbiAgfTtcblxuICBnZXRDYWxsVHlwZSA9IChuYW1lOiBzdHJpbmcpID0+IHtcbiAgICByZXR1cm4gdGhpcy5zdHJlYW1DbGllbnQuZ2V0PEdldENhbGxUeXBlUmVzcG9uc2U+KGAvY2FsbHR5cGVzLyR7bmFtZX1gKTtcbiAgfTtcblxuICBjcmVhdGVDYWxsVHlwZSA9IChkYXRhOiBDcmVhdGVDYWxsVHlwZVJlcXVlc3QpID0+IHtcbiAgICByZXR1cm4gdGhpcy5zdHJlYW1DbGllbnQucG9zdDxDcmVhdGVDYWxsVHlwZVJlc3BvbnNlPignL2NhbGx0eXBlcycsIGRhdGEpO1xuICB9O1xuXG4gIGRlbGV0ZUNhbGxUeXBlID0gKG5hbWU6IHN0cmluZykgPT4ge1xuICAgIHJldHVybiB0aGlzLnN0cmVhbUNsaWVudC5kZWxldGU8dm9pZD4oYC9jYWxsdHlwZXMvJHtuYW1lfWApO1xuICB9O1xuXG4gIHVwZGF0ZUNhbGxUeXBlID0gKG5hbWU6IHN0cmluZywgZGF0YTogVXBkYXRlQ2FsbFR5cGVSZXF1ZXN0KSA9PiB7XG4gICAgcmV0dXJuIHRoaXMuc3RyZWFtQ2xpZW50LnB1dDxVcGRhdGVDYWxsVHlwZVJlc3BvbnNlPihcbiAgICAgIGAvY2FsbHR5cGVzLyR7bmFtZX1gLFxuICAgICAgZGF0YSxcbiAgICApO1xuICB9O1xuXG4gIGxpc3RFeHRlcm5hbFN0b3JhZ2UgPSAoKSA9PiB7XG4gICAgcmV0dXJuIHRoaXMuc3RyZWFtQ2xpZW50LmdldDxMaXN0RXh0ZXJuYWxTdG9yYWdlUmVzcG9uc2U+KFxuICAgICAgJy9leHRlcm5hbF9zdG9yYWdlJyxcbiAgICApO1xuICB9O1xuXG4gIGNyZWF0ZUV4dGVybmFsU3RvcmFnZSA9IChyZXF1ZXN0OiBDcmVhdGVFeHRlcm5hbFN0b3JhZ2VSZXF1ZXN0KSA9PiB7XG4gICAgcmV0dXJuIHRoaXMuc3RyZWFtQ2xpZW50LnBvc3Q8XG4gICAgICBDcmVhdGVFeHRlcm5hbFN0b3JhZ2VSZXNwb25zZSxcbiAgICAgIENyZWF0ZUV4dGVybmFsU3RvcmFnZVJlcXVlc3RcbiAgICA+KCcvZXh0ZXJuYWxfc3RvcmFnZScsIHJlcXVlc3QpO1xuICB9O1xuXG4gIGRlbGV0ZUV4dGVybmFsU3RvcmFnZSA9IChuYW1lOiBzdHJpbmcpID0+IHtcbiAgICByZXR1cm4gdGhpcy5zdHJlYW1DbGllbnQuZGVsZXRlPERlbGV0ZUV4dGVybmFsU3RvcmFnZVJlc3BvbnNlPihcbiAgICAgIGAvZXh0ZXJuYWxfc3RvcmFnZS8ke25hbWV9YCxcbiAgICApO1xuICB9O1xuXG4gIHVwZGF0ZUV4dGVybmFsU3RvcmFnZSA9IChcbiAgICBuYW1lOiBzdHJpbmcsXG4gICAgcmVxdWVzdDogVXBkYXRlRXh0ZXJuYWxTdG9yYWdlUmVxdWVzdCxcbiAgKSA9PiB7XG4gICAgcmV0dXJuIHRoaXMuc3RyZWFtQ2xpZW50LnB1dDxcbiAgICAgIFVwZGF0ZUV4dGVybmFsU3RvcmFnZVJlc3BvbnNlLFxuICAgICAgVXBkYXRlRXh0ZXJuYWxTdG9yYWdlUmVxdWVzdFxuICAgID4oYC9leHRlcm5hbF9zdG9yYWdlLyR7bmFtZX1gLCByZXF1ZXN0KTtcbiAgfTtcblxuICBjaGVja0V4dGVybmFsU3RvcmFnZSA9IChuYW1lOiBzdHJpbmcpID0+IHtcbiAgICByZXR1cm4gdGhpcy5zdHJlYW1DbGllbnQuZ2V0PENoZWNrRXh0ZXJuYWxTdG9yYWdlUmVzcG9uc2U+KFxuICAgICAgYC9leHRlcm5hbF9zdG9yYWdlLyR7bmFtZX0vY2hlY2tgLFxuICAgICk7XG4gIH07XG59XG4iXSwibmFtZXMiOlsiQXVkaW9TZXR0aW5nc0RlZmF1bHREZXZpY2VFbnVtIiwiU1BFQUtFUiIsIkVBUlBJRUNFIiwiQXVkaW9TZXR0aW5nc1JlcXVlc3REZWZhdWx0RGV2aWNlRW51bSIsIkNyZWF0ZURldmljZVJlcXVlc3RQdXNoUHJvdmlkZXJFbnVtIiwiRklSRUJBU0UiLCJBUE4iLCJIVUFXRUkiLCJYSUFPTUkiLCJMYXlvdXRTZXR0aW5nc05hbWVFbnVtIiwiU1BPVExJR0hUIiwiR1JJRCIsIlNJTkdMRV9QQVJUSUNJUEFOVCIsIk1PQklMRSIsIkNVU1RPTSIsIkxheW91dFNldHRpbmdzUmVxdWVzdE5hbWVFbnVtIiwiT3duQ2FwYWJpbGl0eSIsIkJMT0NLX1VTRVJTIiwiQ1JFQVRFX0NBTEwiLCJDUkVBVEVfUkVBQ1RJT04iLCJFTkRfQ0FMTCIsIkpPSU5fQkFDS1NUQUdFIiwiSk9JTl9DQUxMIiwiSk9JTl9FTkRFRF9DQUxMIiwiTVVURV9VU0VSUyIsIlBJTl9GT1JfRVZFUllPTkUiLCJSRUFEX0NBTEwiLCJSRU1PVkVfQ0FMTF9NRU1CRVIiLCJTQ1JFRU5TSEFSRSIsIlNFTkRfQVVESU8iLCJTRU5EX1ZJREVPIiwiU1RBUlRfQlJPQURDQVNUX0NBTEwiLCJTVEFSVF9SRUNPUkRfQ0FMTCIsIlNUQVJUX1RSQU5TQ1JJUFRJT05fQ0FMTCIsIlNUT1BfQlJPQURDQVNUX0NBTEwiLCJTVE9QX1JFQ09SRF9DQUxMIiwiU1RPUF9UUkFOU0NSSVBUSU9OX0NBTEwiLCJVUERBVEVfQ0FMTCIsIlVQREFURV9DQUxMX01FTUJFUiIsIlVQREFURV9DQUxMX1BFUk1JU1NJT05TIiwiVVBEQVRFX0NBTExfU0VUVElOR1MiLCJSZWNvcmRTZXR0aW5nc1JlcXVlc3RNb2RlRW51bSIsIkFWQUlMQUJMRSIsIkRJU0FCTEVEIiwiQVVUT19PTiIsIlJlY29yZFNldHRpbmdzUmVxdWVzdFF1YWxpdHlFbnVtIiwiXzM2MFAiLCJfNDgwUCIsIl83MjBQIiwiXzEwODBQIiwiXzE0NDBQIiwiVHJhbnNjcmlwdGlvblNldHRpbmdzTW9kZUVudW0iLCJUcmFuc2NyaXB0aW9uU2V0dGluZ3NSZXF1ZXN0TW9kZUVudW0iLCJWaWRlb1NldHRpbmdzQ2FtZXJhRmFjaW5nRW51bSIsIkZST05UIiwiQkFDSyIsIkVYVEVSTkFMIiwiVmlkZW9TZXR0aW5nc1JlcXVlc3RDYW1lcmFGYWNpbmdFbnVtIiwiRXJyb3JGcm9tUmVzcG9uc2UiLCJFcnJvciIsIk51bGxWYWx1ZSIsIlN0cnVjdCRUeXBlIiwiTWVzc2FnZVR5cGUiLCJjb25zdHJ1Y3RvciIsIm5vIiwibmFtZSIsImtpbmQiLCJLIiwiViIsIlQiLCJWYWx1ZSIsImludGVybmFsSnNvbldyaXRlIiwibWVzc2FnZSIsIm9wdGlvbnMiLCJqc29uIiwiayIsInYiLCJPYmplY3QiLCJlbnRyaWVzIiwiZmllbGRzIiwidG9Kc29uIiwiaW50ZXJuYWxKc29uUmVhZCIsInRhcmdldCIsImlzSnNvbk9iamVjdCIsImdsb2JhbFRoaXMiLCJ0eXBlTmFtZSIsInR5cGVvZkpzb25WYWx1ZSIsImNyZWF0ZSIsImZyb21Kc29uIiwidmFsdWUiLCJtZXNzYWdlUHJvdG90eXBlIiwidW5kZWZpbmVkIiwicmVmbGVjdGlvbk1lcmdlUGFydGlhbCIsImludGVybmFsQmluYXJ5UmVhZCIsInJlYWRlciIsImxlbmd0aCIsImVuZCIsInBvcyIsImZpZWxkTm8iLCJ3aXJlVHlwZSIsInRhZyIsImJpbmFyeVJlYWRNYXAxIiwidSIsInJlYWRVbmtub3duRmllbGQiLCJkIiwic2tpcCIsIlVua25vd25GaWVsZEhhbmRsZXIiLCJvblJlYWQiLCJtYXAiLCJsZW4iLCJ1aW50MzIiLCJrZXkiLCJ2YWwiLCJzdHJpbmciLCJpbnRlcm5hbEJpbmFyeVdyaXRlIiwid3JpdGVyIiwia2V5cyIsIldpcmVUeXBlIiwiTGVuZ3RoRGVsaW1pdGVkIiwiZm9yayIsImpvaW4iLCJ3cml0ZVVua25vd25GaWVsZHMiLCJvbldyaXRlIiwiU3RydWN0IiwiVmFsdWUkVHlwZSIsIm9uZW9mIiwiTGlzdFZhbHVlIiwib25lb2ZLaW5kIiwiYm9vbFZhbHVlIiwibnVtYmVyVmFsdWUiLCJOdW1iZXIiLCJpc0Zpbml0ZSIsInN0cmluZ1ZhbHVlIiwibGlzdFZhbHVlRmllbGQiLCJmaW5kIiwiZiIsImxpc3RWYWx1ZSIsInN0cnVjdFZhbHVlRmllbGQiLCJzdHJ1Y3RWYWx1ZSIsIm51bGxWYWx1ZSIsIk5VTExfVkFMVUUiLCJBcnJheSIsImlzQXJyYXkiLCJpbnQzMiIsImRvdWJsZSIsImJvb2wiLCJWYXJpbnQiLCJCaXQ2NCIsIkxpc3RWYWx1ZSRUeXBlIiwicmVwZWF0IiwidmFsdWVzIiwicHVzaCIsImkiLCJUaW1lc3RhbXAkVHlwZSIsIm5vdyIsIm1zZyIsIm1zIiwiRGF0ZSIsInNlY29uZHMiLCJQYkxvbmciLCJmcm9tIiwiTWF0aCIsImZsb29yIiwidG9TdHJpbmciLCJuYW5vcyIsInRvRGF0ZSIsInRvTnVtYmVyIiwiY2VpbCIsImZyb21EYXRlIiwiZGF0ZSIsImdldFRpbWUiLCJwYXJzZSIsInoiLCJuYW5vc1N0ciIsInN1YnN0cmluZyIsInRvSVNPU3RyaW5nIiwicmVwbGFjZSIsIm1hdGNoZXMiLCJtYXRjaCIsImlzTmFOIiwicGFyc2VJbnQiLCJpbnQ2NCIsIlRpbWVzdGFtcCIsIlBlZXJUeXBlIiwiQ29ubmVjdGlvblF1YWxpdHkiLCJWaWRlb1F1YWxpdHkiLCJUcmFja1R5cGUiLCJFcnJvckNvZGUiLCJTZGtUeXBlIiwiVHJhY2tVbnB1Ymxpc2hSZWFzb24iLCJHb0F3YXlSZWFzb24iLCJDYWxsU3RhdGUkVHlwZSIsIlBhcnRpY2lwYW50IiwiUGFydGljaXBhbnRDb3VudCIsIlBpbiIsInBhcnRpY2lwYW50cyIsInBpbnMiLCJzdGFydGVkQXQiLCJwYXJ0aWNpcGFudENvdW50IiwiQ2FsbFN0YXRlIiwiUGFydGljaXBhbnRDb3VudCRUeXBlIiwidG90YWwiLCJhbm9ueW1vdXMiLCJQaW4kVHlwZSIsInVzZXJJZCIsInNlc3Npb25JZCIsIlBhcnRpY2lwYW50JFR5cGUiLCJwdWJsaXNoZWRUcmFja3MiLCJ0cmFja0xvb2t1cFByZWZpeCIsImNvbm5lY3Rpb25RdWFsaXR5IiwiaXNTcGVha2luZyIsImlzRG9taW5hbnRTcGVha2VyIiwiYXVkaW9MZXZlbCIsImltYWdlIiwicm9sZXMiLCJlIiwiam9pbmVkQXQiLCJmbG9hdCIsImN1c3RvbSIsIkJpdDMyIiwiU3RyZWFtUXVhbGl0eSRUeXBlIiwidmlkZW9RdWFsaXR5IiwiU3RyZWFtUXVhbGl0eSIsIlZpZGVvRGltZW5zaW9uJFR5cGUiLCJ3aWR0aCIsImhlaWdodCIsIlZpZGVvRGltZW5zaW9uIiwiVmlkZW9MYXllciRUeXBlIiwicmlkIiwiYml0cmF0ZSIsImZwcyIsInF1YWxpdHkiLCJ2aWRlb0RpbWVuc2lvbiIsIlZpZGVvTGF5ZXIiLCJDb2RlYyRUeXBlIiwicGF5bG9hZFR5cGUiLCJmbXRwTGluZSIsImNsb2NrUmF0ZSIsImVuY29kaW5nUGFyYW1ldGVycyIsImZlZWRiYWNrcyIsIkNvZGVjIiwiSUNFVHJpY2tsZSRUeXBlIiwicGVlclR5cGUiLCJpY2VDYW5kaWRhdGUiLCJJQ0VUcmlja2xlIiwiVHJhY2tJbmZvJFR5cGUiLCJ0cmFja0lkIiwidHJhY2tUeXBlIiwibGF5ZXJzIiwibWlkIiwiZHR4Iiwic3RlcmVvIiwicmVkIiwiVHJhY2tJbmZvIiwiQ2FsbCRUeXBlIiwidHlwZSIsImlkIiwiY3JlYXRlZEJ5VXNlcklkIiwiaG9zdFVzZXJJZCIsImNyZWF0ZWRBdCIsInVwZGF0ZWRBdCIsIkNhbGwiLCJFcnJvciRUeXBlIiwiY29kZSIsInNob3VsZFJldHJ5IiwiQ2xpZW50RGV0YWlscyRUeXBlIiwiU2RrIiwiT1MiLCJCcm93c2VyIiwiRGV2aWNlIiwic2RrIiwib3MiLCJicm93c2VyIiwiZGV2aWNlIiwiQ2xpZW50RGV0YWlscyIsIlNkayRUeXBlIiwibWFqb3IiLCJtaW5vciIsInBhdGNoIiwiT1MkVHlwZSIsInZlcnNpb24iLCJhcmNoaXRlY3R1cmUiLCJCcm93c2VyJFR5cGUiLCJEZXZpY2UkVHlwZSIsIkNhbGxHcmFudHMkVHlwZSIsImNhblB1Ymxpc2hBdWRpbyIsImNhblB1Ymxpc2hWaWRlbyIsImNhblNjcmVlbnNoYXJlIiwiQ2FsbEdyYW50cyIsIklDRVJlc3RhcnRSZXF1ZXN0JFR5cGUiLCJJQ0VSZXN0YXJ0UmVxdWVzdCIsIklDRVJlc3RhcnRSZXNwb25zZSRUeXBlIiwiZXJyb3IiLCJJQ0VSZXN0YXJ0UmVzcG9uc2UiLCJVcGRhdGVNdXRlU3RhdGVzUmVxdWVzdCRUeXBlIiwiVHJhY2tNdXRlU3RhdGUiLCJtdXRlU3RhdGVzIiwiVXBkYXRlTXV0ZVN0YXRlc1JlcXVlc3QiLCJVcGRhdGVNdXRlU3RhdGVzUmVzcG9uc2UkVHlwZSIsIlVwZGF0ZU11dGVTdGF0ZXNSZXNwb25zZSIsIlRyYWNrTXV0ZVN0YXRlJFR5cGUiLCJtdXRlZCIsIkF1ZGlvTXV0ZUNoYW5nZWQkVHlwZSIsIlZpZGVvTXV0ZUNoYW5nZWQkVHlwZSIsIlVwZGF0ZVN1YnNjcmlwdGlvbnNSZXF1ZXN0JFR5cGUiLCJUcmFja1N1YnNjcmlwdGlvbkRldGFpbHMiLCJ0cmFja3MiLCJVcGRhdGVTdWJzY3JpcHRpb25zUmVxdWVzdCIsIlVwZGF0ZVN1YnNjcmlwdGlvbnNSZXNwb25zZSRUeXBlIiwiVXBkYXRlU3Vic2NyaXB0aW9uc1Jlc3BvbnNlIiwiVHJhY2tTdWJzY3JpcHRpb25EZXRhaWxzJFR5cGUiLCJkaW1lbnNpb24iLCJTZW5kQW5zd2VyUmVxdWVzdCRUeXBlIiwic2RwIiwiU2VuZEFuc3dlclJlcXVlc3QiLCJTZW5kQW5zd2VyUmVzcG9uc2UkVHlwZSIsIlNlbmRBbnN3ZXJSZXNwb25zZSIsIklDRVRyaWNrbGVSZXNwb25zZSRUeXBlIiwiSUNFVHJpY2tsZVJlc3BvbnNlIiwiU2V0UHVibGlzaGVyUmVxdWVzdCRUeXBlIiwiU2V0UHVibGlzaGVyUmVxdWVzdCIsIlNldFB1Ymxpc2hlclJlc3BvbnNlJFR5cGUiLCJpY2VSZXN0YXJ0IiwiU2V0UHVibGlzaGVyUmVzcG9uc2UiLCJTaWduYWxTZXJ2ZXIiLCJTZXJ2aWNlVHlwZSIsIkkiLCJPIiwiVmlkZW9MYXllclNldHRpbmdfUHJpb3JpdHkiLCJTZnVFdmVudCRUeXBlIiwiU3Vic2NyaWJlck9mZmVyIiwiUHVibGlzaGVyQW5zd2VyIiwiQ29ubmVjdGlvblF1YWxpdHlDaGFuZ2VkIiwiQXVkaW9MZXZlbENoYW5nZWQiLCJJQ0VUcmlja2xlJCIsIkNoYW5nZVB1Ymxpc2hRdWFsaXR5IiwiUGFydGljaXBhbnRKb2luZWQiLCJQYXJ0aWNpcGFudExlZnQiLCJEb21pbmFudFNwZWFrZXJDaGFuZ2VkIiwiSm9pblJlc3BvbnNlIiwiSGVhbHRoQ2hlY2tSZXNwb25zZSIsIlRyYWNrUHVibGlzaGVkIiwiVHJhY2tVbnB1Ymxpc2hlZCIsIkNhbGxHcmFudHNVcGRhdGVkIiwiR29Bd2F5IiwiSUNFUmVzdGFydCIsIlBpbnNDaGFuZ2VkIiwiZXZlbnRQYXlsb2FkIiwic3Vic2NyaWJlck9mZmVyIiwicHVibGlzaGVyQW5zd2VyIiwiY29ubmVjdGlvblF1YWxpdHlDaGFuZ2VkIiwiYXVkaW9MZXZlbENoYW5nZWQiLCJpY2VUcmlja2xlIiwiY2hhbmdlUHVibGlzaFF1YWxpdHkiLCJwYXJ0aWNpcGFudEpvaW5lZCIsInBhcnRpY2lwYW50TGVmdCIsImRvbWluYW50U3BlYWtlckNoYW5nZWQiLCJqb2luUmVzcG9uc2UiLCJoZWFsdGhDaGVja1Jlc3BvbnNlIiwidHJhY2tQdWJsaXNoZWQiLCJ0cmFja1VucHVibGlzaGVkIiwiY2FsbEdyYW50c1VwZGF0ZWQiLCJnb0F3YXkiLCJwaW5zVXBkYXRlZCIsIlNmdUV2ZW50IiwiUGluc0NoYW5nZWQkVHlwZSIsIkVycm9yJCIsIklDRVJlc3RhcnQkVHlwZSIsIlNmdVJlcXVlc3QkVHlwZSIsIkpvaW5SZXF1ZXN0IiwiSGVhbHRoQ2hlY2tSZXF1ZXN0IiwicmVxdWVzdFBheWxvYWQiLCJqb2luUmVxdWVzdCIsImhlYWx0aENoZWNrUmVxdWVzdCIsIlNmdVJlcXVlc3QiLCJIZWFsdGhDaGVja1JlcXVlc3QkVHlwZSIsIkhlYWx0aENoZWNrUmVzcG9uc2UkVHlwZSIsIlRyYWNrUHVibGlzaGVkJFR5cGUiLCJwYXJ0aWNpcGFudCIsIlRyYWNrVW5wdWJsaXNoZWQkVHlwZSIsImNhdXNlIiwiSm9pblJlcXVlc3QkVHlwZSIsIk1pZ3JhdGlvbiIsInRva2VuIiwic3Vic2NyaWJlclNkcCIsImZhc3RSZWNvbm5lY3QiLCJjbGllbnREZXRhaWxzIiwibWlncmF0aW9uIiwiTWlncmF0aW9uJFR5cGUiLCJmcm9tU2Z1SWQiLCJhbm5vdW5jZWRUcmFja3MiLCJzdWJzY3JpcHRpb25zIiwiSm9pblJlc3BvbnNlJFR5cGUiLCJyZWNvbm5lY3RlZCIsImNhbGxTdGF0ZSIsIlBhcnRpY2lwYW50Sm9pbmVkJFR5cGUiLCJjYWxsQ2lkIiwiUGFydGljaXBhbnRMZWZ0JFR5cGUiLCJTdWJzY3JpYmVyT2ZmZXIkVHlwZSIsIlB1Ymxpc2hlckFuc3dlciRUeXBlIiwiQ29ubmVjdGlvblF1YWxpdHlDaGFuZ2VkJFR5cGUiLCJDb25uZWN0aW9uUXVhbGl0eUluZm8iLCJjb25uZWN0aW9uUXVhbGl0eVVwZGF0ZXMiLCJDb25uZWN0aW9uUXVhbGl0eUluZm8kVHlwZSIsIkRvbWluYW50U3BlYWtlckNoYW5nZWQkVHlwZSIsIkF1ZGlvTGV2ZWwkVHlwZSIsImxldmVsIiwiQXVkaW9MZXZlbCIsIkF1ZGlvTGV2ZWxDaGFuZ2VkJFR5cGUiLCJhdWRpb0xldmVscyIsIkF1ZGlvTWVkaWFSZXF1ZXN0JFR5cGUiLCJjaGFubmVsQ291bnQiLCJBdWRpb01lZGlhUmVxdWVzdCIsIkF1ZGlvU2VuZGVyJFR5cGUiLCJtZWRpYVJlcXVlc3QiLCJjb2RlYyIsIkF1ZGlvU2VuZGVyIiwiVmlkZW9NZWRpYVJlcXVlc3QkVHlwZSIsImlkZWFsSGVpZ2h0IiwiaWRlYWxXaWR0aCIsImlkZWFsRnJhbWVSYXRlIiwiVmlkZW9NZWRpYVJlcXVlc3QiLCJWaWRlb0xheWVyU2V0dGluZyRUeXBlIiwiYWN0aXZlIiwibWF4Qml0cmF0ZSIsInNjYWxlUmVzb2x1dGlvbkRvd25CeSIsInByaW9yaXR5IiwibWF4RnJhbWVyYXRlIiwiVmlkZW9MYXllclNldHRpbmciLCJWaWRlb1NlbmRlciRUeXBlIiwiVmlkZW9TZW5kZXIiLCJDaGFuZ2VQdWJsaXNoUXVhbGl0eSRUeXBlIiwiYXVkaW9TZW5kZXJzIiwidmlkZW9TZW5kZXJzIiwiQ2FsbEdyYW50c1VwZGF0ZWQkVHlwZSIsImN1cnJlbnRHcmFudHMiLCJHb0F3YXkkVHlwZSIsInJlYXNvbiIsIlZpc2liaWxpdHlTdGF0ZSIsIkRlYm91bmNlVHlwZSIsIlNpZ25hbFNlcnZlckNsaWVudCIsIl90cmFuc3BvcnQiLCJtZXRob2RzIiwic2V0UHVibGlzaGVyIiwiaW5wdXQiLCJtZXRob2QiLCJvcHQiLCJtZXJnZU9wdGlvbnMiLCJzdGFja0ludGVyY2VwdCIsInNlbmRBbnN3ZXIiLCJ1cGRhdGVTdWJzY3JpcHRpb25zIiwidXBkYXRlTXV0ZVN0YXRlcyIsImRlZmF1bHRPcHRpb25zIiwiYmFzZVVybCIsInNlbmRKc29uIiwidGltZW91dCIsImpzb25PcHRpb25zIiwiaWdub3JlVW5rbm93bkZpZWxkcyIsIndpdGhIZWFkZXJzIiwiaGVhZGVycyIsImludGVyY2VwdFVuYXJ5IiwibmV4dCIsIm1ldGEiLCJjcmVhdGVTaWduYWxDbGllbnQiLCJ0cmFuc3BvcnQiLCJUd2lycEZldGNoVHJhbnNwb3J0IiwiaXNSZWFjdE5hdGl2ZSIsIm5hdmlnYXRvciIsInByb2R1Y3QiLCJ0b0xvd2VyQ2FzZSIsImxvZ0xldmVscyIsImZyZWV6ZSIsInRyYWNlIiwiZGVidWciLCJpbmZvIiwid2FybiIsImxvZ2dlciIsImxvZ1RvQ29uc29sZSIsImxvZ0xldmVsIiwiYXJncyIsImxvZ01ldGhvZCIsImNvbnNvbGUiLCJsb2ciLCJzZXRMb2dnZXIiLCJsIiwibHZsIiwic2V0TG9nTGV2ZWwiLCJnZXRMb2dnZXIiLCJ3aXRoVGFncyIsImxvZ2dlck1ldGhvZCIsInRhZ3MiLCJyZXN1bHQiLCJnZXRQcmVmZXJyZWRDb2RlY3MiLCJwcmVmZXJyZWRDb2RlYyIsImNvZGVjVG9SZW1vdmUiLCJSVENSdHBTZW5kZXIiLCJjYXAiLCJnZXRDYXBhYmlsaXRpZXMiLCJtYXRjaGVkIiwicGFydGlhbE1hdGNoZWQiLCJ1bm1hdGNoZWQiLCJjb2RlY3MiLCJmb3JFYWNoIiwiYyIsIm1pbWVUeXBlIiwic2hvdWxkUmVtb3ZlQ29kZWMiLCJtYXRjaGVzQ29kZWMiLCJzZHBGbXRwTGluZSIsImluY2x1ZGVzIiwiZ2V0R2VuZXJpY1NkcCIsImRpcmVjdGlvbiIsInRlbXBQYyIsIlJUQ1BlZXJDb25uZWN0aW9uIiwiYWRkVHJhbnNjZWl2ZXIiLCJvZmZlciIsImNyZWF0ZU9mZmVyIiwiZ2V0VHJhbnNjZWl2ZXJzIiwidCIsInN0b3AiLCJjbG9zZSIsInNmdUV2ZW50S2luZHMiLCJpc1NmdUV2ZW50IiwiZXZlbnROYW1lIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiRGlzcGF0Y2hlciIsInN1YnNjcmliZXJzIiwiZGlzcGF0Y2giLCJldmVudEtpbmQiLCJwYXlsb2FkIiwibGlzdGVuZXJzIiwiZm4iLCJvbiIsIl9hIiwib2ZmIiwiZmlsdGVyIiwib2ZmQWxsIiwiSWNlVHJpY2tsZUJ1ZmZlciIsInN1YnNjcmliZXJDYW5kaWRhdGVzIiwiUmVwbGF5U3ViamVjdCIsInB1Ymxpc2hlckNhbmRpZGF0ZXMiLCJTVUJTQ1JJQkVSIiwiUFVCTElTSEVSX1VOU1BFQ0lGSUVEIiwiZ2V0SWNlQ2FuZGlkYXRlIiwiY2FuZGlkYXRlIiwidXNlcm5hbWVGcmFnbWVudCIsInNwbGl0dGVkQ2FuZGlkYXRlIiwic3BsaXQiLCJ1ZnJhZ0luZGV4IiwiZmluZEluZGV4IiwicyIsIkpTT04iLCJzdHJpbmdpZnkiLCJ0b0pTT04iLCJzZGtJbmZvIiwib3NJbmZvIiwiZGV2aWNlSW5mbyIsInNldFNka0luZm8iLCJnZXRTZGtJbmZvIiwic2V0T1NJbmZvIiwiZ2V0T1NJbmZvIiwic2V0RGV2aWNlSW5mbyIsImdldERldmljZUluZm8iLCJnZXRDbGllbnREZXRhaWxzIiwidXNlckFnZW50IiwiVUFQYXJzZXIiLCJjcHUiLCJnZXRSZXN1bHQiLCJ2ZW5kb3IiLCJtb2RlbCIsIkRFRkFVTFRfQklUUkFURSIsImRlZmF1bHRUYXJnZXRSZXNvbHV0aW9uIiwiZmluZE9wdGltYWxWaWRlb0xheWVycyIsInZpZGVvVHJhY2siLCJ0YXJnZXRSZXNvbHV0aW9uIiwib3B0aW1hbFZpZGVvTGF5ZXJzIiwic2V0dGluZ3MiLCJnZXRTZXR0aW5ncyIsInciLCJoIiwiaXNSTklvcyIsImdldENvbXB1dGVkTWF4Qml0cmF0ZSIsImRvd25zY2FsZUZhY3RvciIsInVuc2hpZnQiLCJyb3VuZCIsInEiLCJ3aXRoU2ltdWxjYXN0Q29uc3RyYWludHMiLCJjdXJyZW50V2lkdGgiLCJjdXJyZW50SGVpZ2h0IiwidGFyZ2V0V2lkdGgiLCJ0YXJnZXRIZWlnaHQiLCJjdXJyZW50UGl4ZWxzIiwidGFyZ2V0UGl4ZWxzIiwicmVkdWN0aW9uRmFjdG9yIiwic2l6ZSIsIm1heCIsImxheWVyIiwicmlkTWFwcGluZyIsImluZGV4IiwiZmluZE9wdGltYWxTY3JlZW5TaGFyaW5nTGF5ZXJzIiwicHJlZmVyZW5jZXMiLCJ0cmFja1R5cGVUb1BhcnRpY2lwYW50U3RyZWFtS2V5IiwiU0NSRUVOX1NIQVJFIiwiU0NSRUVOX1NIQVJFX0FVRElPIiwiVklERU8iLCJBVURJTyIsIlVOU1BFQ0lGSUVEIiwiZXhoYXVzdGl2ZVRyYWNrVHlwZUNoZWNrIiwibXV0ZVR5cGVUb1RyYWNrVHlwZSIsIm11dGVUeXBlIiwiZXhoYXVzdGl2ZU11dGVUeXBlQ2hlY2siLCJpc0Z1bmN0aW9uUGF0Y2giLCJ1cGRhdGUiLCJnZXRDdXJyZW50VmFsdWUiLCJvYnNlcnZhYmxlJCIsImVyciIsImNvbWJpbmVMYXRlc3QiLCJzdWJzY3JpYmUiLCJ1bnN1YnNjcmliZSIsInNldEN1cnJlbnRWYWx1ZSIsInN1YmplY3QiLCJjcmVhdGVTdWJzY3JpcHRpb24iLCJvYnNlcnZhYmxlIiwiaGFuZGxlciIsInN1YnNjcmlwdGlvbiIsImNvbWJpbmVDb21wYXJhdG9ycyIsImNvbXBhcmF0b3JzIiwiYSIsImIiLCJjb21wYXJhdG9yIiwiZGVzY2VuZGluZyIsImNvbmRpdGlvbmFsIiwicHJlZGljYXRlIiwibm9vcENvbXBhcmF0b3IiLCJkb21pbmFudFNwZWFrZXIiLCJzcGVha2luZyIsInNjcmVlblNoYXJpbmciLCJoYXNTY3JlZW5TaGFyZSIsInB1Ymxpc2hpbmdWaWRlbyIsImhhc1ZpZGVvIiwicHVibGlzaGluZ0F1ZGlvIiwiaGFzQXVkaW8iLCJwaW5uZWQiLCJwaW4iLCJpc0xvY2FsUGluIiwicGlubmVkQXQiLCJyZWFjdGlvblR5cGUiLCJyZWFjdGlvbiIsInJvbGUiLCJoYXNBbnlSb2xlIiwicCIsInNvbWUiLCJyIiwiaWZJbnZpc2libGVCeSIsInZpZXdwb3J0VmlzaWJpbGl0eVN0YXRlIiwiSU5WSVNJQkxFIiwiaWZJbnZpc2libGVPclVua25vd25CeSIsIlVOS05PV04iLCJkZWZhdWx0U29ydFByZXNldCIsInNwZWFrZXJMYXlvdXRTb3J0UHJlc2V0IiwicGFnaW5hdGVkTGF5b3V0U29ydFByZXNldCIsImxpdmVzdHJlYW1PckF1ZGlvUm9vbVNvcnRQcmVzZXQiLCJDYWxsaW5nU3RhdGUiLCJiYWNrc3RhZ2VTdWJqZWN0IiwiQmVoYXZpb3JTdWJqZWN0IiwiYmxvY2tlZFVzZXJJZHNTdWJqZWN0IiwiY3JlYXRlZEF0U3ViamVjdCIsImVuZGVkQXRTdWJqZWN0Iiwic3RhcnRzQXRTdWJqZWN0IiwidXBkYXRlZEF0U3ViamVjdCIsImNyZWF0ZWRCeVN1YmplY3QiLCJjdXN0b21TdWJqZWN0IiwiZWdyZXNzU3ViamVjdCIsImluZ3Jlc3NTdWJqZWN0IiwicmVjb3JkaW5nU3ViamVjdCIsInNlc3Npb25TdWJqZWN0Iiwic2V0dGluZ3NTdWJqZWN0IiwidHJhbnNjcmliaW5nU3ViamVjdCIsImVuZGVkQnlTdWJqZWN0IiwidGh1bWJuYWlsc1N1YmplY3QiLCJtZW1iZXJzU3ViamVjdCIsIm93bkNhcGFiaWxpdGllc1N1YmplY3QiLCJjYWxsaW5nU3RhdGVTdWJqZWN0Iiwic3RhcnRlZEF0U3ViamVjdCIsInBhcnRpY2lwYW50Q291bnRTdWJqZWN0IiwiYW5vbnltb3VzUGFydGljaXBhbnRDb3VudFN1YmplY3QiLCJwYXJ0aWNpcGFudHNTdWJqZWN0IiwiY2FsbFN0YXRzUmVwb3J0U3ViamVjdCIsInNvcnRQYXJ0aWNpcGFudHNCeSIsIlNvcnRpbmdQcmVzZXQuZGVmYXVsdFNvcnRQcmVzZXQiLCJzZXRTb3J0UGFydGljaXBhbnRzQnkiLCJwcyIsIlJ4VXRpbHMuZ2V0Q3VycmVudFZhbHVlIiwiUnhVdGlscy5zZXRDdXJyZW50VmFsdWUiLCJzZXRQYXJ0aWNpcGFudENvdW50IiwiY291bnQiLCJzZXRTdGFydGVkQXQiLCJzZXRBbm9ueW1vdXNQYXJ0aWNpcGFudENvdW50Iiwic2V0UGFydGljaXBhbnRzIiwic2V0Q2FsbGluZ1N0YXRlIiwic3RhdGUiLCJzZXRDYWxsU3RhdHNSZXBvcnQiLCJyZXBvcnQiLCJzZXRNZW1iZXJzIiwibWVtYmVycyIsInNldE93bkNhcGFiaWxpdGllcyIsImNhcGFiaWxpdGllcyIsImZpbmRQYXJ0aWNpcGFudEJ5U2Vzc2lvbklkIiwiZ2V0UGFydGljaXBhbnRMb29rdXBCeVNlc3Npb25JZCIsInJlZHVjZSIsImxvb2t1cFRhYmxlIiwidXBkYXRlUGFydGljaXBhbnQiLCJ0aGVQYXRjaCIsInVwZGF0ZWRQYXJ0aWNpcGFudCIsInVwZGF0ZU9yQWRkUGFydGljaXBhbnQiLCJ1cGRhdGVQYXJ0aWNpcGFudHMiLCJ1cGRhdGVGcm9tRXZlbnQiLCJldmVudCIsImV2ZW50SGFuZGxlcnMiLCJzZXRTZXJ2ZXJTaWRlUGlucyIsInBpbnNMb29rdXAiLCJsb29rdXAiLCJzZXJ2ZXJTaWRlUGlubmVkQXQiLCJ1cGRhdGVGcm9tQ2FsbFJlc3BvbnNlIiwiYmFja3N0YWdlIiwiYmxvY2tlZF91c2VyX2lkcyIsImNyZWF0ZWRfYXQiLCJ1cGRhdGVkX2F0Iiwic3RhcnRzX2F0IiwiZW5kZWRfYXQiLCJjcmVhdGVkX2J5IiwiZWdyZXNzIiwiaW5ncmVzcyIsInJlY29yZGluZyIsInNlc3Npb24iLCJ0cmFuc2NyaWJpbmciLCJ0aHVtYm5haWxzIiwidXBkYXRlRnJvbU1lbWJlclJlbW92ZWQiLCJtIiwiaW5kZXhPZiIsInVzZXJfaWQiLCJ1cGRhdGVGcm9tTWVtYmVyQWRkZWQiLCJ1cGRhdGVGcm9tSExTQnJvYWRjYXN0U3RvcHBlZCIsImJyb2FkY2FzdGluZyIsInVwZGF0ZUZyb21ITFNCcm9hZGNhc3RpbmdGYWlsZWQiLCJ1cGRhdGVGcm9tSExTQnJvYWRjYXN0U3RhcnRlZCIsImhscyIsInBsYXlsaXN0X3VybCIsImhsc19wbGF5bGlzdF91cmwiLCJ1cGRhdGVGcm9tU2Vzc2lvblBhcnRpY2lwYW50TGVmdCIsInBhcnRpY2lwYW50c19jb3VudF9ieV9yb2xlIiwidXNlciIsInVzZXJfc2Vzc2lvbl9pZCIsInVwZGF0ZUZyb21TZXNzaW9uUGFydGljaXBhbnRKb2luZWQiLCJzaG91bGRJbnNlcnRQYXJ0aWNpcGFudCIsInVwZGF0ZWRQYXJ0aWNpcGFudHMiLCJpbmNyZW1lbnQiLCJ1cGRhdGVNZW1iZXJzIiwibWVtYmVyIiwibWVtYmVyVXBkYXRlIiwidXBkYXRlUGFydGljaXBhbnRSZWFjdGlvbiIsImVtb2ppX2NvZGUiLCJ1bmJsb2NrVXNlciIsImN1cnJlbnQiLCJibG9ja1VzZXIiLCJ1cGRhdGVPd25DYXBhYmlsaXRpZXMiLCJsb2NhbFBhcnRpY2lwYW50Iiwib3duX2NhcGFiaWxpdGllcyIsInBhcnRpY2lwYW50cyQiLCJhc09ic2VydmFibGUiLCJwaXBlIiwic29ydCIsInNoYXJlUmVwbGF5IiwiYnVmZmVyU2l6ZSIsInJlZkNvdW50IiwibG9jYWxQYXJ0aWNpcGFudCQiLCJpc0xvY2FsUGFydGljaXBhbnQiLCJyZW1vdGVQYXJ0aWNpcGFudHMkIiwicGlubmVkUGFydGljaXBhbnRzJCIsImRvbWluYW50U3BlYWtlciQiLCJoYXNPbmdvaW5nU2NyZWVuU2hhcmUkIiwiZGlzdGluY3RVbnRpbENoYW5nZWQiLCJzdGFydGVkQXQkIiwicGFydGljaXBhbnRDb3VudCQiLCJhbm9ueW1vdXNQYXJ0aWNpcGFudENvdW50JCIsImNhbGxTdGF0c1JlcG9ydCQiLCJtZW1iZXJzJCIsIm93bkNhcGFiaWxpdGllcyQiLCJjYWxsaW5nU3RhdGUkIiwiYmFja3N0YWdlJCIsImJsb2NrZWRVc2VySWRzJCIsImNyZWF0ZWRBdCQiLCJlbmRlZEF0JCIsInN0YXJ0c0F0JCIsInVwZGF0ZWRBdCQiLCJjcmVhdGVkQnkkIiwiY3VzdG9tJCIsImVncmVzcyQiLCJpbmdyZXNzJCIsInJlY29yZGluZyQiLCJzZXNzaW9uJCIsInNldHRpbmdzJCIsInRyYW5zY3JpYmluZyQiLCJlbmRlZEJ5JCIsInRodW1ibmFpbHMkIiwiYW5vbnltb3VzUGFydGljaXBhbnRDb3VudCIsInJlbW90ZVBhcnRpY2lwYW50cyIsInBpbm5lZFBhcnRpY2lwYW50cyIsImhhc09uZ29pbmdTY3JlZW5TaGFyZSIsImNhbGxpbmdTdGF0ZSIsImNhbGxTdGF0c1JlcG9ydCIsIm93bkNhcGFiaWxpdGllcyIsImJsb2NrZWRVc2VySWRzIiwiZW5kZWRBdCIsInN0YXJ0c0F0IiwiY3JlYXRlZEJ5IiwiZW5kZWRCeSIsIlN0cmVhbVZpZGVvV3JpdGVhYmxlU3RhdGVTdG9yZSIsImNvbm5lY3RlZFVzZXJTdWJqZWN0IiwiY2FsbHNTdWJqZWN0Iiwic2V0Q29ubmVjdGVkVXNlciIsInNldENhbGxzIiwiY2FsbHMiLCJyZWdpc3RlckNhbGwiLCJjaWQiLCJ1bnJlZ2lzdGVyQ2FsbCIsImZpbmRDYWxsIiwiTEVGVCIsImxlYXZlIiwiY2F0Y2giLCJjb25uZWN0ZWRVc2VyIiwiU3RyZWFtVmlkZW9SZWFkT25seVN0YXRlU3RvcmUiLCJzdG9yZSIsImNvbm5lY3RlZFVzZXIkIiwiY2FsbHMkIiwiZ2V0UnRwTWFwIiwibGluZSIsInJ0cFJlZ2V4IiwicnRwTWF0Y2giLCJleGVjIiwib3JpZ2luYWwiLCJnZXRGbXRwIiwiZm10cFJlZ2V4IiwiZm10cE1hdGNoIiwiY29uZmlnIiwiZ2V0TWVkaWEiLCJtZWRpYVR5cGUiLCJyZWdleCIsIlJlZ0V4cCIsIm1lZGlhV2l0aFBvcnRzIiwiY29kZWNPcmRlciIsImdldE1lZGlhU2VjdGlvbiIsIm1lZGlhIiwicnRwTWFwIiwiZm10cCIsImlzVGhlUmVxdWlyZWRNZWRpYVNlY3Rpb24iLCJpc1ZhbGlkTGluZSIsInRlc3QiLCJfbWVkaWEiLCJydHBNYXBMaW5lIiwiZ2V0T3B1c0ZtdHAiLCJzZWN0aW9uIiwiY29kZWNJZCIsInRvZ2dsZUR0eCIsImVuYWJsZSIsIm9wdXNGbXRwIiwibWF0Y2hEdHgiLCJyZXF1aXJlZER0eENvbmZpZyIsIm5ld0ZtdHAiLCJlbmFibGVIaWdoUXVhbGl0eUF1ZGlvIiwidHJhY2tNaWQiLCJtaW4iLCJwYXJzZWRTZHAiLCJTRFAiLCJhdWRpb01lZGlhIiwiU3RyaW5nIiwib3B1c1J0cCIsInJ0cCIsIndyaXRlIiwiUHVibGlzaGVyIiwiY29ubmVjdGlvbkNvbmZpZ3VyYXRpb24iLCJwYyIsImdldENvbmZpZ3VyYXRpb24iLCJfY29ubmVjdGlvbkNvbmZpZ3VyYXRpb24iLCJjb25uZWN0aW9uQ29uZmlnIiwic2Z1Q2xpZW50IiwiZGlzcGF0Y2hlciIsImlzRHR4RW5hYmxlZCIsImlzUmVkRW5hYmxlZCIsImljZVJlc3RhcnREZWxheSIsInRyYW5zY2VpdmVyUmVnaXN0cnkiLCJwdWJsaXNoT3B0aW9uc1BlclRyYWNrVHlwZSIsIk1hcCIsInRyYW5zY2VpdmVySW5pdE9yZGVyIiwidHJhY2tLaW5kTWFwcGluZyIsInRyYWNrTGF5ZXJzQ2FjaGUiLCJpc0ljZVJlc3RhcnRpbmciLCJjcmVhdGVQZWVyQ29ubmVjdGlvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJvbkljZUNhbmRpZGF0ZSIsIm9uTmVnb3RpYXRpb25OZWVkZWQiLCJvbkljZUNhbmRpZGF0ZUVycm9yIiwib25JY2VDb25uZWN0aW9uU3RhdGVDaGFuZ2UiLCJvbkljZUdhdGhlcmluZ1N0YXRlQ2hhbmdlIiwib25TaWduYWxpbmdTdGF0ZUNoYW5nZSIsInN0b3BUcmFja3MiLCJzdG9wUHVibGlzaGluZyIsImNsZWFyVGltZW91dCIsImljZVJlc3RhcnRUaW1lb3V0IiwidW5zdWJzY3JpYmVPbkljZVJlc3RhcnQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwicHVibGlzaFN0cmVhbSIsIm1lZGlhU3RyZWFtIiwidHJhY2siLCJvcHRzIiwicmVhZHlTdGF0ZSIsInRyYW5zY2VpdmVyIiwic2VuZGVyIiwiaGFuZGxlVHJhY2tFbmRlZCIsIm5vdGlmeVRyYWNrTXV0ZVN0YXRlQ2hhbmdlZCIsInZpZGVvIiwidGFyZ2V0X3Jlc29sdXRpb24iLCJ2aWRlb0VuY29kaW5ncyIsInNjcmVlblNoYXJlU2V0dGluZ3MiLCJvc05hbWUiLCJjb2RlY1ByZWZlcmVuY2VzIiwiZ2V0Q29kZWNQcmVmZXJlbmNlcyIsImVuYWJsZWQiLCJzdHJlYW1zIiwic2VuZEVuY29kaW5ncyIsInNldCIsInNldENvZGVjUHJlZmVyZW5jZXMiLCJwcmV2aW91c1RyYWNrIiwicmVwbGFjZVRyYWNrIiwidW5wdWJsaXNoU3RyZWFtIiwic3RvcFRyYWNrIiwiaXNQdWJsaXNoaW5nIiwidHJhbnNjZWl2ZXJGb3JUcmFja1R5cGUiLCJpc0xpdmUiLCJpc011dGVkIiwidXBkYXRlTXV0ZVN0YXRlIiwiYXVkaW9PclZpZGVvT3JTY3JlZW5TaGFyZVN0cmVhbSIsImdldFNlbmRlcnMiLCJzaWduYWxpbmdTdGF0ZSIsInJlbW92ZVRyYWNrIiwidXBkYXRlVmlkZW9QdWJsaXNoUXVhbGl0eSIsImVuYWJsZWRMYXllcnMiLCJ2aWRlb1NlbmRlciIsInBhcmFtcyIsImdldFBhcmFtZXRlcnMiLCJlbmNvZGluZ3MiLCJjaGFuZ2VkIiwiZW5hYmxlZFJpZHMiLCJseSIsImVuYyIsInNob3VsZEVuYWJsZSIsInZscyIsImFjdGl2ZUxheWVycyIsInNldFBhcmFtZXRlcnMiLCJnZXRTdGF0cyIsInNlbGVjdG9yIiwiZGVmYXVsdEF1ZGlvQ29kZWMiLCJzZXRTZnVDbGllbnQiLCJtaWdyYXRlVG8iLCJzZXRDb25maWd1cmF0aW9uIiwic2hvdWxkUmVzdGFydEljZSIsImljZUNvbm5lY3Rpb25TdGF0ZSIsIm5lZ290aWF0ZSIsInJlc3RhcnRJY2UiLCJtdW5nZUNvZGVjcyIsImV4dHJhY3RNaWQiLCJ0cmFja0luZm9zIiwiZ2V0Q3VycmVudFRyYWNrSW5mb3MiLCJzZXRMb2NhbERlc2NyaXB0aW9uIiwicmVzcG9uc2UiLCJzZXRSZW1vdGVEZXNjcmlwdGlvbiIsImljZVRyaWNrbGVCdWZmZXIiLCJhZGRJY2VDYW5kaWRhdGUiLCJtc2lkIiwiaGV1cmlzdGljTWlkIiwibG9jYWxEZXNjcmlwdGlvbiIsIm9wdGltYWxMYXllcnMiLCJwdWJsaXNoT3B0cyIsImdldCIsIm9wdGltYWxMYXllciIsInJpZFRvVmlkZW9RdWFsaXR5IiwiaXNBdWRpb1RyYWNrIiwidHJhY2tTZXR0aW5ncyIsImlzU3RlcmVvIiwiZXJyb3JNZXNzYWdlIiwiUlRDUGVlckNvbm5lY3Rpb25JY2VFcnJvckV2ZW50IiwiZXJyb3JDb2RlIiwiZXJyb3JUZXh0IiwiaGFzTmV0d29ya0Nvbm5lY3Rpb24iLCJPRkZMSU5FIiwic2V0VGltZW91dCIsImljZUdhdGhlcmluZ1N0YXRlIiwiTE9XX1VOU1BFQ0lGSUVEIiwiTUlEIiwiSElHSCIsIlN1YnNjcmliZXIiLCJoYW5kbGVPblRyYWNrIiwidW5yZWdpc3Rlck9uU3Vic2NyaWJlck9mZmVyIiwidW5yZWdpc3Rlck9uSWNlUmVzdGFydCIsInByZXZpb3VzUEMiLCJ0cmFja0lkc1RvTWlncmF0ZSIsIlNldCIsImdldFJlY2VpdmVycyIsImFkZCIsIm1pZ3JhdGlvblRpbWVvdXRJZCIsImNsZWFudXBNaWdyYXRpb24iLCJoYW5kbGVUcmFja01pZ3JhdGlvbiIsImRlbGV0ZSIsImhhbmRsZUNvbm5lY3Rpb25TdGF0ZUNoYW5nZSIsImNvbm5lY3Rpb25TdGF0ZSIsInByZXZpb3VzSXNJY2VSZXN0YXJ0aW5nIiwicHJpbWFyeVN0cmVhbSIsInBhcnRpY2lwYW50VG9VcGRhdGUiLCJzdHJlYW1LaW5kUHJvcCIsIlRSQUNLX1RZUEVfQVVESU8iLCJUUkFDS19UWVBFX1ZJREVPIiwiVFJBQ0tfVFlQRV9TQ1JFRU5fU0hBUkUiLCJUUkFDS19UWVBFX1NDUkVFTl9TSEFSRV9BVURJTyIsInByZXZpb3VzU3RyZWFtIiwiZ2V0VHJhY2tzIiwiYW5zd2VyIiwiY3JlYXRlQW5zd2VyIiwiY3JlYXRlV2ViU29ja2V0U2lnbmFsQ2hhbm5lbCIsImVuZHBvaW50Iiwib25NZXNzYWdlIiwid3MiLCJXZWJTb2NrZXQiLCJiaW5hcnlUeXBlIiwiZGF0YSIsIkFycmF5QnVmZmVyIiwiZnJvbUJpbmFyeSIsIlVpbnQ4QXJyYXkiLCJmcm9tSnNvblN0cmluZyIsInNsZWVwIiwiUHJvbWlzZSIsImlzRnVuY3Rpb24iLCJGdW5jdGlvbiIsIktub3duQ29kZXMiLCJUT0tFTl9FWFBJUkVEIiwiV1NfQ0xPU0VEX1NVQ0NFU1MiLCJXU19DTE9TRURfQUJSVVBUTFkiLCJXU19QT0xJQ1lfVklPTEFUSU9OIiwicmV0cnlJbnRlcnZhbCIsIm51bWJlck9mRmFpbHVyZXMiLCJyYW5kb20iLCJyYW5kb21JZCIsImdlbmVyYXRlVVVJRHY0IiwiaGV4IiwiYnl0ZXMiLCJwYWRTdGFydCIsImdldFJhbmRvbUJ5dGVzIiwic3ViYXJyYXkiLCJnZXRSYW5kb21WYWx1ZXNXaXRoTWF0aFJhbmRvbSIsInBvdyIsImJ5dGVMZW5ndGgiLCJnZXRSYW5kb21WYWx1ZXMiLCJjcnlwdG8iLCJiaW5kIiwibXNDcnlwdG8iLCJjb252ZXJ0RXJyb3JUb0pzb24iLCJqc29uT2JqIiwiZ2V0T3duUHJvcGVydHlOYW1lcyIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsIl8iLCJpc09ubGluZSIsIm5hdiIsIndpbmRvdyIsIm9uTGluZSIsImFkZENvbm5lY3Rpb25FdmVudExpc3RlbmVycyIsImNiIiwicmVtb3ZlQ29ubmVjdGlvbkV2ZW50TGlzdGVuZXJzIiwiU3RyZWFtU2Z1Q2xpZW50Iiwic2Z1U2VydmVyIiwiaXNNaWdyYXRpbmdBd2F5IiwiaXNGYXN0UmVjb25uZWN0aW5nIiwicGluZ0ludGVydmFsSW5NcyIsInVuaGVhbHRoeVRpbWVvdXRJbk1zIiwiTk9STUFMX0NMT1NVUkUiLCJzaWduYWxXcyIsIkNMT1NFRCIsInVuc3Vic2NyaWJlSWNlVHJpY2tsZSIsImNsZWFySW50ZXJ2YWwiLCJrZWVwQWxpdmVJbnRlcnZhbCIsImNvbm5lY3Rpb25DaGVja1RpbWVvdXQiLCJyZXRyeWFibGUiLCJycGMiLCJzZW5kIiwic2lnbmFsUmVhZHkiLCJ0aGVuIiwic2lnbmFsIiwiT1BFTiIsImVkZ2VOYW1lIiwidG9CaW5hcnkiLCJrZWVwQWxpdmUiLCJzZXRJbnRlcnZhbCIsInNjaGVkdWxlQ29ubmVjdGlvbkNoZWNrIiwibGFzdE1lc3NhZ2VUaW1lc3RhbXAiLCJ0aW1lU2luY2VMYXN0TWVzc2FnZSIsIkVSUk9SX0NPTk5FQ1RJT05fVU5IRUFMVEhZIiwiZWRnZV9uYW1lIiwibG9nSW50ZXJjZXB0b3IiLCJ1cmwiLCJpbnRlcmNlcHRvcnMiLCJBdXRob3JpemF0aW9uIiwid3NfZW5kcG9pbnQiLCJyZXNvbHZlIiwib25PcGVuIiwiRVJST1JfQ09OTkVDVElPTl9CUk9LRU4iLCJNQVhfUkVUUklFUyIsInJldHJ5QXR0ZW1wdCIsInJwY0NhbGxSZXN1bHQiLCJ3YXRjaENhbGxBY2NlcHRlZCIsIm9uQ2FsbEFjY2VwdGVkIiwiY3VycmVudFVzZXJJZCIsIlJJTkdJTkciLCJ3YXRjaENhbGxSZWplY3RlZCIsIm9uQ2FsbFJlamVjdGVkIiwiZXZlbnRDYWxsIiwiY2FsbFNlc3Npb24iLCJyZWplY3RlZEJ5IiwicmVqZWN0ZWRfYnkiLCJpc0NyZWF0ZWRCeU1lIiwiZXZlcnlvbmVFbHNlUmVqZWN0ZWQiLCJldmVyeSIsIndhdGNoQ2FsbEVuZGVkIiwib25DYWxsRW5kZWQiLCJKT0lORUQiLCJKT0lOSU5HIiwid2F0Y2hDYWxsR3JhbnRzVXBkYXRlZCIsIm9uQ2FsbEdyYW50c1VwZGF0ZWQiLCJuZXh0Q2FwYWJpbGl0aWVzIiwiY2FwYWJpbGl0eSIsIndhdGNoQ2hhbmdlUHVibGlzaFF1YWxpdHkiLCJ1cGRhdGVQdWJsaXNoUXVhbGl0eSIsIndhdGNoQ29ubmVjdGlvblF1YWxpdHlDaGFuZ2VkIiwicGF0Y2hlcyIsIndhdGNoUGFydGljaXBhbnRDb3VudENoYW5nZWQiLCJ3YXRjaExpdmVFbmRlZCIsIkxJVkVfRU5ERUQiLCJwZXJtaXNzaW9uc0NvbnRleHQiLCJoYXNQZXJtaXNzaW9uIiwid2F0Y2hTZnVFcnJvclJlcG9ydHMiLCJ3YXRjaFBpbnNVcGRhdGVkIiwib25QaW5zVXBkYXRlZCIsImhhbmRsZVJlbW90ZVNvZnRNdXRlIiwiTU9ERVJBVElPTiIsImNhbWVyYSIsImRpc2FibGUiLCJtaWNyb3Bob25lIiwicHVibGlzaGVyIiwic3RvcFB1Ymxpc2giLCJ3YXRjaFBhcnRpY2lwYW50Sm9pbmVkIiwib25QYXJ0aWNpcGFudEpvaW5lZCIsImFzc2lnbiIsInNjcmVlblNoYXJlVHJhY2siLCJ3YXRjaFBhcnRpY2lwYW50TGVmdCIsIm9uUGFydGljaXBhbnRMZWZ0Iiwid2F0Y2hUcmFja1B1Ymxpc2hlZCIsIm9uVHJhY2tQdWJsaXNoZWQiLCJ1bmlxdWUiLCJ3YXRjaFRyYWNrVW5wdWJsaXNoZWQiLCJvblRyYWNrVW5wdWJsaXNoZWQiLCJhcnIiLCJ3YXRjaERvbWluYW50U3BlYWtlckNoYW5nZWQiLCJ3YXRjaEF1ZGlvTGV2ZWxDaGFuZ2VkIiwicmVnaXN0ZXJFdmVudEhhbmRsZXJzIiwicmluZ2luZyIsInJlZ2lzdGVyUmluZ2luZ0NhbGxFdmVudEhhbmRsZXJzIiwiY29vcmRpbmF0b3JSaW5nRXZlbnRzIiwiaHR0cENsaWVudCIsImpvaW5DYWxsUmVzcG9uc2UiLCJkb0pvaW4iLCJjcmVkZW50aWFscyIsInRvUnRjQ29uZmlndXJhdGlvbiIsImljZV9zZXJ2ZXJzIiwic2VydmVyIiwibWV0YWRhdGEiLCJsb2NhdGlvbiIsImdldExvY2F0aW9uSGludCIsInJlcXVlc3QiLCJwb3N0IiwicnRjQ29uZmlnIiwiaWNlU2VydmVycyIsImljZSIsInVybHMiLCJ1c2VybmFtZSIsImNyZWRlbnRpYWwiLCJwYXNzd29yZCIsImNyZWF0ZVN0YXRzUmVwb3J0ZXIiLCJzdWJzY3JpYmVyIiwicG9sbGluZ0ludGVydmFsSW5NcyIsImdldFJhd1N0YXRzRm9yVHJhY2siLCJnZXRTdGF0c0ZvclN0cmVhbSIsInN0YXRzRm9yU3RyZWFtIiwic3RhdHMiLCJ0cmFuc2Zvcm0iLCJ0cmFja0tpbmQiLCJzdGFydFJlcG9ydGluZ1N0YXRzRm9yIiwic2Vzc2lvbklkc1RvVHJhY2siLCJydW4iLCJzdG9wUmVwb3J0aW5nU3RhdHNGb3IiLCJwYXJ0aWNpcGFudFN0YXRzIiwic2Vzc2lvbklkcyIsImhhcyIsIm1lcmdlZFN0cmVhbSIsIk1lZGlhU3RyZWFtIiwidmlkZW9TdHJlYW0iLCJnZXRWaWRlb1RyYWNrcyIsImF1ZGlvU3RyZWFtIiwiZ2V0QXVkaW9UcmFja3MiLCJzdWJzY3JpYmVyU3RhdHMiLCJwdWJsaXNoZXJTdGF0cyIsImFsbCIsImFnZ3JlZ2F0ZSIsInN1YnNjcmliZXJSYXdTdGF0cyIsInB1Ymxpc2hlclJhd1N0YXRzIiwiZGF0YWNlbnRlciIsInRpbWVzdGFtcCIsInRpbWVvdXRJZCIsImxvb3AiLCJmbGF0dGVuIiwic3RhdCIsInJ0Y1N0cmVhbVN0YXRzIiwidHJhbnNwb3J0SWQiLCJyb3VuZFRyaXBUaW1lIiwiZHRsc1N0YXRlIiwiY2FuZGlkYXRlUGFpciIsInNlbGVjdGVkQ2FuZGlkYXRlUGFpcklkIiwiY3VycmVudFJvdW5kVHJpcFRpbWUiLCJieXRlc1NlbnQiLCJieXRlc1JlY2VpdmVkIiwiZnJhbWVIZWlnaHQiLCJmcmFtZVdpZHRoIiwiZnJhbWVzUGVyU2Vjb25kIiwiaml0dGVyIiwicXVhbGl0eUxpbWl0YXRpb25SZWFzb24iLCJzc3JjIiwicmF3U3RhdHMiLCJhZ2dyZWdhdGVkU3RhdHMiLCJyYXdSZXBvcnQiLCJ0b3RhbEJ5dGVzU2VudCIsInRvdGFsQnl0ZXNSZWNlaXZlZCIsImF2ZXJhZ2VKaXR0ZXJJbk1zIiwiYXZlcmFnZVJvdW5kVHJpcFRpbWVJbk1zIiwicXVhbGl0eUxpbWl0YXRpb25SZWFzb25zIiwiaGlnaGVzdEZyYW1lV2lkdGgiLCJoaWdoZXN0RnJhbWVIZWlnaHQiLCJoaWdoZXN0RnJhbWVzUGVyU2Vjb25kIiwibWF4QXJlYSIsImFyZWEiLCJhY2MiLCJzdHJlYW0iLCJzdHJlYW1BcmVhIiwiQm9vbGVhbiIsIkRFRkFVTFRfVEhSRVNIT0xEIiwiVmlld3BvcnRUcmFja2VyIiwiZWxlbWVudEhhbmRsZXJNYXAiLCJvYnNlcnZlciIsInF1ZXVlU2V0Iiwic2V0Vmlld3BvcnQiLCJ2aWV3cG9ydEVsZW1lbnQiLCJjbGVhbnVwIiwiZGlzY29ubmVjdCIsImNsZWFyIiwiSW50ZXJzZWN0aW9uT2JzZXJ2ZXIiLCJlbnRyeSIsInJvb3QiLCJ0aHJlc2hvbGQiLCJxdWV1ZUVsZW1lbnQiLCJxdWV1ZUhhbmRsZXIiLCJjb250YWlucyIsIm9ic2VydmUiLCJlbGVtZW50IiwicXVldWVJdGVtIiwidW5vYnNlcnZlIiwiaXNTYWZhcmkiLCJpc0ZpcmVmb3giLCJpc0Nocm9tZSIsIkRFRkFVTFRfVklFV1BPUlRfVklTSUJJTElUWV9TVEFURSIsIkR5bmFzY2FsZU1hbmFnZXIiLCJ2aWV3cG9ydFRyYWNrZXIiLCJ0cmFja0VsZW1lbnRWaXNpYmlsaXR5IiwicHJldmlvdXNWaXNpYmlsaXR5U3RhdGUiLCJpc1Zpc2libGUiLCJpc0ludGVyc2VjdGluZyIsImRvY3VtZW50IiwiZnVsbHNjcmVlbkVsZW1lbnQiLCJWSVNJQkxFIiwiYmluZFZpZGVvRWxlbWVudCIsInZpZGVvRWxlbWVudCIsImJvdW5kUGFydGljaXBhbnQiLCJyZXF1ZXN0VHJhY2tXaXRoRGltZW5zaW9ucyIsImRlYm91bmNlVHlwZSIsInVwZGF0ZVN1YnNjcmlwdGlvbnNQYXJ0aWFsIiwicGFydGljaXBhbnQkIiwidGFrZVdoaWxlIiwidmlld3BvcnRWaXNpYmlsaXR5U3RhdGVTdWJzY3JpcHRpb24iLCJuZXh0Vmlld3BvcnRWaXNpYmlsaXR5U3RhdGUiLCJNRURJVU0iLCJjbGllbnRXaWR0aCIsImNsaWVudEhlaWdodCIsImxhc3REaW1lbnNpb25zIiwicmVzaXplT2JzZXJ2ZXIiLCJSZXNpemVPYnNlcnZlciIsImN1cnJlbnREaW1lbnNpb25zIiwiU0xPVyIsInB1Ymxpc2hlZFRyYWNrc1N1YnNjcmlwdGlvbiIsImRpc3RpbmN0VW50aWxLZXlDaGFuZ2VkIiwiRkFTVCIsImF1dG9wbGF5IiwicGxheXNJbmxpbmUiLCJzdHJlYW1TdWJzY3JpcHRpb24iLCJzb3VyY2UiLCJzY3JlZW5TaGFyZVN0cmVhbSIsInNyY09iamVjdCIsInBsYXkiLCJiaW5kQXVkaW9FbGVtZW50IiwiYXVkaW9FbGVtZW50IiwidXBkYXRlTWVkaWFTdHJlYW1TdWJzY3JpcHRpb24iLCJzY3JlZW5TaGFyZUF1ZGlvU3RyZWFtIiwic2VsZWN0ZWREZXZpY2UiLCJzcGVha2VyIiwic2V0U2lua0lkIiwic2lua0lkU3Vic2NyaXB0aW9uIiwic2VsZWN0ZWREZXZpY2UkIiwiZGV2aWNlSWQiLCJ2b2x1bWVTdWJzY3JpcHRpb24iLCJ2b2x1bWUkIiwidm9sdW1lIiwiUGVybWlzc2lvbnNDb250ZXh0IiwicGVybWlzc2lvbnMiLCJzZXRQZXJtaXNzaW9ucyIsInNldENhbGxTZXR0aW5ncyIsInBlcm1pc3Npb24iLCJjYW5SZXF1ZXN0IiwiYXVkaW8iLCJzY3JlZW5zaGFyaW5nIiwiYWNjZXNzX3JlcXVlc3RfZW5hYmxlZCIsIkNhbGxUeXBlIiwiQ2FsbFR5cGVzUmVnaXN0cnkiLCJjYWxsVHlwZXMiLCJyZWdpc3RlciIsImNhbGxUeXBlIiwidW5yZWdpc3RlciIsIkNhbGxUeXBlcyIsImdldERldmljZXMiLCJjb25zdHJhaW50cyIsIk9ic2VydmFibGUiLCJlbnVtZXJhdGUiLCJkZXZpY2VzIiwibWVkaWFEZXZpY2VzIiwiZW51bWVyYXRlRGV2aWNlcyIsIm5lZWRzR2V0VXNlck1lZGlhIiwibGFiZWwiLCJnZXRVc2VyTWVkaWEiLCJkaXNwb3NlT2ZNZWRpYVN0cmVhbSIsImNvbXBsZXRlIiwiY2hlY2tJZkF1ZGlvT3V0cHV0Q2hhbmdlU3VwcG9ydGVkIiwiY3JlYXRlRWxlbWVudCIsImF1ZGlvRGV2aWNlQ29uc3RyYWludHMiLCJhdXRvR2FpbkNvbnRyb2wiLCJub2lzZVN1cHByZXNzaW9uIiwiZWNob0NhbmNlbGxhdGlvbiIsInZpZGVvRGV2aWNlQ29uc3RyYWludHMiLCJtZW1vaXplZE9ic2VydmFibGUiLCJtZW1vaXplZCIsImdldERldmljZUNoYW5nZU9ic2VydmVyIiwibm90aWZ5IiwiZGVib3VuY2VUaW1lIiwiY29uY2F0TWFwIiwiZ2V0QXVkaW9EZXZpY2VzT2JzZXJ2ZXIiLCJtZXJnZSIsImdldEF1ZGlvT3V0cHV0RGV2aWNlc09ic2VydmVyIiwiZ2V0VmlkZW9EZXZpY2VzT2JzZXJ2ZXIiLCJnZXRBdWRpb0RldmljZXMiLCJnZXRWaWRlb0RldmljZXMiLCJnZXRBdWRpb091dHB1dERldmljZXMiLCJnZXRTdHJlYW0iLCJnZXRBdWRpb1N0cmVhbSIsInRyYWNrQ29uc3RyYWludHMiLCJnZXRWaWRlb1N0cmVhbSIsImdldFNjcmVlblNoYXJlU3RyZWFtIiwiZ2V0RGlzcGxheU1lZGlhIiwiaWRlYWwiLCJzeXN0ZW1BdWRpbyIsImRldmljZUlkcyQiLCJyZWxlYXNlIiwiSW5wdXRNZWRpYURldmljZU1hbmFnZXIiLCJzdG9wT25MZWF2ZSIsImlzVHJhY2tTdG9wcGVkRHVlVG9UcmFja0VuZCIsInJlbW92ZVN1YnNjcmlwdGlvbnMiLCJoYW5kbGVEaXNjb25uZWN0ZWRPclJlcGxhY2VkRGV2aWNlcyIsImxpc3REZXZpY2VzIiwic3RhdHVzIiwiZW5hYmxlUHJvbWlzZSIsInVubXV0ZVN0cmVhbSIsInNldFN0YXR1cyIsImZvcmNlU3RvcCIsInByZXZTdGF0dXMiLCJkaXNhYmxlTW9kZSIsImRpc2FibGVQcm9taXNlIiwibXV0ZVN0cmVhbSIsInJlc3VtZSIsInRvZ2dsZSIsInNldERlZmF1bHRDb25zdHJhaW50cyIsInNlbGVjdCIsInNldERldmljZSIsImFwcGx5U2V0dGluZ3NUb1N0cmVhbSIsInN0b3BQdWJsaXNoU3RyZWFtIiwibXV0ZUxvY2FsU3RyZWFtIiwiYWxsRW5kZWQiLCJzZXRNZWRpYVN0cmVhbSIsIm11dGVUcmFja3MiLCJ1bm11dGVUcmFja3MiLCJkZWZhdWx0Q29uc3RyYWludHMiLCJtZWRpYURldmljZUtpbmQiLCJwYWlyd2lzZSIsInByZXZEZXZpY2VzIiwiY3VycmVudERldmljZXMiLCJpc0RldmljZURpc2Nvbm5lY3RlZCIsImlzRGV2aWNlUmVwbGFjZWQiLCJjdXJyZW50RGV2aWNlIiwiZmluZERldmljZUluTGlzdCIsInByZXZEZXZpY2UiLCJncm91cElkIiwiSW5wdXRNZWRpYURldmljZU1hbmFnZXJTdGF0ZSIsInBlcm1pc3Npb25OYW1lIiwic3RhdHVzU3ViamVjdCIsIm1lZGlhU3RyZWFtU3ViamVjdCIsInNlbGVjdGVkRGV2aWNlU3ViamVjdCIsImRlZmF1bHRDb25zdHJhaW50c1N1YmplY3QiLCJtZWRpYVN0cmVhbSQiLCJzdGF0dXMkIiwiZGVmYXVsdENvbnN0cmFpbnRzJCIsImhhc0Jyb3dzZXJQZXJtaXNzaW9uJCIsIm5vdGlmeUdyYW50ZWQiLCJwZXJtaXNzaW9uc0FQSUF2YWlsYWJsZSIsInF1ZXJ5IiwicGVybWlzc2lvblN0YXRlIiwicGVybWlzc2lvblN0YXR1cyIsImdldERldmljZUlkRnJvbVN0cmVhbSIsIkNhbWVyYU1hbmFnZXJTdGF0ZSIsImRpcmVjdGlvblN1YmplY3QiLCJkaXJlY3Rpb24kIiwic2V0RGlyZWN0aW9uIiwiZmFjaW5nTW9kZSIsIkNhbWVyYU1hbmFnZXIiLCJzZWxlY3REaXJlY3Rpb24iLCJmbGlwIiwibmV3RGlyZWN0aW9uIiwic2VsZWN0VGFyZ2V0UmVzb2x1dGlvbiIsInJlc29sdXRpb24iLCJzZXRQcmVmZXJyZWRDb2RlYyIsInB1Ymxpc2hWaWRlb1N0cmVhbSIsIk1pY3JvcGhvbmVNYW5hZ2VyU3RhdGUiLCJzcGVha2luZ1doaWxlTXV0ZWRTdWJqZWN0Iiwic3BlYWtpbmdXaGlsZU11dGVkJCIsInNwZWFraW5nV2hpbGVNdXRlZCIsInNldFNwZWFraW5nV2hpbGVNdXRlZCIsIkRFVEVDVElPTl9GUkVRVUVOQ1lfSU5fTVMiLCJBVURJT19MRVZFTF9USFJFU0hPTEQiLCJGRlRfU0laRSIsImNyZWF0ZVNvdW5kRGV0ZWN0b3IiLCJvblNvdW5kRGV0ZWN0ZWRTdGF0ZUNoYW5nZWQiLCJkZXRlY3Rpb25GcmVxdWVuY3lJbk1zIiwiYXVkaW9MZXZlbFRocmVzaG9sZCIsImZmdFNpemUiLCJkZXN0cm95U3RyZWFtT25TdG9wIiwiYXVkaW9Db250ZXh0IiwiQXVkaW9Db250ZXh0IiwiYW5hbHlzZXIiLCJjcmVhdGVBbmFseXNlciIsImNyZWF0ZU1lZGlhU3RyZWFtU291cmNlIiwiY29ubmVjdCIsImludGVydmFsSWQiLCJmcmVxdWVuY3lCaW5Db3VudCIsImdldEJ5dGVGcmVxdWVuY3lEYXRhIiwiaXNTb3VuZERldGVjdGVkIiwiYXZlcmFnZWREYXRhVmFsdWUiLCJwdiIsImN2IiwicGVyY2VudGFnZSIsIlJOU3BlZWNoRGV0ZWN0b3IiLCJwYzEiLCJwYzIiLCJzdGFydCIsImFkZFRyYWNrIiwiYXVkaW9UcmFja3MiLCJvblNwZWFraW5nRGV0ZWN0ZWRTdGF0ZUNoYW5nZSIsImF1ZGlvTWVkaWFTb3VyY2VTdGF0cyIsIk1pY3JvcGhvbmVNYW5hZ2VyIiwic3RvcFNwZWFraW5nV2hpbGVNdXRlZERldGVjdGlvbiIsInN0YXJ0U3BlYWtpbmdXaGlsZU11dGVkRGV0ZWN0aW9uIiwicHVibGlzaEF1ZGlvU3RyZWFtIiwicm5TcGVlY2hEZXRlY3RvciIsInNvdW5kRGV0ZWN0b3JDbGVhbnVwIiwiU2NyZWVuU2hhcmVTdGF0ZSIsImF1ZGlvRW5hYmxlZFN1YmplY3QiLCJhdWRpb0VuYWJsZWQkIiwiYXVkaW9FbmFibGVkIiwic2V0QXVkaW9FbmFibGVkIiwiaXNFbmFibGVkIiwic2V0U2V0dGluZ3MiLCJTY3JlZW5TaGFyZU1hbmFnZXIiLCJlbmFibGVTY3JlZW5TaGFyZUF1ZGlvIiwiZGlzYWJsZVNjcmVlblNoYXJlQXVkaW8iLCJvZiIsInB1Ymxpc2hTY3JlZW5TaGFyZVN0cmVhbSIsIlNwZWFrZXJTdGF0ZSIsInZvbHVtZVN1YmplY3QiLCJpc0RldmljZVNlbGVjdGlvblN1cHBvcnRlZCIsInNldFZvbHVtZSIsIlNwZWFrZXJNYW5hZ2VyIiwic3RyZWFtQ2xpZW50IiwiY2xpZW50U3RvcmUiLCJ3YXRjaGluZyIsImR5bmFzY2FsZU1hbmFnZXIiLCJ0cmFja1N1YnNjcmlwdGlvbnNTdWJqZWN0IiwicmVjb25uZWN0QXR0ZW1wdHMiLCJtYXhSZWNvbm5lY3RBdHRlbXB0cyIsImxlYXZlQ2FsbEhvb2tzIiwic3RyZWFtQ2xpZW50RXZlbnRIYW5kbGVycyIsIm9mZkhhbmRsZXIiLCJjYWxsX2NpZCIsInJlZ2lzdGVyZWRPZmZIYW5kbGVyIiwicmVqZWN0IiwiYXNzZXJ0Q2FsbEpvaW5lZCIsImhhc090aGVyUGFydGljaXBhbnRzIiwic3RhdHNSZXBvcnRlciIsImhvb2siLCJzY3JlZW5TaGFyZSIsInN0b3BPbkxlYXZlUHJvbWlzZXMiLCJzdHJlYW1DbGllbnRCYXNlUGF0aCIsInJpbmciLCJyaW5naW5nU3ViamVjdCIsIl9oYXNDb25uZWN0aW9uSUQiLCJhcHBseURldmljZUNvbmZpZyIsImdldE9yQ3JlYXRlIiwiYWNjZXB0IiwiaXNNaWdyYXRpbmciLCJNSUdSQVRJTkciLCJpc1JlY29ubmVjdGluZyIsIlJFQ09OTkVDVElORyIsInNmdVRva2VuIiwicHJldmlvdXNTZnVDbGllbnQiLCJyZWNvbm5lY3QiLCJzdHJhdGVneSIsImN1cnJlbnRTdGF0ZSIsIm1pZ3JhdGluZ19mcm9tIiwidW5yZWdpc3RlckdvQXdheSIsIlJFQ09OTkVDVElOR19GQUlMRUQiLCJ1bnN1YnNjcmliZU9ubGluZUV2ZW50Iiwib25saW5lIiwiY3VycmVudENhbGxpbmdTdGF0ZSIsInNob3VsZFJlY29ubmVjdCIsImlzRmlyc3RSZWNvbm5lY3RBdHRlbXB0IiwidW5zdWJzY3JpYmVPZmZsaW5lRXZlbnQiLCJhdWRpb1NldHRpbmdzIiwib3B1c19kdHhfZW5hYmxlZCIsInJlZHVuZGFudF9jb2RpbmdfZW5hYmxlZCIsIndhaXRGb3JKb2luUmVzcG9uc2UiLCJjdXJyZW50UGFydGljaXBhbnRzIiwicGFydGljaXBhbnRMb29rdXAiLCJleGlzdGluZ1BhcnRpY2lwYW50IiwiaW5pdENhbWVyYSIsImluaXRNaWMiLCJhdWRpb1RyYWNrIiwic2NyZWVuU2hhcmVBdWRpb1RyYWNrIiwiY2hhbmdlcyIsImNoYW5nZSIsInByb3AiLCJzY3JlZW5TaGFyZURpbWVuc2lvbiIsInJlc2V0UmVhY3Rpb24iLCJjcml0ZXJpYSIsInNlbmRSZWFjdGlvbiIsIm11dGVTZWxmIiwibXlVc2VySWQiLCJtdXRlVXNlciIsIm11dGVPdGhlcnMiLCJ1c2VySWRzVG9NdXRlIiwidXNlcl9pZHMiLCJtdXRlQWxsVXNlcnMiLCJtdXRlX2FsbF91c2VycyIsInN0YXJ0UmVjb3JkaW5nIiwic3RvcFJlY29yZGluZyIsInJlcXVlc3RQZXJtaXNzaW9ucyIsImNhblJlcXVlc3RQZXJtaXNzaW9ucyIsImdyYW50UGVybWlzc2lvbnMiLCJ1cGRhdGVVc2VyUGVybWlzc2lvbnMiLCJncmFudF9wZXJtaXNzaW9ucyIsInJldm9rZVBlcm1pc3Npb25zIiwicmV2b2tlX3Blcm1pc3Npb25zIiwiZ29MaXZlIiwic3RvcExpdmUiLCJzdGFydEhMUyIsInN0b3BITFMiLCJ1cGRhdGVzIiwiZW5kQ2FsbCIsInVucGluIiwicGluRm9yRXZlcnlvbmUiLCJ1bnBpbkZvckV2ZXJ5b25lIiwicXVlcnlNZW1iZXJzIiwidXBkYXRlQ2FsbE1lbWJlcnMiLCJzY2hlZHVsZUF1dG9Ecm9wIiwiZHJvcFRpbWVvdXQiLCJ0aW1lb3V0SW5NcyIsImF1dG9fY2FuY2VsX3RpbWVvdXRfbXMiLCJxdWVyeVJlY29yZGluZ3MiLCJjYWxsU2Vzc2lvbklkIiwic2VuZEN1c3RvbUV2ZW50IiwidW5iaW5kIiwiYmluZENhbGxUaHVtYm5haWxFbGVtZW50IiwiaW1hZ2VFbGVtZW50IiwiaGFuZGxlRXJyb3IiLCJzcmMiLCJmYWxsYmFja0ltYWdlU291cmNlIiwidGh1bWJuYWlsVXJsIiwiVVJMIiwiaW1hZ2VfdXJsIiwic2VhcmNoUGFyYW1zIiwiY2FsbFR5cGVDb25maWciLCJwYXJ0aWNpcGFudFNvcnRlciIsIklETEUiLCJyZWdpc3RlckVmZmVjdHMiLCJkZWJvdW5jZSIsInRpbWVyIiwicGVybWlzc2lvblRvVHJhY2tUeXBlIiwiaXNSaW5naW5nIiwiZGVmYXVsdERpcmVjdGlvbiIsImJhY2tlbmRTZXR0aW5nIiwiY2FtZXJhX2ZhY2luZyIsImNhbWVyYV9kZWZhdWx0X29uIiwibWljX2RlZmF1bHRfb24iLCJJbnNpZ2h0TWV0cmljcyIsImNvbm5lY3Rpb25TdGFydFRpbWVzdGFtcCIsIndzVG90YWxGYWlsdXJlcyIsIndzQ29uc2VjdXRpdmVGYWlsdXJlcyIsImluc3RhbmNlQ2xpZW50SWQiLCJwb3N0SW5zaWdodHMiLCJpbnNpZ2h0VHlwZSIsImluc2lnaHRzIiwibWF4QXR0ZW1wdHMiLCJheGlvcyIsImJ1aWxkV3NGYXRhbEluc2lnaHQiLCJjb25uZWN0aW9uIiwiYnVpbGRXc0Jhc2VJbnNpZ2h0IiwiY2xpZW50IiwicmVhZHlfc3RhdGUiLCJfYnVpbGRVcmwiLCJhcGlfa2V5Iiwic3RhcnRfdHMiLCJpbnNpZ2h0TWV0cmljcyIsImVuZF90cyIsImF1dGhfdHlwZSIsImdldEF1dGhUeXBlIiwidG9rZW5NYW5hZ2VyIiwidXNlcklEIiwidXNlcl9kZXRhaWxzIiwiX3VzZXIiLCJjbGllbnRfaWQiLCJjb25uZWN0aW9uSUQiLCJ3c19kZXRhaWxzIiwid3NfY29uc2VjdXRpdmVfZmFpbHVyZXMiLCJ3c190b3RhbF9mYWlsdXJlcyIsInJlcXVlc3RfaWQiLCJyZXF1ZXN0SUQiLCJ1c2VyX2FnZW50IiwiaW5zdGFuY2VfY2xpZW50X2lkIiwiYnVpbGRXc1N1Y2Nlc3NBZnRlckZhaWx1cmVJbnNpZ2h0IiwiaXNDbG9zZUV2ZW50IiwicmVzIiwiaXNFcnJvckV2ZW50IiwiU3RhYmxlV1NDb25uZWN0aW9uIiwiX2xvZyIsImV4dHJhIiwic2V0Q2xpZW50IiwiVVJMU2VhcmNoUGFyYW1zIiwiZ2V0VXNlckFnZW50Iiwid3NCYXNlVVJMIiwib25saW5lU3RhdHVzQ2hhbmdlZCIsIl9zZXRIZWFsdGgiLCJpc0hlYWx0aHkiLCJfcmVjb25uZWN0IiwiaW50ZXJ2YWwiLCJvbm9wZW4iLCJ3c0lEIiwiX2dldFRva2VuIiwiYXV0aE1lc3NhZ2UiLCJhdXRoZW50aWNhdGlvblNlbnQiLCJvbm1lc3NhZ2UiLCJpc1Jlc29sdmVkIiwicmVqZWN0UHJvbWlzZSIsIl9lcnJvckZyb21XU0V2ZW50IiwibGFzdEV2ZW50Iiwic2NoZWR1bGVOZXh0UGluZyIsInJlc29sdmVQcm9taXNlIiwiaXNDb25uZWN0aW5nIiwiY29uc2VjdXRpdmVGYWlsdXJlcyIsImlzU3RhdGljIiwiY29ubmVjdGlvbkNoZWNrVGltZW91dFJlZiIsInJlZnJlc2hUb2tlbiIsImRpc3BhdGNoRXZlbnQiLCJvbmNsb3NlIiwid2FzQ2xlYW4iLCJ0b3RhbEZhaWx1cmVzIiwib25lcnJvciIsImhlYWx0aHkiLCJkaXNwYXRjaEltbWVkaWF0ZWx5IiwiaXNXU0ZhaWx1cmUiLCJzdGF0dXNDb2RlIiwiU3RhdHVzQ29kZSIsIl9zZXR1cENvbm5lY3Rpb25Qcm9taXNlIiwiY29ubmVjdGlvbk9wZW4iLCJoZWFsdGhDaGVja1RpbWVvdXRSZWYiLCJjbGllbnRJRCIsInBpbmdJbnRlcnZhbCIsImlzRGlzY29ubmVjdGVkIiwiaGVhbHRoQ2hlY2siLCJfY29ubmVjdCIsIl93YWl0Rm9ySGVhbHRoeSIsInJhY2UiLCJyZW1vdmVBbGxMaXN0ZW5lcnMiLCJpc0Nsb3NlZFByb21pc2UiLCJlbmFibGVXU0ZhbGxiYWNrIiwiaXNUb2tlblJlYWR5IiwidG9rZW5SZWFkeSIsImxvYWRUb2tlbiIsIndzVVJMIiwiY29ubmVjdGlvbl9pZCIsInJlc29sdmVDb25uZWN0aW9uSWQiLCJlbmFibGVJbnNpZ2h0cyIsInJlamVjdENvbm5lY3Rpb25JZCIsIl9kZXN0cm95Q3VycmVudFdTQ29ubmVjdGlvbiIsImlzU3RyaW5nIiwiYXJyYXlPclN0cmluZyIsImlzTWFwU3RyaW5nQ2FsbGJhY2siLCJjYWxsYmFjayIsImNoYXJBdCIsImtWYWx1ZSIsIm1hcHBlZFZhbHVlIiwiZW5jb2RlQmFzZTY0IiwiZnJvbUJ5dGVBcnJheSIsImNoYXIiLCJjaGFyQ29kZUF0IiwiZGVjb2RlQmFzZTY0IiwiZnJvbUNoYXJDb2RlIiwiTCIsIngiLCJBIiwiSldUVXNlclRva2VuIiwiYXBpU2VjcmV0IiwiZXh0cmFEYXRhIiwiand0T3B0aW9ucyIsIlR5cGVFcnJvciIsImp3dCIsInNpZ24iLCJhbGdvcml0aG0iLCJub1RpbWVzdGFtcCIsImlhdCIsIkpXVFNlcnZlclRva2VuIiwiVXNlckZyb21Ub2tlbiIsImZyYWdtZW50cyIsImI2NFBheWxvYWQiLCJEZXZUb2tlbiIsIlRva2VuTWFuYWdlciIsInNlY3JldCIsInNldFRva2VuT3JQcm92aWRlciIsInRva2VuT3JQcm92aWRlciIsImlzQW5vbnltb3VzIiwidmFsaWRhdGVUb2tlbiIsInRva2VuUHJvdmlkZXIiLCJyZXNldCIsImxvYWRUb2tlblByb21pc2UiLCJ0b2tlblVzZXJJZCIsImdldFRva2VuIiwiQVBJRXJyb3JDb2RlcyIsImlzQVBJRXJyb3IiLCJpc0Vycm9yUmV0cnlhYmxlIiwiaXNDb25uZWN0aW9uSURFcnJvciIsImlzRXJyb3JSZXNwb25zZSIsIkNvbm5lY3Rpb25TdGF0ZSIsIldTQ29ubmVjdGlvbkZhbGxiYWNrIiwiX29ubGluZVN0YXR1c0NoYW5nZWQiLCJfc2V0U3RhdGUiLCJDbG9zZWQiLCJjYW5jZWxUb2tlbiIsImNhbmNlbCIsIl9yZXEiLCJyZXRyeSIsIkNhbmNlbFRva2VuIiwiZG9BeGlvc1JlcXVlc3QiLCJiYXNlVVJMIiwicHVibGljRW5kcG9pbnQiLCJfcG9sbCIsIkNvbm5lY3RlZCIsImV2ZW50cyIsImlzQ2FuY2VsIiwiRGlzY29ubmVjdGVkIiwiQ29ubmVjdGluZyIsIl9idWlsZFdTUGF5bG9hZCIsIkluaXQiLCJISU5UX1VSTCIsImhpbnRVcmwiLCJhYm9ydENvbnRyb2xsZXIiLCJBYm9ydENvbnRyb2xsZXIiLCJhYm9ydCIsImZldGNoIiwiYXdzUG9wIiwiU3RyZWFtQ2xpZW50IiwibmV4dFJlcXVlc3RBYm9ydENvbnRyb2xsZXIiLCJkZXZUb2tlbiIsInNldEJhc2VVUkwiLCJoaW50IiwibG9jYXRpb25IaW50IiwibG9jYXRpb25IaW50VXJsIiwibG9jYXRpb25IaW50VGltZW91dCIsIl9nZXRDb25uZWN0aW9uSUQiLCJ3c0Nvbm5lY3Rpb24iLCJ3c0ZhbGxiYWNrIiwiY29ubmVjdFVzZXIiLCJ1c2VyVG9rZW5PclByb3ZpZGVyIiwic2V0VXNlclByb21pc2UiLCJfaXNVc2luZ1NlcnZlckF1dGgiLCJub2RlIiwiYWxsb3dTZXJ2ZXJTaWRlQ29ubmVjdCIsInNldFRva2VuUHJvbWlzZSIsIl9zZXRUb2tlbiIsIl9zZXRVc2VyIiwid3NQcm9taXNlIiwib3BlbkNvbm5lY3Rpb24iLCJwZXJzaXN0VXNlck9uQ29ubmVjdGlvbkZhaWx1cmUiLCJjbG9zZUNvbm5lY3Rpb24iLCJkaXNjb25uZWN0VXNlciIsImNsZWFuaW5nSW50ZXJ2YWxSZWYiLCJjb25uZWN0aW9uSWRQcm9taXNlIiwiX25vcm1hbGl6ZURhdGUiLCJiZWZvcmUiLCJjb25uZWN0R3Vlc3RVc2VyIiwiZ3Vlc3RVc2VyQ3JlYXRlUHJvbWlzZSIsImZpbmFsbHkiLCJhY2Nlc3NfdG9rZW4iLCJjb25uZWN0QW5vbnltb3VzVXNlciIsIl9sb2dBcGlSZXF1ZXN0IiwiX2xvZ0FwaVJlc3BvbnNlIiwiX2xvZ0FwaUVycm9yIiwicmVxdWVzdENvbmZpZyIsIl9lbnJpY2hBeGlvc09wdGlvbnMiLCJheGlvc0luc3RhbmNlIiwicHV0IiwiaGFuZGxlUmVzcG9uc2UiLCJjbGllbnRfcmVxdWVzdF9pZCIsImVycm9yRnJvbVJlc3BvbnNlIiwicmVjZWl2ZWRfYXQiLCJsaXN0ZW5lciIsIndhcm1VcCIsIl9zYXlIaSIsImRlZmF1bHRXU1RpbWVvdXRXaXRoRmFsbGJhY2siLCJkZWZhdWx0V1NUaW1lb3V0IiwibW9kZSIsIkF4aW9zSGVhZGVycyIsInNldFVzZXJBZ2VudCIsImF1dGhvcml6YXRpb24iLCJheGlvc1JlcXVlc3RDb25maWciLCJjcmVhdGVBYm9ydENvbnRyb2xsZXJGb3JOZXh0UmVxdWVzdCIsImNyZWF0ZVRva2VuIiwiZXhwIiwiY2FsbF9jaWRzIiwiaW5wdXRPcHRpb25zIiwid2l0aENyZWRlbnRpYWxzIiwiaHR0cHNBZ2VudCIsImh0dHBzIiwiQWdlbnQiLCJrZWVwQWxpdmVNc2VjcyIsInByb2Nlc3MiLCJlbnYiLCJTVFJFQU1fTE9DQUxfVEVTVF9SVU4iLCJTVFJFQU1fTE9DQUxfVEVTVF9IT1NUIiwiU3RyZWFtVmlkZW9DbGllbnQiLCJhcGlLZXlPckFyZ3MiLCJldmVudEhhbmRsZXJzVG9VbnJlZ2lzdGVyIiwiY29ubmVjdGlvblByb21pc2UiLCJkaXNjb25uZWN0aW9uUHJvbWlzZSIsIndyaXRlYWJsZVN0YXRlU3RvcmUiLCJjcmVhdGVHdWVzdFVzZXIiLCJxdWVyeUNhbGxzIiwid2F0Y2giLCJlZGdlcyIsImFkZERldmljZSIsInB1c2hfcHJvdmlkZXIiLCJwdXNoX3Byb3ZpZGVyX25hbWUiLCJ2b2lwX3Rva2VuIiwicmVtb3ZlRGV2aWNlIiwib25SaW5naW5nQ2FsbCIsInJlYWRPbmx5U3RhdGVTdG9yZSIsImNhbGxJZCIsImFwaUtleSIsImNvbm5lY3RVc2VyUmVzcG9uc2UiLCJtZSIsImNhbGxzVG9SZVdhdGNoIiwiZmlsdGVyX2NvbmRpdGlvbnMiLCIkaW4iLCJmaWVsZCIsIm5ld0NhbGwiLCJwcmV2Q2FsbCIsInRoZUNhbGwiLCJhZGRWb2lwRGV2aWNlIiwiU3RyZWFtVmlkZW9TZXJ2ZXJDbGllbnQiLCJnZXRDYWxsVHlwZXMiLCJnZXRDYWxsVHlwZSIsImNyZWF0ZUNhbGxUeXBlIiwiZGVsZXRlQ2FsbFR5cGUiLCJ1cGRhdGVDYWxsVHlwZSIsImxpc3RFeHRlcm5hbFN0b3JhZ2UiLCJjcmVhdGVFeHRlcm5hbFN0b3JhZ2UiLCJkZWxldGVFeHRlcm5hbFN0b3JhZ2UiLCJ1cGRhdGVFeHRlcm5hbFN0b3JhZ2UiLCJjaGVja0V4dGVybmFsU3RvcmFnZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@stream-io/video-client/dist/index.es.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@stream-io/video-react-bindings/dist/index.es.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@stream-io/video-react-bindings/dist/index.es.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEFAULT_LANGUAGE: () => (/* binding */ DEFAULT_LANGUAGE),\n/* harmony export */   DEFAULT_NAMESPACE: () => (/* binding */ DEFAULT_NAMESPACE),\n/* harmony export */   Restricted: () => (/* binding */ Restricted),\n/* harmony export */   StreamCallProvider: () => (/* binding */ StreamCallProvider),\n/* harmony export */   StreamI18n: () => (/* binding */ StreamI18n),\n/* harmony export */   StreamI18nProvider: () => (/* binding */ StreamI18nProvider),\n/* harmony export */   StreamVideoProvider: () => (/* binding */ StreamVideoProvider),\n/* harmony export */   defaultTranslationFunction: () => (/* binding */ defaultTranslationFunction),\n/* harmony export */   mapToRegistry: () => (/* binding */ mapToRegistry),\n/* harmony export */   useCall: () => (/* binding */ useCall),\n/* harmony export */   useCallStateHooks: () => (/* binding */ useCallStateHooks),\n/* harmony export */   useCalls: () => (/* binding */ useCalls),\n/* harmony export */   useConnectedUser: () => (/* binding */ useConnectedUser),\n/* harmony export */   useCreateI18n: () => (/* binding */ useCreateI18n),\n/* harmony export */   useI18n: () => (/* binding */ useI18n),\n/* harmony export */   useStore: () => (/* binding */ useStore),\n/* harmony export */   useStreamVideoClient: () => (/* binding */ useStreamVideoClient)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var i18next__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! i18next */ \"(ssr)/./node_modules/i18next/dist/esm/i18next.js\");\n/* harmony import */ var _stream_io_video_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @stream-io/video-client */ \"(ssr)/./node_modules/@stream-io/video-client/dist/index.es.js\");\n\n\n\n\n\nconst StreamCallContext = (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)(undefined);\n/**\n * A provider for the call object.\n */\nconst StreamCallProvider = (props) => {\n    const { call, children } = props;\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(StreamCallContext.Provider, { value: call, children: children }));\n};\n/**\n * A hook to get the call object from the closest provider.\n */\nconst useCall = () => {\n    return (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(StreamCallContext);\n};\n\nconst mapToRegistry = (translationsMap, namespace) => Object.entries(translationsMap).reduce((acc, [lng, translations]) => {\n    acc[lng] = { [namespace]: translations };\n    return acc;\n}, {});\n\nconst DEFAULT_LANGUAGE = 'en';\nconst DEFAULT_NAMESPACE = 'stream-video';\nconst DEFAULT_CONFIG = {\n    debug: false,\n    currentLanguage: DEFAULT_LANGUAGE,\n    fallbackLanguage: false,\n};\nconst DEFAULT_TRANSLATIONS_REGISTRY = mapToRegistry({}, DEFAULT_NAMESPACE);\nconst defaultTranslationFunction = (key) => key;\nclass StreamI18n {\n    /** Simple logger function */\n    constructor(options = {}) {\n        /** Translator function that converts the provided string into its equivalent in the current language. */\n        this.t = defaultTranslationFunction;\n        this.init = async () => {\n            try {\n                this.t = await this.i18nInstance.init();\n            }\n            catch (e) {\n                console.error(`Failed to initialize translations: ${JSON.stringify(e)}`);\n            }\n            return this;\n        };\n        this.changeLanguage = async (language, onChange) => {\n            if (!this._checkIsInitialized())\n                return;\n            // i18next detects the language, if none provided, but it is better\n            // to show this detection here explicitly\n            const browserLanguage = typeof window !== 'undefined' && window.navigator\n                ? window.navigator.language\n                : undefined;\n            await this.i18nInstance.changeLanguage(language || browserLanguage);\n            onChange?.(this.currentLanguage);\n        };\n        this.registerTranslationsForLanguage = ({ lng, translations, }) => {\n            if (!this._checkIsInitialized())\n                return;\n            this.i18nInstance.addResourceBundle(lng, DEFAULT_NAMESPACE, translations, true, true);\n        };\n        this._checkIsInitialized = () => {\n            if (!this.i18nInstance.isInitialized) {\n                console.warn('I18n instance is not initialized. Call yourStreamI18nInstance.init().');\n            }\n            return this.i18nInstance.isInitialized;\n        };\n        const { debug = DEFAULT_CONFIG.debug, currentLanguage = DEFAULT_CONFIG.currentLanguage, fallbackLanguage = DEFAULT_CONFIG.fallbackLanguage, translationsOverrides, } = options;\n        this.i18nInstance = i18next__WEBPACK_IMPORTED_MODULE_2__[\"default\"].createInstance({\n            debug,\n            defaultNS: DEFAULT_NAMESPACE,\n            fallbackLng: fallbackLanguage,\n            interpolation: { escapeValue: false },\n            keySeparator: false,\n            lng: currentLanguage,\n            nsSeparator: false,\n            parseMissingKeyHandler: (key) => {\n                return key;\n            },\n            resources: DEFAULT_TRANSLATIONS_REGISTRY,\n        });\n        if (translationsOverrides) {\n            this.i18nInstance.on('initialized', () => {\n                Object.entries(translationsOverrides).forEach(([lng, translations]) => {\n                    this.registerTranslationsForLanguage({ lng, translations });\n                });\n            });\n        }\n    }\n    get currentLanguage() {\n        this._checkIsInitialized();\n        return this.i18nInstance.language;\n    }\n    get isInitialized() {\n        return this.i18nInstance.isInitialized;\n    }\n}\n\nconst StreamI18nContext = (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)({\n    t: defaultTranslationFunction,\n});\nconst StreamI18nProvider = ({ children, ...createI18nParams }) => {\n    const { i18n, t } = useCreateI18n(createI18nParams);\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(StreamI18nContext.Provider, { value: { t, i18n }, children: children }));\n};\nconst useCreateI18n = ({ i18nInstance, language, fallbackLanguage, translationsOverrides, }) => {\n    const [i18n] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(() => i18nInstance ||\n        new StreamI18n({\n            currentLanguage: language,\n            fallbackLanguage,\n            translationsOverrides,\n        }));\n    const [t, setTranslationFn] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(() => defaultTranslationFunction);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n        const { isInitialized } = i18n;\n        if (!isInitialized) {\n            i18n.init().then((_i18n) => setTranslationFn(() => _i18n.i18nInstance.t));\n            return;\n        }\n        if (language && i18n?.currentLanguage !== language) {\n            i18n.changeLanguage(language).catch((err) => {\n                console.log('Error while changing language', err);\n            });\n        }\n    }, [i18n, i18nInstance, language, translationsOverrides]);\n    return { i18n, t };\n};\nconst useI18n = () => (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(StreamI18nContext);\n\nconst StreamVideoContext = (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)(undefined);\n/**\n * StreamVideo is a provider component which should be used to wrap the entire application.\n * It provides the client object to all children components and initializes the i18n instance.\n *  @param PropsWithChildren<StreamVideoProps>\n *  @category Client State\n */\nconst StreamVideoProvider = ({ children, client, i18nInstance, language, translationsOverrides, }) => {\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(StreamVideoContext.Provider, { value: client, children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(StreamI18nProvider, { i18nInstance: i18nInstance, language: language, translationsOverrides: translationsOverrides, children: children }) }));\n};\n/**\n *\n * @returns\n *\n * @category Client State\n */\nconst useStreamVideoClient = () => {\n    return (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(StreamVideoContext);\n};\n\n/**\n * Utility hook which provides the current value of the given observable.\n * @internal\n */\nconst useObservableValue = (observable$) => {\n    const [value, setValue] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(() => _stream_io_video_client__WEBPACK_IMPORTED_MODULE_3__.RxUtils.getCurrentValue(observable$));\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n        const subscription = observable$.subscribe(setValue);\n        return () => {\n            subscription.unsubscribe();\n        };\n    }, [observable$]);\n    return value;\n};\n\n/**\n * Utility hook, which provides the current call's state.\n *\n * @category Call State\n */\nconst useCallState = () => {\n    const call = useCall();\n    // return an empty and unlinked CallState object if there is no call in the provider\n    // this ensures that the hooks always return a value and many null checks can be avoided\n    if (!call) {\n        const message = 'You are using useCallState() outside a Call context. ' +\n            'Please wrap your component in <StreamCall /> and provide a \"call\" instance.';\n        console.warn(message);\n        return new _stream_io_video_client__WEBPACK_IMPORTED_MODULE_3__.CallState();\n    }\n    return call.state;\n};\n/**\n * Utility hook which provides information whether the current call is being recorded. It will return `true` if the call is being recorded.\n *\n * @category Call State\n */\nconst useIsCallRecordingInProgress = () => {\n    const { recording$ } = useCallState();\n    return useObservableValue(recording$);\n};\n/**\n * Utility hook which provides information whether the current call is broadcasting.\n *\n * @category Call State\n */\nconst useIsCallHLSBroadcastingInProgress = () => {\n    const { egress$ } = useCallState();\n    const egress = useObservableValue(egress$);\n    if (!egress)\n        return false;\n    return egress.broadcasting;\n};\n/**\n * Utility hook which provides information whether the current call is live.\n *\n * @category Call State\n */\nconst useIsCallLive = () => {\n    const { backstage$ } = useCallState();\n    const isBackstageOn = useObservableValue(backstage$);\n    return !isBackstageOn;\n};\n/**\n * Returns the list of blocked users in the current call.\n */\nconst useCallBlockedUserIds = () => {\n    const { blockedUserIds$ } = useCallState();\n    return useObservableValue(blockedUserIds$);\n};\n/**\n * Returns the timestamp when this call was created.\n */\nconst useCallCreatedAt = () => {\n    const { createdAt$ } = useCallState();\n    return useObservableValue(createdAt$);\n};\n/**\n * Returns the timestamp when this call was ended.\n */\nconst useCallEndedAt = () => {\n    const { endedAt$ } = useCallState();\n    return useObservableValue(endedAt$);\n};\n/**\n * Returns the timestamp telling when the call is scheduled to start.\n */\nconst useCallStartsAt = () => {\n    const { startsAt$ } = useCallState();\n    return useObservableValue(startsAt$);\n};\n/**\n * Returns the timestamp when this call was updated.\n */\nconst useCallUpdatedAt = () => {\n    const { updatedAt$ } = useCallState();\n    return useObservableValue(updatedAt$);\n};\n/**\n * Returns the information about the call's creator.\n */\nconst useCallCreatedBy = () => {\n    const { createdBy$ } = useCallState();\n    return useObservableValue(createdBy$);\n};\n/**\n * Returns the call's custom data.\n */\nconst useCallCustomData = () => {\n    const { custom$ } = useCallState();\n    return useObservableValue(custom$);\n};\n/**\n * Returns the call's Egress information.\n */\nconst useCallEgress = () => {\n    const { egress$ } = useCallState();\n    return useObservableValue(egress$);\n};\n/**\n * Returns the call's Ingress information.\n */\nconst useCallIngress = () => {\n    const { ingress$ } = useCallState();\n    return useObservableValue(ingress$);\n};\n/**\n * Returns the data for the current call session.\n */\nconst useCallSession = () => {\n    const { session$ } = useCallState();\n    return useObservableValue(session$);\n};\n/**\n * Returns the call's settings.\n */\nconst useCallSettings = () => {\n    const { settings$ } = useCallState();\n    return useObservableValue(settings$);\n};\n/**\n * Returns whether the call has transcribing enabled.\n */\nconst useIsCallTranscribingInProgress = () => {\n    const { transcribing$ } = useCallState();\n    return useObservableValue(transcribing$);\n};\n/**\n * Returns information about the user who has marked this call as ended.\n */\nconst useCallEndedBy = () => {\n    const { endedBy$ } = useCallState();\n    return useObservableValue(endedBy$);\n};\n/**\n * Utility hook which provides a boolean indicating whether there is\n * a participant in the current call which shares their screen.\n *\n * @category Call State\n */\nconst useHasOngoingScreenShare = () => {\n    const { hasOngoingScreenShare$ } = useCallState();\n    return useObservableValue(hasOngoingScreenShare$);\n};\n/**\n * Utility hook which provides the latest stats report of the current call.\n *\n * The latest stats report of the current call.\n * When stats gathering is enabled, this observable will emit a new value\n * at a regular (configurable) interval.\n *\n * Consumers of this observable can implement their own batching logic\n * in case they want to show historical stats data.\n *\n * @category Call State\n */\nconst useCallStatsReport = () => {\n    const { callStatsReport$ } = useCallState();\n    return useObservableValue(callStatsReport$);\n};\n/**\n * Utility hook which provides the dominant speaker of the current call.\n *\n * @category Call State\n */\nconst useDominantSpeaker = () => {\n    const { dominantSpeaker$ } = useCallState();\n    return useObservableValue(dominantSpeaker$);\n};\n/**\n * Utility hook which provides a list of call members.\n *\n * @category Call State\n */\nconst useCallMembers = () => {\n    const { members$ } = useCallState();\n    return useObservableValue(members$);\n};\n/**\n * Utility hook providing the current calling state of the call. For example, `RINGING` or `JOINED`.\n *\n * @category Call State\n */\nconst useCallCallingState = () => {\n    const { callingState$ } = useCallState();\n    return useObservableValue(callingState$);\n};\n/**\n * Utility hook providing the actual start time of the current session.\n * Useful for calculating the call duration.\n *\n * @category Call State\n */\nconst useCallStartedAt = () => {\n    const { startedAt$ } = useCallState();\n    return useObservableValue(startedAt$);\n};\n/**\n * A hook which provides a list of all participants that have joined an active call.\n *\n * @category Call State\n *\n * @param options.sortBy - A comparator function to sort the participants by.\n * Make sure to memoize output of the `combineComparators` function\n * (or keep it out of component's scope if possible) before passing it down to this property.\n */\nconst useParticipants = ({ sortBy, } = {}) => {\n    const { participants$ } = useCallState();\n    const participants = useObservableValue(participants$);\n    return (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => {\n        if (sortBy) {\n            return [...participants].sort(sortBy);\n        }\n        return participants;\n    }, [participants, sortBy]);\n};\n/**\n * A hook which provides a StreamVideoLocalParticipant object.\n * It signals that I have joined a call.\n *\n * @category Call State\n */\nconst useLocalParticipant = () => {\n    const { localParticipant$ } = useCallState();\n    return useObservableValue(localParticipant$);\n};\n/**\n * A hook which provides a list of all other participants than me that have joined an active call.\n *\n * @category Call State\n */\nconst useRemoteParticipants = () => {\n    const { remoteParticipants$ } = useCallState();\n    return useObservableValue(remoteParticipants$);\n};\n/**\n * Returns the approximate participant count of the active call.\n * This includes the anonymous users as well, and it is computed on the server.\n *\n * @category Call State\n */\nconst useParticipantCount = () => {\n    const { participantCount$ } = useCallState();\n    return useObservableValue(participantCount$);\n};\n/**\n * Returns the approximate anonymous participant count of the active call.\n * The regular participants are not included in this count. It is computed on the server.\n *\n * @category Call State\n */\nconst useAnonymousParticipantCount = () => {\n    const { anonymousParticipantCount$ } = useCallState();\n    return useObservableValue(anonymousParticipantCount$);\n};\n/**\n * Returns the generated thumbnail of the current call, if enabled in settings.\n */\nconst useCallThumbnail = () => {\n    const { thumbnails$ } = useCallState();\n    return useObservableValue(thumbnails$);\n};\n/**\n * A hook which returns the local participant's own capabilities.\n */\nconst useOwnCapabilities = () => {\n    const { ownCapabilities$ } = useCallState();\n    return useObservableValue(ownCapabilities$);\n};\n/**\n * Hook that returns true if the local participant has all the given permissions.\n *\n * @param permissions the permissions to check.\n */\nconst useHasPermissions = (...permissions) => {\n    const capabilities = useOwnCapabilities();\n    return permissions.every((permission) => capabilities?.includes(permission));\n};\n/**\n * Returns the camera state of the current call.\n *\n * @category Camera Manager State\n *\n */\nconst useCameraState = () => {\n    const call = useCall();\n    const { camera } = call;\n    const devices$ = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => camera.listDevices(), [camera]);\n    const { state } = camera;\n    const status = useObservableValue(state.status$);\n    const direction = useObservableValue(state.direction$);\n    const mediaStream = useObservableValue(state.mediaStream$);\n    const selectedDevice = useObservableValue(state.selectedDevice$);\n    const devices = useObservableValue(devices$);\n    const hasBrowserPermission = useObservableValue(state.hasBrowserPermission$);\n    const isMute = status !== 'enabled';\n    return {\n        camera,\n        status,\n        isEnabled: status === 'enabled',\n        direction,\n        mediaStream,\n        devices,\n        hasBrowserPermission,\n        selectedDevice,\n        isMute,\n    };\n};\n/**\n * Returns the microphone state of the current call.\n *\n * @category Microphone Manager State\n */\nconst useMicrophoneState = () => {\n    const call = useCall();\n    const { microphone } = call;\n    const devices$ = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => microphone.listDevices(), [microphone]);\n    const { state } = microphone;\n    const status = useObservableValue(state.status$);\n    const mediaStream = useObservableValue(state.mediaStream$);\n    const selectedDevice = useObservableValue(state.selectedDevice$);\n    const devices = useObservableValue(devices$);\n    const hasBrowserPermission = useObservableValue(state.hasBrowserPermission$);\n    const isSpeakingWhileMuted = useObservableValue(state.speakingWhileMuted$);\n    const isMute = status !== 'enabled';\n    return {\n        microphone,\n        status,\n        isEnabled: status === 'enabled',\n        mediaStream,\n        devices,\n        selectedDevice,\n        hasBrowserPermission,\n        isSpeakingWhileMuted,\n        isMute,\n    };\n};\n/**\n * Returns the speaker state of the current call.\n */\nconst useSpeakerState = () => {\n    const call = useCall();\n    const { speaker } = call;\n    const devices$ = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => speaker.listDevices(), [speaker]);\n    const devices = useObservableValue(devices$);\n    const selectedDevice = useObservableValue(speaker.state.selectedDevice$);\n    return {\n        speaker,\n        devices,\n        selectedDevice,\n        isDeviceSelectionSupported: speaker.state.isDeviceSelectionSupported,\n    };\n};\n/**\n * Returns the Screen Share state of the current call.\n */\nconst useScreenShareState = () => {\n    const call = useCall();\n    const { screenShare } = call;\n    const status = useObservableValue(screenShare.state.status$);\n    const mediaStream = useObservableValue(screenShare.state.mediaStream$);\n    const isMute = status !== 'enabled';\n    return {\n        screenShare,\n        mediaStream,\n        status,\n        isMute,\n    };\n};\n\nvar CallStateHooks = /*#__PURE__*/Object.freeze({\n    __proto__: null,\n    useAnonymousParticipantCount: useAnonymousParticipantCount,\n    useCallBlockedUserIds: useCallBlockedUserIds,\n    useCallCallingState: useCallCallingState,\n    useCallCreatedAt: useCallCreatedAt,\n    useCallCreatedBy: useCallCreatedBy,\n    useCallCustomData: useCallCustomData,\n    useCallEgress: useCallEgress,\n    useCallEndedAt: useCallEndedAt,\n    useCallEndedBy: useCallEndedBy,\n    useCallIngress: useCallIngress,\n    useCallMembers: useCallMembers,\n    useCallSession: useCallSession,\n    useCallSettings: useCallSettings,\n    useCallStartedAt: useCallStartedAt,\n    useCallStartsAt: useCallStartsAt,\n    useCallState: useCallState,\n    useCallStatsReport: useCallStatsReport,\n    useCallThumbnail: useCallThumbnail,\n    useCallUpdatedAt: useCallUpdatedAt,\n    useCameraState: useCameraState,\n    useDominantSpeaker: useDominantSpeaker,\n    useHasOngoingScreenShare: useHasOngoingScreenShare,\n    useHasPermissions: useHasPermissions,\n    useIsCallHLSBroadcastingInProgress: useIsCallHLSBroadcastingInProgress,\n    useIsCallLive: useIsCallLive,\n    useIsCallRecordingInProgress: useIsCallRecordingInProgress,\n    useIsCallTranscribingInProgress: useIsCallTranscribingInProgress,\n    useLocalParticipant: useLocalParticipant,\n    useMicrophoneState: useMicrophoneState,\n    useOwnCapabilities: useOwnCapabilities,\n    useParticipantCount: useParticipantCount,\n    useParticipants: useParticipants,\n    useRemoteParticipants: useRemoteParticipants,\n    useScreenShareState: useScreenShareState,\n    useSpeakerState: useSpeakerState\n});\n\n/**\n * Utility hook which provides access to client's state store.\n */\nconst useStore = () => {\n    const client = useStreamVideoClient();\n    if (!client) {\n        throw new Error(`StreamVideoClient isn't initialized or this hook is called outside of <StreamVideo> context.`);\n    }\n    return client.readOnlyStateStore;\n};\n/**\n * Utility hook which provides a list of all notifications about created calls.\n * In the ring call settings, these calls can be outgoing (I have called somebody)\n * or incoming (somebody has called me).\n *\n * @category Client State\n */\nconst useCalls = () => {\n    const { calls$ } = useStore();\n    return useObservableValue(calls$);\n};\n/**\n * Returns the current connected user.\n *\n * @category Client State\n */\nconst useConnectedUser = () => {\n    const { connectedUser$ } = useStore();\n    return useObservableValue(connectedUser$);\n};\n\n/**\n * A hook-alike function that exposes all call state hooks.\n *\n * @category Call State\n */\nconst useCallStateHooks = () => CallStateHooks;\n\nconst Restricted = ({ canRequestOnly, hasPermissionsOnly, requiredGrants, requireAll = true, children, }) => {\n    const call = useCall();\n    const { useCallSettings, useOwnCapabilities } = useCallStateHooks();\n    const ownCapabilities = useOwnCapabilities();\n    const settings = useCallSettings();\n    const hasPermissions = requiredGrants[requireAll ? 'every' : 'some']((capability) => ownCapabilities?.includes(capability));\n    if (hasPermissionsOnly)\n        return hasPermissions ? (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, { children: children }) : null;\n    const canRequest = requiredGrants.some((capability) => call?.permissionsContext.canRequest(capability, settings));\n    if (canRequestOnly)\n        return canRequest ? (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, { children: children }) : null;\n    if (hasPermissions || canRequest)\n        return (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, { children: children });\n    return null;\n};\n\n\n//# sourceMappingURL=index.es.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHN0cmVhbS1pby92aWRlby1yZWFjdC1iaW5kaW5ncy9kaXN0L2luZGV4LmVzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQWtEO0FBQzhCO0FBQ2xEO0FBQytCOztBQUU3RCwwQkFBMEIsb0RBQWE7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGlCQUFpQjtBQUM3QixZQUFZLHNEQUFHLCtCQUErQixpQ0FBaUM7QUFDL0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsaURBQVU7QUFDckI7O0FBRUE7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxDQUFDLElBQUk7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0Q7QUFDdEQ7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0VBQW9FLGtCQUFrQjtBQUN0RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELG9CQUFvQjtBQUN0RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQiw2SkFBNko7QUFDN0ssNEJBQTRCLDhEQUFzQjtBQUNsRDtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsb0JBQW9CO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsMkRBQTJELG1CQUFtQjtBQUM5RSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDBCQUEwQixvREFBYTtBQUN2QztBQUNBLENBQUM7QUFDRCw4QkFBOEIsK0JBQStCO0FBQzdELFlBQVksVUFBVTtBQUN0QixZQUFZLHNEQUFHLCtCQUErQixTQUFTLFNBQVMsc0JBQXNCO0FBQ3RGO0FBQ0EseUJBQXlCLGtFQUFrRTtBQUMzRixtQkFBbUIsK0NBQVE7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Qsa0NBQWtDLCtDQUFRO0FBQzFDLElBQUksZ0RBQVM7QUFDYixnQkFBZ0IsZ0JBQWdCO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsS0FBSztBQUNMLGFBQWE7QUFDYjtBQUNBLHNCQUFzQixpREFBVTs7QUFFaEMsMkJBQTJCLG9EQUFhO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixrRUFBa0U7QUFDakcsWUFBWSxzREFBRyxnQ0FBZ0MseUJBQXlCLHNEQUFHLHVCQUF1QixrSEFBa0gsR0FBRztBQUN2TjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxpREFBVTtBQUNyQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLCtDQUFRLE9BQU8sNERBQU87QUFDcEQsSUFBSSxnREFBUztBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsOERBQVM7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxhQUFhO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFVBQVU7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksYUFBYTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksa0JBQWtCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksYUFBYTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFdBQVc7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxZQUFZO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksYUFBYTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGFBQWE7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxVQUFVO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksVUFBVTtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFdBQVc7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxXQUFXO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksWUFBWTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGdCQUFnQjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFdBQVc7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSx5QkFBeUI7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxtQkFBbUI7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksbUJBQW1CO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFdBQVc7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksZ0JBQWdCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksYUFBYTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLFVBQVUsSUFBSTtBQUN6QyxZQUFZLGdCQUFnQjtBQUM1QjtBQUNBLFdBQVcsOENBQU87QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksb0JBQW9CO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHNCQUFzQjtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLG9CQUFvQjtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLDZCQUE2QjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGNBQWM7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxtQkFBbUI7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFNBQVM7QUFDckIscUJBQXFCLDhDQUFPO0FBQzVCLFlBQVksUUFBUTtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxhQUFhO0FBQ3pCLHFCQUFxQiw4Q0FBTztBQUM1QixZQUFZLFFBQVE7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxVQUFVO0FBQ3RCLHFCQUFxQiw4Q0FBTztBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxjQUFjO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFNBQVM7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksaUJBQWlCO0FBQzdCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHNCQUFzQixrRkFBa0Y7QUFDeEc7QUFDQSxZQUFZLHNDQUFzQztBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxzREFBRyxDQUFDLHVEQUFRLElBQUksb0JBQW9CO0FBQ3BFO0FBQ0E7QUFDQSw0QkFBNEIsc0RBQUcsQ0FBQyx1REFBUSxJQUFJLG9CQUFvQjtBQUNoRTtBQUNBLGVBQWUsc0RBQUcsQ0FBQyx1REFBUSxJQUFJLG9CQUFvQjtBQUNuRDtBQUNBOztBQUUrUjtBQUMvUiIsInNvdXJjZXMiOlsid2VicGFjazovL0hhTWVldHovLi9ub2RlX21vZHVsZXMvQHN0cmVhbS1pby92aWRlby1yZWFjdC1iaW5kaW5ncy9kaXN0L2luZGV4LmVzLmpzP2I4MjEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsganN4LCBGcmFnbWVudCB9IGZyb20gJ3JlYWN0L2pzeC1ydW50aW1lJztcbmltcG9ydCB7IGNyZWF0ZUNvbnRleHQsIHVzZUNvbnRleHQsIHVzZVN0YXRlLCB1c2VFZmZlY3QsIHVzZU1lbW8gfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgaTE4bmV4dCBmcm9tICdpMThuZXh0JztcbmltcG9ydCB7IFJ4VXRpbHMsIENhbGxTdGF0ZSB9IGZyb20gJ0BzdHJlYW0taW8vdmlkZW8tY2xpZW50JztcblxuY29uc3QgU3RyZWFtQ2FsbENvbnRleHQgPSBjcmVhdGVDb250ZXh0KHVuZGVmaW5lZCk7XG4vKipcbiAqIEEgcHJvdmlkZXIgZm9yIHRoZSBjYWxsIG9iamVjdC5cbiAqL1xuY29uc3QgU3RyZWFtQ2FsbFByb3ZpZGVyID0gKHByb3BzKSA9PiB7XG4gICAgY29uc3QgeyBjYWxsLCBjaGlsZHJlbiB9ID0gcHJvcHM7XG4gICAgcmV0dXJuIChqc3goU3RyZWFtQ2FsbENvbnRleHQuUHJvdmlkZXIsIHsgdmFsdWU6IGNhbGwsIGNoaWxkcmVuOiBjaGlsZHJlbiB9KSk7XG59O1xuLyoqXG4gKiBBIGhvb2sgdG8gZ2V0IHRoZSBjYWxsIG9iamVjdCBmcm9tIHRoZSBjbG9zZXN0IHByb3ZpZGVyLlxuICovXG5jb25zdCB1c2VDYWxsID0gKCkgPT4ge1xuICAgIHJldHVybiB1c2VDb250ZXh0KFN0cmVhbUNhbGxDb250ZXh0KTtcbn07XG5cbmNvbnN0IG1hcFRvUmVnaXN0cnkgPSAodHJhbnNsYXRpb25zTWFwLCBuYW1lc3BhY2UpID0+IE9iamVjdC5lbnRyaWVzKHRyYW5zbGF0aW9uc01hcCkucmVkdWNlKChhY2MsIFtsbmcsIHRyYW5zbGF0aW9uc10pID0+IHtcbiAgICBhY2NbbG5nXSA9IHsgW25hbWVzcGFjZV06IHRyYW5zbGF0aW9ucyB9O1xuICAgIHJldHVybiBhY2M7XG59LCB7fSk7XG5cbmNvbnN0IERFRkFVTFRfTEFOR1VBR0UgPSAnZW4nO1xuY29uc3QgREVGQVVMVF9OQU1FU1BBQ0UgPSAnc3RyZWFtLXZpZGVvJztcbmNvbnN0IERFRkFVTFRfQ09ORklHID0ge1xuICAgIGRlYnVnOiBmYWxzZSxcbiAgICBjdXJyZW50TGFuZ3VhZ2U6IERFRkFVTFRfTEFOR1VBR0UsXG4gICAgZmFsbGJhY2tMYW5ndWFnZTogZmFsc2UsXG59O1xuY29uc3QgREVGQVVMVF9UUkFOU0xBVElPTlNfUkVHSVNUUlkgPSBtYXBUb1JlZ2lzdHJ5KHt9LCBERUZBVUxUX05BTUVTUEFDRSk7XG5jb25zdCBkZWZhdWx0VHJhbnNsYXRpb25GdW5jdGlvbiA9IChrZXkpID0+IGtleTtcbmNsYXNzIFN0cmVhbUkxOG4ge1xuICAgIC8qKiBTaW1wbGUgbG9nZ2VyIGZ1bmN0aW9uICovXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIC8qKiBUcmFuc2xhdG9yIGZ1bmN0aW9uIHRoYXQgY29udmVydHMgdGhlIHByb3ZpZGVkIHN0cmluZyBpbnRvIGl0cyBlcXVpdmFsZW50IGluIHRoZSBjdXJyZW50IGxhbmd1YWdlLiAqL1xuICAgICAgICB0aGlzLnQgPSBkZWZhdWx0VHJhbnNsYXRpb25GdW5jdGlvbjtcbiAgICAgICAgdGhpcy5pbml0ID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLnQgPSBhd2FpdCB0aGlzLmkxOG5JbnN0YW5jZS5pbml0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBpbml0aWFsaXplIHRyYW5zbGF0aW9uczogJHtKU09OLnN0cmluZ2lmeShlKX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmNoYW5nZUxhbmd1YWdlID0gYXN5bmMgKGxhbmd1YWdlLCBvbkNoYW5nZSkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLl9jaGVja0lzSW5pdGlhbGl6ZWQoKSlcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAvLyBpMThuZXh0IGRldGVjdHMgdGhlIGxhbmd1YWdlLCBpZiBub25lIHByb3ZpZGVkLCBidXQgaXQgaXMgYmV0dGVyXG4gICAgICAgICAgICAvLyB0byBzaG93IHRoaXMgZGV0ZWN0aW9uIGhlcmUgZXhwbGljaXRseVxuICAgICAgICAgICAgY29uc3QgYnJvd3Nlckxhbmd1YWdlID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93Lm5hdmlnYXRvclxuICAgICAgICAgICAgICAgID8gd2luZG93Lm5hdmlnYXRvci5sYW5ndWFnZVxuICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5pMThuSW5zdGFuY2UuY2hhbmdlTGFuZ3VhZ2UobGFuZ3VhZ2UgfHwgYnJvd3Nlckxhbmd1YWdlKTtcbiAgICAgICAgICAgIG9uQ2hhbmdlPy4odGhpcy5jdXJyZW50TGFuZ3VhZ2UpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnJlZ2lzdGVyVHJhbnNsYXRpb25zRm9yTGFuZ3VhZ2UgPSAoeyBsbmcsIHRyYW5zbGF0aW9ucywgfSkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLl9jaGVja0lzSW5pdGlhbGl6ZWQoKSlcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB0aGlzLmkxOG5JbnN0YW5jZS5hZGRSZXNvdXJjZUJ1bmRsZShsbmcsIERFRkFVTFRfTkFNRVNQQUNFLCB0cmFuc2xhdGlvbnMsIHRydWUsIHRydWUpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLl9jaGVja0lzSW5pdGlhbGl6ZWQgPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaTE4bkluc3RhbmNlLmlzSW5pdGlhbGl6ZWQpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ0kxOG4gaW5zdGFuY2UgaXMgbm90IGluaXRpYWxpemVkLiBDYWxsIHlvdXJTdHJlYW1JMThuSW5zdGFuY2UuaW5pdCgpLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaTE4bkluc3RhbmNlLmlzSW5pdGlhbGl6ZWQ7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHsgZGVidWcgPSBERUZBVUxUX0NPTkZJRy5kZWJ1ZywgY3VycmVudExhbmd1YWdlID0gREVGQVVMVF9DT05GSUcuY3VycmVudExhbmd1YWdlLCBmYWxsYmFja0xhbmd1YWdlID0gREVGQVVMVF9DT05GSUcuZmFsbGJhY2tMYW5ndWFnZSwgdHJhbnNsYXRpb25zT3ZlcnJpZGVzLCB9ID0gb3B0aW9ucztcbiAgICAgICAgdGhpcy5pMThuSW5zdGFuY2UgPSBpMThuZXh0LmNyZWF0ZUluc3RhbmNlKHtcbiAgICAgICAgICAgIGRlYnVnLFxuICAgICAgICAgICAgZGVmYXVsdE5TOiBERUZBVUxUX05BTUVTUEFDRSxcbiAgICAgICAgICAgIGZhbGxiYWNrTG5nOiBmYWxsYmFja0xhbmd1YWdlLFxuICAgICAgICAgICAgaW50ZXJwb2xhdGlvbjogeyBlc2NhcGVWYWx1ZTogZmFsc2UgfSxcbiAgICAgICAgICAgIGtleVNlcGFyYXRvcjogZmFsc2UsXG4gICAgICAgICAgICBsbmc6IGN1cnJlbnRMYW5ndWFnZSxcbiAgICAgICAgICAgIG5zU2VwYXJhdG9yOiBmYWxzZSxcbiAgICAgICAgICAgIHBhcnNlTWlzc2luZ0tleUhhbmRsZXI6IChrZXkpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4ga2V5O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJlc291cmNlczogREVGQVVMVF9UUkFOU0xBVElPTlNfUkVHSVNUUlksXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodHJhbnNsYXRpb25zT3ZlcnJpZGVzKSB7XG4gICAgICAgICAgICB0aGlzLmkxOG5JbnN0YW5jZS5vbignaW5pdGlhbGl6ZWQnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmVudHJpZXModHJhbnNsYXRpb25zT3ZlcnJpZGVzKS5mb3JFYWNoKChbbG5nLCB0cmFuc2xhdGlvbnNdKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJUcmFuc2xhdGlvbnNGb3JMYW5ndWFnZSh7IGxuZywgdHJhbnNsYXRpb25zIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGN1cnJlbnRMYW5ndWFnZSgpIHtcbiAgICAgICAgdGhpcy5fY2hlY2tJc0luaXRpYWxpemVkKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmkxOG5JbnN0YW5jZS5sYW5ndWFnZTtcbiAgICB9XG4gICAgZ2V0IGlzSW5pdGlhbGl6ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmkxOG5JbnN0YW5jZS5pc0luaXRpYWxpemVkO1xuICAgIH1cbn1cblxuY29uc3QgU3RyZWFtSTE4bkNvbnRleHQgPSBjcmVhdGVDb250ZXh0KHtcbiAgICB0OiBkZWZhdWx0VHJhbnNsYXRpb25GdW5jdGlvbixcbn0pO1xuY29uc3QgU3RyZWFtSTE4blByb3ZpZGVyID0gKHsgY2hpbGRyZW4sIC4uLmNyZWF0ZUkxOG5QYXJhbXMgfSkgPT4ge1xuICAgIGNvbnN0IHsgaTE4biwgdCB9ID0gdXNlQ3JlYXRlSTE4bihjcmVhdGVJMThuUGFyYW1zKTtcbiAgICByZXR1cm4gKGpzeChTdHJlYW1JMThuQ29udGV4dC5Qcm92aWRlciwgeyB2YWx1ZTogeyB0LCBpMThuIH0sIGNoaWxkcmVuOiBjaGlsZHJlbiB9KSk7XG59O1xuY29uc3QgdXNlQ3JlYXRlSTE4biA9ICh7IGkxOG5JbnN0YW5jZSwgbGFuZ3VhZ2UsIGZhbGxiYWNrTGFuZ3VhZ2UsIHRyYW5zbGF0aW9uc092ZXJyaWRlcywgfSkgPT4ge1xuICAgIGNvbnN0IFtpMThuXSA9IHVzZVN0YXRlKCgpID0+IGkxOG5JbnN0YW5jZSB8fFxuICAgICAgICBuZXcgU3RyZWFtSTE4bih7XG4gICAgICAgICAgICBjdXJyZW50TGFuZ3VhZ2U6IGxhbmd1YWdlLFxuICAgICAgICAgICAgZmFsbGJhY2tMYW5ndWFnZSxcbiAgICAgICAgICAgIHRyYW5zbGF0aW9uc092ZXJyaWRlcyxcbiAgICAgICAgfSkpO1xuICAgIGNvbnN0IFt0LCBzZXRUcmFuc2xhdGlvbkZuXSA9IHVzZVN0YXRlKCgpID0+IGRlZmF1bHRUcmFuc2xhdGlvbkZ1bmN0aW9uKTtcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBjb25zdCB7IGlzSW5pdGlhbGl6ZWQgfSA9IGkxOG47XG4gICAgICAgIGlmICghaXNJbml0aWFsaXplZCkge1xuICAgICAgICAgICAgaTE4bi5pbml0KCkudGhlbigoX2kxOG4pID0+IHNldFRyYW5zbGF0aW9uRm4oKCkgPT4gX2kxOG4uaTE4bkluc3RhbmNlLnQpKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAobGFuZ3VhZ2UgJiYgaTE4bj8uY3VycmVudExhbmd1YWdlICE9PSBsYW5ndWFnZSkge1xuICAgICAgICAgICAgaTE4bi5jaGFuZ2VMYW5ndWFnZShsYW5ndWFnZSkuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdFcnJvciB3aGlsZSBjaGFuZ2luZyBsYW5ndWFnZScsIGVycik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sIFtpMThuLCBpMThuSW5zdGFuY2UsIGxhbmd1YWdlLCB0cmFuc2xhdGlvbnNPdmVycmlkZXNdKTtcbiAgICByZXR1cm4geyBpMThuLCB0IH07XG59O1xuY29uc3QgdXNlSTE4biA9ICgpID0+IHVzZUNvbnRleHQoU3RyZWFtSTE4bkNvbnRleHQpO1xuXG5jb25zdCBTdHJlYW1WaWRlb0NvbnRleHQgPSBjcmVhdGVDb250ZXh0KHVuZGVmaW5lZCk7XG4vKipcbiAqIFN0cmVhbVZpZGVvIGlzIGEgcHJvdmlkZXIgY29tcG9uZW50IHdoaWNoIHNob3VsZCBiZSB1c2VkIHRvIHdyYXAgdGhlIGVudGlyZSBhcHBsaWNhdGlvbi5cbiAqIEl0IHByb3ZpZGVzIHRoZSBjbGllbnQgb2JqZWN0IHRvIGFsbCBjaGlsZHJlbiBjb21wb25lbnRzIGFuZCBpbml0aWFsaXplcyB0aGUgaTE4biBpbnN0YW5jZS5cbiAqICBAcGFyYW0gUHJvcHNXaXRoQ2hpbGRyZW48U3RyZWFtVmlkZW9Qcm9wcz5cbiAqICBAY2F0ZWdvcnkgQ2xpZW50IFN0YXRlXG4gKi9cbmNvbnN0IFN0cmVhbVZpZGVvUHJvdmlkZXIgPSAoeyBjaGlsZHJlbiwgY2xpZW50LCBpMThuSW5zdGFuY2UsIGxhbmd1YWdlLCB0cmFuc2xhdGlvbnNPdmVycmlkZXMsIH0pID0+IHtcbiAgICByZXR1cm4gKGpzeChTdHJlYW1WaWRlb0NvbnRleHQuUHJvdmlkZXIsIHsgdmFsdWU6IGNsaWVudCwgY2hpbGRyZW46IGpzeChTdHJlYW1JMThuUHJvdmlkZXIsIHsgaTE4bkluc3RhbmNlOiBpMThuSW5zdGFuY2UsIGxhbmd1YWdlOiBsYW5ndWFnZSwgdHJhbnNsYXRpb25zT3ZlcnJpZGVzOiB0cmFuc2xhdGlvbnNPdmVycmlkZXMsIGNoaWxkcmVuOiBjaGlsZHJlbiB9KSB9KSk7XG59O1xuLyoqXG4gKlxuICogQHJldHVybnNcbiAqXG4gKiBAY2F0ZWdvcnkgQ2xpZW50IFN0YXRlXG4gKi9cbmNvbnN0IHVzZVN0cmVhbVZpZGVvQ2xpZW50ID0gKCkgPT4ge1xuICAgIHJldHVybiB1c2VDb250ZXh0KFN0cmVhbVZpZGVvQ29udGV4dCk7XG59O1xuXG4vKipcbiAqIFV0aWxpdHkgaG9vayB3aGljaCBwcm92aWRlcyB0aGUgY3VycmVudCB2YWx1ZSBvZiB0aGUgZ2l2ZW4gb2JzZXJ2YWJsZS5cbiAqIEBpbnRlcm5hbFxuICovXG5jb25zdCB1c2VPYnNlcnZhYmxlVmFsdWUgPSAob2JzZXJ2YWJsZSQpID0+IHtcbiAgICBjb25zdCBbdmFsdWUsIHNldFZhbHVlXSA9IHVzZVN0YXRlKCgpID0+IFJ4VXRpbHMuZ2V0Q3VycmVudFZhbHVlKG9ic2VydmFibGUkKSk7XG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgY29uc3Qgc3Vic2NyaXB0aW9uID0gb2JzZXJ2YWJsZSQuc3Vic2NyaWJlKHNldFZhbHVlKTtcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICB9O1xuICAgIH0sIFtvYnNlcnZhYmxlJF0pO1xuICAgIHJldHVybiB2YWx1ZTtcbn07XG5cbi8qKlxuICogVXRpbGl0eSBob29rLCB3aGljaCBwcm92aWRlcyB0aGUgY3VycmVudCBjYWxsJ3Mgc3RhdGUuXG4gKlxuICogQGNhdGVnb3J5IENhbGwgU3RhdGVcbiAqL1xuY29uc3QgdXNlQ2FsbFN0YXRlID0gKCkgPT4ge1xuICAgIGNvbnN0IGNhbGwgPSB1c2VDYWxsKCk7XG4gICAgLy8gcmV0dXJuIGFuIGVtcHR5IGFuZCB1bmxpbmtlZCBDYWxsU3RhdGUgb2JqZWN0IGlmIHRoZXJlIGlzIG5vIGNhbGwgaW4gdGhlIHByb3ZpZGVyXG4gICAgLy8gdGhpcyBlbnN1cmVzIHRoYXQgdGhlIGhvb2tzIGFsd2F5cyByZXR1cm4gYSB2YWx1ZSBhbmQgbWFueSBudWxsIGNoZWNrcyBjYW4gYmUgYXZvaWRlZFxuICAgIGlmICghY2FsbCkge1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gJ1lvdSBhcmUgdXNpbmcgdXNlQ2FsbFN0YXRlKCkgb3V0c2lkZSBhIENhbGwgY29udGV4dC4gJyArXG4gICAgICAgICAgICAnUGxlYXNlIHdyYXAgeW91ciBjb21wb25lbnQgaW4gPFN0cmVhbUNhbGwgLz4gYW5kIHByb3ZpZGUgYSBcImNhbGxcIiBpbnN0YW5jZS4nO1xuICAgICAgICBjb25zb2xlLndhcm4obWVzc2FnZSk7XG4gICAgICAgIHJldHVybiBuZXcgQ2FsbFN0YXRlKCk7XG4gICAgfVxuICAgIHJldHVybiBjYWxsLnN0YXRlO1xufTtcbi8qKlxuICogVXRpbGl0eSBob29rIHdoaWNoIHByb3ZpZGVzIGluZm9ybWF0aW9uIHdoZXRoZXIgdGhlIGN1cnJlbnQgY2FsbCBpcyBiZWluZyByZWNvcmRlZC4gSXQgd2lsbCByZXR1cm4gYHRydWVgIGlmIHRoZSBjYWxsIGlzIGJlaW5nIHJlY29yZGVkLlxuICpcbiAqIEBjYXRlZ29yeSBDYWxsIFN0YXRlXG4gKi9cbmNvbnN0IHVzZUlzQ2FsbFJlY29yZGluZ0luUHJvZ3Jlc3MgPSAoKSA9PiB7XG4gICAgY29uc3QgeyByZWNvcmRpbmckIH0gPSB1c2VDYWxsU3RhdGUoKTtcbiAgICByZXR1cm4gdXNlT2JzZXJ2YWJsZVZhbHVlKHJlY29yZGluZyQpO1xufTtcbi8qKlxuICogVXRpbGl0eSBob29rIHdoaWNoIHByb3ZpZGVzIGluZm9ybWF0aW9uIHdoZXRoZXIgdGhlIGN1cnJlbnQgY2FsbCBpcyBicm9hZGNhc3RpbmcuXG4gKlxuICogQGNhdGVnb3J5IENhbGwgU3RhdGVcbiAqL1xuY29uc3QgdXNlSXNDYWxsSExTQnJvYWRjYXN0aW5nSW5Qcm9ncmVzcyA9ICgpID0+IHtcbiAgICBjb25zdCB7IGVncmVzcyQgfSA9IHVzZUNhbGxTdGF0ZSgpO1xuICAgIGNvbnN0IGVncmVzcyA9IHVzZU9ic2VydmFibGVWYWx1ZShlZ3Jlc3MkKTtcbiAgICBpZiAoIWVncmVzcylcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiBlZ3Jlc3MuYnJvYWRjYXN0aW5nO1xufTtcbi8qKlxuICogVXRpbGl0eSBob29rIHdoaWNoIHByb3ZpZGVzIGluZm9ybWF0aW9uIHdoZXRoZXIgdGhlIGN1cnJlbnQgY2FsbCBpcyBsaXZlLlxuICpcbiAqIEBjYXRlZ29yeSBDYWxsIFN0YXRlXG4gKi9cbmNvbnN0IHVzZUlzQ2FsbExpdmUgPSAoKSA9PiB7XG4gICAgY29uc3QgeyBiYWNrc3RhZ2UkIH0gPSB1c2VDYWxsU3RhdGUoKTtcbiAgICBjb25zdCBpc0JhY2tzdGFnZU9uID0gdXNlT2JzZXJ2YWJsZVZhbHVlKGJhY2tzdGFnZSQpO1xuICAgIHJldHVybiAhaXNCYWNrc3RhZ2VPbjtcbn07XG4vKipcbiAqIFJldHVybnMgdGhlIGxpc3Qgb2YgYmxvY2tlZCB1c2VycyBpbiB0aGUgY3VycmVudCBjYWxsLlxuICovXG5jb25zdCB1c2VDYWxsQmxvY2tlZFVzZXJJZHMgPSAoKSA9PiB7XG4gICAgY29uc3QgeyBibG9ja2VkVXNlcklkcyQgfSA9IHVzZUNhbGxTdGF0ZSgpO1xuICAgIHJldHVybiB1c2VPYnNlcnZhYmxlVmFsdWUoYmxvY2tlZFVzZXJJZHMkKTtcbn07XG4vKipcbiAqIFJldHVybnMgdGhlIHRpbWVzdGFtcCB3aGVuIHRoaXMgY2FsbCB3YXMgY3JlYXRlZC5cbiAqL1xuY29uc3QgdXNlQ2FsbENyZWF0ZWRBdCA9ICgpID0+IHtcbiAgICBjb25zdCB7IGNyZWF0ZWRBdCQgfSA9IHVzZUNhbGxTdGF0ZSgpO1xuICAgIHJldHVybiB1c2VPYnNlcnZhYmxlVmFsdWUoY3JlYXRlZEF0JCk7XG59O1xuLyoqXG4gKiBSZXR1cm5zIHRoZSB0aW1lc3RhbXAgd2hlbiB0aGlzIGNhbGwgd2FzIGVuZGVkLlxuICovXG5jb25zdCB1c2VDYWxsRW5kZWRBdCA9ICgpID0+IHtcbiAgICBjb25zdCB7IGVuZGVkQXQkIH0gPSB1c2VDYWxsU3RhdGUoKTtcbiAgICByZXR1cm4gdXNlT2JzZXJ2YWJsZVZhbHVlKGVuZGVkQXQkKTtcbn07XG4vKipcbiAqIFJldHVybnMgdGhlIHRpbWVzdGFtcCB0ZWxsaW5nIHdoZW4gdGhlIGNhbGwgaXMgc2NoZWR1bGVkIHRvIHN0YXJ0LlxuICovXG5jb25zdCB1c2VDYWxsU3RhcnRzQXQgPSAoKSA9PiB7XG4gICAgY29uc3QgeyBzdGFydHNBdCQgfSA9IHVzZUNhbGxTdGF0ZSgpO1xuICAgIHJldHVybiB1c2VPYnNlcnZhYmxlVmFsdWUoc3RhcnRzQXQkKTtcbn07XG4vKipcbiAqIFJldHVybnMgdGhlIHRpbWVzdGFtcCB3aGVuIHRoaXMgY2FsbCB3YXMgdXBkYXRlZC5cbiAqL1xuY29uc3QgdXNlQ2FsbFVwZGF0ZWRBdCA9ICgpID0+IHtcbiAgICBjb25zdCB7IHVwZGF0ZWRBdCQgfSA9IHVzZUNhbGxTdGF0ZSgpO1xuICAgIHJldHVybiB1c2VPYnNlcnZhYmxlVmFsdWUodXBkYXRlZEF0JCk7XG59O1xuLyoqXG4gKiBSZXR1cm5zIHRoZSBpbmZvcm1hdGlvbiBhYm91dCB0aGUgY2FsbCdzIGNyZWF0b3IuXG4gKi9cbmNvbnN0IHVzZUNhbGxDcmVhdGVkQnkgPSAoKSA9PiB7XG4gICAgY29uc3QgeyBjcmVhdGVkQnkkIH0gPSB1c2VDYWxsU3RhdGUoKTtcbiAgICByZXR1cm4gdXNlT2JzZXJ2YWJsZVZhbHVlKGNyZWF0ZWRCeSQpO1xufTtcbi8qKlxuICogUmV0dXJucyB0aGUgY2FsbCdzIGN1c3RvbSBkYXRhLlxuICovXG5jb25zdCB1c2VDYWxsQ3VzdG9tRGF0YSA9ICgpID0+IHtcbiAgICBjb25zdCB7IGN1c3RvbSQgfSA9IHVzZUNhbGxTdGF0ZSgpO1xuICAgIHJldHVybiB1c2VPYnNlcnZhYmxlVmFsdWUoY3VzdG9tJCk7XG59O1xuLyoqXG4gKiBSZXR1cm5zIHRoZSBjYWxsJ3MgRWdyZXNzIGluZm9ybWF0aW9uLlxuICovXG5jb25zdCB1c2VDYWxsRWdyZXNzID0gKCkgPT4ge1xuICAgIGNvbnN0IHsgZWdyZXNzJCB9ID0gdXNlQ2FsbFN0YXRlKCk7XG4gICAgcmV0dXJuIHVzZU9ic2VydmFibGVWYWx1ZShlZ3Jlc3MkKTtcbn07XG4vKipcbiAqIFJldHVybnMgdGhlIGNhbGwncyBJbmdyZXNzIGluZm9ybWF0aW9uLlxuICovXG5jb25zdCB1c2VDYWxsSW5ncmVzcyA9ICgpID0+IHtcbiAgICBjb25zdCB7IGluZ3Jlc3MkIH0gPSB1c2VDYWxsU3RhdGUoKTtcbiAgICByZXR1cm4gdXNlT2JzZXJ2YWJsZVZhbHVlKGluZ3Jlc3MkKTtcbn07XG4vKipcbiAqIFJldHVybnMgdGhlIGRhdGEgZm9yIHRoZSBjdXJyZW50IGNhbGwgc2Vzc2lvbi5cbiAqL1xuY29uc3QgdXNlQ2FsbFNlc3Npb24gPSAoKSA9PiB7XG4gICAgY29uc3QgeyBzZXNzaW9uJCB9ID0gdXNlQ2FsbFN0YXRlKCk7XG4gICAgcmV0dXJuIHVzZU9ic2VydmFibGVWYWx1ZShzZXNzaW9uJCk7XG59O1xuLyoqXG4gKiBSZXR1cm5zIHRoZSBjYWxsJ3Mgc2V0dGluZ3MuXG4gKi9cbmNvbnN0IHVzZUNhbGxTZXR0aW5ncyA9ICgpID0+IHtcbiAgICBjb25zdCB7IHNldHRpbmdzJCB9ID0gdXNlQ2FsbFN0YXRlKCk7XG4gICAgcmV0dXJuIHVzZU9ic2VydmFibGVWYWx1ZShzZXR0aW5ncyQpO1xufTtcbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIHRoZSBjYWxsIGhhcyB0cmFuc2NyaWJpbmcgZW5hYmxlZC5cbiAqL1xuY29uc3QgdXNlSXNDYWxsVHJhbnNjcmliaW5nSW5Qcm9ncmVzcyA9ICgpID0+IHtcbiAgICBjb25zdCB7IHRyYW5zY3JpYmluZyQgfSA9IHVzZUNhbGxTdGF0ZSgpO1xuICAgIHJldHVybiB1c2VPYnNlcnZhYmxlVmFsdWUodHJhbnNjcmliaW5nJCk7XG59O1xuLyoqXG4gKiBSZXR1cm5zIGluZm9ybWF0aW9uIGFib3V0IHRoZSB1c2VyIHdobyBoYXMgbWFya2VkIHRoaXMgY2FsbCBhcyBlbmRlZC5cbiAqL1xuY29uc3QgdXNlQ2FsbEVuZGVkQnkgPSAoKSA9PiB7XG4gICAgY29uc3QgeyBlbmRlZEJ5JCB9ID0gdXNlQ2FsbFN0YXRlKCk7XG4gICAgcmV0dXJuIHVzZU9ic2VydmFibGVWYWx1ZShlbmRlZEJ5JCk7XG59O1xuLyoqXG4gKiBVdGlsaXR5IGhvb2sgd2hpY2ggcHJvdmlkZXMgYSBib29sZWFuIGluZGljYXRpbmcgd2hldGhlciB0aGVyZSBpc1xuICogYSBwYXJ0aWNpcGFudCBpbiB0aGUgY3VycmVudCBjYWxsIHdoaWNoIHNoYXJlcyB0aGVpciBzY3JlZW4uXG4gKlxuICogQGNhdGVnb3J5IENhbGwgU3RhdGVcbiAqL1xuY29uc3QgdXNlSGFzT25nb2luZ1NjcmVlblNoYXJlID0gKCkgPT4ge1xuICAgIGNvbnN0IHsgaGFzT25nb2luZ1NjcmVlblNoYXJlJCB9ID0gdXNlQ2FsbFN0YXRlKCk7XG4gICAgcmV0dXJuIHVzZU9ic2VydmFibGVWYWx1ZShoYXNPbmdvaW5nU2NyZWVuU2hhcmUkKTtcbn07XG4vKipcbiAqIFV0aWxpdHkgaG9vayB3aGljaCBwcm92aWRlcyB0aGUgbGF0ZXN0IHN0YXRzIHJlcG9ydCBvZiB0aGUgY3VycmVudCBjYWxsLlxuICpcbiAqIFRoZSBsYXRlc3Qgc3RhdHMgcmVwb3J0IG9mIHRoZSBjdXJyZW50IGNhbGwuXG4gKiBXaGVuIHN0YXRzIGdhdGhlcmluZyBpcyBlbmFibGVkLCB0aGlzIG9ic2VydmFibGUgd2lsbCBlbWl0IGEgbmV3IHZhbHVlXG4gKiBhdCBhIHJlZ3VsYXIgKGNvbmZpZ3VyYWJsZSkgaW50ZXJ2YWwuXG4gKlxuICogQ29uc3VtZXJzIG9mIHRoaXMgb2JzZXJ2YWJsZSBjYW4gaW1wbGVtZW50IHRoZWlyIG93biBiYXRjaGluZyBsb2dpY1xuICogaW4gY2FzZSB0aGV5IHdhbnQgdG8gc2hvdyBoaXN0b3JpY2FsIHN0YXRzIGRhdGEuXG4gKlxuICogQGNhdGVnb3J5IENhbGwgU3RhdGVcbiAqL1xuY29uc3QgdXNlQ2FsbFN0YXRzUmVwb3J0ID0gKCkgPT4ge1xuICAgIGNvbnN0IHsgY2FsbFN0YXRzUmVwb3J0JCB9ID0gdXNlQ2FsbFN0YXRlKCk7XG4gICAgcmV0dXJuIHVzZU9ic2VydmFibGVWYWx1ZShjYWxsU3RhdHNSZXBvcnQkKTtcbn07XG4vKipcbiAqIFV0aWxpdHkgaG9vayB3aGljaCBwcm92aWRlcyB0aGUgZG9taW5hbnQgc3BlYWtlciBvZiB0aGUgY3VycmVudCBjYWxsLlxuICpcbiAqIEBjYXRlZ29yeSBDYWxsIFN0YXRlXG4gKi9cbmNvbnN0IHVzZURvbWluYW50U3BlYWtlciA9ICgpID0+IHtcbiAgICBjb25zdCB7IGRvbWluYW50U3BlYWtlciQgfSA9IHVzZUNhbGxTdGF0ZSgpO1xuICAgIHJldHVybiB1c2VPYnNlcnZhYmxlVmFsdWUoZG9taW5hbnRTcGVha2VyJCk7XG59O1xuLyoqXG4gKiBVdGlsaXR5IGhvb2sgd2hpY2ggcHJvdmlkZXMgYSBsaXN0IG9mIGNhbGwgbWVtYmVycy5cbiAqXG4gKiBAY2F0ZWdvcnkgQ2FsbCBTdGF0ZVxuICovXG5jb25zdCB1c2VDYWxsTWVtYmVycyA9ICgpID0+IHtcbiAgICBjb25zdCB7IG1lbWJlcnMkIH0gPSB1c2VDYWxsU3RhdGUoKTtcbiAgICByZXR1cm4gdXNlT2JzZXJ2YWJsZVZhbHVlKG1lbWJlcnMkKTtcbn07XG4vKipcbiAqIFV0aWxpdHkgaG9vayBwcm92aWRpbmcgdGhlIGN1cnJlbnQgY2FsbGluZyBzdGF0ZSBvZiB0aGUgY2FsbC4gRm9yIGV4YW1wbGUsIGBSSU5HSU5HYCBvciBgSk9JTkVEYC5cbiAqXG4gKiBAY2F0ZWdvcnkgQ2FsbCBTdGF0ZVxuICovXG5jb25zdCB1c2VDYWxsQ2FsbGluZ1N0YXRlID0gKCkgPT4ge1xuICAgIGNvbnN0IHsgY2FsbGluZ1N0YXRlJCB9ID0gdXNlQ2FsbFN0YXRlKCk7XG4gICAgcmV0dXJuIHVzZU9ic2VydmFibGVWYWx1ZShjYWxsaW5nU3RhdGUkKTtcbn07XG4vKipcbiAqIFV0aWxpdHkgaG9vayBwcm92aWRpbmcgdGhlIGFjdHVhbCBzdGFydCB0aW1lIG9mIHRoZSBjdXJyZW50IHNlc3Npb24uXG4gKiBVc2VmdWwgZm9yIGNhbGN1bGF0aW5nIHRoZSBjYWxsIGR1cmF0aW9uLlxuICpcbiAqIEBjYXRlZ29yeSBDYWxsIFN0YXRlXG4gKi9cbmNvbnN0IHVzZUNhbGxTdGFydGVkQXQgPSAoKSA9PiB7XG4gICAgY29uc3QgeyBzdGFydGVkQXQkIH0gPSB1c2VDYWxsU3RhdGUoKTtcbiAgICByZXR1cm4gdXNlT2JzZXJ2YWJsZVZhbHVlKHN0YXJ0ZWRBdCQpO1xufTtcbi8qKlxuICogQSBob29rIHdoaWNoIHByb3ZpZGVzIGEgbGlzdCBvZiBhbGwgcGFydGljaXBhbnRzIHRoYXQgaGF2ZSBqb2luZWQgYW4gYWN0aXZlIGNhbGwuXG4gKlxuICogQGNhdGVnb3J5IENhbGwgU3RhdGVcbiAqXG4gKiBAcGFyYW0gb3B0aW9ucy5zb3J0QnkgLSBBIGNvbXBhcmF0b3IgZnVuY3Rpb24gdG8gc29ydCB0aGUgcGFydGljaXBhbnRzIGJ5LlxuICogTWFrZSBzdXJlIHRvIG1lbW9pemUgb3V0cHV0IG9mIHRoZSBgY29tYmluZUNvbXBhcmF0b3JzYCBmdW5jdGlvblxuICogKG9yIGtlZXAgaXQgb3V0IG9mIGNvbXBvbmVudCdzIHNjb3BlIGlmIHBvc3NpYmxlKSBiZWZvcmUgcGFzc2luZyBpdCBkb3duIHRvIHRoaXMgcHJvcGVydHkuXG4gKi9cbmNvbnN0IHVzZVBhcnRpY2lwYW50cyA9ICh7IHNvcnRCeSwgfSA9IHt9KSA9PiB7XG4gICAgY29uc3QgeyBwYXJ0aWNpcGFudHMkIH0gPSB1c2VDYWxsU3RhdGUoKTtcbiAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSB1c2VPYnNlcnZhYmxlVmFsdWUocGFydGljaXBhbnRzJCk7XG4gICAgcmV0dXJuIHVzZU1lbW8oKCkgPT4ge1xuICAgICAgICBpZiAoc29ydEJ5KSB7XG4gICAgICAgICAgICByZXR1cm4gWy4uLnBhcnRpY2lwYW50c10uc29ydChzb3J0QnkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXJ0aWNpcGFudHM7XG4gICAgfSwgW3BhcnRpY2lwYW50cywgc29ydEJ5XSk7XG59O1xuLyoqXG4gKiBBIGhvb2sgd2hpY2ggcHJvdmlkZXMgYSBTdHJlYW1WaWRlb0xvY2FsUGFydGljaXBhbnQgb2JqZWN0LlxuICogSXQgc2lnbmFscyB0aGF0IEkgaGF2ZSBqb2luZWQgYSBjYWxsLlxuICpcbiAqIEBjYXRlZ29yeSBDYWxsIFN0YXRlXG4gKi9cbmNvbnN0IHVzZUxvY2FsUGFydGljaXBhbnQgPSAoKSA9PiB7XG4gICAgY29uc3QgeyBsb2NhbFBhcnRpY2lwYW50JCB9ID0gdXNlQ2FsbFN0YXRlKCk7XG4gICAgcmV0dXJuIHVzZU9ic2VydmFibGVWYWx1ZShsb2NhbFBhcnRpY2lwYW50JCk7XG59O1xuLyoqXG4gKiBBIGhvb2sgd2hpY2ggcHJvdmlkZXMgYSBsaXN0IG9mIGFsbCBvdGhlciBwYXJ0aWNpcGFudHMgdGhhbiBtZSB0aGF0IGhhdmUgam9pbmVkIGFuIGFjdGl2ZSBjYWxsLlxuICpcbiAqIEBjYXRlZ29yeSBDYWxsIFN0YXRlXG4gKi9cbmNvbnN0IHVzZVJlbW90ZVBhcnRpY2lwYW50cyA9ICgpID0+IHtcbiAgICBjb25zdCB7IHJlbW90ZVBhcnRpY2lwYW50cyQgfSA9IHVzZUNhbGxTdGF0ZSgpO1xuICAgIHJldHVybiB1c2VPYnNlcnZhYmxlVmFsdWUocmVtb3RlUGFydGljaXBhbnRzJCk7XG59O1xuLyoqXG4gKiBSZXR1cm5zIHRoZSBhcHByb3hpbWF0ZSBwYXJ0aWNpcGFudCBjb3VudCBvZiB0aGUgYWN0aXZlIGNhbGwuXG4gKiBUaGlzIGluY2x1ZGVzIHRoZSBhbm9ueW1vdXMgdXNlcnMgYXMgd2VsbCwgYW5kIGl0IGlzIGNvbXB1dGVkIG9uIHRoZSBzZXJ2ZXIuXG4gKlxuICogQGNhdGVnb3J5IENhbGwgU3RhdGVcbiAqL1xuY29uc3QgdXNlUGFydGljaXBhbnRDb3VudCA9ICgpID0+IHtcbiAgICBjb25zdCB7IHBhcnRpY2lwYW50Q291bnQkIH0gPSB1c2VDYWxsU3RhdGUoKTtcbiAgICByZXR1cm4gdXNlT2JzZXJ2YWJsZVZhbHVlKHBhcnRpY2lwYW50Q291bnQkKTtcbn07XG4vKipcbiAqIFJldHVybnMgdGhlIGFwcHJveGltYXRlIGFub255bW91cyBwYXJ0aWNpcGFudCBjb3VudCBvZiB0aGUgYWN0aXZlIGNhbGwuXG4gKiBUaGUgcmVndWxhciBwYXJ0aWNpcGFudHMgYXJlIG5vdCBpbmNsdWRlZCBpbiB0aGlzIGNvdW50LiBJdCBpcyBjb21wdXRlZCBvbiB0aGUgc2VydmVyLlxuICpcbiAqIEBjYXRlZ29yeSBDYWxsIFN0YXRlXG4gKi9cbmNvbnN0IHVzZUFub255bW91c1BhcnRpY2lwYW50Q291bnQgPSAoKSA9PiB7XG4gICAgY29uc3QgeyBhbm9ueW1vdXNQYXJ0aWNpcGFudENvdW50JCB9ID0gdXNlQ2FsbFN0YXRlKCk7XG4gICAgcmV0dXJuIHVzZU9ic2VydmFibGVWYWx1ZShhbm9ueW1vdXNQYXJ0aWNpcGFudENvdW50JCk7XG59O1xuLyoqXG4gKiBSZXR1cm5zIHRoZSBnZW5lcmF0ZWQgdGh1bWJuYWlsIG9mIHRoZSBjdXJyZW50IGNhbGwsIGlmIGVuYWJsZWQgaW4gc2V0dGluZ3MuXG4gKi9cbmNvbnN0IHVzZUNhbGxUaHVtYm5haWwgPSAoKSA9PiB7XG4gICAgY29uc3QgeyB0aHVtYm5haWxzJCB9ID0gdXNlQ2FsbFN0YXRlKCk7XG4gICAgcmV0dXJuIHVzZU9ic2VydmFibGVWYWx1ZSh0aHVtYm5haWxzJCk7XG59O1xuLyoqXG4gKiBBIGhvb2sgd2hpY2ggcmV0dXJucyB0aGUgbG9jYWwgcGFydGljaXBhbnQncyBvd24gY2FwYWJpbGl0aWVzLlxuICovXG5jb25zdCB1c2VPd25DYXBhYmlsaXRpZXMgPSAoKSA9PiB7XG4gICAgY29uc3QgeyBvd25DYXBhYmlsaXRpZXMkIH0gPSB1c2VDYWxsU3RhdGUoKTtcbiAgICByZXR1cm4gdXNlT2JzZXJ2YWJsZVZhbHVlKG93bkNhcGFiaWxpdGllcyQpO1xufTtcbi8qKlxuICogSG9vayB0aGF0IHJldHVybnMgdHJ1ZSBpZiB0aGUgbG9jYWwgcGFydGljaXBhbnQgaGFzIGFsbCB0aGUgZ2l2ZW4gcGVybWlzc2lvbnMuXG4gKlxuICogQHBhcmFtIHBlcm1pc3Npb25zIHRoZSBwZXJtaXNzaW9ucyB0byBjaGVjay5cbiAqL1xuY29uc3QgdXNlSGFzUGVybWlzc2lvbnMgPSAoLi4ucGVybWlzc2lvbnMpID0+IHtcbiAgICBjb25zdCBjYXBhYmlsaXRpZXMgPSB1c2VPd25DYXBhYmlsaXRpZXMoKTtcbiAgICByZXR1cm4gcGVybWlzc2lvbnMuZXZlcnkoKHBlcm1pc3Npb24pID0+IGNhcGFiaWxpdGllcz8uaW5jbHVkZXMocGVybWlzc2lvbikpO1xufTtcbi8qKlxuICogUmV0dXJucyB0aGUgY2FtZXJhIHN0YXRlIG9mIHRoZSBjdXJyZW50IGNhbGwuXG4gKlxuICogQGNhdGVnb3J5IENhbWVyYSBNYW5hZ2VyIFN0YXRlXG4gKlxuICovXG5jb25zdCB1c2VDYW1lcmFTdGF0ZSA9ICgpID0+IHtcbiAgICBjb25zdCBjYWxsID0gdXNlQ2FsbCgpO1xuICAgIGNvbnN0IHsgY2FtZXJhIH0gPSBjYWxsO1xuICAgIGNvbnN0IGRldmljZXMkID0gdXNlTWVtbygoKSA9PiBjYW1lcmEubGlzdERldmljZXMoKSwgW2NhbWVyYV0pO1xuICAgIGNvbnN0IHsgc3RhdGUgfSA9IGNhbWVyYTtcbiAgICBjb25zdCBzdGF0dXMgPSB1c2VPYnNlcnZhYmxlVmFsdWUoc3RhdGUuc3RhdHVzJCk7XG4gICAgY29uc3QgZGlyZWN0aW9uID0gdXNlT2JzZXJ2YWJsZVZhbHVlKHN0YXRlLmRpcmVjdGlvbiQpO1xuICAgIGNvbnN0IG1lZGlhU3RyZWFtID0gdXNlT2JzZXJ2YWJsZVZhbHVlKHN0YXRlLm1lZGlhU3RyZWFtJCk7XG4gICAgY29uc3Qgc2VsZWN0ZWREZXZpY2UgPSB1c2VPYnNlcnZhYmxlVmFsdWUoc3RhdGUuc2VsZWN0ZWREZXZpY2UkKTtcbiAgICBjb25zdCBkZXZpY2VzID0gdXNlT2JzZXJ2YWJsZVZhbHVlKGRldmljZXMkKTtcbiAgICBjb25zdCBoYXNCcm93c2VyUGVybWlzc2lvbiA9IHVzZU9ic2VydmFibGVWYWx1ZShzdGF0ZS5oYXNCcm93c2VyUGVybWlzc2lvbiQpO1xuICAgIGNvbnN0IGlzTXV0ZSA9IHN0YXR1cyAhPT0gJ2VuYWJsZWQnO1xuICAgIHJldHVybiB7XG4gICAgICAgIGNhbWVyYSxcbiAgICAgICAgc3RhdHVzLFxuICAgICAgICBpc0VuYWJsZWQ6IHN0YXR1cyA9PT0gJ2VuYWJsZWQnLFxuICAgICAgICBkaXJlY3Rpb24sXG4gICAgICAgIG1lZGlhU3RyZWFtLFxuICAgICAgICBkZXZpY2VzLFxuICAgICAgICBoYXNCcm93c2VyUGVybWlzc2lvbixcbiAgICAgICAgc2VsZWN0ZWREZXZpY2UsXG4gICAgICAgIGlzTXV0ZSxcbiAgICB9O1xufTtcbi8qKlxuICogUmV0dXJucyB0aGUgbWljcm9waG9uZSBzdGF0ZSBvZiB0aGUgY3VycmVudCBjYWxsLlxuICpcbiAqIEBjYXRlZ29yeSBNaWNyb3Bob25lIE1hbmFnZXIgU3RhdGVcbiAqL1xuY29uc3QgdXNlTWljcm9waG9uZVN0YXRlID0gKCkgPT4ge1xuICAgIGNvbnN0IGNhbGwgPSB1c2VDYWxsKCk7XG4gICAgY29uc3QgeyBtaWNyb3Bob25lIH0gPSBjYWxsO1xuICAgIGNvbnN0IGRldmljZXMkID0gdXNlTWVtbygoKSA9PiBtaWNyb3Bob25lLmxpc3REZXZpY2VzKCksIFttaWNyb3Bob25lXSk7XG4gICAgY29uc3QgeyBzdGF0ZSB9ID0gbWljcm9waG9uZTtcbiAgICBjb25zdCBzdGF0dXMgPSB1c2VPYnNlcnZhYmxlVmFsdWUoc3RhdGUuc3RhdHVzJCk7XG4gICAgY29uc3QgbWVkaWFTdHJlYW0gPSB1c2VPYnNlcnZhYmxlVmFsdWUoc3RhdGUubWVkaWFTdHJlYW0kKTtcbiAgICBjb25zdCBzZWxlY3RlZERldmljZSA9IHVzZU9ic2VydmFibGVWYWx1ZShzdGF0ZS5zZWxlY3RlZERldmljZSQpO1xuICAgIGNvbnN0IGRldmljZXMgPSB1c2VPYnNlcnZhYmxlVmFsdWUoZGV2aWNlcyQpO1xuICAgIGNvbnN0IGhhc0Jyb3dzZXJQZXJtaXNzaW9uID0gdXNlT2JzZXJ2YWJsZVZhbHVlKHN0YXRlLmhhc0Jyb3dzZXJQZXJtaXNzaW9uJCk7XG4gICAgY29uc3QgaXNTcGVha2luZ1doaWxlTXV0ZWQgPSB1c2VPYnNlcnZhYmxlVmFsdWUoc3RhdGUuc3BlYWtpbmdXaGlsZU11dGVkJCk7XG4gICAgY29uc3QgaXNNdXRlID0gc3RhdHVzICE9PSAnZW5hYmxlZCc7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbWljcm9waG9uZSxcbiAgICAgICAgc3RhdHVzLFxuICAgICAgICBpc0VuYWJsZWQ6IHN0YXR1cyA9PT0gJ2VuYWJsZWQnLFxuICAgICAgICBtZWRpYVN0cmVhbSxcbiAgICAgICAgZGV2aWNlcyxcbiAgICAgICAgc2VsZWN0ZWREZXZpY2UsXG4gICAgICAgIGhhc0Jyb3dzZXJQZXJtaXNzaW9uLFxuICAgICAgICBpc1NwZWFraW5nV2hpbGVNdXRlZCxcbiAgICAgICAgaXNNdXRlLFxuICAgIH07XG59O1xuLyoqXG4gKiBSZXR1cm5zIHRoZSBzcGVha2VyIHN0YXRlIG9mIHRoZSBjdXJyZW50IGNhbGwuXG4gKi9cbmNvbnN0IHVzZVNwZWFrZXJTdGF0ZSA9ICgpID0+IHtcbiAgICBjb25zdCBjYWxsID0gdXNlQ2FsbCgpO1xuICAgIGNvbnN0IHsgc3BlYWtlciB9ID0gY2FsbDtcbiAgICBjb25zdCBkZXZpY2VzJCA9IHVzZU1lbW8oKCkgPT4gc3BlYWtlci5saXN0RGV2aWNlcygpLCBbc3BlYWtlcl0pO1xuICAgIGNvbnN0IGRldmljZXMgPSB1c2VPYnNlcnZhYmxlVmFsdWUoZGV2aWNlcyQpO1xuICAgIGNvbnN0IHNlbGVjdGVkRGV2aWNlID0gdXNlT2JzZXJ2YWJsZVZhbHVlKHNwZWFrZXIuc3RhdGUuc2VsZWN0ZWREZXZpY2UkKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBzcGVha2VyLFxuICAgICAgICBkZXZpY2VzLFxuICAgICAgICBzZWxlY3RlZERldmljZSxcbiAgICAgICAgaXNEZXZpY2VTZWxlY3Rpb25TdXBwb3J0ZWQ6IHNwZWFrZXIuc3RhdGUuaXNEZXZpY2VTZWxlY3Rpb25TdXBwb3J0ZWQsXG4gICAgfTtcbn07XG4vKipcbiAqIFJldHVybnMgdGhlIFNjcmVlbiBTaGFyZSBzdGF0ZSBvZiB0aGUgY3VycmVudCBjYWxsLlxuICovXG5jb25zdCB1c2VTY3JlZW5TaGFyZVN0YXRlID0gKCkgPT4ge1xuICAgIGNvbnN0IGNhbGwgPSB1c2VDYWxsKCk7XG4gICAgY29uc3QgeyBzY3JlZW5TaGFyZSB9ID0gY2FsbDtcbiAgICBjb25zdCBzdGF0dXMgPSB1c2VPYnNlcnZhYmxlVmFsdWUoc2NyZWVuU2hhcmUuc3RhdGUuc3RhdHVzJCk7XG4gICAgY29uc3QgbWVkaWFTdHJlYW0gPSB1c2VPYnNlcnZhYmxlVmFsdWUoc2NyZWVuU2hhcmUuc3RhdGUubWVkaWFTdHJlYW0kKTtcbiAgICBjb25zdCBpc011dGUgPSBzdGF0dXMgIT09ICdlbmFibGVkJztcbiAgICByZXR1cm4ge1xuICAgICAgICBzY3JlZW5TaGFyZSxcbiAgICAgICAgbWVkaWFTdHJlYW0sXG4gICAgICAgIHN0YXR1cyxcbiAgICAgICAgaXNNdXRlLFxuICAgIH07XG59O1xuXG52YXIgQ2FsbFN0YXRlSG9va3MgPSAvKiNfX1BVUkVfXyovT2JqZWN0LmZyZWV6ZSh7XG4gICAgX19wcm90b19fOiBudWxsLFxuICAgIHVzZUFub255bW91c1BhcnRpY2lwYW50Q291bnQ6IHVzZUFub255bW91c1BhcnRpY2lwYW50Q291bnQsXG4gICAgdXNlQ2FsbEJsb2NrZWRVc2VySWRzOiB1c2VDYWxsQmxvY2tlZFVzZXJJZHMsXG4gICAgdXNlQ2FsbENhbGxpbmdTdGF0ZTogdXNlQ2FsbENhbGxpbmdTdGF0ZSxcbiAgICB1c2VDYWxsQ3JlYXRlZEF0OiB1c2VDYWxsQ3JlYXRlZEF0LFxuICAgIHVzZUNhbGxDcmVhdGVkQnk6IHVzZUNhbGxDcmVhdGVkQnksXG4gICAgdXNlQ2FsbEN1c3RvbURhdGE6IHVzZUNhbGxDdXN0b21EYXRhLFxuICAgIHVzZUNhbGxFZ3Jlc3M6IHVzZUNhbGxFZ3Jlc3MsXG4gICAgdXNlQ2FsbEVuZGVkQXQ6IHVzZUNhbGxFbmRlZEF0LFxuICAgIHVzZUNhbGxFbmRlZEJ5OiB1c2VDYWxsRW5kZWRCeSxcbiAgICB1c2VDYWxsSW5ncmVzczogdXNlQ2FsbEluZ3Jlc3MsXG4gICAgdXNlQ2FsbE1lbWJlcnM6IHVzZUNhbGxNZW1iZXJzLFxuICAgIHVzZUNhbGxTZXNzaW9uOiB1c2VDYWxsU2Vzc2lvbixcbiAgICB1c2VDYWxsU2V0dGluZ3M6IHVzZUNhbGxTZXR0aW5ncyxcbiAgICB1c2VDYWxsU3RhcnRlZEF0OiB1c2VDYWxsU3RhcnRlZEF0LFxuICAgIHVzZUNhbGxTdGFydHNBdDogdXNlQ2FsbFN0YXJ0c0F0LFxuICAgIHVzZUNhbGxTdGF0ZTogdXNlQ2FsbFN0YXRlLFxuICAgIHVzZUNhbGxTdGF0c1JlcG9ydDogdXNlQ2FsbFN0YXRzUmVwb3J0LFxuICAgIHVzZUNhbGxUaHVtYm5haWw6IHVzZUNhbGxUaHVtYm5haWwsXG4gICAgdXNlQ2FsbFVwZGF0ZWRBdDogdXNlQ2FsbFVwZGF0ZWRBdCxcbiAgICB1c2VDYW1lcmFTdGF0ZTogdXNlQ2FtZXJhU3RhdGUsXG4gICAgdXNlRG9taW5hbnRTcGVha2VyOiB1c2VEb21pbmFudFNwZWFrZXIsXG4gICAgdXNlSGFzT25nb2luZ1NjcmVlblNoYXJlOiB1c2VIYXNPbmdvaW5nU2NyZWVuU2hhcmUsXG4gICAgdXNlSGFzUGVybWlzc2lvbnM6IHVzZUhhc1Blcm1pc3Npb25zLFxuICAgIHVzZUlzQ2FsbEhMU0Jyb2FkY2FzdGluZ0luUHJvZ3Jlc3M6IHVzZUlzQ2FsbEhMU0Jyb2FkY2FzdGluZ0luUHJvZ3Jlc3MsXG4gICAgdXNlSXNDYWxsTGl2ZTogdXNlSXNDYWxsTGl2ZSxcbiAgICB1c2VJc0NhbGxSZWNvcmRpbmdJblByb2dyZXNzOiB1c2VJc0NhbGxSZWNvcmRpbmdJblByb2dyZXNzLFxuICAgIHVzZUlzQ2FsbFRyYW5zY3JpYmluZ0luUHJvZ3Jlc3M6IHVzZUlzQ2FsbFRyYW5zY3JpYmluZ0luUHJvZ3Jlc3MsXG4gICAgdXNlTG9jYWxQYXJ0aWNpcGFudDogdXNlTG9jYWxQYXJ0aWNpcGFudCxcbiAgICB1c2VNaWNyb3Bob25lU3RhdGU6IHVzZU1pY3JvcGhvbmVTdGF0ZSxcbiAgICB1c2VPd25DYXBhYmlsaXRpZXM6IHVzZU93bkNhcGFiaWxpdGllcyxcbiAgICB1c2VQYXJ0aWNpcGFudENvdW50OiB1c2VQYXJ0aWNpcGFudENvdW50LFxuICAgIHVzZVBhcnRpY2lwYW50czogdXNlUGFydGljaXBhbnRzLFxuICAgIHVzZVJlbW90ZVBhcnRpY2lwYW50czogdXNlUmVtb3RlUGFydGljaXBhbnRzLFxuICAgIHVzZVNjcmVlblNoYXJlU3RhdGU6IHVzZVNjcmVlblNoYXJlU3RhdGUsXG4gICAgdXNlU3BlYWtlclN0YXRlOiB1c2VTcGVha2VyU3RhdGVcbn0pO1xuXG4vKipcbiAqIFV0aWxpdHkgaG9vayB3aGljaCBwcm92aWRlcyBhY2Nlc3MgdG8gY2xpZW50J3Mgc3RhdGUgc3RvcmUuXG4gKi9cbmNvbnN0IHVzZVN0b3JlID0gKCkgPT4ge1xuICAgIGNvbnN0IGNsaWVudCA9IHVzZVN0cmVhbVZpZGVvQ2xpZW50KCk7XG4gICAgaWYgKCFjbGllbnQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBTdHJlYW1WaWRlb0NsaWVudCBpc24ndCBpbml0aWFsaXplZCBvciB0aGlzIGhvb2sgaXMgY2FsbGVkIG91dHNpZGUgb2YgPFN0cmVhbVZpZGVvPiBjb250ZXh0LmApO1xuICAgIH1cbiAgICByZXR1cm4gY2xpZW50LnJlYWRPbmx5U3RhdGVTdG9yZTtcbn07XG4vKipcbiAqIFV0aWxpdHkgaG9vayB3aGljaCBwcm92aWRlcyBhIGxpc3Qgb2YgYWxsIG5vdGlmaWNhdGlvbnMgYWJvdXQgY3JlYXRlZCBjYWxscy5cbiAqIEluIHRoZSByaW5nIGNhbGwgc2V0dGluZ3MsIHRoZXNlIGNhbGxzIGNhbiBiZSBvdXRnb2luZyAoSSBoYXZlIGNhbGxlZCBzb21lYm9keSlcbiAqIG9yIGluY29taW5nIChzb21lYm9keSBoYXMgY2FsbGVkIG1lKS5cbiAqXG4gKiBAY2F0ZWdvcnkgQ2xpZW50IFN0YXRlXG4gKi9cbmNvbnN0IHVzZUNhbGxzID0gKCkgPT4ge1xuICAgIGNvbnN0IHsgY2FsbHMkIH0gPSB1c2VTdG9yZSgpO1xuICAgIHJldHVybiB1c2VPYnNlcnZhYmxlVmFsdWUoY2FsbHMkKTtcbn07XG4vKipcbiAqIFJldHVybnMgdGhlIGN1cnJlbnQgY29ubmVjdGVkIHVzZXIuXG4gKlxuICogQGNhdGVnb3J5IENsaWVudCBTdGF0ZVxuICovXG5jb25zdCB1c2VDb25uZWN0ZWRVc2VyID0gKCkgPT4ge1xuICAgIGNvbnN0IHsgY29ubmVjdGVkVXNlciQgfSA9IHVzZVN0b3JlKCk7XG4gICAgcmV0dXJuIHVzZU9ic2VydmFibGVWYWx1ZShjb25uZWN0ZWRVc2VyJCk7XG59O1xuXG4vKipcbiAqIEEgaG9vay1hbGlrZSBmdW5jdGlvbiB0aGF0IGV4cG9zZXMgYWxsIGNhbGwgc3RhdGUgaG9va3MuXG4gKlxuICogQGNhdGVnb3J5IENhbGwgU3RhdGVcbiAqL1xuY29uc3QgdXNlQ2FsbFN0YXRlSG9va3MgPSAoKSA9PiBDYWxsU3RhdGVIb29rcztcblxuY29uc3QgUmVzdHJpY3RlZCA9ICh7IGNhblJlcXVlc3RPbmx5LCBoYXNQZXJtaXNzaW9uc09ubHksIHJlcXVpcmVkR3JhbnRzLCByZXF1aXJlQWxsID0gdHJ1ZSwgY2hpbGRyZW4sIH0pID0+IHtcbiAgICBjb25zdCBjYWxsID0gdXNlQ2FsbCgpO1xuICAgIGNvbnN0IHsgdXNlQ2FsbFNldHRpbmdzLCB1c2VPd25DYXBhYmlsaXRpZXMgfSA9IHVzZUNhbGxTdGF0ZUhvb2tzKCk7XG4gICAgY29uc3Qgb3duQ2FwYWJpbGl0aWVzID0gdXNlT3duQ2FwYWJpbGl0aWVzKCk7XG4gICAgY29uc3Qgc2V0dGluZ3MgPSB1c2VDYWxsU2V0dGluZ3MoKTtcbiAgICBjb25zdCBoYXNQZXJtaXNzaW9ucyA9IHJlcXVpcmVkR3JhbnRzW3JlcXVpcmVBbGwgPyAnZXZlcnknIDogJ3NvbWUnXSgoY2FwYWJpbGl0eSkgPT4gb3duQ2FwYWJpbGl0aWVzPy5pbmNsdWRlcyhjYXBhYmlsaXR5KSk7XG4gICAgaWYgKGhhc1Blcm1pc3Npb25zT25seSlcbiAgICAgICAgcmV0dXJuIGhhc1Blcm1pc3Npb25zID8ganN4KEZyYWdtZW50LCB7IGNoaWxkcmVuOiBjaGlsZHJlbiB9KSA6IG51bGw7XG4gICAgY29uc3QgY2FuUmVxdWVzdCA9IHJlcXVpcmVkR3JhbnRzLnNvbWUoKGNhcGFiaWxpdHkpID0+IGNhbGw/LnBlcm1pc3Npb25zQ29udGV4dC5jYW5SZXF1ZXN0KGNhcGFiaWxpdHksIHNldHRpbmdzKSk7XG4gICAgaWYgKGNhblJlcXVlc3RPbmx5KVxuICAgICAgICByZXR1cm4gY2FuUmVxdWVzdCA/IGpzeChGcmFnbWVudCwgeyBjaGlsZHJlbjogY2hpbGRyZW4gfSkgOiBudWxsO1xuICAgIGlmIChoYXNQZXJtaXNzaW9ucyB8fCBjYW5SZXF1ZXN0KVxuICAgICAgICByZXR1cm4ganN4KEZyYWdtZW50LCB7IGNoaWxkcmVuOiBjaGlsZHJlbiB9KTtcbiAgICByZXR1cm4gbnVsbDtcbn07XG5cbmV4cG9ydCB7IERFRkFVTFRfTEFOR1VBR0UsIERFRkFVTFRfTkFNRVNQQUNFLCBSZXN0cmljdGVkLCBTdHJlYW1DYWxsUHJvdmlkZXIsIFN0cmVhbUkxOG4sIFN0cmVhbUkxOG5Qcm92aWRlciwgU3RyZWFtVmlkZW9Qcm92aWRlciwgZGVmYXVsdFRyYW5zbGF0aW9uRnVuY3Rpb24sIG1hcFRvUmVnaXN0cnksIHVzZUNhbGwsIHVzZUNhbGxTdGF0ZUhvb2tzLCB1c2VDYWxscywgdXNlQ29ubmVjdGVkVXNlciwgdXNlQ3JlYXRlSTE4biwgdXNlSTE4biwgdXNlU3RvcmUsIHVzZVN0cmVhbVZpZGVvQ2xpZW50IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lcy5qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@stream-io/video-react-bindings/dist/index.es.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@stream-io/video-react-sdk/dist/index.es.js":
/*!******************************************************************!*\
  !*** ./node_modules/@stream-io/video-react-sdk/dist/index.es.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AcceptCallButton: () => (/* binding */ AcceptCallButton),\n/* harmony export */   Audio: () => (/* binding */ Audio),\n/* harmony export */   AudioSettingsDefaultDeviceEnum: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.AudioSettingsDefaultDeviceEnum),\n/* harmony export */   AudioSettingsRequestDefaultDeviceEnum: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.AudioSettingsRequestDefaultDeviceEnum),\n/* harmony export */   Avatar: () => (/* binding */ Avatar),\n/* harmony export */   AvatarFallback: () => (/* binding */ AvatarFallback),\n/* harmony export */   AxiosError: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.AxiosError),\n/* harmony export */   BaseVideo: () => (/* binding */ BaseVideo),\n/* harmony export */   Browsers: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.Browsers),\n/* harmony export */   Call: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.Call),\n/* harmony export */   CallControls: () => (/* binding */ CallControls),\n/* harmony export */   CallParticipantListing: () => (/* binding */ CallParticipantListing),\n/* harmony export */   CallParticipantListingItem: () => (/* binding */ CallParticipantListingItem),\n/* harmony export */   CallParticipantsList: () => (/* binding */ CallParticipantsList),\n/* harmony export */   CallPreview: () => (/* binding */ CallPreview),\n/* harmony export */   CallRecordingList: () => (/* binding */ CallRecordingList),\n/* harmony export */   CallRecordingListHeader: () => (/* binding */ CallRecordingListHeader),\n/* harmony export */   CallRecordingListItem: () => (/* binding */ CallRecordingListItem),\n/* harmony export */   CallState: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.CallState),\n/* harmony export */   CallStats: () => (/* binding */ CallStats),\n/* harmony export */   CallStatsButton: () => (/* binding */ CallStatsButton),\n/* harmony export */   CallStatsLatencyChart: () => (/* binding */ CallStatsLatencyChart),\n/* harmony export */   CallType: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.CallType),\n/* harmony export */   CallTypes: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.CallTypes),\n/* harmony export */   CallingState: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.CallingState),\n/* harmony export */   CameraManager: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.CameraManager),\n/* harmony export */   CameraManagerState: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.CameraManagerState),\n/* harmony export */   CancelCallButton: () => (/* binding */ CancelCallButton),\n/* harmony export */   CancelCallConfirmButton: () => (/* binding */ CancelCallConfirmButton),\n/* harmony export */   CompositeButton: () => (/* binding */ CompositeButton),\n/* harmony export */   CreateDeviceRequestPushProviderEnum: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.CreateDeviceRequestPushProviderEnum),\n/* harmony export */   DEFAULT_LANGUAGE: () => (/* reexport safe */ _stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_LANGUAGE),\n/* harmony export */   DEFAULT_NAMESPACE: () => (/* reexport safe */ _stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_NAMESPACE),\n/* harmony export */   DebounceType: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.DebounceType),\n/* harmony export */   DefaultParticipantViewUI: () => (/* binding */ DefaultParticipantViewUI),\n/* harmony export */   DefaultReactionsMenu: () => (/* binding */ DefaultReactionsMenu),\n/* harmony export */   DefaultScreenShareOverlay: () => (/* binding */ DefaultScreenShareOverlay),\n/* harmony export */   DefaultVideoPlaceholder: () => (/* binding */ DefaultVideoPlaceholder),\n/* harmony export */   DeviceSelector: () => (/* binding */ DeviceSelector),\n/* harmony export */   DeviceSelectorAudioInput: () => (/* binding */ DeviceSelectorAudioInput),\n/* harmony export */   DeviceSelectorAudioOutput: () => (/* binding */ DeviceSelectorAudioOutput),\n/* harmony export */   DeviceSelectorVideo: () => (/* binding */ DeviceSelectorVideo),\n/* harmony export */   DeviceSettings: () => (/* binding */ DeviceSettings),\n/* harmony export */   DropDownSelect: () => (/* binding */ DropDownSelect),\n/* harmony export */   DropDownSelectOption: () => (/* binding */ DropDownSelectOption),\n/* harmony export */   DynascaleManager: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.DynascaleManager),\n/* harmony export */   EmptyCallRecordingListing: () => (/* binding */ EmptyCallRecordingListing),\n/* harmony export */   ErrorFromResponse: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.ErrorFromResponse),\n/* harmony export */   GenericMenu: () => (/* binding */ GenericMenu),\n/* harmony export */   GenericMenuButtonItem: () => (/* binding */ GenericMenuButtonItem),\n/* harmony export */   Icon: () => (/* binding */ Icon),\n/* harmony export */   IconButton: () => (/* binding */ IconButton),\n/* harmony export */   InputMediaDeviceManager: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.InputMediaDeviceManager),\n/* harmony export */   InputMediaDeviceManagerState: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.InputMediaDeviceManagerState),\n/* harmony export */   LayoutSettingsNameEnum: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.LayoutSettingsNameEnum),\n/* harmony export */   LayoutSettingsRequestNameEnum: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.LayoutSettingsRequestNameEnum),\n/* harmony export */   LivestreamLayout: () => (/* binding */ LivestreamLayout),\n/* harmony export */   LoadingCallRecordingListing: () => (/* binding */ LoadingCallRecordingListing),\n/* harmony export */   LoadingIndicator: () => (/* binding */ LoadingIndicator),\n/* harmony export */   MenuToggle: () => (/* binding */ MenuToggle),\n/* harmony export */   MenuVisualType: () => (/* binding */ MenuVisualType),\n/* harmony export */   MicrophoneManager: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.MicrophoneManager),\n/* harmony export */   MicrophoneManagerState: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.MicrophoneManagerState),\n/* harmony export */   Notification: () => (/* binding */ Notification),\n/* harmony export */   OwnCapability: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability),\n/* harmony export */   PaginatedGridLayout: () => (/* binding */ PaginatedGridLayout),\n/* harmony export */   ParticipantActionsContextMenu: () => (/* binding */ ParticipantActionsContextMenu),\n/* harmony export */   ParticipantDetails: () => (/* binding */ ParticipantDetails),\n/* harmony export */   ParticipantView: () => (/* binding */ ParticipantView),\n/* harmony export */   ParticipantViewContext: () => (/* binding */ ParticipantViewContext),\n/* harmony export */   ParticipantsAudio: () => (/* binding */ ParticipantsAudio),\n/* harmony export */   PermissionNotification: () => (/* binding */ PermissionNotification),\n/* harmony export */   PermissionRequestList: () => (/* binding */ PermissionRequestList),\n/* harmony export */   PermissionRequests: () => (/* binding */ PermissionRequests),\n/* harmony export */   ReactionsButton: () => (/* binding */ ReactionsButton),\n/* harmony export */   RecordCallButton: () => (/* binding */ RecordCallButton),\n/* harmony export */   RecordCallConfirmationButton: () => (/* binding */ RecordCallConfirmationButton),\n/* harmony export */   RecordSettingsRequestModeEnum: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.RecordSettingsRequestModeEnum),\n/* harmony export */   RecordSettingsRequestQualityEnum: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.RecordSettingsRequestQualityEnum),\n/* harmony export */   RecordingInProgressNotification: () => (/* binding */ RecordingInProgressNotification),\n/* harmony export */   Restricted: () => (/* reexport safe */ _stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.Restricted),\n/* harmony export */   RingingCall: () => (/* binding */ RingingCall),\n/* harmony export */   RingingCallControls: () => (/* binding */ RingingCallControls),\n/* harmony export */   RxUtils: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.RxUtils),\n/* harmony export */   ScreenShareButton: () => (/* binding */ ScreenShareButton),\n/* harmony export */   ScreenShareManager: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.ScreenShareManager),\n/* harmony export */   ScreenShareState: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.ScreenShareState),\n/* harmony export */   SearchInput: () => (/* binding */ SearchInput),\n/* harmony export */   SearchResults: () => (/* binding */ SearchResults),\n/* harmony export */   SfuEvents: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.SfuEvents),\n/* harmony export */   SfuModels: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.SfuModels),\n/* harmony export */   SpeakerLayout: () => (/* binding */ SpeakerLayout),\n/* harmony export */   SpeakerManager: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.SpeakerManager),\n/* harmony export */   SpeakerState: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.SpeakerState),\n/* harmony export */   SpeakingWhileMutedNotification: () => (/* binding */ SpeakingWhileMutedNotification),\n/* harmony export */   SpeechIndicator: () => (/* binding */ SpeechIndicator),\n/* harmony export */   StatCard: () => (/* binding */ StatCard),\n/* harmony export */   StatCardExplanation: () => (/* binding */ StatCardExplanation),\n/* harmony export */   StatsTag: () => (/* binding */ StatsTag),\n/* harmony export */   Statuses: () => (/* binding */ Statuses),\n/* harmony export */   StreamCall: () => (/* binding */ StreamCall),\n/* harmony export */   StreamCallProvider: () => (/* reexport safe */ _stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.StreamCallProvider),\n/* harmony export */   StreamI18n: () => (/* reexport safe */ _stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.StreamI18n),\n/* harmony export */   StreamI18nProvider: () => (/* reexport safe */ _stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.StreamI18nProvider),\n/* harmony export */   StreamSfuClient: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.StreamSfuClient),\n/* harmony export */   StreamTheme: () => (/* binding */ StreamTheme),\n/* harmony export */   StreamVideo: () => (/* binding */ StreamVideo),\n/* harmony export */   StreamVideoClient: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.StreamVideoClient),\n/* harmony export */   StreamVideoProvider: () => (/* reexport safe */ _stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.StreamVideoProvider),\n/* harmony export */   StreamVideoReadOnlyStateStore: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.StreamVideoReadOnlyStateStore),\n/* harmony export */   StreamVideoServerClient: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.StreamVideoServerClient),\n/* harmony export */   StreamVideoWriteableStateStore: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.StreamVideoWriteableStateStore),\n/* harmony export */   TextButton: () => (/* binding */ TextButton),\n/* harmony export */   ToggleAudioOutputButton: () => (/* binding */ ToggleAudioOutputButton),\n/* harmony export */   ToggleAudioPreviewButton: () => (/* binding */ ToggleAudioPreviewButton),\n/* harmony export */   ToggleAudioPublishingButton: () => (/* binding */ ToggleAudioPublishingButton),\n/* harmony export */   ToggleVideoPreviewButton: () => (/* binding */ ToggleVideoPreviewButton),\n/* harmony export */   ToggleVideoPublishingButton: () => (/* binding */ ToggleVideoPublishingButton),\n/* harmony export */   Tooltip: () => (/* binding */ Tooltip),\n/* harmony export */   TranscriptionSettingsModeEnum: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.TranscriptionSettingsModeEnum),\n/* harmony export */   TranscriptionSettingsRequestModeEnum: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.TranscriptionSettingsRequestModeEnum),\n/* harmony export */   Video: () => (/* binding */ Video$1),\n/* harmony export */   VideoPreview: () => (/* binding */ VideoPreview),\n/* harmony export */   VideoSettingsCameraFacingEnum: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.VideoSettingsCameraFacingEnum),\n/* harmony export */   VideoSettingsRequestCameraFacingEnum: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.VideoSettingsRequestCameraFacingEnum),\n/* harmony export */   ViewportTracker: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.ViewportTracker),\n/* harmony export */   VisibilityState: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.VisibilityState),\n/* harmony export */   WithTooltip: () => (/* binding */ WithTooltip),\n/* harmony export */   checkIfAudioOutputChangeSupported: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.checkIfAudioOutputChangeSupported),\n/* harmony export */   combineComparators: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.combineComparators),\n/* harmony export */   conditional: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.conditional),\n/* harmony export */   createSoundDetector: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.createSoundDetector),\n/* harmony export */   defaultReactions: () => (/* binding */ defaultReactions),\n/* harmony export */   defaultSortPreset: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.defaultSortPreset),\n/* harmony export */   defaultTranslationFunction: () => (/* reexport safe */ _stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.defaultTranslationFunction),\n/* harmony export */   descending: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.descending),\n/* harmony export */   deviceIds$: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.deviceIds$),\n/* harmony export */   disposeOfMediaStream: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.disposeOfMediaStream),\n/* harmony export */   dominantSpeaker: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.dominantSpeaker),\n/* harmony export */   getAudioDevices: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.getAudioDevices),\n/* harmony export */   getAudioOutputDevices: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.getAudioOutputDevices),\n/* harmony export */   getAudioStream: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.getAudioStream),\n/* harmony export */   getClientDetails: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.getClientDetails),\n/* harmony export */   getDeviceInfo: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.getDeviceInfo),\n/* harmony export */   getLogger: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.getLogger),\n/* harmony export */   getOSInfo: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.getOSInfo),\n/* harmony export */   getScreenShareStream: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.getScreenShareStream),\n/* harmony export */   getSdkInfo: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.getSdkInfo),\n/* harmony export */   getVideoDevices: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.getVideoDevices),\n/* harmony export */   getVideoStream: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.getVideoStream),\n/* harmony export */   livestreamOrAudioRoomSortPreset: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.livestreamOrAudioRoomSortPreset),\n/* harmony export */   logLevels: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.logLevels),\n/* harmony export */   logToConsole: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.logToConsole),\n/* harmony export */   mapToRegistry: () => (/* reexport safe */ _stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.mapToRegistry),\n/* harmony export */   name: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.name),\n/* harmony export */   noopComparator: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.noopComparator),\n/* harmony export */   paginatedLayoutSortPreset: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.paginatedLayoutSortPreset),\n/* harmony export */   pinned: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.pinned),\n/* harmony export */   publishingAudio: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.publishingAudio),\n/* harmony export */   publishingVideo: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.publishingVideo),\n/* harmony export */   reactionType: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.reactionType),\n/* harmony export */   role: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.role),\n/* harmony export */   screenSharing: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.screenSharing),\n/* harmony export */   setDeviceInfo: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.setDeviceInfo),\n/* harmony export */   setLogLevel: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.setLogLevel),\n/* harmony export */   setLogger: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.setLogger),\n/* harmony export */   setOSInfo: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.setOSInfo),\n/* harmony export */   setSdkInfo: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.setSdkInfo),\n/* harmony export */   speakerLayoutSortPreset: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.speakerLayoutSortPreset),\n/* harmony export */   speaking: () => (/* reexport safe */ _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.speaking),\n/* harmony export */   translations: () => (/* binding */ translations),\n/* harmony export */   useCall: () => (/* reexport safe */ _stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCall),\n/* harmony export */   useCallStateHooks: () => (/* reexport safe */ _stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCallStateHooks),\n/* harmony export */   useCalls: () => (/* reexport safe */ _stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCalls),\n/* harmony export */   useConnectedUser: () => (/* reexport safe */ _stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useConnectedUser),\n/* harmony export */   useCreateI18n: () => (/* reexport safe */ _stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCreateI18n),\n/* harmony export */   useHorizontalScrollPosition: () => (/* binding */ useHorizontalScrollPosition),\n/* harmony export */   useI18n: () => (/* reexport safe */ _stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n),\n/* harmony export */   useMenuContext: () => (/* binding */ useMenuContext),\n/* harmony export */   useParticipantViewContext: () => (/* binding */ useParticipantViewContext),\n/* harmony export */   usePersistedDevicePreferences: () => (/* binding */ usePersistedDevicePreferences),\n/* harmony export */   useRequestPermission: () => (/* binding */ useRequestPermission),\n/* harmony export */   useStore: () => (/* reexport safe */ _stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useStore),\n/* harmony export */   useStreamVideoClient: () => (/* reexport safe */ _stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useStreamVideoClient),\n/* harmony export */   useTrackElementVisibility: () => (/* binding */ useTrackElementVisibility),\n/* harmony export */   useVerticalScrollPosition: () => (/* binding */ useVerticalScrollPosition)\n/* harmony export */ });\n/* harmony import */ var _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @stream-io/video-client */ \"(ssr)/./node_modules/@stream-io/video-client/dist/index.es.js\");\n/* harmony import */ var _stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @stream-io/video-react-bindings */ \"(ssr)/./node_modules/@stream-io/video-react-bindings/dist/index.es.js\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var clsx__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! clsx */ \"(ssr)/./node_modules/clsx/dist/clsx.mjs\");\n/* harmony import */ var _floating_ui_react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @floating-ui/react */ \"(ssr)/./node_modules/@floating-ui/react/dist/floating-ui.react.mjs\");\n/* harmony import */ var _floating_ui_react__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @floating-ui/react */ \"(ssr)/./node_modules/@floating-ui/core/dist/floating-ui.core.mjs\");\n/* harmony import */ var _floating_ui_react__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @floating-ui/react */ \"(ssr)/./node_modules/@floating-ui/dom/dist/floating-ui.dom.mjs\");\n/* harmony import */ var chart_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! chart.js */ \"(ssr)/./node_modules/chart.js/dist/chart.js\");\n/* harmony import */ var react_chartjs_2__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! react-chartjs-2 */ \"(ssr)/./node_modules/react-chartjs-2/dist/index.js\");\n\n\n\n\n\n\n\n\n\n\n\nconst Audio = ({ participant, trackType = 'audioTrack', ...rest }) => {\n    const call = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCall)();\n    const [audioElement, setAudioElement] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(null);\n    const { userId, sessionId } = participant;\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        if (!call || !audioElement)\n            return;\n        const cleanup = call.bindAudioElement(audioElement, sessionId, trackType);\n        return () => {\n            cleanup?.();\n        };\n    }, [call, sessionId, audioElement, trackType]);\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"audio\", { autoPlay: true, ...rest, ref: setAudioElement, \"data-user-id\": userId, \"data-session-id\": sessionId, \"data-track-type\": trackType }));\n};\n\nconst ParticipantsAudio = (props) => {\n    const { participants, audioProps } = props;\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Fragment, { children: participants.map((participant) => {\n            if (participant.isLocalParticipant)\n                return null;\n            const { publishedTracks, audioStream, screenShareAudioStream, sessionId, } = participant;\n            const hasAudio = publishedTracks.includes(_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.SfuModels.TrackType.AUDIO);\n            const audioTrackElement = hasAudio && audioStream && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Audio, { ...audioProps, trackType: \"audioTrack\", participant: participant }));\n            const hasScreenShareAudio = publishedTracks.includes(_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.SfuModels.TrackType.SCREEN_SHARE_AUDIO);\n            const screenShareAudioTrackElement = hasScreenShareAudio &&\n                screenShareAudioStream && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Audio, { ...audioProps, trackType: \"screenShareAudioTrack\", participant: participant }));\n            return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(react__WEBPACK_IMPORTED_MODULE_3__.Fragment, { children: [audioTrackElement, screenShareAudioTrackElement] }, sessionId));\n        }) }));\n};\n\nconst ParticipantViewContext = (0,react__WEBPACK_IMPORTED_MODULE_3__.createContext)(undefined);\nconst useParticipantViewContext = () => (0,react__WEBPACK_IMPORTED_MODULE_3__.useContext)(ParticipantViewContext);\n\nconst Avatar = ({ imageSrc, name, style, className, ...rest }) => {\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(false);\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Fragment, { children: [(!imageSrc || error) && name && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(AvatarFallback, { className: className, style: style, names: [name] })), imageSrc && !error && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"img\", { onError: () => setError(true), alt: \"avatar\", className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('str-video__avatar', className), src: imageSrc, style: style, ...rest }))] }));\n};\nconst AvatarFallback = ({ className, names, style, }) => {\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('str-video__avatar--initials-fallback', className), style: style, children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { children: [names[0][0], names[1]?.[0]] }) }));\n};\n\nconst useFloatingUIPreset = ({ placement, strategy, offset: offsetInPx = 10, }) => {\n    const { refs, x, y, update, elements: { domReference, floating }, } = (0,_floating_ui_react__WEBPACK_IMPORTED_MODULE_5__.useFloating)({\n        placement,\n        strategy,\n        middleware: [\n            (0,_floating_ui_react__WEBPACK_IMPORTED_MODULE_6__.offset)(offsetInPx),\n            (0,_floating_ui_react__WEBPACK_IMPORTED_MODULE_7__.shift)(),\n            (0,_floating_ui_react__WEBPACK_IMPORTED_MODULE_7__.flip)(),\n            (0,_floating_ui_react__WEBPACK_IMPORTED_MODULE_7__.size)({\n                padding: 10,\n                apply: ({ availableHeight, elements }) => {\n                    Object.assign(elements.floating.style, {\n                        maxHeight: `${availableHeight}px`,\n                    });\n                },\n            }),\n        ],\n    });\n    // handle window resizing\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        if (!domReference || !floating)\n            return;\n        const cleanup = (0,_floating_ui_react__WEBPACK_IMPORTED_MODULE_7__.autoUpdate)(domReference, floating, update);\n        return () => cleanup();\n    }, [domReference, floating, update]);\n    return { refs, x, y, domReference, floating, strategy };\n};\n\n/**\n * This hook will persist the device settings to local storage.\n *\n * @param key the key to use for local storage.\n */\nconst usePersistDevicePreferences = (key) => {\n    const { useMicrophoneState, useCameraState, useSpeakerState, useCallSettings, } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCallStateHooks)();\n    const mic = useMicrophoneState();\n    const camera = useCameraState();\n    const speaker = useSpeakerState();\n    const settings = useCallSettings();\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        if (!settings)\n            return;\n        try {\n            const hasPreferences = !!window.localStorage.getItem(key);\n            const { audio, video } = settings;\n            const defaultDevice = 'default';\n            const preferences = {\n                mic: {\n                    selectedDeviceId: mic.selectedDevice || defaultDevice,\n                    muted: hasPreferences ? mic.isMute : !audio.mic_default_on,\n                },\n                camera: {\n                    selectedDeviceId: camera.selectedDevice || defaultDevice,\n                    muted: hasPreferences ? camera.isMute : !video.camera_default_on,\n                },\n                speaker: {\n                    selectedDeviceId: speaker.selectedDevice || defaultDevice,\n                    muted: false,\n                },\n            };\n            window.localStorage.setItem(key, JSON.stringify(preferences));\n        }\n        catch (err) {\n            console.warn('Failed to save device preferences', err);\n        }\n    }, [\n        camera.isMute,\n        camera.selectedDevice,\n        key,\n        mic.isMute,\n        mic.selectedDevice,\n        settings,\n        speaker.selectedDevice,\n    ]);\n};\n/**\n * This hook will apply the device settings from local storage.\n *\n * @param key the key to use for local storage.\n */\nconst useApplyDevicePreferences = (key) => {\n    const call = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCall)();\n    const { useCallSettings } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCallStateHooks)();\n    const settings = useCallSettings();\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        if (!call || !settings)\n            return;\n        const apply = async () => {\n            const initMic = async (setting) => {\n                await call.microphone.select(setting.selectedDeviceId);\n                if (setting.muted) {\n                    await call.microphone.disable();\n                }\n                else {\n                    await call.microphone.enable();\n                }\n            };\n            const initCamera = async (setting) => {\n                await call.camera.select(setting.selectedDeviceId);\n                if (setting.muted) {\n                    await call.camera.disable();\n                }\n                else {\n                    await call.camera.enable();\n                }\n            };\n            const initSpeaker = (setting) => {\n                call.speaker.select(setting.selectedDeviceId);\n            };\n            let preferences = null;\n            try {\n                preferences = JSON.parse(window.localStorage.getItem(key));\n            }\n            catch (err) {\n                console.warn('Failed to load device preferences', err);\n            }\n            if (preferences) {\n                await initMic(preferences.mic);\n                await initCamera(preferences.camera);\n                initSpeaker(preferences.speaker);\n            }\n            else {\n                const { audio, video } = settings;\n                if (audio.mic_default_on)\n                    await call.microphone.enable();\n                if (video.camera_default_on)\n                    await call.camera.enable();\n            }\n        };\n        apply().catch((err) => {\n            console.warn('Failed to apply device preferences', err);\n        });\n    }, [call, key, settings]);\n};\n/**\n * This hook will apply and persist the device preferences from local storage.\n *\n * @param key the key to use for local storage.\n */\nconst usePersistedDevicePreferences = (key = '@stream-io/device-preferences') => {\n    useApplyDevicePreferences(key);\n    usePersistDevicePreferences(key);\n};\n\nconst SCROLL_THRESHOLD = 10;\n/**\n * Hook which observes element's scroll position and returns text value based on the\n * position of the scrollbar (`top`, `bottom`, `between` and `null` if no scrollbar is available)\n */\nconst useVerticalScrollPosition = (scrollElement, threshold = SCROLL_THRESHOLD) => {\n    const [scrollPosition, setScrollPosition] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(null);\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        if (!scrollElement)\n            return;\n        const scrollHandler = () => {\n            const element = scrollElement;\n            const hasVerticalScrollbar = element.scrollHeight > element.clientHeight;\n            if (!hasVerticalScrollbar)\n                return setScrollPosition(null);\n            const isAtTheTop = element.scrollTop <= threshold;\n            if (isAtTheTop)\n                return setScrollPosition('top');\n            const isAtTheBottom = Math.abs(element.scrollHeight - element.scrollTop - element.clientHeight) <= threshold;\n            if (isAtTheBottom)\n                return setScrollPosition('bottom');\n            setScrollPosition('between');\n        };\n        const resizeObserver = new ResizeObserver(scrollHandler);\n        resizeObserver.observe(scrollElement);\n        scrollElement.addEventListener('scroll', scrollHandler);\n        return () => {\n            scrollElement.removeEventListener('scroll', scrollHandler);\n            resizeObserver.disconnect();\n        };\n    }, [scrollElement, threshold]);\n    return scrollPosition;\n};\nconst useHorizontalScrollPosition = (scrollElement, threshold = SCROLL_THRESHOLD) => {\n    const [scrollPosition, setScrollPosition] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(null);\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        if (!scrollElement)\n            return;\n        const scrollHandler = () => {\n            const element = scrollElement;\n            const hasHorizontalScrollbar = element.scrollWidth > element.clientWidth;\n            if (!hasHorizontalScrollbar)\n                return setScrollPosition(null);\n            const isAtTheStart = element.scrollLeft <= threshold;\n            if (isAtTheStart)\n                return setScrollPosition('start');\n            const isAtTheEnd = Math.abs(element.scrollWidth - element.scrollLeft - element.clientWidth) <= threshold;\n            if (isAtTheEnd)\n                return setScrollPosition('end');\n            setScrollPosition('between');\n        };\n        const resizeObserver = new ResizeObserver(scrollHandler);\n        resizeObserver.observe(scrollElement);\n        scrollElement.addEventListener('scroll', scrollHandler);\n        return () => {\n            scrollElement.removeEventListener('scroll', scrollHandler);\n            resizeObserver.disconnect();\n        };\n    }, [scrollElement, threshold]);\n    return scrollPosition;\n};\n\nconst useToggleCallRecording = () => {\n    const call = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCall)();\n    const { useIsCallRecordingInProgress } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCallStateHooks)();\n    const isCallRecordingInProgress = useIsCallRecordingInProgress();\n    const [isAwaitingResponse, setIsAwaitingResponse] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(false);\n    // TODO: add permissions\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        // we wait until call.recording_started/stopped event to flips the\n        // `isCallRecordingInProgress` state variable.\n        // Once the flip happens, we remove the loading indicator\n        setIsAwaitingResponse((isAwaiting) => {\n            if (isAwaiting)\n                return false;\n            return isAwaiting;\n        });\n    }, [isCallRecordingInProgress]);\n    const toggleCallRecording = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(async () => {\n        try {\n            setIsAwaitingResponse(true);\n            if (isCallRecordingInProgress) {\n                await call?.stopRecording();\n            }\n            else {\n                await call?.startRecording();\n            }\n        }\n        catch (e) {\n            console.error(`Failed start recording`, e);\n        }\n    }, [call, isCallRecordingInProgress]);\n    return { toggleCallRecording, isAwaitingResponse, isCallRecordingInProgress };\n};\n\nconst useRequestPermission = (permission) => {\n    const call = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCall)();\n    const { useHasPermissions } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCallStateHooks)();\n    const hasPermission = useHasPermissions(permission);\n    const [isAwaitingPermission, setIsAwaitingPermission] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(false); // TODO: load with possibly pending state\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        const reset = () => setIsAwaitingPermission(false);\n        if (hasPermission)\n            reset();\n    }, [hasPermission]);\n    const requestPermission = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(async () => {\n        if (hasPermission)\n            return true;\n        const canRequestPermission = !!call?.permissionsContext.canRequest(permission);\n        if (isAwaitingPermission || !canRequestPermission)\n            return false;\n        setIsAwaitingPermission(true);\n        try {\n            await call?.requestPermissions({\n                permissions: [permission],\n            });\n        }\n        catch (error) {\n            setIsAwaitingPermission(false);\n            throw new Error(`requestPermission failed: ${error}`);\n        }\n        return false;\n    }, [call, hasPermission, isAwaitingPermission, permission]);\n    return {\n        requestPermission,\n        hasPermission,\n        canRequestPermission: !!call?.permissionsContext.canRequest(permission),\n        isAwaitingPermission,\n    };\n};\n\nvar MenuVisualType;\n(function (MenuVisualType) {\n    MenuVisualType[\"PORTAL\"] = \"portal\";\n    MenuVisualType[\"MENU\"] = \"menu\";\n})(MenuVisualType || (MenuVisualType = {}));\n/**\n * Used to provide utility APIs to the components rendered inside the portal.\n */\nconst MenuContext = (0,react__WEBPACK_IMPORTED_MODULE_3__.createContext)({});\n/**\n * Access to the closes MenuContext.\n */\nconst useMenuContext = () => {\n    return (0,react__WEBPACK_IMPORTED_MODULE_3__.useContext)(MenuContext);\n};\nconst MenuPortal = ({ children, refs, }) => {\n    const portalId = (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => `str-video-portal-${Math.random().toString(36).substring(2, 9)}`, []);\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Fragment, { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { id: portalId, className: \"str-video__portal\" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_floating_ui_react__WEBPACK_IMPORTED_MODULE_5__.FloatingOverlay, { children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_floating_ui_react__WEBPACK_IMPORTED_MODULE_5__.FloatingPortal, { id: portalId, children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__portal-content\", ref: refs.setFloating, children: children }) }) })] }));\n};\nconst MenuToggle = ({ ToggleButton, placement = 'top-start', strategy = 'absolute', offset, visualType = MenuVisualType.MENU, children, }) => {\n    const [menuShown, setMenuShown] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(false);\n    const { floating, domReference, refs, x, y } = useFloatingUIPreset({\n        placement,\n        strategy,\n        offset,\n    });\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        const handleClick = (event) => {\n            if (!floating && domReference?.contains(event.target)) {\n                setMenuShown(true);\n            }\n            else if (floating && !floating?.contains(event.target)) {\n                setMenuShown(false);\n            }\n        };\n        const handleKeyDown = (event) => {\n            if (event.key.toLowerCase() === 'escape' &&\n                !event.altKey &&\n                !event.ctrlKey) {\n                setMenuShown(false);\n            }\n        };\n        document?.addEventListener('click', handleClick, { capture: true });\n        document?.addEventListener('keydown', handleKeyDown);\n        return () => {\n            document?.removeEventListener('click', handleClick, { capture: true });\n            document?.removeEventListener('keydown', handleKeyDown);\n        };\n    }, [floating, domReference]);\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Fragment, { children: [menuShown && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(MenuContext.Provider, { value: { close: () => setMenuShown(false) }, children: visualType === MenuVisualType.PORTAL ? ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(MenuPortal, { refs: refs, children: children })) : visualType === MenuVisualType.MENU ? ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__menu-container\", ref: refs.setFloating, style: {\n                        position: strategy,\n                        top: y ?? 0,\n                        left: x ?? 0,\n                        overflowY: 'auto',\n                    }, children: children })) : null })), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(ToggleButton, { menuShown: menuShown, ref: refs.setReference })] }));\n};\n\nconst GenericMenu = ({ children, onItemClick, }) => {\n    const ref = (0,react__WEBPACK_IMPORTED_MODULE_3__.useRef)(null);\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"ul\", { className: \"str-video__generic-menu\", ref: ref, onClick: (e) => {\n            if (onItemClick &&\n                e.target !== ref.current &&\n                ref.current?.contains(e.target)) {\n                onItemClick(e);\n            }\n        }, children: children }));\n};\nconst GenericMenuButtonItem = ({ children, ...rest }) => {\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"li\", { className: \"str-video__generic-menu--item\", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"button\", { ...rest, children: children }) }));\n};\n\nconst Icon = ({ className, icon }) => ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"span\", { className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('str-video__icon', icon && `str-video__icon--${icon}`, className) }));\n\nconst IconButton = (0,react__WEBPACK_IMPORTED_MODULE_3__.forwardRef)(function IconButton(props, ref) {\n    const { icon, enabled, variant, onClick, className, ...rest } = props;\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"button\", { className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('str-video__call-controls__button', className, {\n            [`str-video__call-controls__button--variant-${variant}`]: variant,\n            'str-video__call-controls__button--enabled': enabled,\n        }), onClick: (e) => {\n            e.preventDefault();\n            onClick?.(e);\n        }, ref: ref, ...rest, children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Icon, { icon: icon }) }));\n});\n\nconst isComponentType = (elementOrComponent) => {\n    return elementOrComponent === null\n        ? false\n        : !(0,react__WEBPACK_IMPORTED_MODULE_3__.isValidElement)(elementOrComponent);\n};\n\nconst chunk = (array, size) => {\n    const chunkCount = Math.ceil(array.length / size);\n    return Array.from({ length: chunkCount }, (_, index) => array.slice(size * index, size * index + size));\n};\n\nconst applyElementToRef = (ref, element) => {\n    if (!ref)\n        return;\n    if (typeof ref === 'function')\n        return ref(element);\n    ref.current = element;\n};\n\nconst CompositeButton = (0,react__WEBPACK_IMPORTED_MODULE_3__.forwardRef)(function CompositeButton({ caption, children, className, active, Menu, menuPlacement, menuOffset, title, ToggleMenuButton = DefaultToggleMenuButton, variant, onClick, ...restButtonProps }, ref) {\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('str-video__composite-button', className, {\n            'str-video__composite-button--caption': caption,\n            'str-video__composite-button--menu': Menu,\n        }), title: title, ref: ref, children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('str-video__composite-button__button-group', {\n                    'str-video__composite-button__button-group--active': active,\n                    'str-video__composite-button__button-group--active-primary': active && variant === 'primary',\n                    'str-video__composite-button__button-group--active-secondary': active && variant === 'secondary',\n                }), children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"button\", { type: \"button\", className: \"str-video__composite-button__button\", onClick: (e) => {\n                            e.preventDefault();\n                            onClick?.(e);\n                        }, ...restButtonProps, children: children }), Menu && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(MenuToggle, { offset: menuOffset, placement: menuPlacement, ToggleButton: ToggleMenuButton, children: isComponentType(Menu) ? (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Menu, {}) : Menu }))] }), caption && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__composite-button__caption\", children: caption }))] }));\n});\nconst DefaultToggleMenuButton = (0,react__WEBPACK_IMPORTED_MODULE_3__.forwardRef)(function DefaultToggleMenuButton({ menuShown }, ref) {\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(IconButton, { className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('str-video__menu-toggle-button', {\n            'str-video__menu-toggle-button--active': menuShown,\n        }), icon: menuShown ? 'caret-down' : 'caret-up', ref: ref }));\n});\n\nconst TextButton = ({ children, ...rest }) => {\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"button\", { ...rest, className: \"str-video__text-button\", children: children }));\n};\n\nconst AcceptCallButton = ({ disabled, onAccept, onClick, }) => {\n    const call = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCall)();\n    const handleClick = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(async (e) => {\n        if (onClick) {\n            onClick(e);\n        }\n        else if (call) {\n            await call.join();\n            onAccept?.();\n        }\n    }, [onClick, onAccept, call]);\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(IconButton, { disabled: disabled, icon: \"call-accept\", variant: \"success\", \"data-testid\": \"accept-call-button\", onClick: handleClick }));\n};\n\nconst Notification = (props) => {\n    const { isVisible, message, children, visibilityTimeout, resetIsVisible, placement = 'top', iconClassName = 'str-video__notification__icon', close, } = props;\n    const { refs, x, y, strategy } = useFloatingUIPreset({\n        placement,\n        strategy: 'absolute',\n    });\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        if (!isVisible || !visibilityTimeout || !resetIsVisible)\n            return;\n        const timeout = setTimeout(() => {\n            resetIsVisible();\n        }, visibilityTimeout);\n        return () => clearTimeout(timeout);\n    }, [isVisible, resetIsVisible, visibilityTimeout]);\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { ref: refs.setReference, children: [isVisible && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__notification\", ref: refs.setFloating, style: {\n                    position: strategy,\n                    top: y ?? 0,\n                    left: x ?? 0,\n                    overflowY: 'auto',\n                }, children: [iconClassName && (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"i\", { className: iconClassName }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"span\", { className: \"str-video__notification__message\", children: message }), close ? ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"i\", { className: \"str-video__icon str-video__icon--close str-video__notification__close\", onClick: close })) : null] })), children] }));\n};\n\nconst PermissionNotification = (props) => {\n    const { permission, isAwaitingApproval, messageApproved, messageAwaitingApproval, messageRevoked, visibilityTimeout = 3500, children, } = props;\n    const { useHasPermissions } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCallStateHooks)();\n    const hasPermission = useHasPermissions(permission);\n    const prevHasPermission = (0,react__WEBPACK_IMPORTED_MODULE_3__.useRef)(hasPermission);\n    const [showNotification, setShowNotification] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)();\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        if (hasPermission && !prevHasPermission.current) {\n            setShowNotification('granted');\n            prevHasPermission.current = true;\n        }\n        else if (!hasPermission && prevHasPermission.current) {\n            setShowNotification('revoked');\n            prevHasPermission.current = false;\n        }\n    }, [hasPermission]);\n    const resetIsVisible = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(() => setShowNotification(undefined), []);\n    if (isAwaitingApproval) {\n        return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Notification, { isVisible: isAwaitingApproval && !hasPermission, message: messageAwaitingApproval, children: children }));\n    }\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Notification, { isVisible: !!showNotification, visibilityTimeout: visibilityTimeout, resetIsVisible: resetIsVisible, message: showNotification === 'granted' ? messageApproved : messageRevoked, children: children }));\n};\n\nconst SpeakingWhileMutedNotification = ({ children, text, placement, }) => {\n    const { useMicrophoneState } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCallStateHooks)();\n    const { isSpeakingWhileMuted } = useMicrophoneState();\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    const message = text ?? t('You are muted. Unmute to speak.');\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Notification, { message: message, isVisible: isSpeakingWhileMuted, placement: placement || 'top-start', children: children }));\n};\n\nconst RecordingInProgressNotification = ({ children, text, }) => {\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    const { isCallRecordingInProgress } = useToggleCallRecording();\n    const [isVisible, setVisible] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(false);\n    const message = text ?? t('Recording in progress...');\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        if (isCallRecordingInProgress) {\n            setVisible(true);\n        }\n        else {\n            setVisible(false);\n        }\n    }, [isCallRecordingInProgress]);\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Notification, { message: message, iconClassName: \"str-video__icon str-video__icon--recording-on\", isVisible: isVisible, placement: \"top-start\", close: () => setVisible(false), children: children }));\n};\n\nconst LoadingIndicator = ({ className, type = 'spinner', text, tooltip, }) => {\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('str-video__loading-indicator', className), title: tooltip, children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('str-video__loading-indicator__icon', type) }), text && (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"p\", { className: \"str-video__loading-indicator-text\", children: text })] }));\n};\n\nconst RecordEndConfirmation = () => {\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    const { toggleCallRecording, isAwaitingResponse } = useToggleCallRecording();\n    const { close } = useMenuContext();\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__end-recording__confirmation\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__end-recording__header\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Icon, { icon: \"recording-on\" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"h2\", { className: \"str-video__end-recording__heading\", children: t('End recording') })] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"p\", { className: \"str-video__end-recording__description\", children: t('Are you sure you want end the recording?') }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__end-recording__actions\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(CompositeButton, { variant: \"secondary\", onClick: close, children: t('Cancel') }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(CompositeButton, { variant: \"primary\", onClick: toggleCallRecording, children: isAwaitingResponse ? (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(LoadingIndicator, {}) : t('End recording') })] })] }));\n};\nconst ToggleEndRecordingMenuButton = (0,react__WEBPACK_IMPORTED_MODULE_3__.forwardRef)(function ToggleEndRecordingMenuButton(props, ref) {\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(CompositeButton, { ref: ref, active: true, variant: \"secondary\", \"data-testid\": \"recording-stop-button\", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Icon, { icon: \"recording-off\" }) }));\n});\nconst RecordCallConfirmationButton = ({ caption, }) => {\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    const { toggleCallRecording, isAwaitingResponse, isCallRecordingInProgress } = useToggleCallRecording();\n    if (isCallRecordingInProgress) {\n        return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.Restricted, { requiredGrants: [\n                _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.START_RECORD_CALL,\n                _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.STOP_RECORD_CALL,\n            ], children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(MenuToggle, { ToggleButton: ToggleEndRecordingMenuButton, visualType: MenuVisualType.PORTAL, children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(RecordEndConfirmation, {}) }) }));\n    }\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.Restricted, { requiredGrants: [\n            _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.START_RECORD_CALL,\n            _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.STOP_RECORD_CALL,\n        ], children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(CompositeButton, { active: isCallRecordingInProgress, caption: caption, title: caption || t('Record call'), variant: \"secondary\", \"data-testid\": \"recording-start-button\", onClick: isAwaitingResponse ? undefined : toggleCallRecording, children: isAwaitingResponse ? ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(LoadingIndicator, { tooltip: t('Waiting for recording to start...') })) : ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Icon, { icon: \"recording-off\" })) }) }));\n};\nconst RecordCallButton = ({ caption }) => {\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    const { toggleCallRecording, isAwaitingResponse, isCallRecordingInProgress } = useToggleCallRecording();\n    let title = caption || t('Record call');\n    if (isAwaitingResponse) {\n        title = isCallRecordingInProgress\n            ? t('Waiting for recording to stop...')\n            : t('Waiting for recording to start...');\n    }\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.Restricted, { requiredGrants: [\n            _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.START_RECORD_CALL,\n            _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.STOP_RECORD_CALL,\n        ], children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(CompositeButton, { active: isCallRecordingInProgress, caption: caption, variant: \"secondary\", \"data-testid\": isCallRecordingInProgress\n                ? 'recording-stop-button'\n                : 'recording-start-button', title: title, onClick: isAwaitingResponse ? undefined : toggleCallRecording, children: isAwaitingResponse ? ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(LoadingIndicator, {})) : ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Icon, { icon: isCallRecordingInProgress ? 'recording-on' : 'recording-off' })) }) }));\n};\n\nconst defaultEmojiReactionMap = {\n    ':like:': '👍',\n    ':raise-hand:': '✋',\n    ':fireworks:': '🎉',\n    ':dislike:': '👎',\n    ':heart:': '❤️',\n    ':smile:': '😀',\n};\nconst Reaction = ({ participant: { reaction, sessionId }, hideAfterTimeoutInMs = 5500, emojiReactionMap = defaultEmojiReactionMap, }) => {\n    const call = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCall)();\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        if (!call || !reaction)\n            return;\n        const timeoutId = setTimeout(() => {\n            call.resetReaction(sessionId);\n        }, hideAfterTimeoutInMs);\n        return () => {\n            clearTimeout(timeoutId);\n        };\n    }, [call, hideAfterTimeoutInMs, reaction, sessionId]);\n    if (!reaction)\n        return null;\n    const { emoji_code: emojiCode } = reaction;\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__reaction\", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"span\", { className: \"str-video__reaction__emoji\", children: emojiCode && emojiReactionMap[emojiCode] }) }));\n};\n\nconst defaultReactions = [\n    {\n        type: 'reaction',\n        emoji_code: ':like:',\n    },\n    {\n        // TODO OL: use `prompt` type?\n        type: 'raised-hand',\n        emoji_code: ':raise-hand:',\n    },\n    {\n        type: 'reaction',\n        emoji_code: ':fireworks:',\n    },\n    {\n        type: 'reaction',\n        emoji_code: ':dislike:',\n    },\n    {\n        type: 'reaction',\n        emoji_code: ':heart:',\n    },\n    {\n        type: 'reaction',\n        emoji_code: ':smile:',\n    },\n];\nconst ReactionsButton = ({ reactions = defaultReactions, }) => {\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.Restricted, { requiredGrants: [_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.CREATE_REACTION], children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(MenuToggle, { placement: \"top\", ToggleButton: ToggleReactionsMenuButton, visualType: MenuVisualType.MENU, children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(DefaultReactionsMenu, { reactions: reactions }) }) }));\n};\nconst ToggleReactionsMenuButton = (0,react__WEBPACK_IMPORTED_MODULE_3__.forwardRef)(function ToggleReactionsMenuButton({ menuShown }, ref) {\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(CompositeButton, { ref: ref, active: menuShown, variant: \"primary\", title: t('Reactions'), children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Icon, { icon: \"reactions\" }) }));\n});\nconst DefaultReactionsMenu = ({ reactions, layout = 'horizontal', }) => {\n    const call = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCall)();\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('str-video__reactions-menu', {\n            'str-video__reactions-menu--horizontal': layout === 'horizontal',\n            'str-video__reactions-menu--vertical': layout === 'vertical',\n        }), children: reactions.map((reaction) => ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"button\", { type: \"button\", className: \"str-video__reactions-menu__button\", onClick: () => {\n                call?.sendReaction(reaction);\n            }, children: reaction.emoji_code && defaultEmojiReactionMap[reaction.emoji_code] }, reaction.emoji_code))) }));\n};\n\nconst ScreenShareButton = (props) => {\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    const { caption } = props;\n    const { useHasOngoingScreenShare, useScreenShareState, useCallSettings } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCallStateHooks)();\n    const isSomeoneScreenSharing = useHasOngoingScreenShare();\n    const { hasPermission, requestPermission, isAwaitingPermission } = useRequestPermission(_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.SCREENSHARE);\n    const callSettings = useCallSettings();\n    const isScreenSharingAllowed = callSettings?.screensharing.enabled;\n    const { screenShare, isMute: amIScreenSharing } = useScreenShareState();\n    const disableScreenShareButton = amIScreenSharing\n        ? isSomeoneScreenSharing || isScreenSharingAllowed === false\n        : false;\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.Restricted, { requiredGrants: [_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.SCREENSHARE], children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(PermissionNotification, { permission: _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.SCREENSHARE, isAwaitingApproval: isAwaitingPermission, messageApproved: t('You can now share your screen.'), messageAwaitingApproval: t('Awaiting for an approval to share screen.'), messageRevoked: t('You can no longer share your screen.'), children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(CompositeButton, { active: isSomeoneScreenSharing, caption: caption, title: caption || t('Share screen'), variant: \"primary\", \"data-testid\": isSomeoneScreenSharing\n                    ? 'screen-share-stop-button'\n                    : 'screen-share-start-button', disabled: disableScreenShareButton, onClick: async () => {\n                    if (!hasPermission) {\n                        await requestPermission();\n                    }\n                    else {\n                        await screenShare.toggle();\n                    }\n                }, children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Icon, { icon: isSomeoneScreenSharing ? 'screen-share-on' : 'screen-share-off' }) }) }) }));\n};\n\nconst SelectContext = (0,react__WEBPACK_IMPORTED_MODULE_3__.createContext)({});\nconst Select = (props) => {\n    const { children, icon, defaultSelectedLabel, defaultSelectedIndex, handleSelect: handleSelectProp, } = props;\n    const [isOpen, setIsOpen] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(false);\n    const [activeIndex, setActiveIndex] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(null);\n    const [selectedIndex, setSelectedIndex] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(defaultSelectedIndex);\n    const [selectedLabel, setSelectedLabel] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(defaultSelectedLabel);\n    const { refs, context } = (0,_floating_ui_react__WEBPACK_IMPORTED_MODULE_5__.useFloating)({\n        placement: 'bottom-start',\n        open: isOpen,\n        onOpenChange: setIsOpen,\n        whileElementsMounted: _floating_ui_react__WEBPACK_IMPORTED_MODULE_7__.autoUpdate,\n        middleware: [(0,_floating_ui_react__WEBPACK_IMPORTED_MODULE_7__.flip)()],\n    });\n    const elementsRef = (0,react__WEBPACK_IMPORTED_MODULE_3__.useRef)([]);\n    const labelsRef = (0,react__WEBPACK_IMPORTED_MODULE_3__.useRef)([]);\n    const handleSelect = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)((index) => {\n        setSelectedIndex(index);\n        handleSelectProp(index || 0);\n        setIsOpen(false);\n        if (index !== null) {\n            setSelectedLabel(labelsRef.current[index]);\n        }\n    }, [handleSelectProp]);\n    const handleTypeaheadMatch = (index) => {\n        if (isOpen) {\n            setActiveIndex(index);\n        }\n        else {\n            handleSelect(index);\n        }\n    };\n    const listNav = (0,_floating_ui_react__WEBPACK_IMPORTED_MODULE_5__.useListNavigation)(context, {\n        listRef: elementsRef,\n        activeIndex,\n        selectedIndex,\n        onNavigate: setActiveIndex,\n    });\n    const typeahead = (0,_floating_ui_react__WEBPACK_IMPORTED_MODULE_5__.useTypeahead)(context, {\n        listRef: labelsRef,\n        activeIndex,\n        selectedIndex,\n        onMatch: handleTypeaheadMatch,\n    });\n    const click = (0,_floating_ui_react__WEBPACK_IMPORTED_MODULE_5__.useClick)(context);\n    const dismiss = (0,_floating_ui_react__WEBPACK_IMPORTED_MODULE_5__.useDismiss)(context);\n    const role = (0,_floating_ui_react__WEBPACK_IMPORTED_MODULE_5__.useRole)(context, { role: 'listbox' });\n    const { getReferenceProps, getFloatingProps, getItemProps } = (0,_floating_ui_react__WEBPACK_IMPORTED_MODULE_5__.useInteractions)([listNav, typeahead, click, dismiss, role]);\n    const selectContext = (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => ({\n        activeIndex,\n        selectedIndex,\n        getItemProps,\n        handleSelect,\n    }), [activeIndex, selectedIndex, getItemProps, handleSelect]);\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__dropdown\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__dropdown-selected\", ref: refs.setReference, tabIndex: 0, ...getReferenceProps(), children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"label\", { className: \"str-video__dropdown-selected__label\", children: [icon && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Icon, { className: \"str-video__dropdown-selected__icon\", icon: icon })), selectedLabel] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Icon, { className: \"str-video__dropdown-selected__chevron\", icon: isOpen ? 'chevron-up' : 'chevron-down' })] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(SelectContext.Provider, { value: selectContext, children: isOpen && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_floating_ui_react__WEBPACK_IMPORTED_MODULE_5__.FloatingFocusManager, { context: context, modal: false, children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__dropdown-list\", ref: refs.setFloating, ...getFloatingProps(), children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_floating_ui_react__WEBPACK_IMPORTED_MODULE_5__.FloatingList, { elementsRef: elementsRef, labelsRef: labelsRef, children: children }) }) })) })] }));\n};\nconst DropDownSelectOption = (props) => {\n    const { selected, label, icon } = props;\n    const { getItemProps, handleSelect } = (0,react__WEBPACK_IMPORTED_MODULE_3__.useContext)(SelectContext);\n    const { ref, index } = (0,_floating_ui_react__WEBPACK_IMPORTED_MODULE_5__.useListItem)();\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('str-video__dropdown-option', {\n            'str-video__dropdown-option--selected': selected,\n        }), ref: ref, ...getItemProps({\n            onClick: () => handleSelect(index),\n        }), children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Icon, { className: \"str-video__dropdown-icon\", icon: icon }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"span\", { className: \"str-video__dropdown-label\", children: label })] }));\n};\nconst DropDownSelect = (props) => {\n    const { children, icon, handleSelect, defaultSelectedLabel, defaultSelectedIndex, } = props;\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Select, { icon: icon, handleSelect: handleSelect, defaultSelectedIndex: defaultSelectedIndex, defaultSelectedLabel: defaultSelectedLabel, children: children }));\n};\n\nconst DeviceSelectorOption = ({ disabled, id, label, onChange, name, selected, defaultChecked, value, }) => {\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"label\", { className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('str-video__device-settings__option', {\n            'str-video__device-settings__option--selected': selected,\n            'str-video__device-settings__option--disabled': disabled,\n        }), htmlFor: id, children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"input\", { type: \"radio\", name: name, onChange: onChange, value: value, id: id, checked: selected, defaultChecked: defaultChecked, disabled: disabled }), label] }));\n};\nconst DeviceSelectorList = (props) => {\n    const { devices = [], selectedDeviceId: selectedDeviceFromProps, title, type, onChange, } = props;\n    // sometimes the browser (Chrome) will report the system-default device\n    // with an id of 'default'. In case when it doesn't, we'll select the first\n    // available device.\n    let selectedDeviceId = selectedDeviceFromProps;\n    if (devices.length > 0 &&\n        !devices.find((d) => d.deviceId === selectedDeviceId)) {\n        selectedDeviceId = devices[0].deviceId;\n    }\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__device-settings__device-kind\", children: [title && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__device-settings__device-selector-title\", children: title })), !devices.length ? ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(DeviceSelectorOption, { id: `${type}--default`, label: \"Default\", name: type, defaultChecked: true, value: \"default\" })) : (devices.map((device) => {\n                return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(DeviceSelectorOption, { id: `${type}--${device.deviceId}`, value: device.deviceId, label: device.label, onChange: (e) => {\n                        onChange?.(e.target.value);\n                    }, name: type, selected: device.deviceId === selectedDeviceId || devices.length === 1 }, device.deviceId));\n            }))] }));\n};\nconst DeviceSelectorDropdown = (props) => {\n    const { devices = [], selectedDeviceId: selectedDeviceFromProps, title, onChange, icon, } = props;\n    // sometimes the browser (Chrome) will report the system-default device\n    // with an id of 'default'. In case when it doesn't, we'll select the first\n    // available device.\n    let selectedDeviceId = selectedDeviceFromProps;\n    if (devices.length > 0 &&\n        !devices.find((d) => d.deviceId === selectedDeviceId)) {\n        selectedDeviceId = devices[0].deviceId;\n    }\n    const selectedIndex = devices.findIndex((d) => d.deviceId === selectedDeviceId);\n    const handleSelect = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)((index) => {\n        onChange?.(devices[index].deviceId);\n    }, [devices, onChange]);\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__device-settings__device-kind\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__device-settings__device-selector-title\", children: title }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(DropDownSelect, { icon: icon, defaultSelectedIndex: selectedIndex, defaultSelectedLabel: devices[selectedIndex]?.label, handleSelect: handleSelect, children: devices.map((device) => {\n                    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(DropDownSelectOption, { icon: icon, label: device.label, selected: device.deviceId === selectedDeviceId || devices.length === 1 }, device.deviceId));\n                }) })] }));\n};\nconst DeviceSelector = (props) => {\n    const { visualType = 'list', icon, placeholder, ...rest } = props;\n    if (visualType === 'list') {\n        return (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(DeviceSelectorList, { ...rest });\n    }\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(DeviceSelectorDropdown, { ...rest, icon: icon, placeholder: placeholder }));\n};\n\nconst DeviceSelectorAudioInput = ({ title, visualType, }) => {\n    const { useMicrophoneState } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCallStateHooks)();\n    const { microphone, selectedDevice, devices } = useMicrophoneState();\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(DeviceSelector, { devices: devices || [], selectedDeviceId: selectedDevice, type: \"audioinput\", onChange: async (deviceId) => {\n            await microphone.select(deviceId);\n        }, title: title, visualType: visualType, icon: \"mic\" }));\n};\nconst DeviceSelectorAudioOutput = ({ title, visualType, }) => {\n    const { useSpeakerState } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCallStateHooks)();\n    const { speaker, selectedDevice, devices, isDeviceSelectionSupported } = useSpeakerState();\n    if (!isDeviceSelectionSupported)\n        return null;\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(DeviceSelector, { devices: devices, type: \"audiooutput\", selectedDeviceId: selectedDevice, onChange: (deviceId) => {\n            speaker.select(deviceId);\n        }, title: title, visualType: visualType, icon: \"speaker\" }));\n};\n\nconst DeviceSelectorVideo = ({ title, visualType, }) => {\n    const { useCameraState } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCallStateHooks)();\n    const { camera, devices, selectedDevice } = useCameraState();\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(DeviceSelector, { devices: devices || [], type: \"videoinput\", selectedDeviceId: selectedDevice, onChange: async (deviceId) => {\n            await camera.select(deviceId);\n        }, title: title, visualType: visualType, icon: \"camera\" }));\n};\n\nconst DeviceSettings = ({ visualType = MenuVisualType.MENU, }) => {\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(MenuToggle, { placement: \"bottom-end\", ToggleButton: ToggleDeviceSettingsMenuButton, visualType: visualType, children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Menu, {}) }));\n};\nconst Menu = () => {\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__device-settings\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(DeviceSelectorVideo, { title: t('Select a Camera') }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(DeviceSelectorAudioInput, { title: t('Select a Mic') }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(DeviceSelectorAudioOutput, { title: t('Select Speakers') })] }));\n};\nconst ToggleDeviceSettingsMenuButton = (0,react__WEBPACK_IMPORTED_MODULE_3__.forwardRef)(function ToggleDeviceSettingsMenuButton({ menuShown }, ref) {\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(IconButton, { className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('str-video__device-settings__button', {\n            'str-video__device-settings__button--active': menuShown,\n        }), title: t('Toggle device menu'), icon: \"device-settings\", ref: ref }));\n});\n\nconst ToggleAudioPreviewButton = (props) => {\n    const { caption, Menu, menuPlacement, ...restCompositeButtonProps } = props;\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    const { useMicrophoneState } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCallStateHooks)();\n    const { microphone, isMute, hasBrowserPermission } = useMicrophoneState();\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(CompositeButton, { active: isMute, caption: caption, className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(!hasBrowserPermission && 'str-video__device-unavailable'), variant: \"secondary\", title: !hasBrowserPermission\n            ? t('Check your browser audio permissions')\n            : caption || t('Mic'), disabled: !hasBrowserPermission, \"data-testid\": isMute ? 'preview-audio-unmute-button' : 'preview-audio-mute-button', onClick: () => microphone.toggle(), Menu: Menu, menuPlacement: menuPlacement, ...restCompositeButtonProps, children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Icon, { icon: !isMute ? 'mic' : 'mic-off' }), !hasBrowserPermission && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"span\", { className: \"str-video__no-media-permission\", title: t('Check your browser audio permissions'), children: \"!\" }))] }));\n};\nconst ToggleAudioPublishingButton = (props) => {\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    const { caption, Menu = (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(DeviceSelectorAudioInput, { visualType: \"list\" }), menuPlacement = 'top', ...restCompositeButtonProps } = props;\n    const { hasPermission, requestPermission, isAwaitingPermission } = useRequestPermission(_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.SEND_AUDIO);\n    const { useMicrophoneState } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCallStateHooks)();\n    const { microphone, isMute, hasBrowserPermission } = useMicrophoneState();\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.Restricted, { requiredGrants: [_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.SEND_AUDIO], children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(PermissionNotification, { permission: _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.SEND_AUDIO, isAwaitingApproval: isAwaitingPermission, messageApproved: t('You can now speak.'), messageAwaitingApproval: t('Awaiting for an approval to speak.'), messageRevoked: t('You can no longer speak.'), children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(CompositeButton, { active: isMute, caption: caption, title: !hasPermission\n                    ? t('You have no permission to share your audio')\n                    : !hasBrowserPermission\n                        ? t('Check your browser mic permissions')\n                        : caption || t('Mic'), variant: \"secondary\", disabled: !hasBrowserPermission || !hasPermission, \"data-testid\": isMute ? 'audio-unmute-button' : 'audio-mute-button', onClick: async () => {\n                    if (!hasPermission) {\n                        await requestPermission();\n                    }\n                    else {\n                        await microphone.toggle();\n                    }\n                }, Menu: Menu, menuPlacement: menuPlacement, menuOffset: 16, ...restCompositeButtonProps, children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Icon, { icon: isMute ? 'mic-off' : 'mic' }), (!hasBrowserPermission || !hasPermission) && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"span\", { className: \"str-video__no-media-permission\", children: \"!\" }))] }) }) }));\n};\n\nconst ToggleVideoPreviewButton = (props) => {\n    const { caption, Menu = DeviceSelectorVideo, menuPlacement = 'top', ...restCompositeButtonProps } = props;\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    const { useCameraState } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCallStateHooks)();\n    const { camera, isMute, hasBrowserPermission } = useCameraState();\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(CompositeButton, { active: isMute, caption: caption, className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(!hasBrowserPermission && 'str-video__device-unavailable'), title: !hasBrowserPermission\n            ? t('Check your browser video permissions')\n            : caption || t('Video'), variant: \"secondary\", \"data-testid\": isMute ? 'preview-video-unmute-button' : 'preview-video-mute-button', onClick: () => camera.toggle(), disabled: !hasBrowserPermission, Menu: Menu, menuPlacement: menuPlacement, ...restCompositeButtonProps, children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Icon, { icon: !isMute ? 'camera' : 'camera-off' }), !hasBrowserPermission && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"span\", { className: \"str-video__no-media-permission\", title: t('Check your browser video permissions'), children: \"!\" }))] }));\n};\nconst ToggleVideoPublishingButton = (props) => {\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    const { caption, Menu = (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(DeviceSelectorVideo, { visualType: \"list\" }), menuPlacement = 'top', ...restCompositeButtonProps } = props;\n    const { hasPermission, requestPermission, isAwaitingPermission } = useRequestPermission(_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.SEND_VIDEO);\n    const { useCameraState, useCallSettings } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCallStateHooks)();\n    const { camera, isMute, hasBrowserPermission } = useCameraState();\n    const callSettings = useCallSettings();\n    const isPublishingVideoAllowed = callSettings?.video.enabled;\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.Restricted, { requiredGrants: [_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.SEND_VIDEO], children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(PermissionNotification, { permission: _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.SEND_VIDEO, isAwaitingApproval: isAwaitingPermission, messageApproved: t('You can now share your video.'), messageAwaitingApproval: t('Awaiting for an approval to share your video.'), messageRevoked: t('You can no longer share your video.'), children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(CompositeButton, { active: isMute, caption: caption, variant: \"secondary\", title: !hasPermission\n                    ? t('You have no permission to share your video')\n                    : !hasBrowserPermission\n                        ? t('Check your browser video permissions')\n                        : !isPublishingVideoAllowed\n                            ? t('Video publishing is disabled by the system')\n                            : caption || t('Video'), disabled: !hasBrowserPermission || !hasPermission || !isPublishingVideoAllowed, \"data-testid\": isMute ? 'video-unmute-button' : 'video-mute-button', onClick: async () => {\n                    if (!hasPermission) {\n                        await requestPermission();\n                    }\n                    else {\n                        await camera.toggle();\n                    }\n                }, Menu: Menu, menuPlacement: menuPlacement, menuOffset: 16, ...restCompositeButtonProps, children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Icon, { icon: isMute ? 'camera-off' : 'camera' }), (!hasBrowserPermission ||\n                        !hasPermission ||\n                        !isPublishingVideoAllowed) && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"span\", { className: \"str-video__no-media-permission\", children: \"!\" }))] }) }) }));\n};\n\nconst EndCallMenu = (props) => {\n    const { onLeave, onEnd } = props;\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__end-call__confirmation\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"button\", { className: \"str-video__button str-video__end-call__leave\", type: \"button\", \"data-testid\": \"leave-call-button\", onClick: onLeave, children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Icon, { className: \"str-video__button__icon str-video__end-call__leave-icon\", icon: \"logout\" }), t('Leave call')] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.Restricted, { requiredGrants: [_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.END_CALL], children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"button\", { className: \"str-video__button str-video__end-call__end\", type: \"button\", \"data-testid\": \"end-call-for-all-button\", onClick: onEnd, children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Icon, { className: \"str-video__button__icon str-video__end-call__end-icon\", icon: \"call-end\" }), t('End call for all')] }) })] }));\n};\nconst CancelCallToggleMenuButton = (0,react__WEBPACK_IMPORTED_MODULE_3__.forwardRef)(function CancelCallToggleMenuButton(props, ref) {\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(IconButton, { icon: \"call-end\", variant: \"danger\", title: t('Leave call'), \"data-testid\": \"leave-call-button\", ref: ref }));\n});\nconst CancelCallConfirmButton = ({ onClick, onLeave, }) => {\n    const call = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCall)();\n    const handleLeave = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(async (e) => {\n        if (onClick) {\n            onClick(e);\n        }\n        else if (call) {\n            await call.leave();\n            onLeave?.();\n        }\n    }, [onClick, onLeave, call]);\n    const handleEndCall = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(async (e) => {\n        if (onClick) {\n            onClick(e);\n        }\n        else if (call) {\n            await call.endCall();\n            onLeave?.();\n        }\n    }, [onClick, onLeave, call]);\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(MenuToggle, { placement: \"top-start\", ToggleButton: CancelCallToggleMenuButton, children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(EndCallMenu, { onEnd: handleEndCall, onLeave: handleLeave }) }));\n};\nconst CancelCallButton = ({ disabled, onClick, onLeave, }) => {\n    const call = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCall)();\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    const handleClick = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(async (e) => {\n        if (onClick) {\n            onClick(e);\n        }\n        else if (call) {\n            await call.leave();\n            onLeave?.();\n        }\n    }, [onClick, onLeave, call]);\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(IconButton, { disabled: disabled, icon: \"call-end\", variant: \"danger\", title: t('Leave call'), \"data-testid\": \"cancel-call-button\", onClick: handleClick }));\n};\n\nconst CallControls = ({ onLeave }) => ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__call-controls\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(RecordCallButton, {}), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(ReactionsButton, {}), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(ScreenShareButton, {}), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(SpeakingWhileMutedNotification, { children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(ToggleAudioPublishingButton, {}) }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(ToggleVideoPublishingButton, {}), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(CancelCallButton, { onLeave: onLeave })] }));\n\nchart_js__WEBPACK_IMPORTED_MODULE_8__.Chart.register(chart_js__WEBPACK_IMPORTED_MODULE_8__.CategoryScale, chart_js__WEBPACK_IMPORTED_MODULE_8__.LinearScale, chart_js__WEBPACK_IMPORTED_MODULE_8__.LineElement, chart_js__WEBPACK_IMPORTED_MODULE_8__.PointElement);\nconst CallStatsLatencyChart = (props) => {\n    const { values } = props;\n    let max = 0;\n    const data = {\n        labels: values.map((point) => {\n            const date = new Date(point.x * 1000);\n            return `${date.getHours()}:${date.getMinutes()}`;\n        }),\n        datasets: [\n            {\n                data: values.map((point) => {\n                    const { y } = point;\n                    max = Math.max(max, y);\n                    return point;\n                }),\n                borderColor: '#00e2a1',\n                backgroundColor: '#00e2a1',\n            },\n        ],\n    };\n    const options = (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => {\n        return {\n            maintainAspectRatio: false,\n            animation: {\n                duration: 0,\n            },\n            elements: {\n                line: {\n                    borderWidth: 1,\n                },\n                point: {\n                    radius: 2,\n                },\n            },\n            scales: {\n                y: {\n                    position: 'right',\n                    stacked: true,\n                    min: 0,\n                    max: Math.max(180, Math.ceil((max + 10) / 10) * 10),\n                    grid: {\n                        display: true,\n                        color: '#979ca0',\n                    },\n                    ticks: {\n                        stepSize: 30,\n                    },\n                },\n                x: {\n                    grid: {\n                        display: false,\n                    },\n                    ticks: {\n                        display: false,\n                    },\n                },\n            },\n        };\n    }, [max]);\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__call-stats-line-chart-container\", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(react_chartjs_2__WEBPACK_IMPORTED_MODULE_9__.Line, { options: options, data: data, className: \"str-video__call-stats__latencychart\" }) }));\n};\n\nvar Statuses;\n(function (Statuses) {\n    Statuses[\"GOOD\"] = \"Good\";\n    Statuses[\"OK\"] = \"Ok\";\n    Statuses[\"BAD\"] = \"Bad\";\n})(Statuses || (Statuses = {}));\nconst statsStatus = ({ value, lowBound, highBound, }) => {\n    if (value <= lowBound) {\n        return Statuses.GOOD;\n    }\n    if (value >= lowBound && value <= highBound) {\n        return Statuses.OK;\n    }\n    if (value >= highBound) {\n        return Statuses.BAD;\n    }\n    return Statuses.GOOD;\n};\nconst CallStats = (props) => {\n    const { latencyLowBound = 75, latencyHighBound = 400 } = props;\n    const [latencyBuffer, setLatencyBuffer] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(() => {\n        const now = Date.now();\n        return Array.from({ length: 20 }, (_, i) => ({ x: now + i, y: 0 }));\n    });\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    const [publishBitrate, setPublishBitrate] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)('-');\n    const [subscribeBitrate, setSubscribeBitrate] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)('-');\n    const previousStats = (0,react__WEBPACK_IMPORTED_MODULE_3__.useRef)();\n    const { useCallStatsReport } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCallStateHooks)();\n    const callStatsReport = useCallStatsReport();\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        if (!callStatsReport)\n            return;\n        if (!previousStats.current) {\n            previousStats.current = callStatsReport;\n            return;\n        }\n        const previousCallStatsReport = previousStats.current;\n        setPublishBitrate(() => {\n            return calculatePublishBitrate(previousCallStatsReport, callStatsReport);\n        });\n        setSubscribeBitrate(() => {\n            return calculateSubscribeBitrate(previousCallStatsReport, callStatsReport);\n        });\n        setLatencyBuffer((latencyBuf) => {\n            const newLatencyBuffer = latencyBuf.slice(-19);\n            newLatencyBuffer.push({\n                x: callStatsReport.timestamp,\n                y: callStatsReport.publisherStats.averageRoundTripTimeInMs,\n            });\n            return newLatencyBuffer;\n        });\n        previousStats.current = callStatsReport;\n    }, [callStatsReport]);\n    const latencyComparison = {\n        lowBound: latencyLowBound,\n        highBound: latencyHighBound,\n        value: callStatsReport?.publisherStats.averageRoundTripTimeInMs || 0,\n    };\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__call-stats\", children: callStatsReport && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Fragment, { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__call-stats__header\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"h3\", { className: \"str-video__call-stats__heading\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Icon, { className: \"str-video__call-stats__icon\", icon: \"call-latency\" }), t('Call Latency')] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"p\", { className: \"str-video__call-stats__description\", children: t('Very high latency values may reduce call quality, cause lag, and make the call less enjoyable.') })] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__call-stats__latencychart\", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(CallStatsLatencyChart, { values: latencyBuffer }) }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__call-stats__header\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"h3\", { className: \"str-video__call-stats__heading\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Icon, { className: \"str-video__call-stats__icon\", icon: \"network-quality\" }), t('Call performance')] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"p\", { className: \"str-video__call-stats__description\", children: t('Very high latency values may reduce call quality, cause lag, and make the call less enjoyable.') })] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__call-stats__card-container\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(StatCard, { label: \"Region\", value: callStatsReport.datacenter }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(StatCard, { label: \"Latency\", value: `${callStatsReport.publisherStats.averageRoundTripTimeInMs} ms.`, comparison: latencyComparison }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(StatCard, { label: \"Receive jitter\", value: `${callStatsReport.subscriberStats.averageJitterInMs} ms.`, comparison: {\n                                ...latencyComparison,\n                                value: callStatsReport.subscriberStats.averageJitterInMs,\n                            } }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(StatCard, { label: \"Publish jitter\", value: `${callStatsReport.publisherStats.averageJitterInMs} ms.`, comparison: {\n                                ...latencyComparison,\n                                value: callStatsReport.publisherStats.averageJitterInMs,\n                            } }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(StatCard, { label: \"Publish resolution\", value: toFrameSize(callStatsReport.publisherStats) }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(StatCard, { label: \"Publish quality drop reason\", value: callStatsReport.publisherStats.qualityLimitationReasons }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(StatCard, { label: \"Receiving resolution\", value: toFrameSize(callStatsReport.subscriberStats) }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(StatCard, { label: \"Receive quality drop reason\", value: callStatsReport.subscriberStats.qualityLimitationReasons }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(StatCard, { label: \"Publish bitrate\", value: publishBitrate }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(StatCard, { label: \"Receiving bitrate\", value: subscribeBitrate })] })] })) }));\n};\nconst StatCardExplanation = (props) => {\n    const { description } = props;\n    const [isOpen, setIsOpen] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(false);\n    const { refs, floatingStyles, context } = (0,_floating_ui_react__WEBPACK_IMPORTED_MODULE_5__.useFloating)({\n        open: isOpen,\n        onOpenChange: setIsOpen,\n    });\n    const hover = (0,_floating_ui_react__WEBPACK_IMPORTED_MODULE_5__.useHover)(context);\n    const { getReferenceProps, getFloatingProps } = (0,_floating_ui_react__WEBPACK_IMPORTED_MODULE_5__.useInteractions)([hover]);\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Fragment, { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__call-explanation\", ref: refs.setReference, ...getReferenceProps(), children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Icon, { className: \"str-video__call-explanation__icon\", icon: \"info\" }) }), isOpen && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__call-explanation__description\", ref: refs.setFloating, style: floatingStyles, ...getFloatingProps(), children: description }))] }));\n};\nconst StatsTag = ({ children, status = Statuses.GOOD, }) => {\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('str-video__call-stats__tag', {\n            'str-video__call-stats__tag--good': status === Statuses.GOOD,\n            'str-video__call-stats__tag--ok': status === Statuses.OK,\n            'str-video__call-stats__tag--bad': status === Statuses.BAD,\n        }), children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__call-stats__tag__text\", children: children }) }));\n};\nconst StatCard = (props) => {\n    const { label, value, description, comparison } = props;\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    const status = comparison ? statsStatus(comparison) : undefined;\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__call-stats__card\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__call-stats__card-content\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__call-stats__card-label\", children: [label, description && (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(StatCardExplanation, { description: description })] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__call-stats__card-value\", children: value })] }), comparison && status && (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(StatsTag, { status: status, children: t(status) })] }));\n};\nconst toFrameSize = (stats) => {\n    const { highestFrameWidth: w, highestFrameHeight: h, highestFramesPerSecond: fps, } = stats;\n    let size = `-`;\n    if (w && h) {\n        size = `${w}x${h}`;\n        if (fps) {\n            size += `@${fps}fps.`;\n        }\n    }\n    return size;\n};\nconst calculatePublishBitrate = (previousCallStatsReport, callStatsReport) => {\n    const { publisherStats: { totalBytesSent: previousTotalBytesSent, timestamp: previousTimestamp, }, } = previousCallStatsReport;\n    const { publisherStats: { totalBytesSent, timestamp }, } = callStatsReport;\n    const bytesSent = totalBytesSent - previousTotalBytesSent;\n    const timeElapsed = timestamp - previousTimestamp;\n    return `${((bytesSent * 8) / timeElapsed).toFixed(2)} kbps`;\n};\nconst calculateSubscribeBitrate = (previousCallStatsReport, callStatsReport) => {\n    const { subscriberStats: { totalBytesReceived: previousTotalBytesReceived, timestamp: previousTimestamp, }, } = previousCallStatsReport;\n    const { subscriberStats: { totalBytesReceived, timestamp }, } = callStatsReport;\n    const bytesReceived = totalBytesReceived - previousTotalBytesReceived;\n    const timeElapsed = timestamp - previousTimestamp;\n    return `${((bytesReceived * 8) / timeElapsed).toFixed(2)} kbps`;\n};\n\nconst CallStatsButton = () => ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(MenuToggle, { placement: \"top-end\", ToggleButton: ToggleMenuButton, children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(CallStats, {}) }));\nconst ToggleMenuButton = (0,react__WEBPACK_IMPORTED_MODULE_3__.forwardRef)(function ToggleMenuButton(props, ref) {\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    const { caption, menuShown } = props;\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(CompositeButton, { ref: ref, active: menuShown, caption: caption, title: caption || t('Statistics'), \"data-testid\": \"stats-button\", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Icon, { icon: \"stats\" }) }));\n});\n\nconst ToggleAudioOutputButton = (props) => {\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    const { caption, Menu = DeviceSelectorAudioOutput, menuPlacement = 'top', } = props;\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(CompositeButton, { Menu: Menu, menuPlacement: menuPlacement, caption: caption, title: caption || t('Speakers'), \"data-testid\": \"audio-output-button\", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Icon, { icon: \"speaker\" }) }));\n};\n\nconst BlockedUserListing = ({ data }) => {\n    if (!data.length)\n        return null;\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Fragment, { children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__participant-listing\", children: data.map((userId) => ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(BlockedUserListingItem, { userId: userId }, userId))) }) }));\n};\nconst BlockedUserListingItem = ({ userId }) => {\n    const call = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCall)();\n    const unblockUserClickHandler = () => {\n        if (userId)\n            call?.unblockUser(userId);\n    };\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__participant-listing-item\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__participant-listing-item__display-name\", children: userId }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.Restricted, { requiredGrants: [_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.BLOCK_USERS], children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(TextButton, { onClick: unblockUserClickHandler, children: \"Unblock\" }) })] }));\n};\n\nconst CallParticipantListHeader = ({ onClose, }) => {\n    const { useParticipants, useAnonymousParticipantCount } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCallStateHooks)();\n    const participants = useParticipants();\n    const anonymousParticipantCount = useAnonymousParticipantCount();\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__participant-list-header\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__participant-list-header__title\", children: [t('Participants'), ' ', (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"span\", { className: \"str-video__participant-list-header__title-count\", children: [\"[\", participants.length, \"]\"] }), anonymousParticipantCount > 0 && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"span\", { className: \"str-video__participant-list-header__title-anonymous\", children: t('Anonymous', { count: anonymousParticipantCount }) }))] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(IconButton, { onClick: onClose, className: \"str-video__participant-list-header__close-button\", icon: \"close\" })] }));\n};\n\nconst Tooltip = ({ children, referenceElement, tooltipClassName, tooltipPlacement = 'top', visible = false, }) => {\n    const { refs, x, y, strategy } = useFloatingUIPreset({\n        placement: tooltipPlacement,\n        strategy: 'absolute',\n    });\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        refs.setReference(referenceElement);\n    }, [referenceElement, refs]);\n    if (!visible)\n        return null;\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('str-video__tooltip', tooltipClassName), ref: refs.setFloating, style: {\n            position: strategy,\n            top: y ?? 0,\n            left: x ?? 0,\n            overflowY: 'auto',\n        }, children: children }));\n};\n\nconst useEnterLeaveHandlers = ({ onMouseEnter, onMouseLeave, } = {}) => {\n    const [tooltipVisible, setTooltipVisible] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(false);\n    const handleMouseEnter = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)((e) => {\n        setTooltipVisible(true);\n        onMouseEnter?.(e);\n    }, [onMouseEnter]);\n    const handleMouseLeave = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)((e) => {\n        setTooltipVisible(false);\n        onMouseLeave?.(e);\n    }, [onMouseLeave]);\n    return { handleMouseEnter, handleMouseLeave, tooltipVisible };\n};\n\n// todo: duplicate of CallParticipantList.tsx#MediaIndicator - refactor to a single component\nconst WithTooltip = ({ title, tooltipClassName, tooltipPlacement, ...props }) => {\n    const { handleMouseEnter, handleMouseLeave, tooltipVisible } = useEnterLeaveHandlers();\n    const [tooltipAnchor, setTooltipAnchor] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(null);\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Fragment, { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Tooltip, { referenceElement: tooltipAnchor, visible: tooltipVisible, tooltipClassName: tooltipClassName, tooltipPlacement: tooltipPlacement, children: title || '' }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { ref: setTooltipAnchor, onMouseEnter: handleMouseEnter, onMouseLeave: handleMouseLeave, ...props })] }));\n};\n\nconst CallParticipantListingItem = ({ participant, DisplayName = DefaultDisplayName, }) => {\n    const isAudioOn = participant.publishedTracks.includes(_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.SfuModels.TrackType.AUDIO);\n    const isVideoOn = participant.publishedTracks.includes(_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.SfuModels.TrackType.VIDEO);\n    const isPinned = !!participant.pin;\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__participant-listing-item\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Avatar, { name: participant.name, imageSrc: participant.image }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(DisplayName, { participant: participant }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__participant-listing-item__media-indicator-group\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(MediaIndicator, { title: isAudioOn ? t('Microphone on') : t('Microphone off'), className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('str-video__participant-listing-item__icon', `str-video__participant-listing-item__icon-${isAudioOn ? 'mic' : 'mic-off'}`) }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(MediaIndicator, { title: isVideoOn ? t('Camera on') : t('Camera off'), className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('str-video__participant-listing-item__icon', `str-video__participant-listing-item__icon-${isVideoOn ? 'camera' : 'camera-off'}`) }), isPinned && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(MediaIndicator, { title: t('Pinned'), className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('str-video__participant-listing-item__icon', 'str-video__participant-listing-item__icon-pinned') })), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(MenuToggle, { placement: \"bottom-end\", ToggleButton: ToggleButton$2, children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(ParticipantViewContext.Provider, { value: { participant, trackType: 'none' }, children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(ParticipantActionsContextMenu, {}) }) })] })] }));\n};\nconst MediaIndicator = (props) => ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(WithTooltip, { ...props }));\nconst DefaultDisplayName = ({ participant }) => {\n    const connectedUser = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useConnectedUser)();\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    const meFlag = participant.userId === connectedUser?.id ? t('Me') : '';\n    const nameOrId = participant.name || participant.userId || t('Unknown');\n    let displayName;\n    if (!participant.name) {\n        displayName = meFlag || nameOrId || t('Unknown');\n    }\n    else if (meFlag) {\n        displayName = `${nameOrId} (${meFlag})`;\n    }\n    else {\n        displayName = nameOrId;\n    }\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(WithTooltip, { className: \"str-video__participant-listing-item__display-name\", title: displayName, children: displayName }));\n};\nconst ToggleButton$2 = (0,react__WEBPACK_IMPORTED_MODULE_3__.forwardRef)(function ToggleButton(props, ref) {\n    return (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(IconButton, { enabled: props.menuShown, icon: \"ellipsis\", ref: ref });\n});\n\nconst CallParticipantListing = ({ data, }) => ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__participant-listing\", children: data.map((participant) => ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(CallParticipantListingItem, { participant: participant }, participant.sessionId))) }));\n\nconst EmptyParticipantSearchList = () => {\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__participant-list--empty\", children: t('No participants found') }));\n};\n\nconst SearchInput = ({ exitSearch, isActive, ...rest }) => {\n    const [inputElement, setInputElement] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(null);\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        if (!inputElement)\n            return;\n        const handleKeyDown = (e) => {\n            if (e.key.toLowerCase() === 'escape')\n                exitSearch();\n        };\n        inputElement.addEventListener('keydown', handleKeyDown);\n        return () => {\n            inputElement.removeEventListener('keydown', handleKeyDown);\n        };\n    }, [exitSearch, inputElement]);\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('str-video__search-input__container', {\n            'str-video__search-input__container--active': isActive,\n        }), children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"input\", { placeholder: \"Search\", ...rest, ref: setInputElement }), isActive ? ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"button\", { className: \"str-video__search-input__clear-btn\", onClick: exitSearch, children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"span\", { className: \"str-video__search-input__icon--active\" }) })) : ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"span\", { className: \"str-video__search-input__icon\" }))] }));\n};\n\nconst SearchResults = ({ EmptySearchResultComponent, LoadingIndicator: LoadingIndicator$1 = LoadingIndicator, searchQueryInProgress, searchResults, SearchResultList, }) => {\n    if (searchQueryInProgress) {\n        return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__search-results--loading\", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(LoadingIndicator$1, {}) }));\n    }\n    if (!searchResults.length) {\n        return (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(EmptySearchResultComponent, {});\n    }\n    return (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(SearchResultList, { data: searchResults });\n};\n\nconst useSearch = ({ debounceInterval, searchFn, searchQuery = '', }) => {\n    const [searchResults, setSearchResults] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)([]);\n    const [searchQueryInProgress, setSearchQueryInProgress] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(false);\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        if (!searchQuery.length) {\n            setSearchQueryInProgress(false);\n            setSearchResults([]);\n            return;\n        }\n        setSearchQueryInProgress(true);\n        const timeout = setTimeout(async () => {\n            try {\n                const results = await searchFn(searchQuery);\n                setSearchResults(results);\n            }\n            catch (error) {\n                console.error(error);\n            }\n            finally {\n                setSearchQueryInProgress(false);\n            }\n        }, debounceInterval);\n        return () => {\n            clearTimeout(timeout);\n        };\n    }, [debounceInterval, searchFn, searchQuery]);\n    return {\n        searchQueryInProgress,\n        searchResults,\n    };\n};\n\nconst UserListTypes = {\n    active: 'Active users',\n    blocked: 'Blocked users',\n};\nconst DEFAULT_DEBOUNCE_SEARCH_INTERVAL = 200;\nconst CallParticipantsList = ({ onClose, activeUsersSearchFn, blockedUsersSearchFn, debounceSearchInterval, }) => {\n    const [searchQuery, setSearchQuery] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)('');\n    const [userListType, setUserListType] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)('active');\n    const exitSearch = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(() => setSearchQuery(''), []);\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__participant-list\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(CallParticipantListHeader, { onClose: onClose }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(SearchInput, { value: searchQuery, onChange: ({ currentTarget }) => setSearchQuery(currentTarget.value), exitSearch: exitSearch, isActive: !!searchQuery }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(CallParticipantListContentHeader, { userListType: userListType, setUserListType: setUserListType }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__participant-list__content\", children: [userListType === 'active' && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(ActiveUsersSearchResults, { searchQuery: searchQuery, activeUsersSearchFn: activeUsersSearchFn, debounceSearchInterval: debounceSearchInterval })), userListType === 'blocked' && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(BlockedUsersSearchResults, { searchQuery: searchQuery, blockedUsersSearchFn: blockedUsersSearchFn, debounceSearchInterval: debounceSearchInterval }))] })] }));\n};\nconst CallParticipantListContentHeader = ({ userListType, setUserListType, }) => {\n    const call = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCall)();\n    const muteAll = () => {\n        call?.muteAllUsers('audio');\n    };\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__participant-list__content-header\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__participant-list__content-header-title\", children: userListType === 'active' && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.Restricted, { requiredGrants: [_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.MUTE_USERS], hasPermissionsOnly: true, children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(TextButton, { onClick: muteAll, children: \"Mute all\" }) })) }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(MenuToggle, { placement: \"bottom-end\", ToggleButton: ToggleButton$1, children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(GenericMenu, { children: Object.keys(UserListTypes).map((lt) => ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(GenericMenuButtonItem, { \"aria-selected\": lt === userListType, onClick: () => setUserListType(lt), children: UserListTypes[lt] }, lt))) }) })] }));\n};\nconst ActiveUsersSearchResults = ({ searchQuery, activeUsersSearchFn: activeUsersSearchFnFromProps, debounceSearchInterval = DEFAULT_DEBOUNCE_SEARCH_INTERVAL, }) => {\n    const { useParticipants } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCallStateHooks)();\n    const participants = useParticipants({ sortBy: _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.name });\n    const activeUsersSearchFn = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)((queryString) => {\n        const queryRegExp = new RegExp(queryString, 'i');\n        return Promise.resolve(participants.filter((participant) => {\n            return participant.name.match(queryRegExp);\n        }));\n    }, [participants]);\n    const { searchQueryInProgress, searchResults } = useSearch({\n        searchFn: activeUsersSearchFnFromProps ?? activeUsersSearchFn,\n        debounceInterval: debounceSearchInterval,\n        searchQuery,\n    });\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(SearchResults, { EmptySearchResultComponent: EmptyParticipantSearchList, LoadingIndicator: LoadingIndicator, searchQueryInProgress: searchQueryInProgress, searchResults: searchQuery ? searchResults : participants, SearchResultList: CallParticipantListing }));\n};\nconst BlockedUsersSearchResults = ({ blockedUsersSearchFn: blockedUsersSearchFnFromProps, debounceSearchInterval = DEFAULT_DEBOUNCE_SEARCH_INTERVAL, searchQuery, }) => {\n    const { useCallBlockedUserIds } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCallStateHooks)();\n    const blockedUsers = useCallBlockedUserIds();\n    const blockedUsersSearchFn = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)((queryString) => {\n        const queryRegExp = new RegExp(queryString, 'i');\n        return Promise.resolve(blockedUsers.filter((blockedUser) => {\n            return blockedUser.match(queryRegExp);\n        }));\n    }, [blockedUsers]);\n    const { searchQueryInProgress, searchResults } = useSearch({\n        searchFn: blockedUsersSearchFnFromProps ?? blockedUsersSearchFn,\n        debounceInterval: debounceSearchInterval,\n        searchQuery,\n    });\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(SearchResults, { EmptySearchResultComponent: EmptyParticipantSearchList, LoadingIndicator: LoadingIndicator, searchQueryInProgress: searchQueryInProgress, searchResults: searchQuery ? searchResults : blockedUsers, SearchResultList: BlockedUserListing }));\n};\nconst ToggleButton$1 = (0,react__WEBPACK_IMPORTED_MODULE_3__.forwardRef)(function ToggleButton(props, ref) {\n    return (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(IconButton, { enabled: props.menuShown, icon: \"filter\", ref: ref });\n});\n\nconst CallPreview = (props) => {\n    const { className, style } = props;\n    const call = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCall)();\n    const { useCallThumbnail } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCallStateHooks)();\n    const thumbnail = useCallThumbnail();\n    const [imageRef, setImageRef] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(null);\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        if (!imageRef || !call)\n            return;\n        const cleanup = call.bindCallThumbnailElement(imageRef);\n        return () => cleanup();\n    }, [imageRef, call]);\n    if (!thumbnail)\n        return null;\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"img\", { className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('str-video__call-preview', className), style: style, alt: \"Call Preview Thumbnail\", ref: setImageRef }));\n};\n\nconst CallRecordingListHeader = ({ callRecordings, onRefresh, }) => {\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__call-recording-list__header\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__call-recording-list__title\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"span\", { children: t('Call Recordings') }), callRecordings.length ? (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"span\", { children: [\"(\", callRecordings.length, \")\"] }) : null] }), onRefresh && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(IconButton, { icon: \"refresh\", title: t('Refresh'), onClick: onRefresh }))] }));\n};\n\nconst dateFormat = (date) => {\n    const format = new Date(date);\n    return format.toTimeString().split(' ')[0];\n};\nconst CallRecordingListItem = ({ recording, }) => {\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"li\", { className: \"str-video__call-recording-list__item\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__call-recording-list__table-cell str-video__call-recording-list__filename\", children: recording.filename }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__call-recording-list__table-cell str-video__call-recording-list__time\", children: dateFormat(recording.start_time) }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__call-recording-list__table-cell str-video__call-recording-list__time\", children: dateFormat(recording.end_time) }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__call-recording-list__table-cell str-video__call-recording-list__download\", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"a\", { className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('str-video__call-recording-list-item__action-button', 'str-video__call-recording-list-item__action-button--download'), role: \"button\", href: recording.url, download: recording.filename, title: \"Download the recording\", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Icon, { icon: \"download\" }) }) })] }));\n};\n\nconst EmptyCallRecordingListing = () => {\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__call-recording-list__listing str-video__call-recording-list__listing--empty\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__call-recording-list__listing--icon-empty\" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"p\", { className: \"str-video__call-recording-list__listing--text-empty\", children: \"No recordings available\" })] }));\n};\n\nconst LoadingCallRecordingListing = ({ callRecordings, }) => {\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Fragment, { children: [callRecordings.map((recording) => ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(CallRecordingListItem, { recording: recording }, recording.filename))), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(LoadingIndicator, { text: \"Recording getting ready\" })] }));\n};\n\nconst CallRecordingList = ({ callRecordings, CallRecordingListHeader: CallRecordingListHeader$1 = CallRecordingListHeader, CallRecordingListItem: CallRecordingListItem$1 = CallRecordingListItem, EmptyCallRecordingList = EmptyCallRecordingListing, loading, LoadingCallRecordingList = LoadingCallRecordingListing, onRefresh, }) => {\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__call-recording-list\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(CallRecordingListHeader$1, { callRecordings: callRecordings, onRefresh: onRefresh }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__call-recording-list__listing\", children: loading ? ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(LoadingCallRecordingList, { callRecordings: callRecordings })) : callRecordings.length ? ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Fragment, { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"ul\", { className: \"str-video__call-recording-list__list\", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"li\", { className: \"str-video__call-recording-list__item\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__call-recording-list__filename\", children: \"Name\" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__call-recording-list__time\", children: \"Start time\" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__call-recording-list__time\", children: \"End time\" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__call-recording-list__download\" })] }) }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"ul\", { className: \"str-video__call-recording-list__list\", children: callRecordings.map((recording) => ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(CallRecordingListItem$1, { recording: recording }, recording.filename))) })] })) : ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(EmptyCallRecordingList, {})) })] }));\n};\n\nconst RingingCallControls = () => {\n    const call = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCall)();\n    const { useCallCallingState } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCallStateHooks)();\n    const callCallingState = useCallCallingState();\n    if (!call)\n        return null;\n    const buttonsDisabled = callCallingState !== _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.CallingState.RINGING;\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__pending-call-controls\", children: call.isCreatedByMe ? ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(CancelCallButton, { disabled: buttonsDisabled })) : ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Fragment, { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(AcceptCallButton, { disabled: buttonsDisabled }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(CancelCallButton, { onClick: () => call.leave({ reject: true }), disabled: buttonsDisabled })] })) }));\n};\n\nconst CALLING_STATE_TO_LABEL = {\n    [_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.CallingState.JOINING]: 'Joining',\n    [_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.CallingState.RINGING]: 'Ringing',\n    [_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.CallingState.MIGRATING]: 'Migrating',\n    [_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.CallingState.RECONNECTING]: 'Re-connecting',\n    [_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.CallingState.RECONNECTING_FAILED]: 'Failed',\n    [_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.CallingState.OFFLINE]: 'No internet connection',\n    [_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.CallingState.IDLE]: '',\n    [_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.CallingState.UNKNOWN]: '',\n    [_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.CallingState.JOINED]: 'Joined',\n    [_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.CallingState.LEFT]: 'Left call',\n};\nconst RingingCall = (props) => {\n    const { includeSelf = false, totalMembersToShow = 3 } = props;\n    const call = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCall)();\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    const { useCallCallingState, useCallMembers } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCallStateHooks)();\n    const callingState = useCallCallingState();\n    const members = useCallMembers();\n    const connectedUser = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useConnectedUser)();\n    if (!call)\n        return null;\n    // take the first N members to show their avatars\n    const membersToShow = (members || [])\n        .slice(0, totalMembersToShow)\n        .map(({ user }) => user)\n        .filter((user) => user.id !== connectedUser?.id || includeSelf);\n    if (includeSelf &&\n        !membersToShow.find((user) => user.id === connectedUser?.id)) {\n        // if the current user is not in the initial batch of members,\n        // replace the first item in membersToShow array with the current user\n        const self = members.find(({ user }) => user.id === connectedUser?.id);\n        if (self) {\n            membersToShow.splice(0, 1, self.user);\n        }\n    }\n    const callingStateLabel = CALLING_STATE_TO_LABEL[callingState];\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__call-panel str-video__call-panel--ringing\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__call-panel__members-list\", children: membersToShow.map((user) => ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__call-panel__member-box\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Avatar, { name: user.name, imageSrc: user.image }), user.name && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__member_details\", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"span\", { className: \"str-video__member_name\", children: user.name }) }))] }, user.id))) }), callingStateLabel && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__call-panel__calling-state-label\", children: t(callingStateLabel) })), [_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.CallingState.RINGING, _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.CallingState.JOINING].includes(callingState) && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(RingingCallControls, {}))] }));\n};\n\nconst byNameOrId = (a, b) => {\n    if (a.name && b.name && a.name < b.name)\n        return -1;\n    if (a.name && b.name && a.name > b.name)\n        return 1;\n    if (a.id < b.id)\n        return -1;\n    if (a.id > b.id)\n        return 1;\n    return 0;\n};\nconst PermissionRequests = () => {\n    const call = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCall)();\n    const { useLocalParticipant, useHasPermissions } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCallStateHooks)();\n    const localParticipant = useLocalParticipant();\n    const [expanded, setExpanded] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(false);\n    const [permissionRequests, setPermissionRequests] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)([]);\n    const canUpdateCallPermissions = useHasPermissions(_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.UPDATE_CALL_PERMISSIONS);\n    const localUserId = localParticipant?.userId;\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        if (!call || !canUpdateCallPermissions)\n            return;\n        return call.on('call.permission_request', (event) => {\n            if (event.user.id !== localUserId) {\n                setPermissionRequests((requests) => [...requests, event].sort((a, b) => byNameOrId(a.user, b.user)));\n            }\n        });\n    }, [call, canUpdateCallPermissions, localUserId]);\n    const handleUpdatePermission = (request, type) => {\n        return async () => {\n            const { user, permissions } = request;\n            switch (type) {\n                case 'grant':\n                    await call?.grantPermissions(user.id, permissions);\n                    break;\n                case 'revoke':\n                    await call?.revokePermissions(user.id, permissions);\n                    break;\n            }\n            setPermissionRequests((requests) => requests.filter((r) => r !== request));\n        };\n    };\n    const { refs, x, y, strategy } = useFloatingUIPreset({\n        placement: 'bottom',\n        strategy: 'absolute',\n    });\n    // don't render anything if there are no permission requests\n    if (permissionRequests.length === 0)\n        return null;\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__permission-requests\", ref: refs.setReference, children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__permission-requests__notification\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"span\", { className: \"str-video__permission-requests__notification__message\", children: [permissionRequests.length, \" pending permission requests\"] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Button, { type: \"button\", onClick: () => {\n                            setExpanded((e) => !e);\n                        }, children: expanded ? 'Hide requests' : 'Show requests' })] }), expanded && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(PermissionRequestList, { ref: refs.setFloating, style: {\n                    position: strategy,\n                    top: y ?? 0,\n                    left: x ?? 0,\n                    overflowY: 'auto',\n                }, permissionRequests: permissionRequests, handleUpdatePermission: handleUpdatePermission }))] }));\n};\nconst PermissionRequestList = (0,react__WEBPACK_IMPORTED_MODULE_3__.forwardRef)(function PermissionRequestList(props, ref) {\n    const { permissionRequests, handleUpdatePermission, ...rest } = props;\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__permission-requests-list\", ref: ref, ...rest, children: permissionRequests.map((request, reqIndex) => {\n            const { user, permissions } = request;\n            return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(react__WEBPACK_IMPORTED_MODULE_3__.Fragment, { children: permissions.map((permission) => ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__permission-request\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__permission-request__message\", children: messageForPermission(user.name || user.id, permission, t) }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Button, { className: \"str-video__permission-request__button--allow\", type: \"button\", onClick: handleUpdatePermission(request, 'grant'), children: t('Allow') }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Button, { className: \"str-video__permission-request__button--reject\", type: \"button\", onClick: handleUpdatePermission(request, 'revoke'), children: t('Revoke') }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Button, { className: \"str-video__permission-request__button--reject\", type: \"button\", onClick: handleUpdatePermission(request, 'dismiss'), children: t('Dismiss') })] }, permission))) }, `${user.id}/${reqIndex}`));\n        }) }));\n});\nconst Button = (props) => {\n    const { className, ...rest } = props;\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"button\", { className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('str-video__permission-request__button', className), ...rest }));\n};\nconst messageForPermission = (userName, permission, t) => {\n    switch (permission) {\n        case _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.SEND_AUDIO:\n            return t('{{ userName }} is requesting to speak', { userName });\n        case _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.SEND_VIDEO:\n            return t('{{ userName }} is requesting to share their camera', {\n                userName,\n            });\n        case _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.SCREENSHARE:\n            return t('{{ userName }} is requesting to present their screen', {\n                userName,\n            });\n        default:\n            return t('{{ userName }} is requesting permission: {{ permission }}', {\n                userName,\n                permission,\n            });\n    }\n};\n\nconst StreamTheme = ({ as: Component = 'div', className, children, ...props }) => {\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Component, { ...props, className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('str-video', className), children: children }));\n};\n\nconst DefaultVideoPlaceholder = (0,react__WEBPACK_IMPORTED_MODULE_3__.forwardRef)(function DefaultVideoPlaceholder({ participant, style }, ref) {\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(false);\n    const name = participant.name || participant.userId;\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__video-placeholder\", style: style, ref: ref, children: [(!participant.image || error) &&\n                (name ? ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(InitialsFallback, { name: name })) : ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__video-placeholder__no-video-label\", children: t('Video is disabled') }))), participant.image && !error && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"img\", { onError: () => setError(true), alt: \"video-placeholder\", className: \"str-video__video-placeholder__avatar\", src: participant.image }))] }));\n});\nconst InitialsFallback = (props) => {\n    const { name } = props;\n    const initials = name\n        .split(' ')\n        .slice(0, 2)\n        .map((n) => n[0])\n        .join('');\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__video-placeholder__initials-fallback\", children: initials }));\n};\n\nconst Video$1 = ({ trackType, participant, className, VideoPlaceholder = DefaultVideoPlaceholder, refs, ...rest }) => {\n    const { sessionId, videoStream, screenShareStream, publishedTracks, viewportVisibilityState, isLocalParticipant, userId, } = participant;\n    const call = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCall)();\n    const [videoElement, setVideoElement] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(null);\n    // start with true, will flip once the video starts playing\n    const [isVideoPaused, setIsVideoPaused] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(true);\n    const [isWideMode, setIsWideMode] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(true);\n    const stream = trackType === 'videoTrack'\n        ? videoStream\n        : trackType === 'screenShareTrack'\n            ? screenShareStream\n            : undefined;\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useLayoutEffect)(() => {\n        if (!call || !videoElement || trackType === 'none')\n            return;\n        const cleanup = call.bindVideoElement(videoElement, sessionId, trackType);\n        return () => {\n            cleanup?.();\n        };\n    }, [call, trackType, sessionId, videoElement]);\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        if (!stream || !videoElement)\n            return;\n        const [track] = stream.getVideoTracks();\n        if (!track)\n            return;\n        const handlePlayPause = () => {\n            setIsVideoPaused(videoElement.paused);\n            const { width = 0, height = 0 } = track.getSettings();\n            setIsWideMode(width >= height);\n        };\n        // playback may have started before we had a chance to\n        // attach the 'play/pause' event listener, so we set the state\n        // here to make sure it's in sync\n        setIsVideoPaused(videoElement.paused);\n        videoElement.addEventListener('play', handlePlayPause);\n        videoElement.addEventListener('pause', handlePlayPause);\n        track.addEventListener('unmute', handlePlayPause);\n        return () => {\n            videoElement.removeEventListener('play', handlePlayPause);\n            videoElement.removeEventListener('pause', handlePlayPause);\n            track.removeEventListener('unmute', handlePlayPause);\n            // reset the 'pause' state once we unmount the video element\n            setIsVideoPaused(true);\n        };\n    }, [stream, videoElement]);\n    if (!call)\n        return null;\n    const isPublishingTrack = trackType === 'videoTrack'\n        ? publishedTracks.includes(_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.SfuModels.TrackType.VIDEO)\n        : trackType === 'screenShareTrack'\n            ? publishedTracks.includes(_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.SfuModels.TrackType.SCREEN_SHARE)\n            : false;\n    const isInvisible = trackType === 'none' ||\n        viewportVisibilityState?.[trackType] === _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.VisibilityState.INVISIBLE;\n    const hasNoVideoOrInvisible = !isPublishingTrack || isInvisible;\n    const mirrorVideo = isLocalParticipant && trackType === 'videoTrack';\n    const isScreenShareTrack = trackType === 'screenShareTrack';\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Fragment, { children: [!hasNoVideoOrInvisible && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"video\", { ...rest, className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('str-video__video', className, {\n                    'str-video__video--not-playing': isVideoPaused,\n                    'str-video__video--tall': !isWideMode,\n                    'str-video__video--mirror': mirrorVideo,\n                    'str-video__video--screen-share': isScreenShareTrack,\n                }), \"data-user-id\": userId, \"data-session-id\": sessionId, ref: (element) => {\n                    setVideoElement(element);\n                    refs?.setVideoElement?.(element);\n                } })), (hasNoVideoOrInvisible || isVideoPaused) && VideoPlaceholder && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(VideoPlaceholder, { style: { position: 'absolute' }, participant: participant, ref: refs?.setVideoPlaceholderElement }))] }));\n};\n\n/**\n * @description Extends video element with `stream` property\n * (`srcObject`) to reactively handle stream changes\n */\nconst BaseVideo = (0,react__WEBPACK_IMPORTED_MODULE_3__.forwardRef)(function BaseVideo({ stream, ...rest }, ref) {\n    const [videoElement, setVideoElement] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(null);\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        if (!videoElement || !stream)\n            return;\n        if (stream === videoElement.srcObject)\n            return;\n        videoElement.srcObject = stream;\n        if (_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.Browsers.isSafari() || _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.Browsers.isFirefox()) {\n            // Firefox and Safari have some timing issue\n            setTimeout(() => {\n                videoElement.srcObject = stream;\n                videoElement.play().catch((e) => {\n                    console.error(`Failed to play stream`, e);\n                });\n            }, 0);\n        }\n        return () => {\n            videoElement.pause();\n            videoElement.srcObject = null;\n        };\n    }, [stream, videoElement]);\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"video\", { autoPlay: true, playsInline: true, ...rest, ref: (element) => {\n            applyElementToRef(ref, element);\n            setVideoElement(element);\n        } }));\n});\n\nconst DefaultDisabledVideoPreview = () => {\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str_video__video-preview__disabled-video-preview\", children: t('Video is disabled') }));\n};\nconst DefaultNoCameraPreview = () => {\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str_video__video-preview__no-camera-preview\", children: t('No camera found') }));\n};\nconst VideoPreview = ({ className, mirror = true, DisabledVideoPreview = DefaultDisabledVideoPreview, NoCameraPreview = DefaultNoCameraPreview, StartingCameraPreview = LoadingIndicator, }) => {\n    const { useCameraState } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCallStateHooks)();\n    const { devices, status, isMute, mediaStream } = useCameraState();\n    let contents;\n    if (isMute && devices?.length === 0) {\n        contents = (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(NoCameraPreview, {});\n    }\n    else if (status === 'enabled') {\n        const loading = !mediaStream;\n        contents = ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Fragment, { children: [mediaStream && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(BaseVideo, { stream: mediaStream, className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('str-video__video-preview', {\n                        'str-video__video-preview--mirror': mirror,\n                        'str-video__video-preview--loading': loading,\n                    }) })), loading && (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(StartingCameraPreview, {})] }));\n    }\n    else {\n        contents = (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(DisabledVideoPreview, {});\n    }\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('str-video__video-preview-container', className), children: contents }));\n};\n\nconst ParticipantActionsContextMenu = () => {\n    const { participant, participantViewElement, videoElement } = useParticipantViewContext();\n    const [fullscreenModeOn, setFullscreenModeOn] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(!!document.fullscreenElement);\n    const [pictureInPictureElement, setPictureInPictureElement] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(document.pictureInPictureElement);\n    const call = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCall)();\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    const { pin, publishedTracks, sessionId, userId } = participant;\n    const hasAudio = publishedTracks.includes(_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.SfuModels.TrackType.AUDIO);\n    const hasVideo = publishedTracks.includes(_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.SfuModels.TrackType.VIDEO);\n    const hasScreenShare = publishedTracks.includes(_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.SfuModels.TrackType.SCREEN_SHARE);\n    const hasScreenShareAudio = publishedTracks.includes(_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.SfuModels.TrackType.SCREEN_SHARE_AUDIO);\n    const blockUser = () => call?.blockUser(userId);\n    const muteAudio = () => call?.muteUser(userId, 'audio');\n    const muteVideo = () => call?.muteUser(userId, 'video');\n    const muteScreenShare = () => call?.muteUser(userId, 'screenshare');\n    const muteScreenShareAudio = () => call?.muteUser(userId, 'screenshare_audio');\n    const grantPermission = (permission) => () => {\n        call?.updateUserPermissions({\n            user_id: userId,\n            grant_permissions: [permission],\n        });\n    };\n    const revokePermission = (permission) => () => {\n        call?.updateUserPermissions({\n            user_id: userId,\n            revoke_permissions: [permission],\n        });\n    };\n    const toggleParticipantPin = () => {\n        if (pin) {\n            call?.unpin(sessionId);\n        }\n        else {\n            call?.pin(sessionId);\n        }\n    };\n    const pinForEveryone = () => {\n        call\n            ?.pinForEveryone({\n            user_id: userId,\n            session_id: sessionId,\n        })\n            .catch((err) => {\n            console.error(`Failed to pin participant ${userId}`, err);\n        });\n    };\n    const unpinForEveryone = () => {\n        call\n            ?.unpinForEveryone({\n            user_id: userId,\n            session_id: sessionId,\n        })\n            .catch((err) => {\n            console.error(`Failed to unpin participant ${userId}`, err);\n        });\n    };\n    const toggleFullscreenMode = () => {\n        if (!fullscreenModeOn) {\n            return participantViewElement?.requestFullscreen().catch(console.error);\n        }\n        return document.exitFullscreen().catch(console.error);\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        // handles the case when fullscreen mode is toggled externally,\n        // e.g., by pressing ESC key or some other keyboard shortcut\n        const handleFullscreenChange = () => {\n            setFullscreenModeOn(!!document.fullscreenElement);\n        };\n        document.addEventListener('fullscreenchange', handleFullscreenChange);\n        return () => {\n            document.removeEventListener('fullscreenchange', handleFullscreenChange);\n        };\n    }, []);\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        if (!videoElement)\n            return;\n        const handlePiP = () => {\n            setPictureInPictureElement(document.pictureInPictureElement);\n        };\n        videoElement.addEventListener('enterpictureinpicture', handlePiP);\n        videoElement.addEventListener('leavepictureinpicture', handlePiP);\n        return () => {\n            videoElement.removeEventListener('enterpictureinpicture', handlePiP);\n            videoElement.removeEventListener('leavepictureinpicture', handlePiP);\n        };\n    }, [videoElement]);\n    const togglePictureInPicture = () => {\n        if (videoElement && pictureInPictureElement !== videoElement) {\n            return videoElement\n                .requestPictureInPicture()\n                .catch(console.error);\n        }\n        return document.exitPictureInPicture().catch(console.error);\n    };\n    const { close } = useMenuContext() || {};\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(GenericMenu, { onItemClick: close, children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(GenericMenuButtonItem, { onClick: toggleParticipantPin, disabled: pin && !pin.isLocalPin, children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Icon, { icon: \"pin\" }), pin ? t('Unpin') : t('Pin')] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.Restricted, { requiredGrants: [_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.PIN_FOR_EVERYONE], children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(GenericMenuButtonItem, { onClick: pinForEveryone, disabled: pin && !pin.isLocalPin, children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Icon, { icon: \"pin\" }), t('Pin for everyone')] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(GenericMenuButtonItem, { onClick: unpinForEveryone, disabled: !pin || pin.isLocalPin, children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Icon, { icon: \"pin\" }), t('Unpin for everyone')] })] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.Restricted, { requiredGrants: [_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.BLOCK_USERS], children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(GenericMenuButtonItem, { onClick: blockUser, children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Icon, { icon: \"not-allowed\" }), t('Block')] }) }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.Restricted, { requiredGrants: [_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.MUTE_USERS], children: [hasVideo && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(GenericMenuButtonItem, { onClick: muteVideo, children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Icon, { icon: \"camera-off-outline\" }), t('Turn off video')] })), hasScreenShare && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(GenericMenuButtonItem, { onClick: muteScreenShare, children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Icon, { icon: \"screen-share-off\" }), t('Turn off screen share')] })), hasAudio && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(GenericMenuButtonItem, { onClick: muteAudio, children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Icon, { icon: \"no-audio\" }), t('Mute audio')] })), hasScreenShareAudio && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(GenericMenuButtonItem, { onClick: muteScreenShareAudio, children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Icon, { icon: \"no-audio\" }), t('Mute screen share audio')] }))] }), participantViewElement && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(GenericMenuButtonItem, { onClick: toggleFullscreenMode, children: t('{{ direction }} fullscreen', {\n                    direction: fullscreenModeOn ? t('Leave') : t('Enter'),\n                }) })), videoElement && document.pictureInPictureEnabled && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(GenericMenuButtonItem, { onClick: togglePictureInPicture, children: t('{{ direction }} picture-in-picture', {\n                    direction: pictureInPictureElement === videoElement\n                        ? t('Leave')\n                        : t('Enter'),\n                }) })), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.Restricted, { requiredGrants: [_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.UPDATE_CALL_PERMISSIONS], children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(GenericMenuButtonItem, { onClick: grantPermission(_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.SEND_AUDIO), children: t('Allow audio') }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(GenericMenuButtonItem, { onClick: grantPermission(_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.SEND_VIDEO), children: t('Allow video') }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(GenericMenuButtonItem, { onClick: grantPermission(_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.SCREENSHARE), children: t('Allow screen sharing') }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(GenericMenuButtonItem, { onClick: revokePermission(_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.SEND_AUDIO), children: t('Disable audio') }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(GenericMenuButtonItem, { onClick: revokePermission(_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.SEND_VIDEO), children: t('Disable video') }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(GenericMenuButtonItem, { onClick: revokePermission(_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.OwnCapability.SCREENSHARE), children: t('Disable screen sharing') })] })] }));\n};\n\nconst useTrackElementVisibility = ({ trackedElement, dynascaleManager: propsDynascaleManager, sessionId, trackType, }) => {\n    const call = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCall)();\n    const manager = propsDynascaleManager ?? call?.dynascaleManager;\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        if (!trackedElement || !manager || !call || trackType === 'none')\n            return;\n        const unobserve = manager.trackElementVisibility(trackedElement, sessionId, trackType);\n        return () => {\n            unobserve();\n        };\n    }, [trackedElement, manager, call, sessionId, trackType]);\n};\n\nconst ToggleButton = (0,react__WEBPACK_IMPORTED_MODULE_3__.forwardRef)(function ToggleButton(props, ref) {\n    return (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(IconButton, { enabled: props.menuShown, icon: \"ellipsis\", ref: ref });\n});\nconst DefaultScreenShareOverlay = () => {\n    const call = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCall)();\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    const stopScreenShare = () => {\n        call?.screenShare.disable();\n    };\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__screen-share-overlay\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Icon, { icon: \"screen-share-off\" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"span\", { className: \"str-video__screen-share-overlay__title\", children: t('You are presenting your screen') }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"button\", { onClick: stopScreenShare, className: \"str-video__screen-share-overlay__button\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Icon, { icon: \"close\" }), \" \", t('Stop Screen Sharing')] })] }));\n};\nconst DefaultParticipantViewUI = ({ indicatorsVisible = true, menuPlacement = 'bottom-start', showMenuButton = true, ParticipantActionsContextMenu: ParticipantActionsContextMenu$1 = ParticipantActionsContextMenu, }) => {\n    const { participant, trackType } = useParticipantViewContext();\n    const { publishedTracks } = participant;\n    const hasScreenShare = publishedTracks.includes(_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.SfuModels.TrackType.SCREEN_SHARE);\n    if (participant.isLocalParticipant &&\n        hasScreenShare &&\n        trackType === 'screenShareTrack') {\n        return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Fragment, { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(DefaultScreenShareOverlay, {}), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(ParticipantDetails, { indicatorsVisible: indicatorsVisible })] }));\n    }\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Fragment, { children: [showMenuButton && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(MenuToggle, { strategy: \"fixed\", placement: menuPlacement, ToggleButton: ToggleButton, children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(ParticipantActionsContextMenu$1, {}) })), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Reaction, { participant: participant }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(ParticipantDetails, { indicatorsVisible: indicatorsVisible })] }));\n};\nconst ParticipantDetails = ({ indicatorsVisible = true, }) => {\n    const { participant } = useParticipantViewContext();\n    const { isLocalParticipant, connectionQuality, publishedTracks, pin, sessionId, name, userId, } = participant;\n    const call = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCall)();\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    const connectionQualityAsString = !!connectionQuality &&\n        _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.SfuModels.ConnectionQuality[connectionQuality].toLowerCase();\n    const hasAudio = publishedTracks.includes(_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.SfuModels.TrackType.AUDIO);\n    const hasVideo = publishedTracks.includes(_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.SfuModels.TrackType.VIDEO);\n    const canUnpin = !!pin && pin.isLocalPin;\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Fragment, { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__participant-details\", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"span\", { className: \"str-video__participant-details__name\", children: [name || userId, indicatorsVisible && !hasAudio && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"span\", { className: \"str-video__participant-details__name--audio-muted\" })), indicatorsVisible && !hasVideo && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"span\", { className: \"str-video__participant-details__name--video-muted\" })), indicatorsVisible && canUnpin && (\n                        // TODO: remove this monstrosity once we have a proper design\n                        (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"span\", { title: t('Unpin'), onClick: () => call?.unpin(sessionId), className: \"str-video__participant-details__name--pinned\" })), indicatorsVisible && (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(SpeechIndicator, {})] }) }), indicatorsVisible && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Notification, { isVisible: isLocalParticipant &&\n                    connectionQuality === _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.SfuModels.ConnectionQuality.POOR, message: t('Poor connection quality'), children: connectionQualityAsString && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"span\", { className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('str-video__participant-details__connection-quality', `str-video__participant-details__connection-quality--${connectionQualityAsString}`), title: connectionQualityAsString })) }))] }));\n};\nconst SpeechIndicator = () => {\n    const { participant } = useParticipantViewContext();\n    const { isSpeaking, isDominantSpeaker } = participant;\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"span\", { className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('str-video__speech-indicator', isSpeaking && 'str-video__speech-indicator--speaking', isDominantSpeaker && 'str-video__speech-indicator--dominant'), children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"span\", { className: \"str-video__speech-indicator__bar\" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"span\", { className: \"str-video__speech-indicator__bar\" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"span\", { className: \"str-video__speech-indicator__bar\" })] }));\n};\n\nconst ParticipantView = (0,react__WEBPACK_IMPORTED_MODULE_3__.forwardRef)(function ParticipantView({ participant, trackType = 'videoTrack', muteAudio, refs: { setVideoElement, setVideoPlaceholderElement } = {}, className, VideoPlaceholder, ParticipantViewUI = DefaultParticipantViewUI, }, ref) {\n    const { isLocalParticipant, isSpeaking, isDominantSpeaker, publishedTracks, sessionId, } = participant;\n    const hasAudio = publishedTracks.includes(_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.SfuModels.TrackType.AUDIO);\n    const hasVideo = publishedTracks.includes(_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.SfuModels.TrackType.VIDEO);\n    const hasScreenShareAudio = publishedTracks.includes(_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.SfuModels.TrackType.SCREEN_SHARE_AUDIO);\n    const [trackedElement, setTrackedElement] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(null);\n    const [contextVideoElement, setContextVideoElement] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(null);\n    const [contextVideoPlaceholderElement, setContextVideoPlaceholderElement] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(null);\n    // TODO: allow to pass custom ViewportTracker instance from props\n    useTrackElementVisibility({\n        sessionId,\n        trackedElement,\n        trackType,\n    });\n    const participantViewContextValue = (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => ({\n        participant,\n        participantViewElement: trackedElement,\n        videoElement: contextVideoElement,\n        videoPlaceholderElement: contextVideoPlaceholderElement,\n        trackType,\n    }), [\n        contextVideoElement,\n        contextVideoPlaceholderElement,\n        participant,\n        trackedElement,\n        trackType,\n    ]);\n    const videoRefs = (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => ({\n        setVideoElement: (element) => {\n            setVideoElement?.(element);\n            setContextVideoElement(element);\n        },\n        setVideoPlaceholderElement: (element) => {\n            setVideoPlaceholderElement?.(element);\n            setContextVideoPlaceholderElement(element);\n        },\n    }), [setVideoElement, setVideoPlaceholderElement]);\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { \"data-testid\": \"participant-view\", ref: (element) => {\n            applyElementToRef(ref, element);\n            setTrackedElement(element);\n        }, className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('str-video__participant-view', isDominantSpeaker && 'str-video__participant-view--dominant-speaker', isSpeaking && 'str-video__participant-view--speaking', !hasVideo && 'str-video__participant-view--no-video', !hasAudio && 'str-video__participant-view--no-audio', className), children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(ParticipantViewContext.Provider, { value: participantViewContextValue, children: [!isLocalParticipant && !muteAudio && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Fragment, { children: [hasAudio && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Audio, { participant: participant, trackType: \"audioTrack\" })), hasScreenShareAudio && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Audio, { participant: participant, trackType: \"screenShareAudioTrack\" }))] })), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Video$1, { VideoPlaceholder: VideoPlaceholder, participant: participant, trackType: trackType, refs: videoRefs, autoPlay: true }), isComponentType(ParticipantViewUI) ? ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(ParticipantViewUI, {})) : (ParticipantViewUI)] }) }));\n});\n\n// re-exporting the StreamCallProvider as StreamCall\nconst StreamCall = _stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.StreamCallProvider;\n\nvar Joining = \"Joining\";\nvar Mic = \"Mic\";\nvar Ringing = \"Ringing\";\nvar Speakers = \"Speakers\";\nvar Video = \"Video\";\nvar Live = \"Live\";\nvar Reactions = \"Reactions\";\nvar Statistics = \"Statistics\";\nvar Invite = \"Invite\";\nvar Join = \"Join\";\nvar You = \"You\";\nvar Me = \"Me\";\nvar Unknown = \"Unknown\";\nvar Refresh = \"Refresh\";\nvar Allow = \"Allow\";\nvar Revoke = \"Revoke\";\nvar Dismiss = \"Dismiss\";\nvar Pinned = \"Pinned\";\nvar Unpin = \"Unpin\";\nvar Pin = \"Pin\";\nvar Block = \"Block\";\nvar Enter = \"Enter\";\nvar Leave = \"Leave\";\nvar Participants = \"Participants\";\nvar Anonymous = \", and ({{ count }}) anonymous\";\nvar en = {\n\tJoining: Joining,\n\tMic: Mic,\n\t\"No internet connection\": \"No internet connection\",\n\t\"Re-connecting\": \"Re-connecting\",\n\tRinging: Ringing,\n\t\"Screen Share\": \"Screen Share\",\n\t\"Select a Camera\": \"Select a Camera\",\n\t\"Select a Mic\": \"Select a Mic\",\n\t\"Select Speakers\": \"Select Speakers\",\n\tSpeakers: Speakers,\n\tVideo: Video,\n\t\"You are muted. Unmute to speak.\": \"You are muted. Unmute to speak.\",\n\tLive: Live,\n\t\"You can now speak.\": \"You can now speak.\",\n\t\"Awaiting for an approval to speak.\": \"Awaiting for an approval to speak.\",\n\t\"You can no longer speak.\": \"You can no longer speak.\",\n\t\"You can now share your video.\": \"You can now share your video.\",\n\t\"Awaiting for an approval to share your video.\": \"Awaiting for an approval to share your video.\",\n\t\"You can no longer share your video.\": \"You can no longer share your video.\",\n\t\"Waiting for recording to stop...\": \"Waiting for recording to stop...\",\n\t\"Waiting for recording to start...\": \"Waiting for recording to start...\",\n\t\"Record call\": \"Record call\",\n\tReactions: Reactions,\n\tStatistics: Statistics,\n\t\"You can now share your screen.\": \"You can now share your screen.\",\n\t\"Awaiting for an approval to share screen.\": \"Awaiting for an approval to share screen.\",\n\t\"You can no longer share your screen.\": \"You can no longer share your screen.\",\n\t\"Share screen\": \"Share screen\",\n\t\"Incoming Call...\": \"Incoming Call...\",\n\t\"Calling...\": \"Calling...\",\n\t\"Mute All\": \"Mute All\",\n\tInvite: Invite,\n\tJoin: Join,\n\tYou: You,\n\tMe: Me,\n\tUnknown: Unknown,\n\t\"Toggle device menu\": \"Toggle device menu\",\n\t\"Call Recordings\": \"Call Recordings\",\n\tRefresh: Refresh,\n\t\"Check your browser video permissions\": \"Check your browser video permissions\",\n\t\"Video publishing is disabled by the system\": \"Video publishing is disabled by the system\",\n\t\"You have no permission to share your video\": \"You have no permission to share your video\",\n\t\"You have no permission to share your audio\": \"You have no permission to share your audio\",\n\t\"You are presenting your screen\": \"You are presenting your screen\",\n\t\"Stop Screen Sharing\": \"Stop Screen Sharing\",\n\tAllow: Allow,\n\tRevoke: Revoke,\n\tDismiss: Dismiss,\n\t\"Microphone on\": \"Microphone on\",\n\t\"Microphone off\": \"Microphone off\",\n\t\"Camera on\": \"Camera on\",\n\t\"Camera off\": \"Camera off\",\n\t\"No camera found\": \"No camera found\",\n\t\"Video is disabled\": \"Video is disabled\",\n\tPinned: Pinned,\n\tUnpin: Unpin,\n\tPin: Pin,\n\t\"Pin for everyone\": \"Pin for everyone\",\n\t\"Unpin for everyone\": \"Unpin for everyone\",\n\tBlock: Block,\n\t\"Turn off video\": \"Turn off video\",\n\t\"Turn off screen share\": \"Turn off screen share\",\n\t\"Mute audio\": \"Mute audio\",\n\t\"Mute screen share audio\": \"Mute screen share audio\",\n\t\"Allow audio\": \"Allow audio\",\n\t\"Allow video\": \"Allow video\",\n\t\"Allow screen sharing\": \"Allow screen sharing\",\n\t\"Disable audio\": \"Disable audio\",\n\t\"Disable video\": \"Disable video\",\n\t\"Disable screen sharing\": \"Disable screen sharing\",\n\tEnter: Enter,\n\tLeave: Leave,\n\t\"Leave call\": \"Leave call\",\n\t\"End call for all\": \"End call for all\",\n\t\"{{ direction }} fullscreen\": \"{{ direction }} fullscreen\",\n\t\"{{ direction }} picture-in-picture\": \"{{ direction }} picture-in-picture\",\n\t\"Dominant Speaker\": \"Dominant Speaker\",\n\t\"Poor connection quality\": \"Poor connection quality. Please check your internet connection.\",\n\tParticipants: Participants,\n\tAnonymous: Anonymous,\n\t\"No participants found\": \"No participants found\",\n\t\"Participants ({{ numberOfParticipants }})\": \"Participants ({{ numberOfParticipants }})\",\n\t\"{{ userName }} is sharing their screen\": \"{{ userName }} is sharing their screen\",\n\t\"{{ userName }} is requesting to speak\": \"{{ userName }} is requesting to speak\",\n\t\"{{ userName }} is requesting to share their camera\": \"{{ userName }} is requesting to share their camera\",\n\t\"{{ userName }} is requesting to present their screen\": \"{{ userName }} is requesting to present their screen\",\n\t\"{{ userName }} is requesting permission: {{ permission }}\": \"{{ userName }} is requesting permission: {{ permission }}\"\n};\n\nconst translations = { en };\n\nconst StreamVideo = (props) => {\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.StreamVideoProvider, { translationsOverrides: translations, ...props }));\n};\n\nconst usePaginatedLayoutSortPreset = (call) => {\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        if (!call)\n            return;\n        call.setSortParticipantsBy(_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.paginatedLayoutSortPreset);\n        return () => {\n            resetSortPreset(call);\n        };\n    }, [call]);\n};\nconst useSpeakerLayoutSortPreset = (call, isOneOnOneCall) => {\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        if (!call)\n            return;\n        // always show the remote participant in the spotlight\n        if (isOneOnOneCall) {\n            call.setSortParticipantsBy((0,_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.combineComparators)(_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.screenSharing, loggedIn));\n        }\n        else {\n            call.setSortParticipantsBy(_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.speakerLayoutSortPreset);\n        }\n        return () => {\n            resetSortPreset(call);\n        };\n    }, [call, isOneOnOneCall]);\n};\nconst resetSortPreset = (call) => {\n    // reset the sorting to the default for the call type\n    const callConfig = _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.CallTypes.get(call.type);\n    call.setSortParticipantsBy(callConfig.options.sortParticipantsBy || _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.defaultSortPreset);\n};\nconst loggedIn = (a, b) => {\n    if (a.isLocalParticipant)\n        return 1;\n    if (b.isLocalParticipant)\n        return -1;\n    return 0;\n};\n\nconst LivestreamLayout = (props) => {\n    const { useParticipants, useRemoteParticipants, useHasOngoingScreenShare } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCallStateHooks)();\n    const call = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCall)();\n    const [currentSpeaker, ...otherParticipants] = useParticipants();\n    const remoteParticipants = useRemoteParticipants();\n    const hasOngoingScreenShare = useHasOngoingScreenShare();\n    const presenter = hasOngoingScreenShare\n        ? hasScreenShare$1(currentSpeaker) && currentSpeaker\n        : otherParticipants.find(hasScreenShare$1);\n    usePaginatedLayoutSortPreset(call);\n    const Overlay = ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(ParticipantOverlay, { showParticipantCount: props.showParticipantCount, showDuration: props.showDuration, showLiveBadge: props.showLiveBadge, showSpeakerName: props.showSpeakerName }));\n    const { floatingParticipantProps } = props;\n    const FloatingParticipantOverlay = hasOngoingScreenShare && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(ParticipantOverlay\n    // these elements aren't needed for the video feed\n    , { \n        // these elements aren't needed for the video feed\n        showParticipantCount: floatingParticipantProps?.showParticipantCount ?? false, showDuration: floatingParticipantProps?.showDuration ?? false, showLiveBadge: floatingParticipantProps?.showLiveBadge ?? false, showSpeakerName: floatingParticipantProps?.showSpeakerName ?? true }));\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__livestream-layout__wrapper\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(ParticipantsAudio, { participants: remoteParticipants }), hasOngoingScreenShare && presenter && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(ParticipantView, { className: \"str-video__livestream-layout__screen-share\", participant: presenter, ParticipantViewUI: Overlay, trackType: \"screenShareTrack\", muteAudio // audio is rendered by ParticipantsAudio\n                : true })), currentSpeaker && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(ParticipantView, { className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(hasOngoingScreenShare &&\n                    (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('str-video__livestream-layout__floating-participant', `str-video__livestream-layout__floating-participant--${floatingParticipantProps?.position ?? 'top-right'}`)), participant: currentSpeaker, ParticipantViewUI: FloatingParticipantOverlay || Overlay, muteAudio // audio is rendered by ParticipantsAudio\n                : true }))] }));\n};\nconst hasScreenShare$1 = (p) => !!p?.publishedTracks.includes(_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.SfuModels.TrackType.SCREEN_SHARE);\nconst ParticipantOverlay = (props) => {\n    const { enableFullScreen = true, showParticipantCount = true, showDuration = true, showLiveBadge = true, showSpeakerName = false, } = props;\n    const { participant } = useParticipantViewContext();\n    const { useParticipantCount } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCallStateHooks)();\n    const participantCount = useParticipantCount();\n    const duration = useUpdateCallDuration();\n    const toggleFullScreen = useToggleFullScreen();\n    const { t } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useI18n)();\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__livestream-layout__overlay\", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__livestream-layout__overlay__bar\", children: [showLiveBadge && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"span\", { className: \"str-video__livestream-layout__live-badge\", children: t('Live') })), showParticipantCount && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"span\", { className: \"str-video__livestream-layout__viewers-count\", children: participantCount })), showSpeakerName && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"span\", { className: \"str-video__livestream-layout__speaker-name\", title: participant.name || participant.userId || '', children: participant.name || participant.userId || '' })), showDuration && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"span\", { className: \"str-video__livestream-layout__duration\", children: formatDuration(duration) })), enableFullScreen && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"span\", { className: \"str-video__livestream-layout__go-fullscreen\", onClick: toggleFullScreen }))] }) }));\n};\nconst useUpdateCallDuration = () => {\n    const { useIsCallLive, useCallSession } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCallStateHooks)();\n    const isCallLive = useIsCallLive();\n    const session = useCallSession();\n    const [duration, setDuration] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(() => {\n        if (!session || !session.live_started_at)\n            return 0;\n        const liveStartTime = new Date(session.live_started_at);\n        const now = new Date();\n        return Math.floor((now.getTime() - liveStartTime.getTime()) / 1000);\n    });\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        if (!isCallLive)\n            return;\n        const interval = setInterval(() => {\n            setDuration((d) => d + 1);\n        }, 1000);\n        return () => {\n            clearInterval(interval);\n        };\n    }, [isCallLive]);\n    return duration;\n};\nconst useToggleFullScreen = () => {\n    const { participantViewElement } = useParticipantViewContext();\n    const [isFullscreen, setIsFullscreen] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(false);\n    return (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(() => {\n        if (isFullscreen) {\n            document.exitFullscreen().then(() => {\n                setIsFullscreen(false);\n            });\n        }\n        else {\n            participantViewElement?.requestFullscreen().then(() => {\n                setIsFullscreen(true);\n            });\n        }\n    }, [isFullscreen, participantViewElement]);\n};\nconst formatDuration = (durationInMs) => {\n    const days = Math.floor(durationInMs / 86400);\n    const hours = Math.floor(durationInMs / 3600);\n    const minutes = Math.floor((durationInMs % 3600) / 60);\n    const seconds = durationInMs % 60;\n    return `${days ? days + ' ' : ''}${hours ? hours + ':' : ''}${minutes < 10 ? '0' : ''}${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;\n};\n\nconst GROUP_SIZE = 16;\nconst PaginatedGridLayoutGroup = ({ group, VideoPlaceholder, ParticipantViewUI, }) => {\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('str-video__paginated-grid-layout__group', {\n            'str-video__paginated-grid-layout--one': group.length === 1,\n            'str-video__paginated-grid-layout--two-four': group.length >= 2 && group.length <= 4,\n            'str-video__paginated-grid-layout--five-nine': group.length >= 5 && group.length <= 9,\n        }), children: group.map((participant) => ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(ParticipantView, { participant: participant, muteAudio: true, VideoPlaceholder: VideoPlaceholder, ParticipantViewUI: ParticipantViewUI }, participant.sessionId))) }));\n};\nconst PaginatedGridLayout = ({ groupSize = GROUP_SIZE, excludeLocalParticipant = false, pageArrowsVisible = true, VideoPlaceholder, ParticipantViewUI = DefaultParticipantViewUI, }) => {\n    const [page, setPage] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(0);\n    const [paginatedGridLayoutWrapperElement, setPaginatedGridLayoutWrapperElement,] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(null);\n    const call = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCall)();\n    const { useParticipants, useRemoteParticipants } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCallStateHooks)();\n    const participants = useParticipants();\n    // used to render audio elements\n    const remoteParticipants = useRemoteParticipants();\n    usePaginatedLayoutSortPreset(call);\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        if (!paginatedGridLayoutWrapperElement || !call)\n            return;\n        const cleanup = call.setViewport(paginatedGridLayoutWrapperElement);\n        return () => cleanup();\n    }, [paginatedGridLayoutWrapperElement, call]);\n    // only used to render video elements\n    const participantGroups = (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => chunk(excludeLocalParticipant ? remoteParticipants : participants, groupSize), [excludeLocalParticipant, remoteParticipants, participants, groupSize]);\n    const pageCount = participantGroups.length;\n    // update page when page count is reduced and selected page no longer exists\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        if (page > pageCount - 1) {\n            setPage(Math.max(0, pageCount - 1));\n        }\n    }, [page, pageCount]);\n    const selectedGroup = participantGroups[page];\n    if (!call)\n        return null;\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__paginated-grid-layout__wrapper\", ref: setPaginatedGridLayoutWrapperElement, children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(ParticipantsAudio, { participants: remoteParticipants }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__paginated-grid-layout\", children: [pageArrowsVisible && pageCount > 1 && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(IconButton, { icon: \"caret-left\", disabled: page === 0, onClick: () => setPage((currentPage) => Math.max(0, currentPage - 1)) })), selectedGroup && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(PaginatedGridLayoutGroup, { group: participantGroups[page], VideoPlaceholder: VideoPlaceholder, ParticipantViewUI: ParticipantViewUI })), pageArrowsVisible && pageCount > 1 && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(IconButton, { disabled: page === pageCount - 1, icon: \"caret-right\", onClick: () => setPage((currentPage) => Math.min(pageCount - 1, currentPage + 1)) }))] })] }));\n};\n\nconst useCalculateHardLimit = (\n/**\n * Element that stretches to 100% of the whole layout component\n */\nwrapperElement, \n/**\n * Element that directly hosts individual `ParticipantView` (or wrapper) elements\n */\nhostElement, limit) => {\n    const [calculatedLimit, setCalculatedLimit] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)({\n        vertical: typeof limit === 'number' ? limit : null,\n        horizontal: typeof limit === 'number' ? limit : null,\n    });\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        if (!hostElement ||\n            !wrapperElement ||\n            typeof limit === 'number' ||\n            typeof limit === 'undefined')\n            return;\n        let childWidth = null;\n        let childHeight = null;\n        const resizeObserver = new ResizeObserver((entries, observer) => {\n            // this part should ideally run as little times as possible\n            // get child measurements and disconnect\n            // does not consider dynamically sized children\n            // this hook is for SpeakerLayout use only, where children in the bar are fixed size\n            if (entries.length > 1) {\n                const child = hostElement.firstChild;\n                if (child) {\n                    childHeight = child.clientHeight;\n                    childWidth = child.clientWidth;\n                    observer.unobserve(hostElement);\n                }\n            }\n            // keep the state at { vertical: 1, horizontal: 1 }\n            // until we get the proper child measurements\n            if (childHeight === null || childWidth === null)\n                return;\n            const vertical = Math.floor(wrapperElement.clientHeight / childHeight);\n            const horizontal = Math.floor(wrapperElement.clientWidth / childWidth);\n            setCalculatedLimit((pv) => {\n                if (pv.vertical !== vertical || pv.horizontal !== horizontal)\n                    return { vertical, horizontal };\n                return pv;\n            });\n        });\n        resizeObserver.observe(wrapperElement);\n        resizeObserver.observe(hostElement);\n        return () => {\n            resizeObserver.disconnect();\n        };\n    }, [hostElement, limit, wrapperElement]);\n    return calculatedLimit;\n};\n\nconst DefaultParticipantViewUIBar = () => ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(DefaultParticipantViewUI, { menuPlacement: \"top-end\" }));\nconst DefaultParticipantViewUISpotlight = () => (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(DefaultParticipantViewUI, {});\nconst SpeakerLayout = ({ ParticipantViewUIBar = DefaultParticipantViewUIBar, ParticipantViewUISpotlight = DefaultParticipantViewUISpotlight, VideoPlaceholder, participantsBarPosition = 'bottom', participantsBarLimit, }) => {\n    const call = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCall)();\n    const { useParticipants, useRemoteParticipants } = (0,_stream_io_video_react_bindings__WEBPACK_IMPORTED_MODULE_1__.useCallStateHooks)();\n    const [participantInSpotlight, ...otherParticipants] = useParticipants();\n    const remoteParticipants = useRemoteParticipants();\n    const [participantsBarWrapperElement, setParticipantsBarWrapperElement] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(null);\n    const [participantsBarElement, setParticipantsBarElement] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(null);\n    const [buttonsWrapperElement, setButtonsWrapperElement] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(null);\n    const isSpeakerScreenSharing = hasScreenShare(participantInSpotlight);\n    const hardLimit = useCalculateHardLimit(buttonsWrapperElement, participantsBarElement, participantsBarLimit);\n    const isVertical = participantsBarPosition === 'left' || participantsBarPosition === 'right';\n    const isHorizontal = participantsBarPosition === 'top' || participantsBarPosition === 'bottom';\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        if (!participantsBarWrapperElement || !call)\n            return;\n        const cleanup = call.setViewport(participantsBarWrapperElement);\n        return () => cleanup();\n    }, [participantsBarWrapperElement, call]);\n    const isOneOnOneCall = otherParticipants.length === 1;\n    useSpeakerLayoutSortPreset(call, isOneOnOneCall);\n    let participantsWithAppliedLimit = otherParticipants;\n    const hardLimitToApply = isVertical\n        ? hardLimit.vertical\n        : hardLimit.horizontal;\n    if (typeof participantsBarLimit !== 'undefined' &&\n        hardLimitToApply !== null) {\n        participantsWithAppliedLimit = otherParticipants.slice(0, \n        // subtract 1 if speaker is sharing screen as\n        // that one is rendered independently from otherParticipants array\n        hardLimitToApply - (isSpeakerScreenSharing ? 1 : 0));\n    }\n    if (!call)\n        return null;\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: \"str-video__speaker-layout__wrapper\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(ParticipantsAudio, { participants: remoteParticipants }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { className: (0,clsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('str-video__speaker-layout', participantsBarPosition &&\n                    `str-video__speaker-layout--variant-${participantsBarPosition}`), children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__speaker-layout__spotlight\", children: participantInSpotlight && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(ParticipantView, { participant: participantInSpotlight, muteAudio: true, trackType: isSpeakerScreenSharing ? 'screenShareTrack' : 'videoTrack', ParticipantViewUI: ParticipantViewUISpotlight, VideoPlaceholder: VideoPlaceholder })) }), participantsWithAppliedLimit.length > 0 && participantsBarPosition && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { ref: setButtonsWrapperElement, className: \"str-video__speaker-layout__participants-bar-buttons-wrapper\", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__speaker-layout__participants-bar-wrapper\", ref: setParticipantsBarWrapperElement, children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"div\", { ref: setParticipantsBarElement, className: \"str-video__speaker-layout__participants-bar\", children: [isSpeakerScreenSharing && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__speaker-layout__participant-tile\", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(ParticipantView, { participant: participantInSpotlight, ParticipantViewUI: ParticipantViewUIBar, VideoPlaceholder: VideoPlaceholder, muteAudio: true }) }, participantInSpotlight.sessionId)), participantsWithAppliedLimit.map((participant) => ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"div\", { className: \"str-video__speaker-layout__participant-tile\", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(ParticipantView, { participant: participant, ParticipantViewUI: ParticipantViewUIBar, VideoPlaceholder: VideoPlaceholder, muteAudio: true }) }, participant.sessionId)))] }) }), isVertical && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(VerticalScrollButtons, { scrollWrapper: participantsBarWrapperElement })), isHorizontal && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(HorizontalScrollButtons, { scrollWrapper: participantsBarWrapperElement }))] }))] })] }));\n};\nconst HorizontalScrollButtons = ({ scrollWrapper, }) => {\n    const scrollPosition = useHorizontalScrollPosition(scrollWrapper);\n    const scrollStartClickHandler = () => {\n        scrollWrapper?.scrollBy({ left: -150, behavior: 'smooth' });\n    };\n    const scrollEndClickHandler = () => {\n        scrollWrapper?.scrollBy({ left: 150, behavior: 'smooth' });\n    };\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Fragment, { children: [scrollPosition && scrollPosition !== 'start' && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(IconButton, { onClick: scrollStartClickHandler, icon: \"caret-left\", className: \"str-video__speaker-layout__participants-bar--button-left\" })), scrollPosition && scrollPosition !== 'end' && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(IconButton, { onClick: scrollEndClickHandler, icon: \"caret-right\", className: \"str-video__speaker-layout__participants-bar--button-right\" }))] }));\n};\nconst VerticalScrollButtons = ({ scrollWrapper, }) => {\n    const scrollPosition = useVerticalScrollPosition(scrollWrapper);\n    const scrollTopClickHandler = () => {\n        scrollWrapper?.scrollBy({ top: -150, behavior: 'smooth' });\n    };\n    const scrollBottomClickHandler = () => {\n        scrollWrapper?.scrollBy({ top: 150, behavior: 'smooth' });\n    };\n    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Fragment, { children: [scrollPosition && scrollPosition !== 'top' && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(IconButton, { onClick: scrollTopClickHandler, icon: \"caret-up\", className: \"str-video__speaker-layout__participants-bar--button-top\" })), scrollPosition && scrollPosition !== 'bottom' && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(IconButton, { onClick: scrollBottomClickHandler, icon: \"caret-down\", className: \"str-video__speaker-layout__participants-bar--button-bottom\" }))] }));\n};\nconst hasScreenShare = (p) => !!p?.publishedTracks.includes(_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.SfuModels.TrackType.SCREEN_SHARE);\n\nconst [major, minor, patch] = (\"0.5.1\" ).split('.');\n(0,_stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.setSdkInfo)({\n    type: _stream_io_video_client__WEBPACK_IMPORTED_MODULE_0__.SfuModels.SdkType.REACT,\n    major,\n    minor,\n    patch,\n});\n\n\n//# sourceMappingURL=index.es.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHN0cmVhbS1pby92aWRlby1yZWFjdC1zZGsvZGlzdC9pbmRleC5lcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBbVA7QUFDM007QUFDcUg7QUFDN0c7QUFDUTtBQUNrSDtBQUNsSjtBQUM2TztBQUM3SztBQUNqRDs7QUFFdkMsaUJBQWlCLGdEQUFnRDtBQUNqRSxpQkFBaUIsd0VBQU87QUFDeEIsNENBQTRDLCtDQUFRO0FBQ3BELFlBQVksb0JBQW9CO0FBQ2hDLElBQUksZ0RBQVM7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWSxzREFBRyxZQUFZLG1JQUFtSTtBQUM5Sjs7QUFFQTtBQUNBLFlBQVksMkJBQTJCO0FBQ3ZDLFlBQVksc0RBQUcsQ0FBQyx1REFBUSxJQUFJO0FBQzVCO0FBQ0E7QUFDQSxvQkFBb0IsbUVBQW1FO0FBQ3ZGLHNEQUFzRCw4REFBUztBQUMvRCxrRUFBa0Usc0RBQUcsVUFBVSxrRUFBa0U7QUFDakosaUVBQWlFLDhEQUFTO0FBQzFFO0FBQ0EsMkNBQTJDLHNEQUFHLFVBQVUsNkVBQTZFO0FBQ3JJLG9CQUFvQix1REFBSSxDQUFDLDJDQUFVLElBQUksNkRBQTZEO0FBQ3BHLFNBQVMsR0FBRztBQUNaOztBQUVBLCtCQUErQixvREFBYTtBQUM1Qyx3Q0FBd0MsaURBQVU7O0FBRWxELGtCQUFrQiwyQ0FBMkM7QUFDN0QsOEJBQThCLCtDQUFRO0FBQ3RDLFlBQVksdURBQUksQ0FBQyx1REFBUSxJQUFJLDRDQUE0Qyxz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aUMsZ0JBQWdCO0FBQ2pEO0FBQ0E7QUFDQSxrQ0FBa0MsK0JBQStCO0FBQ2pFO0FBQ0E7QUFDQSxrQ0FBa0MsOEJBQThCO0FBQ2hFO0FBQ0EsWUFBWSx1REFBSSxDQUFDLHVEQUFRLElBQUksMERBQTBELHNEQUFHLGVBQWUsd0hBQXdILHNEQUFzRCxzREFBRyxlQUFlLGdJQUFnSSxLQUFLO0FBQzlhO0FBQ0EsNERBQTRELDhEQUFTOztBQUVyRTtBQUNBLG1FQUFVO0FBQ1YsVUFBVSw4REFBUztBQUNuQjtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUUyckQ7QUFDNXJEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vSGFNZWV0ei8uL25vZGVfbW9kdWxlcy9Ac3RyZWFtLWlvL3ZpZGVvLXJlYWN0LXNkay9kaXN0L2luZGV4LmVzLmpzPzYzM2MiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU2Z1TW9kZWxzLCBPd25DYXBhYmlsaXR5LCBuYW1lLCBDYWxsaW5nU3RhdGUsIFZpc2liaWxpdHlTdGF0ZSwgQnJvd3NlcnMsIHBhZ2luYXRlZExheW91dFNvcnRQcmVzZXQsIGNvbWJpbmVDb21wYXJhdG9ycywgc2NyZWVuU2hhcmluZywgc3BlYWtlckxheW91dFNvcnRQcmVzZXQsIENhbGxUeXBlcywgZGVmYXVsdFNvcnRQcmVzZXQsIHNldFNka0luZm8gfSBmcm9tICdAc3RyZWFtLWlvL3ZpZGVvLWNsaWVudCc7XG5leHBvcnQgKiBmcm9tICdAc3RyZWFtLWlvL3ZpZGVvLWNsaWVudCc7XG5pbXBvcnQgeyB1c2VDYWxsLCB1c2VDYWxsU3RhdGVIb29rcywgdXNlSTE4biwgUmVzdHJpY3RlZCwgdXNlQ29ubmVjdGVkVXNlciwgU3RyZWFtQ2FsbFByb3ZpZGVyLCBTdHJlYW1WaWRlb1Byb3ZpZGVyIH0gZnJvbSAnQHN0cmVhbS1pby92aWRlby1yZWFjdC1iaW5kaW5ncyc7XG5leHBvcnQgKiBmcm9tICdAc3RyZWFtLWlvL3ZpZGVvLXJlYWN0LWJpbmRpbmdzJztcbmltcG9ydCB7IGpzeCwgRnJhZ21lbnQsIGpzeHMgfSBmcm9tICdyZWFjdC9qc3gtcnVudGltZSc7XG5pbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0LCBGcmFnbWVudCBhcyBGcmFnbWVudCQxLCBjcmVhdGVDb250ZXh0LCB1c2VDb250ZXh0LCB1c2VDYWxsYmFjaywgdXNlTWVtbywgdXNlUmVmLCBmb3J3YXJkUmVmLCBpc1ZhbGlkRWxlbWVudCwgdXNlTGF5b3V0RWZmZWN0IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IGNsc3ggZnJvbSAnY2xzeCc7XG5pbXBvcnQgeyB1c2VGbG9hdGluZywgb2Zmc2V0LCBzaGlmdCwgZmxpcCwgc2l6ZSwgYXV0b1VwZGF0ZSwgRmxvYXRpbmdPdmVybGF5LCBGbG9hdGluZ1BvcnRhbCwgdXNlTGlzdEl0ZW0sIHVzZUxpc3ROYXZpZ2F0aW9uLCB1c2VUeXBlYWhlYWQsIHVzZUNsaWNrLCB1c2VEaXNtaXNzLCB1c2VSb2xlLCB1c2VJbnRlcmFjdGlvbnMsIEZsb2F0aW5nRm9jdXNNYW5hZ2VyLCBGbG9hdGluZ0xpc3QsIHVzZUhvdmVyIH0gZnJvbSAnQGZsb2F0aW5nLXVpL3JlYWN0JztcbmltcG9ydCB7IENoYXJ0LCBDYXRlZ29yeVNjYWxlLCBMaW5lYXJTY2FsZSwgTGluZUVsZW1lbnQsIFBvaW50RWxlbWVudCB9IGZyb20gJ2NoYXJ0LmpzJztcbmltcG9ydCB7IExpbmUgfSBmcm9tICdyZWFjdC1jaGFydGpzLTInO1xuXG5jb25zdCBBdWRpbyA9ICh7IHBhcnRpY2lwYW50LCB0cmFja1R5cGUgPSAnYXVkaW9UcmFjaycsIC4uLnJlc3QgfSkgPT4ge1xuICAgIGNvbnN0IGNhbGwgPSB1c2VDYWxsKCk7XG4gICAgY29uc3QgW2F1ZGlvRWxlbWVudCwgc2V0QXVkaW9FbGVtZW50XSA9IHVzZVN0YXRlKG51bGwpO1xuICAgIGNvbnN0IHsgdXNlcklkLCBzZXNzaW9uSWQgfSA9IHBhcnRpY2lwYW50O1xuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmICghY2FsbCB8fCAhYXVkaW9FbGVtZW50KVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCBjbGVhbnVwID0gY2FsbC5iaW5kQXVkaW9FbGVtZW50KGF1ZGlvRWxlbWVudCwgc2Vzc2lvbklkLCB0cmFja1R5cGUpO1xuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgY2xlYW51cD8uKCk7XG4gICAgICAgIH07XG4gICAgfSwgW2NhbGwsIHNlc3Npb25JZCwgYXVkaW9FbGVtZW50LCB0cmFja1R5cGVdKTtcbiAgICByZXR1cm4gKGpzeChcImF1ZGlvXCIsIHsgYXV0b1BsYXk6IHRydWUsIC4uLnJlc3QsIHJlZjogc2V0QXVkaW9FbGVtZW50LCBcImRhdGEtdXNlci1pZFwiOiB1c2VySWQsIFwiZGF0YS1zZXNzaW9uLWlkXCI6IHNlc3Npb25JZCwgXCJkYXRhLXRyYWNrLXR5cGVcIjogdHJhY2tUeXBlIH0pKTtcbn07XG5cbmNvbnN0IFBhcnRpY2lwYW50c0F1ZGlvID0gKHByb3BzKSA9PiB7XG4gICAgY29uc3QgeyBwYXJ0aWNpcGFudHMsIGF1ZGlvUHJvcHMgfSA9IHByb3BzO1xuICAgIHJldHVybiAoanN4KEZyYWdtZW50LCB7IGNoaWxkcmVuOiBwYXJ0aWNpcGFudHMubWFwKChwYXJ0aWNpcGFudCkgPT4ge1xuICAgICAgICAgICAgaWYgKHBhcnRpY2lwYW50LmlzTG9jYWxQYXJ0aWNpcGFudClcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIGNvbnN0IHsgcHVibGlzaGVkVHJhY2tzLCBhdWRpb1N0cmVhbSwgc2NyZWVuU2hhcmVBdWRpb1N0cmVhbSwgc2Vzc2lvbklkLCB9ID0gcGFydGljaXBhbnQ7XG4gICAgICAgICAgICBjb25zdCBoYXNBdWRpbyA9IHB1Ymxpc2hlZFRyYWNrcy5pbmNsdWRlcyhTZnVNb2RlbHMuVHJhY2tUeXBlLkFVRElPKTtcbiAgICAgICAgICAgIGNvbnN0IGF1ZGlvVHJhY2tFbGVtZW50ID0gaGFzQXVkaW8gJiYgYXVkaW9TdHJlYW0gJiYgKGpzeChBdWRpbywgeyAuLi5hdWRpb1Byb3BzLCB0cmFja1R5cGU6IFwiYXVkaW9UcmFja1wiLCBwYXJ0aWNpcGFudDogcGFydGljaXBhbnQgfSkpO1xuICAgICAgICAgICAgY29uc3QgaGFzU2NyZWVuU2hhcmVBdWRpbyA9IHB1Ymxpc2hlZFRyYWNrcy5pbmNsdWRlcyhTZnVNb2RlbHMuVHJhY2tUeXBlLlNDUkVFTl9TSEFSRV9BVURJTyk7XG4gICAgICAgICAgICBjb25zdCBzY3JlZW5TaGFyZUF1ZGlvVHJhY2tFbGVtZW50ID0gaGFzU2NyZWVuU2hhcmVBdWRpbyAmJlxuICAgICAgICAgICAgICAgIHNjcmVlblNoYXJlQXVkaW9TdHJlYW0gJiYgKGpzeChBdWRpbywgeyAuLi5hdWRpb1Byb3BzLCB0cmFja1R5cGU6IFwic2NyZWVuU2hhcmVBdWRpb1RyYWNrXCIsIHBhcnRpY2lwYW50OiBwYXJ0aWNpcGFudCB9KSk7XG4gICAgICAgICAgICByZXR1cm4gKGpzeHMoRnJhZ21lbnQkMSwgeyBjaGlsZHJlbjogW2F1ZGlvVHJhY2tFbGVtZW50LCBzY3JlZW5TaGFyZUF1ZGlvVHJhY2tFbGVtZW50XSB9LCBzZXNzaW9uSWQpKTtcbiAgICAgICAgfSkgfSkpO1xufTtcblxuY29uc3QgUGFydGljaXBhbnRWaWV3Q29udGV4dCA9IGNyZWF0ZUNvbnRleHQodW5kZWZpbmVkKTtcbmNvbnN0IHVzZVBhcnRpY2lwYW50Vmlld0NvbnRleHQgPSAoKSA9PiB1c2VDb250ZXh0KFBhcnRpY2lwYW50Vmlld0NvbnRleHQpO1xuXG5jb25zdCBBdmF0YXIgPSAoeyBpbWFnZVNyYywgbmFtZSwgc3R5bGUsIGNsYXNzTmFtZSwgLi4ucmVzdCB9KSA9PiB7XG4gICAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gICAgcmV0dXJuIChqc3hzKEZyYWdtZW50LCB7IGNoaWxkcmVuOiBbKCFpbWFnZVNyYyB8fCBlcnJvcikgJiYgbmFtZSAmJiAoanN4KEF2YXRhckZhbGxiYWNrLCB7IGNsYXNzTmFtZTogY2xhc3NOYW1lLCBzdHlsZTogc3R5bGUsIG5hbWVzOiBbbmFtZV0gfSkpLCBpbWFnZVNyYyAmJiAhZXJyb3IgJiYgKGpzeChcImltZ1wiLCB7IG9uRXJyb3I6ICgpID0+IHNldEVycm9yKHRydWUpLCBhbHQ6IFwiYXZhdGFyXCIsIGNsYXNzTmFtZTogY2xzeCgnc3RyLXZpZGVvX19hdmF0YXInLCBjbGFzc05hbWUpLCBzcmM6IGltYWdlU3JjLCBzdHlsZTogc3R5bGUsIC4uLnJlc3QgfSkpXSB9KSk7XG59O1xuY29uc3QgQXZhdGFyRmFsbGJhY2sgPSAoeyBjbGFzc05hbWUsIG5hbWVzLCBzdHlsZSwgfSkgPT4ge1xuICAgIHJldHVybiAoanN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBjbHN4KCdzdHItdmlkZW9fX2F2YXRhci0taW5pdGlhbHMtZmFsbGJhY2snLCBjbGFzc05hbWUpLCBzdHlsZTogc3R5bGUsIGNoaWxkcmVuOiBqc3hzKFwiZGl2XCIsIHsgY2hpbGRyZW46IFtuYW1lc1swXVswXSwgbmFtZXNbMV0/LlswXV0gfSkgfSkpO1xufTtcblxuY29uc3QgdXNlRmxvYXRpbmdVSVByZXNldCA9ICh7IHBsYWNlbWVudCwgc3RyYXRlZ3ksIG9mZnNldDogb2Zmc2V0SW5QeCA9IDEwLCB9KSA9PiB7XG4gICAgY29uc3QgeyByZWZzLCB4LCB5LCB1cGRhdGUsIGVsZW1lbnRzOiB7IGRvbVJlZmVyZW5jZSwgZmxvYXRpbmcgfSwgfSA9IHVzZUZsb2F0aW5nKHtcbiAgICAgICAgcGxhY2VtZW50LFxuICAgICAgICBzdHJhdGVneSxcbiAgICAgICAgbWlkZGxld2FyZTogW1xuICAgICAgICAgICAgb2Zmc2V0KG9mZnNldEluUHgpLFxuICAgICAgICAgICAgc2hpZnQoKSxcbiAgICAgICAgICAgIGZsaXAoKSxcbiAgICAgICAgICAgIHNpemUoe1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDEwLFxuICAgICAgICAgICAgICAgIGFwcGx5OiAoeyBhdmFpbGFibGVIZWlnaHQsIGVsZW1lbnRzIH0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihlbGVtZW50cy5mbG9hdGluZy5zdHlsZSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF4SGVpZ2h0OiBgJHthdmFpbGFibGVIZWlnaHR9cHhgLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSksXG4gICAgICAgIF0sXG4gICAgfSk7XG4gICAgLy8gaGFuZGxlIHdpbmRvdyByZXNpemluZ1xuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmICghZG9tUmVmZXJlbmNlIHx8ICFmbG9hdGluZylcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3QgY2xlYW51cCA9IGF1dG9VcGRhdGUoZG9tUmVmZXJlbmNlLCBmbG9hdGluZywgdXBkYXRlKTtcbiAgICAgICAgcmV0dXJuICgpID0+IGNsZWFudXAoKTtcbiAgICB9LCBbZG9tUmVmZXJlbmNlLCBmbG9hdGluZywgdXBkYXRlXSk7XG4gICAgcmV0dXJuIHsgcmVmcywgeCwgeSwgZG9tUmVmZXJlbmNlLCBmbG9hdGluZywgc3RyYXRlZ3kgfTtcbn07XG5cbi8qKlxuICogVGhpcyBob29rIHdpbGwgcGVyc2lzdCB0aGUgZGV2aWNlIHNldHRpbmdzIHRvIGxvY2FsIHN0b3JhZ2UuXG4gKlxuICogQHBhcmFtIGtleSB0aGUga2V5IHRvIHVzZSBmb3IgbG9jYWwgc3RvcmFnZS5cbiAqL1xuY29uc3QgdXNlUGVyc2lzdERldmljZVByZWZlcmVuY2VzID0gKGtleSkgPT4ge1xuICAgIGNvbnN0IHsgdXNlTWljcm9waG9uZVN0YXRlLCB1c2VDYW1lcmFTdGF0ZSwgdXNlU3BlYWtlclN0YXRlLCB1c2VDYWxsU2V0dGluZ3MsIH0gPSB1c2VDYWxsU3RhdGVIb29rcygpO1xuICAgIGNvbnN0IG1pYyA9IHVzZU1pY3JvcGhvbmVTdGF0ZSgpO1xuICAgIGNvbnN0IGNhbWVyYSA9IHVzZUNhbWVyYVN0YXRlKCk7XG4gICAgY29uc3Qgc3BlYWtlciA9IHVzZVNwZWFrZXJTdGF0ZSgpO1xuICAgIGNvbnN0IHNldHRpbmdzID0gdXNlQ2FsbFNldHRpbmdzKCk7XG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKCFzZXR0aW5ncylcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGhhc1ByZWZlcmVuY2VzID0gISF3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KTtcbiAgICAgICAgICAgIGNvbnN0IHsgYXVkaW8sIHZpZGVvIH0gPSBzZXR0aW5ncztcbiAgICAgICAgICAgIGNvbnN0IGRlZmF1bHREZXZpY2UgPSAnZGVmYXVsdCc7XG4gICAgICAgICAgICBjb25zdCBwcmVmZXJlbmNlcyA9IHtcbiAgICAgICAgICAgICAgICBtaWM6IHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWREZXZpY2VJZDogbWljLnNlbGVjdGVkRGV2aWNlIHx8IGRlZmF1bHREZXZpY2UsXG4gICAgICAgICAgICAgICAgICAgIG11dGVkOiBoYXNQcmVmZXJlbmNlcyA/IG1pYy5pc011dGUgOiAhYXVkaW8ubWljX2RlZmF1bHRfb24sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBjYW1lcmE6IHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWREZXZpY2VJZDogY2FtZXJhLnNlbGVjdGVkRGV2aWNlIHx8IGRlZmF1bHREZXZpY2UsXG4gICAgICAgICAgICAgICAgICAgIG11dGVkOiBoYXNQcmVmZXJlbmNlcyA/IGNhbWVyYS5pc011dGUgOiAhdmlkZW8uY2FtZXJhX2RlZmF1bHRfb24sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzcGVha2VyOiB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkRGV2aWNlSWQ6IHNwZWFrZXIuc2VsZWN0ZWREZXZpY2UgfHwgZGVmYXVsdERldmljZSxcbiAgICAgICAgICAgICAgICAgICAgbXV0ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgSlNPTi5zdHJpbmdpZnkocHJlZmVyZW5jZXMpKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ0ZhaWxlZCB0byBzYXZlIGRldmljZSBwcmVmZXJlbmNlcycsIGVycik7XG4gICAgICAgIH1cbiAgICB9LCBbXG4gICAgICAgIGNhbWVyYS5pc011dGUsXG4gICAgICAgIGNhbWVyYS5zZWxlY3RlZERldmljZSxcbiAgICAgICAga2V5LFxuICAgICAgICBtaWMuaXNNdXRlLFxuICAgICAgICBtaWMuc2VsZWN0ZWREZXZpY2UsXG4gICAgICAgIHNldHRpbmdzLFxuICAgICAgICBzcGVha2VyLnNlbGVjdGVkRGV2aWNlLFxuICAgIF0pO1xufTtcbi8qKlxuICogVGhpcyBob29rIHdpbGwgYXBwbHkgdGhlIGRldmljZSBzZXR0aW5ncyBmcm9tIGxvY2FsIHN0b3JhZ2UuXG4gKlxuICogQHBhcmFtIGtleSB0aGUga2V5IHRvIHVzZSBmb3IgbG9jYWwgc3RvcmFnZS5cbiAqL1xuY29uc3QgdXNlQXBwbHlEZXZpY2VQcmVmZXJlbmNlcyA9IChrZXkpID0+IHtcbiAgICBjb25zdCBjYWxsID0gdXNlQ2FsbCgpO1xuICAgIGNvbnN0IHsgdXNlQ2FsbFNldHRpbmdzIH0gPSB1c2VDYWxsU3RhdGVIb29rcygpO1xuICAgIGNvbnN0IHNldHRpbmdzID0gdXNlQ2FsbFNldHRpbmdzKCk7XG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKCFjYWxsIHx8ICFzZXR0aW5ncylcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3QgYXBwbHkgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpbml0TWljID0gYXN5bmMgKHNldHRpbmcpID0+IHtcbiAgICAgICAgICAgICAgICBhd2FpdCBjYWxsLm1pY3JvcGhvbmUuc2VsZWN0KHNldHRpbmcuc2VsZWN0ZWREZXZpY2VJZCk7XG4gICAgICAgICAgICAgICAgaWYgKHNldHRpbmcubXV0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgY2FsbC5taWNyb3Bob25lLmRpc2FibGUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGNhbGwubWljcm9waG9uZS5lbmFibGUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgaW5pdENhbWVyYSA9IGFzeW5jIChzZXR0aW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgYXdhaXQgY2FsbC5jYW1lcmEuc2VsZWN0KHNldHRpbmcuc2VsZWN0ZWREZXZpY2VJZCk7XG4gICAgICAgICAgICAgICAgaWYgKHNldHRpbmcubXV0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgY2FsbC5jYW1lcmEuZGlzYWJsZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgY2FsbC5jYW1lcmEuZW5hYmxlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IGluaXRTcGVha2VyID0gKHNldHRpbmcpID0+IHtcbiAgICAgICAgICAgICAgICBjYWxsLnNwZWFrZXIuc2VsZWN0KHNldHRpbmcuc2VsZWN0ZWREZXZpY2VJZCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgbGV0IHByZWZlcmVuY2VzID0gbnVsbDtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcHJlZmVyZW5jZXMgPSBKU09OLnBhcnNlKHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ0ZhaWxlZCB0byBsb2FkIGRldmljZSBwcmVmZXJlbmNlcycsIGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocHJlZmVyZW5jZXMpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBpbml0TWljKHByZWZlcmVuY2VzLm1pYyk7XG4gICAgICAgICAgICAgICAgYXdhaXQgaW5pdENhbWVyYShwcmVmZXJlbmNlcy5jYW1lcmEpO1xuICAgICAgICAgICAgICAgIGluaXRTcGVha2VyKHByZWZlcmVuY2VzLnNwZWFrZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBhdWRpbywgdmlkZW8gfSA9IHNldHRpbmdzO1xuICAgICAgICAgICAgICAgIGlmIChhdWRpby5taWNfZGVmYXVsdF9vbilcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgY2FsbC5taWNyb3Bob25lLmVuYWJsZSgpO1xuICAgICAgICAgICAgICAgIGlmICh2aWRlby5jYW1lcmFfZGVmYXVsdF9vbilcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgY2FsbC5jYW1lcmEuZW5hYmxlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGFwcGx5KCkuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdGYWlsZWQgdG8gYXBwbHkgZGV2aWNlIHByZWZlcmVuY2VzJywgZXJyKTtcbiAgICAgICAgfSk7XG4gICAgfSwgW2NhbGwsIGtleSwgc2V0dGluZ3NdKTtcbn07XG4vKipcbiAqIFRoaXMgaG9vayB3aWxsIGFwcGx5IGFuZCBwZXJzaXN0IHRoZSBkZXZpY2UgcHJlZmVyZW5jZXMgZnJvbSBsb2NhbCBzdG9yYWdlLlxuICpcbiAqIEBwYXJhbSBrZXkgdGhlIGtleSB0byB1c2UgZm9yIGxvY2FsIHN0b3JhZ2UuXG4gKi9cbmNvbnN0IHVzZVBlcnNpc3RlZERldmljZVByZWZlcmVuY2VzID0gKGtleSA9ICdAc3RyZWFtLWlvL2RldmljZS1wcmVmZXJlbmNlcycpID0+IHtcbiAgICB1c2VBcHBseURldmljZVByZWZlcmVuY2VzKGtleSk7XG4gICAgdXNlUGVyc2lzdERldmljZVByZWZlcmVuY2VzKGtleSk7XG59O1xuXG5jb25zdCBTQ1JPTExfVEhSRVNIT0xEID0gMTA7XG4vKipcbiAqIEhvb2sgd2hpY2ggb2JzZXJ2ZXMgZWxlbWVudCdzIHNjcm9sbCBwb3NpdGlvbiBhbmQgcmV0dXJucyB0ZXh0IHZhbHVlIGJhc2VkIG9uIHRoZVxuICogcG9zaXRpb24gb2YgdGhlIHNjcm9sbGJhciAoYHRvcGAsIGBib3R0b21gLCBgYmV0d2VlbmAgYW5kIGBudWxsYCBpZiBubyBzY3JvbGxiYXIgaXMgYXZhaWxhYmxlKVxuICovXG5jb25zdCB1c2VWZXJ0aWNhbFNjcm9sbFBvc2l0aW9uID0gKHNjcm9sbEVsZW1lbnQsIHRocmVzaG9sZCA9IFNDUk9MTF9USFJFU0hPTEQpID0+IHtcbiAgICBjb25zdCBbc2Nyb2xsUG9zaXRpb24sIHNldFNjcm9sbFBvc2l0aW9uXSA9IHVzZVN0YXRlKG51bGwpO1xuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmICghc2Nyb2xsRWxlbWVudClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3Qgc2Nyb2xsSGFuZGxlciA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSBzY3JvbGxFbGVtZW50O1xuICAgICAgICAgICAgY29uc3QgaGFzVmVydGljYWxTY3JvbGxiYXIgPSBlbGVtZW50LnNjcm9sbEhlaWdodCA+IGVsZW1lbnQuY2xpZW50SGVpZ2h0O1xuICAgICAgICAgICAgaWYgKCFoYXNWZXJ0aWNhbFNjcm9sbGJhcilcbiAgICAgICAgICAgICAgICByZXR1cm4gc2V0U2Nyb2xsUG9zaXRpb24obnVsbCk7XG4gICAgICAgICAgICBjb25zdCBpc0F0VGhlVG9wID0gZWxlbWVudC5zY3JvbGxUb3AgPD0gdGhyZXNob2xkO1xuICAgICAgICAgICAgaWYgKGlzQXRUaGVUb3ApXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNldFNjcm9sbFBvc2l0aW9uKCd0b3AnKTtcbiAgICAgICAgICAgIGNvbnN0IGlzQXRUaGVCb3R0b20gPSBNYXRoLmFicyhlbGVtZW50LnNjcm9sbEhlaWdodCAtIGVsZW1lbnQuc2Nyb2xsVG9wIC0gZWxlbWVudC5jbGllbnRIZWlnaHQpIDw9IHRocmVzaG9sZDtcbiAgICAgICAgICAgIGlmIChpc0F0VGhlQm90dG9tKVxuICAgICAgICAgICAgICAgIHJldHVybiBzZXRTY3JvbGxQb3NpdGlvbignYm90dG9tJyk7XG4gICAgICAgICAgICBzZXRTY3JvbGxQb3NpdGlvbignYmV0d2VlbicpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCByZXNpemVPYnNlcnZlciA9IG5ldyBSZXNpemVPYnNlcnZlcihzY3JvbGxIYW5kbGVyKTtcbiAgICAgICAgcmVzaXplT2JzZXJ2ZXIub2JzZXJ2ZShzY3JvbGxFbGVtZW50KTtcbiAgICAgICAgc2Nyb2xsRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBzY3JvbGxIYW5kbGVyKTtcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIHNjcm9sbEVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgc2Nyb2xsSGFuZGxlcik7XG4gICAgICAgICAgICByZXNpemVPYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgICAgIH07XG4gICAgfSwgW3Njcm9sbEVsZW1lbnQsIHRocmVzaG9sZF0pO1xuICAgIHJldHVybiBzY3JvbGxQb3NpdGlvbjtcbn07XG5jb25zdCB1c2VIb3Jpem9udGFsU2Nyb2xsUG9zaXRpb24gPSAoc2Nyb2xsRWxlbWVudCwgdGhyZXNob2xkID0gU0NST0xMX1RIUkVTSE9MRCkgPT4ge1xuICAgIGNvbnN0IFtzY3JvbGxQb3NpdGlvbiwgc2V0U2Nyb2xsUG9zaXRpb25dID0gdXNlU3RhdGUobnVsbCk7XG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKCFzY3JvbGxFbGVtZW50KVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCBzY3JvbGxIYW5kbGVyID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IHNjcm9sbEVsZW1lbnQ7XG4gICAgICAgICAgICBjb25zdCBoYXNIb3Jpem9udGFsU2Nyb2xsYmFyID0gZWxlbWVudC5zY3JvbGxXaWR0aCA+IGVsZW1lbnQuY2xpZW50V2lkdGg7XG4gICAgICAgICAgICBpZiAoIWhhc0hvcml6b250YWxTY3JvbGxiYXIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNldFNjcm9sbFBvc2l0aW9uKG51bGwpO1xuICAgICAgICAgICAgY29uc3QgaXNBdFRoZVN0YXJ0ID0gZWxlbWVudC5zY3JvbGxMZWZ0IDw9IHRocmVzaG9sZDtcbiAgICAgICAgICAgIGlmIChpc0F0VGhlU3RhcnQpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNldFNjcm9sbFBvc2l0aW9uKCdzdGFydCcpO1xuICAgICAgICAgICAgY29uc3QgaXNBdFRoZUVuZCA9IE1hdGguYWJzKGVsZW1lbnQuc2Nyb2xsV2lkdGggLSBlbGVtZW50LnNjcm9sbExlZnQgLSBlbGVtZW50LmNsaWVudFdpZHRoKSA8PSB0aHJlc2hvbGQ7XG4gICAgICAgICAgICBpZiAoaXNBdFRoZUVuZClcbiAgICAgICAgICAgICAgICByZXR1cm4gc2V0U2Nyb2xsUG9zaXRpb24oJ2VuZCcpO1xuICAgICAgICAgICAgc2V0U2Nyb2xsUG9zaXRpb24oJ2JldHdlZW4nKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgcmVzaXplT2JzZXJ2ZXIgPSBuZXcgUmVzaXplT2JzZXJ2ZXIoc2Nyb2xsSGFuZGxlcik7XG4gICAgICAgIHJlc2l6ZU9ic2VydmVyLm9ic2VydmUoc2Nyb2xsRWxlbWVudCk7XG4gICAgICAgIHNjcm9sbEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgc2Nyb2xsSGFuZGxlcik7XG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICBzY3JvbGxFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHNjcm9sbEhhbmRsZXIpO1xuICAgICAgICAgICAgcmVzaXplT2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICAgICAgICB9O1xuICAgIH0sIFtzY3JvbGxFbGVtZW50LCB0aHJlc2hvbGRdKTtcbiAgICByZXR1cm4gc2Nyb2xsUG9zaXRpb247XG59O1xuXG5jb25zdCB1c2VUb2dnbGVDYWxsUmVjb3JkaW5nID0gKCkgPT4ge1xuICAgIGNvbnN0IGNhbGwgPSB1c2VDYWxsKCk7XG4gICAgY29uc3QgeyB1c2VJc0NhbGxSZWNvcmRpbmdJblByb2dyZXNzIH0gPSB1c2VDYWxsU3RhdGVIb29rcygpO1xuICAgIGNvbnN0IGlzQ2FsbFJlY29yZGluZ0luUHJvZ3Jlc3MgPSB1c2VJc0NhbGxSZWNvcmRpbmdJblByb2dyZXNzKCk7XG4gICAgY29uc3QgW2lzQXdhaXRpbmdSZXNwb25zZSwgc2V0SXNBd2FpdGluZ1Jlc3BvbnNlXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgICAvLyBUT0RPOiBhZGQgcGVybWlzc2lvbnNcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICAvLyB3ZSB3YWl0IHVudGlsIGNhbGwucmVjb3JkaW5nX3N0YXJ0ZWQvc3RvcHBlZCBldmVudCB0byBmbGlwcyB0aGVcbiAgICAgICAgLy8gYGlzQ2FsbFJlY29yZGluZ0luUHJvZ3Jlc3NgIHN0YXRlIHZhcmlhYmxlLlxuICAgICAgICAvLyBPbmNlIHRoZSBmbGlwIGhhcHBlbnMsIHdlIHJlbW92ZSB0aGUgbG9hZGluZyBpbmRpY2F0b3JcbiAgICAgICAgc2V0SXNBd2FpdGluZ1Jlc3BvbnNlKChpc0F3YWl0aW5nKSA9PiB7XG4gICAgICAgICAgICBpZiAoaXNBd2FpdGluZylcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICByZXR1cm4gaXNBd2FpdGluZztcbiAgICAgICAgfSk7XG4gICAgfSwgW2lzQ2FsbFJlY29yZGluZ0luUHJvZ3Jlc3NdKTtcbiAgICBjb25zdCB0b2dnbGVDYWxsUmVjb3JkaW5nID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgc2V0SXNBd2FpdGluZ1Jlc3BvbnNlKHRydWUpO1xuICAgICAgICAgICAgaWYgKGlzQ2FsbFJlY29yZGluZ0luUHJvZ3Jlc3MpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBjYWxsPy5zdG9wUmVjb3JkaW5nKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBjYWxsPy5zdGFydFJlY29yZGluZygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgc3RhcnQgcmVjb3JkaW5nYCwgZSk7XG4gICAgICAgIH1cbiAgICB9LCBbY2FsbCwgaXNDYWxsUmVjb3JkaW5nSW5Qcm9ncmVzc10pO1xuICAgIHJldHVybiB7IHRvZ2dsZUNhbGxSZWNvcmRpbmcsIGlzQXdhaXRpbmdSZXNwb25zZSwgaXNDYWxsUmVjb3JkaW5nSW5Qcm9ncmVzcyB9O1xufTtcblxuY29uc3QgdXNlUmVxdWVzdFBlcm1pc3Npb24gPSAocGVybWlzc2lvbikgPT4ge1xuICAgIGNvbnN0IGNhbGwgPSB1c2VDYWxsKCk7XG4gICAgY29uc3QgeyB1c2VIYXNQZXJtaXNzaW9ucyB9ID0gdXNlQ2FsbFN0YXRlSG9va3MoKTtcbiAgICBjb25zdCBoYXNQZXJtaXNzaW9uID0gdXNlSGFzUGVybWlzc2lvbnMocGVybWlzc2lvbik7XG4gICAgY29uc3QgW2lzQXdhaXRpbmdQZXJtaXNzaW9uLCBzZXRJc0F3YWl0aW5nUGVybWlzc2lvbl0gPSB1c2VTdGF0ZShmYWxzZSk7IC8vIFRPRE86IGxvYWQgd2l0aCBwb3NzaWJseSBwZW5kaW5nIHN0YXRlXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgY29uc3QgcmVzZXQgPSAoKSA9PiBzZXRJc0F3YWl0aW5nUGVybWlzc2lvbihmYWxzZSk7XG4gICAgICAgIGlmIChoYXNQZXJtaXNzaW9uKVxuICAgICAgICAgICAgcmVzZXQoKTtcbiAgICB9LCBbaGFzUGVybWlzc2lvbl0pO1xuICAgIGNvbnN0IHJlcXVlc3RQZXJtaXNzaW9uID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICBpZiAoaGFzUGVybWlzc2lvbilcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICBjb25zdCBjYW5SZXF1ZXN0UGVybWlzc2lvbiA9ICEhY2FsbD8ucGVybWlzc2lvbnNDb250ZXh0LmNhblJlcXVlc3QocGVybWlzc2lvbik7XG4gICAgICAgIGlmIChpc0F3YWl0aW5nUGVybWlzc2lvbiB8fCAhY2FuUmVxdWVzdFBlcm1pc3Npb24pXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIHNldElzQXdhaXRpbmdQZXJtaXNzaW9uKHRydWUpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgY2FsbD8ucmVxdWVzdFBlcm1pc3Npb25zKHtcbiAgICAgICAgICAgICAgICBwZXJtaXNzaW9uczogW3Blcm1pc3Npb25dLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBzZXRJc0F3YWl0aW5nUGVybWlzc2lvbihmYWxzZSk7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYHJlcXVlc3RQZXJtaXNzaW9uIGZhaWxlZDogJHtlcnJvcn1gKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSwgW2NhbGwsIGhhc1Blcm1pc3Npb24sIGlzQXdhaXRpbmdQZXJtaXNzaW9uLCBwZXJtaXNzaW9uXSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVxdWVzdFBlcm1pc3Npb24sXG4gICAgICAgIGhhc1Blcm1pc3Npb24sXG4gICAgICAgIGNhblJlcXVlc3RQZXJtaXNzaW9uOiAhIWNhbGw/LnBlcm1pc3Npb25zQ29udGV4dC5jYW5SZXF1ZXN0KHBlcm1pc3Npb24pLFxuICAgICAgICBpc0F3YWl0aW5nUGVybWlzc2lvbixcbiAgICB9O1xufTtcblxudmFyIE1lbnVWaXN1YWxUeXBlO1xuKGZ1bmN0aW9uIChNZW51VmlzdWFsVHlwZSkge1xuICAgIE1lbnVWaXN1YWxUeXBlW1wiUE9SVEFMXCJdID0gXCJwb3J0YWxcIjtcbiAgICBNZW51VmlzdWFsVHlwZVtcIk1FTlVcIl0gPSBcIm1lbnVcIjtcbn0pKE1lbnVWaXN1YWxUeXBlIHx8IChNZW51VmlzdWFsVHlwZSA9IHt9KSk7XG4vKipcbiAqIFVzZWQgdG8gcHJvdmlkZSB1dGlsaXR5IEFQSXMgdG8gdGhlIGNvbXBvbmVudHMgcmVuZGVyZWQgaW5zaWRlIHRoZSBwb3J0YWwuXG4gKi9cbmNvbnN0IE1lbnVDb250ZXh0ID0gY3JlYXRlQ29udGV4dCh7fSk7XG4vKipcbiAqIEFjY2VzcyB0byB0aGUgY2xvc2VzIE1lbnVDb250ZXh0LlxuICovXG5jb25zdCB1c2VNZW51Q29udGV4dCA9ICgpID0+IHtcbiAgICByZXR1cm4gdXNlQ29udGV4dChNZW51Q29udGV4dCk7XG59O1xuY29uc3QgTWVudVBvcnRhbCA9ICh7IGNoaWxkcmVuLCByZWZzLCB9KSA9PiB7XG4gICAgY29uc3QgcG9ydGFsSWQgPSB1c2VNZW1vKCgpID0+IGBzdHItdmlkZW8tcG9ydGFsLSR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDIsIDkpfWAsIFtdKTtcbiAgICByZXR1cm4gKGpzeHMoRnJhZ21lbnQsIHsgY2hpbGRyZW46IFtqc3goXCJkaXZcIiwgeyBpZDogcG9ydGFsSWQsIGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX3BvcnRhbFwiIH0pLCBqc3goRmxvYXRpbmdPdmVybGF5LCB7IGNoaWxkcmVuOiBqc3goRmxvYXRpbmdQb3J0YWwsIHsgaWQ6IHBvcnRhbElkLCBjaGlsZHJlbjoganN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fcG9ydGFsLWNvbnRlbnRcIiwgcmVmOiByZWZzLnNldEZsb2F0aW5nLCBjaGlsZHJlbjogY2hpbGRyZW4gfSkgfSkgfSldIH0pKTtcbn07XG5jb25zdCBNZW51VG9nZ2xlID0gKHsgVG9nZ2xlQnV0dG9uLCBwbGFjZW1lbnQgPSAndG9wLXN0YXJ0Jywgc3RyYXRlZ3kgPSAnYWJzb2x1dGUnLCBvZmZzZXQsIHZpc3VhbFR5cGUgPSBNZW51VmlzdWFsVHlwZS5NRU5VLCBjaGlsZHJlbiwgfSkgPT4ge1xuICAgIGNvbnN0IFttZW51U2hvd24sIHNldE1lbnVTaG93bl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gICAgY29uc3QgeyBmbG9hdGluZywgZG9tUmVmZXJlbmNlLCByZWZzLCB4LCB5IH0gPSB1c2VGbG9hdGluZ1VJUHJlc2V0KHtcbiAgICAgICAgcGxhY2VtZW50LFxuICAgICAgICBzdHJhdGVneSxcbiAgICAgICAgb2Zmc2V0LFxuICAgIH0pO1xuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGNvbnN0IGhhbmRsZUNsaWNrID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAoIWZsb2F0aW5nICYmIGRvbVJlZmVyZW5jZT8uY29udGFpbnMoZXZlbnQudGFyZ2V0KSkge1xuICAgICAgICAgICAgICAgIHNldE1lbnVTaG93bih0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGZsb2F0aW5nICYmICFmbG9hdGluZz8uY29udGFpbnMoZXZlbnQudGFyZ2V0KSkge1xuICAgICAgICAgICAgICAgIHNldE1lbnVTaG93bihmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGhhbmRsZUtleURvd24gPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGlmIChldmVudC5rZXkudG9Mb3dlckNhc2UoKSA9PT0gJ2VzY2FwZScgJiZcbiAgICAgICAgICAgICAgICAhZXZlbnQuYWx0S2V5ICYmXG4gICAgICAgICAgICAgICAgIWV2ZW50LmN0cmxLZXkpIHtcbiAgICAgICAgICAgICAgICBzZXRNZW51U2hvd24oZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBkb2N1bWVudD8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVDbGljaywgeyBjYXB0dXJlOiB0cnVlIH0pO1xuICAgICAgICBkb2N1bWVudD8uYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUtleURvd24pO1xuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgZG9jdW1lbnQ/LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlQ2xpY2ssIHsgY2FwdHVyZTogdHJ1ZSB9KTtcbiAgICAgICAgICAgIGRvY3VtZW50Py5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgaGFuZGxlS2V5RG93bik7XG4gICAgICAgIH07XG4gICAgfSwgW2Zsb2F0aW5nLCBkb21SZWZlcmVuY2VdKTtcbiAgICByZXR1cm4gKGpzeHMoRnJhZ21lbnQsIHsgY2hpbGRyZW46IFttZW51U2hvd24gJiYgKGpzeChNZW51Q29udGV4dC5Qcm92aWRlciwgeyB2YWx1ZTogeyBjbG9zZTogKCkgPT4gc2V0TWVudVNob3duKGZhbHNlKSB9LCBjaGlsZHJlbjogdmlzdWFsVHlwZSA9PT0gTWVudVZpc3VhbFR5cGUuUE9SVEFMID8gKGpzeChNZW51UG9ydGFsLCB7IHJlZnM6IHJlZnMsIGNoaWxkcmVuOiBjaGlsZHJlbiB9KSkgOiB2aXN1YWxUeXBlID09PSBNZW51VmlzdWFsVHlwZS5NRU5VID8gKGpzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX21lbnUtY29udGFpbmVyXCIsIHJlZjogcmVmcy5zZXRGbG9hdGluZywgc3R5bGU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBzdHJhdGVneSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogeSA/PyAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogeCA/PyAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3dZOiAnYXV0bycsXG4gICAgICAgICAgICAgICAgICAgIH0sIGNoaWxkcmVuOiBjaGlsZHJlbiB9KSkgOiBudWxsIH0pKSwganN4KFRvZ2dsZUJ1dHRvbiwgeyBtZW51U2hvd246IG1lbnVTaG93biwgcmVmOiByZWZzLnNldFJlZmVyZW5jZSB9KV0gfSkpO1xufTtcblxuY29uc3QgR2VuZXJpY01lbnUgPSAoeyBjaGlsZHJlbiwgb25JdGVtQ2xpY2ssIH0pID0+IHtcbiAgICBjb25zdCByZWYgPSB1c2VSZWYobnVsbCk7XG4gICAgcmV0dXJuIChqc3goXCJ1bFwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX2dlbmVyaWMtbWVudVwiLCByZWY6IHJlZiwgb25DbGljazogKGUpID0+IHtcbiAgICAgICAgICAgIGlmIChvbkl0ZW1DbGljayAmJlxuICAgICAgICAgICAgICAgIGUudGFyZ2V0ICE9PSByZWYuY3VycmVudCAmJlxuICAgICAgICAgICAgICAgIHJlZi5jdXJyZW50Py5jb250YWlucyhlLnRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICBvbkl0ZW1DbGljayhlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgY2hpbGRyZW46IGNoaWxkcmVuIH0pKTtcbn07XG5jb25zdCBHZW5lcmljTWVudUJ1dHRvbkl0ZW0gPSAoeyBjaGlsZHJlbiwgLi4ucmVzdCB9KSA9PiB7XG4gICAgcmV0dXJuIChqc3goXCJsaVwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX2dlbmVyaWMtbWVudS0taXRlbVwiLCBjaGlsZHJlbjoganN4KFwiYnV0dG9uXCIsIHsgLi4ucmVzdCwgY2hpbGRyZW46IGNoaWxkcmVuIH0pIH0pKTtcbn07XG5cbmNvbnN0IEljb24gPSAoeyBjbGFzc05hbWUsIGljb24gfSkgPT4gKGpzeChcInNwYW5cIiwgeyBjbGFzc05hbWU6IGNsc3goJ3N0ci12aWRlb19faWNvbicsIGljb24gJiYgYHN0ci12aWRlb19faWNvbi0tJHtpY29ufWAsIGNsYXNzTmFtZSkgfSkpO1xuXG5jb25zdCBJY29uQnV0dG9uID0gZm9yd2FyZFJlZihmdW5jdGlvbiBJY29uQnV0dG9uKHByb3BzLCByZWYpIHtcbiAgICBjb25zdCB7IGljb24sIGVuYWJsZWQsIHZhcmlhbnQsIG9uQ2xpY2ssIGNsYXNzTmFtZSwgLi4ucmVzdCB9ID0gcHJvcHM7XG4gICAgcmV0dXJuIChqc3goXCJidXR0b25cIiwgeyBjbGFzc05hbWU6IGNsc3goJ3N0ci12aWRlb19fY2FsbC1jb250cm9sc19fYnV0dG9uJywgY2xhc3NOYW1lLCB7XG4gICAgICAgICAgICBbYHN0ci12aWRlb19fY2FsbC1jb250cm9sc19fYnV0dG9uLS12YXJpYW50LSR7dmFyaWFudH1gXTogdmFyaWFudCxcbiAgICAgICAgICAgICdzdHItdmlkZW9fX2NhbGwtY29udHJvbHNfX2J1dHRvbi0tZW5hYmxlZCc6IGVuYWJsZWQsXG4gICAgICAgIH0pLCBvbkNsaWNrOiAoZSkgPT4ge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgb25DbGljaz8uKGUpO1xuICAgICAgICB9LCByZWY6IHJlZiwgLi4ucmVzdCwgY2hpbGRyZW46IGpzeChJY29uLCB7IGljb246IGljb24gfSkgfSkpO1xufSk7XG5cbmNvbnN0IGlzQ29tcG9uZW50VHlwZSA9IChlbGVtZW50T3JDb21wb25lbnQpID0+IHtcbiAgICByZXR1cm4gZWxlbWVudE9yQ29tcG9uZW50ID09PSBudWxsXG4gICAgICAgID8gZmFsc2VcbiAgICAgICAgOiAhaXNWYWxpZEVsZW1lbnQoZWxlbWVudE9yQ29tcG9uZW50KTtcbn07XG5cbmNvbnN0IGNodW5rID0gKGFycmF5LCBzaXplKSA9PiB7XG4gICAgY29uc3QgY2h1bmtDb3VudCA9IE1hdGguY2VpbChhcnJheS5sZW5ndGggLyBzaXplKTtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh7IGxlbmd0aDogY2h1bmtDb3VudCB9LCAoXywgaW5kZXgpID0+IGFycmF5LnNsaWNlKHNpemUgKiBpbmRleCwgc2l6ZSAqIGluZGV4ICsgc2l6ZSkpO1xufTtcblxuY29uc3QgYXBwbHlFbGVtZW50VG9SZWYgPSAocmVmLCBlbGVtZW50KSA9PiB7XG4gICAgaWYgKCFyZWYpXG4gICAgICAgIHJldHVybjtcbiAgICBpZiAodHlwZW9mIHJlZiA9PT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgcmV0dXJuIHJlZihlbGVtZW50KTtcbiAgICByZWYuY3VycmVudCA9IGVsZW1lbnQ7XG59O1xuXG5jb25zdCBDb21wb3NpdGVCdXR0b24gPSBmb3J3YXJkUmVmKGZ1bmN0aW9uIENvbXBvc2l0ZUJ1dHRvbih7IGNhcHRpb24sIGNoaWxkcmVuLCBjbGFzc05hbWUsIGFjdGl2ZSwgTWVudSwgbWVudVBsYWNlbWVudCwgbWVudU9mZnNldCwgdGl0bGUsIFRvZ2dsZU1lbnVCdXR0b24gPSBEZWZhdWx0VG9nZ2xlTWVudUJ1dHRvbiwgdmFyaWFudCwgb25DbGljaywgLi4ucmVzdEJ1dHRvblByb3BzIH0sIHJlZikge1xuICAgIHJldHVybiAoanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogY2xzeCgnc3RyLXZpZGVvX19jb21wb3NpdGUtYnV0dG9uJywgY2xhc3NOYW1lLCB7XG4gICAgICAgICAgICAnc3RyLXZpZGVvX19jb21wb3NpdGUtYnV0dG9uLS1jYXB0aW9uJzogY2FwdGlvbixcbiAgICAgICAgICAgICdzdHItdmlkZW9fX2NvbXBvc2l0ZS1idXR0b24tLW1lbnUnOiBNZW51LFxuICAgICAgICB9KSwgdGl0bGU6IHRpdGxlLCByZWY6IHJlZiwgY2hpbGRyZW46IFtqc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBjbHN4KCdzdHItdmlkZW9fX2NvbXBvc2l0ZS1idXR0b25fX2J1dHRvbi1ncm91cCcsIHtcbiAgICAgICAgICAgICAgICAgICAgJ3N0ci12aWRlb19fY29tcG9zaXRlLWJ1dHRvbl9fYnV0dG9uLWdyb3VwLS1hY3RpdmUnOiBhY3RpdmUsXG4gICAgICAgICAgICAgICAgICAgICdzdHItdmlkZW9fX2NvbXBvc2l0ZS1idXR0b25fX2J1dHRvbi1ncm91cC0tYWN0aXZlLXByaW1hcnknOiBhY3RpdmUgJiYgdmFyaWFudCA9PT0gJ3ByaW1hcnknLFxuICAgICAgICAgICAgICAgICAgICAnc3RyLXZpZGVvX19jb21wb3NpdGUtYnV0dG9uX19idXR0b24tZ3JvdXAtLWFjdGl2ZS1zZWNvbmRhcnknOiBhY3RpdmUgJiYgdmFyaWFudCA9PT0gJ3NlY29uZGFyeScsXG4gICAgICAgICAgICAgICAgfSksIGNoaWxkcmVuOiBbanN4KFwiYnV0dG9uXCIsIHsgdHlwZTogXCJidXR0b25cIiwgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fY29tcG9zaXRlLWJ1dHRvbl9fYnV0dG9uXCIsIG9uQ2xpY2s6IChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s/LihlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIC4uLnJlc3RCdXR0b25Qcm9wcywgY2hpbGRyZW46IGNoaWxkcmVuIH0pLCBNZW51ICYmIChqc3goTWVudVRvZ2dsZSwgeyBvZmZzZXQ6IG1lbnVPZmZzZXQsIHBsYWNlbWVudDogbWVudVBsYWNlbWVudCwgVG9nZ2xlQnV0dG9uOiBUb2dnbGVNZW51QnV0dG9uLCBjaGlsZHJlbjogaXNDb21wb25lbnRUeXBlKE1lbnUpID8ganN4KE1lbnUsIHt9KSA6IE1lbnUgfSkpXSB9KSwgY2FwdGlvbiAmJiAoanN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fY29tcG9zaXRlLWJ1dHRvbl9fY2FwdGlvblwiLCBjaGlsZHJlbjogY2FwdGlvbiB9KSldIH0pKTtcbn0pO1xuY29uc3QgRGVmYXVsdFRvZ2dsZU1lbnVCdXR0b24gPSBmb3J3YXJkUmVmKGZ1bmN0aW9uIERlZmF1bHRUb2dnbGVNZW51QnV0dG9uKHsgbWVudVNob3duIH0sIHJlZikge1xuICAgIHJldHVybiAoanN4KEljb25CdXR0b24sIHsgY2xhc3NOYW1lOiBjbHN4KCdzdHItdmlkZW9fX21lbnUtdG9nZ2xlLWJ1dHRvbicsIHtcbiAgICAgICAgICAgICdzdHItdmlkZW9fX21lbnUtdG9nZ2xlLWJ1dHRvbi0tYWN0aXZlJzogbWVudVNob3duLFxuICAgICAgICB9KSwgaWNvbjogbWVudVNob3duID8gJ2NhcmV0LWRvd24nIDogJ2NhcmV0LXVwJywgcmVmOiByZWYgfSkpO1xufSk7XG5cbmNvbnN0IFRleHRCdXR0b24gPSAoeyBjaGlsZHJlbiwgLi4ucmVzdCB9KSA9PiB7XG4gICAgcmV0dXJuIChqc3goXCJidXR0b25cIiwgeyAuLi5yZXN0LCBjbGFzc05hbWU6IFwic3RyLXZpZGVvX190ZXh0LWJ1dHRvblwiLCBjaGlsZHJlbjogY2hpbGRyZW4gfSkpO1xufTtcblxuY29uc3QgQWNjZXB0Q2FsbEJ1dHRvbiA9ICh7IGRpc2FibGVkLCBvbkFjY2VwdCwgb25DbGljaywgfSkgPT4ge1xuICAgIGNvbnN0IGNhbGwgPSB1c2VDYWxsKCk7XG4gICAgY29uc3QgaGFuZGxlQ2xpY2sgPSB1c2VDYWxsYmFjayhhc3luYyAoZSkgPT4ge1xuICAgICAgICBpZiAob25DbGljaykge1xuICAgICAgICAgICAgb25DbGljayhlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjYWxsKSB7XG4gICAgICAgICAgICBhd2FpdCBjYWxsLmpvaW4oKTtcbiAgICAgICAgICAgIG9uQWNjZXB0Py4oKTtcbiAgICAgICAgfVxuICAgIH0sIFtvbkNsaWNrLCBvbkFjY2VwdCwgY2FsbF0pO1xuICAgIHJldHVybiAoanN4KEljb25CdXR0b24sIHsgZGlzYWJsZWQ6IGRpc2FibGVkLCBpY29uOiBcImNhbGwtYWNjZXB0XCIsIHZhcmlhbnQ6IFwic3VjY2Vzc1wiLCBcImRhdGEtdGVzdGlkXCI6IFwiYWNjZXB0LWNhbGwtYnV0dG9uXCIsIG9uQ2xpY2s6IGhhbmRsZUNsaWNrIH0pKTtcbn07XG5cbmNvbnN0IE5vdGlmaWNhdGlvbiA9IChwcm9wcykgPT4ge1xuICAgIGNvbnN0IHsgaXNWaXNpYmxlLCBtZXNzYWdlLCBjaGlsZHJlbiwgdmlzaWJpbGl0eVRpbWVvdXQsIHJlc2V0SXNWaXNpYmxlLCBwbGFjZW1lbnQgPSAndG9wJywgaWNvbkNsYXNzTmFtZSA9ICdzdHItdmlkZW9fX25vdGlmaWNhdGlvbl9faWNvbicsIGNsb3NlLCB9ID0gcHJvcHM7XG4gICAgY29uc3QgeyByZWZzLCB4LCB5LCBzdHJhdGVneSB9ID0gdXNlRmxvYXRpbmdVSVByZXNldCh7XG4gICAgICAgIHBsYWNlbWVudCxcbiAgICAgICAgc3RyYXRlZ3k6ICdhYnNvbHV0ZScsXG4gICAgfSk7XG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKCFpc1Zpc2libGUgfHwgIXZpc2liaWxpdHlUaW1lb3V0IHx8ICFyZXNldElzVmlzaWJsZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3QgdGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgcmVzZXRJc1Zpc2libGUoKTtcbiAgICAgICAgfSwgdmlzaWJpbGl0eVRpbWVvdXQpO1xuICAgICAgICByZXR1cm4gKCkgPT4gY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgIH0sIFtpc1Zpc2libGUsIHJlc2V0SXNWaXNpYmxlLCB2aXNpYmlsaXR5VGltZW91dF0pO1xuICAgIHJldHVybiAoanN4cyhcImRpdlwiLCB7IHJlZjogcmVmcy5zZXRSZWZlcmVuY2UsIGNoaWxkcmVuOiBbaXNWaXNpYmxlICYmIChqc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fbm90aWZpY2F0aW9uXCIsIHJlZjogcmVmcy5zZXRGbG9hdGluZywgc3R5bGU6IHtcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IHN0cmF0ZWd5LFxuICAgICAgICAgICAgICAgICAgICB0b3A6IHkgPz8gMCxcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogeCA/PyAwLFxuICAgICAgICAgICAgICAgICAgICBvdmVyZmxvd1k6ICdhdXRvJyxcbiAgICAgICAgICAgICAgICB9LCBjaGlsZHJlbjogW2ljb25DbGFzc05hbWUgJiYganN4KFwiaVwiLCB7IGNsYXNzTmFtZTogaWNvbkNsYXNzTmFtZSB9KSwganN4KFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX25vdGlmaWNhdGlvbl9fbWVzc2FnZVwiLCBjaGlsZHJlbjogbWVzc2FnZSB9KSwgY2xvc2UgPyAoanN4KFwiaVwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX2ljb24gc3RyLXZpZGVvX19pY29uLS1jbG9zZSBzdHItdmlkZW9fX25vdGlmaWNhdGlvbl9fY2xvc2VcIiwgb25DbGljazogY2xvc2UgfSkpIDogbnVsbF0gfSkpLCBjaGlsZHJlbl0gfSkpO1xufTtcblxuY29uc3QgUGVybWlzc2lvbk5vdGlmaWNhdGlvbiA9IChwcm9wcykgPT4ge1xuICAgIGNvbnN0IHsgcGVybWlzc2lvbiwgaXNBd2FpdGluZ0FwcHJvdmFsLCBtZXNzYWdlQXBwcm92ZWQsIG1lc3NhZ2VBd2FpdGluZ0FwcHJvdmFsLCBtZXNzYWdlUmV2b2tlZCwgdmlzaWJpbGl0eVRpbWVvdXQgPSAzNTAwLCBjaGlsZHJlbiwgfSA9IHByb3BzO1xuICAgIGNvbnN0IHsgdXNlSGFzUGVybWlzc2lvbnMgfSA9IHVzZUNhbGxTdGF0ZUhvb2tzKCk7XG4gICAgY29uc3QgaGFzUGVybWlzc2lvbiA9IHVzZUhhc1Blcm1pc3Npb25zKHBlcm1pc3Npb24pO1xuICAgIGNvbnN0IHByZXZIYXNQZXJtaXNzaW9uID0gdXNlUmVmKGhhc1Blcm1pc3Npb24pO1xuICAgIGNvbnN0IFtzaG93Tm90aWZpY2F0aW9uLCBzZXRTaG93Tm90aWZpY2F0aW9uXSA9IHVzZVN0YXRlKCk7XG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKGhhc1Blcm1pc3Npb24gJiYgIXByZXZIYXNQZXJtaXNzaW9uLmN1cnJlbnQpIHtcbiAgICAgICAgICAgIHNldFNob3dOb3RpZmljYXRpb24oJ2dyYW50ZWQnKTtcbiAgICAgICAgICAgIHByZXZIYXNQZXJtaXNzaW9uLmN1cnJlbnQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCFoYXNQZXJtaXNzaW9uICYmIHByZXZIYXNQZXJtaXNzaW9uLmN1cnJlbnQpIHtcbiAgICAgICAgICAgIHNldFNob3dOb3RpZmljYXRpb24oJ3Jldm9rZWQnKTtcbiAgICAgICAgICAgIHByZXZIYXNQZXJtaXNzaW9uLmN1cnJlbnQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH0sIFtoYXNQZXJtaXNzaW9uXSk7XG4gICAgY29uc3QgcmVzZXRJc1Zpc2libGUgPSB1c2VDYWxsYmFjaygoKSA9PiBzZXRTaG93Tm90aWZpY2F0aW9uKHVuZGVmaW5lZCksIFtdKTtcbiAgICBpZiAoaXNBd2FpdGluZ0FwcHJvdmFsKSB7XG4gICAgICAgIHJldHVybiAoanN4KE5vdGlmaWNhdGlvbiwgeyBpc1Zpc2libGU6IGlzQXdhaXRpbmdBcHByb3ZhbCAmJiAhaGFzUGVybWlzc2lvbiwgbWVzc2FnZTogbWVzc2FnZUF3YWl0aW5nQXBwcm92YWwsIGNoaWxkcmVuOiBjaGlsZHJlbiB9KSk7XG4gICAgfVxuICAgIHJldHVybiAoanN4KE5vdGlmaWNhdGlvbiwgeyBpc1Zpc2libGU6ICEhc2hvd05vdGlmaWNhdGlvbiwgdmlzaWJpbGl0eVRpbWVvdXQ6IHZpc2liaWxpdHlUaW1lb3V0LCByZXNldElzVmlzaWJsZTogcmVzZXRJc1Zpc2libGUsIG1lc3NhZ2U6IHNob3dOb3RpZmljYXRpb24gPT09ICdncmFudGVkJyA/IG1lc3NhZ2VBcHByb3ZlZCA6IG1lc3NhZ2VSZXZva2VkLCBjaGlsZHJlbjogY2hpbGRyZW4gfSkpO1xufTtcblxuY29uc3QgU3BlYWtpbmdXaGlsZU11dGVkTm90aWZpY2F0aW9uID0gKHsgY2hpbGRyZW4sIHRleHQsIHBsYWNlbWVudCwgfSkgPT4ge1xuICAgIGNvbnN0IHsgdXNlTWljcm9waG9uZVN0YXRlIH0gPSB1c2VDYWxsU3RhdGVIb29rcygpO1xuICAgIGNvbnN0IHsgaXNTcGVha2luZ1doaWxlTXV0ZWQgfSA9IHVzZU1pY3JvcGhvbmVTdGF0ZSgpO1xuICAgIGNvbnN0IHsgdCB9ID0gdXNlSTE4bigpO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSB0ZXh0ID8/IHQoJ1lvdSBhcmUgbXV0ZWQuIFVubXV0ZSB0byBzcGVhay4nKTtcbiAgICByZXR1cm4gKGpzeChOb3RpZmljYXRpb24sIHsgbWVzc2FnZTogbWVzc2FnZSwgaXNWaXNpYmxlOiBpc1NwZWFraW5nV2hpbGVNdXRlZCwgcGxhY2VtZW50OiBwbGFjZW1lbnQgfHwgJ3RvcC1zdGFydCcsIGNoaWxkcmVuOiBjaGlsZHJlbiB9KSk7XG59O1xuXG5jb25zdCBSZWNvcmRpbmdJblByb2dyZXNzTm90aWZpY2F0aW9uID0gKHsgY2hpbGRyZW4sIHRleHQsIH0pID0+IHtcbiAgICBjb25zdCB7IHQgfSA9IHVzZUkxOG4oKTtcbiAgICBjb25zdCB7IGlzQ2FsbFJlY29yZGluZ0luUHJvZ3Jlc3MgfSA9IHVzZVRvZ2dsZUNhbGxSZWNvcmRpbmcoKTtcbiAgICBjb25zdCBbaXNWaXNpYmxlLCBzZXRWaXNpYmxlXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgICBjb25zdCBtZXNzYWdlID0gdGV4dCA/PyB0KCdSZWNvcmRpbmcgaW4gcHJvZ3Jlc3MuLi4nKTtcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBpZiAoaXNDYWxsUmVjb3JkaW5nSW5Qcm9ncmVzcykge1xuICAgICAgICAgICAgc2V0VmlzaWJsZSh0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHNldFZpc2libGUoZmFsc2UpO1xuICAgICAgICB9XG4gICAgfSwgW2lzQ2FsbFJlY29yZGluZ0luUHJvZ3Jlc3NdKTtcbiAgICByZXR1cm4gKGpzeChOb3RpZmljYXRpb24sIHsgbWVzc2FnZTogbWVzc2FnZSwgaWNvbkNsYXNzTmFtZTogXCJzdHItdmlkZW9fX2ljb24gc3RyLXZpZGVvX19pY29uLS1yZWNvcmRpbmctb25cIiwgaXNWaXNpYmxlOiBpc1Zpc2libGUsIHBsYWNlbWVudDogXCJ0b3Atc3RhcnRcIiwgY2xvc2U6ICgpID0+IHNldFZpc2libGUoZmFsc2UpLCBjaGlsZHJlbjogY2hpbGRyZW4gfSkpO1xufTtcblxuY29uc3QgTG9hZGluZ0luZGljYXRvciA9ICh7IGNsYXNzTmFtZSwgdHlwZSA9ICdzcGlubmVyJywgdGV4dCwgdG9vbHRpcCwgfSkgPT4ge1xuICAgIHJldHVybiAoanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogY2xzeCgnc3RyLXZpZGVvX19sb2FkaW5nLWluZGljYXRvcicsIGNsYXNzTmFtZSksIHRpdGxlOiB0b29sdGlwLCBjaGlsZHJlbjogW2pzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogY2xzeCgnc3RyLXZpZGVvX19sb2FkaW5nLWluZGljYXRvcl9faWNvbicsIHR5cGUpIH0pLCB0ZXh0ICYmIGpzeChcInBcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19sb2FkaW5nLWluZGljYXRvci10ZXh0XCIsIGNoaWxkcmVuOiB0ZXh0IH0pXSB9KSk7XG59O1xuXG5jb25zdCBSZWNvcmRFbmRDb25maXJtYXRpb24gPSAoKSA9PiB7XG4gICAgY29uc3QgeyB0IH0gPSB1c2VJMThuKCk7XG4gICAgY29uc3QgeyB0b2dnbGVDYWxsUmVjb3JkaW5nLCBpc0F3YWl0aW5nUmVzcG9uc2UgfSA9IHVzZVRvZ2dsZUNhbGxSZWNvcmRpbmcoKTtcbiAgICBjb25zdCB7IGNsb3NlIH0gPSB1c2VNZW51Q29udGV4dCgpO1xuICAgIHJldHVybiAoanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX2VuZC1yZWNvcmRpbmdfX2NvbmZpcm1hdGlvblwiLCBjaGlsZHJlbjogW2pzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19lbmQtcmVjb3JkaW5nX19oZWFkZXJcIiwgY2hpbGRyZW46IFtqc3goSWNvbiwgeyBpY29uOiBcInJlY29yZGluZy1vblwiIH0pLCBqc3goXCJoMlwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX2VuZC1yZWNvcmRpbmdfX2hlYWRpbmdcIiwgY2hpbGRyZW46IHQoJ0VuZCByZWNvcmRpbmcnKSB9KV0gfSksIGpzeChcInBcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19lbmQtcmVjb3JkaW5nX19kZXNjcmlwdGlvblwiLCBjaGlsZHJlbjogdCgnQXJlIHlvdSBzdXJlIHlvdSB3YW50IGVuZCB0aGUgcmVjb3JkaW5nPycpIH0pLCBqc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fZW5kLXJlY29yZGluZ19fYWN0aW9uc1wiLCBjaGlsZHJlbjogW2pzeChDb21wb3NpdGVCdXR0b24sIHsgdmFyaWFudDogXCJzZWNvbmRhcnlcIiwgb25DbGljazogY2xvc2UsIGNoaWxkcmVuOiB0KCdDYW5jZWwnKSB9KSwganN4KENvbXBvc2l0ZUJ1dHRvbiwgeyB2YXJpYW50OiBcInByaW1hcnlcIiwgb25DbGljazogdG9nZ2xlQ2FsbFJlY29yZGluZywgY2hpbGRyZW46IGlzQXdhaXRpbmdSZXNwb25zZSA/IGpzeChMb2FkaW5nSW5kaWNhdG9yLCB7fSkgOiB0KCdFbmQgcmVjb3JkaW5nJykgfSldIH0pXSB9KSk7XG59O1xuY29uc3QgVG9nZ2xlRW5kUmVjb3JkaW5nTWVudUJ1dHRvbiA9IGZvcndhcmRSZWYoZnVuY3Rpb24gVG9nZ2xlRW5kUmVjb3JkaW5nTWVudUJ1dHRvbihwcm9wcywgcmVmKSB7XG4gICAgcmV0dXJuIChqc3goQ29tcG9zaXRlQnV0dG9uLCB7IHJlZjogcmVmLCBhY3RpdmU6IHRydWUsIHZhcmlhbnQ6IFwic2Vjb25kYXJ5XCIsIFwiZGF0YS10ZXN0aWRcIjogXCJyZWNvcmRpbmctc3RvcC1idXR0b25cIiwgY2hpbGRyZW46IGpzeChJY29uLCB7IGljb246IFwicmVjb3JkaW5nLW9mZlwiIH0pIH0pKTtcbn0pO1xuY29uc3QgUmVjb3JkQ2FsbENvbmZpcm1hdGlvbkJ1dHRvbiA9ICh7IGNhcHRpb24sIH0pID0+IHtcbiAgICBjb25zdCB7IHQgfSA9IHVzZUkxOG4oKTtcbiAgICBjb25zdCB7IHRvZ2dsZUNhbGxSZWNvcmRpbmcsIGlzQXdhaXRpbmdSZXNwb25zZSwgaXNDYWxsUmVjb3JkaW5nSW5Qcm9ncmVzcyB9ID0gdXNlVG9nZ2xlQ2FsbFJlY29yZGluZygpO1xuICAgIGlmIChpc0NhbGxSZWNvcmRpbmdJblByb2dyZXNzKSB7XG4gICAgICAgIHJldHVybiAoanN4KFJlc3RyaWN0ZWQsIHsgcmVxdWlyZWRHcmFudHM6IFtcbiAgICAgICAgICAgICAgICBPd25DYXBhYmlsaXR5LlNUQVJUX1JFQ09SRF9DQUxMLFxuICAgICAgICAgICAgICAgIE93bkNhcGFiaWxpdHkuU1RPUF9SRUNPUkRfQ0FMTCxcbiAgICAgICAgICAgIF0sIGNoaWxkcmVuOiBqc3goTWVudVRvZ2dsZSwgeyBUb2dnbGVCdXR0b246IFRvZ2dsZUVuZFJlY29yZGluZ01lbnVCdXR0b24sIHZpc3VhbFR5cGU6IE1lbnVWaXN1YWxUeXBlLlBPUlRBTCwgY2hpbGRyZW46IGpzeChSZWNvcmRFbmRDb25maXJtYXRpb24sIHt9KSB9KSB9KSk7XG4gICAgfVxuICAgIHJldHVybiAoanN4KFJlc3RyaWN0ZWQsIHsgcmVxdWlyZWRHcmFudHM6IFtcbiAgICAgICAgICAgIE93bkNhcGFiaWxpdHkuU1RBUlRfUkVDT1JEX0NBTEwsXG4gICAgICAgICAgICBPd25DYXBhYmlsaXR5LlNUT1BfUkVDT1JEX0NBTEwsXG4gICAgICAgIF0sIGNoaWxkcmVuOiBqc3goQ29tcG9zaXRlQnV0dG9uLCB7IGFjdGl2ZTogaXNDYWxsUmVjb3JkaW5nSW5Qcm9ncmVzcywgY2FwdGlvbjogY2FwdGlvbiwgdGl0bGU6IGNhcHRpb24gfHwgdCgnUmVjb3JkIGNhbGwnKSwgdmFyaWFudDogXCJzZWNvbmRhcnlcIiwgXCJkYXRhLXRlc3RpZFwiOiBcInJlY29yZGluZy1zdGFydC1idXR0b25cIiwgb25DbGljazogaXNBd2FpdGluZ1Jlc3BvbnNlID8gdW5kZWZpbmVkIDogdG9nZ2xlQ2FsbFJlY29yZGluZywgY2hpbGRyZW46IGlzQXdhaXRpbmdSZXNwb25zZSA/IChqc3goTG9hZGluZ0luZGljYXRvciwgeyB0b29sdGlwOiB0KCdXYWl0aW5nIGZvciByZWNvcmRpbmcgdG8gc3RhcnQuLi4nKSB9KSkgOiAoanN4KEljb24sIHsgaWNvbjogXCJyZWNvcmRpbmctb2ZmXCIgfSkpIH0pIH0pKTtcbn07XG5jb25zdCBSZWNvcmRDYWxsQnV0dG9uID0gKHsgY2FwdGlvbiB9KSA9PiB7XG4gICAgY29uc3QgeyB0IH0gPSB1c2VJMThuKCk7XG4gICAgY29uc3QgeyB0b2dnbGVDYWxsUmVjb3JkaW5nLCBpc0F3YWl0aW5nUmVzcG9uc2UsIGlzQ2FsbFJlY29yZGluZ0luUHJvZ3Jlc3MgfSA9IHVzZVRvZ2dsZUNhbGxSZWNvcmRpbmcoKTtcbiAgICBsZXQgdGl0bGUgPSBjYXB0aW9uIHx8IHQoJ1JlY29yZCBjYWxsJyk7XG4gICAgaWYgKGlzQXdhaXRpbmdSZXNwb25zZSkge1xuICAgICAgICB0aXRsZSA9IGlzQ2FsbFJlY29yZGluZ0luUHJvZ3Jlc3NcbiAgICAgICAgICAgID8gdCgnV2FpdGluZyBmb3IgcmVjb3JkaW5nIHRvIHN0b3AuLi4nKVxuICAgICAgICAgICAgOiB0KCdXYWl0aW5nIGZvciByZWNvcmRpbmcgdG8gc3RhcnQuLi4nKTtcbiAgICB9XG4gICAgcmV0dXJuIChqc3goUmVzdHJpY3RlZCwgeyByZXF1aXJlZEdyYW50czogW1xuICAgICAgICAgICAgT3duQ2FwYWJpbGl0eS5TVEFSVF9SRUNPUkRfQ0FMTCxcbiAgICAgICAgICAgIE93bkNhcGFiaWxpdHkuU1RPUF9SRUNPUkRfQ0FMTCxcbiAgICAgICAgXSwgY2hpbGRyZW46IGpzeChDb21wb3NpdGVCdXR0b24sIHsgYWN0aXZlOiBpc0NhbGxSZWNvcmRpbmdJblByb2dyZXNzLCBjYXB0aW9uOiBjYXB0aW9uLCB2YXJpYW50OiBcInNlY29uZGFyeVwiLCBcImRhdGEtdGVzdGlkXCI6IGlzQ2FsbFJlY29yZGluZ0luUHJvZ3Jlc3NcbiAgICAgICAgICAgICAgICA/ICdyZWNvcmRpbmctc3RvcC1idXR0b24nXG4gICAgICAgICAgICAgICAgOiAncmVjb3JkaW5nLXN0YXJ0LWJ1dHRvbicsIHRpdGxlOiB0aXRsZSwgb25DbGljazogaXNBd2FpdGluZ1Jlc3BvbnNlID8gdW5kZWZpbmVkIDogdG9nZ2xlQ2FsbFJlY29yZGluZywgY2hpbGRyZW46IGlzQXdhaXRpbmdSZXNwb25zZSA/IChqc3goTG9hZGluZ0luZGljYXRvciwge30pKSA6IChqc3goSWNvbiwgeyBpY29uOiBpc0NhbGxSZWNvcmRpbmdJblByb2dyZXNzID8gJ3JlY29yZGluZy1vbicgOiAncmVjb3JkaW5nLW9mZicgfSkpIH0pIH0pKTtcbn07XG5cbmNvbnN0IGRlZmF1bHRFbW9qaVJlYWN0aW9uTWFwID0ge1xuICAgICc6bGlrZTonOiAn8J+RjScsXG4gICAgJzpyYWlzZS1oYW5kOic6ICfinIsnLFxuICAgICc6ZmlyZXdvcmtzOic6ICfwn46JJyxcbiAgICAnOmRpc2xpa2U6JzogJ/CfkY4nLFxuICAgICc6aGVhcnQ6JzogJ+KdpO+4jycsXG4gICAgJzpzbWlsZTonOiAn8J+YgCcsXG59O1xuY29uc3QgUmVhY3Rpb24gPSAoeyBwYXJ0aWNpcGFudDogeyByZWFjdGlvbiwgc2Vzc2lvbklkIH0sIGhpZGVBZnRlclRpbWVvdXRJbk1zID0gNTUwMCwgZW1vamlSZWFjdGlvbk1hcCA9IGRlZmF1bHRFbW9qaVJlYWN0aW9uTWFwLCB9KSA9PiB7XG4gICAgY29uc3QgY2FsbCA9IHVzZUNhbGwoKTtcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBpZiAoIWNhbGwgfHwgIXJlYWN0aW9uKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIGNhbGwucmVzZXRSZWFjdGlvbihzZXNzaW9uSWQpO1xuICAgICAgICB9LCBoaWRlQWZ0ZXJUaW1lb3V0SW5Ncyk7XG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcbiAgICAgICAgfTtcbiAgICB9LCBbY2FsbCwgaGlkZUFmdGVyVGltZW91dEluTXMsIHJlYWN0aW9uLCBzZXNzaW9uSWRdKTtcbiAgICBpZiAoIXJlYWN0aW9uKVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICBjb25zdCB7IGVtb2ppX2NvZGU6IGVtb2ppQ29kZSB9ID0gcmVhY3Rpb247XG4gICAgcmV0dXJuIChqc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19yZWFjdGlvblwiLCBjaGlsZHJlbjoganN4KFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX3JlYWN0aW9uX19lbW9qaVwiLCBjaGlsZHJlbjogZW1vamlDb2RlICYmIGVtb2ppUmVhY3Rpb25NYXBbZW1vamlDb2RlXSB9KSB9KSk7XG59O1xuXG5jb25zdCBkZWZhdWx0UmVhY3Rpb25zID0gW1xuICAgIHtcbiAgICAgICAgdHlwZTogJ3JlYWN0aW9uJyxcbiAgICAgICAgZW1vamlfY29kZTogJzpsaWtlOicsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIC8vIFRPRE8gT0w6IHVzZSBgcHJvbXB0YCB0eXBlP1xuICAgICAgICB0eXBlOiAncmFpc2VkLWhhbmQnLFxuICAgICAgICBlbW9qaV9jb2RlOiAnOnJhaXNlLWhhbmQ6JyxcbiAgICB9LFxuICAgIHtcbiAgICAgICAgdHlwZTogJ3JlYWN0aW9uJyxcbiAgICAgICAgZW1vamlfY29kZTogJzpmaXJld29ya3M6JyxcbiAgICB9LFxuICAgIHtcbiAgICAgICAgdHlwZTogJ3JlYWN0aW9uJyxcbiAgICAgICAgZW1vamlfY29kZTogJzpkaXNsaWtlOicsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHR5cGU6ICdyZWFjdGlvbicsXG4gICAgICAgIGVtb2ppX2NvZGU6ICc6aGVhcnQ6JyxcbiAgICB9LFxuICAgIHtcbiAgICAgICAgdHlwZTogJ3JlYWN0aW9uJyxcbiAgICAgICAgZW1vamlfY29kZTogJzpzbWlsZTonLFxuICAgIH0sXG5dO1xuY29uc3QgUmVhY3Rpb25zQnV0dG9uID0gKHsgcmVhY3Rpb25zID0gZGVmYXVsdFJlYWN0aW9ucywgfSkgPT4ge1xuICAgIHJldHVybiAoanN4KFJlc3RyaWN0ZWQsIHsgcmVxdWlyZWRHcmFudHM6IFtPd25DYXBhYmlsaXR5LkNSRUFURV9SRUFDVElPTl0sIGNoaWxkcmVuOiBqc3goTWVudVRvZ2dsZSwgeyBwbGFjZW1lbnQ6IFwidG9wXCIsIFRvZ2dsZUJ1dHRvbjogVG9nZ2xlUmVhY3Rpb25zTWVudUJ1dHRvbiwgdmlzdWFsVHlwZTogTWVudVZpc3VhbFR5cGUuTUVOVSwgY2hpbGRyZW46IGpzeChEZWZhdWx0UmVhY3Rpb25zTWVudSwgeyByZWFjdGlvbnM6IHJlYWN0aW9ucyB9KSB9KSB9KSk7XG59O1xuY29uc3QgVG9nZ2xlUmVhY3Rpb25zTWVudUJ1dHRvbiA9IGZvcndhcmRSZWYoZnVuY3Rpb24gVG9nZ2xlUmVhY3Rpb25zTWVudUJ1dHRvbih7IG1lbnVTaG93biB9LCByZWYpIHtcbiAgICBjb25zdCB7IHQgfSA9IHVzZUkxOG4oKTtcbiAgICByZXR1cm4gKGpzeChDb21wb3NpdGVCdXR0b24sIHsgcmVmOiByZWYsIGFjdGl2ZTogbWVudVNob3duLCB2YXJpYW50OiBcInByaW1hcnlcIiwgdGl0bGU6IHQoJ1JlYWN0aW9ucycpLCBjaGlsZHJlbjoganN4KEljb24sIHsgaWNvbjogXCJyZWFjdGlvbnNcIiB9KSB9KSk7XG59KTtcbmNvbnN0IERlZmF1bHRSZWFjdGlvbnNNZW51ID0gKHsgcmVhY3Rpb25zLCBsYXlvdXQgPSAnaG9yaXpvbnRhbCcsIH0pID0+IHtcbiAgICBjb25zdCBjYWxsID0gdXNlQ2FsbCgpO1xuICAgIHJldHVybiAoanN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBjbHN4KCdzdHItdmlkZW9fX3JlYWN0aW9ucy1tZW51Jywge1xuICAgICAgICAgICAgJ3N0ci12aWRlb19fcmVhY3Rpb25zLW1lbnUtLWhvcml6b250YWwnOiBsYXlvdXQgPT09ICdob3Jpem9udGFsJyxcbiAgICAgICAgICAgICdzdHItdmlkZW9fX3JlYWN0aW9ucy1tZW51LS12ZXJ0aWNhbCc6IGxheW91dCA9PT0gJ3ZlcnRpY2FsJyxcbiAgICAgICAgfSksIGNoaWxkcmVuOiByZWFjdGlvbnMubWFwKChyZWFjdGlvbikgPT4gKGpzeChcImJ1dHRvblwiLCB7IHR5cGU6IFwiYnV0dG9uXCIsIGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX3JlYWN0aW9ucy1tZW51X19idXR0b25cIiwgb25DbGljazogKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNhbGw/LnNlbmRSZWFjdGlvbihyZWFjdGlvbik7XG4gICAgICAgICAgICB9LCBjaGlsZHJlbjogcmVhY3Rpb24uZW1vamlfY29kZSAmJiBkZWZhdWx0RW1vamlSZWFjdGlvbk1hcFtyZWFjdGlvbi5lbW9qaV9jb2RlXSB9LCByZWFjdGlvbi5lbW9qaV9jb2RlKSkpIH0pKTtcbn07XG5cbmNvbnN0IFNjcmVlblNoYXJlQnV0dG9uID0gKHByb3BzKSA9PiB7XG4gICAgY29uc3QgeyB0IH0gPSB1c2VJMThuKCk7XG4gICAgY29uc3QgeyBjYXB0aW9uIH0gPSBwcm9wcztcbiAgICBjb25zdCB7IHVzZUhhc09uZ29pbmdTY3JlZW5TaGFyZSwgdXNlU2NyZWVuU2hhcmVTdGF0ZSwgdXNlQ2FsbFNldHRpbmdzIH0gPSB1c2VDYWxsU3RhdGVIb29rcygpO1xuICAgIGNvbnN0IGlzU29tZW9uZVNjcmVlblNoYXJpbmcgPSB1c2VIYXNPbmdvaW5nU2NyZWVuU2hhcmUoKTtcbiAgICBjb25zdCB7IGhhc1Blcm1pc3Npb24sIHJlcXVlc3RQZXJtaXNzaW9uLCBpc0F3YWl0aW5nUGVybWlzc2lvbiB9ID0gdXNlUmVxdWVzdFBlcm1pc3Npb24oT3duQ2FwYWJpbGl0eS5TQ1JFRU5TSEFSRSk7XG4gICAgY29uc3QgY2FsbFNldHRpbmdzID0gdXNlQ2FsbFNldHRpbmdzKCk7XG4gICAgY29uc3QgaXNTY3JlZW5TaGFyaW5nQWxsb3dlZCA9IGNhbGxTZXR0aW5ncz8uc2NyZWVuc2hhcmluZy5lbmFibGVkO1xuICAgIGNvbnN0IHsgc2NyZWVuU2hhcmUsIGlzTXV0ZTogYW1JU2NyZWVuU2hhcmluZyB9ID0gdXNlU2NyZWVuU2hhcmVTdGF0ZSgpO1xuICAgIGNvbnN0IGRpc2FibGVTY3JlZW5TaGFyZUJ1dHRvbiA9IGFtSVNjcmVlblNoYXJpbmdcbiAgICAgICAgPyBpc1NvbWVvbmVTY3JlZW5TaGFyaW5nIHx8IGlzU2NyZWVuU2hhcmluZ0FsbG93ZWQgPT09IGZhbHNlXG4gICAgICAgIDogZmFsc2U7XG4gICAgcmV0dXJuIChqc3goUmVzdHJpY3RlZCwgeyByZXF1aXJlZEdyYW50czogW093bkNhcGFiaWxpdHkuU0NSRUVOU0hBUkVdLCBjaGlsZHJlbjoganN4KFBlcm1pc3Npb25Ob3RpZmljYXRpb24sIHsgcGVybWlzc2lvbjogT3duQ2FwYWJpbGl0eS5TQ1JFRU5TSEFSRSwgaXNBd2FpdGluZ0FwcHJvdmFsOiBpc0F3YWl0aW5nUGVybWlzc2lvbiwgbWVzc2FnZUFwcHJvdmVkOiB0KCdZb3UgY2FuIG5vdyBzaGFyZSB5b3VyIHNjcmVlbi4nKSwgbWVzc2FnZUF3YWl0aW5nQXBwcm92YWw6IHQoJ0F3YWl0aW5nIGZvciBhbiBhcHByb3ZhbCB0byBzaGFyZSBzY3JlZW4uJyksIG1lc3NhZ2VSZXZva2VkOiB0KCdZb3UgY2FuIG5vIGxvbmdlciBzaGFyZSB5b3VyIHNjcmVlbi4nKSwgY2hpbGRyZW46IGpzeChDb21wb3NpdGVCdXR0b24sIHsgYWN0aXZlOiBpc1NvbWVvbmVTY3JlZW5TaGFyaW5nLCBjYXB0aW9uOiBjYXB0aW9uLCB0aXRsZTogY2FwdGlvbiB8fCB0KCdTaGFyZSBzY3JlZW4nKSwgdmFyaWFudDogXCJwcmltYXJ5XCIsIFwiZGF0YS10ZXN0aWRcIjogaXNTb21lb25lU2NyZWVuU2hhcmluZ1xuICAgICAgICAgICAgICAgICAgICA/ICdzY3JlZW4tc2hhcmUtc3RvcC1idXR0b24nXG4gICAgICAgICAgICAgICAgICAgIDogJ3NjcmVlbi1zaGFyZS1zdGFydC1idXR0b24nLCBkaXNhYmxlZDogZGlzYWJsZVNjcmVlblNoYXJlQnV0dG9uLCBvbkNsaWNrOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaGFzUGVybWlzc2lvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgcmVxdWVzdFBlcm1pc3Npb24oKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHNjcmVlblNoYXJlLnRvZ2dsZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgY2hpbGRyZW46IGpzeChJY29uLCB7IGljb246IGlzU29tZW9uZVNjcmVlblNoYXJpbmcgPyAnc2NyZWVuLXNoYXJlLW9uJyA6ICdzY3JlZW4tc2hhcmUtb2ZmJyB9KSB9KSB9KSB9KSk7XG59O1xuXG5jb25zdCBTZWxlY3RDb250ZXh0ID0gY3JlYXRlQ29udGV4dCh7fSk7XG5jb25zdCBTZWxlY3QgPSAocHJvcHMpID0+IHtcbiAgICBjb25zdCB7IGNoaWxkcmVuLCBpY29uLCBkZWZhdWx0U2VsZWN0ZWRMYWJlbCwgZGVmYXVsdFNlbGVjdGVkSW5kZXgsIGhhbmRsZVNlbGVjdDogaGFuZGxlU2VsZWN0UHJvcCwgfSA9IHByb3BzO1xuICAgIGNvbnN0IFtpc09wZW4sIHNldElzT3Blbl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gICAgY29uc3QgW2FjdGl2ZUluZGV4LCBzZXRBY3RpdmVJbmRleF0gPSB1c2VTdGF0ZShudWxsKTtcbiAgICBjb25zdCBbc2VsZWN0ZWRJbmRleCwgc2V0U2VsZWN0ZWRJbmRleF0gPSB1c2VTdGF0ZShkZWZhdWx0U2VsZWN0ZWRJbmRleCk7XG4gICAgY29uc3QgW3NlbGVjdGVkTGFiZWwsIHNldFNlbGVjdGVkTGFiZWxdID0gdXNlU3RhdGUoZGVmYXVsdFNlbGVjdGVkTGFiZWwpO1xuICAgIGNvbnN0IHsgcmVmcywgY29udGV4dCB9ID0gdXNlRmxvYXRpbmcoe1xuICAgICAgICBwbGFjZW1lbnQ6ICdib3R0b20tc3RhcnQnLFxuICAgICAgICBvcGVuOiBpc09wZW4sXG4gICAgICAgIG9uT3BlbkNoYW5nZTogc2V0SXNPcGVuLFxuICAgICAgICB3aGlsZUVsZW1lbnRzTW91bnRlZDogYXV0b1VwZGF0ZSxcbiAgICAgICAgbWlkZGxld2FyZTogW2ZsaXAoKV0sXG4gICAgfSk7XG4gICAgY29uc3QgZWxlbWVudHNSZWYgPSB1c2VSZWYoW10pO1xuICAgIGNvbnN0IGxhYmVsc1JlZiA9IHVzZVJlZihbXSk7XG4gICAgY29uc3QgaGFuZGxlU2VsZWN0ID0gdXNlQ2FsbGJhY2soKGluZGV4KSA9PiB7XG4gICAgICAgIHNldFNlbGVjdGVkSW5kZXgoaW5kZXgpO1xuICAgICAgICBoYW5kbGVTZWxlY3RQcm9wKGluZGV4IHx8IDApO1xuICAgICAgICBzZXRJc09wZW4oZmFsc2UpO1xuICAgICAgICBpZiAoaW5kZXggIT09IG51bGwpIHtcbiAgICAgICAgICAgIHNldFNlbGVjdGVkTGFiZWwobGFiZWxzUmVmLmN1cnJlbnRbaW5kZXhdKTtcbiAgICAgICAgfVxuICAgIH0sIFtoYW5kbGVTZWxlY3RQcm9wXSk7XG4gICAgY29uc3QgaGFuZGxlVHlwZWFoZWFkTWF0Y2ggPSAoaW5kZXgpID0+IHtcbiAgICAgICAgaWYgKGlzT3Blbikge1xuICAgICAgICAgICAgc2V0QWN0aXZlSW5kZXgoaW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaGFuZGxlU2VsZWN0KGluZGV4KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgbGlzdE5hdiA9IHVzZUxpc3ROYXZpZ2F0aW9uKGNvbnRleHQsIHtcbiAgICAgICAgbGlzdFJlZjogZWxlbWVudHNSZWYsXG4gICAgICAgIGFjdGl2ZUluZGV4LFxuICAgICAgICBzZWxlY3RlZEluZGV4LFxuICAgICAgICBvbk5hdmlnYXRlOiBzZXRBY3RpdmVJbmRleCxcbiAgICB9KTtcbiAgICBjb25zdCB0eXBlYWhlYWQgPSB1c2VUeXBlYWhlYWQoY29udGV4dCwge1xuICAgICAgICBsaXN0UmVmOiBsYWJlbHNSZWYsXG4gICAgICAgIGFjdGl2ZUluZGV4LFxuICAgICAgICBzZWxlY3RlZEluZGV4LFxuICAgICAgICBvbk1hdGNoOiBoYW5kbGVUeXBlYWhlYWRNYXRjaCxcbiAgICB9KTtcbiAgICBjb25zdCBjbGljayA9IHVzZUNsaWNrKGNvbnRleHQpO1xuICAgIGNvbnN0IGRpc21pc3MgPSB1c2VEaXNtaXNzKGNvbnRleHQpO1xuICAgIGNvbnN0IHJvbGUgPSB1c2VSb2xlKGNvbnRleHQsIHsgcm9sZTogJ2xpc3Rib3gnIH0pO1xuICAgIGNvbnN0IHsgZ2V0UmVmZXJlbmNlUHJvcHMsIGdldEZsb2F0aW5nUHJvcHMsIGdldEl0ZW1Qcm9wcyB9ID0gdXNlSW50ZXJhY3Rpb25zKFtsaXN0TmF2LCB0eXBlYWhlYWQsIGNsaWNrLCBkaXNtaXNzLCByb2xlXSk7XG4gICAgY29uc3Qgc2VsZWN0Q29udGV4dCA9IHVzZU1lbW8oKCkgPT4gKHtcbiAgICAgICAgYWN0aXZlSW5kZXgsXG4gICAgICAgIHNlbGVjdGVkSW5kZXgsXG4gICAgICAgIGdldEl0ZW1Qcm9wcyxcbiAgICAgICAgaGFuZGxlU2VsZWN0LFxuICAgIH0pLCBbYWN0aXZlSW5kZXgsIHNlbGVjdGVkSW5kZXgsIGdldEl0ZW1Qcm9wcywgaGFuZGxlU2VsZWN0XSk7XG4gICAgcmV0dXJuIChqc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fZHJvcGRvd25cIiwgY2hpbGRyZW46IFtqc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fZHJvcGRvd24tc2VsZWN0ZWRcIiwgcmVmOiByZWZzLnNldFJlZmVyZW5jZSwgdGFiSW5kZXg6IDAsIC4uLmdldFJlZmVyZW5jZVByb3BzKCksIGNoaWxkcmVuOiBbanN4cyhcImxhYmVsXCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fZHJvcGRvd24tc2VsZWN0ZWRfX2xhYmVsXCIsIGNoaWxkcmVuOiBbaWNvbiAmJiAoanN4KEljb24sIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fZHJvcGRvd24tc2VsZWN0ZWRfX2ljb25cIiwgaWNvbjogaWNvbiB9KSksIHNlbGVjdGVkTGFiZWxdIH0pLCBqc3goSWNvbiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19kcm9wZG93bi1zZWxlY3RlZF9fY2hldnJvblwiLCBpY29uOiBpc09wZW4gPyAnY2hldnJvbi11cCcgOiAnY2hldnJvbi1kb3duJyB9KV0gfSksIGpzeChTZWxlY3RDb250ZXh0LlByb3ZpZGVyLCB7IHZhbHVlOiBzZWxlY3RDb250ZXh0LCBjaGlsZHJlbjogaXNPcGVuICYmIChqc3goRmxvYXRpbmdGb2N1c01hbmFnZXIsIHsgY29udGV4dDogY29udGV4dCwgbW9kYWw6IGZhbHNlLCBjaGlsZHJlbjoganN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fZHJvcGRvd24tbGlzdFwiLCByZWY6IHJlZnMuc2V0RmxvYXRpbmcsIC4uLmdldEZsb2F0aW5nUHJvcHMoKSwgY2hpbGRyZW46IGpzeChGbG9hdGluZ0xpc3QsIHsgZWxlbWVudHNSZWY6IGVsZW1lbnRzUmVmLCBsYWJlbHNSZWY6IGxhYmVsc1JlZiwgY2hpbGRyZW46IGNoaWxkcmVuIH0pIH0pIH0pKSB9KV0gfSkpO1xufTtcbmNvbnN0IERyb3BEb3duU2VsZWN0T3B0aW9uID0gKHByb3BzKSA9PiB7XG4gICAgY29uc3QgeyBzZWxlY3RlZCwgbGFiZWwsIGljb24gfSA9IHByb3BzO1xuICAgIGNvbnN0IHsgZ2V0SXRlbVByb3BzLCBoYW5kbGVTZWxlY3QgfSA9IHVzZUNvbnRleHQoU2VsZWN0Q29udGV4dCk7XG4gICAgY29uc3QgeyByZWYsIGluZGV4IH0gPSB1c2VMaXN0SXRlbSgpO1xuICAgIHJldHVybiAoanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogY2xzeCgnc3RyLXZpZGVvX19kcm9wZG93bi1vcHRpb24nLCB7XG4gICAgICAgICAgICAnc3RyLXZpZGVvX19kcm9wZG93bi1vcHRpb24tLXNlbGVjdGVkJzogc2VsZWN0ZWQsXG4gICAgICAgIH0pLCByZWY6IHJlZiwgLi4uZ2V0SXRlbVByb3BzKHtcbiAgICAgICAgICAgIG9uQ2xpY2s6ICgpID0+IGhhbmRsZVNlbGVjdChpbmRleCksXG4gICAgICAgIH0pLCBjaGlsZHJlbjogW2pzeChJY29uLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX2Ryb3Bkb3duLWljb25cIiwgaWNvbjogaWNvbiB9KSwganN4KFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX2Ryb3Bkb3duLWxhYmVsXCIsIGNoaWxkcmVuOiBsYWJlbCB9KV0gfSkpO1xufTtcbmNvbnN0IERyb3BEb3duU2VsZWN0ID0gKHByb3BzKSA9PiB7XG4gICAgY29uc3QgeyBjaGlsZHJlbiwgaWNvbiwgaGFuZGxlU2VsZWN0LCBkZWZhdWx0U2VsZWN0ZWRMYWJlbCwgZGVmYXVsdFNlbGVjdGVkSW5kZXgsIH0gPSBwcm9wcztcbiAgICByZXR1cm4gKGpzeChTZWxlY3QsIHsgaWNvbjogaWNvbiwgaGFuZGxlU2VsZWN0OiBoYW5kbGVTZWxlY3QsIGRlZmF1bHRTZWxlY3RlZEluZGV4OiBkZWZhdWx0U2VsZWN0ZWRJbmRleCwgZGVmYXVsdFNlbGVjdGVkTGFiZWw6IGRlZmF1bHRTZWxlY3RlZExhYmVsLCBjaGlsZHJlbjogY2hpbGRyZW4gfSkpO1xufTtcblxuY29uc3QgRGV2aWNlU2VsZWN0b3JPcHRpb24gPSAoeyBkaXNhYmxlZCwgaWQsIGxhYmVsLCBvbkNoYW5nZSwgbmFtZSwgc2VsZWN0ZWQsIGRlZmF1bHRDaGVja2VkLCB2YWx1ZSwgfSkgPT4ge1xuICAgIHJldHVybiAoanN4cyhcImxhYmVsXCIsIHsgY2xhc3NOYW1lOiBjbHN4KCdzdHItdmlkZW9fX2RldmljZS1zZXR0aW5nc19fb3B0aW9uJywge1xuICAgICAgICAgICAgJ3N0ci12aWRlb19fZGV2aWNlLXNldHRpbmdzX19vcHRpb24tLXNlbGVjdGVkJzogc2VsZWN0ZWQsXG4gICAgICAgICAgICAnc3RyLXZpZGVvX19kZXZpY2Utc2V0dGluZ3NfX29wdGlvbi0tZGlzYWJsZWQnOiBkaXNhYmxlZCxcbiAgICAgICAgfSksIGh0bWxGb3I6IGlkLCBjaGlsZHJlbjogW2pzeChcImlucHV0XCIsIHsgdHlwZTogXCJyYWRpb1wiLCBuYW1lOiBuYW1lLCBvbkNoYW5nZTogb25DaGFuZ2UsIHZhbHVlOiB2YWx1ZSwgaWQ6IGlkLCBjaGVja2VkOiBzZWxlY3RlZCwgZGVmYXVsdENoZWNrZWQ6IGRlZmF1bHRDaGVja2VkLCBkaXNhYmxlZDogZGlzYWJsZWQgfSksIGxhYmVsXSB9KSk7XG59O1xuY29uc3QgRGV2aWNlU2VsZWN0b3JMaXN0ID0gKHByb3BzKSA9PiB7XG4gICAgY29uc3QgeyBkZXZpY2VzID0gW10sIHNlbGVjdGVkRGV2aWNlSWQ6IHNlbGVjdGVkRGV2aWNlRnJvbVByb3BzLCB0aXRsZSwgdHlwZSwgb25DaGFuZ2UsIH0gPSBwcm9wcztcbiAgICAvLyBzb21ldGltZXMgdGhlIGJyb3dzZXIgKENocm9tZSkgd2lsbCByZXBvcnQgdGhlIHN5c3RlbS1kZWZhdWx0IGRldmljZVxuICAgIC8vIHdpdGggYW4gaWQgb2YgJ2RlZmF1bHQnLiBJbiBjYXNlIHdoZW4gaXQgZG9lc24ndCwgd2UnbGwgc2VsZWN0IHRoZSBmaXJzdFxuICAgIC8vIGF2YWlsYWJsZSBkZXZpY2UuXG4gICAgbGV0IHNlbGVjdGVkRGV2aWNlSWQgPSBzZWxlY3RlZERldmljZUZyb21Qcm9wcztcbiAgICBpZiAoZGV2aWNlcy5sZW5ndGggPiAwICYmXG4gICAgICAgICFkZXZpY2VzLmZpbmQoKGQpID0+IGQuZGV2aWNlSWQgPT09IHNlbGVjdGVkRGV2aWNlSWQpKSB7XG4gICAgICAgIHNlbGVjdGVkRGV2aWNlSWQgPSBkZXZpY2VzWzBdLmRldmljZUlkO1xuICAgIH1cbiAgICByZXR1cm4gKGpzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19kZXZpY2Utc2V0dGluZ3NfX2RldmljZS1raW5kXCIsIGNoaWxkcmVuOiBbdGl0bGUgJiYgKGpzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX2RldmljZS1zZXR0aW5nc19fZGV2aWNlLXNlbGVjdG9yLXRpdGxlXCIsIGNoaWxkcmVuOiB0aXRsZSB9KSksICFkZXZpY2VzLmxlbmd0aCA/IChqc3goRGV2aWNlU2VsZWN0b3JPcHRpb24sIHsgaWQ6IGAke3R5cGV9LS1kZWZhdWx0YCwgbGFiZWw6IFwiRGVmYXVsdFwiLCBuYW1lOiB0eXBlLCBkZWZhdWx0Q2hlY2tlZDogdHJ1ZSwgdmFsdWU6IFwiZGVmYXVsdFwiIH0pKSA6IChkZXZpY2VzLm1hcCgoZGV2aWNlKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChqc3goRGV2aWNlU2VsZWN0b3JPcHRpb24sIHsgaWQ6IGAke3R5cGV9LS0ke2RldmljZS5kZXZpY2VJZH1gLCB2YWx1ZTogZGV2aWNlLmRldmljZUlkLCBsYWJlbDogZGV2aWNlLmxhYmVsLCBvbkNoYW5nZTogKGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPy4oZS50YXJnZXQudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9LCBuYW1lOiB0eXBlLCBzZWxlY3RlZDogZGV2aWNlLmRldmljZUlkID09PSBzZWxlY3RlZERldmljZUlkIHx8IGRldmljZXMubGVuZ3RoID09PSAxIH0sIGRldmljZS5kZXZpY2VJZCkpO1xuICAgICAgICAgICAgfSkpXSB9KSk7XG59O1xuY29uc3QgRGV2aWNlU2VsZWN0b3JEcm9wZG93biA9IChwcm9wcykgPT4ge1xuICAgIGNvbnN0IHsgZGV2aWNlcyA9IFtdLCBzZWxlY3RlZERldmljZUlkOiBzZWxlY3RlZERldmljZUZyb21Qcm9wcywgdGl0bGUsIG9uQ2hhbmdlLCBpY29uLCB9ID0gcHJvcHM7XG4gICAgLy8gc29tZXRpbWVzIHRoZSBicm93c2VyIChDaHJvbWUpIHdpbGwgcmVwb3J0IHRoZSBzeXN0ZW0tZGVmYXVsdCBkZXZpY2VcbiAgICAvLyB3aXRoIGFuIGlkIG9mICdkZWZhdWx0Jy4gSW4gY2FzZSB3aGVuIGl0IGRvZXNuJ3QsIHdlJ2xsIHNlbGVjdCB0aGUgZmlyc3RcbiAgICAvLyBhdmFpbGFibGUgZGV2aWNlLlxuICAgIGxldCBzZWxlY3RlZERldmljZUlkID0gc2VsZWN0ZWREZXZpY2VGcm9tUHJvcHM7XG4gICAgaWYgKGRldmljZXMubGVuZ3RoID4gMCAmJlxuICAgICAgICAhZGV2aWNlcy5maW5kKChkKSA9PiBkLmRldmljZUlkID09PSBzZWxlY3RlZERldmljZUlkKSkge1xuICAgICAgICBzZWxlY3RlZERldmljZUlkID0gZGV2aWNlc1swXS5kZXZpY2VJZDtcbiAgICB9XG4gICAgY29uc3Qgc2VsZWN0ZWRJbmRleCA9IGRldmljZXMuZmluZEluZGV4KChkKSA9PiBkLmRldmljZUlkID09PSBzZWxlY3RlZERldmljZUlkKTtcbiAgICBjb25zdCBoYW5kbGVTZWxlY3QgPSB1c2VDYWxsYmFjaygoaW5kZXgpID0+IHtcbiAgICAgICAgb25DaGFuZ2U/LihkZXZpY2VzW2luZGV4XS5kZXZpY2VJZCk7XG4gICAgfSwgW2RldmljZXMsIG9uQ2hhbmdlXSk7XG4gICAgcmV0dXJuIChqc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fZGV2aWNlLXNldHRpbmdzX19kZXZpY2Uta2luZFwiLCBjaGlsZHJlbjogW2pzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX2RldmljZS1zZXR0aW5nc19fZGV2aWNlLXNlbGVjdG9yLXRpdGxlXCIsIGNoaWxkcmVuOiB0aXRsZSB9KSwganN4KERyb3BEb3duU2VsZWN0LCB7IGljb246IGljb24sIGRlZmF1bHRTZWxlY3RlZEluZGV4OiBzZWxlY3RlZEluZGV4LCBkZWZhdWx0U2VsZWN0ZWRMYWJlbDogZGV2aWNlc1tzZWxlY3RlZEluZGV4XT8ubGFiZWwsIGhhbmRsZVNlbGVjdDogaGFuZGxlU2VsZWN0LCBjaGlsZHJlbjogZGV2aWNlcy5tYXAoKGRldmljZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGpzeChEcm9wRG93blNlbGVjdE9wdGlvbiwgeyBpY29uOiBpY29uLCBsYWJlbDogZGV2aWNlLmxhYmVsLCBzZWxlY3RlZDogZGV2aWNlLmRldmljZUlkID09PSBzZWxlY3RlZERldmljZUlkIHx8IGRldmljZXMubGVuZ3RoID09PSAxIH0sIGRldmljZS5kZXZpY2VJZCkpO1xuICAgICAgICAgICAgICAgIH0pIH0pXSB9KSk7XG59O1xuY29uc3QgRGV2aWNlU2VsZWN0b3IgPSAocHJvcHMpID0+IHtcbiAgICBjb25zdCB7IHZpc3VhbFR5cGUgPSAnbGlzdCcsIGljb24sIHBsYWNlaG9sZGVyLCAuLi5yZXN0IH0gPSBwcm9wcztcbiAgICBpZiAodmlzdWFsVHlwZSA9PT0gJ2xpc3QnKSB7XG4gICAgICAgIHJldHVybiBqc3goRGV2aWNlU2VsZWN0b3JMaXN0LCB7IC4uLnJlc3QgfSk7XG4gICAgfVxuICAgIHJldHVybiAoanN4KERldmljZVNlbGVjdG9yRHJvcGRvd24sIHsgLi4ucmVzdCwgaWNvbjogaWNvbiwgcGxhY2Vob2xkZXI6IHBsYWNlaG9sZGVyIH0pKTtcbn07XG5cbmNvbnN0IERldmljZVNlbGVjdG9yQXVkaW9JbnB1dCA9ICh7IHRpdGxlLCB2aXN1YWxUeXBlLCB9KSA9PiB7XG4gICAgY29uc3QgeyB1c2VNaWNyb3Bob25lU3RhdGUgfSA9IHVzZUNhbGxTdGF0ZUhvb2tzKCk7XG4gICAgY29uc3QgeyBtaWNyb3Bob25lLCBzZWxlY3RlZERldmljZSwgZGV2aWNlcyB9ID0gdXNlTWljcm9waG9uZVN0YXRlKCk7XG4gICAgcmV0dXJuIChqc3goRGV2aWNlU2VsZWN0b3IsIHsgZGV2aWNlczogZGV2aWNlcyB8fCBbXSwgc2VsZWN0ZWREZXZpY2VJZDogc2VsZWN0ZWREZXZpY2UsIHR5cGU6IFwiYXVkaW9pbnB1dFwiLCBvbkNoYW5nZTogYXN5bmMgKGRldmljZUlkKSA9PiB7XG4gICAgICAgICAgICBhd2FpdCBtaWNyb3Bob25lLnNlbGVjdChkZXZpY2VJZCk7XG4gICAgICAgIH0sIHRpdGxlOiB0aXRsZSwgdmlzdWFsVHlwZTogdmlzdWFsVHlwZSwgaWNvbjogXCJtaWNcIiB9KSk7XG59O1xuY29uc3QgRGV2aWNlU2VsZWN0b3JBdWRpb091dHB1dCA9ICh7IHRpdGxlLCB2aXN1YWxUeXBlLCB9KSA9PiB7XG4gICAgY29uc3QgeyB1c2VTcGVha2VyU3RhdGUgfSA9IHVzZUNhbGxTdGF0ZUhvb2tzKCk7XG4gICAgY29uc3QgeyBzcGVha2VyLCBzZWxlY3RlZERldmljZSwgZGV2aWNlcywgaXNEZXZpY2VTZWxlY3Rpb25TdXBwb3J0ZWQgfSA9IHVzZVNwZWFrZXJTdGF0ZSgpO1xuICAgIGlmICghaXNEZXZpY2VTZWxlY3Rpb25TdXBwb3J0ZWQpXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIHJldHVybiAoanN4KERldmljZVNlbGVjdG9yLCB7IGRldmljZXM6IGRldmljZXMsIHR5cGU6IFwiYXVkaW9vdXRwdXRcIiwgc2VsZWN0ZWREZXZpY2VJZDogc2VsZWN0ZWREZXZpY2UsIG9uQ2hhbmdlOiAoZGV2aWNlSWQpID0+IHtcbiAgICAgICAgICAgIHNwZWFrZXIuc2VsZWN0KGRldmljZUlkKTtcbiAgICAgICAgfSwgdGl0bGU6IHRpdGxlLCB2aXN1YWxUeXBlOiB2aXN1YWxUeXBlLCBpY29uOiBcInNwZWFrZXJcIiB9KSk7XG59O1xuXG5jb25zdCBEZXZpY2VTZWxlY3RvclZpZGVvID0gKHsgdGl0bGUsIHZpc3VhbFR5cGUsIH0pID0+IHtcbiAgICBjb25zdCB7IHVzZUNhbWVyYVN0YXRlIH0gPSB1c2VDYWxsU3RhdGVIb29rcygpO1xuICAgIGNvbnN0IHsgY2FtZXJhLCBkZXZpY2VzLCBzZWxlY3RlZERldmljZSB9ID0gdXNlQ2FtZXJhU3RhdGUoKTtcbiAgICByZXR1cm4gKGpzeChEZXZpY2VTZWxlY3RvciwgeyBkZXZpY2VzOiBkZXZpY2VzIHx8IFtdLCB0eXBlOiBcInZpZGVvaW5wdXRcIiwgc2VsZWN0ZWREZXZpY2VJZDogc2VsZWN0ZWREZXZpY2UsIG9uQ2hhbmdlOiBhc3luYyAoZGV2aWNlSWQpID0+IHtcbiAgICAgICAgICAgIGF3YWl0IGNhbWVyYS5zZWxlY3QoZGV2aWNlSWQpO1xuICAgICAgICB9LCB0aXRsZTogdGl0bGUsIHZpc3VhbFR5cGU6IHZpc3VhbFR5cGUsIGljb246IFwiY2FtZXJhXCIgfSkpO1xufTtcblxuY29uc3QgRGV2aWNlU2V0dGluZ3MgPSAoeyB2aXN1YWxUeXBlID0gTWVudVZpc3VhbFR5cGUuTUVOVSwgfSkgPT4ge1xuICAgIHJldHVybiAoanN4KE1lbnVUb2dnbGUsIHsgcGxhY2VtZW50OiBcImJvdHRvbS1lbmRcIiwgVG9nZ2xlQnV0dG9uOiBUb2dnbGVEZXZpY2VTZXR0aW5nc01lbnVCdXR0b24sIHZpc3VhbFR5cGU6IHZpc3VhbFR5cGUsIGNoaWxkcmVuOiBqc3goTWVudSwge30pIH0pKTtcbn07XG5jb25zdCBNZW51ID0gKCkgPT4ge1xuICAgIGNvbnN0IHsgdCB9ID0gdXNlSTE4bigpO1xuICAgIHJldHVybiAoanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX2RldmljZS1zZXR0aW5nc1wiLCBjaGlsZHJlbjogW2pzeChEZXZpY2VTZWxlY3RvclZpZGVvLCB7IHRpdGxlOiB0KCdTZWxlY3QgYSBDYW1lcmEnKSB9KSwganN4KERldmljZVNlbGVjdG9yQXVkaW9JbnB1dCwgeyB0aXRsZTogdCgnU2VsZWN0IGEgTWljJykgfSksIGpzeChEZXZpY2VTZWxlY3RvckF1ZGlvT3V0cHV0LCB7IHRpdGxlOiB0KCdTZWxlY3QgU3BlYWtlcnMnKSB9KV0gfSkpO1xufTtcbmNvbnN0IFRvZ2dsZURldmljZVNldHRpbmdzTWVudUJ1dHRvbiA9IGZvcndhcmRSZWYoZnVuY3Rpb24gVG9nZ2xlRGV2aWNlU2V0dGluZ3NNZW51QnV0dG9uKHsgbWVudVNob3duIH0sIHJlZikge1xuICAgIGNvbnN0IHsgdCB9ID0gdXNlSTE4bigpO1xuICAgIHJldHVybiAoanN4KEljb25CdXR0b24sIHsgY2xhc3NOYW1lOiBjbHN4KCdzdHItdmlkZW9fX2RldmljZS1zZXR0aW5nc19fYnV0dG9uJywge1xuICAgICAgICAgICAgJ3N0ci12aWRlb19fZGV2aWNlLXNldHRpbmdzX19idXR0b24tLWFjdGl2ZSc6IG1lbnVTaG93bixcbiAgICAgICAgfSksIHRpdGxlOiB0KCdUb2dnbGUgZGV2aWNlIG1lbnUnKSwgaWNvbjogXCJkZXZpY2Utc2V0dGluZ3NcIiwgcmVmOiByZWYgfSkpO1xufSk7XG5cbmNvbnN0IFRvZ2dsZUF1ZGlvUHJldmlld0J1dHRvbiA9IChwcm9wcykgPT4ge1xuICAgIGNvbnN0IHsgY2FwdGlvbiwgTWVudSwgbWVudVBsYWNlbWVudCwgLi4ucmVzdENvbXBvc2l0ZUJ1dHRvblByb3BzIH0gPSBwcm9wcztcbiAgICBjb25zdCB7IHQgfSA9IHVzZUkxOG4oKTtcbiAgICBjb25zdCB7IHVzZU1pY3JvcGhvbmVTdGF0ZSB9ID0gdXNlQ2FsbFN0YXRlSG9va3MoKTtcbiAgICBjb25zdCB7IG1pY3JvcGhvbmUsIGlzTXV0ZSwgaGFzQnJvd3NlclBlcm1pc3Npb24gfSA9IHVzZU1pY3JvcGhvbmVTdGF0ZSgpO1xuICAgIHJldHVybiAoanN4cyhDb21wb3NpdGVCdXR0b24sIHsgYWN0aXZlOiBpc011dGUsIGNhcHRpb246IGNhcHRpb24sIGNsYXNzTmFtZTogY2xzeCghaGFzQnJvd3NlclBlcm1pc3Npb24gJiYgJ3N0ci12aWRlb19fZGV2aWNlLXVuYXZhaWxhYmxlJyksIHZhcmlhbnQ6IFwic2Vjb25kYXJ5XCIsIHRpdGxlOiAhaGFzQnJvd3NlclBlcm1pc3Npb25cbiAgICAgICAgICAgID8gdCgnQ2hlY2sgeW91ciBicm93c2VyIGF1ZGlvIHBlcm1pc3Npb25zJylcbiAgICAgICAgICAgIDogY2FwdGlvbiB8fCB0KCdNaWMnKSwgZGlzYWJsZWQ6ICFoYXNCcm93c2VyUGVybWlzc2lvbiwgXCJkYXRhLXRlc3RpZFwiOiBpc011dGUgPyAncHJldmlldy1hdWRpby11bm11dGUtYnV0dG9uJyA6ICdwcmV2aWV3LWF1ZGlvLW11dGUtYnV0dG9uJywgb25DbGljazogKCkgPT4gbWljcm9waG9uZS50b2dnbGUoKSwgTWVudTogTWVudSwgbWVudVBsYWNlbWVudDogbWVudVBsYWNlbWVudCwgLi4ucmVzdENvbXBvc2l0ZUJ1dHRvblByb3BzLCBjaGlsZHJlbjogW2pzeChJY29uLCB7IGljb246ICFpc011dGUgPyAnbWljJyA6ICdtaWMtb2ZmJyB9KSwgIWhhc0Jyb3dzZXJQZXJtaXNzaW9uICYmIChqc3goXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fbm8tbWVkaWEtcGVybWlzc2lvblwiLCB0aXRsZTogdCgnQ2hlY2sgeW91ciBicm93c2VyIGF1ZGlvIHBlcm1pc3Npb25zJyksIGNoaWxkcmVuOiBcIiFcIiB9KSldIH0pKTtcbn07XG5jb25zdCBUb2dnbGVBdWRpb1B1Ymxpc2hpbmdCdXR0b24gPSAocHJvcHMpID0+IHtcbiAgICBjb25zdCB7IHQgfSA9IHVzZUkxOG4oKTtcbiAgICBjb25zdCB7IGNhcHRpb24sIE1lbnUgPSBqc3goRGV2aWNlU2VsZWN0b3JBdWRpb0lucHV0LCB7IHZpc3VhbFR5cGU6IFwibGlzdFwiIH0pLCBtZW51UGxhY2VtZW50ID0gJ3RvcCcsIC4uLnJlc3RDb21wb3NpdGVCdXR0b25Qcm9wcyB9ID0gcHJvcHM7XG4gICAgY29uc3QgeyBoYXNQZXJtaXNzaW9uLCByZXF1ZXN0UGVybWlzc2lvbiwgaXNBd2FpdGluZ1Blcm1pc3Npb24gfSA9IHVzZVJlcXVlc3RQZXJtaXNzaW9uKE93bkNhcGFiaWxpdHkuU0VORF9BVURJTyk7XG4gICAgY29uc3QgeyB1c2VNaWNyb3Bob25lU3RhdGUgfSA9IHVzZUNhbGxTdGF0ZUhvb2tzKCk7XG4gICAgY29uc3QgeyBtaWNyb3Bob25lLCBpc011dGUsIGhhc0Jyb3dzZXJQZXJtaXNzaW9uIH0gPSB1c2VNaWNyb3Bob25lU3RhdGUoKTtcbiAgICByZXR1cm4gKGpzeChSZXN0cmljdGVkLCB7IHJlcXVpcmVkR3JhbnRzOiBbT3duQ2FwYWJpbGl0eS5TRU5EX0FVRElPXSwgY2hpbGRyZW46IGpzeChQZXJtaXNzaW9uTm90aWZpY2F0aW9uLCB7IHBlcm1pc3Npb246IE93bkNhcGFiaWxpdHkuU0VORF9BVURJTywgaXNBd2FpdGluZ0FwcHJvdmFsOiBpc0F3YWl0aW5nUGVybWlzc2lvbiwgbWVzc2FnZUFwcHJvdmVkOiB0KCdZb3UgY2FuIG5vdyBzcGVhay4nKSwgbWVzc2FnZUF3YWl0aW5nQXBwcm92YWw6IHQoJ0F3YWl0aW5nIGZvciBhbiBhcHByb3ZhbCB0byBzcGVhay4nKSwgbWVzc2FnZVJldm9rZWQ6IHQoJ1lvdSBjYW4gbm8gbG9uZ2VyIHNwZWFrLicpLCBjaGlsZHJlbjoganN4cyhDb21wb3NpdGVCdXR0b24sIHsgYWN0aXZlOiBpc011dGUsIGNhcHRpb246IGNhcHRpb24sIHRpdGxlOiAhaGFzUGVybWlzc2lvblxuICAgICAgICAgICAgICAgICAgICA/IHQoJ1lvdSBoYXZlIG5vIHBlcm1pc3Npb24gdG8gc2hhcmUgeW91ciBhdWRpbycpXG4gICAgICAgICAgICAgICAgICAgIDogIWhhc0Jyb3dzZXJQZXJtaXNzaW9uXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHQoJ0NoZWNrIHlvdXIgYnJvd3NlciBtaWMgcGVybWlzc2lvbnMnKVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBjYXB0aW9uIHx8IHQoJ01pYycpLCB2YXJpYW50OiBcInNlY29uZGFyeVwiLCBkaXNhYmxlZDogIWhhc0Jyb3dzZXJQZXJtaXNzaW9uIHx8ICFoYXNQZXJtaXNzaW9uLCBcImRhdGEtdGVzdGlkXCI6IGlzTXV0ZSA/ICdhdWRpby11bm11dGUtYnV0dG9uJyA6ICdhdWRpby1tdXRlLWJ1dHRvbicsIG9uQ2xpY2s6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFoYXNQZXJtaXNzaW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCByZXF1ZXN0UGVybWlzc2lvbigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgbWljcm9waG9uZS50b2dnbGUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIE1lbnU6IE1lbnUsIG1lbnVQbGFjZW1lbnQ6IG1lbnVQbGFjZW1lbnQsIG1lbnVPZmZzZXQ6IDE2LCAuLi5yZXN0Q29tcG9zaXRlQnV0dG9uUHJvcHMsIGNoaWxkcmVuOiBbanN4KEljb24sIHsgaWNvbjogaXNNdXRlID8gJ21pYy1vZmYnIDogJ21pYycgfSksICghaGFzQnJvd3NlclBlcm1pc3Npb24gfHwgIWhhc1Blcm1pc3Npb24pICYmIChqc3goXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fbm8tbWVkaWEtcGVybWlzc2lvblwiLCBjaGlsZHJlbjogXCIhXCIgfSkpXSB9KSB9KSB9KSk7XG59O1xuXG5jb25zdCBUb2dnbGVWaWRlb1ByZXZpZXdCdXR0b24gPSAocHJvcHMpID0+IHtcbiAgICBjb25zdCB7IGNhcHRpb24sIE1lbnUgPSBEZXZpY2VTZWxlY3RvclZpZGVvLCBtZW51UGxhY2VtZW50ID0gJ3RvcCcsIC4uLnJlc3RDb21wb3NpdGVCdXR0b25Qcm9wcyB9ID0gcHJvcHM7XG4gICAgY29uc3QgeyB0IH0gPSB1c2VJMThuKCk7XG4gICAgY29uc3QgeyB1c2VDYW1lcmFTdGF0ZSB9ID0gdXNlQ2FsbFN0YXRlSG9va3MoKTtcbiAgICBjb25zdCB7IGNhbWVyYSwgaXNNdXRlLCBoYXNCcm93c2VyUGVybWlzc2lvbiB9ID0gdXNlQ2FtZXJhU3RhdGUoKTtcbiAgICByZXR1cm4gKGpzeHMoQ29tcG9zaXRlQnV0dG9uLCB7IGFjdGl2ZTogaXNNdXRlLCBjYXB0aW9uOiBjYXB0aW9uLCBjbGFzc05hbWU6IGNsc3goIWhhc0Jyb3dzZXJQZXJtaXNzaW9uICYmICdzdHItdmlkZW9fX2RldmljZS11bmF2YWlsYWJsZScpLCB0aXRsZTogIWhhc0Jyb3dzZXJQZXJtaXNzaW9uXG4gICAgICAgICAgICA/IHQoJ0NoZWNrIHlvdXIgYnJvd3NlciB2aWRlbyBwZXJtaXNzaW9ucycpXG4gICAgICAgICAgICA6IGNhcHRpb24gfHwgdCgnVmlkZW8nKSwgdmFyaWFudDogXCJzZWNvbmRhcnlcIiwgXCJkYXRhLXRlc3RpZFwiOiBpc011dGUgPyAncHJldmlldy12aWRlby11bm11dGUtYnV0dG9uJyA6ICdwcmV2aWV3LXZpZGVvLW11dGUtYnV0dG9uJywgb25DbGljazogKCkgPT4gY2FtZXJhLnRvZ2dsZSgpLCBkaXNhYmxlZDogIWhhc0Jyb3dzZXJQZXJtaXNzaW9uLCBNZW51OiBNZW51LCBtZW51UGxhY2VtZW50OiBtZW51UGxhY2VtZW50LCAuLi5yZXN0Q29tcG9zaXRlQnV0dG9uUHJvcHMsIGNoaWxkcmVuOiBbanN4KEljb24sIHsgaWNvbjogIWlzTXV0ZSA/ICdjYW1lcmEnIDogJ2NhbWVyYS1vZmYnIH0pLCAhaGFzQnJvd3NlclBlcm1pc3Npb24gJiYgKGpzeChcInNwYW5cIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19uby1tZWRpYS1wZXJtaXNzaW9uXCIsIHRpdGxlOiB0KCdDaGVjayB5b3VyIGJyb3dzZXIgdmlkZW8gcGVybWlzc2lvbnMnKSwgY2hpbGRyZW46IFwiIVwiIH0pKV0gfSkpO1xufTtcbmNvbnN0IFRvZ2dsZVZpZGVvUHVibGlzaGluZ0J1dHRvbiA9IChwcm9wcykgPT4ge1xuICAgIGNvbnN0IHsgdCB9ID0gdXNlSTE4bigpO1xuICAgIGNvbnN0IHsgY2FwdGlvbiwgTWVudSA9IGpzeChEZXZpY2VTZWxlY3RvclZpZGVvLCB7IHZpc3VhbFR5cGU6IFwibGlzdFwiIH0pLCBtZW51UGxhY2VtZW50ID0gJ3RvcCcsIC4uLnJlc3RDb21wb3NpdGVCdXR0b25Qcm9wcyB9ID0gcHJvcHM7XG4gICAgY29uc3QgeyBoYXNQZXJtaXNzaW9uLCByZXF1ZXN0UGVybWlzc2lvbiwgaXNBd2FpdGluZ1Blcm1pc3Npb24gfSA9IHVzZVJlcXVlc3RQZXJtaXNzaW9uKE93bkNhcGFiaWxpdHkuU0VORF9WSURFTyk7XG4gICAgY29uc3QgeyB1c2VDYW1lcmFTdGF0ZSwgdXNlQ2FsbFNldHRpbmdzIH0gPSB1c2VDYWxsU3RhdGVIb29rcygpO1xuICAgIGNvbnN0IHsgY2FtZXJhLCBpc011dGUsIGhhc0Jyb3dzZXJQZXJtaXNzaW9uIH0gPSB1c2VDYW1lcmFTdGF0ZSgpO1xuICAgIGNvbnN0IGNhbGxTZXR0aW5ncyA9IHVzZUNhbGxTZXR0aW5ncygpO1xuICAgIGNvbnN0IGlzUHVibGlzaGluZ1ZpZGVvQWxsb3dlZCA9IGNhbGxTZXR0aW5ncz8udmlkZW8uZW5hYmxlZDtcbiAgICByZXR1cm4gKGpzeChSZXN0cmljdGVkLCB7IHJlcXVpcmVkR3JhbnRzOiBbT3duQ2FwYWJpbGl0eS5TRU5EX1ZJREVPXSwgY2hpbGRyZW46IGpzeChQZXJtaXNzaW9uTm90aWZpY2F0aW9uLCB7IHBlcm1pc3Npb246IE93bkNhcGFiaWxpdHkuU0VORF9WSURFTywgaXNBd2FpdGluZ0FwcHJvdmFsOiBpc0F3YWl0aW5nUGVybWlzc2lvbiwgbWVzc2FnZUFwcHJvdmVkOiB0KCdZb3UgY2FuIG5vdyBzaGFyZSB5b3VyIHZpZGVvLicpLCBtZXNzYWdlQXdhaXRpbmdBcHByb3ZhbDogdCgnQXdhaXRpbmcgZm9yIGFuIGFwcHJvdmFsIHRvIHNoYXJlIHlvdXIgdmlkZW8uJyksIG1lc3NhZ2VSZXZva2VkOiB0KCdZb3UgY2FuIG5vIGxvbmdlciBzaGFyZSB5b3VyIHZpZGVvLicpLCBjaGlsZHJlbjoganN4cyhDb21wb3NpdGVCdXR0b24sIHsgYWN0aXZlOiBpc011dGUsIGNhcHRpb246IGNhcHRpb24sIHZhcmlhbnQ6IFwic2Vjb25kYXJ5XCIsIHRpdGxlOiAhaGFzUGVybWlzc2lvblxuICAgICAgICAgICAgICAgICAgICA/IHQoJ1lvdSBoYXZlIG5vIHBlcm1pc3Npb24gdG8gc2hhcmUgeW91ciB2aWRlbycpXG4gICAgICAgICAgICAgICAgICAgIDogIWhhc0Jyb3dzZXJQZXJtaXNzaW9uXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHQoJ0NoZWNrIHlvdXIgYnJvd3NlciB2aWRlbyBwZXJtaXNzaW9ucycpXG4gICAgICAgICAgICAgICAgICAgICAgICA6ICFpc1B1Ymxpc2hpbmdWaWRlb0FsbG93ZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHQoJ1ZpZGVvIHB1Ymxpc2hpbmcgaXMgZGlzYWJsZWQgYnkgdGhlIHN5c3RlbScpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBjYXB0aW9uIHx8IHQoJ1ZpZGVvJyksIGRpc2FibGVkOiAhaGFzQnJvd3NlclBlcm1pc3Npb24gfHwgIWhhc1Blcm1pc3Npb24gfHwgIWlzUHVibGlzaGluZ1ZpZGVvQWxsb3dlZCwgXCJkYXRhLXRlc3RpZFwiOiBpc011dGUgPyAndmlkZW8tdW5tdXRlLWJ1dHRvbicgOiAndmlkZW8tbXV0ZS1idXR0b24nLCBvbkNsaWNrOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaGFzUGVybWlzc2lvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgcmVxdWVzdFBlcm1pc3Npb24oKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGNhbWVyYS50b2dnbGUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIE1lbnU6IE1lbnUsIG1lbnVQbGFjZW1lbnQ6IG1lbnVQbGFjZW1lbnQsIG1lbnVPZmZzZXQ6IDE2LCAuLi5yZXN0Q29tcG9zaXRlQnV0dG9uUHJvcHMsIGNoaWxkcmVuOiBbanN4KEljb24sIHsgaWNvbjogaXNNdXRlID8gJ2NhbWVyYS1vZmYnIDogJ2NhbWVyYScgfSksICghaGFzQnJvd3NlclBlcm1pc3Npb24gfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICFoYXNQZXJtaXNzaW9uIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAhaXNQdWJsaXNoaW5nVmlkZW9BbGxvd2VkKSAmJiAoanN4KFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX25vLW1lZGlhLXBlcm1pc3Npb25cIiwgY2hpbGRyZW46IFwiIVwiIH0pKV0gfSkgfSkgfSkpO1xufTtcblxuY29uc3QgRW5kQ2FsbE1lbnUgPSAocHJvcHMpID0+IHtcbiAgICBjb25zdCB7IG9uTGVhdmUsIG9uRW5kIH0gPSBwcm9wcztcbiAgICBjb25zdCB7IHQgfSA9IHVzZUkxOG4oKTtcbiAgICByZXR1cm4gKGpzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19lbmQtY2FsbF9fY29uZmlybWF0aW9uXCIsIGNoaWxkcmVuOiBbanN4cyhcImJ1dHRvblwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX2J1dHRvbiBzdHItdmlkZW9fX2VuZC1jYWxsX19sZWF2ZVwiLCB0eXBlOiBcImJ1dHRvblwiLCBcImRhdGEtdGVzdGlkXCI6IFwibGVhdmUtY2FsbC1idXR0b25cIiwgb25DbGljazogb25MZWF2ZSwgY2hpbGRyZW46IFtqc3goSWNvbiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19idXR0b25fX2ljb24gc3RyLXZpZGVvX19lbmQtY2FsbF9fbGVhdmUtaWNvblwiLCBpY29uOiBcImxvZ291dFwiIH0pLCB0KCdMZWF2ZSBjYWxsJyldIH0pLCBqc3goUmVzdHJpY3RlZCwgeyByZXF1aXJlZEdyYW50czogW093bkNhcGFiaWxpdHkuRU5EX0NBTExdLCBjaGlsZHJlbjoganN4cyhcImJ1dHRvblwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX2J1dHRvbiBzdHItdmlkZW9fX2VuZC1jYWxsX19lbmRcIiwgdHlwZTogXCJidXR0b25cIiwgXCJkYXRhLXRlc3RpZFwiOiBcImVuZC1jYWxsLWZvci1hbGwtYnV0dG9uXCIsIG9uQ2xpY2s6IG9uRW5kLCBjaGlsZHJlbjogW2pzeChJY29uLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX2J1dHRvbl9faWNvbiBzdHItdmlkZW9fX2VuZC1jYWxsX19lbmQtaWNvblwiLCBpY29uOiBcImNhbGwtZW5kXCIgfSksIHQoJ0VuZCBjYWxsIGZvciBhbGwnKV0gfSkgfSldIH0pKTtcbn07XG5jb25zdCBDYW5jZWxDYWxsVG9nZ2xlTWVudUJ1dHRvbiA9IGZvcndhcmRSZWYoZnVuY3Rpb24gQ2FuY2VsQ2FsbFRvZ2dsZU1lbnVCdXR0b24ocHJvcHMsIHJlZikge1xuICAgIGNvbnN0IHsgdCB9ID0gdXNlSTE4bigpO1xuICAgIHJldHVybiAoanN4KEljb25CdXR0b24sIHsgaWNvbjogXCJjYWxsLWVuZFwiLCB2YXJpYW50OiBcImRhbmdlclwiLCB0aXRsZTogdCgnTGVhdmUgY2FsbCcpLCBcImRhdGEtdGVzdGlkXCI6IFwibGVhdmUtY2FsbC1idXR0b25cIiwgcmVmOiByZWYgfSkpO1xufSk7XG5jb25zdCBDYW5jZWxDYWxsQ29uZmlybUJ1dHRvbiA9ICh7IG9uQ2xpY2ssIG9uTGVhdmUsIH0pID0+IHtcbiAgICBjb25zdCBjYWxsID0gdXNlQ2FsbCgpO1xuICAgIGNvbnN0IGhhbmRsZUxlYXZlID0gdXNlQ2FsbGJhY2soYXN5bmMgKGUpID0+IHtcbiAgICAgICAgaWYgKG9uQ2xpY2spIHtcbiAgICAgICAgICAgIG9uQ2xpY2soZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY2FsbCkge1xuICAgICAgICAgICAgYXdhaXQgY2FsbC5sZWF2ZSgpO1xuICAgICAgICAgICAgb25MZWF2ZT8uKCk7XG4gICAgICAgIH1cbiAgICB9LCBbb25DbGljaywgb25MZWF2ZSwgY2FsbF0pO1xuICAgIGNvbnN0IGhhbmRsZUVuZENhbGwgPSB1c2VDYWxsYmFjayhhc3luYyAoZSkgPT4ge1xuICAgICAgICBpZiAob25DbGljaykge1xuICAgICAgICAgICAgb25DbGljayhlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjYWxsKSB7XG4gICAgICAgICAgICBhd2FpdCBjYWxsLmVuZENhbGwoKTtcbiAgICAgICAgICAgIG9uTGVhdmU/LigpO1xuICAgICAgICB9XG4gICAgfSwgW29uQ2xpY2ssIG9uTGVhdmUsIGNhbGxdKTtcbiAgICByZXR1cm4gKGpzeChNZW51VG9nZ2xlLCB7IHBsYWNlbWVudDogXCJ0b3Atc3RhcnRcIiwgVG9nZ2xlQnV0dG9uOiBDYW5jZWxDYWxsVG9nZ2xlTWVudUJ1dHRvbiwgY2hpbGRyZW46IGpzeChFbmRDYWxsTWVudSwgeyBvbkVuZDogaGFuZGxlRW5kQ2FsbCwgb25MZWF2ZTogaGFuZGxlTGVhdmUgfSkgfSkpO1xufTtcbmNvbnN0IENhbmNlbENhbGxCdXR0b24gPSAoeyBkaXNhYmxlZCwgb25DbGljaywgb25MZWF2ZSwgfSkgPT4ge1xuICAgIGNvbnN0IGNhbGwgPSB1c2VDYWxsKCk7XG4gICAgY29uc3QgeyB0IH0gPSB1c2VJMThuKCk7XG4gICAgY29uc3QgaGFuZGxlQ2xpY2sgPSB1c2VDYWxsYmFjayhhc3luYyAoZSkgPT4ge1xuICAgICAgICBpZiAob25DbGljaykge1xuICAgICAgICAgICAgb25DbGljayhlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjYWxsKSB7XG4gICAgICAgICAgICBhd2FpdCBjYWxsLmxlYXZlKCk7XG4gICAgICAgICAgICBvbkxlYXZlPy4oKTtcbiAgICAgICAgfVxuICAgIH0sIFtvbkNsaWNrLCBvbkxlYXZlLCBjYWxsXSk7XG4gICAgcmV0dXJuIChqc3goSWNvbkJ1dHRvbiwgeyBkaXNhYmxlZDogZGlzYWJsZWQsIGljb246IFwiY2FsbC1lbmRcIiwgdmFyaWFudDogXCJkYW5nZXJcIiwgdGl0bGU6IHQoJ0xlYXZlIGNhbGwnKSwgXCJkYXRhLXRlc3RpZFwiOiBcImNhbmNlbC1jYWxsLWJ1dHRvblwiLCBvbkNsaWNrOiBoYW5kbGVDbGljayB9KSk7XG59O1xuXG5jb25zdCBDYWxsQ29udHJvbHMgPSAoeyBvbkxlYXZlIH0pID0+IChqc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fY2FsbC1jb250cm9sc1wiLCBjaGlsZHJlbjogW2pzeChSZWNvcmRDYWxsQnV0dG9uLCB7fSksIGpzeChSZWFjdGlvbnNCdXR0b24sIHt9KSwganN4KFNjcmVlblNoYXJlQnV0dG9uLCB7fSksIGpzeChTcGVha2luZ1doaWxlTXV0ZWROb3RpZmljYXRpb24sIHsgY2hpbGRyZW46IGpzeChUb2dnbGVBdWRpb1B1Ymxpc2hpbmdCdXR0b24sIHt9KSB9KSwganN4KFRvZ2dsZVZpZGVvUHVibGlzaGluZ0J1dHRvbiwge30pLCBqc3goQ2FuY2VsQ2FsbEJ1dHRvbiwgeyBvbkxlYXZlOiBvbkxlYXZlIH0pXSB9KSk7XG5cbkNoYXJ0LnJlZ2lzdGVyKENhdGVnb3J5U2NhbGUsIExpbmVhclNjYWxlLCBMaW5lRWxlbWVudCwgUG9pbnRFbGVtZW50KTtcbmNvbnN0IENhbGxTdGF0c0xhdGVuY3lDaGFydCA9IChwcm9wcykgPT4ge1xuICAgIGNvbnN0IHsgdmFsdWVzIH0gPSBwcm9wcztcbiAgICBsZXQgbWF4ID0gMDtcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICBsYWJlbHM6IHZhbHVlcy5tYXAoKHBvaW50KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUocG9pbnQueCAqIDEwMDApO1xuICAgICAgICAgICAgcmV0dXJuIGAke2RhdGUuZ2V0SG91cnMoKX06JHtkYXRlLmdldE1pbnV0ZXMoKX1gO1xuICAgICAgICB9KSxcbiAgICAgICAgZGF0YXNldHM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkYXRhOiB2YWx1ZXMubWFwKChwb2ludCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IHkgfSA9IHBvaW50O1xuICAgICAgICAgICAgICAgICAgICBtYXggPSBNYXRoLm1heChtYXgsIHkpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcG9pbnQ7XG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgYm9yZGVyQ29sb3I6ICcjMDBlMmExJyxcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjMDBlMmExJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgfTtcbiAgICBjb25zdCBvcHRpb25zID0gdXNlTWVtbygoKSA9PiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtYWludGFpbkFzcGVjdFJhdGlvOiBmYWxzZSxcbiAgICAgICAgICAgIGFuaW1hdGlvbjoge1xuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAwLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVsZW1lbnRzOiB7XG4gICAgICAgICAgICAgICAgbGluZToge1xuICAgICAgICAgICAgICAgICAgICBib3JkZXJXaWR0aDogMSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHBvaW50OiB7XG4gICAgICAgICAgICAgICAgICAgIHJhZGl1czogMixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNjYWxlczoge1xuICAgICAgICAgICAgICAgIHk6IHtcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICdyaWdodCcsXG4gICAgICAgICAgICAgICAgICAgIHN0YWNrZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIG1pbjogMCxcbiAgICAgICAgICAgICAgICAgICAgbWF4OiBNYXRoLm1heCgxODAsIE1hdGguY2VpbCgobWF4ICsgMTApIC8gMTApICogMTApLFxuICAgICAgICAgICAgICAgICAgICBncmlkOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICcjOTc5Y2EwJyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdGlja3M6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ZXBTaXplOiAzMCxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHg6IHtcbiAgICAgICAgICAgICAgICAgICAgZ3JpZDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHRpY2tzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9LCBbbWF4XSk7XG4gICAgcmV0dXJuIChqc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19jYWxsLXN0YXRzLWxpbmUtY2hhcnQtY29udGFpbmVyXCIsIGNoaWxkcmVuOiBqc3goTGluZSwgeyBvcHRpb25zOiBvcHRpb25zLCBkYXRhOiBkYXRhLCBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19jYWxsLXN0YXRzX19sYXRlbmN5Y2hhcnRcIiB9KSB9KSk7XG59O1xuXG52YXIgU3RhdHVzZXM7XG4oZnVuY3Rpb24gKFN0YXR1c2VzKSB7XG4gICAgU3RhdHVzZXNbXCJHT09EXCJdID0gXCJHb29kXCI7XG4gICAgU3RhdHVzZXNbXCJPS1wiXSA9IFwiT2tcIjtcbiAgICBTdGF0dXNlc1tcIkJBRFwiXSA9IFwiQmFkXCI7XG59KShTdGF0dXNlcyB8fCAoU3RhdHVzZXMgPSB7fSkpO1xuY29uc3Qgc3RhdHNTdGF0dXMgPSAoeyB2YWx1ZSwgbG93Qm91bmQsIGhpZ2hCb3VuZCwgfSkgPT4ge1xuICAgIGlmICh2YWx1ZSA8PSBsb3dCb3VuZCkge1xuICAgICAgICByZXR1cm4gU3RhdHVzZXMuR09PRDtcbiAgICB9XG4gICAgaWYgKHZhbHVlID49IGxvd0JvdW5kICYmIHZhbHVlIDw9IGhpZ2hCb3VuZCkge1xuICAgICAgICByZXR1cm4gU3RhdHVzZXMuT0s7XG4gICAgfVxuICAgIGlmICh2YWx1ZSA+PSBoaWdoQm91bmQpIHtcbiAgICAgICAgcmV0dXJuIFN0YXR1c2VzLkJBRDtcbiAgICB9XG4gICAgcmV0dXJuIFN0YXR1c2VzLkdPT0Q7XG59O1xuY29uc3QgQ2FsbFN0YXRzID0gKHByb3BzKSA9PiB7XG4gICAgY29uc3QgeyBsYXRlbmN5TG93Qm91bmQgPSA3NSwgbGF0ZW5jeUhpZ2hCb3VuZCA9IDQwMCB9ID0gcHJvcHM7XG4gICAgY29uc3QgW2xhdGVuY3lCdWZmZXIsIHNldExhdGVuY3lCdWZmZXJdID0gdXNlU3RhdGUoKCkgPT4ge1xuICAgICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh7IGxlbmd0aDogMjAgfSwgKF8sIGkpID0+ICh7IHg6IG5vdyArIGksIHk6IDAgfSkpO1xuICAgIH0pO1xuICAgIGNvbnN0IHsgdCB9ID0gdXNlSTE4bigpO1xuICAgIGNvbnN0IFtwdWJsaXNoQml0cmF0ZSwgc2V0UHVibGlzaEJpdHJhdGVdID0gdXNlU3RhdGUoJy0nKTtcbiAgICBjb25zdCBbc3Vic2NyaWJlQml0cmF0ZSwgc2V0U3Vic2NyaWJlQml0cmF0ZV0gPSB1c2VTdGF0ZSgnLScpO1xuICAgIGNvbnN0IHByZXZpb3VzU3RhdHMgPSB1c2VSZWYoKTtcbiAgICBjb25zdCB7IHVzZUNhbGxTdGF0c1JlcG9ydCB9ID0gdXNlQ2FsbFN0YXRlSG9va3MoKTtcbiAgICBjb25zdCBjYWxsU3RhdHNSZXBvcnQgPSB1c2VDYWxsU3RhdHNSZXBvcnQoKTtcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBpZiAoIWNhbGxTdGF0c1JlcG9ydClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKCFwcmV2aW91c1N0YXRzLmN1cnJlbnQpIHtcbiAgICAgICAgICAgIHByZXZpb3VzU3RhdHMuY3VycmVudCA9IGNhbGxTdGF0c1JlcG9ydDtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcmV2aW91c0NhbGxTdGF0c1JlcG9ydCA9IHByZXZpb3VzU3RhdHMuY3VycmVudDtcbiAgICAgICAgc2V0UHVibGlzaEJpdHJhdGUoKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGNhbGN1bGF0ZVB1Ymxpc2hCaXRyYXRlKHByZXZpb3VzQ2FsbFN0YXRzUmVwb3J0LCBjYWxsU3RhdHNSZXBvcnQpO1xuICAgICAgICB9KTtcbiAgICAgICAgc2V0U3Vic2NyaWJlQml0cmF0ZSgoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gY2FsY3VsYXRlU3Vic2NyaWJlQml0cmF0ZShwcmV2aW91c0NhbGxTdGF0c1JlcG9ydCwgY2FsbFN0YXRzUmVwb3J0KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHNldExhdGVuY3lCdWZmZXIoKGxhdGVuY3lCdWYpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5ld0xhdGVuY3lCdWZmZXIgPSBsYXRlbmN5QnVmLnNsaWNlKC0xOSk7XG4gICAgICAgICAgICBuZXdMYXRlbmN5QnVmZmVyLnB1c2goe1xuICAgICAgICAgICAgICAgIHg6IGNhbGxTdGF0c1JlcG9ydC50aW1lc3RhbXAsXG4gICAgICAgICAgICAgICAgeTogY2FsbFN0YXRzUmVwb3J0LnB1Ymxpc2hlclN0YXRzLmF2ZXJhZ2VSb3VuZFRyaXBUaW1lSW5NcyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIG5ld0xhdGVuY3lCdWZmZXI7XG4gICAgICAgIH0pO1xuICAgICAgICBwcmV2aW91c1N0YXRzLmN1cnJlbnQgPSBjYWxsU3RhdHNSZXBvcnQ7XG4gICAgfSwgW2NhbGxTdGF0c1JlcG9ydF0pO1xuICAgIGNvbnN0IGxhdGVuY3lDb21wYXJpc29uID0ge1xuICAgICAgICBsb3dCb3VuZDogbGF0ZW5jeUxvd0JvdW5kLFxuICAgICAgICBoaWdoQm91bmQ6IGxhdGVuY3lIaWdoQm91bmQsXG4gICAgICAgIHZhbHVlOiBjYWxsU3RhdHNSZXBvcnQ/LnB1Ymxpc2hlclN0YXRzLmF2ZXJhZ2VSb3VuZFRyaXBUaW1lSW5NcyB8fCAwLFxuICAgIH07XG4gICAgcmV0dXJuIChqc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19jYWxsLXN0YXRzXCIsIGNoaWxkcmVuOiBjYWxsU3RhdHNSZXBvcnQgJiYgKGpzeHMoRnJhZ21lbnQsIHsgY2hpbGRyZW46IFtqc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fY2FsbC1zdGF0c19faGVhZGVyXCIsIGNoaWxkcmVuOiBbanN4cyhcImgzXCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fY2FsbC1zdGF0c19faGVhZGluZ1wiLCBjaGlsZHJlbjogW2pzeChJY29uLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX2NhbGwtc3RhdHNfX2ljb25cIiwgaWNvbjogXCJjYWxsLWxhdGVuY3lcIiB9KSwgdCgnQ2FsbCBMYXRlbmN5JyldIH0pLCBqc3goXCJwXCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fY2FsbC1zdGF0c19fZGVzY3JpcHRpb25cIiwgY2hpbGRyZW46IHQoJ1ZlcnkgaGlnaCBsYXRlbmN5IHZhbHVlcyBtYXkgcmVkdWNlIGNhbGwgcXVhbGl0eSwgY2F1c2UgbGFnLCBhbmQgbWFrZSB0aGUgY2FsbCBsZXNzIGVuam95YWJsZS4nKSB9KV0gfSksIGpzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX2NhbGwtc3RhdHNfX2xhdGVuY3ljaGFydFwiLCBjaGlsZHJlbjoganN4KENhbGxTdGF0c0xhdGVuY3lDaGFydCwgeyB2YWx1ZXM6IGxhdGVuY3lCdWZmZXIgfSkgfSksIGpzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19jYWxsLXN0YXRzX19oZWFkZXJcIiwgY2hpbGRyZW46IFtqc3hzKFwiaDNcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19jYWxsLXN0YXRzX19oZWFkaW5nXCIsIGNoaWxkcmVuOiBbanN4KEljb24sIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fY2FsbC1zdGF0c19faWNvblwiLCBpY29uOiBcIm5ldHdvcmstcXVhbGl0eVwiIH0pLCB0KCdDYWxsIHBlcmZvcm1hbmNlJyldIH0pLCBqc3goXCJwXCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fY2FsbC1zdGF0c19fZGVzY3JpcHRpb25cIiwgY2hpbGRyZW46IHQoJ1ZlcnkgaGlnaCBsYXRlbmN5IHZhbHVlcyBtYXkgcmVkdWNlIGNhbGwgcXVhbGl0eSwgY2F1c2UgbGFnLCBhbmQgbWFrZSB0aGUgY2FsbCBsZXNzIGVuam95YWJsZS4nKSB9KV0gfSksIGpzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19jYWxsLXN0YXRzX19jYXJkLWNvbnRhaW5lclwiLCBjaGlsZHJlbjogW2pzeChTdGF0Q2FyZCwgeyBsYWJlbDogXCJSZWdpb25cIiwgdmFsdWU6IGNhbGxTdGF0c1JlcG9ydC5kYXRhY2VudGVyIH0pLCBqc3goU3RhdENhcmQsIHsgbGFiZWw6IFwiTGF0ZW5jeVwiLCB2YWx1ZTogYCR7Y2FsbFN0YXRzUmVwb3J0LnB1Ymxpc2hlclN0YXRzLmF2ZXJhZ2VSb3VuZFRyaXBUaW1lSW5Nc30gbXMuYCwgY29tcGFyaXNvbjogbGF0ZW5jeUNvbXBhcmlzb24gfSksIGpzeChTdGF0Q2FyZCwgeyBsYWJlbDogXCJSZWNlaXZlIGppdHRlclwiLCB2YWx1ZTogYCR7Y2FsbFN0YXRzUmVwb3J0LnN1YnNjcmliZXJTdGF0cy5hdmVyYWdlSml0dGVySW5Nc30gbXMuYCwgY29tcGFyaXNvbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5sYXRlbmN5Q29tcGFyaXNvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGNhbGxTdGF0c1JlcG9ydC5zdWJzY3JpYmVyU3RhdHMuYXZlcmFnZUppdHRlckluTXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSB9KSwganN4KFN0YXRDYXJkLCB7IGxhYmVsOiBcIlB1Ymxpc2ggaml0dGVyXCIsIHZhbHVlOiBgJHtjYWxsU3RhdHNSZXBvcnQucHVibGlzaGVyU3RhdHMuYXZlcmFnZUppdHRlckluTXN9IG1zLmAsIGNvbXBhcmlzb246IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4ubGF0ZW5jeUNvbXBhcmlzb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBjYWxsU3RhdHNSZXBvcnQucHVibGlzaGVyU3RhdHMuYXZlcmFnZUppdHRlckluTXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSB9KSwganN4KFN0YXRDYXJkLCB7IGxhYmVsOiBcIlB1Ymxpc2ggcmVzb2x1dGlvblwiLCB2YWx1ZTogdG9GcmFtZVNpemUoY2FsbFN0YXRzUmVwb3J0LnB1Ymxpc2hlclN0YXRzKSB9KSwganN4KFN0YXRDYXJkLCB7IGxhYmVsOiBcIlB1Ymxpc2ggcXVhbGl0eSBkcm9wIHJlYXNvblwiLCB2YWx1ZTogY2FsbFN0YXRzUmVwb3J0LnB1Ymxpc2hlclN0YXRzLnF1YWxpdHlMaW1pdGF0aW9uUmVhc29ucyB9KSwganN4KFN0YXRDYXJkLCB7IGxhYmVsOiBcIlJlY2VpdmluZyByZXNvbHV0aW9uXCIsIHZhbHVlOiB0b0ZyYW1lU2l6ZShjYWxsU3RhdHNSZXBvcnQuc3Vic2NyaWJlclN0YXRzKSB9KSwganN4KFN0YXRDYXJkLCB7IGxhYmVsOiBcIlJlY2VpdmUgcXVhbGl0eSBkcm9wIHJlYXNvblwiLCB2YWx1ZTogY2FsbFN0YXRzUmVwb3J0LnN1YnNjcmliZXJTdGF0cy5xdWFsaXR5TGltaXRhdGlvblJlYXNvbnMgfSksIGpzeChTdGF0Q2FyZCwgeyBsYWJlbDogXCJQdWJsaXNoIGJpdHJhdGVcIiwgdmFsdWU6IHB1Ymxpc2hCaXRyYXRlIH0pLCBqc3goU3RhdENhcmQsIHsgbGFiZWw6IFwiUmVjZWl2aW5nIGJpdHJhdGVcIiwgdmFsdWU6IHN1YnNjcmliZUJpdHJhdGUgfSldIH0pXSB9KSkgfSkpO1xufTtcbmNvbnN0IFN0YXRDYXJkRXhwbGFuYXRpb24gPSAocHJvcHMpID0+IHtcbiAgICBjb25zdCB7IGRlc2NyaXB0aW9uIH0gPSBwcm9wcztcbiAgICBjb25zdCBbaXNPcGVuLCBzZXRJc09wZW5dID0gdXNlU3RhdGUoZmFsc2UpO1xuICAgIGNvbnN0IHsgcmVmcywgZmxvYXRpbmdTdHlsZXMsIGNvbnRleHQgfSA9IHVzZUZsb2F0aW5nKHtcbiAgICAgICAgb3BlbjogaXNPcGVuLFxuICAgICAgICBvbk9wZW5DaGFuZ2U6IHNldElzT3BlbixcbiAgICB9KTtcbiAgICBjb25zdCBob3ZlciA9IHVzZUhvdmVyKGNvbnRleHQpO1xuICAgIGNvbnN0IHsgZ2V0UmVmZXJlbmNlUHJvcHMsIGdldEZsb2F0aW5nUHJvcHMgfSA9IHVzZUludGVyYWN0aW9ucyhbaG92ZXJdKTtcbiAgICByZXR1cm4gKGpzeHMoRnJhZ21lbnQsIHsgY2hpbGRyZW46IFtqc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19jYWxsLWV4cGxhbmF0aW9uXCIsIHJlZjogcmVmcy5zZXRSZWZlcmVuY2UsIC4uLmdldFJlZmVyZW5jZVByb3BzKCksIGNoaWxkcmVuOiBqc3goSWNvbiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19jYWxsLWV4cGxhbmF0aW9uX19pY29uXCIsIGljb246IFwiaW5mb1wiIH0pIH0pLCBpc09wZW4gJiYgKGpzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX2NhbGwtZXhwbGFuYXRpb25fX2Rlc2NyaXB0aW9uXCIsIHJlZjogcmVmcy5zZXRGbG9hdGluZywgc3R5bGU6IGZsb2F0aW5nU3R5bGVzLCAuLi5nZXRGbG9hdGluZ1Byb3BzKCksIGNoaWxkcmVuOiBkZXNjcmlwdGlvbiB9KSldIH0pKTtcbn07XG5jb25zdCBTdGF0c1RhZyA9ICh7IGNoaWxkcmVuLCBzdGF0dXMgPSBTdGF0dXNlcy5HT09ELCB9KSA9PiB7XG4gICAgcmV0dXJuIChqc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IGNsc3goJ3N0ci12aWRlb19fY2FsbC1zdGF0c19fdGFnJywge1xuICAgICAgICAgICAgJ3N0ci12aWRlb19fY2FsbC1zdGF0c19fdGFnLS1nb29kJzogc3RhdHVzID09PSBTdGF0dXNlcy5HT09ELFxuICAgICAgICAgICAgJ3N0ci12aWRlb19fY2FsbC1zdGF0c19fdGFnLS1vayc6IHN0YXR1cyA9PT0gU3RhdHVzZXMuT0ssXG4gICAgICAgICAgICAnc3RyLXZpZGVvX19jYWxsLXN0YXRzX190YWctLWJhZCc6IHN0YXR1cyA9PT0gU3RhdHVzZXMuQkFELFxuICAgICAgICB9KSwgY2hpbGRyZW46IGpzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX2NhbGwtc3RhdHNfX3RhZ19fdGV4dFwiLCBjaGlsZHJlbjogY2hpbGRyZW4gfSkgfSkpO1xufTtcbmNvbnN0IFN0YXRDYXJkID0gKHByb3BzKSA9PiB7XG4gICAgY29uc3QgeyBsYWJlbCwgdmFsdWUsIGRlc2NyaXB0aW9uLCBjb21wYXJpc29uIH0gPSBwcm9wcztcbiAgICBjb25zdCB7IHQgfSA9IHVzZUkxOG4oKTtcbiAgICBjb25zdCBzdGF0dXMgPSBjb21wYXJpc29uID8gc3RhdHNTdGF0dXMoY29tcGFyaXNvbikgOiB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIChqc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fY2FsbC1zdGF0c19fY2FyZFwiLCBjaGlsZHJlbjogW2pzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19jYWxsLXN0YXRzX19jYXJkLWNvbnRlbnRcIiwgY2hpbGRyZW46IFtqc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fY2FsbC1zdGF0c19fY2FyZC1sYWJlbFwiLCBjaGlsZHJlbjogW2xhYmVsLCBkZXNjcmlwdGlvbiAmJiBqc3goU3RhdENhcmRFeHBsYW5hdGlvbiwgeyBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24gfSldIH0pLCBqc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19jYWxsLXN0YXRzX19jYXJkLXZhbHVlXCIsIGNoaWxkcmVuOiB2YWx1ZSB9KV0gfSksIGNvbXBhcmlzb24gJiYgc3RhdHVzICYmIGpzeChTdGF0c1RhZywgeyBzdGF0dXM6IHN0YXR1cywgY2hpbGRyZW46IHQoc3RhdHVzKSB9KV0gfSkpO1xufTtcbmNvbnN0IHRvRnJhbWVTaXplID0gKHN0YXRzKSA9PiB7XG4gICAgY29uc3QgeyBoaWdoZXN0RnJhbWVXaWR0aDogdywgaGlnaGVzdEZyYW1lSGVpZ2h0OiBoLCBoaWdoZXN0RnJhbWVzUGVyU2Vjb25kOiBmcHMsIH0gPSBzdGF0cztcbiAgICBsZXQgc2l6ZSA9IGAtYDtcbiAgICBpZiAodyAmJiBoKSB7XG4gICAgICAgIHNpemUgPSBgJHt3fXgke2h9YDtcbiAgICAgICAgaWYgKGZwcykge1xuICAgICAgICAgICAgc2l6ZSArPSBgQCR7ZnBzfWZwcy5gO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzaXplO1xufTtcbmNvbnN0IGNhbGN1bGF0ZVB1Ymxpc2hCaXRyYXRlID0gKHByZXZpb3VzQ2FsbFN0YXRzUmVwb3J0LCBjYWxsU3RhdHNSZXBvcnQpID0+IHtcbiAgICBjb25zdCB7IHB1Ymxpc2hlclN0YXRzOiB7IHRvdGFsQnl0ZXNTZW50OiBwcmV2aW91c1RvdGFsQnl0ZXNTZW50LCB0aW1lc3RhbXA6IHByZXZpb3VzVGltZXN0YW1wLCB9LCB9ID0gcHJldmlvdXNDYWxsU3RhdHNSZXBvcnQ7XG4gICAgY29uc3QgeyBwdWJsaXNoZXJTdGF0czogeyB0b3RhbEJ5dGVzU2VudCwgdGltZXN0YW1wIH0sIH0gPSBjYWxsU3RhdHNSZXBvcnQ7XG4gICAgY29uc3QgYnl0ZXNTZW50ID0gdG90YWxCeXRlc1NlbnQgLSBwcmV2aW91c1RvdGFsQnl0ZXNTZW50O1xuICAgIGNvbnN0IHRpbWVFbGFwc2VkID0gdGltZXN0YW1wIC0gcHJldmlvdXNUaW1lc3RhbXA7XG4gICAgcmV0dXJuIGAkeygoYnl0ZXNTZW50ICogOCkgLyB0aW1lRWxhcHNlZCkudG9GaXhlZCgyKX0ga2Jwc2A7XG59O1xuY29uc3QgY2FsY3VsYXRlU3Vic2NyaWJlQml0cmF0ZSA9IChwcmV2aW91c0NhbGxTdGF0c1JlcG9ydCwgY2FsbFN0YXRzUmVwb3J0KSA9PiB7XG4gICAgY29uc3QgeyBzdWJzY3JpYmVyU3RhdHM6IHsgdG90YWxCeXRlc1JlY2VpdmVkOiBwcmV2aW91c1RvdGFsQnl0ZXNSZWNlaXZlZCwgdGltZXN0YW1wOiBwcmV2aW91c1RpbWVzdGFtcCwgfSwgfSA9IHByZXZpb3VzQ2FsbFN0YXRzUmVwb3J0O1xuICAgIGNvbnN0IHsgc3Vic2NyaWJlclN0YXRzOiB7IHRvdGFsQnl0ZXNSZWNlaXZlZCwgdGltZXN0YW1wIH0sIH0gPSBjYWxsU3RhdHNSZXBvcnQ7XG4gICAgY29uc3QgYnl0ZXNSZWNlaXZlZCA9IHRvdGFsQnl0ZXNSZWNlaXZlZCAtIHByZXZpb3VzVG90YWxCeXRlc1JlY2VpdmVkO1xuICAgIGNvbnN0IHRpbWVFbGFwc2VkID0gdGltZXN0YW1wIC0gcHJldmlvdXNUaW1lc3RhbXA7XG4gICAgcmV0dXJuIGAkeygoYnl0ZXNSZWNlaXZlZCAqIDgpIC8gdGltZUVsYXBzZWQpLnRvRml4ZWQoMil9IGticHNgO1xufTtcblxuY29uc3QgQ2FsbFN0YXRzQnV0dG9uID0gKCkgPT4gKGpzeChNZW51VG9nZ2xlLCB7IHBsYWNlbWVudDogXCJ0b3AtZW5kXCIsIFRvZ2dsZUJ1dHRvbjogVG9nZ2xlTWVudUJ1dHRvbiwgY2hpbGRyZW46IGpzeChDYWxsU3RhdHMsIHt9KSB9KSk7XG5jb25zdCBUb2dnbGVNZW51QnV0dG9uID0gZm9yd2FyZFJlZihmdW5jdGlvbiBUb2dnbGVNZW51QnV0dG9uKHByb3BzLCByZWYpIHtcbiAgICBjb25zdCB7IHQgfSA9IHVzZUkxOG4oKTtcbiAgICBjb25zdCB7IGNhcHRpb24sIG1lbnVTaG93biB9ID0gcHJvcHM7XG4gICAgcmV0dXJuIChqc3goQ29tcG9zaXRlQnV0dG9uLCB7IHJlZjogcmVmLCBhY3RpdmU6IG1lbnVTaG93biwgY2FwdGlvbjogY2FwdGlvbiwgdGl0bGU6IGNhcHRpb24gfHwgdCgnU3RhdGlzdGljcycpLCBcImRhdGEtdGVzdGlkXCI6IFwic3RhdHMtYnV0dG9uXCIsIGNoaWxkcmVuOiBqc3goSWNvbiwgeyBpY29uOiBcInN0YXRzXCIgfSkgfSkpO1xufSk7XG5cbmNvbnN0IFRvZ2dsZUF1ZGlvT3V0cHV0QnV0dG9uID0gKHByb3BzKSA9PiB7XG4gICAgY29uc3QgeyB0IH0gPSB1c2VJMThuKCk7XG4gICAgY29uc3QgeyBjYXB0aW9uLCBNZW51ID0gRGV2aWNlU2VsZWN0b3JBdWRpb091dHB1dCwgbWVudVBsYWNlbWVudCA9ICd0b3AnLCB9ID0gcHJvcHM7XG4gICAgcmV0dXJuIChqc3goQ29tcG9zaXRlQnV0dG9uLCB7IE1lbnU6IE1lbnUsIG1lbnVQbGFjZW1lbnQ6IG1lbnVQbGFjZW1lbnQsIGNhcHRpb246IGNhcHRpb24sIHRpdGxlOiBjYXB0aW9uIHx8IHQoJ1NwZWFrZXJzJyksIFwiZGF0YS10ZXN0aWRcIjogXCJhdWRpby1vdXRwdXQtYnV0dG9uXCIsIGNoaWxkcmVuOiBqc3goSWNvbiwgeyBpY29uOiBcInNwZWFrZXJcIiB9KSB9KSk7XG59O1xuXG5jb25zdCBCbG9ja2VkVXNlckxpc3RpbmcgPSAoeyBkYXRhIH0pID0+IHtcbiAgICBpZiAoIWRhdGEubGVuZ3RoKVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICByZXR1cm4gKGpzeChGcmFnbWVudCwgeyBjaGlsZHJlbjoganN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fcGFydGljaXBhbnQtbGlzdGluZ1wiLCBjaGlsZHJlbjogZGF0YS5tYXAoKHVzZXJJZCkgPT4gKGpzeChCbG9ja2VkVXNlckxpc3RpbmdJdGVtLCB7IHVzZXJJZDogdXNlcklkIH0sIHVzZXJJZCkpKSB9KSB9KSk7XG59O1xuY29uc3QgQmxvY2tlZFVzZXJMaXN0aW5nSXRlbSA9ICh7IHVzZXJJZCB9KSA9PiB7XG4gICAgY29uc3QgY2FsbCA9IHVzZUNhbGwoKTtcbiAgICBjb25zdCB1bmJsb2NrVXNlckNsaWNrSGFuZGxlciA9ICgpID0+IHtcbiAgICAgICAgaWYgKHVzZXJJZClcbiAgICAgICAgICAgIGNhbGw/LnVuYmxvY2tVc2VyKHVzZXJJZCk7XG4gICAgfTtcbiAgICByZXR1cm4gKGpzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19wYXJ0aWNpcGFudC1saXN0aW5nLWl0ZW1cIiwgY2hpbGRyZW46IFtqc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19wYXJ0aWNpcGFudC1saXN0aW5nLWl0ZW1fX2Rpc3BsYXktbmFtZVwiLCBjaGlsZHJlbjogdXNlcklkIH0pLCBqc3goUmVzdHJpY3RlZCwgeyByZXF1aXJlZEdyYW50czogW093bkNhcGFiaWxpdHkuQkxPQ0tfVVNFUlNdLCBjaGlsZHJlbjoganN4KFRleHRCdXR0b24sIHsgb25DbGljazogdW5ibG9ja1VzZXJDbGlja0hhbmRsZXIsIGNoaWxkcmVuOiBcIlVuYmxvY2tcIiB9KSB9KV0gfSkpO1xufTtcblxuY29uc3QgQ2FsbFBhcnRpY2lwYW50TGlzdEhlYWRlciA9ICh7IG9uQ2xvc2UsIH0pID0+IHtcbiAgICBjb25zdCB7IHVzZVBhcnRpY2lwYW50cywgdXNlQW5vbnltb3VzUGFydGljaXBhbnRDb3VudCB9ID0gdXNlQ2FsbFN0YXRlSG9va3MoKTtcbiAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSB1c2VQYXJ0aWNpcGFudHMoKTtcbiAgICBjb25zdCBhbm9ueW1vdXNQYXJ0aWNpcGFudENvdW50ID0gdXNlQW5vbnltb3VzUGFydGljaXBhbnRDb3VudCgpO1xuICAgIGNvbnN0IHsgdCB9ID0gdXNlSTE4bigpO1xuICAgIHJldHVybiAoanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX3BhcnRpY2lwYW50LWxpc3QtaGVhZGVyXCIsIGNoaWxkcmVuOiBbanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX3BhcnRpY2lwYW50LWxpc3QtaGVhZGVyX190aXRsZVwiLCBjaGlsZHJlbjogW3QoJ1BhcnRpY2lwYW50cycpLCAnICcsIGpzeHMoXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fcGFydGljaXBhbnQtbGlzdC1oZWFkZXJfX3RpdGxlLWNvdW50XCIsIGNoaWxkcmVuOiBbXCJbXCIsIHBhcnRpY2lwYW50cy5sZW5ndGgsIFwiXVwiXSB9KSwgYW5vbnltb3VzUGFydGljaXBhbnRDb3VudCA+IDAgJiYgKGpzeChcInNwYW5cIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19wYXJ0aWNpcGFudC1saXN0LWhlYWRlcl9fdGl0bGUtYW5vbnltb3VzXCIsIGNoaWxkcmVuOiB0KCdBbm9ueW1vdXMnLCB7IGNvdW50OiBhbm9ueW1vdXNQYXJ0aWNpcGFudENvdW50IH0pIH0pKV0gfSksIGpzeChJY29uQnV0dG9uLCB7IG9uQ2xpY2s6IG9uQ2xvc2UsIGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX3BhcnRpY2lwYW50LWxpc3QtaGVhZGVyX19jbG9zZS1idXR0b25cIiwgaWNvbjogXCJjbG9zZVwiIH0pXSB9KSk7XG59O1xuXG5jb25zdCBUb29sdGlwID0gKHsgY2hpbGRyZW4sIHJlZmVyZW5jZUVsZW1lbnQsIHRvb2x0aXBDbGFzc05hbWUsIHRvb2x0aXBQbGFjZW1lbnQgPSAndG9wJywgdmlzaWJsZSA9IGZhbHNlLCB9KSA9PiB7XG4gICAgY29uc3QgeyByZWZzLCB4LCB5LCBzdHJhdGVneSB9ID0gdXNlRmxvYXRpbmdVSVByZXNldCh7XG4gICAgICAgIHBsYWNlbWVudDogdG9vbHRpcFBsYWNlbWVudCxcbiAgICAgICAgc3RyYXRlZ3k6ICdhYnNvbHV0ZScsXG4gICAgfSk7XG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgcmVmcy5zZXRSZWZlcmVuY2UocmVmZXJlbmNlRWxlbWVudCk7XG4gICAgfSwgW3JlZmVyZW5jZUVsZW1lbnQsIHJlZnNdKTtcbiAgICBpZiAoIXZpc2libGUpXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIHJldHVybiAoanN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBjbHN4KCdzdHItdmlkZW9fX3Rvb2x0aXAnLCB0b29sdGlwQ2xhc3NOYW1lKSwgcmVmOiByZWZzLnNldEZsb2F0aW5nLCBzdHlsZToge1xuICAgICAgICAgICAgcG9zaXRpb246IHN0cmF0ZWd5LFxuICAgICAgICAgICAgdG9wOiB5ID8/IDAsXG4gICAgICAgICAgICBsZWZ0OiB4ID8/IDAsXG4gICAgICAgICAgICBvdmVyZmxvd1k6ICdhdXRvJyxcbiAgICAgICAgfSwgY2hpbGRyZW46IGNoaWxkcmVuIH0pKTtcbn07XG5cbmNvbnN0IHVzZUVudGVyTGVhdmVIYW5kbGVycyA9ICh7IG9uTW91c2VFbnRlciwgb25Nb3VzZUxlYXZlLCB9ID0ge30pID0+IHtcbiAgICBjb25zdCBbdG9vbHRpcFZpc2libGUsIHNldFRvb2x0aXBWaXNpYmxlXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgICBjb25zdCBoYW5kbGVNb3VzZUVudGVyID0gdXNlQ2FsbGJhY2soKGUpID0+IHtcbiAgICAgICAgc2V0VG9vbHRpcFZpc2libGUodHJ1ZSk7XG4gICAgICAgIG9uTW91c2VFbnRlcj8uKGUpO1xuICAgIH0sIFtvbk1vdXNlRW50ZXJdKTtcbiAgICBjb25zdCBoYW5kbGVNb3VzZUxlYXZlID0gdXNlQ2FsbGJhY2soKGUpID0+IHtcbiAgICAgICAgc2V0VG9vbHRpcFZpc2libGUoZmFsc2UpO1xuICAgICAgICBvbk1vdXNlTGVhdmU/LihlKTtcbiAgICB9LCBbb25Nb3VzZUxlYXZlXSk7XG4gICAgcmV0dXJuIHsgaGFuZGxlTW91c2VFbnRlciwgaGFuZGxlTW91c2VMZWF2ZSwgdG9vbHRpcFZpc2libGUgfTtcbn07XG5cbi8vIHRvZG86IGR1cGxpY2F0ZSBvZiBDYWxsUGFydGljaXBhbnRMaXN0LnRzeCNNZWRpYUluZGljYXRvciAtIHJlZmFjdG9yIHRvIGEgc2luZ2xlIGNvbXBvbmVudFxuY29uc3QgV2l0aFRvb2x0aXAgPSAoeyB0aXRsZSwgdG9vbHRpcENsYXNzTmFtZSwgdG9vbHRpcFBsYWNlbWVudCwgLi4ucHJvcHMgfSkgPT4ge1xuICAgIGNvbnN0IHsgaGFuZGxlTW91c2VFbnRlciwgaGFuZGxlTW91c2VMZWF2ZSwgdG9vbHRpcFZpc2libGUgfSA9IHVzZUVudGVyTGVhdmVIYW5kbGVycygpO1xuICAgIGNvbnN0IFt0b29sdGlwQW5jaG9yLCBzZXRUb29sdGlwQW5jaG9yXSA9IHVzZVN0YXRlKG51bGwpO1xuICAgIHJldHVybiAoanN4cyhGcmFnbWVudCwgeyBjaGlsZHJlbjogW2pzeChUb29sdGlwLCB7IHJlZmVyZW5jZUVsZW1lbnQ6IHRvb2x0aXBBbmNob3IsIHZpc2libGU6IHRvb2x0aXBWaXNpYmxlLCB0b29sdGlwQ2xhc3NOYW1lOiB0b29sdGlwQ2xhc3NOYW1lLCB0b29sdGlwUGxhY2VtZW50OiB0b29sdGlwUGxhY2VtZW50LCBjaGlsZHJlbjogdGl0bGUgfHwgJycgfSksIGpzeChcImRpdlwiLCB7IHJlZjogc2V0VG9vbHRpcEFuY2hvciwgb25Nb3VzZUVudGVyOiBoYW5kbGVNb3VzZUVudGVyLCBvbk1vdXNlTGVhdmU6IGhhbmRsZU1vdXNlTGVhdmUsIC4uLnByb3BzIH0pXSB9KSk7XG59O1xuXG5jb25zdCBDYWxsUGFydGljaXBhbnRMaXN0aW5nSXRlbSA9ICh7IHBhcnRpY2lwYW50LCBEaXNwbGF5TmFtZSA9IERlZmF1bHREaXNwbGF5TmFtZSwgfSkgPT4ge1xuICAgIGNvbnN0IGlzQXVkaW9PbiA9IHBhcnRpY2lwYW50LnB1Ymxpc2hlZFRyYWNrcy5pbmNsdWRlcyhTZnVNb2RlbHMuVHJhY2tUeXBlLkFVRElPKTtcbiAgICBjb25zdCBpc1ZpZGVvT24gPSBwYXJ0aWNpcGFudC5wdWJsaXNoZWRUcmFja3MuaW5jbHVkZXMoU2Z1TW9kZWxzLlRyYWNrVHlwZS5WSURFTyk7XG4gICAgY29uc3QgaXNQaW5uZWQgPSAhIXBhcnRpY2lwYW50LnBpbjtcbiAgICBjb25zdCB7IHQgfSA9IHVzZUkxOG4oKTtcbiAgICByZXR1cm4gKGpzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19wYXJ0aWNpcGFudC1saXN0aW5nLWl0ZW1cIiwgY2hpbGRyZW46IFtqc3goQXZhdGFyLCB7IG5hbWU6IHBhcnRpY2lwYW50Lm5hbWUsIGltYWdlU3JjOiBwYXJ0aWNpcGFudC5pbWFnZSB9KSwganN4KERpc3BsYXlOYW1lLCB7IHBhcnRpY2lwYW50OiBwYXJ0aWNpcGFudCB9KSwganN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX3BhcnRpY2lwYW50LWxpc3RpbmctaXRlbV9fbWVkaWEtaW5kaWNhdG9yLWdyb3VwXCIsIGNoaWxkcmVuOiBbanN4KE1lZGlhSW5kaWNhdG9yLCB7IHRpdGxlOiBpc0F1ZGlvT24gPyB0KCdNaWNyb3Bob25lIG9uJykgOiB0KCdNaWNyb3Bob25lIG9mZicpLCBjbGFzc05hbWU6IGNsc3goJ3N0ci12aWRlb19fcGFydGljaXBhbnQtbGlzdGluZy1pdGVtX19pY29uJywgYHN0ci12aWRlb19fcGFydGljaXBhbnQtbGlzdGluZy1pdGVtX19pY29uLSR7aXNBdWRpb09uID8gJ21pYycgOiAnbWljLW9mZid9YCkgfSksIGpzeChNZWRpYUluZGljYXRvciwgeyB0aXRsZTogaXNWaWRlb09uID8gdCgnQ2FtZXJhIG9uJykgOiB0KCdDYW1lcmEgb2ZmJyksIGNsYXNzTmFtZTogY2xzeCgnc3RyLXZpZGVvX19wYXJ0aWNpcGFudC1saXN0aW5nLWl0ZW1fX2ljb24nLCBgc3RyLXZpZGVvX19wYXJ0aWNpcGFudC1saXN0aW5nLWl0ZW1fX2ljb24tJHtpc1ZpZGVvT24gPyAnY2FtZXJhJyA6ICdjYW1lcmEtb2ZmJ31gKSB9KSwgaXNQaW5uZWQgJiYgKGpzeChNZWRpYUluZGljYXRvciwgeyB0aXRsZTogdCgnUGlubmVkJyksIGNsYXNzTmFtZTogY2xzeCgnc3RyLXZpZGVvX19wYXJ0aWNpcGFudC1saXN0aW5nLWl0ZW1fX2ljb24nLCAnc3RyLXZpZGVvX19wYXJ0aWNpcGFudC1saXN0aW5nLWl0ZW1fX2ljb24tcGlubmVkJykgfSkpLCBqc3goTWVudVRvZ2dsZSwgeyBwbGFjZW1lbnQ6IFwiYm90dG9tLWVuZFwiLCBUb2dnbGVCdXR0b246IFRvZ2dsZUJ1dHRvbiQyLCBjaGlsZHJlbjoganN4KFBhcnRpY2lwYW50Vmlld0NvbnRleHQuUHJvdmlkZXIsIHsgdmFsdWU6IHsgcGFydGljaXBhbnQsIHRyYWNrVHlwZTogJ25vbmUnIH0sIGNoaWxkcmVuOiBqc3goUGFydGljaXBhbnRBY3Rpb25zQ29udGV4dE1lbnUsIHt9KSB9KSB9KV0gfSldIH0pKTtcbn07XG5jb25zdCBNZWRpYUluZGljYXRvciA9IChwcm9wcykgPT4gKGpzeChXaXRoVG9vbHRpcCwgeyAuLi5wcm9wcyB9KSk7XG5jb25zdCBEZWZhdWx0RGlzcGxheU5hbWUgPSAoeyBwYXJ0aWNpcGFudCB9KSA9PiB7XG4gICAgY29uc3QgY29ubmVjdGVkVXNlciA9IHVzZUNvbm5lY3RlZFVzZXIoKTtcbiAgICBjb25zdCB7IHQgfSA9IHVzZUkxOG4oKTtcbiAgICBjb25zdCBtZUZsYWcgPSBwYXJ0aWNpcGFudC51c2VySWQgPT09IGNvbm5lY3RlZFVzZXI/LmlkID8gdCgnTWUnKSA6ICcnO1xuICAgIGNvbnN0IG5hbWVPcklkID0gcGFydGljaXBhbnQubmFtZSB8fCBwYXJ0aWNpcGFudC51c2VySWQgfHwgdCgnVW5rbm93bicpO1xuICAgIGxldCBkaXNwbGF5TmFtZTtcbiAgICBpZiAoIXBhcnRpY2lwYW50Lm5hbWUpIHtcbiAgICAgICAgZGlzcGxheU5hbWUgPSBtZUZsYWcgfHwgbmFtZU9ySWQgfHwgdCgnVW5rbm93bicpO1xuICAgIH1cbiAgICBlbHNlIGlmIChtZUZsYWcpIHtcbiAgICAgICAgZGlzcGxheU5hbWUgPSBgJHtuYW1lT3JJZH0gKCR7bWVGbGFnfSlgO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZGlzcGxheU5hbWUgPSBuYW1lT3JJZDtcbiAgICB9XG4gICAgcmV0dXJuIChqc3goV2l0aFRvb2x0aXAsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fcGFydGljaXBhbnQtbGlzdGluZy1pdGVtX19kaXNwbGF5LW5hbWVcIiwgdGl0bGU6IGRpc3BsYXlOYW1lLCBjaGlsZHJlbjogZGlzcGxheU5hbWUgfSkpO1xufTtcbmNvbnN0IFRvZ2dsZUJ1dHRvbiQyID0gZm9yd2FyZFJlZihmdW5jdGlvbiBUb2dnbGVCdXR0b24ocHJvcHMsIHJlZikge1xuICAgIHJldHVybiBqc3goSWNvbkJ1dHRvbiwgeyBlbmFibGVkOiBwcm9wcy5tZW51U2hvd24sIGljb246IFwiZWxsaXBzaXNcIiwgcmVmOiByZWYgfSk7XG59KTtcblxuY29uc3QgQ2FsbFBhcnRpY2lwYW50TGlzdGluZyA9ICh7IGRhdGEsIH0pID0+IChqc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19wYXJ0aWNpcGFudC1saXN0aW5nXCIsIGNoaWxkcmVuOiBkYXRhLm1hcCgocGFydGljaXBhbnQpID0+IChqc3goQ2FsbFBhcnRpY2lwYW50TGlzdGluZ0l0ZW0sIHsgcGFydGljaXBhbnQ6IHBhcnRpY2lwYW50IH0sIHBhcnRpY2lwYW50LnNlc3Npb25JZCkpKSB9KSk7XG5cbmNvbnN0IEVtcHR5UGFydGljaXBhbnRTZWFyY2hMaXN0ID0gKCkgPT4ge1xuICAgIGNvbnN0IHsgdCB9ID0gdXNlSTE4bigpO1xuICAgIHJldHVybiAoanN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fcGFydGljaXBhbnQtbGlzdC0tZW1wdHlcIiwgY2hpbGRyZW46IHQoJ05vIHBhcnRpY2lwYW50cyBmb3VuZCcpIH0pKTtcbn07XG5cbmNvbnN0IFNlYXJjaElucHV0ID0gKHsgZXhpdFNlYXJjaCwgaXNBY3RpdmUsIC4uLnJlc3QgfSkgPT4ge1xuICAgIGNvbnN0IFtpbnB1dEVsZW1lbnQsIHNldElucHV0RWxlbWVudF0gPSB1c2VTdGF0ZShudWxsKTtcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBpZiAoIWlucHV0RWxlbWVudClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3QgaGFuZGxlS2V5RG93biA9IChlKSA9PiB7XG4gICAgICAgICAgICBpZiAoZS5rZXkudG9Mb3dlckNhc2UoKSA9PT0gJ2VzY2FwZScpXG4gICAgICAgICAgICAgICAgZXhpdFNlYXJjaCgpO1xuICAgICAgICB9O1xuICAgICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUtleURvd24pO1xuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgaW5wdXRFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVLZXlEb3duKTtcbiAgICAgICAgfTtcbiAgICB9LCBbZXhpdFNlYXJjaCwgaW5wdXRFbGVtZW50XSk7XG4gICAgcmV0dXJuIChqc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBjbHN4KCdzdHItdmlkZW9fX3NlYXJjaC1pbnB1dF9fY29udGFpbmVyJywge1xuICAgICAgICAgICAgJ3N0ci12aWRlb19fc2VhcmNoLWlucHV0X19jb250YWluZXItLWFjdGl2ZSc6IGlzQWN0aXZlLFxuICAgICAgICB9KSwgY2hpbGRyZW46IFtqc3goXCJpbnB1dFwiLCB7IHBsYWNlaG9sZGVyOiBcIlNlYXJjaFwiLCAuLi5yZXN0LCByZWY6IHNldElucHV0RWxlbWVudCB9KSwgaXNBY3RpdmUgPyAoanN4KFwiYnV0dG9uXCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fc2VhcmNoLWlucHV0X19jbGVhci1idG5cIiwgb25DbGljazogZXhpdFNlYXJjaCwgY2hpbGRyZW46IGpzeChcInNwYW5cIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19zZWFyY2gtaW5wdXRfX2ljb24tLWFjdGl2ZVwiIH0pIH0pKSA6IChqc3goXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fc2VhcmNoLWlucHV0X19pY29uXCIgfSkpXSB9KSk7XG59O1xuXG5jb25zdCBTZWFyY2hSZXN1bHRzID0gKHsgRW1wdHlTZWFyY2hSZXN1bHRDb21wb25lbnQsIExvYWRpbmdJbmRpY2F0b3I6IExvYWRpbmdJbmRpY2F0b3IkMSA9IExvYWRpbmdJbmRpY2F0b3IsIHNlYXJjaFF1ZXJ5SW5Qcm9ncmVzcywgc2VhcmNoUmVzdWx0cywgU2VhcmNoUmVzdWx0TGlzdCwgfSkgPT4ge1xuICAgIGlmIChzZWFyY2hRdWVyeUluUHJvZ3Jlc3MpIHtcbiAgICAgICAgcmV0dXJuIChqc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19zZWFyY2gtcmVzdWx0cy0tbG9hZGluZ1wiLCBjaGlsZHJlbjoganN4KExvYWRpbmdJbmRpY2F0b3IkMSwge30pIH0pKTtcbiAgICB9XG4gICAgaWYgKCFzZWFyY2hSZXN1bHRzLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4ganN4KEVtcHR5U2VhcmNoUmVzdWx0Q29tcG9uZW50LCB7fSk7XG4gICAgfVxuICAgIHJldHVybiBqc3goU2VhcmNoUmVzdWx0TGlzdCwgeyBkYXRhOiBzZWFyY2hSZXN1bHRzIH0pO1xufTtcblxuY29uc3QgdXNlU2VhcmNoID0gKHsgZGVib3VuY2VJbnRlcnZhbCwgc2VhcmNoRm4sIHNlYXJjaFF1ZXJ5ID0gJycsIH0pID0+IHtcbiAgICBjb25zdCBbc2VhcmNoUmVzdWx0cywgc2V0U2VhcmNoUmVzdWx0c10gPSB1c2VTdGF0ZShbXSk7XG4gICAgY29uc3QgW3NlYXJjaFF1ZXJ5SW5Qcm9ncmVzcywgc2V0U2VhcmNoUXVlcnlJblByb2dyZXNzXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBpZiAoIXNlYXJjaFF1ZXJ5Lmxlbmd0aCkge1xuICAgICAgICAgICAgc2V0U2VhcmNoUXVlcnlJblByb2dyZXNzKGZhbHNlKTtcbiAgICAgICAgICAgIHNldFNlYXJjaFJlc3VsdHMoW10pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHNldFNlYXJjaFF1ZXJ5SW5Qcm9ncmVzcyh0cnVlKTtcbiAgICAgICAgY29uc3QgdGltZW91dCA9IHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgc2VhcmNoRm4oc2VhcmNoUXVlcnkpO1xuICAgICAgICAgICAgICAgIHNldFNlYXJjaFJlc3VsdHMocmVzdWx0cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIHNldFNlYXJjaFF1ZXJ5SW5Qcm9ncmVzcyhmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGRlYm91bmNlSW50ZXJ2YWwpO1xuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgICB9O1xuICAgIH0sIFtkZWJvdW5jZUludGVydmFsLCBzZWFyY2hGbiwgc2VhcmNoUXVlcnldKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBzZWFyY2hRdWVyeUluUHJvZ3Jlc3MsXG4gICAgICAgIHNlYXJjaFJlc3VsdHMsXG4gICAgfTtcbn07XG5cbmNvbnN0IFVzZXJMaXN0VHlwZXMgPSB7XG4gICAgYWN0aXZlOiAnQWN0aXZlIHVzZXJzJyxcbiAgICBibG9ja2VkOiAnQmxvY2tlZCB1c2VycycsXG59O1xuY29uc3QgREVGQVVMVF9ERUJPVU5DRV9TRUFSQ0hfSU5URVJWQUwgPSAyMDA7XG5jb25zdCBDYWxsUGFydGljaXBhbnRzTGlzdCA9ICh7IG9uQ2xvc2UsIGFjdGl2ZVVzZXJzU2VhcmNoRm4sIGJsb2NrZWRVc2Vyc1NlYXJjaEZuLCBkZWJvdW5jZVNlYXJjaEludGVydmFsLCB9KSA9PiB7XG4gICAgY29uc3QgW3NlYXJjaFF1ZXJ5LCBzZXRTZWFyY2hRdWVyeV0gPSB1c2VTdGF0ZSgnJyk7XG4gICAgY29uc3QgW3VzZXJMaXN0VHlwZSwgc2V0VXNlckxpc3RUeXBlXSA9IHVzZVN0YXRlKCdhY3RpdmUnKTtcbiAgICBjb25zdCBleGl0U2VhcmNoID0gdXNlQ2FsbGJhY2soKCkgPT4gc2V0U2VhcmNoUXVlcnkoJycpLCBbXSk7XG4gICAgcmV0dXJuIChqc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fcGFydGljaXBhbnQtbGlzdFwiLCBjaGlsZHJlbjogW2pzeChDYWxsUGFydGljaXBhbnRMaXN0SGVhZGVyLCB7IG9uQ2xvc2U6IG9uQ2xvc2UgfSksIGpzeChTZWFyY2hJbnB1dCwgeyB2YWx1ZTogc2VhcmNoUXVlcnksIG9uQ2hhbmdlOiAoeyBjdXJyZW50VGFyZ2V0IH0pID0+IHNldFNlYXJjaFF1ZXJ5KGN1cnJlbnRUYXJnZXQudmFsdWUpLCBleGl0U2VhcmNoOiBleGl0U2VhcmNoLCBpc0FjdGl2ZTogISFzZWFyY2hRdWVyeSB9KSwganN4KENhbGxQYXJ0aWNpcGFudExpc3RDb250ZW50SGVhZGVyLCB7IHVzZXJMaXN0VHlwZTogdXNlckxpc3RUeXBlLCBzZXRVc2VyTGlzdFR5cGU6IHNldFVzZXJMaXN0VHlwZSB9KSwganN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX3BhcnRpY2lwYW50LWxpc3RfX2NvbnRlbnRcIiwgY2hpbGRyZW46IFt1c2VyTGlzdFR5cGUgPT09ICdhY3RpdmUnICYmIChqc3goQWN0aXZlVXNlcnNTZWFyY2hSZXN1bHRzLCB7IHNlYXJjaFF1ZXJ5OiBzZWFyY2hRdWVyeSwgYWN0aXZlVXNlcnNTZWFyY2hGbjogYWN0aXZlVXNlcnNTZWFyY2hGbiwgZGVib3VuY2VTZWFyY2hJbnRlcnZhbDogZGVib3VuY2VTZWFyY2hJbnRlcnZhbCB9KSksIHVzZXJMaXN0VHlwZSA9PT0gJ2Jsb2NrZWQnICYmIChqc3goQmxvY2tlZFVzZXJzU2VhcmNoUmVzdWx0cywgeyBzZWFyY2hRdWVyeTogc2VhcmNoUXVlcnksIGJsb2NrZWRVc2Vyc1NlYXJjaEZuOiBibG9ja2VkVXNlcnNTZWFyY2hGbiwgZGVib3VuY2VTZWFyY2hJbnRlcnZhbDogZGVib3VuY2VTZWFyY2hJbnRlcnZhbCB9KSldIH0pXSB9KSk7XG59O1xuY29uc3QgQ2FsbFBhcnRpY2lwYW50TGlzdENvbnRlbnRIZWFkZXIgPSAoeyB1c2VyTGlzdFR5cGUsIHNldFVzZXJMaXN0VHlwZSwgfSkgPT4ge1xuICAgIGNvbnN0IGNhbGwgPSB1c2VDYWxsKCk7XG4gICAgY29uc3QgbXV0ZUFsbCA9ICgpID0+IHtcbiAgICAgICAgY2FsbD8ubXV0ZUFsbFVzZXJzKCdhdWRpbycpO1xuICAgIH07XG4gICAgcmV0dXJuIChqc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fcGFydGljaXBhbnQtbGlzdF9fY29udGVudC1oZWFkZXJcIiwgY2hpbGRyZW46IFtqc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19wYXJ0aWNpcGFudC1saXN0X19jb250ZW50LWhlYWRlci10aXRsZVwiLCBjaGlsZHJlbjogdXNlckxpc3RUeXBlID09PSAnYWN0aXZlJyAmJiAoanN4KFJlc3RyaWN0ZWQsIHsgcmVxdWlyZWRHcmFudHM6IFtPd25DYXBhYmlsaXR5Lk1VVEVfVVNFUlNdLCBoYXNQZXJtaXNzaW9uc09ubHk6IHRydWUsIGNoaWxkcmVuOiBqc3goVGV4dEJ1dHRvbiwgeyBvbkNsaWNrOiBtdXRlQWxsLCBjaGlsZHJlbjogXCJNdXRlIGFsbFwiIH0pIH0pKSB9KSwganN4KE1lbnVUb2dnbGUsIHsgcGxhY2VtZW50OiBcImJvdHRvbS1lbmRcIiwgVG9nZ2xlQnV0dG9uOiBUb2dnbGVCdXR0b24kMSwgY2hpbGRyZW46IGpzeChHZW5lcmljTWVudSwgeyBjaGlsZHJlbjogT2JqZWN0LmtleXMoVXNlckxpc3RUeXBlcykubWFwKChsdCkgPT4gKGpzeChHZW5lcmljTWVudUJ1dHRvbkl0ZW0sIHsgXCJhcmlhLXNlbGVjdGVkXCI6IGx0ID09PSB1c2VyTGlzdFR5cGUsIG9uQ2xpY2s6ICgpID0+IHNldFVzZXJMaXN0VHlwZShsdCksIGNoaWxkcmVuOiBVc2VyTGlzdFR5cGVzW2x0XSB9LCBsdCkpKSB9KSB9KV0gfSkpO1xufTtcbmNvbnN0IEFjdGl2ZVVzZXJzU2VhcmNoUmVzdWx0cyA9ICh7IHNlYXJjaFF1ZXJ5LCBhY3RpdmVVc2Vyc1NlYXJjaEZuOiBhY3RpdmVVc2Vyc1NlYXJjaEZuRnJvbVByb3BzLCBkZWJvdW5jZVNlYXJjaEludGVydmFsID0gREVGQVVMVF9ERUJPVU5DRV9TRUFSQ0hfSU5URVJWQUwsIH0pID0+IHtcbiAgICBjb25zdCB7IHVzZVBhcnRpY2lwYW50cyB9ID0gdXNlQ2FsbFN0YXRlSG9va3MoKTtcbiAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSB1c2VQYXJ0aWNpcGFudHMoeyBzb3J0Qnk6IG5hbWUgfSk7XG4gICAgY29uc3QgYWN0aXZlVXNlcnNTZWFyY2hGbiA9IHVzZUNhbGxiYWNrKChxdWVyeVN0cmluZykgPT4ge1xuICAgICAgICBjb25zdCBxdWVyeVJlZ0V4cCA9IG5ldyBSZWdFeHAocXVlcnlTdHJpbmcsICdpJyk7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocGFydGljaXBhbnRzLmZpbHRlcigocGFydGljaXBhbnQpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBwYXJ0aWNpcGFudC5uYW1lLm1hdGNoKHF1ZXJ5UmVnRXhwKTtcbiAgICAgICAgfSkpO1xuICAgIH0sIFtwYXJ0aWNpcGFudHNdKTtcbiAgICBjb25zdCB7IHNlYXJjaFF1ZXJ5SW5Qcm9ncmVzcywgc2VhcmNoUmVzdWx0cyB9ID0gdXNlU2VhcmNoKHtcbiAgICAgICAgc2VhcmNoRm46IGFjdGl2ZVVzZXJzU2VhcmNoRm5Gcm9tUHJvcHMgPz8gYWN0aXZlVXNlcnNTZWFyY2hGbixcbiAgICAgICAgZGVib3VuY2VJbnRlcnZhbDogZGVib3VuY2VTZWFyY2hJbnRlcnZhbCxcbiAgICAgICAgc2VhcmNoUXVlcnksXG4gICAgfSk7XG4gICAgcmV0dXJuIChqc3goU2VhcmNoUmVzdWx0cywgeyBFbXB0eVNlYXJjaFJlc3VsdENvbXBvbmVudDogRW1wdHlQYXJ0aWNpcGFudFNlYXJjaExpc3QsIExvYWRpbmdJbmRpY2F0b3I6IExvYWRpbmdJbmRpY2F0b3IsIHNlYXJjaFF1ZXJ5SW5Qcm9ncmVzczogc2VhcmNoUXVlcnlJblByb2dyZXNzLCBzZWFyY2hSZXN1bHRzOiBzZWFyY2hRdWVyeSA/IHNlYXJjaFJlc3VsdHMgOiBwYXJ0aWNpcGFudHMsIFNlYXJjaFJlc3VsdExpc3Q6IENhbGxQYXJ0aWNpcGFudExpc3RpbmcgfSkpO1xufTtcbmNvbnN0IEJsb2NrZWRVc2Vyc1NlYXJjaFJlc3VsdHMgPSAoeyBibG9ja2VkVXNlcnNTZWFyY2hGbjogYmxvY2tlZFVzZXJzU2VhcmNoRm5Gcm9tUHJvcHMsIGRlYm91bmNlU2VhcmNoSW50ZXJ2YWwgPSBERUZBVUxUX0RFQk9VTkNFX1NFQVJDSF9JTlRFUlZBTCwgc2VhcmNoUXVlcnksIH0pID0+IHtcbiAgICBjb25zdCB7IHVzZUNhbGxCbG9ja2VkVXNlcklkcyB9ID0gdXNlQ2FsbFN0YXRlSG9va3MoKTtcbiAgICBjb25zdCBibG9ja2VkVXNlcnMgPSB1c2VDYWxsQmxvY2tlZFVzZXJJZHMoKTtcbiAgICBjb25zdCBibG9ja2VkVXNlcnNTZWFyY2hGbiA9IHVzZUNhbGxiYWNrKChxdWVyeVN0cmluZykgPT4ge1xuICAgICAgICBjb25zdCBxdWVyeVJlZ0V4cCA9IG5ldyBSZWdFeHAocXVlcnlTdHJpbmcsICdpJyk7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoYmxvY2tlZFVzZXJzLmZpbHRlcigoYmxvY2tlZFVzZXIpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBibG9ja2VkVXNlci5tYXRjaChxdWVyeVJlZ0V4cCk7XG4gICAgICAgIH0pKTtcbiAgICB9LCBbYmxvY2tlZFVzZXJzXSk7XG4gICAgY29uc3QgeyBzZWFyY2hRdWVyeUluUHJvZ3Jlc3MsIHNlYXJjaFJlc3VsdHMgfSA9IHVzZVNlYXJjaCh7XG4gICAgICAgIHNlYXJjaEZuOiBibG9ja2VkVXNlcnNTZWFyY2hGbkZyb21Qcm9wcyA/PyBibG9ja2VkVXNlcnNTZWFyY2hGbixcbiAgICAgICAgZGVib3VuY2VJbnRlcnZhbDogZGVib3VuY2VTZWFyY2hJbnRlcnZhbCxcbiAgICAgICAgc2VhcmNoUXVlcnksXG4gICAgfSk7XG4gICAgcmV0dXJuIChqc3goU2VhcmNoUmVzdWx0cywgeyBFbXB0eVNlYXJjaFJlc3VsdENvbXBvbmVudDogRW1wdHlQYXJ0aWNpcGFudFNlYXJjaExpc3QsIExvYWRpbmdJbmRpY2F0b3I6IExvYWRpbmdJbmRpY2F0b3IsIHNlYXJjaFF1ZXJ5SW5Qcm9ncmVzczogc2VhcmNoUXVlcnlJblByb2dyZXNzLCBzZWFyY2hSZXN1bHRzOiBzZWFyY2hRdWVyeSA/IHNlYXJjaFJlc3VsdHMgOiBibG9ja2VkVXNlcnMsIFNlYXJjaFJlc3VsdExpc3Q6IEJsb2NrZWRVc2VyTGlzdGluZyB9KSk7XG59O1xuY29uc3QgVG9nZ2xlQnV0dG9uJDEgPSBmb3J3YXJkUmVmKGZ1bmN0aW9uIFRvZ2dsZUJ1dHRvbihwcm9wcywgcmVmKSB7XG4gICAgcmV0dXJuIGpzeChJY29uQnV0dG9uLCB7IGVuYWJsZWQ6IHByb3BzLm1lbnVTaG93biwgaWNvbjogXCJmaWx0ZXJcIiwgcmVmOiByZWYgfSk7XG59KTtcblxuY29uc3QgQ2FsbFByZXZpZXcgPSAocHJvcHMpID0+IHtcbiAgICBjb25zdCB7IGNsYXNzTmFtZSwgc3R5bGUgfSA9IHByb3BzO1xuICAgIGNvbnN0IGNhbGwgPSB1c2VDYWxsKCk7XG4gICAgY29uc3QgeyB1c2VDYWxsVGh1bWJuYWlsIH0gPSB1c2VDYWxsU3RhdGVIb29rcygpO1xuICAgIGNvbnN0IHRodW1ibmFpbCA9IHVzZUNhbGxUaHVtYm5haWwoKTtcbiAgICBjb25zdCBbaW1hZ2VSZWYsIHNldEltYWdlUmVmXSA9IHVzZVN0YXRlKG51bGwpO1xuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmICghaW1hZ2VSZWYgfHwgIWNhbGwpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IGNsZWFudXAgPSBjYWxsLmJpbmRDYWxsVGh1bWJuYWlsRWxlbWVudChpbWFnZVJlZik7XG4gICAgICAgIHJldHVybiAoKSA9PiBjbGVhbnVwKCk7XG4gICAgfSwgW2ltYWdlUmVmLCBjYWxsXSk7XG4gICAgaWYgKCF0aHVtYm5haWwpXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIHJldHVybiAoanN4KFwiaW1nXCIsIHsgY2xhc3NOYW1lOiBjbHN4KCdzdHItdmlkZW9fX2NhbGwtcHJldmlldycsIGNsYXNzTmFtZSksIHN0eWxlOiBzdHlsZSwgYWx0OiBcIkNhbGwgUHJldmlldyBUaHVtYm5haWxcIiwgcmVmOiBzZXRJbWFnZVJlZiB9KSk7XG59O1xuXG5jb25zdCBDYWxsUmVjb3JkaW5nTGlzdEhlYWRlciA9ICh7IGNhbGxSZWNvcmRpbmdzLCBvblJlZnJlc2gsIH0pID0+IHtcbiAgICBjb25zdCB7IHQgfSA9IHVzZUkxOG4oKTtcbiAgICByZXR1cm4gKGpzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19jYWxsLXJlY29yZGluZy1saXN0X19oZWFkZXJcIiwgY2hpbGRyZW46IFtqc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fY2FsbC1yZWNvcmRpbmctbGlzdF9fdGl0bGVcIiwgY2hpbGRyZW46IFtqc3goXCJzcGFuXCIsIHsgY2hpbGRyZW46IHQoJ0NhbGwgUmVjb3JkaW5ncycpIH0pLCBjYWxsUmVjb3JkaW5ncy5sZW5ndGggPyBqc3hzKFwic3BhblwiLCB7IGNoaWxkcmVuOiBbXCIoXCIsIGNhbGxSZWNvcmRpbmdzLmxlbmd0aCwgXCIpXCJdIH0pIDogbnVsbF0gfSksIG9uUmVmcmVzaCAmJiAoanN4KEljb25CdXR0b24sIHsgaWNvbjogXCJyZWZyZXNoXCIsIHRpdGxlOiB0KCdSZWZyZXNoJyksIG9uQ2xpY2s6IG9uUmVmcmVzaCB9KSldIH0pKTtcbn07XG5cbmNvbnN0IGRhdGVGb3JtYXQgPSAoZGF0ZSkgPT4ge1xuICAgIGNvbnN0IGZvcm1hdCA9IG5ldyBEYXRlKGRhdGUpO1xuICAgIHJldHVybiBmb3JtYXQudG9UaW1lU3RyaW5nKCkuc3BsaXQoJyAnKVswXTtcbn07XG5jb25zdCBDYWxsUmVjb3JkaW5nTGlzdEl0ZW0gPSAoeyByZWNvcmRpbmcsIH0pID0+IHtcbiAgICByZXR1cm4gKGpzeHMoXCJsaVwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX2NhbGwtcmVjb3JkaW5nLWxpc3RfX2l0ZW1cIiwgY2hpbGRyZW46IFtqc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19jYWxsLXJlY29yZGluZy1saXN0X190YWJsZS1jZWxsIHN0ci12aWRlb19fY2FsbC1yZWNvcmRpbmctbGlzdF9fZmlsZW5hbWVcIiwgY2hpbGRyZW46IHJlY29yZGluZy5maWxlbmFtZSB9KSwganN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fY2FsbC1yZWNvcmRpbmctbGlzdF9fdGFibGUtY2VsbCBzdHItdmlkZW9fX2NhbGwtcmVjb3JkaW5nLWxpc3RfX3RpbWVcIiwgY2hpbGRyZW46IGRhdGVGb3JtYXQocmVjb3JkaW5nLnN0YXJ0X3RpbWUpIH0pLCBqc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19jYWxsLXJlY29yZGluZy1saXN0X190YWJsZS1jZWxsIHN0ci12aWRlb19fY2FsbC1yZWNvcmRpbmctbGlzdF9fdGltZVwiLCBjaGlsZHJlbjogZGF0ZUZvcm1hdChyZWNvcmRpbmcuZW5kX3RpbWUpIH0pLCBqc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19jYWxsLXJlY29yZGluZy1saXN0X190YWJsZS1jZWxsIHN0ci12aWRlb19fY2FsbC1yZWNvcmRpbmctbGlzdF9fZG93bmxvYWRcIiwgY2hpbGRyZW46IGpzeChcImFcIiwgeyBjbGFzc05hbWU6IGNsc3goJ3N0ci12aWRlb19fY2FsbC1yZWNvcmRpbmctbGlzdC1pdGVtX19hY3Rpb24tYnV0dG9uJywgJ3N0ci12aWRlb19fY2FsbC1yZWNvcmRpbmctbGlzdC1pdGVtX19hY3Rpb24tYnV0dG9uLS1kb3dubG9hZCcpLCByb2xlOiBcImJ1dHRvblwiLCBocmVmOiByZWNvcmRpbmcudXJsLCBkb3dubG9hZDogcmVjb3JkaW5nLmZpbGVuYW1lLCB0aXRsZTogXCJEb3dubG9hZCB0aGUgcmVjb3JkaW5nXCIsIGNoaWxkcmVuOiBqc3goSWNvbiwgeyBpY29uOiBcImRvd25sb2FkXCIgfSkgfSkgfSldIH0pKTtcbn07XG5cbmNvbnN0IEVtcHR5Q2FsbFJlY29yZGluZ0xpc3RpbmcgPSAoKSA9PiB7XG4gICAgcmV0dXJuIChqc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fY2FsbC1yZWNvcmRpbmctbGlzdF9fbGlzdGluZyBzdHItdmlkZW9fX2NhbGwtcmVjb3JkaW5nLWxpc3RfX2xpc3RpbmctLWVtcHR5XCIsIGNoaWxkcmVuOiBbanN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fY2FsbC1yZWNvcmRpbmctbGlzdF9fbGlzdGluZy0taWNvbi1lbXB0eVwiIH0pLCBqc3goXCJwXCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fY2FsbC1yZWNvcmRpbmctbGlzdF9fbGlzdGluZy0tdGV4dC1lbXB0eVwiLCBjaGlsZHJlbjogXCJObyByZWNvcmRpbmdzIGF2YWlsYWJsZVwiIH0pXSB9KSk7XG59O1xuXG5jb25zdCBMb2FkaW5nQ2FsbFJlY29yZGluZ0xpc3RpbmcgPSAoeyBjYWxsUmVjb3JkaW5ncywgfSkgPT4ge1xuICAgIHJldHVybiAoanN4cyhGcmFnbWVudCwgeyBjaGlsZHJlbjogW2NhbGxSZWNvcmRpbmdzLm1hcCgocmVjb3JkaW5nKSA9PiAoanN4KENhbGxSZWNvcmRpbmdMaXN0SXRlbSwgeyByZWNvcmRpbmc6IHJlY29yZGluZyB9LCByZWNvcmRpbmcuZmlsZW5hbWUpKSksIGpzeChMb2FkaW5nSW5kaWNhdG9yLCB7IHRleHQ6IFwiUmVjb3JkaW5nIGdldHRpbmcgcmVhZHlcIiB9KV0gfSkpO1xufTtcblxuY29uc3QgQ2FsbFJlY29yZGluZ0xpc3QgPSAoeyBjYWxsUmVjb3JkaW5ncywgQ2FsbFJlY29yZGluZ0xpc3RIZWFkZXI6IENhbGxSZWNvcmRpbmdMaXN0SGVhZGVyJDEgPSBDYWxsUmVjb3JkaW5nTGlzdEhlYWRlciwgQ2FsbFJlY29yZGluZ0xpc3RJdGVtOiBDYWxsUmVjb3JkaW5nTGlzdEl0ZW0kMSA9IENhbGxSZWNvcmRpbmdMaXN0SXRlbSwgRW1wdHlDYWxsUmVjb3JkaW5nTGlzdCA9IEVtcHR5Q2FsbFJlY29yZGluZ0xpc3RpbmcsIGxvYWRpbmcsIExvYWRpbmdDYWxsUmVjb3JkaW5nTGlzdCA9IExvYWRpbmdDYWxsUmVjb3JkaW5nTGlzdGluZywgb25SZWZyZXNoLCB9KSA9PiB7XG4gICAgcmV0dXJuIChqc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fY2FsbC1yZWNvcmRpbmctbGlzdFwiLCBjaGlsZHJlbjogW2pzeChDYWxsUmVjb3JkaW5nTGlzdEhlYWRlciQxLCB7IGNhbGxSZWNvcmRpbmdzOiBjYWxsUmVjb3JkaW5ncywgb25SZWZyZXNoOiBvblJlZnJlc2ggfSksIGpzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX2NhbGwtcmVjb3JkaW5nLWxpc3RfX2xpc3RpbmdcIiwgY2hpbGRyZW46IGxvYWRpbmcgPyAoanN4KExvYWRpbmdDYWxsUmVjb3JkaW5nTGlzdCwgeyBjYWxsUmVjb3JkaW5nczogY2FsbFJlY29yZGluZ3MgfSkpIDogY2FsbFJlY29yZGluZ3MubGVuZ3RoID8gKGpzeHMoRnJhZ21lbnQsIHsgY2hpbGRyZW46IFtqc3goXCJ1bFwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX2NhbGwtcmVjb3JkaW5nLWxpc3RfX2xpc3RcIiwgY2hpbGRyZW46IGpzeHMoXCJsaVwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX2NhbGwtcmVjb3JkaW5nLWxpc3RfX2l0ZW1cIiwgY2hpbGRyZW46IFtqc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19jYWxsLXJlY29yZGluZy1saXN0X19maWxlbmFtZVwiLCBjaGlsZHJlbjogXCJOYW1lXCIgfSksIGpzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX2NhbGwtcmVjb3JkaW5nLWxpc3RfX3RpbWVcIiwgY2hpbGRyZW46IFwiU3RhcnQgdGltZVwiIH0pLCBqc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19jYWxsLXJlY29yZGluZy1saXN0X190aW1lXCIsIGNoaWxkcmVuOiBcIkVuZCB0aW1lXCIgfSksIGpzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX2NhbGwtcmVjb3JkaW5nLWxpc3RfX2Rvd25sb2FkXCIgfSldIH0pIH0pLCBqc3goXCJ1bFwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX2NhbGwtcmVjb3JkaW5nLWxpc3RfX2xpc3RcIiwgY2hpbGRyZW46IGNhbGxSZWNvcmRpbmdzLm1hcCgocmVjb3JkaW5nKSA9PiAoanN4KENhbGxSZWNvcmRpbmdMaXN0SXRlbSQxLCB7IHJlY29yZGluZzogcmVjb3JkaW5nIH0sIHJlY29yZGluZy5maWxlbmFtZSkpKSB9KV0gfSkpIDogKGpzeChFbXB0eUNhbGxSZWNvcmRpbmdMaXN0LCB7fSkpIH0pXSB9KSk7XG59O1xuXG5jb25zdCBSaW5naW5nQ2FsbENvbnRyb2xzID0gKCkgPT4ge1xuICAgIGNvbnN0IGNhbGwgPSB1c2VDYWxsKCk7XG4gICAgY29uc3QgeyB1c2VDYWxsQ2FsbGluZ1N0YXRlIH0gPSB1c2VDYWxsU3RhdGVIb29rcygpO1xuICAgIGNvbnN0IGNhbGxDYWxsaW5nU3RhdGUgPSB1c2VDYWxsQ2FsbGluZ1N0YXRlKCk7XG4gICAgaWYgKCFjYWxsKVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICBjb25zdCBidXR0b25zRGlzYWJsZWQgPSBjYWxsQ2FsbGluZ1N0YXRlICE9PSBDYWxsaW5nU3RhdGUuUklOR0lORztcbiAgICByZXR1cm4gKGpzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX3BlbmRpbmctY2FsbC1jb250cm9sc1wiLCBjaGlsZHJlbjogY2FsbC5pc0NyZWF0ZWRCeU1lID8gKGpzeChDYW5jZWxDYWxsQnV0dG9uLCB7IGRpc2FibGVkOiBidXR0b25zRGlzYWJsZWQgfSkpIDogKGpzeHMoRnJhZ21lbnQsIHsgY2hpbGRyZW46IFtqc3goQWNjZXB0Q2FsbEJ1dHRvbiwgeyBkaXNhYmxlZDogYnV0dG9uc0Rpc2FibGVkIH0pLCBqc3goQ2FuY2VsQ2FsbEJ1dHRvbiwgeyBvbkNsaWNrOiAoKSA9PiBjYWxsLmxlYXZlKHsgcmVqZWN0OiB0cnVlIH0pLCBkaXNhYmxlZDogYnV0dG9uc0Rpc2FibGVkIH0pXSB9KSkgfSkpO1xufTtcblxuY29uc3QgQ0FMTElOR19TVEFURV9UT19MQUJFTCA9IHtcbiAgICBbQ2FsbGluZ1N0YXRlLkpPSU5JTkddOiAnSm9pbmluZycsXG4gICAgW0NhbGxpbmdTdGF0ZS5SSU5HSU5HXTogJ1JpbmdpbmcnLFxuICAgIFtDYWxsaW5nU3RhdGUuTUlHUkFUSU5HXTogJ01pZ3JhdGluZycsXG4gICAgW0NhbGxpbmdTdGF0ZS5SRUNPTk5FQ1RJTkddOiAnUmUtY29ubmVjdGluZycsXG4gICAgW0NhbGxpbmdTdGF0ZS5SRUNPTk5FQ1RJTkdfRkFJTEVEXTogJ0ZhaWxlZCcsXG4gICAgW0NhbGxpbmdTdGF0ZS5PRkZMSU5FXTogJ05vIGludGVybmV0IGNvbm5lY3Rpb24nLFxuICAgIFtDYWxsaW5nU3RhdGUuSURMRV06ICcnLFxuICAgIFtDYWxsaW5nU3RhdGUuVU5LTk9XTl06ICcnLFxuICAgIFtDYWxsaW5nU3RhdGUuSk9JTkVEXTogJ0pvaW5lZCcsXG4gICAgW0NhbGxpbmdTdGF0ZS5MRUZUXTogJ0xlZnQgY2FsbCcsXG59O1xuY29uc3QgUmluZ2luZ0NhbGwgPSAocHJvcHMpID0+IHtcbiAgICBjb25zdCB7IGluY2x1ZGVTZWxmID0gZmFsc2UsIHRvdGFsTWVtYmVyc1RvU2hvdyA9IDMgfSA9IHByb3BzO1xuICAgIGNvbnN0IGNhbGwgPSB1c2VDYWxsKCk7XG4gICAgY29uc3QgeyB0IH0gPSB1c2VJMThuKCk7XG4gICAgY29uc3QgeyB1c2VDYWxsQ2FsbGluZ1N0YXRlLCB1c2VDYWxsTWVtYmVycyB9ID0gdXNlQ2FsbFN0YXRlSG9va3MoKTtcbiAgICBjb25zdCBjYWxsaW5nU3RhdGUgPSB1c2VDYWxsQ2FsbGluZ1N0YXRlKCk7XG4gICAgY29uc3QgbWVtYmVycyA9IHVzZUNhbGxNZW1iZXJzKCk7XG4gICAgY29uc3QgY29ubmVjdGVkVXNlciA9IHVzZUNvbm5lY3RlZFVzZXIoKTtcbiAgICBpZiAoIWNhbGwpXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIC8vIHRha2UgdGhlIGZpcnN0IE4gbWVtYmVycyB0byBzaG93IHRoZWlyIGF2YXRhcnNcbiAgICBjb25zdCBtZW1iZXJzVG9TaG93ID0gKG1lbWJlcnMgfHwgW10pXG4gICAgICAgIC5zbGljZSgwLCB0b3RhbE1lbWJlcnNUb1Nob3cpXG4gICAgICAgIC5tYXAoKHsgdXNlciB9KSA9PiB1c2VyKVxuICAgICAgICAuZmlsdGVyKCh1c2VyKSA9PiB1c2VyLmlkICE9PSBjb25uZWN0ZWRVc2VyPy5pZCB8fCBpbmNsdWRlU2VsZik7XG4gICAgaWYgKGluY2x1ZGVTZWxmICYmXG4gICAgICAgICFtZW1iZXJzVG9TaG93LmZpbmQoKHVzZXIpID0+IHVzZXIuaWQgPT09IGNvbm5lY3RlZFVzZXI/LmlkKSkge1xuICAgICAgICAvLyBpZiB0aGUgY3VycmVudCB1c2VyIGlzIG5vdCBpbiB0aGUgaW5pdGlhbCBiYXRjaCBvZiBtZW1iZXJzLFxuICAgICAgICAvLyByZXBsYWNlIHRoZSBmaXJzdCBpdGVtIGluIG1lbWJlcnNUb1Nob3cgYXJyYXkgd2l0aCB0aGUgY3VycmVudCB1c2VyXG4gICAgICAgIGNvbnN0IHNlbGYgPSBtZW1iZXJzLmZpbmQoKHsgdXNlciB9KSA9PiB1c2VyLmlkID09PSBjb25uZWN0ZWRVc2VyPy5pZCk7XG4gICAgICAgIGlmIChzZWxmKSB7XG4gICAgICAgICAgICBtZW1iZXJzVG9TaG93LnNwbGljZSgwLCAxLCBzZWxmLnVzZXIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGNhbGxpbmdTdGF0ZUxhYmVsID0gQ0FMTElOR19TVEFURV9UT19MQUJFTFtjYWxsaW5nU3RhdGVdO1xuICAgIHJldHVybiAoanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX2NhbGwtcGFuZWwgc3RyLXZpZGVvX19jYWxsLXBhbmVsLS1yaW5naW5nXCIsIGNoaWxkcmVuOiBbanN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fY2FsbC1wYW5lbF9fbWVtYmVycy1saXN0XCIsIGNoaWxkcmVuOiBtZW1iZXJzVG9TaG93Lm1hcCgodXNlcikgPT4gKGpzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19jYWxsLXBhbmVsX19tZW1iZXItYm94XCIsIGNoaWxkcmVuOiBbanN4KEF2YXRhciwgeyBuYW1lOiB1c2VyLm5hbWUsIGltYWdlU3JjOiB1c2VyLmltYWdlIH0pLCB1c2VyLm5hbWUgJiYgKGpzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX21lbWJlcl9kZXRhaWxzXCIsIGNoaWxkcmVuOiBqc3goXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fbWVtYmVyX25hbWVcIiwgY2hpbGRyZW46IHVzZXIubmFtZSB9KSB9KSldIH0sIHVzZXIuaWQpKSkgfSksIGNhbGxpbmdTdGF0ZUxhYmVsICYmIChqc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19jYWxsLXBhbmVsX19jYWxsaW5nLXN0YXRlLWxhYmVsXCIsIGNoaWxkcmVuOiB0KGNhbGxpbmdTdGF0ZUxhYmVsKSB9KSksIFtDYWxsaW5nU3RhdGUuUklOR0lORywgQ2FsbGluZ1N0YXRlLkpPSU5JTkddLmluY2x1ZGVzKGNhbGxpbmdTdGF0ZSkgJiYgKGpzeChSaW5naW5nQ2FsbENvbnRyb2xzLCB7fSkpXSB9KSk7XG59O1xuXG5jb25zdCBieU5hbWVPcklkID0gKGEsIGIpID0+IHtcbiAgICBpZiAoYS5uYW1lICYmIGIubmFtZSAmJiBhLm5hbWUgPCBiLm5hbWUpXG4gICAgICAgIHJldHVybiAtMTtcbiAgICBpZiAoYS5uYW1lICYmIGIubmFtZSAmJiBhLm5hbWUgPiBiLm5hbWUpXG4gICAgICAgIHJldHVybiAxO1xuICAgIGlmIChhLmlkIDwgYi5pZClcbiAgICAgICAgcmV0dXJuIC0xO1xuICAgIGlmIChhLmlkID4gYi5pZClcbiAgICAgICAgcmV0dXJuIDE7XG4gICAgcmV0dXJuIDA7XG59O1xuY29uc3QgUGVybWlzc2lvblJlcXVlc3RzID0gKCkgPT4ge1xuICAgIGNvbnN0IGNhbGwgPSB1c2VDYWxsKCk7XG4gICAgY29uc3QgeyB1c2VMb2NhbFBhcnRpY2lwYW50LCB1c2VIYXNQZXJtaXNzaW9ucyB9ID0gdXNlQ2FsbFN0YXRlSG9va3MoKTtcbiAgICBjb25zdCBsb2NhbFBhcnRpY2lwYW50ID0gdXNlTG9jYWxQYXJ0aWNpcGFudCgpO1xuICAgIGNvbnN0IFtleHBhbmRlZCwgc2V0RXhwYW5kZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICAgIGNvbnN0IFtwZXJtaXNzaW9uUmVxdWVzdHMsIHNldFBlcm1pc3Npb25SZXF1ZXN0c10gPSB1c2VTdGF0ZShbXSk7XG4gICAgY29uc3QgY2FuVXBkYXRlQ2FsbFBlcm1pc3Npb25zID0gdXNlSGFzUGVybWlzc2lvbnMoT3duQ2FwYWJpbGl0eS5VUERBVEVfQ0FMTF9QRVJNSVNTSU9OUyk7XG4gICAgY29uc3QgbG9jYWxVc2VySWQgPSBsb2NhbFBhcnRpY2lwYW50Py51c2VySWQ7XG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKCFjYWxsIHx8ICFjYW5VcGRhdGVDYWxsUGVybWlzc2lvbnMpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHJldHVybiBjYWxsLm9uKCdjYWxsLnBlcm1pc3Npb25fcmVxdWVzdCcsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKGV2ZW50LnVzZXIuaWQgIT09IGxvY2FsVXNlcklkKSB7XG4gICAgICAgICAgICAgICAgc2V0UGVybWlzc2lvblJlcXVlc3RzKChyZXF1ZXN0cykgPT4gWy4uLnJlcXVlc3RzLCBldmVudF0uc29ydCgoYSwgYikgPT4gYnlOYW1lT3JJZChhLnVzZXIsIGIudXNlcikpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSwgW2NhbGwsIGNhblVwZGF0ZUNhbGxQZXJtaXNzaW9ucywgbG9jYWxVc2VySWRdKTtcbiAgICBjb25zdCBoYW5kbGVVcGRhdGVQZXJtaXNzaW9uID0gKHJlcXVlc3QsIHR5cGUpID0+IHtcbiAgICAgICAgcmV0dXJuIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHsgdXNlciwgcGVybWlzc2lvbnMgfSA9IHJlcXVlc3Q7XG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdncmFudCc6XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGNhbGw/LmdyYW50UGVybWlzc2lvbnModXNlci5pZCwgcGVybWlzc2lvbnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdyZXZva2UnOlxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBjYWxsPy5yZXZva2VQZXJtaXNzaW9ucyh1c2VyLmlkLCBwZXJtaXNzaW9ucyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2V0UGVybWlzc2lvblJlcXVlc3RzKChyZXF1ZXN0cykgPT4gcmVxdWVzdHMuZmlsdGVyKChyKSA9PiByICE9PSByZXF1ZXN0KSk7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBjb25zdCB7IHJlZnMsIHgsIHksIHN0cmF0ZWd5IH0gPSB1c2VGbG9hdGluZ1VJUHJlc2V0KHtcbiAgICAgICAgcGxhY2VtZW50OiAnYm90dG9tJyxcbiAgICAgICAgc3RyYXRlZ3k6ICdhYnNvbHV0ZScsXG4gICAgfSk7XG4gICAgLy8gZG9uJ3QgcmVuZGVyIGFueXRoaW5nIGlmIHRoZXJlIGFyZSBubyBwZXJtaXNzaW9uIHJlcXVlc3RzXG4gICAgaWYgKHBlcm1pc3Npb25SZXF1ZXN0cy5sZW5ndGggPT09IDApXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIHJldHVybiAoanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX3Blcm1pc3Npb24tcmVxdWVzdHNcIiwgcmVmOiByZWZzLnNldFJlZmVyZW5jZSwgY2hpbGRyZW46IFtqc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fcGVybWlzc2lvbi1yZXF1ZXN0c19fbm90aWZpY2F0aW9uXCIsIGNoaWxkcmVuOiBbanN4cyhcInNwYW5cIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19wZXJtaXNzaW9uLXJlcXVlc3RzX19ub3RpZmljYXRpb25fX21lc3NhZ2VcIiwgY2hpbGRyZW46IFtwZXJtaXNzaW9uUmVxdWVzdHMubGVuZ3RoLCBcIiBwZW5kaW5nIHBlcm1pc3Npb24gcmVxdWVzdHNcIl0gfSksIGpzeChCdXR0b24sIHsgdHlwZTogXCJidXR0b25cIiwgb25DbGljazogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEV4cGFuZGVkKChlKSA9PiAhZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBjaGlsZHJlbjogZXhwYW5kZWQgPyAnSGlkZSByZXF1ZXN0cycgOiAnU2hvdyByZXF1ZXN0cycgfSldIH0pLCBleHBhbmRlZCAmJiAoanN4KFBlcm1pc3Npb25SZXF1ZXN0TGlzdCwgeyByZWY6IHJlZnMuc2V0RmxvYXRpbmcsIHN0eWxlOiB7XG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBzdHJhdGVneSxcbiAgICAgICAgICAgICAgICAgICAgdG9wOiB5ID8/IDAsXG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IHggPz8gMCxcbiAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3dZOiAnYXV0bycsXG4gICAgICAgICAgICAgICAgfSwgcGVybWlzc2lvblJlcXVlc3RzOiBwZXJtaXNzaW9uUmVxdWVzdHMsIGhhbmRsZVVwZGF0ZVBlcm1pc3Npb246IGhhbmRsZVVwZGF0ZVBlcm1pc3Npb24gfSkpXSB9KSk7XG59O1xuY29uc3QgUGVybWlzc2lvblJlcXVlc3RMaXN0ID0gZm9yd2FyZFJlZihmdW5jdGlvbiBQZXJtaXNzaW9uUmVxdWVzdExpc3QocHJvcHMsIHJlZikge1xuICAgIGNvbnN0IHsgcGVybWlzc2lvblJlcXVlc3RzLCBoYW5kbGVVcGRhdGVQZXJtaXNzaW9uLCAuLi5yZXN0IH0gPSBwcm9wcztcbiAgICBjb25zdCB7IHQgfSA9IHVzZUkxOG4oKTtcbiAgICByZXR1cm4gKGpzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX3Blcm1pc3Npb24tcmVxdWVzdHMtbGlzdFwiLCByZWY6IHJlZiwgLi4ucmVzdCwgY2hpbGRyZW46IHBlcm1pc3Npb25SZXF1ZXN0cy5tYXAoKHJlcXVlc3QsIHJlcUluZGV4KSA9PiB7XG4gICAgICAgICAgICBjb25zdCB7IHVzZXIsIHBlcm1pc3Npb25zIH0gPSByZXF1ZXN0O1xuICAgICAgICAgICAgcmV0dXJuIChqc3goRnJhZ21lbnQkMSwgeyBjaGlsZHJlbjogcGVybWlzc2lvbnMubWFwKChwZXJtaXNzaW9uKSA9PiAoanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX3Blcm1pc3Npb24tcmVxdWVzdFwiLCBjaGlsZHJlbjogW2pzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX3Blcm1pc3Npb24tcmVxdWVzdF9fbWVzc2FnZVwiLCBjaGlsZHJlbjogbWVzc2FnZUZvclBlcm1pc3Npb24odXNlci5uYW1lIHx8IHVzZXIuaWQsIHBlcm1pc3Npb24sIHQpIH0pLCBqc3goQnV0dG9uLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX3Blcm1pc3Npb24tcmVxdWVzdF9fYnV0dG9uLS1hbGxvd1wiLCB0eXBlOiBcImJ1dHRvblwiLCBvbkNsaWNrOiBoYW5kbGVVcGRhdGVQZXJtaXNzaW9uKHJlcXVlc3QsICdncmFudCcpLCBjaGlsZHJlbjogdCgnQWxsb3cnKSB9KSwganN4KEJ1dHRvbiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19wZXJtaXNzaW9uLXJlcXVlc3RfX2J1dHRvbi0tcmVqZWN0XCIsIHR5cGU6IFwiYnV0dG9uXCIsIG9uQ2xpY2s6IGhhbmRsZVVwZGF0ZVBlcm1pc3Npb24ocmVxdWVzdCwgJ3Jldm9rZScpLCBjaGlsZHJlbjogdCgnUmV2b2tlJykgfSksIGpzeChCdXR0b24sIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fcGVybWlzc2lvbi1yZXF1ZXN0X19idXR0b24tLXJlamVjdFwiLCB0eXBlOiBcImJ1dHRvblwiLCBvbkNsaWNrOiBoYW5kbGVVcGRhdGVQZXJtaXNzaW9uKHJlcXVlc3QsICdkaXNtaXNzJyksIGNoaWxkcmVuOiB0KCdEaXNtaXNzJykgfSldIH0sIHBlcm1pc3Npb24pKSkgfSwgYCR7dXNlci5pZH0vJHtyZXFJbmRleH1gKSk7XG4gICAgICAgIH0pIH0pKTtcbn0pO1xuY29uc3QgQnV0dG9uID0gKHByb3BzKSA9PiB7XG4gICAgY29uc3QgeyBjbGFzc05hbWUsIC4uLnJlc3QgfSA9IHByb3BzO1xuICAgIHJldHVybiAoanN4KFwiYnV0dG9uXCIsIHsgY2xhc3NOYW1lOiBjbHN4KCdzdHItdmlkZW9fX3Blcm1pc3Npb24tcmVxdWVzdF9fYnV0dG9uJywgY2xhc3NOYW1lKSwgLi4ucmVzdCB9KSk7XG59O1xuY29uc3QgbWVzc2FnZUZvclBlcm1pc3Npb24gPSAodXNlck5hbWUsIHBlcm1pc3Npb24sIHQpID0+IHtcbiAgICBzd2l0Y2ggKHBlcm1pc3Npb24pIHtcbiAgICAgICAgY2FzZSBPd25DYXBhYmlsaXR5LlNFTkRfQVVESU86XG4gICAgICAgICAgICByZXR1cm4gdCgne3sgdXNlck5hbWUgfX0gaXMgcmVxdWVzdGluZyB0byBzcGVhaycsIHsgdXNlck5hbWUgfSk7XG4gICAgICAgIGNhc2UgT3duQ2FwYWJpbGl0eS5TRU5EX1ZJREVPOlxuICAgICAgICAgICAgcmV0dXJuIHQoJ3t7IHVzZXJOYW1lIH19IGlzIHJlcXVlc3RpbmcgdG8gc2hhcmUgdGhlaXIgY2FtZXJhJywge1xuICAgICAgICAgICAgICAgIHVzZXJOYW1lLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIGNhc2UgT3duQ2FwYWJpbGl0eS5TQ1JFRU5TSEFSRTpcbiAgICAgICAgICAgIHJldHVybiB0KCd7eyB1c2VyTmFtZSB9fSBpcyByZXF1ZXN0aW5nIHRvIHByZXNlbnQgdGhlaXIgc2NyZWVuJywge1xuICAgICAgICAgICAgICAgIHVzZXJOYW1lLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gdCgne3sgdXNlck5hbWUgfX0gaXMgcmVxdWVzdGluZyBwZXJtaXNzaW9uOiB7eyBwZXJtaXNzaW9uIH19Jywge1xuICAgICAgICAgICAgICAgIHVzZXJOYW1lLFxuICAgICAgICAgICAgICAgIHBlcm1pc3Npb24sXG4gICAgICAgICAgICB9KTtcbiAgICB9XG59O1xuXG5jb25zdCBTdHJlYW1UaGVtZSA9ICh7IGFzOiBDb21wb25lbnQgPSAnZGl2JywgY2xhc3NOYW1lLCBjaGlsZHJlbiwgLi4ucHJvcHMgfSkgPT4ge1xuICAgIHJldHVybiAoanN4KENvbXBvbmVudCwgeyAuLi5wcm9wcywgY2xhc3NOYW1lOiBjbHN4KCdzdHItdmlkZW8nLCBjbGFzc05hbWUpLCBjaGlsZHJlbjogY2hpbGRyZW4gfSkpO1xufTtcblxuY29uc3QgRGVmYXVsdFZpZGVvUGxhY2Vob2xkZXIgPSBmb3J3YXJkUmVmKGZ1bmN0aW9uIERlZmF1bHRWaWRlb1BsYWNlaG9sZGVyKHsgcGFydGljaXBhbnQsIHN0eWxlIH0sIHJlZikge1xuICAgIGNvbnN0IHsgdCB9ID0gdXNlSTE4bigpO1xuICAgIGNvbnN0IFtlcnJvciwgc2V0RXJyb3JdID0gdXNlU3RhdGUoZmFsc2UpO1xuICAgIGNvbnN0IG5hbWUgPSBwYXJ0aWNpcGFudC5uYW1lIHx8IHBhcnRpY2lwYW50LnVzZXJJZDtcbiAgICByZXR1cm4gKGpzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX192aWRlby1wbGFjZWhvbGRlclwiLCBzdHlsZTogc3R5bGUsIHJlZjogcmVmLCBjaGlsZHJlbjogWyghcGFydGljaXBhbnQuaW1hZ2UgfHwgZXJyb3IpICYmXG4gICAgICAgICAgICAgICAgKG5hbWUgPyAoanN4KEluaXRpYWxzRmFsbGJhY2ssIHsgbmFtZTogbmFtZSB9KSkgOiAoanN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fdmlkZW8tcGxhY2Vob2xkZXJfX25vLXZpZGVvLWxhYmVsXCIsIGNoaWxkcmVuOiB0KCdWaWRlbyBpcyBkaXNhYmxlZCcpIH0pKSksIHBhcnRpY2lwYW50LmltYWdlICYmICFlcnJvciAmJiAoanN4KFwiaW1nXCIsIHsgb25FcnJvcjogKCkgPT4gc2V0RXJyb3IodHJ1ZSksIGFsdDogXCJ2aWRlby1wbGFjZWhvbGRlclwiLCBjbGFzc05hbWU6IFwic3RyLXZpZGVvX192aWRlby1wbGFjZWhvbGRlcl9fYXZhdGFyXCIsIHNyYzogcGFydGljaXBhbnQuaW1hZ2UgfSkpXSB9KSk7XG59KTtcbmNvbnN0IEluaXRpYWxzRmFsbGJhY2sgPSAocHJvcHMpID0+IHtcbiAgICBjb25zdCB7IG5hbWUgfSA9IHByb3BzO1xuICAgIGNvbnN0IGluaXRpYWxzID0gbmFtZVxuICAgICAgICAuc3BsaXQoJyAnKVxuICAgICAgICAuc2xpY2UoMCwgMilcbiAgICAgICAgLm1hcCgobikgPT4gblswXSlcbiAgICAgICAgLmpvaW4oJycpO1xuICAgIHJldHVybiAoanN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fdmlkZW8tcGxhY2Vob2xkZXJfX2luaXRpYWxzLWZhbGxiYWNrXCIsIGNoaWxkcmVuOiBpbml0aWFscyB9KSk7XG59O1xuXG5jb25zdCBWaWRlbyQxID0gKHsgdHJhY2tUeXBlLCBwYXJ0aWNpcGFudCwgY2xhc3NOYW1lLCBWaWRlb1BsYWNlaG9sZGVyID0gRGVmYXVsdFZpZGVvUGxhY2Vob2xkZXIsIHJlZnMsIC4uLnJlc3QgfSkgPT4ge1xuICAgIGNvbnN0IHsgc2Vzc2lvbklkLCB2aWRlb1N0cmVhbSwgc2NyZWVuU2hhcmVTdHJlYW0sIHB1Ymxpc2hlZFRyYWNrcywgdmlld3BvcnRWaXNpYmlsaXR5U3RhdGUsIGlzTG9jYWxQYXJ0aWNpcGFudCwgdXNlcklkLCB9ID0gcGFydGljaXBhbnQ7XG4gICAgY29uc3QgY2FsbCA9IHVzZUNhbGwoKTtcbiAgICBjb25zdCBbdmlkZW9FbGVtZW50LCBzZXRWaWRlb0VsZW1lbnRdID0gdXNlU3RhdGUobnVsbCk7XG4gICAgLy8gc3RhcnQgd2l0aCB0cnVlLCB3aWxsIGZsaXAgb25jZSB0aGUgdmlkZW8gc3RhcnRzIHBsYXlpbmdcbiAgICBjb25zdCBbaXNWaWRlb1BhdXNlZCwgc2V0SXNWaWRlb1BhdXNlZF0gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgICBjb25zdCBbaXNXaWRlTW9kZSwgc2V0SXNXaWRlTW9kZV0gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgICBjb25zdCBzdHJlYW0gPSB0cmFja1R5cGUgPT09ICd2aWRlb1RyYWNrJ1xuICAgICAgICA/IHZpZGVvU3RyZWFtXG4gICAgICAgIDogdHJhY2tUeXBlID09PSAnc2NyZWVuU2hhcmVUcmFjaydcbiAgICAgICAgICAgID8gc2NyZWVuU2hhcmVTdHJlYW1cbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgIHVzZUxheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmICghY2FsbCB8fCAhdmlkZW9FbGVtZW50IHx8IHRyYWNrVHlwZSA9PT0gJ25vbmUnKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCBjbGVhbnVwID0gY2FsbC5iaW5kVmlkZW9FbGVtZW50KHZpZGVvRWxlbWVudCwgc2Vzc2lvbklkLCB0cmFja1R5cGUpO1xuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgY2xlYW51cD8uKCk7XG4gICAgICAgIH07XG4gICAgfSwgW2NhbGwsIHRyYWNrVHlwZSwgc2Vzc2lvbklkLCB2aWRlb0VsZW1lbnRdKTtcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBpZiAoIXN0cmVhbSB8fCAhdmlkZW9FbGVtZW50KVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCBbdHJhY2tdID0gc3RyZWFtLmdldFZpZGVvVHJhY2tzKCk7XG4gICAgICAgIGlmICghdHJhY2spXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IGhhbmRsZVBsYXlQYXVzZSA9ICgpID0+IHtcbiAgICAgICAgICAgIHNldElzVmlkZW9QYXVzZWQodmlkZW9FbGVtZW50LnBhdXNlZCk7XG4gICAgICAgICAgICBjb25zdCB7IHdpZHRoID0gMCwgaGVpZ2h0ID0gMCB9ID0gdHJhY2suZ2V0U2V0dGluZ3MoKTtcbiAgICAgICAgICAgIHNldElzV2lkZU1vZGUod2lkdGggPj0gaGVpZ2h0KTtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gcGxheWJhY2sgbWF5IGhhdmUgc3RhcnRlZCBiZWZvcmUgd2UgaGFkIGEgY2hhbmNlIHRvXG4gICAgICAgIC8vIGF0dGFjaCB0aGUgJ3BsYXkvcGF1c2UnIGV2ZW50IGxpc3RlbmVyLCBzbyB3ZSBzZXQgdGhlIHN0YXRlXG4gICAgICAgIC8vIGhlcmUgdG8gbWFrZSBzdXJlIGl0J3MgaW4gc3luY1xuICAgICAgICBzZXRJc1ZpZGVvUGF1c2VkKHZpZGVvRWxlbWVudC5wYXVzZWQpO1xuICAgICAgICB2aWRlb0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncGxheScsIGhhbmRsZVBsYXlQYXVzZSk7XG4gICAgICAgIHZpZGVvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdwYXVzZScsIGhhbmRsZVBsYXlQYXVzZSk7XG4gICAgICAgIHRyYWNrLmFkZEV2ZW50TGlzdGVuZXIoJ3VubXV0ZScsIGhhbmRsZVBsYXlQYXVzZSk7XG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICB2aWRlb0VsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncGxheScsIGhhbmRsZVBsYXlQYXVzZSk7XG4gICAgICAgICAgICB2aWRlb0VsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncGF1c2UnLCBoYW5kbGVQbGF5UGF1c2UpO1xuICAgICAgICAgICAgdHJhY2sucmVtb3ZlRXZlbnRMaXN0ZW5lcigndW5tdXRlJywgaGFuZGxlUGxheVBhdXNlKTtcbiAgICAgICAgICAgIC8vIHJlc2V0IHRoZSAncGF1c2UnIHN0YXRlIG9uY2Ugd2UgdW5tb3VudCB0aGUgdmlkZW8gZWxlbWVudFxuICAgICAgICAgICAgc2V0SXNWaWRlb1BhdXNlZCh0cnVlKTtcbiAgICAgICAgfTtcbiAgICB9LCBbc3RyZWFtLCB2aWRlb0VsZW1lbnRdKTtcbiAgICBpZiAoIWNhbGwpXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIGNvbnN0IGlzUHVibGlzaGluZ1RyYWNrID0gdHJhY2tUeXBlID09PSAndmlkZW9UcmFjaydcbiAgICAgICAgPyBwdWJsaXNoZWRUcmFja3MuaW5jbHVkZXMoU2Z1TW9kZWxzLlRyYWNrVHlwZS5WSURFTylcbiAgICAgICAgOiB0cmFja1R5cGUgPT09ICdzY3JlZW5TaGFyZVRyYWNrJ1xuICAgICAgICAgICAgPyBwdWJsaXNoZWRUcmFja3MuaW5jbHVkZXMoU2Z1TW9kZWxzLlRyYWNrVHlwZS5TQ1JFRU5fU0hBUkUpXG4gICAgICAgICAgICA6IGZhbHNlO1xuICAgIGNvbnN0IGlzSW52aXNpYmxlID0gdHJhY2tUeXBlID09PSAnbm9uZScgfHxcbiAgICAgICAgdmlld3BvcnRWaXNpYmlsaXR5U3RhdGU/Llt0cmFja1R5cGVdID09PSBWaXNpYmlsaXR5U3RhdGUuSU5WSVNJQkxFO1xuICAgIGNvbnN0IGhhc05vVmlkZW9PckludmlzaWJsZSA9ICFpc1B1Ymxpc2hpbmdUcmFjayB8fCBpc0ludmlzaWJsZTtcbiAgICBjb25zdCBtaXJyb3JWaWRlbyA9IGlzTG9jYWxQYXJ0aWNpcGFudCAmJiB0cmFja1R5cGUgPT09ICd2aWRlb1RyYWNrJztcbiAgICBjb25zdCBpc1NjcmVlblNoYXJlVHJhY2sgPSB0cmFja1R5cGUgPT09ICdzY3JlZW5TaGFyZVRyYWNrJztcbiAgICByZXR1cm4gKGpzeHMoRnJhZ21lbnQsIHsgY2hpbGRyZW46IFshaGFzTm9WaWRlb09ySW52aXNpYmxlICYmIChqc3goXCJ2aWRlb1wiLCB7IC4uLnJlc3QsIGNsYXNzTmFtZTogY2xzeCgnc3RyLXZpZGVvX192aWRlbycsIGNsYXNzTmFtZSwge1xuICAgICAgICAgICAgICAgICAgICAnc3RyLXZpZGVvX192aWRlby0tbm90LXBsYXlpbmcnOiBpc1ZpZGVvUGF1c2VkLFxuICAgICAgICAgICAgICAgICAgICAnc3RyLXZpZGVvX192aWRlby0tdGFsbCc6ICFpc1dpZGVNb2RlLFxuICAgICAgICAgICAgICAgICAgICAnc3RyLXZpZGVvX192aWRlby0tbWlycm9yJzogbWlycm9yVmlkZW8sXG4gICAgICAgICAgICAgICAgICAgICdzdHItdmlkZW9fX3ZpZGVvLS1zY3JlZW4tc2hhcmUnOiBpc1NjcmVlblNoYXJlVHJhY2ssXG4gICAgICAgICAgICAgICAgfSksIFwiZGF0YS11c2VyLWlkXCI6IHVzZXJJZCwgXCJkYXRhLXNlc3Npb24taWRcIjogc2Vzc2lvbklkLCByZWY6IChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHNldFZpZGVvRWxlbWVudChlbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgcmVmcz8uc2V0VmlkZW9FbGVtZW50Py4oZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgfSB9KSksIChoYXNOb1ZpZGVvT3JJbnZpc2libGUgfHwgaXNWaWRlb1BhdXNlZCkgJiYgVmlkZW9QbGFjZWhvbGRlciAmJiAoanN4KFZpZGVvUGxhY2Vob2xkZXIsIHsgc3R5bGU6IHsgcG9zaXRpb246ICdhYnNvbHV0ZScgfSwgcGFydGljaXBhbnQ6IHBhcnRpY2lwYW50LCByZWY6IHJlZnM/LnNldFZpZGVvUGxhY2Vob2xkZXJFbGVtZW50IH0pKV0gfSkpO1xufTtcblxuLyoqXG4gKiBAZGVzY3JpcHRpb24gRXh0ZW5kcyB2aWRlbyBlbGVtZW50IHdpdGggYHN0cmVhbWAgcHJvcGVydHlcbiAqIChgc3JjT2JqZWN0YCkgdG8gcmVhY3RpdmVseSBoYW5kbGUgc3RyZWFtIGNoYW5nZXNcbiAqL1xuY29uc3QgQmFzZVZpZGVvID0gZm9yd2FyZFJlZihmdW5jdGlvbiBCYXNlVmlkZW8oeyBzdHJlYW0sIC4uLnJlc3QgfSwgcmVmKSB7XG4gICAgY29uc3QgW3ZpZGVvRWxlbWVudCwgc2V0VmlkZW9FbGVtZW50XSA9IHVzZVN0YXRlKG51bGwpO1xuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmICghdmlkZW9FbGVtZW50IHx8ICFzdHJlYW0pXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmIChzdHJlYW0gPT09IHZpZGVvRWxlbWVudC5zcmNPYmplY3QpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHZpZGVvRWxlbWVudC5zcmNPYmplY3QgPSBzdHJlYW07XG4gICAgICAgIGlmIChCcm93c2Vycy5pc1NhZmFyaSgpIHx8IEJyb3dzZXJzLmlzRmlyZWZveCgpKSB7XG4gICAgICAgICAgICAvLyBGaXJlZm94IGFuZCBTYWZhcmkgaGF2ZSBzb21lIHRpbWluZyBpc3N1ZVxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdmlkZW9FbGVtZW50LnNyY09iamVjdCA9IHN0cmVhbTtcbiAgICAgICAgICAgICAgICB2aWRlb0VsZW1lbnQucGxheSgpLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBwbGF5IHN0cmVhbWAsIGUpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSwgMCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIHZpZGVvRWxlbWVudC5wYXVzZSgpO1xuICAgICAgICAgICAgdmlkZW9FbGVtZW50LnNyY09iamVjdCA9IG51bGw7XG4gICAgICAgIH07XG4gICAgfSwgW3N0cmVhbSwgdmlkZW9FbGVtZW50XSk7XG4gICAgcmV0dXJuIChqc3goXCJ2aWRlb1wiLCB7IGF1dG9QbGF5OiB0cnVlLCBwbGF5c0lubGluZTogdHJ1ZSwgLi4ucmVzdCwgcmVmOiAoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgYXBwbHlFbGVtZW50VG9SZWYocmVmLCBlbGVtZW50KTtcbiAgICAgICAgICAgIHNldFZpZGVvRWxlbWVudChlbGVtZW50KTtcbiAgICAgICAgfSB9KSk7XG59KTtcblxuY29uc3QgRGVmYXVsdERpc2FibGVkVmlkZW9QcmV2aWV3ID0gKCkgPT4ge1xuICAgIGNvbnN0IHsgdCB9ID0gdXNlSTE4bigpO1xuICAgIHJldHVybiAoanN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0cl92aWRlb19fdmlkZW8tcHJldmlld19fZGlzYWJsZWQtdmlkZW8tcHJldmlld1wiLCBjaGlsZHJlbjogdCgnVmlkZW8gaXMgZGlzYWJsZWQnKSB9KSk7XG59O1xuY29uc3QgRGVmYXVsdE5vQ2FtZXJhUHJldmlldyA9ICgpID0+IHtcbiAgICBjb25zdCB7IHQgfSA9IHVzZUkxOG4oKTtcbiAgICByZXR1cm4gKGpzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzdHJfdmlkZW9fX3ZpZGVvLXByZXZpZXdfX25vLWNhbWVyYS1wcmV2aWV3XCIsIGNoaWxkcmVuOiB0KCdObyBjYW1lcmEgZm91bmQnKSB9KSk7XG59O1xuY29uc3QgVmlkZW9QcmV2aWV3ID0gKHsgY2xhc3NOYW1lLCBtaXJyb3IgPSB0cnVlLCBEaXNhYmxlZFZpZGVvUHJldmlldyA9IERlZmF1bHREaXNhYmxlZFZpZGVvUHJldmlldywgTm9DYW1lcmFQcmV2aWV3ID0gRGVmYXVsdE5vQ2FtZXJhUHJldmlldywgU3RhcnRpbmdDYW1lcmFQcmV2aWV3ID0gTG9hZGluZ0luZGljYXRvciwgfSkgPT4ge1xuICAgIGNvbnN0IHsgdXNlQ2FtZXJhU3RhdGUgfSA9IHVzZUNhbGxTdGF0ZUhvb2tzKCk7XG4gICAgY29uc3QgeyBkZXZpY2VzLCBzdGF0dXMsIGlzTXV0ZSwgbWVkaWFTdHJlYW0gfSA9IHVzZUNhbWVyYVN0YXRlKCk7XG4gICAgbGV0IGNvbnRlbnRzO1xuICAgIGlmIChpc011dGUgJiYgZGV2aWNlcz8ubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGNvbnRlbnRzID0ganN4KE5vQ2FtZXJhUHJldmlldywge30pO1xuICAgIH1cbiAgICBlbHNlIGlmIChzdGF0dXMgPT09ICdlbmFibGVkJykge1xuICAgICAgICBjb25zdCBsb2FkaW5nID0gIW1lZGlhU3RyZWFtO1xuICAgICAgICBjb250ZW50cyA9IChqc3hzKEZyYWdtZW50LCB7IGNoaWxkcmVuOiBbbWVkaWFTdHJlYW0gJiYgKGpzeChCYXNlVmlkZW8sIHsgc3RyZWFtOiBtZWRpYVN0cmVhbSwgY2xhc3NOYW1lOiBjbHN4KCdzdHItdmlkZW9fX3ZpZGVvLXByZXZpZXcnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnc3RyLXZpZGVvX192aWRlby1wcmV2aWV3LS1taXJyb3InOiBtaXJyb3IsXG4gICAgICAgICAgICAgICAgICAgICAgICAnc3RyLXZpZGVvX192aWRlby1wcmV2aWV3LS1sb2FkaW5nJzogbG9hZGluZyxcbiAgICAgICAgICAgICAgICAgICAgfSkgfSkpLCBsb2FkaW5nICYmIGpzeChTdGFydGluZ0NhbWVyYVByZXZpZXcsIHt9KV0gfSkpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29udGVudHMgPSBqc3goRGlzYWJsZWRWaWRlb1ByZXZpZXcsIHt9KTtcbiAgICB9XG4gICAgcmV0dXJuIChqc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IGNsc3goJ3N0ci12aWRlb19fdmlkZW8tcHJldmlldy1jb250YWluZXInLCBjbGFzc05hbWUpLCBjaGlsZHJlbjogY29udGVudHMgfSkpO1xufTtcblxuY29uc3QgUGFydGljaXBhbnRBY3Rpb25zQ29udGV4dE1lbnUgPSAoKSA9PiB7XG4gICAgY29uc3QgeyBwYXJ0aWNpcGFudCwgcGFydGljaXBhbnRWaWV3RWxlbWVudCwgdmlkZW9FbGVtZW50IH0gPSB1c2VQYXJ0aWNpcGFudFZpZXdDb250ZXh0KCk7XG4gICAgY29uc3QgW2Z1bGxzY3JlZW5Nb2RlT24sIHNldEZ1bGxzY3JlZW5Nb2RlT25dID0gdXNlU3RhdGUoISFkb2N1bWVudC5mdWxsc2NyZWVuRWxlbWVudCk7XG4gICAgY29uc3QgW3BpY3R1cmVJblBpY3R1cmVFbGVtZW50LCBzZXRQaWN0dXJlSW5QaWN0dXJlRWxlbWVudF0gPSB1c2VTdGF0ZShkb2N1bWVudC5waWN0dXJlSW5QaWN0dXJlRWxlbWVudCk7XG4gICAgY29uc3QgY2FsbCA9IHVzZUNhbGwoKTtcbiAgICBjb25zdCB7IHQgfSA9IHVzZUkxOG4oKTtcbiAgICBjb25zdCB7IHBpbiwgcHVibGlzaGVkVHJhY2tzLCBzZXNzaW9uSWQsIHVzZXJJZCB9ID0gcGFydGljaXBhbnQ7XG4gICAgY29uc3QgaGFzQXVkaW8gPSBwdWJsaXNoZWRUcmFja3MuaW5jbHVkZXMoU2Z1TW9kZWxzLlRyYWNrVHlwZS5BVURJTyk7XG4gICAgY29uc3QgaGFzVmlkZW8gPSBwdWJsaXNoZWRUcmFja3MuaW5jbHVkZXMoU2Z1TW9kZWxzLlRyYWNrVHlwZS5WSURFTyk7XG4gICAgY29uc3QgaGFzU2NyZWVuU2hhcmUgPSBwdWJsaXNoZWRUcmFja3MuaW5jbHVkZXMoU2Z1TW9kZWxzLlRyYWNrVHlwZS5TQ1JFRU5fU0hBUkUpO1xuICAgIGNvbnN0IGhhc1NjcmVlblNoYXJlQXVkaW8gPSBwdWJsaXNoZWRUcmFja3MuaW5jbHVkZXMoU2Z1TW9kZWxzLlRyYWNrVHlwZS5TQ1JFRU5fU0hBUkVfQVVESU8pO1xuICAgIGNvbnN0IGJsb2NrVXNlciA9ICgpID0+IGNhbGw/LmJsb2NrVXNlcih1c2VySWQpO1xuICAgIGNvbnN0IG11dGVBdWRpbyA9ICgpID0+IGNhbGw/Lm11dGVVc2VyKHVzZXJJZCwgJ2F1ZGlvJyk7XG4gICAgY29uc3QgbXV0ZVZpZGVvID0gKCkgPT4gY2FsbD8ubXV0ZVVzZXIodXNlcklkLCAndmlkZW8nKTtcbiAgICBjb25zdCBtdXRlU2NyZWVuU2hhcmUgPSAoKSA9PiBjYWxsPy5tdXRlVXNlcih1c2VySWQsICdzY3JlZW5zaGFyZScpO1xuICAgIGNvbnN0IG11dGVTY3JlZW5TaGFyZUF1ZGlvID0gKCkgPT4gY2FsbD8ubXV0ZVVzZXIodXNlcklkLCAnc2NyZWVuc2hhcmVfYXVkaW8nKTtcbiAgICBjb25zdCBncmFudFBlcm1pc3Npb24gPSAocGVybWlzc2lvbikgPT4gKCkgPT4ge1xuICAgICAgICBjYWxsPy51cGRhdGVVc2VyUGVybWlzc2lvbnMoe1xuICAgICAgICAgICAgdXNlcl9pZDogdXNlcklkLFxuICAgICAgICAgICAgZ3JhbnRfcGVybWlzc2lvbnM6IFtwZXJtaXNzaW9uXSxcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBjb25zdCByZXZva2VQZXJtaXNzaW9uID0gKHBlcm1pc3Npb24pID0+ICgpID0+IHtcbiAgICAgICAgY2FsbD8udXBkYXRlVXNlclBlcm1pc3Npb25zKHtcbiAgICAgICAgICAgIHVzZXJfaWQ6IHVzZXJJZCxcbiAgICAgICAgICAgIHJldm9rZV9wZXJtaXNzaW9uczogW3Blcm1pc3Npb25dLFxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIGNvbnN0IHRvZ2dsZVBhcnRpY2lwYW50UGluID0gKCkgPT4ge1xuICAgICAgICBpZiAocGluKSB7XG4gICAgICAgICAgICBjYWxsPy51bnBpbihzZXNzaW9uSWQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY2FsbD8ucGluKHNlc3Npb25JZCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHBpbkZvckV2ZXJ5b25lID0gKCkgPT4ge1xuICAgICAgICBjYWxsXG4gICAgICAgICAgICA/LnBpbkZvckV2ZXJ5b25lKHtcbiAgICAgICAgICAgIHVzZXJfaWQ6IHVzZXJJZCxcbiAgICAgICAgICAgIHNlc3Npb25faWQ6IHNlc3Npb25JZCxcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gcGluIHBhcnRpY2lwYW50ICR7dXNlcklkfWAsIGVycik7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgY29uc3QgdW5waW5Gb3JFdmVyeW9uZSA9ICgpID0+IHtcbiAgICAgICAgY2FsbFxuICAgICAgICAgICAgPy51bnBpbkZvckV2ZXJ5b25lKHtcbiAgICAgICAgICAgIHVzZXJfaWQ6IHVzZXJJZCxcbiAgICAgICAgICAgIHNlc3Npb25faWQ6IHNlc3Npb25JZCxcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gdW5waW4gcGFydGljaXBhbnQgJHt1c2VySWR9YCwgZXJyKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBjb25zdCB0b2dnbGVGdWxsc2NyZWVuTW9kZSA9ICgpID0+IHtcbiAgICAgICAgaWYgKCFmdWxsc2NyZWVuTW9kZU9uKSB7XG4gICAgICAgICAgICByZXR1cm4gcGFydGljaXBhbnRWaWV3RWxlbWVudD8ucmVxdWVzdEZ1bGxzY3JlZW4oKS5jYXRjaChjb25zb2xlLmVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZG9jdW1lbnQuZXhpdEZ1bGxzY3JlZW4oKS5jYXRjaChjb25zb2xlLmVycm9yKTtcbiAgICB9O1xuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIC8vIGhhbmRsZXMgdGhlIGNhc2Ugd2hlbiBmdWxsc2NyZWVuIG1vZGUgaXMgdG9nZ2xlZCBleHRlcm5hbGx5LFxuICAgICAgICAvLyBlLmcuLCBieSBwcmVzc2luZyBFU0Mga2V5IG9yIHNvbWUgb3RoZXIga2V5Ym9hcmQgc2hvcnRjdXRcbiAgICAgICAgY29uc3QgaGFuZGxlRnVsbHNjcmVlbkNoYW5nZSA9ICgpID0+IHtcbiAgICAgICAgICAgIHNldEZ1bGxzY3JlZW5Nb2RlT24oISFkb2N1bWVudC5mdWxsc2NyZWVuRWxlbWVudCk7XG4gICAgICAgIH07XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2Z1bGxzY3JlZW5jaGFuZ2UnLCBoYW5kbGVGdWxsc2NyZWVuQ2hhbmdlKTtcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Z1bGxzY3JlZW5jaGFuZ2UnLCBoYW5kbGVGdWxsc2NyZWVuQ2hhbmdlKTtcbiAgICAgICAgfTtcbiAgICB9LCBbXSk7XG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKCF2aWRlb0VsZW1lbnQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IGhhbmRsZVBpUCA9ICgpID0+IHtcbiAgICAgICAgICAgIHNldFBpY3R1cmVJblBpY3R1cmVFbGVtZW50KGRvY3VtZW50LnBpY3R1cmVJblBpY3R1cmVFbGVtZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgdmlkZW9FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2VudGVycGljdHVyZWlucGljdHVyZScsIGhhbmRsZVBpUCk7XG4gICAgICAgIHZpZGVvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdsZWF2ZXBpY3R1cmVpbnBpY3R1cmUnLCBoYW5kbGVQaVApO1xuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgdmlkZW9FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2VudGVycGljdHVyZWlucGljdHVyZScsIGhhbmRsZVBpUCk7XG4gICAgICAgICAgICB2aWRlb0VsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbGVhdmVwaWN0dXJlaW5waWN0dXJlJywgaGFuZGxlUGlQKTtcbiAgICAgICAgfTtcbiAgICB9LCBbdmlkZW9FbGVtZW50XSk7XG4gICAgY29uc3QgdG9nZ2xlUGljdHVyZUluUGljdHVyZSA9ICgpID0+IHtcbiAgICAgICAgaWYgKHZpZGVvRWxlbWVudCAmJiBwaWN0dXJlSW5QaWN0dXJlRWxlbWVudCAhPT0gdmlkZW9FbGVtZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gdmlkZW9FbGVtZW50XG4gICAgICAgICAgICAgICAgLnJlcXVlc3RQaWN0dXJlSW5QaWN0dXJlKClcbiAgICAgICAgICAgICAgICAuY2F0Y2goY29uc29sZS5lcnJvcik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRvY3VtZW50LmV4aXRQaWN0dXJlSW5QaWN0dXJlKCkuY2F0Y2goY29uc29sZS5lcnJvcik7XG4gICAgfTtcbiAgICBjb25zdCB7IGNsb3NlIH0gPSB1c2VNZW51Q29udGV4dCgpIHx8IHt9O1xuICAgIHJldHVybiAoanN4cyhHZW5lcmljTWVudSwgeyBvbkl0ZW1DbGljazogY2xvc2UsIGNoaWxkcmVuOiBbanN4cyhHZW5lcmljTWVudUJ1dHRvbkl0ZW0sIHsgb25DbGljazogdG9nZ2xlUGFydGljaXBhbnRQaW4sIGRpc2FibGVkOiBwaW4gJiYgIXBpbi5pc0xvY2FsUGluLCBjaGlsZHJlbjogW2pzeChJY29uLCB7IGljb246IFwicGluXCIgfSksIHBpbiA/IHQoJ1VucGluJykgOiB0KCdQaW4nKV0gfSksIGpzeHMoUmVzdHJpY3RlZCwgeyByZXF1aXJlZEdyYW50czogW093bkNhcGFiaWxpdHkuUElOX0ZPUl9FVkVSWU9ORV0sIGNoaWxkcmVuOiBbanN4cyhHZW5lcmljTWVudUJ1dHRvbkl0ZW0sIHsgb25DbGljazogcGluRm9yRXZlcnlvbmUsIGRpc2FibGVkOiBwaW4gJiYgIXBpbi5pc0xvY2FsUGluLCBjaGlsZHJlbjogW2pzeChJY29uLCB7IGljb246IFwicGluXCIgfSksIHQoJ1BpbiBmb3IgZXZlcnlvbmUnKV0gfSksIGpzeHMoR2VuZXJpY01lbnVCdXR0b25JdGVtLCB7IG9uQ2xpY2s6IHVucGluRm9yRXZlcnlvbmUsIGRpc2FibGVkOiAhcGluIHx8IHBpbi5pc0xvY2FsUGluLCBjaGlsZHJlbjogW2pzeChJY29uLCB7IGljb246IFwicGluXCIgfSksIHQoJ1VucGluIGZvciBldmVyeW9uZScpXSB9KV0gfSksIGpzeChSZXN0cmljdGVkLCB7IHJlcXVpcmVkR3JhbnRzOiBbT3duQ2FwYWJpbGl0eS5CTE9DS19VU0VSU10sIGNoaWxkcmVuOiBqc3hzKEdlbmVyaWNNZW51QnV0dG9uSXRlbSwgeyBvbkNsaWNrOiBibG9ja1VzZXIsIGNoaWxkcmVuOiBbanN4KEljb24sIHsgaWNvbjogXCJub3QtYWxsb3dlZFwiIH0pLCB0KCdCbG9jaycpXSB9KSB9KSwganN4cyhSZXN0cmljdGVkLCB7IHJlcXVpcmVkR3JhbnRzOiBbT3duQ2FwYWJpbGl0eS5NVVRFX1VTRVJTXSwgY2hpbGRyZW46IFtoYXNWaWRlbyAmJiAoanN4cyhHZW5lcmljTWVudUJ1dHRvbkl0ZW0sIHsgb25DbGljazogbXV0ZVZpZGVvLCBjaGlsZHJlbjogW2pzeChJY29uLCB7IGljb246IFwiY2FtZXJhLW9mZi1vdXRsaW5lXCIgfSksIHQoJ1R1cm4gb2ZmIHZpZGVvJyldIH0pKSwgaGFzU2NyZWVuU2hhcmUgJiYgKGpzeHMoR2VuZXJpY01lbnVCdXR0b25JdGVtLCB7IG9uQ2xpY2s6IG11dGVTY3JlZW5TaGFyZSwgY2hpbGRyZW46IFtqc3goSWNvbiwgeyBpY29uOiBcInNjcmVlbi1zaGFyZS1vZmZcIiB9KSwgdCgnVHVybiBvZmYgc2NyZWVuIHNoYXJlJyldIH0pKSwgaGFzQXVkaW8gJiYgKGpzeHMoR2VuZXJpY01lbnVCdXR0b25JdGVtLCB7IG9uQ2xpY2s6IG11dGVBdWRpbywgY2hpbGRyZW46IFtqc3goSWNvbiwgeyBpY29uOiBcIm5vLWF1ZGlvXCIgfSksIHQoJ011dGUgYXVkaW8nKV0gfSkpLCBoYXNTY3JlZW5TaGFyZUF1ZGlvICYmIChqc3hzKEdlbmVyaWNNZW51QnV0dG9uSXRlbSwgeyBvbkNsaWNrOiBtdXRlU2NyZWVuU2hhcmVBdWRpbywgY2hpbGRyZW46IFtqc3goSWNvbiwgeyBpY29uOiBcIm5vLWF1ZGlvXCIgfSksIHQoJ011dGUgc2NyZWVuIHNoYXJlIGF1ZGlvJyldIH0pKV0gfSksIHBhcnRpY2lwYW50Vmlld0VsZW1lbnQgJiYgKGpzeChHZW5lcmljTWVudUJ1dHRvbkl0ZW0sIHsgb25DbGljazogdG9nZ2xlRnVsbHNjcmVlbk1vZGUsIGNoaWxkcmVuOiB0KCd7eyBkaXJlY3Rpb24gfX0gZnVsbHNjcmVlbicsIHtcbiAgICAgICAgICAgICAgICAgICAgZGlyZWN0aW9uOiBmdWxsc2NyZWVuTW9kZU9uID8gdCgnTGVhdmUnKSA6IHQoJ0VudGVyJyksXG4gICAgICAgICAgICAgICAgfSkgfSkpLCB2aWRlb0VsZW1lbnQgJiYgZG9jdW1lbnQucGljdHVyZUluUGljdHVyZUVuYWJsZWQgJiYgKGpzeChHZW5lcmljTWVudUJ1dHRvbkl0ZW0sIHsgb25DbGljazogdG9nZ2xlUGljdHVyZUluUGljdHVyZSwgY2hpbGRyZW46IHQoJ3t7IGRpcmVjdGlvbiB9fSBwaWN0dXJlLWluLXBpY3R1cmUnLCB7XG4gICAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbjogcGljdHVyZUluUGljdHVyZUVsZW1lbnQgPT09IHZpZGVvRWxlbWVudFxuICAgICAgICAgICAgICAgICAgICAgICAgPyB0KCdMZWF2ZScpXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHQoJ0VudGVyJyksXG4gICAgICAgICAgICAgICAgfSkgfSkpLCBqc3hzKFJlc3RyaWN0ZWQsIHsgcmVxdWlyZWRHcmFudHM6IFtPd25DYXBhYmlsaXR5LlVQREFURV9DQUxMX1BFUk1JU1NJT05TXSwgY2hpbGRyZW46IFtqc3goR2VuZXJpY01lbnVCdXR0b25JdGVtLCB7IG9uQ2xpY2s6IGdyYW50UGVybWlzc2lvbihPd25DYXBhYmlsaXR5LlNFTkRfQVVESU8pLCBjaGlsZHJlbjogdCgnQWxsb3cgYXVkaW8nKSB9KSwganN4KEdlbmVyaWNNZW51QnV0dG9uSXRlbSwgeyBvbkNsaWNrOiBncmFudFBlcm1pc3Npb24oT3duQ2FwYWJpbGl0eS5TRU5EX1ZJREVPKSwgY2hpbGRyZW46IHQoJ0FsbG93IHZpZGVvJykgfSksIGpzeChHZW5lcmljTWVudUJ1dHRvbkl0ZW0sIHsgb25DbGljazogZ3JhbnRQZXJtaXNzaW9uKE93bkNhcGFiaWxpdHkuU0NSRUVOU0hBUkUpLCBjaGlsZHJlbjogdCgnQWxsb3cgc2NyZWVuIHNoYXJpbmcnKSB9KSwganN4KEdlbmVyaWNNZW51QnV0dG9uSXRlbSwgeyBvbkNsaWNrOiByZXZva2VQZXJtaXNzaW9uKE93bkNhcGFiaWxpdHkuU0VORF9BVURJTyksIGNoaWxkcmVuOiB0KCdEaXNhYmxlIGF1ZGlvJykgfSksIGpzeChHZW5lcmljTWVudUJ1dHRvbkl0ZW0sIHsgb25DbGljazogcmV2b2tlUGVybWlzc2lvbihPd25DYXBhYmlsaXR5LlNFTkRfVklERU8pLCBjaGlsZHJlbjogdCgnRGlzYWJsZSB2aWRlbycpIH0pLCBqc3goR2VuZXJpY01lbnVCdXR0b25JdGVtLCB7IG9uQ2xpY2s6IHJldm9rZVBlcm1pc3Npb24oT3duQ2FwYWJpbGl0eS5TQ1JFRU5TSEFSRSksIGNoaWxkcmVuOiB0KCdEaXNhYmxlIHNjcmVlbiBzaGFyaW5nJykgfSldIH0pXSB9KSk7XG59O1xuXG5jb25zdCB1c2VUcmFja0VsZW1lbnRWaXNpYmlsaXR5ID0gKHsgdHJhY2tlZEVsZW1lbnQsIGR5bmFzY2FsZU1hbmFnZXI6IHByb3BzRHluYXNjYWxlTWFuYWdlciwgc2Vzc2lvbklkLCB0cmFja1R5cGUsIH0pID0+IHtcbiAgICBjb25zdCBjYWxsID0gdXNlQ2FsbCgpO1xuICAgIGNvbnN0IG1hbmFnZXIgPSBwcm9wc0R5bmFzY2FsZU1hbmFnZXIgPz8gY2FsbD8uZHluYXNjYWxlTWFuYWdlcjtcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBpZiAoIXRyYWNrZWRFbGVtZW50IHx8ICFtYW5hZ2VyIHx8ICFjYWxsIHx8IHRyYWNrVHlwZSA9PT0gJ25vbmUnKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCB1bm9ic2VydmUgPSBtYW5hZ2VyLnRyYWNrRWxlbWVudFZpc2liaWxpdHkodHJhY2tlZEVsZW1lbnQsIHNlc3Npb25JZCwgdHJhY2tUeXBlKTtcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIHVub2JzZXJ2ZSgpO1xuICAgICAgICB9O1xuICAgIH0sIFt0cmFja2VkRWxlbWVudCwgbWFuYWdlciwgY2FsbCwgc2Vzc2lvbklkLCB0cmFja1R5cGVdKTtcbn07XG5cbmNvbnN0IFRvZ2dsZUJ1dHRvbiA9IGZvcndhcmRSZWYoZnVuY3Rpb24gVG9nZ2xlQnV0dG9uKHByb3BzLCByZWYpIHtcbiAgICByZXR1cm4ganN4KEljb25CdXR0b24sIHsgZW5hYmxlZDogcHJvcHMubWVudVNob3duLCBpY29uOiBcImVsbGlwc2lzXCIsIHJlZjogcmVmIH0pO1xufSk7XG5jb25zdCBEZWZhdWx0U2NyZWVuU2hhcmVPdmVybGF5ID0gKCkgPT4ge1xuICAgIGNvbnN0IGNhbGwgPSB1c2VDYWxsKCk7XG4gICAgY29uc3QgeyB0IH0gPSB1c2VJMThuKCk7XG4gICAgY29uc3Qgc3RvcFNjcmVlblNoYXJlID0gKCkgPT4ge1xuICAgICAgICBjYWxsPy5zY3JlZW5TaGFyZS5kaXNhYmxlKCk7XG4gICAgfTtcbiAgICByZXR1cm4gKGpzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19zY3JlZW4tc2hhcmUtb3ZlcmxheVwiLCBjaGlsZHJlbjogW2pzeChJY29uLCB7IGljb246IFwic2NyZWVuLXNoYXJlLW9mZlwiIH0pLCBqc3goXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fc2NyZWVuLXNoYXJlLW92ZXJsYXlfX3RpdGxlXCIsIGNoaWxkcmVuOiB0KCdZb3UgYXJlIHByZXNlbnRpbmcgeW91ciBzY3JlZW4nKSB9KSwganN4cyhcImJ1dHRvblwiLCB7IG9uQ2xpY2s6IHN0b3BTY3JlZW5TaGFyZSwgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fc2NyZWVuLXNoYXJlLW92ZXJsYXlfX2J1dHRvblwiLCBjaGlsZHJlbjogW2pzeChJY29uLCB7IGljb246IFwiY2xvc2VcIiB9KSwgXCIgXCIsIHQoJ1N0b3AgU2NyZWVuIFNoYXJpbmcnKV0gfSldIH0pKTtcbn07XG5jb25zdCBEZWZhdWx0UGFydGljaXBhbnRWaWV3VUkgPSAoeyBpbmRpY2F0b3JzVmlzaWJsZSA9IHRydWUsIG1lbnVQbGFjZW1lbnQgPSAnYm90dG9tLXN0YXJ0Jywgc2hvd01lbnVCdXR0b24gPSB0cnVlLCBQYXJ0aWNpcGFudEFjdGlvbnNDb250ZXh0TWVudTogUGFydGljaXBhbnRBY3Rpb25zQ29udGV4dE1lbnUkMSA9IFBhcnRpY2lwYW50QWN0aW9uc0NvbnRleHRNZW51LCB9KSA9PiB7XG4gICAgY29uc3QgeyBwYXJ0aWNpcGFudCwgdHJhY2tUeXBlIH0gPSB1c2VQYXJ0aWNpcGFudFZpZXdDb250ZXh0KCk7XG4gICAgY29uc3QgeyBwdWJsaXNoZWRUcmFja3MgfSA9IHBhcnRpY2lwYW50O1xuICAgIGNvbnN0IGhhc1NjcmVlblNoYXJlID0gcHVibGlzaGVkVHJhY2tzLmluY2x1ZGVzKFNmdU1vZGVscy5UcmFja1R5cGUuU0NSRUVOX1NIQVJFKTtcbiAgICBpZiAocGFydGljaXBhbnQuaXNMb2NhbFBhcnRpY2lwYW50ICYmXG4gICAgICAgIGhhc1NjcmVlblNoYXJlICYmXG4gICAgICAgIHRyYWNrVHlwZSA9PT0gJ3NjcmVlblNoYXJlVHJhY2snKSB7XG4gICAgICAgIHJldHVybiAoanN4cyhGcmFnbWVudCwgeyBjaGlsZHJlbjogW2pzeChEZWZhdWx0U2NyZWVuU2hhcmVPdmVybGF5LCB7fSksIGpzeChQYXJ0aWNpcGFudERldGFpbHMsIHsgaW5kaWNhdG9yc1Zpc2libGU6IGluZGljYXRvcnNWaXNpYmxlIH0pXSB9KSk7XG4gICAgfVxuICAgIHJldHVybiAoanN4cyhGcmFnbWVudCwgeyBjaGlsZHJlbjogW3Nob3dNZW51QnV0dG9uICYmIChqc3goTWVudVRvZ2dsZSwgeyBzdHJhdGVneTogXCJmaXhlZFwiLCBwbGFjZW1lbnQ6IG1lbnVQbGFjZW1lbnQsIFRvZ2dsZUJ1dHRvbjogVG9nZ2xlQnV0dG9uLCBjaGlsZHJlbjoganN4KFBhcnRpY2lwYW50QWN0aW9uc0NvbnRleHRNZW51JDEsIHt9KSB9KSksIGpzeChSZWFjdGlvbiwgeyBwYXJ0aWNpcGFudDogcGFydGljaXBhbnQgfSksIGpzeChQYXJ0aWNpcGFudERldGFpbHMsIHsgaW5kaWNhdG9yc1Zpc2libGU6IGluZGljYXRvcnNWaXNpYmxlIH0pXSB9KSk7XG59O1xuY29uc3QgUGFydGljaXBhbnREZXRhaWxzID0gKHsgaW5kaWNhdG9yc1Zpc2libGUgPSB0cnVlLCB9KSA9PiB7XG4gICAgY29uc3QgeyBwYXJ0aWNpcGFudCB9ID0gdXNlUGFydGljaXBhbnRWaWV3Q29udGV4dCgpO1xuICAgIGNvbnN0IHsgaXNMb2NhbFBhcnRpY2lwYW50LCBjb25uZWN0aW9uUXVhbGl0eSwgcHVibGlzaGVkVHJhY2tzLCBwaW4sIHNlc3Npb25JZCwgbmFtZSwgdXNlcklkLCB9ID0gcGFydGljaXBhbnQ7XG4gICAgY29uc3QgY2FsbCA9IHVzZUNhbGwoKTtcbiAgICBjb25zdCB7IHQgfSA9IHVzZUkxOG4oKTtcbiAgICBjb25zdCBjb25uZWN0aW9uUXVhbGl0eUFzU3RyaW5nID0gISFjb25uZWN0aW9uUXVhbGl0eSAmJlxuICAgICAgICBTZnVNb2RlbHMuQ29ubmVjdGlvblF1YWxpdHlbY29ubmVjdGlvblF1YWxpdHldLnRvTG93ZXJDYXNlKCk7XG4gICAgY29uc3QgaGFzQXVkaW8gPSBwdWJsaXNoZWRUcmFja3MuaW5jbHVkZXMoU2Z1TW9kZWxzLlRyYWNrVHlwZS5BVURJTyk7XG4gICAgY29uc3QgaGFzVmlkZW8gPSBwdWJsaXNoZWRUcmFja3MuaW5jbHVkZXMoU2Z1TW9kZWxzLlRyYWNrVHlwZS5WSURFTyk7XG4gICAgY29uc3QgY2FuVW5waW4gPSAhIXBpbiAmJiBwaW4uaXNMb2NhbFBpbjtcbiAgICByZXR1cm4gKGpzeHMoRnJhZ21lbnQsIHsgY2hpbGRyZW46IFtqc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19wYXJ0aWNpcGFudC1kZXRhaWxzXCIsIGNoaWxkcmVuOiBqc3hzKFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX3BhcnRpY2lwYW50LWRldGFpbHNfX25hbWVcIiwgY2hpbGRyZW46IFtuYW1lIHx8IHVzZXJJZCwgaW5kaWNhdG9yc1Zpc2libGUgJiYgIWhhc0F1ZGlvICYmIChqc3goXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fcGFydGljaXBhbnQtZGV0YWlsc19fbmFtZS0tYXVkaW8tbXV0ZWRcIiB9KSksIGluZGljYXRvcnNWaXNpYmxlICYmICFoYXNWaWRlbyAmJiAoanN4KFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX3BhcnRpY2lwYW50LWRldGFpbHNfX25hbWUtLXZpZGVvLW11dGVkXCIgfSkpLCBpbmRpY2F0b3JzVmlzaWJsZSAmJiBjYW5VbnBpbiAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUT0RPOiByZW1vdmUgdGhpcyBtb25zdHJvc2l0eSBvbmNlIHdlIGhhdmUgYSBwcm9wZXIgZGVzaWduXG4gICAgICAgICAgICAgICAgICAgICAgICBqc3goXCJzcGFuXCIsIHsgdGl0bGU6IHQoJ1VucGluJyksIG9uQ2xpY2s6ICgpID0+IGNhbGw/LnVucGluKHNlc3Npb25JZCksIGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX3BhcnRpY2lwYW50LWRldGFpbHNfX25hbWUtLXBpbm5lZFwiIH0pKSwgaW5kaWNhdG9yc1Zpc2libGUgJiYganN4KFNwZWVjaEluZGljYXRvciwge30pXSB9KSB9KSwgaW5kaWNhdG9yc1Zpc2libGUgJiYgKGpzeChOb3RpZmljYXRpb24sIHsgaXNWaXNpYmxlOiBpc0xvY2FsUGFydGljaXBhbnQgJiZcbiAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvblF1YWxpdHkgPT09IFNmdU1vZGVscy5Db25uZWN0aW9uUXVhbGl0eS5QT09SLCBtZXNzYWdlOiB0KCdQb29yIGNvbm5lY3Rpb24gcXVhbGl0eScpLCBjaGlsZHJlbjogY29ubmVjdGlvblF1YWxpdHlBc1N0cmluZyAmJiAoanN4KFwic3BhblwiLCB7IGNsYXNzTmFtZTogY2xzeCgnc3RyLXZpZGVvX19wYXJ0aWNpcGFudC1kZXRhaWxzX19jb25uZWN0aW9uLXF1YWxpdHknLCBgc3RyLXZpZGVvX19wYXJ0aWNpcGFudC1kZXRhaWxzX19jb25uZWN0aW9uLXF1YWxpdHktLSR7Y29ubmVjdGlvblF1YWxpdHlBc1N0cmluZ31gKSwgdGl0bGU6IGNvbm5lY3Rpb25RdWFsaXR5QXNTdHJpbmcgfSkpIH0pKV0gfSkpO1xufTtcbmNvbnN0IFNwZWVjaEluZGljYXRvciA9ICgpID0+IHtcbiAgICBjb25zdCB7IHBhcnRpY2lwYW50IH0gPSB1c2VQYXJ0aWNpcGFudFZpZXdDb250ZXh0KCk7XG4gICAgY29uc3QgeyBpc1NwZWFraW5nLCBpc0RvbWluYW50U3BlYWtlciB9ID0gcGFydGljaXBhbnQ7XG4gICAgcmV0dXJuIChqc3hzKFwic3BhblwiLCB7IGNsYXNzTmFtZTogY2xzeCgnc3RyLXZpZGVvX19zcGVlY2gtaW5kaWNhdG9yJywgaXNTcGVha2luZyAmJiAnc3RyLXZpZGVvX19zcGVlY2gtaW5kaWNhdG9yLS1zcGVha2luZycsIGlzRG9taW5hbnRTcGVha2VyICYmICdzdHItdmlkZW9fX3NwZWVjaC1pbmRpY2F0b3ItLWRvbWluYW50JyksIGNoaWxkcmVuOiBbanN4KFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX3NwZWVjaC1pbmRpY2F0b3JfX2JhclwiIH0pLCBqc3goXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fc3BlZWNoLWluZGljYXRvcl9fYmFyXCIgfSksIGpzeChcInNwYW5cIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19zcGVlY2gtaW5kaWNhdG9yX19iYXJcIiB9KV0gfSkpO1xufTtcblxuY29uc3QgUGFydGljaXBhbnRWaWV3ID0gZm9yd2FyZFJlZihmdW5jdGlvbiBQYXJ0aWNpcGFudFZpZXcoeyBwYXJ0aWNpcGFudCwgdHJhY2tUeXBlID0gJ3ZpZGVvVHJhY2snLCBtdXRlQXVkaW8sIHJlZnM6IHsgc2V0VmlkZW9FbGVtZW50LCBzZXRWaWRlb1BsYWNlaG9sZGVyRWxlbWVudCB9ID0ge30sIGNsYXNzTmFtZSwgVmlkZW9QbGFjZWhvbGRlciwgUGFydGljaXBhbnRWaWV3VUkgPSBEZWZhdWx0UGFydGljaXBhbnRWaWV3VUksIH0sIHJlZikge1xuICAgIGNvbnN0IHsgaXNMb2NhbFBhcnRpY2lwYW50LCBpc1NwZWFraW5nLCBpc0RvbWluYW50U3BlYWtlciwgcHVibGlzaGVkVHJhY2tzLCBzZXNzaW9uSWQsIH0gPSBwYXJ0aWNpcGFudDtcbiAgICBjb25zdCBoYXNBdWRpbyA9IHB1Ymxpc2hlZFRyYWNrcy5pbmNsdWRlcyhTZnVNb2RlbHMuVHJhY2tUeXBlLkFVRElPKTtcbiAgICBjb25zdCBoYXNWaWRlbyA9IHB1Ymxpc2hlZFRyYWNrcy5pbmNsdWRlcyhTZnVNb2RlbHMuVHJhY2tUeXBlLlZJREVPKTtcbiAgICBjb25zdCBoYXNTY3JlZW5TaGFyZUF1ZGlvID0gcHVibGlzaGVkVHJhY2tzLmluY2x1ZGVzKFNmdU1vZGVscy5UcmFja1R5cGUuU0NSRUVOX1NIQVJFX0FVRElPKTtcbiAgICBjb25zdCBbdHJhY2tlZEVsZW1lbnQsIHNldFRyYWNrZWRFbGVtZW50XSA9IHVzZVN0YXRlKG51bGwpO1xuICAgIGNvbnN0IFtjb250ZXh0VmlkZW9FbGVtZW50LCBzZXRDb250ZXh0VmlkZW9FbGVtZW50XSA9IHVzZVN0YXRlKG51bGwpO1xuICAgIGNvbnN0IFtjb250ZXh0VmlkZW9QbGFjZWhvbGRlckVsZW1lbnQsIHNldENvbnRleHRWaWRlb1BsYWNlaG9sZGVyRWxlbWVudF0gPSB1c2VTdGF0ZShudWxsKTtcbiAgICAvLyBUT0RPOiBhbGxvdyB0byBwYXNzIGN1c3RvbSBWaWV3cG9ydFRyYWNrZXIgaW5zdGFuY2UgZnJvbSBwcm9wc1xuICAgIHVzZVRyYWNrRWxlbWVudFZpc2liaWxpdHkoe1xuICAgICAgICBzZXNzaW9uSWQsXG4gICAgICAgIHRyYWNrZWRFbGVtZW50LFxuICAgICAgICB0cmFja1R5cGUsXG4gICAgfSk7XG4gICAgY29uc3QgcGFydGljaXBhbnRWaWV3Q29udGV4dFZhbHVlID0gdXNlTWVtbygoKSA9PiAoe1xuICAgICAgICBwYXJ0aWNpcGFudCxcbiAgICAgICAgcGFydGljaXBhbnRWaWV3RWxlbWVudDogdHJhY2tlZEVsZW1lbnQsXG4gICAgICAgIHZpZGVvRWxlbWVudDogY29udGV4dFZpZGVvRWxlbWVudCxcbiAgICAgICAgdmlkZW9QbGFjZWhvbGRlckVsZW1lbnQ6IGNvbnRleHRWaWRlb1BsYWNlaG9sZGVyRWxlbWVudCxcbiAgICAgICAgdHJhY2tUeXBlLFxuICAgIH0pLCBbXG4gICAgICAgIGNvbnRleHRWaWRlb0VsZW1lbnQsXG4gICAgICAgIGNvbnRleHRWaWRlb1BsYWNlaG9sZGVyRWxlbWVudCxcbiAgICAgICAgcGFydGljaXBhbnQsXG4gICAgICAgIHRyYWNrZWRFbGVtZW50LFxuICAgICAgICB0cmFja1R5cGUsXG4gICAgXSk7XG4gICAgY29uc3QgdmlkZW9SZWZzID0gdXNlTWVtbygoKSA9PiAoe1xuICAgICAgICBzZXRWaWRlb0VsZW1lbnQ6IChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICBzZXRWaWRlb0VsZW1lbnQ/LihlbGVtZW50KTtcbiAgICAgICAgICAgIHNldENvbnRleHRWaWRlb0VsZW1lbnQoZWxlbWVudCk7XG4gICAgICAgIH0sXG4gICAgICAgIHNldFZpZGVvUGxhY2Vob2xkZXJFbGVtZW50OiAoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgc2V0VmlkZW9QbGFjZWhvbGRlckVsZW1lbnQ/LihlbGVtZW50KTtcbiAgICAgICAgICAgIHNldENvbnRleHRWaWRlb1BsYWNlaG9sZGVyRWxlbWVudChlbGVtZW50KTtcbiAgICAgICAgfSxcbiAgICB9KSwgW3NldFZpZGVvRWxlbWVudCwgc2V0VmlkZW9QbGFjZWhvbGRlckVsZW1lbnRdKTtcbiAgICByZXR1cm4gKGpzeChcImRpdlwiLCB7IFwiZGF0YS10ZXN0aWRcIjogXCJwYXJ0aWNpcGFudC12aWV3XCIsIHJlZjogKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIGFwcGx5RWxlbWVudFRvUmVmKHJlZiwgZWxlbWVudCk7XG4gICAgICAgICAgICBzZXRUcmFja2VkRWxlbWVudChlbGVtZW50KTtcbiAgICAgICAgfSwgY2xhc3NOYW1lOiBjbHN4KCdzdHItdmlkZW9fX3BhcnRpY2lwYW50LXZpZXcnLCBpc0RvbWluYW50U3BlYWtlciAmJiAnc3RyLXZpZGVvX19wYXJ0aWNpcGFudC12aWV3LS1kb21pbmFudC1zcGVha2VyJywgaXNTcGVha2luZyAmJiAnc3RyLXZpZGVvX19wYXJ0aWNpcGFudC12aWV3LS1zcGVha2luZycsICFoYXNWaWRlbyAmJiAnc3RyLXZpZGVvX19wYXJ0aWNpcGFudC12aWV3LS1uby12aWRlbycsICFoYXNBdWRpbyAmJiAnc3RyLXZpZGVvX19wYXJ0aWNpcGFudC12aWV3LS1uby1hdWRpbycsIGNsYXNzTmFtZSksIGNoaWxkcmVuOiBqc3hzKFBhcnRpY2lwYW50Vmlld0NvbnRleHQuUHJvdmlkZXIsIHsgdmFsdWU6IHBhcnRpY2lwYW50Vmlld0NvbnRleHRWYWx1ZSwgY2hpbGRyZW46IFshaXNMb2NhbFBhcnRpY2lwYW50ICYmICFtdXRlQXVkaW8gJiYgKGpzeHMoRnJhZ21lbnQsIHsgY2hpbGRyZW46IFtoYXNBdWRpbyAmJiAoanN4KEF1ZGlvLCB7IHBhcnRpY2lwYW50OiBwYXJ0aWNpcGFudCwgdHJhY2tUeXBlOiBcImF1ZGlvVHJhY2tcIiB9KSksIGhhc1NjcmVlblNoYXJlQXVkaW8gJiYgKGpzeChBdWRpbywgeyBwYXJ0aWNpcGFudDogcGFydGljaXBhbnQsIHRyYWNrVHlwZTogXCJzY3JlZW5TaGFyZUF1ZGlvVHJhY2tcIiB9KSldIH0pKSwganN4KFZpZGVvJDEsIHsgVmlkZW9QbGFjZWhvbGRlcjogVmlkZW9QbGFjZWhvbGRlciwgcGFydGljaXBhbnQ6IHBhcnRpY2lwYW50LCB0cmFja1R5cGU6IHRyYWNrVHlwZSwgcmVmczogdmlkZW9SZWZzLCBhdXRvUGxheTogdHJ1ZSB9KSwgaXNDb21wb25lbnRUeXBlKFBhcnRpY2lwYW50Vmlld1VJKSA/IChqc3goUGFydGljaXBhbnRWaWV3VUksIHt9KSkgOiAoUGFydGljaXBhbnRWaWV3VUkpXSB9KSB9KSk7XG59KTtcblxuLy8gcmUtZXhwb3J0aW5nIHRoZSBTdHJlYW1DYWxsUHJvdmlkZXIgYXMgU3RyZWFtQ2FsbFxuY29uc3QgU3RyZWFtQ2FsbCA9IFN0cmVhbUNhbGxQcm92aWRlcjtcblxudmFyIEpvaW5pbmcgPSBcIkpvaW5pbmdcIjtcbnZhciBNaWMgPSBcIk1pY1wiO1xudmFyIFJpbmdpbmcgPSBcIlJpbmdpbmdcIjtcbnZhciBTcGVha2VycyA9IFwiU3BlYWtlcnNcIjtcbnZhciBWaWRlbyA9IFwiVmlkZW9cIjtcbnZhciBMaXZlID0gXCJMaXZlXCI7XG52YXIgUmVhY3Rpb25zID0gXCJSZWFjdGlvbnNcIjtcbnZhciBTdGF0aXN0aWNzID0gXCJTdGF0aXN0aWNzXCI7XG52YXIgSW52aXRlID0gXCJJbnZpdGVcIjtcbnZhciBKb2luID0gXCJKb2luXCI7XG52YXIgWW91ID0gXCJZb3VcIjtcbnZhciBNZSA9IFwiTWVcIjtcbnZhciBVbmtub3duID0gXCJVbmtub3duXCI7XG52YXIgUmVmcmVzaCA9IFwiUmVmcmVzaFwiO1xudmFyIEFsbG93ID0gXCJBbGxvd1wiO1xudmFyIFJldm9rZSA9IFwiUmV2b2tlXCI7XG52YXIgRGlzbWlzcyA9IFwiRGlzbWlzc1wiO1xudmFyIFBpbm5lZCA9IFwiUGlubmVkXCI7XG52YXIgVW5waW4gPSBcIlVucGluXCI7XG52YXIgUGluID0gXCJQaW5cIjtcbnZhciBCbG9jayA9IFwiQmxvY2tcIjtcbnZhciBFbnRlciA9IFwiRW50ZXJcIjtcbnZhciBMZWF2ZSA9IFwiTGVhdmVcIjtcbnZhciBQYXJ0aWNpcGFudHMgPSBcIlBhcnRpY2lwYW50c1wiO1xudmFyIEFub255bW91cyA9IFwiLCBhbmQgKHt7IGNvdW50IH19KSBhbm9ueW1vdXNcIjtcbnZhciBlbiA9IHtcblx0Sm9pbmluZzogSm9pbmluZyxcblx0TWljOiBNaWMsXG5cdFwiTm8gaW50ZXJuZXQgY29ubmVjdGlvblwiOiBcIk5vIGludGVybmV0IGNvbm5lY3Rpb25cIixcblx0XCJSZS1jb25uZWN0aW5nXCI6IFwiUmUtY29ubmVjdGluZ1wiLFxuXHRSaW5naW5nOiBSaW5naW5nLFxuXHRcIlNjcmVlbiBTaGFyZVwiOiBcIlNjcmVlbiBTaGFyZVwiLFxuXHRcIlNlbGVjdCBhIENhbWVyYVwiOiBcIlNlbGVjdCBhIENhbWVyYVwiLFxuXHRcIlNlbGVjdCBhIE1pY1wiOiBcIlNlbGVjdCBhIE1pY1wiLFxuXHRcIlNlbGVjdCBTcGVha2Vyc1wiOiBcIlNlbGVjdCBTcGVha2Vyc1wiLFxuXHRTcGVha2VyczogU3BlYWtlcnMsXG5cdFZpZGVvOiBWaWRlbyxcblx0XCJZb3UgYXJlIG11dGVkLiBVbm11dGUgdG8gc3BlYWsuXCI6IFwiWW91IGFyZSBtdXRlZC4gVW5tdXRlIHRvIHNwZWFrLlwiLFxuXHRMaXZlOiBMaXZlLFxuXHRcIllvdSBjYW4gbm93IHNwZWFrLlwiOiBcIllvdSBjYW4gbm93IHNwZWFrLlwiLFxuXHRcIkF3YWl0aW5nIGZvciBhbiBhcHByb3ZhbCB0byBzcGVhay5cIjogXCJBd2FpdGluZyBmb3IgYW4gYXBwcm92YWwgdG8gc3BlYWsuXCIsXG5cdFwiWW91IGNhbiBubyBsb25nZXIgc3BlYWsuXCI6IFwiWW91IGNhbiBubyBsb25nZXIgc3BlYWsuXCIsXG5cdFwiWW91IGNhbiBub3cgc2hhcmUgeW91ciB2aWRlby5cIjogXCJZb3UgY2FuIG5vdyBzaGFyZSB5b3VyIHZpZGVvLlwiLFxuXHRcIkF3YWl0aW5nIGZvciBhbiBhcHByb3ZhbCB0byBzaGFyZSB5b3VyIHZpZGVvLlwiOiBcIkF3YWl0aW5nIGZvciBhbiBhcHByb3ZhbCB0byBzaGFyZSB5b3VyIHZpZGVvLlwiLFxuXHRcIllvdSBjYW4gbm8gbG9uZ2VyIHNoYXJlIHlvdXIgdmlkZW8uXCI6IFwiWW91IGNhbiBubyBsb25nZXIgc2hhcmUgeW91ciB2aWRlby5cIixcblx0XCJXYWl0aW5nIGZvciByZWNvcmRpbmcgdG8gc3RvcC4uLlwiOiBcIldhaXRpbmcgZm9yIHJlY29yZGluZyB0byBzdG9wLi4uXCIsXG5cdFwiV2FpdGluZyBmb3IgcmVjb3JkaW5nIHRvIHN0YXJ0Li4uXCI6IFwiV2FpdGluZyBmb3IgcmVjb3JkaW5nIHRvIHN0YXJ0Li4uXCIsXG5cdFwiUmVjb3JkIGNhbGxcIjogXCJSZWNvcmQgY2FsbFwiLFxuXHRSZWFjdGlvbnM6IFJlYWN0aW9ucyxcblx0U3RhdGlzdGljczogU3RhdGlzdGljcyxcblx0XCJZb3UgY2FuIG5vdyBzaGFyZSB5b3VyIHNjcmVlbi5cIjogXCJZb3UgY2FuIG5vdyBzaGFyZSB5b3VyIHNjcmVlbi5cIixcblx0XCJBd2FpdGluZyBmb3IgYW4gYXBwcm92YWwgdG8gc2hhcmUgc2NyZWVuLlwiOiBcIkF3YWl0aW5nIGZvciBhbiBhcHByb3ZhbCB0byBzaGFyZSBzY3JlZW4uXCIsXG5cdFwiWW91IGNhbiBubyBsb25nZXIgc2hhcmUgeW91ciBzY3JlZW4uXCI6IFwiWW91IGNhbiBubyBsb25nZXIgc2hhcmUgeW91ciBzY3JlZW4uXCIsXG5cdFwiU2hhcmUgc2NyZWVuXCI6IFwiU2hhcmUgc2NyZWVuXCIsXG5cdFwiSW5jb21pbmcgQ2FsbC4uLlwiOiBcIkluY29taW5nIENhbGwuLi5cIixcblx0XCJDYWxsaW5nLi4uXCI6IFwiQ2FsbGluZy4uLlwiLFxuXHRcIk11dGUgQWxsXCI6IFwiTXV0ZSBBbGxcIixcblx0SW52aXRlOiBJbnZpdGUsXG5cdEpvaW46IEpvaW4sXG5cdFlvdTogWW91LFxuXHRNZTogTWUsXG5cdFVua25vd246IFVua25vd24sXG5cdFwiVG9nZ2xlIGRldmljZSBtZW51XCI6IFwiVG9nZ2xlIGRldmljZSBtZW51XCIsXG5cdFwiQ2FsbCBSZWNvcmRpbmdzXCI6IFwiQ2FsbCBSZWNvcmRpbmdzXCIsXG5cdFJlZnJlc2g6IFJlZnJlc2gsXG5cdFwiQ2hlY2sgeW91ciBicm93c2VyIHZpZGVvIHBlcm1pc3Npb25zXCI6IFwiQ2hlY2sgeW91ciBicm93c2VyIHZpZGVvIHBlcm1pc3Npb25zXCIsXG5cdFwiVmlkZW8gcHVibGlzaGluZyBpcyBkaXNhYmxlZCBieSB0aGUgc3lzdGVtXCI6IFwiVmlkZW8gcHVibGlzaGluZyBpcyBkaXNhYmxlZCBieSB0aGUgc3lzdGVtXCIsXG5cdFwiWW91IGhhdmUgbm8gcGVybWlzc2lvbiB0byBzaGFyZSB5b3VyIHZpZGVvXCI6IFwiWW91IGhhdmUgbm8gcGVybWlzc2lvbiB0byBzaGFyZSB5b3VyIHZpZGVvXCIsXG5cdFwiWW91IGhhdmUgbm8gcGVybWlzc2lvbiB0byBzaGFyZSB5b3VyIGF1ZGlvXCI6IFwiWW91IGhhdmUgbm8gcGVybWlzc2lvbiB0byBzaGFyZSB5b3VyIGF1ZGlvXCIsXG5cdFwiWW91IGFyZSBwcmVzZW50aW5nIHlvdXIgc2NyZWVuXCI6IFwiWW91IGFyZSBwcmVzZW50aW5nIHlvdXIgc2NyZWVuXCIsXG5cdFwiU3RvcCBTY3JlZW4gU2hhcmluZ1wiOiBcIlN0b3AgU2NyZWVuIFNoYXJpbmdcIixcblx0QWxsb3c6IEFsbG93LFxuXHRSZXZva2U6IFJldm9rZSxcblx0RGlzbWlzczogRGlzbWlzcyxcblx0XCJNaWNyb3Bob25lIG9uXCI6IFwiTWljcm9waG9uZSBvblwiLFxuXHRcIk1pY3JvcGhvbmUgb2ZmXCI6IFwiTWljcm9waG9uZSBvZmZcIixcblx0XCJDYW1lcmEgb25cIjogXCJDYW1lcmEgb25cIixcblx0XCJDYW1lcmEgb2ZmXCI6IFwiQ2FtZXJhIG9mZlwiLFxuXHRcIk5vIGNhbWVyYSBmb3VuZFwiOiBcIk5vIGNhbWVyYSBmb3VuZFwiLFxuXHRcIlZpZGVvIGlzIGRpc2FibGVkXCI6IFwiVmlkZW8gaXMgZGlzYWJsZWRcIixcblx0UGlubmVkOiBQaW5uZWQsXG5cdFVucGluOiBVbnBpbixcblx0UGluOiBQaW4sXG5cdFwiUGluIGZvciBldmVyeW9uZVwiOiBcIlBpbiBmb3IgZXZlcnlvbmVcIixcblx0XCJVbnBpbiBmb3IgZXZlcnlvbmVcIjogXCJVbnBpbiBmb3IgZXZlcnlvbmVcIixcblx0QmxvY2s6IEJsb2NrLFxuXHRcIlR1cm4gb2ZmIHZpZGVvXCI6IFwiVHVybiBvZmYgdmlkZW9cIixcblx0XCJUdXJuIG9mZiBzY3JlZW4gc2hhcmVcIjogXCJUdXJuIG9mZiBzY3JlZW4gc2hhcmVcIixcblx0XCJNdXRlIGF1ZGlvXCI6IFwiTXV0ZSBhdWRpb1wiLFxuXHRcIk11dGUgc2NyZWVuIHNoYXJlIGF1ZGlvXCI6IFwiTXV0ZSBzY3JlZW4gc2hhcmUgYXVkaW9cIixcblx0XCJBbGxvdyBhdWRpb1wiOiBcIkFsbG93IGF1ZGlvXCIsXG5cdFwiQWxsb3cgdmlkZW9cIjogXCJBbGxvdyB2aWRlb1wiLFxuXHRcIkFsbG93IHNjcmVlbiBzaGFyaW5nXCI6IFwiQWxsb3cgc2NyZWVuIHNoYXJpbmdcIixcblx0XCJEaXNhYmxlIGF1ZGlvXCI6IFwiRGlzYWJsZSBhdWRpb1wiLFxuXHRcIkRpc2FibGUgdmlkZW9cIjogXCJEaXNhYmxlIHZpZGVvXCIsXG5cdFwiRGlzYWJsZSBzY3JlZW4gc2hhcmluZ1wiOiBcIkRpc2FibGUgc2NyZWVuIHNoYXJpbmdcIixcblx0RW50ZXI6IEVudGVyLFxuXHRMZWF2ZTogTGVhdmUsXG5cdFwiTGVhdmUgY2FsbFwiOiBcIkxlYXZlIGNhbGxcIixcblx0XCJFbmQgY2FsbCBmb3IgYWxsXCI6IFwiRW5kIGNhbGwgZm9yIGFsbFwiLFxuXHRcInt7IGRpcmVjdGlvbiB9fSBmdWxsc2NyZWVuXCI6IFwie3sgZGlyZWN0aW9uIH19IGZ1bGxzY3JlZW5cIixcblx0XCJ7eyBkaXJlY3Rpb24gfX0gcGljdHVyZS1pbi1waWN0dXJlXCI6IFwie3sgZGlyZWN0aW9uIH19IHBpY3R1cmUtaW4tcGljdHVyZVwiLFxuXHRcIkRvbWluYW50IFNwZWFrZXJcIjogXCJEb21pbmFudCBTcGVha2VyXCIsXG5cdFwiUG9vciBjb25uZWN0aW9uIHF1YWxpdHlcIjogXCJQb29yIGNvbm5lY3Rpb24gcXVhbGl0eS4gUGxlYXNlIGNoZWNrIHlvdXIgaW50ZXJuZXQgY29ubmVjdGlvbi5cIixcblx0UGFydGljaXBhbnRzOiBQYXJ0aWNpcGFudHMsXG5cdEFub255bW91czogQW5vbnltb3VzLFxuXHRcIk5vIHBhcnRpY2lwYW50cyBmb3VuZFwiOiBcIk5vIHBhcnRpY2lwYW50cyBmb3VuZFwiLFxuXHRcIlBhcnRpY2lwYW50cyAoe3sgbnVtYmVyT2ZQYXJ0aWNpcGFudHMgfX0pXCI6IFwiUGFydGljaXBhbnRzICh7eyBudW1iZXJPZlBhcnRpY2lwYW50cyB9fSlcIixcblx0XCJ7eyB1c2VyTmFtZSB9fSBpcyBzaGFyaW5nIHRoZWlyIHNjcmVlblwiOiBcInt7IHVzZXJOYW1lIH19IGlzIHNoYXJpbmcgdGhlaXIgc2NyZWVuXCIsXG5cdFwie3sgdXNlck5hbWUgfX0gaXMgcmVxdWVzdGluZyB0byBzcGVha1wiOiBcInt7IHVzZXJOYW1lIH19IGlzIHJlcXVlc3RpbmcgdG8gc3BlYWtcIixcblx0XCJ7eyB1c2VyTmFtZSB9fSBpcyByZXF1ZXN0aW5nIHRvIHNoYXJlIHRoZWlyIGNhbWVyYVwiOiBcInt7IHVzZXJOYW1lIH19IGlzIHJlcXVlc3RpbmcgdG8gc2hhcmUgdGhlaXIgY2FtZXJhXCIsXG5cdFwie3sgdXNlck5hbWUgfX0gaXMgcmVxdWVzdGluZyB0byBwcmVzZW50IHRoZWlyIHNjcmVlblwiOiBcInt7IHVzZXJOYW1lIH19IGlzIHJlcXVlc3RpbmcgdG8gcHJlc2VudCB0aGVpciBzY3JlZW5cIixcblx0XCJ7eyB1c2VyTmFtZSB9fSBpcyByZXF1ZXN0aW5nIHBlcm1pc3Npb246IHt7IHBlcm1pc3Npb24gfX1cIjogXCJ7eyB1c2VyTmFtZSB9fSBpcyByZXF1ZXN0aW5nIHBlcm1pc3Npb246IHt7IHBlcm1pc3Npb24gfX1cIlxufTtcblxuY29uc3QgdHJhbnNsYXRpb25zID0geyBlbiB9O1xuXG5jb25zdCBTdHJlYW1WaWRlbyA9IChwcm9wcykgPT4ge1xuICAgIHJldHVybiAoanN4KFN0cmVhbVZpZGVvUHJvdmlkZXIsIHsgdHJhbnNsYXRpb25zT3ZlcnJpZGVzOiB0cmFuc2xhdGlvbnMsIC4uLnByb3BzIH0pKTtcbn07XG5cbmNvbnN0IHVzZVBhZ2luYXRlZExheW91dFNvcnRQcmVzZXQgPSAoY2FsbCkgPT4ge1xuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmICghY2FsbClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY2FsbC5zZXRTb3J0UGFydGljaXBhbnRzQnkocGFnaW5hdGVkTGF5b3V0U29ydFByZXNldCk7XG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICByZXNldFNvcnRQcmVzZXQoY2FsbCk7XG4gICAgICAgIH07XG4gICAgfSwgW2NhbGxdKTtcbn07XG5jb25zdCB1c2VTcGVha2VyTGF5b3V0U29ydFByZXNldCA9IChjYWxsLCBpc09uZU9uT25lQ2FsbCkgPT4ge1xuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmICghY2FsbClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgLy8gYWx3YXlzIHNob3cgdGhlIHJlbW90ZSBwYXJ0aWNpcGFudCBpbiB0aGUgc3BvdGxpZ2h0XG4gICAgICAgIGlmIChpc09uZU9uT25lQ2FsbCkge1xuICAgICAgICAgICAgY2FsbC5zZXRTb3J0UGFydGljaXBhbnRzQnkoY29tYmluZUNvbXBhcmF0b3JzKHNjcmVlblNoYXJpbmcsIGxvZ2dlZEluKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjYWxsLnNldFNvcnRQYXJ0aWNpcGFudHNCeShzcGVha2VyTGF5b3V0U29ydFByZXNldCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIHJlc2V0U29ydFByZXNldChjYWxsKTtcbiAgICAgICAgfTtcbiAgICB9LCBbY2FsbCwgaXNPbmVPbk9uZUNhbGxdKTtcbn07XG5jb25zdCByZXNldFNvcnRQcmVzZXQgPSAoY2FsbCkgPT4ge1xuICAgIC8vIHJlc2V0IHRoZSBzb3J0aW5nIHRvIHRoZSBkZWZhdWx0IGZvciB0aGUgY2FsbCB0eXBlXG4gICAgY29uc3QgY2FsbENvbmZpZyA9IENhbGxUeXBlcy5nZXQoY2FsbC50eXBlKTtcbiAgICBjYWxsLnNldFNvcnRQYXJ0aWNpcGFudHNCeShjYWxsQ29uZmlnLm9wdGlvbnMuc29ydFBhcnRpY2lwYW50c0J5IHx8IGRlZmF1bHRTb3J0UHJlc2V0KTtcbn07XG5jb25zdCBsb2dnZWRJbiA9IChhLCBiKSA9PiB7XG4gICAgaWYgKGEuaXNMb2NhbFBhcnRpY2lwYW50KVxuICAgICAgICByZXR1cm4gMTtcbiAgICBpZiAoYi5pc0xvY2FsUGFydGljaXBhbnQpXG4gICAgICAgIHJldHVybiAtMTtcbiAgICByZXR1cm4gMDtcbn07XG5cbmNvbnN0IExpdmVzdHJlYW1MYXlvdXQgPSAocHJvcHMpID0+IHtcbiAgICBjb25zdCB7IHVzZVBhcnRpY2lwYW50cywgdXNlUmVtb3RlUGFydGljaXBhbnRzLCB1c2VIYXNPbmdvaW5nU2NyZWVuU2hhcmUgfSA9IHVzZUNhbGxTdGF0ZUhvb2tzKCk7XG4gICAgY29uc3QgY2FsbCA9IHVzZUNhbGwoKTtcbiAgICBjb25zdCBbY3VycmVudFNwZWFrZXIsIC4uLm90aGVyUGFydGljaXBhbnRzXSA9IHVzZVBhcnRpY2lwYW50cygpO1xuICAgIGNvbnN0IHJlbW90ZVBhcnRpY2lwYW50cyA9IHVzZVJlbW90ZVBhcnRpY2lwYW50cygpO1xuICAgIGNvbnN0IGhhc09uZ29pbmdTY3JlZW5TaGFyZSA9IHVzZUhhc09uZ29pbmdTY3JlZW5TaGFyZSgpO1xuICAgIGNvbnN0IHByZXNlbnRlciA9IGhhc09uZ29pbmdTY3JlZW5TaGFyZVxuICAgICAgICA/IGhhc1NjcmVlblNoYXJlJDEoY3VycmVudFNwZWFrZXIpICYmIGN1cnJlbnRTcGVha2VyXG4gICAgICAgIDogb3RoZXJQYXJ0aWNpcGFudHMuZmluZChoYXNTY3JlZW5TaGFyZSQxKTtcbiAgICB1c2VQYWdpbmF0ZWRMYXlvdXRTb3J0UHJlc2V0KGNhbGwpO1xuICAgIGNvbnN0IE92ZXJsYXkgPSAoanN4KFBhcnRpY2lwYW50T3ZlcmxheSwgeyBzaG93UGFydGljaXBhbnRDb3VudDogcHJvcHMuc2hvd1BhcnRpY2lwYW50Q291bnQsIHNob3dEdXJhdGlvbjogcHJvcHMuc2hvd0R1cmF0aW9uLCBzaG93TGl2ZUJhZGdlOiBwcm9wcy5zaG93TGl2ZUJhZGdlLCBzaG93U3BlYWtlck5hbWU6IHByb3BzLnNob3dTcGVha2VyTmFtZSB9KSk7XG4gICAgY29uc3QgeyBmbG9hdGluZ1BhcnRpY2lwYW50UHJvcHMgfSA9IHByb3BzO1xuICAgIGNvbnN0IEZsb2F0aW5nUGFydGljaXBhbnRPdmVybGF5ID0gaGFzT25nb2luZ1NjcmVlblNoYXJlICYmIChqc3goUGFydGljaXBhbnRPdmVybGF5XG4gICAgLy8gdGhlc2UgZWxlbWVudHMgYXJlbid0IG5lZWRlZCBmb3IgdGhlIHZpZGVvIGZlZWRcbiAgICAsIHsgXG4gICAgICAgIC8vIHRoZXNlIGVsZW1lbnRzIGFyZW4ndCBuZWVkZWQgZm9yIHRoZSB2aWRlbyBmZWVkXG4gICAgICAgIHNob3dQYXJ0aWNpcGFudENvdW50OiBmbG9hdGluZ1BhcnRpY2lwYW50UHJvcHM/LnNob3dQYXJ0aWNpcGFudENvdW50ID8/IGZhbHNlLCBzaG93RHVyYXRpb246IGZsb2F0aW5nUGFydGljaXBhbnRQcm9wcz8uc2hvd0R1cmF0aW9uID8/IGZhbHNlLCBzaG93TGl2ZUJhZGdlOiBmbG9hdGluZ1BhcnRpY2lwYW50UHJvcHM/LnNob3dMaXZlQmFkZ2UgPz8gZmFsc2UsIHNob3dTcGVha2VyTmFtZTogZmxvYXRpbmdQYXJ0aWNpcGFudFByb3BzPy5zaG93U3BlYWtlck5hbWUgPz8gdHJ1ZSB9KSk7XG4gICAgcmV0dXJuIChqc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fbGl2ZXN0cmVhbS1sYXlvdXRfX3dyYXBwZXJcIiwgY2hpbGRyZW46IFtqc3goUGFydGljaXBhbnRzQXVkaW8sIHsgcGFydGljaXBhbnRzOiByZW1vdGVQYXJ0aWNpcGFudHMgfSksIGhhc09uZ29pbmdTY3JlZW5TaGFyZSAmJiBwcmVzZW50ZXIgJiYgKGpzeChQYXJ0aWNpcGFudFZpZXcsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fbGl2ZXN0cmVhbS1sYXlvdXRfX3NjcmVlbi1zaGFyZVwiLCBwYXJ0aWNpcGFudDogcHJlc2VudGVyLCBQYXJ0aWNpcGFudFZpZXdVSTogT3ZlcmxheSwgdHJhY2tUeXBlOiBcInNjcmVlblNoYXJlVHJhY2tcIiwgbXV0ZUF1ZGlvIC8vIGF1ZGlvIGlzIHJlbmRlcmVkIGJ5IFBhcnRpY2lwYW50c0F1ZGlvXG4gICAgICAgICAgICAgICAgOiB0cnVlIH0pKSwgY3VycmVudFNwZWFrZXIgJiYgKGpzeChQYXJ0aWNpcGFudFZpZXcsIHsgY2xhc3NOYW1lOiBjbHN4KGhhc09uZ29pbmdTY3JlZW5TaGFyZSAmJlxuICAgICAgICAgICAgICAgICAgICBjbHN4KCdzdHItdmlkZW9fX2xpdmVzdHJlYW0tbGF5b3V0X19mbG9hdGluZy1wYXJ0aWNpcGFudCcsIGBzdHItdmlkZW9fX2xpdmVzdHJlYW0tbGF5b3V0X19mbG9hdGluZy1wYXJ0aWNpcGFudC0tJHtmbG9hdGluZ1BhcnRpY2lwYW50UHJvcHM/LnBvc2l0aW9uID8/ICd0b3AtcmlnaHQnfWApKSwgcGFydGljaXBhbnQ6IGN1cnJlbnRTcGVha2VyLCBQYXJ0aWNpcGFudFZpZXdVSTogRmxvYXRpbmdQYXJ0aWNpcGFudE92ZXJsYXkgfHwgT3ZlcmxheSwgbXV0ZUF1ZGlvIC8vIGF1ZGlvIGlzIHJlbmRlcmVkIGJ5IFBhcnRpY2lwYW50c0F1ZGlvXG4gICAgICAgICAgICAgICAgOiB0cnVlIH0pKV0gfSkpO1xufTtcbmNvbnN0IGhhc1NjcmVlblNoYXJlJDEgPSAocCkgPT4gISFwPy5wdWJsaXNoZWRUcmFja3MuaW5jbHVkZXMoU2Z1TW9kZWxzLlRyYWNrVHlwZS5TQ1JFRU5fU0hBUkUpO1xuY29uc3QgUGFydGljaXBhbnRPdmVybGF5ID0gKHByb3BzKSA9PiB7XG4gICAgY29uc3QgeyBlbmFibGVGdWxsU2NyZWVuID0gdHJ1ZSwgc2hvd1BhcnRpY2lwYW50Q291bnQgPSB0cnVlLCBzaG93RHVyYXRpb24gPSB0cnVlLCBzaG93TGl2ZUJhZGdlID0gdHJ1ZSwgc2hvd1NwZWFrZXJOYW1lID0gZmFsc2UsIH0gPSBwcm9wcztcbiAgICBjb25zdCB7IHBhcnRpY2lwYW50IH0gPSB1c2VQYXJ0aWNpcGFudFZpZXdDb250ZXh0KCk7XG4gICAgY29uc3QgeyB1c2VQYXJ0aWNpcGFudENvdW50IH0gPSB1c2VDYWxsU3RhdGVIb29rcygpO1xuICAgIGNvbnN0IHBhcnRpY2lwYW50Q291bnQgPSB1c2VQYXJ0aWNpcGFudENvdW50KCk7XG4gICAgY29uc3QgZHVyYXRpb24gPSB1c2VVcGRhdGVDYWxsRHVyYXRpb24oKTtcbiAgICBjb25zdCB0b2dnbGVGdWxsU2NyZWVuID0gdXNlVG9nZ2xlRnVsbFNjcmVlbigpO1xuICAgIGNvbnN0IHsgdCB9ID0gdXNlSTE4bigpO1xuICAgIHJldHVybiAoanN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fbGl2ZXN0cmVhbS1sYXlvdXRfX292ZXJsYXlcIiwgY2hpbGRyZW46IGpzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19saXZlc3RyZWFtLWxheW91dF9fb3ZlcmxheV9fYmFyXCIsIGNoaWxkcmVuOiBbc2hvd0xpdmVCYWRnZSAmJiAoanN4KFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX2xpdmVzdHJlYW0tbGF5b3V0X19saXZlLWJhZGdlXCIsIGNoaWxkcmVuOiB0KCdMaXZlJykgfSkpLCBzaG93UGFydGljaXBhbnRDb3VudCAmJiAoanN4KFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX2xpdmVzdHJlYW0tbGF5b3V0X192aWV3ZXJzLWNvdW50XCIsIGNoaWxkcmVuOiBwYXJ0aWNpcGFudENvdW50IH0pKSwgc2hvd1NwZWFrZXJOYW1lICYmIChqc3goXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fbGl2ZXN0cmVhbS1sYXlvdXRfX3NwZWFrZXItbmFtZVwiLCB0aXRsZTogcGFydGljaXBhbnQubmFtZSB8fCBwYXJ0aWNpcGFudC51c2VySWQgfHwgJycsIGNoaWxkcmVuOiBwYXJ0aWNpcGFudC5uYW1lIHx8IHBhcnRpY2lwYW50LnVzZXJJZCB8fCAnJyB9KSksIHNob3dEdXJhdGlvbiAmJiAoanN4KFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX2xpdmVzdHJlYW0tbGF5b3V0X19kdXJhdGlvblwiLCBjaGlsZHJlbjogZm9ybWF0RHVyYXRpb24oZHVyYXRpb24pIH0pKSwgZW5hYmxlRnVsbFNjcmVlbiAmJiAoanN4KFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX2xpdmVzdHJlYW0tbGF5b3V0X19nby1mdWxsc2NyZWVuXCIsIG9uQ2xpY2s6IHRvZ2dsZUZ1bGxTY3JlZW4gfSkpXSB9KSB9KSk7XG59O1xuY29uc3QgdXNlVXBkYXRlQ2FsbER1cmF0aW9uID0gKCkgPT4ge1xuICAgIGNvbnN0IHsgdXNlSXNDYWxsTGl2ZSwgdXNlQ2FsbFNlc3Npb24gfSA9IHVzZUNhbGxTdGF0ZUhvb2tzKCk7XG4gICAgY29uc3QgaXNDYWxsTGl2ZSA9IHVzZUlzQ2FsbExpdmUoKTtcbiAgICBjb25zdCBzZXNzaW9uID0gdXNlQ2FsbFNlc3Npb24oKTtcbiAgICBjb25zdCBbZHVyYXRpb24sIHNldER1cmF0aW9uXSA9IHVzZVN0YXRlKCgpID0+IHtcbiAgICAgICAgaWYgKCFzZXNzaW9uIHx8ICFzZXNzaW9uLmxpdmVfc3RhcnRlZF9hdClcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICBjb25zdCBsaXZlU3RhcnRUaW1lID0gbmV3IERhdGUoc2Vzc2lvbi5saXZlX3N0YXJ0ZWRfYXQpO1xuICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcigobm93LmdldFRpbWUoKSAtIGxpdmVTdGFydFRpbWUuZ2V0VGltZSgpKSAvIDEwMDApO1xuICAgIH0pO1xuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmICghaXNDYWxsTGl2ZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3QgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgICAgICBzZXREdXJhdGlvbigoZCkgPT4gZCArIDEpO1xuICAgICAgICB9LCAxMDAwKTtcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xuICAgICAgICB9O1xuICAgIH0sIFtpc0NhbGxMaXZlXSk7XG4gICAgcmV0dXJuIGR1cmF0aW9uO1xufTtcbmNvbnN0IHVzZVRvZ2dsZUZ1bGxTY3JlZW4gPSAoKSA9PiB7XG4gICAgY29uc3QgeyBwYXJ0aWNpcGFudFZpZXdFbGVtZW50IH0gPSB1c2VQYXJ0aWNpcGFudFZpZXdDb250ZXh0KCk7XG4gICAgY29uc3QgW2lzRnVsbHNjcmVlbiwgc2V0SXNGdWxsc2NyZWVuXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgICByZXR1cm4gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgICAgICBpZiAoaXNGdWxsc2NyZWVuKSB7XG4gICAgICAgICAgICBkb2N1bWVudC5leGl0RnVsbHNjcmVlbigpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIHNldElzRnVsbHNjcmVlbihmYWxzZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHBhcnRpY2lwYW50Vmlld0VsZW1lbnQ/LnJlcXVlc3RGdWxsc2NyZWVuKCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgc2V0SXNGdWxsc2NyZWVuKHRydWUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9LCBbaXNGdWxsc2NyZWVuLCBwYXJ0aWNpcGFudFZpZXdFbGVtZW50XSk7XG59O1xuY29uc3QgZm9ybWF0RHVyYXRpb24gPSAoZHVyYXRpb25Jbk1zKSA9PiB7XG4gICAgY29uc3QgZGF5cyA9IE1hdGguZmxvb3IoZHVyYXRpb25Jbk1zIC8gODY0MDApO1xuICAgIGNvbnN0IGhvdXJzID0gTWF0aC5mbG9vcihkdXJhdGlvbkluTXMgLyAzNjAwKTtcbiAgICBjb25zdCBtaW51dGVzID0gTWF0aC5mbG9vcigoZHVyYXRpb25Jbk1zICUgMzYwMCkgLyA2MCk7XG4gICAgY29uc3Qgc2Vjb25kcyA9IGR1cmF0aW9uSW5NcyAlIDYwO1xuICAgIHJldHVybiBgJHtkYXlzID8gZGF5cyArICcgJyA6ICcnfSR7aG91cnMgPyBob3VycyArICc6JyA6ICcnfSR7bWludXRlcyA8IDEwID8gJzAnIDogJyd9JHttaW51dGVzfToke3NlY29uZHMgPCAxMCA/ICcwJyA6ICcnfSR7c2Vjb25kc31gO1xufTtcblxuY29uc3QgR1JPVVBfU0laRSA9IDE2O1xuY29uc3QgUGFnaW5hdGVkR3JpZExheW91dEdyb3VwID0gKHsgZ3JvdXAsIFZpZGVvUGxhY2Vob2xkZXIsIFBhcnRpY2lwYW50Vmlld1VJLCB9KSA9PiB7XG4gICAgcmV0dXJuIChqc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IGNsc3goJ3N0ci12aWRlb19fcGFnaW5hdGVkLWdyaWQtbGF5b3V0X19ncm91cCcsIHtcbiAgICAgICAgICAgICdzdHItdmlkZW9fX3BhZ2luYXRlZC1ncmlkLWxheW91dC0tb25lJzogZ3JvdXAubGVuZ3RoID09PSAxLFxuICAgICAgICAgICAgJ3N0ci12aWRlb19fcGFnaW5hdGVkLWdyaWQtbGF5b3V0LS10d28tZm91cic6IGdyb3VwLmxlbmd0aCA+PSAyICYmIGdyb3VwLmxlbmd0aCA8PSA0LFxuICAgICAgICAgICAgJ3N0ci12aWRlb19fcGFnaW5hdGVkLWdyaWQtbGF5b3V0LS1maXZlLW5pbmUnOiBncm91cC5sZW5ndGggPj0gNSAmJiBncm91cC5sZW5ndGggPD0gOSxcbiAgICAgICAgfSksIGNoaWxkcmVuOiBncm91cC5tYXAoKHBhcnRpY2lwYW50KSA9PiAoanN4KFBhcnRpY2lwYW50VmlldywgeyBwYXJ0aWNpcGFudDogcGFydGljaXBhbnQsIG11dGVBdWRpbzogdHJ1ZSwgVmlkZW9QbGFjZWhvbGRlcjogVmlkZW9QbGFjZWhvbGRlciwgUGFydGljaXBhbnRWaWV3VUk6IFBhcnRpY2lwYW50Vmlld1VJIH0sIHBhcnRpY2lwYW50LnNlc3Npb25JZCkpKSB9KSk7XG59O1xuY29uc3QgUGFnaW5hdGVkR3JpZExheW91dCA9ICh7IGdyb3VwU2l6ZSA9IEdST1VQX1NJWkUsIGV4Y2x1ZGVMb2NhbFBhcnRpY2lwYW50ID0gZmFsc2UsIHBhZ2VBcnJvd3NWaXNpYmxlID0gdHJ1ZSwgVmlkZW9QbGFjZWhvbGRlciwgUGFydGljaXBhbnRWaWV3VUkgPSBEZWZhdWx0UGFydGljaXBhbnRWaWV3VUksIH0pID0+IHtcbiAgICBjb25zdCBbcGFnZSwgc2V0UGFnZV0gPSB1c2VTdGF0ZSgwKTtcbiAgICBjb25zdCBbcGFnaW5hdGVkR3JpZExheW91dFdyYXBwZXJFbGVtZW50LCBzZXRQYWdpbmF0ZWRHcmlkTGF5b3V0V3JhcHBlckVsZW1lbnQsXSA9IHVzZVN0YXRlKG51bGwpO1xuICAgIGNvbnN0IGNhbGwgPSB1c2VDYWxsKCk7XG4gICAgY29uc3QgeyB1c2VQYXJ0aWNpcGFudHMsIHVzZVJlbW90ZVBhcnRpY2lwYW50cyB9ID0gdXNlQ2FsbFN0YXRlSG9va3MoKTtcbiAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSB1c2VQYXJ0aWNpcGFudHMoKTtcbiAgICAvLyB1c2VkIHRvIHJlbmRlciBhdWRpbyBlbGVtZW50c1xuICAgIGNvbnN0IHJlbW90ZVBhcnRpY2lwYW50cyA9IHVzZVJlbW90ZVBhcnRpY2lwYW50cygpO1xuICAgIHVzZVBhZ2luYXRlZExheW91dFNvcnRQcmVzZXQoY2FsbCk7XG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKCFwYWdpbmF0ZWRHcmlkTGF5b3V0V3JhcHBlckVsZW1lbnQgfHwgIWNhbGwpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IGNsZWFudXAgPSBjYWxsLnNldFZpZXdwb3J0KHBhZ2luYXRlZEdyaWRMYXlvdXRXcmFwcGVyRWxlbWVudCk7XG4gICAgICAgIHJldHVybiAoKSA9PiBjbGVhbnVwKCk7XG4gICAgfSwgW3BhZ2luYXRlZEdyaWRMYXlvdXRXcmFwcGVyRWxlbWVudCwgY2FsbF0pO1xuICAgIC8vIG9ubHkgdXNlZCB0byByZW5kZXIgdmlkZW8gZWxlbWVudHNcbiAgICBjb25zdCBwYXJ0aWNpcGFudEdyb3VwcyA9IHVzZU1lbW8oKCkgPT4gY2h1bmsoZXhjbHVkZUxvY2FsUGFydGljaXBhbnQgPyByZW1vdGVQYXJ0aWNpcGFudHMgOiBwYXJ0aWNpcGFudHMsIGdyb3VwU2l6ZSksIFtleGNsdWRlTG9jYWxQYXJ0aWNpcGFudCwgcmVtb3RlUGFydGljaXBhbnRzLCBwYXJ0aWNpcGFudHMsIGdyb3VwU2l6ZV0pO1xuICAgIGNvbnN0IHBhZ2VDb3VudCA9IHBhcnRpY2lwYW50R3JvdXBzLmxlbmd0aDtcbiAgICAvLyB1cGRhdGUgcGFnZSB3aGVuIHBhZ2UgY291bnQgaXMgcmVkdWNlZCBhbmQgc2VsZWN0ZWQgcGFnZSBubyBsb25nZXIgZXhpc3RzXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKHBhZ2UgPiBwYWdlQ291bnQgLSAxKSB7XG4gICAgICAgICAgICBzZXRQYWdlKE1hdGgubWF4KDAsIHBhZ2VDb3VudCAtIDEpKTtcbiAgICAgICAgfVxuICAgIH0sIFtwYWdlLCBwYWdlQ291bnRdKTtcbiAgICBjb25zdCBzZWxlY3RlZEdyb3VwID0gcGFydGljaXBhbnRHcm91cHNbcGFnZV07XG4gICAgaWYgKCFjYWxsKVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICByZXR1cm4gKGpzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19wYWdpbmF0ZWQtZ3JpZC1sYXlvdXRfX3dyYXBwZXJcIiwgcmVmOiBzZXRQYWdpbmF0ZWRHcmlkTGF5b3V0V3JhcHBlckVsZW1lbnQsIGNoaWxkcmVuOiBbanN4KFBhcnRpY2lwYW50c0F1ZGlvLCB7IHBhcnRpY2lwYW50czogcmVtb3RlUGFydGljaXBhbnRzIH0pLCBqc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fcGFnaW5hdGVkLWdyaWQtbGF5b3V0XCIsIGNoaWxkcmVuOiBbcGFnZUFycm93c1Zpc2libGUgJiYgcGFnZUNvdW50ID4gMSAmJiAoanN4KEljb25CdXR0b24sIHsgaWNvbjogXCJjYXJldC1sZWZ0XCIsIGRpc2FibGVkOiBwYWdlID09PSAwLCBvbkNsaWNrOiAoKSA9PiBzZXRQYWdlKChjdXJyZW50UGFnZSkgPT4gTWF0aC5tYXgoMCwgY3VycmVudFBhZ2UgLSAxKSkgfSkpLCBzZWxlY3RlZEdyb3VwICYmIChqc3goUGFnaW5hdGVkR3JpZExheW91dEdyb3VwLCB7IGdyb3VwOiBwYXJ0aWNpcGFudEdyb3Vwc1twYWdlXSwgVmlkZW9QbGFjZWhvbGRlcjogVmlkZW9QbGFjZWhvbGRlciwgUGFydGljaXBhbnRWaWV3VUk6IFBhcnRpY2lwYW50Vmlld1VJIH0pKSwgcGFnZUFycm93c1Zpc2libGUgJiYgcGFnZUNvdW50ID4gMSAmJiAoanN4KEljb25CdXR0b24sIHsgZGlzYWJsZWQ6IHBhZ2UgPT09IHBhZ2VDb3VudCAtIDEsIGljb246IFwiY2FyZXQtcmlnaHRcIiwgb25DbGljazogKCkgPT4gc2V0UGFnZSgoY3VycmVudFBhZ2UpID0+IE1hdGgubWluKHBhZ2VDb3VudCAtIDEsIGN1cnJlbnRQYWdlICsgMSkpIH0pKV0gfSldIH0pKTtcbn07XG5cbmNvbnN0IHVzZUNhbGN1bGF0ZUhhcmRMaW1pdCA9IChcbi8qKlxuICogRWxlbWVudCB0aGF0IHN0cmV0Y2hlcyB0byAxMDAlIG9mIHRoZSB3aG9sZSBsYXlvdXQgY29tcG9uZW50XG4gKi9cbndyYXBwZXJFbGVtZW50LCBcbi8qKlxuICogRWxlbWVudCB0aGF0IGRpcmVjdGx5IGhvc3RzIGluZGl2aWR1YWwgYFBhcnRpY2lwYW50Vmlld2AgKG9yIHdyYXBwZXIpIGVsZW1lbnRzXG4gKi9cbmhvc3RFbGVtZW50LCBsaW1pdCkgPT4ge1xuICAgIGNvbnN0IFtjYWxjdWxhdGVkTGltaXQsIHNldENhbGN1bGF0ZWRMaW1pdF0gPSB1c2VTdGF0ZSh7XG4gICAgICAgIHZlcnRpY2FsOiB0eXBlb2YgbGltaXQgPT09ICdudW1iZXInID8gbGltaXQgOiBudWxsLFxuICAgICAgICBob3Jpem9udGFsOiB0eXBlb2YgbGltaXQgPT09ICdudW1iZXInID8gbGltaXQgOiBudWxsLFxuICAgIH0pO1xuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmICghaG9zdEVsZW1lbnQgfHxcbiAgICAgICAgICAgICF3cmFwcGVyRWxlbWVudCB8fFxuICAgICAgICAgICAgdHlwZW9mIGxpbWl0ID09PSAnbnVtYmVyJyB8fFxuICAgICAgICAgICAgdHlwZW9mIGxpbWl0ID09PSAndW5kZWZpbmVkJylcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgbGV0IGNoaWxkV2lkdGggPSBudWxsO1xuICAgICAgICBsZXQgY2hpbGRIZWlnaHQgPSBudWxsO1xuICAgICAgICBjb25zdCByZXNpemVPYnNlcnZlciA9IG5ldyBSZXNpemVPYnNlcnZlcigoZW50cmllcywgb2JzZXJ2ZXIpID0+IHtcbiAgICAgICAgICAgIC8vIHRoaXMgcGFydCBzaG91bGQgaWRlYWxseSBydW4gYXMgbGl0dGxlIHRpbWVzIGFzIHBvc3NpYmxlXG4gICAgICAgICAgICAvLyBnZXQgY2hpbGQgbWVhc3VyZW1lbnRzIGFuZCBkaXNjb25uZWN0XG4gICAgICAgICAgICAvLyBkb2VzIG5vdCBjb25zaWRlciBkeW5hbWljYWxseSBzaXplZCBjaGlsZHJlblxuICAgICAgICAgICAgLy8gdGhpcyBob29rIGlzIGZvciBTcGVha2VyTGF5b3V0IHVzZSBvbmx5LCB3aGVyZSBjaGlsZHJlbiBpbiB0aGUgYmFyIGFyZSBmaXhlZCBzaXplXG4gICAgICAgICAgICBpZiAoZW50cmllcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hpbGQgPSBob3N0RWxlbWVudC5maXJzdENoaWxkO1xuICAgICAgICAgICAgICAgIGlmIChjaGlsZCkge1xuICAgICAgICAgICAgICAgICAgICBjaGlsZEhlaWdodCA9IGNoaWxkLmNsaWVudEhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRXaWR0aCA9IGNoaWxkLmNsaWVudFdpZHRoO1xuICAgICAgICAgICAgICAgICAgICBvYnNlcnZlci51bm9ic2VydmUoaG9zdEVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGtlZXAgdGhlIHN0YXRlIGF0IHsgdmVydGljYWw6IDEsIGhvcml6b250YWw6IDEgfVxuICAgICAgICAgICAgLy8gdW50aWwgd2UgZ2V0IHRoZSBwcm9wZXIgY2hpbGQgbWVhc3VyZW1lbnRzXG4gICAgICAgICAgICBpZiAoY2hpbGRIZWlnaHQgPT09IG51bGwgfHwgY2hpbGRXaWR0aCA9PT0gbnVsbClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBjb25zdCB2ZXJ0aWNhbCA9IE1hdGguZmxvb3Iod3JhcHBlckVsZW1lbnQuY2xpZW50SGVpZ2h0IC8gY2hpbGRIZWlnaHQpO1xuICAgICAgICAgICAgY29uc3QgaG9yaXpvbnRhbCA9IE1hdGguZmxvb3Iod3JhcHBlckVsZW1lbnQuY2xpZW50V2lkdGggLyBjaGlsZFdpZHRoKTtcbiAgICAgICAgICAgIHNldENhbGN1bGF0ZWRMaW1pdCgocHYpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAocHYudmVydGljYWwgIT09IHZlcnRpY2FsIHx8IHB2Lmhvcml6b250YWwgIT09IGhvcml6b250YWwpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHZlcnRpY2FsLCBob3Jpem9udGFsIH07XG4gICAgICAgICAgICAgICAgcmV0dXJuIHB2O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXNpemVPYnNlcnZlci5vYnNlcnZlKHdyYXBwZXJFbGVtZW50KTtcbiAgICAgICAgcmVzaXplT2JzZXJ2ZXIub2JzZXJ2ZShob3N0RWxlbWVudCk7XG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICByZXNpemVPYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgICAgIH07XG4gICAgfSwgW2hvc3RFbGVtZW50LCBsaW1pdCwgd3JhcHBlckVsZW1lbnRdKTtcbiAgICByZXR1cm4gY2FsY3VsYXRlZExpbWl0O1xufTtcblxuY29uc3QgRGVmYXVsdFBhcnRpY2lwYW50Vmlld1VJQmFyID0gKCkgPT4gKGpzeChEZWZhdWx0UGFydGljaXBhbnRWaWV3VUksIHsgbWVudVBsYWNlbWVudDogXCJ0b3AtZW5kXCIgfSkpO1xuY29uc3QgRGVmYXVsdFBhcnRpY2lwYW50Vmlld1VJU3BvdGxpZ2h0ID0gKCkgPT4ganN4KERlZmF1bHRQYXJ0aWNpcGFudFZpZXdVSSwge30pO1xuY29uc3QgU3BlYWtlckxheW91dCA9ICh7IFBhcnRpY2lwYW50Vmlld1VJQmFyID0gRGVmYXVsdFBhcnRpY2lwYW50Vmlld1VJQmFyLCBQYXJ0aWNpcGFudFZpZXdVSVNwb3RsaWdodCA9IERlZmF1bHRQYXJ0aWNpcGFudFZpZXdVSVNwb3RsaWdodCwgVmlkZW9QbGFjZWhvbGRlciwgcGFydGljaXBhbnRzQmFyUG9zaXRpb24gPSAnYm90dG9tJywgcGFydGljaXBhbnRzQmFyTGltaXQsIH0pID0+IHtcbiAgICBjb25zdCBjYWxsID0gdXNlQ2FsbCgpO1xuICAgIGNvbnN0IHsgdXNlUGFydGljaXBhbnRzLCB1c2VSZW1vdGVQYXJ0aWNpcGFudHMgfSA9IHVzZUNhbGxTdGF0ZUhvb2tzKCk7XG4gICAgY29uc3QgW3BhcnRpY2lwYW50SW5TcG90bGlnaHQsIC4uLm90aGVyUGFydGljaXBhbnRzXSA9IHVzZVBhcnRpY2lwYW50cygpO1xuICAgIGNvbnN0IHJlbW90ZVBhcnRpY2lwYW50cyA9IHVzZVJlbW90ZVBhcnRpY2lwYW50cygpO1xuICAgIGNvbnN0IFtwYXJ0aWNpcGFudHNCYXJXcmFwcGVyRWxlbWVudCwgc2V0UGFydGljaXBhbnRzQmFyV3JhcHBlckVsZW1lbnRdID0gdXNlU3RhdGUobnVsbCk7XG4gICAgY29uc3QgW3BhcnRpY2lwYW50c0JhckVsZW1lbnQsIHNldFBhcnRpY2lwYW50c0JhckVsZW1lbnRdID0gdXNlU3RhdGUobnVsbCk7XG4gICAgY29uc3QgW2J1dHRvbnNXcmFwcGVyRWxlbWVudCwgc2V0QnV0dG9uc1dyYXBwZXJFbGVtZW50XSA9IHVzZVN0YXRlKG51bGwpO1xuICAgIGNvbnN0IGlzU3BlYWtlclNjcmVlblNoYXJpbmcgPSBoYXNTY3JlZW5TaGFyZShwYXJ0aWNpcGFudEluU3BvdGxpZ2h0KTtcbiAgICBjb25zdCBoYXJkTGltaXQgPSB1c2VDYWxjdWxhdGVIYXJkTGltaXQoYnV0dG9uc1dyYXBwZXJFbGVtZW50LCBwYXJ0aWNpcGFudHNCYXJFbGVtZW50LCBwYXJ0aWNpcGFudHNCYXJMaW1pdCk7XG4gICAgY29uc3QgaXNWZXJ0aWNhbCA9IHBhcnRpY2lwYW50c0JhclBvc2l0aW9uID09PSAnbGVmdCcgfHwgcGFydGljaXBhbnRzQmFyUG9zaXRpb24gPT09ICdyaWdodCc7XG4gICAgY29uc3QgaXNIb3Jpem9udGFsID0gcGFydGljaXBhbnRzQmFyUG9zaXRpb24gPT09ICd0b3AnIHx8IHBhcnRpY2lwYW50c0JhclBvc2l0aW9uID09PSAnYm90dG9tJztcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBpZiAoIXBhcnRpY2lwYW50c0JhcldyYXBwZXJFbGVtZW50IHx8ICFjYWxsKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCBjbGVhbnVwID0gY2FsbC5zZXRWaWV3cG9ydChwYXJ0aWNpcGFudHNCYXJXcmFwcGVyRWxlbWVudCk7XG4gICAgICAgIHJldHVybiAoKSA9PiBjbGVhbnVwKCk7XG4gICAgfSwgW3BhcnRpY2lwYW50c0JhcldyYXBwZXJFbGVtZW50LCBjYWxsXSk7XG4gICAgY29uc3QgaXNPbmVPbk9uZUNhbGwgPSBvdGhlclBhcnRpY2lwYW50cy5sZW5ndGggPT09IDE7XG4gICAgdXNlU3BlYWtlckxheW91dFNvcnRQcmVzZXQoY2FsbCwgaXNPbmVPbk9uZUNhbGwpO1xuICAgIGxldCBwYXJ0aWNpcGFudHNXaXRoQXBwbGllZExpbWl0ID0gb3RoZXJQYXJ0aWNpcGFudHM7XG4gICAgY29uc3QgaGFyZExpbWl0VG9BcHBseSA9IGlzVmVydGljYWxcbiAgICAgICAgPyBoYXJkTGltaXQudmVydGljYWxcbiAgICAgICAgOiBoYXJkTGltaXQuaG9yaXpvbnRhbDtcbiAgICBpZiAodHlwZW9mIHBhcnRpY2lwYW50c0JhckxpbWl0ICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICBoYXJkTGltaXRUb0FwcGx5ICE9PSBudWxsKSB7XG4gICAgICAgIHBhcnRpY2lwYW50c1dpdGhBcHBsaWVkTGltaXQgPSBvdGhlclBhcnRpY2lwYW50cy5zbGljZSgwLCBcbiAgICAgICAgLy8gc3VidHJhY3QgMSBpZiBzcGVha2VyIGlzIHNoYXJpbmcgc2NyZWVuIGFzXG4gICAgICAgIC8vIHRoYXQgb25lIGlzIHJlbmRlcmVkIGluZGVwZW5kZW50bHkgZnJvbSBvdGhlclBhcnRpY2lwYW50cyBhcnJheVxuICAgICAgICBoYXJkTGltaXRUb0FwcGx5IC0gKGlzU3BlYWtlclNjcmVlblNoYXJpbmcgPyAxIDogMCkpO1xuICAgIH1cbiAgICBpZiAoIWNhbGwpXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIHJldHVybiAoanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX3NwZWFrZXItbGF5b3V0X193cmFwcGVyXCIsIGNoaWxkcmVuOiBbanN4KFBhcnRpY2lwYW50c0F1ZGlvLCB7IHBhcnRpY2lwYW50czogcmVtb3RlUGFydGljaXBhbnRzIH0pLCBqc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBjbHN4KCdzdHItdmlkZW9fX3NwZWFrZXItbGF5b3V0JywgcGFydGljaXBhbnRzQmFyUG9zaXRpb24gJiZcbiAgICAgICAgICAgICAgICAgICAgYHN0ci12aWRlb19fc3BlYWtlci1sYXlvdXQtLXZhcmlhbnQtJHtwYXJ0aWNpcGFudHNCYXJQb3NpdGlvbn1gKSwgY2hpbGRyZW46IFtqc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19zcGVha2VyLWxheW91dF9fc3BvdGxpZ2h0XCIsIGNoaWxkcmVuOiBwYXJ0aWNpcGFudEluU3BvdGxpZ2h0ICYmIChqc3goUGFydGljaXBhbnRWaWV3LCB7IHBhcnRpY2lwYW50OiBwYXJ0aWNpcGFudEluU3BvdGxpZ2h0LCBtdXRlQXVkaW86IHRydWUsIHRyYWNrVHlwZTogaXNTcGVha2VyU2NyZWVuU2hhcmluZyA/ICdzY3JlZW5TaGFyZVRyYWNrJyA6ICd2aWRlb1RyYWNrJywgUGFydGljaXBhbnRWaWV3VUk6IFBhcnRpY2lwYW50Vmlld1VJU3BvdGxpZ2h0LCBWaWRlb1BsYWNlaG9sZGVyOiBWaWRlb1BsYWNlaG9sZGVyIH0pKSB9KSwgcGFydGljaXBhbnRzV2l0aEFwcGxpZWRMaW1pdC5sZW5ndGggPiAwICYmIHBhcnRpY2lwYW50c0JhclBvc2l0aW9uICYmIChqc3hzKFwiZGl2XCIsIHsgcmVmOiBzZXRCdXR0b25zV3JhcHBlckVsZW1lbnQsIGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX3NwZWFrZXItbGF5b3V0X19wYXJ0aWNpcGFudHMtYmFyLWJ1dHRvbnMtd3JhcHBlclwiLCBjaGlsZHJlbjogW2pzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX3NwZWFrZXItbGF5b3V0X19wYXJ0aWNpcGFudHMtYmFyLXdyYXBwZXJcIiwgcmVmOiBzZXRQYXJ0aWNpcGFudHNCYXJXcmFwcGVyRWxlbWVudCwgY2hpbGRyZW46IGpzeHMoXCJkaXZcIiwgeyByZWY6IHNldFBhcnRpY2lwYW50c0JhckVsZW1lbnQsIGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX3NwZWFrZXItbGF5b3V0X19wYXJ0aWNpcGFudHMtYmFyXCIsIGNoaWxkcmVuOiBbaXNTcGVha2VyU2NyZWVuU2hhcmluZyAmJiAoanN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fc3BlYWtlci1sYXlvdXRfX3BhcnRpY2lwYW50LXRpbGVcIiwgY2hpbGRyZW46IGpzeChQYXJ0aWNpcGFudFZpZXcsIHsgcGFydGljaXBhbnQ6IHBhcnRpY2lwYW50SW5TcG90bGlnaHQsIFBhcnRpY2lwYW50Vmlld1VJOiBQYXJ0aWNpcGFudFZpZXdVSUJhciwgVmlkZW9QbGFjZWhvbGRlcjogVmlkZW9QbGFjZWhvbGRlciwgbXV0ZUF1ZGlvOiB0cnVlIH0pIH0sIHBhcnRpY2lwYW50SW5TcG90bGlnaHQuc2Vzc2lvbklkKSksIHBhcnRpY2lwYW50c1dpdGhBcHBsaWVkTGltaXQubWFwKChwYXJ0aWNpcGFudCkgPT4gKGpzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX3NwZWFrZXItbGF5b3V0X19wYXJ0aWNpcGFudC10aWxlXCIsIGNoaWxkcmVuOiBqc3goUGFydGljaXBhbnRWaWV3LCB7IHBhcnRpY2lwYW50OiBwYXJ0aWNpcGFudCwgUGFydGljaXBhbnRWaWV3VUk6IFBhcnRpY2lwYW50Vmlld1VJQmFyLCBWaWRlb1BsYWNlaG9sZGVyOiBWaWRlb1BsYWNlaG9sZGVyLCBtdXRlQXVkaW86IHRydWUgfSkgfSwgcGFydGljaXBhbnQuc2Vzc2lvbklkKSkpXSB9KSB9KSwgaXNWZXJ0aWNhbCAmJiAoanN4KFZlcnRpY2FsU2Nyb2xsQnV0dG9ucywgeyBzY3JvbGxXcmFwcGVyOiBwYXJ0aWNpcGFudHNCYXJXcmFwcGVyRWxlbWVudCB9KSksIGlzSG9yaXpvbnRhbCAmJiAoanN4KEhvcml6b250YWxTY3JvbGxCdXR0b25zLCB7IHNjcm9sbFdyYXBwZXI6IHBhcnRpY2lwYW50c0JhcldyYXBwZXJFbGVtZW50IH0pKV0gfSkpXSB9KV0gfSkpO1xufTtcbmNvbnN0IEhvcml6b250YWxTY3JvbGxCdXR0b25zID0gKHsgc2Nyb2xsV3JhcHBlciwgfSkgPT4ge1xuICAgIGNvbnN0IHNjcm9sbFBvc2l0aW9uID0gdXNlSG9yaXpvbnRhbFNjcm9sbFBvc2l0aW9uKHNjcm9sbFdyYXBwZXIpO1xuICAgIGNvbnN0IHNjcm9sbFN0YXJ0Q2xpY2tIYW5kbGVyID0gKCkgPT4ge1xuICAgICAgICBzY3JvbGxXcmFwcGVyPy5zY3JvbGxCeSh7IGxlZnQ6IC0xNTAsIGJlaGF2aW9yOiAnc21vb3RoJyB9KTtcbiAgICB9O1xuICAgIGNvbnN0IHNjcm9sbEVuZENsaWNrSGFuZGxlciA9ICgpID0+IHtcbiAgICAgICAgc2Nyb2xsV3JhcHBlcj8uc2Nyb2xsQnkoeyBsZWZ0OiAxNTAsIGJlaGF2aW9yOiAnc21vb3RoJyB9KTtcbiAgICB9O1xuICAgIHJldHVybiAoanN4cyhGcmFnbWVudCwgeyBjaGlsZHJlbjogW3Njcm9sbFBvc2l0aW9uICYmIHNjcm9sbFBvc2l0aW9uICE9PSAnc3RhcnQnICYmIChqc3goSWNvbkJ1dHRvbiwgeyBvbkNsaWNrOiBzY3JvbGxTdGFydENsaWNrSGFuZGxlciwgaWNvbjogXCJjYXJldC1sZWZ0XCIsIGNsYXNzTmFtZTogXCJzdHItdmlkZW9fX3NwZWFrZXItbGF5b3V0X19wYXJ0aWNpcGFudHMtYmFyLS1idXR0b24tbGVmdFwiIH0pKSwgc2Nyb2xsUG9zaXRpb24gJiYgc2Nyb2xsUG9zaXRpb24gIT09ICdlbmQnICYmIChqc3goSWNvbkJ1dHRvbiwgeyBvbkNsaWNrOiBzY3JvbGxFbmRDbGlja0hhbmRsZXIsIGljb246IFwiY2FyZXQtcmlnaHRcIiwgY2xhc3NOYW1lOiBcInN0ci12aWRlb19fc3BlYWtlci1sYXlvdXRfX3BhcnRpY2lwYW50cy1iYXItLWJ1dHRvbi1yaWdodFwiIH0pKV0gfSkpO1xufTtcbmNvbnN0IFZlcnRpY2FsU2Nyb2xsQnV0dG9ucyA9ICh7IHNjcm9sbFdyYXBwZXIsIH0pID0+IHtcbiAgICBjb25zdCBzY3JvbGxQb3NpdGlvbiA9IHVzZVZlcnRpY2FsU2Nyb2xsUG9zaXRpb24oc2Nyb2xsV3JhcHBlcik7XG4gICAgY29uc3Qgc2Nyb2xsVG9wQ2xpY2tIYW5kbGVyID0gKCkgPT4ge1xuICAgICAgICBzY3JvbGxXcmFwcGVyPy5zY3JvbGxCeSh7IHRvcDogLTE1MCwgYmVoYXZpb3I6ICdzbW9vdGgnIH0pO1xuICAgIH07XG4gICAgY29uc3Qgc2Nyb2xsQm90dG9tQ2xpY2tIYW5kbGVyID0gKCkgPT4ge1xuICAgICAgICBzY3JvbGxXcmFwcGVyPy5zY3JvbGxCeSh7IHRvcDogMTUwLCBiZWhhdmlvcjogJ3Ntb290aCcgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gKGpzeHMoRnJhZ21lbnQsIHsgY2hpbGRyZW46IFtzY3JvbGxQb3NpdGlvbiAmJiBzY3JvbGxQb3NpdGlvbiAhPT0gJ3RvcCcgJiYgKGpzeChJY29uQnV0dG9uLCB7IG9uQ2xpY2s6IHNjcm9sbFRvcENsaWNrSGFuZGxlciwgaWNvbjogXCJjYXJldC11cFwiLCBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19zcGVha2VyLWxheW91dF9fcGFydGljaXBhbnRzLWJhci0tYnV0dG9uLXRvcFwiIH0pKSwgc2Nyb2xsUG9zaXRpb24gJiYgc2Nyb2xsUG9zaXRpb24gIT09ICdib3R0b20nICYmIChqc3goSWNvbkJ1dHRvbiwgeyBvbkNsaWNrOiBzY3JvbGxCb3R0b21DbGlja0hhbmRsZXIsIGljb246IFwiY2FyZXQtZG93blwiLCBjbGFzc05hbWU6IFwic3RyLXZpZGVvX19zcGVha2VyLWxheW91dF9fcGFydGljaXBhbnRzLWJhci0tYnV0dG9uLWJvdHRvbVwiIH0pKV0gfSkpO1xufTtcbmNvbnN0IGhhc1NjcmVlblNoYXJlID0gKHApID0+ICEhcD8ucHVibGlzaGVkVHJhY2tzLmluY2x1ZGVzKFNmdU1vZGVscy5UcmFja1R5cGUuU0NSRUVOX1NIQVJFKTtcblxuY29uc3QgW21ham9yLCBtaW5vciwgcGF0Y2hdID0gKFwiMC41LjFcIiApLnNwbGl0KCcuJyk7XG5zZXRTZGtJbmZvKHtcbiAgICB0eXBlOiBTZnVNb2RlbHMuU2RrVHlwZS5SRUFDVCxcbiAgICBtYWpvcixcbiAgICBtaW5vcixcbiAgICBwYXRjaCxcbn0pO1xuXG5leHBvcnQgeyBBY2NlcHRDYWxsQnV0dG9uLCBBdWRpbywgQXZhdGFyLCBBdmF0YXJGYWxsYmFjaywgQmFzZVZpZGVvLCBDYWxsQ29udHJvbHMsIENhbGxQYXJ0aWNpcGFudExpc3RpbmcsIENhbGxQYXJ0aWNpcGFudExpc3RpbmdJdGVtLCBDYWxsUGFydGljaXBhbnRzTGlzdCwgQ2FsbFByZXZpZXcsIENhbGxSZWNvcmRpbmdMaXN0LCBDYWxsUmVjb3JkaW5nTGlzdEhlYWRlciwgQ2FsbFJlY29yZGluZ0xpc3RJdGVtLCBDYWxsU3RhdHMsIENhbGxTdGF0c0J1dHRvbiwgQ2FsbFN0YXRzTGF0ZW5jeUNoYXJ0LCBDYW5jZWxDYWxsQnV0dG9uLCBDYW5jZWxDYWxsQ29uZmlybUJ1dHRvbiwgQ29tcG9zaXRlQnV0dG9uLCBEZWZhdWx0UGFydGljaXBhbnRWaWV3VUksIERlZmF1bHRSZWFjdGlvbnNNZW51LCBEZWZhdWx0U2NyZWVuU2hhcmVPdmVybGF5LCBEZWZhdWx0VmlkZW9QbGFjZWhvbGRlciwgRGV2aWNlU2VsZWN0b3IsIERldmljZVNlbGVjdG9yQXVkaW9JbnB1dCwgRGV2aWNlU2VsZWN0b3JBdWRpb091dHB1dCwgRGV2aWNlU2VsZWN0b3JWaWRlbywgRGV2aWNlU2V0dGluZ3MsIERyb3BEb3duU2VsZWN0LCBEcm9wRG93blNlbGVjdE9wdGlvbiwgRW1wdHlDYWxsUmVjb3JkaW5nTGlzdGluZywgR2VuZXJpY01lbnUsIEdlbmVyaWNNZW51QnV0dG9uSXRlbSwgSWNvbiwgSWNvbkJ1dHRvbiwgTGl2ZXN0cmVhbUxheW91dCwgTG9hZGluZ0NhbGxSZWNvcmRpbmdMaXN0aW5nLCBMb2FkaW5nSW5kaWNhdG9yLCBNZW51VG9nZ2xlLCBNZW51VmlzdWFsVHlwZSwgTm90aWZpY2F0aW9uLCBQYWdpbmF0ZWRHcmlkTGF5b3V0LCBQYXJ0aWNpcGFudEFjdGlvbnNDb250ZXh0TWVudSwgUGFydGljaXBhbnREZXRhaWxzLCBQYXJ0aWNpcGFudFZpZXcsIFBhcnRpY2lwYW50Vmlld0NvbnRleHQsIFBhcnRpY2lwYW50c0F1ZGlvLCBQZXJtaXNzaW9uTm90aWZpY2F0aW9uLCBQZXJtaXNzaW9uUmVxdWVzdExpc3QsIFBlcm1pc3Npb25SZXF1ZXN0cywgUmVhY3Rpb25zQnV0dG9uLCBSZWNvcmRDYWxsQnV0dG9uLCBSZWNvcmRDYWxsQ29uZmlybWF0aW9uQnV0dG9uLCBSZWNvcmRpbmdJblByb2dyZXNzTm90aWZpY2F0aW9uLCBSaW5naW5nQ2FsbCwgUmluZ2luZ0NhbGxDb250cm9scywgU2NyZWVuU2hhcmVCdXR0b24sIFNlYXJjaElucHV0LCBTZWFyY2hSZXN1bHRzLCBTcGVha2VyTGF5b3V0LCBTcGVha2luZ1doaWxlTXV0ZWROb3RpZmljYXRpb24sIFNwZWVjaEluZGljYXRvciwgU3RhdENhcmQsIFN0YXRDYXJkRXhwbGFuYXRpb24sIFN0YXRzVGFnLCBTdGF0dXNlcywgU3RyZWFtQ2FsbCwgU3RyZWFtVGhlbWUsIFN0cmVhbVZpZGVvLCBUZXh0QnV0dG9uLCBUb2dnbGVBdWRpb091dHB1dEJ1dHRvbiwgVG9nZ2xlQXVkaW9QcmV2aWV3QnV0dG9uLCBUb2dnbGVBdWRpb1B1Ymxpc2hpbmdCdXR0b24sIFRvZ2dsZVZpZGVvUHJldmlld0J1dHRvbiwgVG9nZ2xlVmlkZW9QdWJsaXNoaW5nQnV0dG9uLCBUb29sdGlwLCBWaWRlbyQxIGFzIFZpZGVvLCBWaWRlb1ByZXZpZXcsIFdpdGhUb29sdGlwLCBkZWZhdWx0UmVhY3Rpb25zLCB0cmFuc2xhdGlvbnMsIHVzZUhvcml6b250YWxTY3JvbGxQb3NpdGlvbiwgdXNlTWVudUNvbnRleHQsIHVzZVBhcnRpY2lwYW50Vmlld0NvbnRleHQsIHVzZVBlcnNpc3RlZERldmljZVByZWZlcmVuY2VzLCB1c2VSZXF1ZXN0UGVybWlzc2lvbiwgdXNlVHJhY2tFbGVtZW50VmlzaWJpbGl0eSwgdXNlVmVydGljYWxTY3JvbGxQb3NpdGlvbiB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXMuanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@stream-io/video-react-sdk/dist/index.es.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@stream-io/video-react-sdk/dist/css/styles.css":
/*!*********************************************************************!*\
  !*** ./node_modules/@stream-io/video-react-sdk/dist/css/styles.css ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (\"2605c43b14ca\");\nif (false) {}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHN0cmVhbS1pby92aWRlby1yZWFjdC1zZGsvZGlzdC9jc3Mvc3R5bGVzLmNzcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsaUVBQWUsY0FBYztBQUM3QixJQUFJLEtBQVUsRUFBRSxFQUF1QiIsInNvdXJjZXMiOlsid2VicGFjazovL0hhTWVldHovLi9ub2RlX21vZHVsZXMvQHN0cmVhbS1pby92aWRlby1yZWFjdC1zZGsvZGlzdC9jc3Mvc3R5bGVzLmNzcz9kYjg3Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IFwiMjYwNWM0M2IxNGNhXCJcbmlmIChtb2R1bGUuaG90KSB7IG1vZHVsZS5ob3QuYWNjZXB0KCkgfVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@stream-io/video-react-sdk/dist/css/styles.css\n");

/***/ }),

/***/ "(action-browser)/./node_modules/@stream-io/node-sdk/dist/index.es.js":
/*!***********************************************************!*\
  !*** ./node_modules/@stream-io/node-sdk/dist/index.es.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   APNConfigRequestAuthTypeEnum: () => (/* binding */ APNConfigRequestAuthTypeEnum),\n/* harmony export */   AppSearchBackendEnum: () => (/* binding */ AppSearchBackendEnum),\n/* harmony export */   AsyncModerationCallbackConfigRequestModeEnum: () => (/* binding */ AsyncModerationCallbackConfigRequestModeEnum),\n/* harmony export */   AudioSettingsDefaultDeviceEnum: () => (/* binding */ AudioSettingsDefaultDeviceEnum),\n/* harmony export */   BlockListOptionsBehaviorEnum: () => (/* binding */ BlockListOptionsBehaviorEnum),\n/* harmony export */   BlockListOptionsRequestBehaviorEnum: () => (/* binding */ BlockListOptionsRequestBehaviorEnum),\n/* harmony export */   ChannelConfigAutomodBehaviorEnum: () => (/* binding */ ChannelConfigAutomodBehaviorEnum),\n/* harmony export */   ChannelConfigAutomodEnum: () => (/* binding */ ChannelConfigAutomodEnum),\n/* harmony export */   ChannelConfigBlocklistBehaviorEnum: () => (/* binding */ ChannelConfigBlocklistBehaviorEnum),\n/* harmony export */   ChannelConfigRequestBlocklistBehaviorEnum: () => (/* binding */ ChannelConfigRequestBlocklistBehaviorEnum),\n/* harmony export */   ChannelConfigWithInfoAutomodBehaviorEnum: () => (/* binding */ ChannelConfigWithInfoAutomodBehaviorEnum),\n/* harmony export */   ChannelConfigWithInfoAutomodEnum: () => (/* binding */ ChannelConfigWithInfoAutomodEnum),\n/* harmony export */   ChannelConfigWithInfoBlocklistBehaviorEnum: () => (/* binding */ ChannelConfigWithInfoBlocklistBehaviorEnum),\n/* harmony export */   ChannelConfigWithInfoRequestAutomodBehaviorEnum: () => (/* binding */ ChannelConfigWithInfoRequestAutomodBehaviorEnum),\n/* harmony export */   ChannelConfigWithInfoRequestAutomodEnum: () => (/* binding */ ChannelConfigWithInfoRequestAutomodEnum),\n/* harmony export */   ChannelConfigWithInfoRequestBlocklistBehaviorEnum: () => (/* binding */ ChannelConfigWithInfoRequestBlocklistBehaviorEnum),\n/* harmony export */   ChannelMemberRequestRoleEnum: () => (/* binding */ ChannelMemberRequestRoleEnum),\n/* harmony export */   ChannelMemberRoleEnum: () => (/* binding */ ChannelMemberRoleEnum),\n/* harmony export */   ChannelTypeConfigAutomodBehaviorEnum: () => (/* binding */ ChannelTypeConfigAutomodBehaviorEnum),\n/* harmony export */   ChannelTypeConfigAutomodEnum: () => (/* binding */ ChannelTypeConfigAutomodEnum),\n/* harmony export */   ChannelTypeConfigBlocklistBehaviorEnum: () => (/* binding */ ChannelTypeConfigBlocklistBehaviorEnum),\n/* harmony export */   CheckPushRequestPushProviderTypeEnum: () => (/* binding */ CheckPushRequestPushProviderTypeEnum),\n/* harmony export */   CheckSNSResponseStatusEnum: () => (/* binding */ CheckSNSResponseStatusEnum),\n/* harmony export */   CheckSQSResponseStatusEnum: () => (/* binding */ CheckSQSResponseStatusEnum),\n/* harmony export */   ConfigDefaultRoleEnum: () => (/* binding */ ConfigDefaultRoleEnum),\n/* harmony export */   ConfigRequestDefaultRoleEnum: () => (/* binding */ ConfigRequestDefaultRoleEnum),\n/* harmony export */   CreateCallRequestTypeEnum: () => (/* binding */ CreateCallRequestTypeEnum),\n/* harmony export */   CreateChannelTypeRequestAutomodBehaviorEnum: () => (/* binding */ CreateChannelTypeRequestAutomodBehaviorEnum),\n/* harmony export */   CreateChannelTypeRequestAutomodEnum: () => (/* binding */ CreateChannelTypeRequestAutomodEnum),\n/* harmony export */   CreateChannelTypeRequestBlocklistBehaviorEnum: () => (/* binding */ CreateChannelTypeRequestBlocklistBehaviorEnum),\n/* harmony export */   CreateChannelTypeResponseAutomodBehaviorEnum: () => (/* binding */ CreateChannelTypeResponseAutomodBehaviorEnum),\n/* harmony export */   CreateChannelTypeResponseAutomodEnum: () => (/* binding */ CreateChannelTypeResponseAutomodEnum),\n/* harmony export */   CreateChannelTypeResponseBlocklistBehaviorEnum: () => (/* binding */ CreateChannelTypeResponseBlocklistBehaviorEnum),\n/* harmony export */   CreateDeviceRequestPushProviderEnum: () => (/* binding */ CreateDeviceRequestPushProviderEnum),\n/* harmony export */   CreateImportRequestModeEnum: () => (/* binding */ CreateImportRequestModeEnum),\n/* harmony export */   DeleteUsersRequestConversationsEnum: () => (/* binding */ DeleteUsersRequestConversationsEnum),\n/* harmony export */   DeleteUsersRequestMessagesEnum: () => (/* binding */ DeleteUsersRequestMessagesEnum),\n/* harmony export */   DeleteUsersRequestUserEnum: () => (/* binding */ DeleteUsersRequestUserEnum),\n/* harmony export */   DeviceFieldsPushProviderEnum: () => (/* binding */ DeviceFieldsPushProviderEnum),\n/* harmony export */   DevicePushProviderEnum: () => (/* binding */ DevicePushProviderEnum),\n/* harmony export */   DeviceRequestPushProviderEnum: () => (/* binding */ DeviceRequestPushProviderEnum),\n/* harmony export */   ImageSizeCropEnum: () => (/* binding */ ImageSizeCropEnum),\n/* harmony export */   ImageSizeResizeEnum: () => (/* binding */ ImageSizeResizeEnum),\n/* harmony export */   LayoutSettingsNameEnum: () => (/* binding */ LayoutSettingsNameEnum),\n/* harmony export */   MessageRequest1TypeEnum: () => (/* binding */ MessageRequest1TypeEnum),\n/* harmony export */   MessageRequestTypeEnum: () => (/* binding */ MessageRequestTypeEnum),\n/* harmony export */   MessageTypeEnum: () => (/* binding */ MessageTypeEnum),\n/* harmony export */   PermissionLevelEnum: () => (/* binding */ PermissionLevelEnum),\n/* harmony export */   PolicyRequest1ActionEnum: () => (/* binding */ PolicyRequest1ActionEnum),\n/* harmony export */   PolicyRequestActionEnum: () => (/* binding */ PolicyRequestActionEnum),\n/* harmony export */   PushConfigRequestVersionEnum: () => (/* binding */ PushConfigRequestVersionEnum),\n/* harmony export */   StreamCall: () => (/* binding */ StreamCall),\n/* harmony export */   StreamChannel: () => (/* binding */ StreamChannel),\n/* harmony export */   StreamChatClient: () => (/* binding */ StreamChatClient),\n/* harmony export */   StreamClient: () => (/* binding */ StreamClient),\n/* harmony export */   StreamVideoClient: () => (/* binding */ StreamVideoClient),\n/* harmony export */   TranscriptionSettingsModeEnum: () => (/* binding */ TranscriptionSettingsModeEnum),\n/* harmony export */   TranslateMessageRequestLanguageEnum: () => (/* binding */ TranslateMessageRequestLanguageEnum),\n/* harmony export */   UpdateAppRequestEnforceUniqueUsernamesEnum: () => (/* binding */ UpdateAppRequestEnforceUniqueUsernamesEnum),\n/* harmony export */   UpdateAppRequestPermissionVersionEnum: () => (/* binding */ UpdateAppRequestPermissionVersionEnum),\n/* harmony export */   UpdateAppRequestVideoProviderEnum: () => (/* binding */ UpdateAppRequestVideoProviderEnum),\n/* harmony export */   UpdateChannelTypeRequestAutomodBehaviorEnum: () => (/* binding */ UpdateChannelTypeRequestAutomodBehaviorEnum),\n/* harmony export */   UpdateChannelTypeRequestAutomodEnum: () => (/* binding */ UpdateChannelTypeRequestAutomodEnum),\n/* harmony export */   UpdateChannelTypeRequestBlocklistBehaviorEnum: () => (/* binding */ UpdateChannelTypeRequestBlocklistBehaviorEnum),\n/* harmony export */   UpdateChannelTypeResponseAutomodBehaviorEnum: () => (/* binding */ UpdateChannelTypeResponseAutomodBehaviorEnum),\n/* harmony export */   UpdateChannelTypeResponseAutomodEnum: () => (/* binding */ UpdateChannelTypeResponseAutomodEnum),\n/* harmony export */   UpdateChannelTypeResponseBlocklistBehaviorEnum: () => (/* binding */ UpdateChannelTypeResponseBlocklistBehaviorEnum),\n/* harmony export */   VideoAudioSettingsDefaultDeviceEnum: () => (/* binding */ VideoAudioSettingsDefaultDeviceEnum),\n/* harmony export */   VideoAudioSettingsRequestDefaultDeviceEnum: () => (/* binding */ VideoAudioSettingsRequestDefaultDeviceEnum),\n/* harmony export */   VideoCreateDeviceRequestPushProviderEnum: () => (/* binding */ VideoCreateDeviceRequestPushProviderEnum),\n/* harmony export */   VideoLayoutSettingsNameEnum: () => (/* binding */ VideoLayoutSettingsNameEnum),\n/* harmony export */   VideoLayoutSettingsRequestNameEnum: () => (/* binding */ VideoLayoutSettingsRequestNameEnum),\n/* harmony export */   VideoOwnCapability: () => (/* binding */ VideoOwnCapability),\n/* harmony export */   VideoRecordSettingsRequestModeEnum: () => (/* binding */ VideoRecordSettingsRequestModeEnum),\n/* harmony export */   VideoRecordSettingsRequestQualityEnum: () => (/* binding */ VideoRecordSettingsRequestQualityEnum),\n/* harmony export */   VideoSettingsCameraFacingEnum: () => (/* binding */ VideoSettingsCameraFacingEnum),\n/* harmony export */   VideoTranscriptionSettingsModeEnum: () => (/* binding */ VideoTranscriptionSettingsModeEnum),\n/* harmony export */   VideoTranscriptionSettingsRequestModeEnum: () => (/* binding */ VideoTranscriptionSettingsRequestModeEnum),\n/* harmony export */   VideoVideoSettingsCameraFacingEnum: () => (/* binding */ VideoVideoSettingsCameraFacingEnum),\n/* harmony export */   VideoVideoSettingsRequestCameraFacingEnum: () => (/* binding */ VideoVideoSettingsRequestCameraFacingEnum)\n/* harmony export */ });\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! uuid */ \"(action-browser)/./node_modules/uuid/dist/esm-node/v4.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jsonwebtoken */ \"(action-browser)/./node_modules/jsonwebtoken/index.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_1__);\n\n\n\n\n/**\n * @export\n */\nconst APNConfigRequestAuthTypeEnum = {\n    CERTIFICATE: 'certificate',\n    TOKEN: 'token'\n};\n/**\n * @export\n */\nconst AppSearchBackendEnum = {\n    ELASTICSEARCH: 'elasticsearch',\n    POSTGRES: 'postgres',\n    DISABLED: 'disabled'\n};\n/**\n * @export\n */\nconst AsyncModerationCallbackConfigRequestModeEnum = {\n    NONE: 'CALLBACK_MODE_NONE',\n    REST: 'CALLBACK_MODE_REST',\n    TWIRP: 'CALLBACK_MODE_TWIRP'\n};\n/**\n * @export\n */\nconst AudioSettingsDefaultDeviceEnum = {\n    SPEAKER: 'speaker',\n    EARPIECE: 'earpiece'\n};\n/**\n * @export\n */\nconst BlockListOptionsBehaviorEnum = {\n    FLAG: 'flag',\n    BLOCK: 'block'\n};\n/**\n * @export\n */\nconst BlockListOptionsRequestBehaviorEnum = {\n    FLAG: 'flag',\n    BLOCK: 'block'\n};\n/**\n * @export\n */\nconst ChannelConfigAutomodEnum = {\n    DISABLED: 'disabled',\n    SIMPLE: 'simple',\n    AI: 'AI'\n};\n/**\n * @export\n */\nconst ChannelConfigAutomodBehaviorEnum = {\n    FLAG: 'flag',\n    BLOCK: 'block'\n};\n/**\n * @export\n */\nconst ChannelConfigBlocklistBehaviorEnum = {\n    FLAG: 'flag',\n    BLOCK: 'block'\n};\n/**\n * @export\n */\nconst ChannelConfigRequestBlocklistBehaviorEnum = {\n    FLAG: 'flag',\n    BLOCK: 'block'\n};\n/**\n * @export\n */\nconst ChannelConfigWithInfoAutomodEnum = {\n    DISABLED: 'disabled',\n    SIMPLE: 'simple',\n    AI: 'AI'\n};\n/**\n * @export\n */\nconst ChannelConfigWithInfoAutomodBehaviorEnum = {\n    FLAG: 'flag',\n    BLOCK: 'block'\n};\n/**\n * @export\n */\nconst ChannelConfigWithInfoBlocklistBehaviorEnum = {\n    FLAG: 'flag',\n    BLOCK: 'block'\n};\n/**\n * @export\n */\nconst ChannelConfigWithInfoRequestAutomodEnum = {\n    DISABLED: 'disabled',\n    SIMPLE: 'simple',\n    AI: 'AI'\n};\n/**\n * @export\n */\nconst ChannelConfigWithInfoRequestAutomodBehaviorEnum = {\n    FLAG: 'flag',\n    BLOCK: 'block'\n};\n/**\n * @export\n */\nconst ChannelConfigWithInfoRequestBlocklistBehaviorEnum = {\n    FLAG: 'flag',\n    BLOCK: 'block'\n};\n/**\n * @export\n */\nconst ChannelMemberRoleEnum = {\n    MEMBER: 'member',\n    MODERATOR: 'moderator',\n    ADMIN: 'admin',\n    OWNER: 'owner'\n};\n/**\n * @export\n */\nconst ChannelMemberRequestRoleEnum = {\n    MEMBER: 'member',\n    MODERATOR: 'moderator',\n    ADMIN: 'admin',\n    OWNER: 'owner'\n};\n/**\n * @export\n */\nconst ChannelTypeConfigAutomodEnum = {\n    DISABLED: 'disabled',\n    SIMPLE: 'simple',\n    AI: 'AI'\n};\n/**\n * @export\n */\nconst ChannelTypeConfigAutomodBehaviorEnum = {\n    FLAG: 'flag',\n    BLOCK: 'block'\n};\n/**\n * @export\n */\nconst ChannelTypeConfigBlocklistBehaviorEnum = {\n    FLAG: 'flag',\n    BLOCK: 'block'\n};\n/**\n * @export\n */\nconst CheckPushRequestPushProviderTypeEnum = {\n    FIREBASE: 'firebase',\n    APN: 'apn',\n    HUAWEI: 'huawei',\n    XIAOMI: 'xiaomi'\n};\n/**\n * @export\n */\nconst CheckSNSResponseStatusEnum = {\n    OK: 'ok',\n    ERROR: 'error'\n};\n/**\n * @export\n */\nconst CheckSQSResponseStatusEnum = {\n    OK: 'ok',\n    ERROR: 'error'\n};\n/**\n * @export\n */\nconst ConfigDefaultRoleEnum = {\n    ATTENDEE: 'attendee',\n    PUBLISHER: 'publisher',\n    SUBSCRIBER: 'subscriber',\n    ADMIN: 'admin'\n};\n/**\n * @export\n */\nconst ConfigRequestDefaultRoleEnum = {\n    ATTENDEE: 'attendee',\n    PUBLISHER: 'publisher',\n    SUBSCRIBER: 'subscriber',\n    ADMIN: 'admin'\n};\n/**\n * @export\n */\nconst CreateCallRequestTypeEnum = {\n    AUDIO: 'audio',\n    VIDEO: 'video'\n};\n/**\n * @export\n */\nconst CreateChannelTypeRequestAutomodEnum = {\n    DISABLED: 'disabled',\n    SIMPLE: 'simple',\n    AI: 'AI'\n};\n/**\n * @export\n */\nconst CreateChannelTypeRequestAutomodBehaviorEnum = {\n    FLAG: 'flag',\n    BLOCK: 'block'\n};\n/**\n * @export\n */\nconst CreateChannelTypeRequestBlocklistBehaviorEnum = {\n    FLAG: 'flag',\n    BLOCK: 'block'\n};\n/**\n * @export\n */\nconst CreateChannelTypeResponseAutomodEnum = {\n    DISABLED: 'disabled',\n    SIMPLE: 'simple',\n    AI: 'AI'\n};\n/**\n * @export\n */\nconst CreateChannelTypeResponseAutomodBehaviorEnum = {\n    FLAG: 'flag',\n    BLOCK: 'block'\n};\n/**\n * @export\n */\nconst CreateChannelTypeResponseBlocklistBehaviorEnum = {\n    FLAG: 'flag',\n    BLOCK: 'block'\n};\n/**\n * @export\n */\nconst CreateDeviceRequestPushProviderEnum = {\n    FIREBASE: 'firebase',\n    APN: 'apn',\n    HUAWEI: 'huawei',\n    XIAOMI: 'xiaomi'\n};\n/**\n * @export\n */\nconst CreateImportRequestModeEnum = {\n    INSERT: 'insert',\n    UPSERT: 'upsert'\n};\n/**\n * @export\n */\nconst DeleteUsersRequestConversationsEnum = {\n    SOFT: 'soft',\n    HARD: 'hard'\n};\n/**\n * @export\n */\nconst DeleteUsersRequestMessagesEnum = {\n    SOFT: 'soft',\n    PRUNING: 'pruning',\n    HARD: 'hard'\n};\n/**\n * @export\n */\nconst DeleteUsersRequestUserEnum = {\n    SOFT: 'soft',\n    PRUNING: 'pruning',\n    HARD: 'hard'\n};\n/**\n * @export\n */\nconst DevicePushProviderEnum = {\n    FIREBASE: 'firebase',\n    APN: 'apn',\n    HUAWEI: 'huawei',\n    XIAOMI: 'xiaomi'\n};\n/**\n * @export\n */\nconst DeviceFieldsPushProviderEnum = {\n    FIREBASE: 'firebase',\n    APN: 'apn',\n    HUAWEI: 'huawei',\n    XIAOMI: 'xiaomi'\n};\n/**\n * @export\n */\nconst DeviceRequestPushProviderEnum = {\n    FIREBASE: 'firebase',\n    APN: 'apn',\n    HUAWEI: 'huawei',\n    XIAOMI: 'xiaomi'\n};\n/**\n * @export\n */\nconst ImageSizeCropEnum = {\n    TOP: 'top',\n    BOTTOM: 'bottom',\n    LEFT: 'left',\n    RIGHT: 'right',\n    CENTER: 'center'\n};\n/**\n * @export\n */\nconst ImageSizeResizeEnum = {\n    CLIP: 'clip',\n    CROP: 'crop',\n    SCALE: 'scale',\n    FILL: 'fill'\n};\n/**\n * @export\n */\nconst LayoutSettingsNameEnum = {\n    SPOTLIGHT: 'spotlight',\n    GRID: 'grid',\n    SINGLE_PARTICIPANT: 'single-participant',\n    MOBILE: 'mobile',\n    CUSTOM: 'custom'\n};\n/**\n * @export\n */\nconst MessageTypeEnum = {\n    REGULAR: 'regular',\n    EPHEMERAL: 'ephemeral',\n    ERROR: 'error',\n    REPLY: 'reply',\n    SYSTEM: 'system',\n    DELETED: 'deleted'\n};\n/**\n * @export\n */\nconst MessageRequestTypeEnum = {\n    REGULAR: 'regular',\n    EPHEMERAL: 'ephemeral',\n    ERROR: 'error',\n    REPLY: 'reply',\n    SYSTEM: 'system',\n    DELETED: 'deleted'\n};\n/**\n * @export\n */\nconst MessageRequest1TypeEnum = {\n    REGULAR: 'regular',\n    EPHEMERAL: 'ephemeral',\n    ERROR: 'error',\n    REPLY: 'reply',\n    SYSTEM: 'system',\n    DELETED: 'deleted'\n};\n/**\n * @export\n */\nconst PermissionLevelEnum = {\n    APP: 'app',\n    CHANNEL: 'channel'\n};\n/**\n * @export\n */\nconst PolicyRequestActionEnum = {\n    DENY: 'Deny',\n    ALLOW: 'Allow'\n};\n/**\n * @export\n */\nconst PolicyRequest1ActionEnum = {\n    DENY: 'Deny',\n    ALLOW: 'Allow'\n};\n/**\n * @export\n */\nconst PushConfigRequestVersionEnum = {\n    V1: 'v1',\n    V2: 'v2'\n};\n/**\n * @export\n */\nconst TranscriptionSettingsModeEnum = {\n    AVAILABLE: 'available',\n    DISABLED: 'disabled',\n    AUTO_ON: 'auto-on'\n};\n/**\n * @export\n */\nconst TranslateMessageRequestLanguageEnum = {\n    AF: 'af',\n    SQ: 'sq',\n    AM: 'am',\n    AR: 'ar',\n    AZ: 'az',\n    BN: 'bn',\n    BS: 'bs',\n    BG: 'bg',\n    ZH: 'zh',\n    ZH_TW: 'zh-TW',\n    HR: 'hr',\n    CS: 'cs',\n    DA: 'da',\n    FA_AF: 'fa-AF',\n    NL: 'nl',\n    EN: 'en',\n    ET: 'et',\n    FI: 'fi',\n    FR: 'fr',\n    FR_CA: 'fr-CA',\n    KA: 'ka',\n    DE: 'de',\n    EL: 'el',\n    HA: 'ha',\n    HE: 'he',\n    HI: 'hi',\n    HU: 'hu',\n    ID: 'id',\n    IT: 'it',\n    JA: 'ja',\n    KO: 'ko',\n    LV: 'lv',\n    MS: 'ms',\n    NO: 'no',\n    FA: 'fa',\n    PS: 'ps',\n    PL: 'pl',\n    PT: 'pt',\n    RO: 'ro',\n    RU: 'ru',\n    SR: 'sr',\n    SK: 'sk',\n    SL: 'sl',\n    SO: 'so',\n    ES: 'es',\n    ES_MX: 'es-MX',\n    SW: 'sw',\n    SV: 'sv',\n    TL: 'tl',\n    TA: 'ta',\n    TH: 'th',\n    TR: 'tr',\n    UK: 'uk',\n    UR: 'ur',\n    VI: 'vi'\n};\n/**\n * @export\n */\nconst UpdateAppRequestEnforceUniqueUsernamesEnum = {\n    NO: 'no',\n    APP: 'app',\n    TEAM: 'team'\n};\n/**\n * @export\n */\nconst UpdateAppRequestPermissionVersionEnum = {\n    V1: 'v1',\n    V2: 'v2'\n};\n/**\n * @export\n */\nconst UpdateAppRequestVideoProviderEnum = {\n    AGORA: 'agora',\n    HMS: 'hms'\n};\n/**\n * @export\n */\nconst UpdateChannelTypeRequestAutomodEnum = {\n    DISABLED: 'disabled',\n    SIMPLE: 'simple',\n    AI: 'AI'\n};\n/**\n * @export\n */\nconst UpdateChannelTypeRequestAutomodBehaviorEnum = {\n    FLAG: 'flag',\n    BLOCK: 'block'\n};\n/**\n * @export\n */\nconst UpdateChannelTypeRequestBlocklistBehaviorEnum = {\n    FLAG: 'flag',\n    BLOCK: 'block'\n};\n/**\n * @export\n */\nconst UpdateChannelTypeResponseAutomodEnum = {\n    DISABLED: 'disabled',\n    SIMPLE: 'simple',\n    AI: 'AI'\n};\n/**\n * @export\n */\nconst UpdateChannelTypeResponseAutomodBehaviorEnum = {\n    FLAG: 'flag',\n    BLOCK: 'block'\n};\n/**\n * @export\n */\nconst UpdateChannelTypeResponseBlocklistBehaviorEnum = {\n    FLAG: 'flag',\n    BLOCK: 'block'\n};\n/**\n * @export\n */\nconst VideoSettingsCameraFacingEnum = {\n    FRONT: 'front',\n    BACK: 'back',\n    EXTERNAL: 'external'\n};\n\n/**\n * @export\n */\nconst VideoAudioSettingsDefaultDeviceEnum = {\n    SPEAKER: 'speaker',\n    EARPIECE: 'earpiece'\n};\n/**\n * @export\n */\nconst VideoAudioSettingsRequestDefaultDeviceEnum = {\n    SPEAKER: 'speaker',\n    EARPIECE: 'earpiece'\n};\n/**\n * @export\n */\nconst VideoCreateDeviceRequestPushProviderEnum = {\n    FIREBASE: 'firebase',\n    APN: 'apn',\n    HUAWEI: 'huawei',\n    XIAOMI: 'xiaomi'\n};\n/**\n * @export\n */\nconst VideoLayoutSettingsNameEnum = {\n    SPOTLIGHT: 'spotlight',\n    GRID: 'grid',\n    SINGLE_PARTICIPANT: 'single-participant',\n    MOBILE: 'mobile',\n    CUSTOM: 'custom'\n};\n/**\n * @export\n */\nconst VideoLayoutSettingsRequestNameEnum = {\n    SPOTLIGHT: 'spotlight',\n    GRID: 'grid',\n    SINGLE_PARTICIPANT: 'single-participant',\n    MOBILE: 'mobile',\n    CUSTOM: 'custom'\n};\n/**\n * All possibility of string to use\n * @export\n */\nconst VideoOwnCapability = {\n    BLOCK_USERS: 'block-users',\n    CREATE_CALL: 'create-call',\n    CREATE_REACTION: 'create-reaction',\n    END_CALL: 'end-call',\n    JOIN_BACKSTAGE: 'join-backstage',\n    JOIN_CALL: 'join-call',\n    JOIN_ENDED_CALL: 'join-ended-call',\n    MUTE_USERS: 'mute-users',\n    PIN_FOR_EVERYONE: 'pin-for-everyone',\n    READ_CALL: 'read-call',\n    REMOVE_CALL_MEMBER: 'remove-call-member',\n    SCREENSHARE: 'screenshare',\n    SEND_AUDIO: 'send-audio',\n    SEND_VIDEO: 'send-video',\n    START_BROADCAST_CALL: 'start-broadcast-call',\n    START_RECORD_CALL: 'start-record-call',\n    START_TRANSCRIPTION_CALL: 'start-transcription-call',\n    STOP_BROADCAST_CALL: 'stop-broadcast-call',\n    STOP_RECORD_CALL: 'stop-record-call',\n    STOP_TRANSCRIPTION_CALL: 'stop-transcription-call',\n    UPDATE_CALL: 'update-call',\n    UPDATE_CALL_MEMBER: 'update-call-member',\n    UPDATE_CALL_PERMISSIONS: 'update-call-permissions',\n    UPDATE_CALL_SETTINGS: 'update-call-settings'\n};\n/**\n * @export\n */\nconst VideoRecordSettingsRequestModeEnum = {\n    AVAILABLE: 'available',\n    DISABLED: 'disabled',\n    AUTO_ON: 'auto-on'\n};\n/**\n * @export\n */\nconst VideoRecordSettingsRequestQualityEnum = {\n    _360P: '360p',\n    _480P: '480p',\n    _720P: '720p',\n    _1080P: '1080p',\n    _1440P: '1440p'\n};\n/**\n * @export\n */\nconst VideoTranscriptionSettingsModeEnum = {\n    AVAILABLE: 'available',\n    DISABLED: 'disabled',\n    AUTO_ON: 'auto-on'\n};\n/**\n * @export\n */\nconst VideoTranscriptionSettingsRequestModeEnum = {\n    AVAILABLE: 'available',\n    DISABLED: 'disabled',\n    AUTO_ON: 'auto-on'\n};\n/**\n * @export\n */\nconst VideoVideoSettingsCameraFacingEnum = {\n    FRONT: 'front',\n    BACK: 'back',\n    EXTERNAL: 'external'\n};\n/**\n * @export\n */\nconst VideoVideoSettingsRequestCameraFacingEnum = {\n    FRONT: 'front',\n    BACK: 'back',\n    EXTERNAL: 'external'\n};\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\n\n/* tslint:disable */\n/* eslint-disable */\n/**\n * Stream Chat API\n * No description provided (generated by Openapi Generator https://github.com/openapitools/openapi-generator)\n *\n * The version of the OpenAPI document: v92.7.0\n *\n *\n * NOTE: This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).\n * https://openapi-generator.tech\n * Do not edit the class manually.\n */\nconst BASE_PATH$1 = \"https://chat.stream-io-api.com\".replace(/\\/+$/, \"\");\nlet Configuration$1 = class Configuration {\n    constructor(configuration = {}) {\n        this.configuration = configuration;\n    }\n    set config(configuration) {\n        this.configuration = configuration;\n    }\n    get basePath() {\n        return this.configuration.basePath != null ? this.configuration.basePath : BASE_PATH$1;\n    }\n    get fetchApi() {\n        return this.configuration.fetchApi;\n    }\n    get middleware() {\n        return this.configuration.middleware || [];\n    }\n    get queryParamsStringify() {\n        return this.configuration.queryParamsStringify || querystring$1;\n    }\n    get username() {\n        return this.configuration.username;\n    }\n    get password() {\n        return this.configuration.password;\n    }\n    get apiKey() {\n        const apiKey = this.configuration.apiKey;\n        if (apiKey) {\n            return typeof apiKey === 'function' ? apiKey : () => apiKey;\n        }\n        return undefined;\n    }\n    get accessToken() {\n        const accessToken = this.configuration.accessToken;\n        if (accessToken) {\n            return typeof accessToken === 'function' ? accessToken : () => __awaiter(this, void 0, void 0, function* () { return accessToken; });\n        }\n        return undefined;\n    }\n    get headers() {\n        return this.configuration.headers;\n    }\n    get credentials() {\n        return this.configuration.credentials;\n    }\n};\nconst DefaultConfig$1 = new Configuration$1();\n/**\n * This is the base class for all generated API classes.\n */\nlet BaseAPI$1 = class BaseAPI {\n    constructor(configuration = DefaultConfig$1) {\n        this.configuration = configuration;\n        this.fetchApi = (url, init) => __awaiter(this, void 0, void 0, function* () {\n            let fetchParams = { url, init };\n            for (const middleware of this.middleware) {\n                if (middleware.pre) {\n                    fetchParams = (yield middleware.pre(Object.assign({ fetch: this.fetchApi }, fetchParams))) || fetchParams;\n                }\n            }\n            let response = undefined;\n            try {\n                response = yield (this.configuration.fetchApi || fetch)(fetchParams.url, fetchParams.init);\n            }\n            catch (e) {\n                for (const middleware of this.middleware) {\n                    if (middleware.onError) {\n                        response = (yield middleware.onError({\n                            fetch: this.fetchApi,\n                            url: fetchParams.url,\n                            init: fetchParams.init,\n                            error: e,\n                            response: response ? response.clone() : undefined,\n                        })) || response;\n                    }\n                }\n                if (response === undefined) {\n                    if (e instanceof Error) {\n                        throw new FetchError$1(e, 'The request failed and the interceptors did not return an alternative response');\n                    }\n                    else {\n                        throw e;\n                    }\n                }\n            }\n            for (const middleware of this.middleware) {\n                if (middleware.post) {\n                    response = (yield middleware.post({\n                        fetch: this.fetchApi,\n                        url: fetchParams.url,\n                        init: fetchParams.init,\n                        response: response.clone(),\n                    })) || response;\n                }\n            }\n            return response;\n        });\n        this.middleware = configuration.middleware;\n    }\n    withMiddleware(...middlewares) {\n        const next = this.clone();\n        next.middleware = next.middleware.concat(...middlewares);\n        return next;\n    }\n    withPreMiddleware(...preMiddlewares) {\n        const middlewares = preMiddlewares.map((pre) => ({ pre }));\n        return this.withMiddleware(...middlewares);\n    }\n    withPostMiddleware(...postMiddlewares) {\n        const middlewares = postMiddlewares.map((post) => ({ post }));\n        return this.withMiddleware(...middlewares);\n    }\n    /**\n     * Check if the given MIME is a JSON MIME.\n     * JSON MIME examples:\n     *   application/json\n     *   application/json; charset=UTF8\n     *   APPLICATION/JSON\n     *   application/vnd.company+json\n     * @param mime - MIME (Multipurpose Internet Mail Extensions)\n     * @return True if the given MIME is JSON, false otherwise.\n     */\n    isJsonMime(mime) {\n        if (!mime) {\n            return false;\n        }\n        return BaseAPI.jsonRegex.test(mime);\n    }\n    request(context, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { url, init } = yield this.createFetchParams(context, initOverrides);\n            const response = yield this.fetchApi(url, init);\n            if (response && (response.status >= 200 && response.status < 300)) {\n                return response;\n            }\n            throw new ResponseError$1(response, 'Response returned an error code');\n        });\n    }\n    createFetchParams(context, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let url = this.configuration.basePath + context.path;\n            if (context.query !== undefined && Object.keys(context.query).length !== 0) {\n                // only add the querystring to the URL if there are query parameters.\n                // this is done to avoid urls ending with a \"?\" character which buggy webservers\n                // do not handle correctly sometimes.\n                url += '?' + this.configuration.queryParamsStringify(context.query);\n            }\n            const headers = Object.assign({}, this.configuration.headers, context.headers);\n            Object.keys(headers).forEach(key => headers[key] === undefined ? delete headers[key] : {});\n            const initOverrideFn = typeof initOverrides === \"function\"\n                ? initOverrides\n                : () => __awaiter(this, void 0, void 0, function* () { return initOverrides; });\n            const initParams = {\n                method: context.method,\n                headers,\n                body: context.body,\n                credentials: this.configuration.credentials,\n            };\n            const overriddenInit = Object.assign(Object.assign({}, initParams), (yield initOverrideFn({\n                init: initParams,\n                context,\n            })));\n            const init = Object.assign(Object.assign({}, overriddenInit), { body: isFormData$1(overriddenInit.body) ||\n                    overriddenInit.body instanceof URLSearchParams ||\n                    isBlob$1(overriddenInit.body)\n                    ? overriddenInit.body\n                    : JSON.stringify(overriddenInit.body) });\n            return { url, init };\n        });\n    }\n    /**\n     * Create a shallow clone of `this` by constructing a new instance\n     * and then shallow cloning data members.\n     */\n    clone() {\n        const constructor = this.constructor;\n        const next = new constructor(this.configuration);\n        next.middleware = this.middleware.slice();\n        return next;\n    }\n};\nBaseAPI$1.jsonRegex = new RegExp('^(:?application\\/json|[^;/ \\t]+\\/[^;/ \\t]+[+]json)[ \\t]*(:?;.*)?$', 'i');\nfunction isBlob$1(value) {\n    return typeof Blob !== 'undefined' && value instanceof Blob;\n}\nfunction isFormData$1(value) {\n    return typeof FormData !== \"undefined\" && value instanceof FormData;\n}\nlet ResponseError$1 = class ResponseError extends Error {\n    constructor(response, msg) {\n        super(msg);\n        this.response = response;\n        this.name = \"ResponseError\";\n    }\n};\nlet FetchError$1 = class FetchError extends Error {\n    constructor(cause, msg) {\n        super(msg);\n        this.cause = cause;\n        this.name = \"FetchError\";\n    }\n};\nlet RequiredError$1 = class RequiredError extends Error {\n    constructor(field, msg) {\n        super(msg);\n        this.field = field;\n        this.name = \"RequiredError\";\n    }\n};\nconst COLLECTION_FORMATS = {\n    csv: \",\",\n    ssv: \" \",\n    tsv: \"\\t\",\n    pipes: \"|\",\n};\nfunction querystring$1(params, prefix = '') {\n    return Object.keys(params)\n        .map(key => querystringSingleKey$1(key, params[key], prefix))\n        .filter(part => part.length > 0)\n        .join('&');\n}\nfunction querystringSingleKey$1(key, value, keyPrefix = '') {\n    const fullKey = keyPrefix + (keyPrefix.length ? `[${key}]` : key);\n    if (value instanceof Array) {\n        const multiValue = value.map(singleValue => encodeURIComponent(String(singleValue)))\n            .join(`&${encodeURIComponent(fullKey)}=`);\n        return `${encodeURIComponent(fullKey)}=${multiValue}`;\n    }\n    if (value instanceof Set) {\n        const valueAsArray = Array.from(value);\n        return querystringSingleKey$1(key, valueAsArray, keyPrefix);\n    }\n    if (value instanceof Date) {\n        return `${encodeURIComponent(fullKey)}=${encodeURIComponent(value.toISOString())}`;\n    }\n    if (value instanceof Object) {\n        return querystring$1(value, fullKey);\n    }\n    return `${encodeURIComponent(fullKey)}=${encodeURIComponent(String(value))}`;\n}\nfunction canConsumeForm(consumes) {\n    for (const consume of consumes) {\n        if ('multipart/form-data' === consume.contentType) {\n            return true;\n        }\n    }\n    return false;\n}\nlet JSONApiResponse$1 = class JSONApiResponse {\n    constructor(raw, transformer = (jsonValue) => jsonValue) {\n        this.raw = raw;\n        this.transformer = transformer;\n    }\n    value() {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.transformer(yield this.raw.json());\n        });\n    }\n};\nlet VoidApiResponse$1 = class VoidApiResponse {\n    constructor(raw) {\n        this.raw = raw;\n    }\n    value() {\n        return __awaiter(this, void 0, void 0, function* () {\n            return undefined;\n        });\n    }\n};\n\n/* tslint:disable */\n/* eslint-disable */\n/**\n * Stream Chat API\n * No description provided (generated by Openapi Generator https://github.com/openapitools/openapi-generator)\n *\n * The version of the OpenAPI document: v92.7.0\n *\n *\n * NOTE: This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).\n * https://openapi-generator.tech\n * Do not edit the class manually.\n */\n/**\n *\n */\nclass ChannelTypesApi extends BaseAPI$1 {\n    /**\n     * Creates new channel type\n     * Create channel type\n     */\n    createChannelTypeRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.createChannelTypeRequest === null || requestParameters.createChannelTypeRequest === undefined) {\n                throw new RequiredError$1('createChannelTypeRequest', 'Required parameter requestParameters.createChannelTypeRequest was null or undefined when calling createChannelType.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/channeltypes`,\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.createChannelTypeRequest,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Creates new channel type\n     * Create channel type\n     */\n    createChannelType(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.createChannelTypeRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Deletes channel type\n     * Delete channel type\n     */\n    deleteChannelTypeRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.name === null || requestParameters.name === undefined) {\n                throw new RequiredError$1('name', 'Required parameter requestParameters.name was null or undefined when calling deleteChannelType.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/channeltypes/{name}`.replace(`{${\"name\"}}`, encodeURIComponent(String(requestParameters.name))),\n                method: 'DELETE',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Deletes channel type\n     * Delete channel type\n     */\n    deleteChannelType(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.deleteChannelTypeRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Gets channel type\n     * Get channel type\n     */\n    getChannelTypeRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.name === null || requestParameters.name === undefined) {\n                throw new RequiredError$1('name', 'Required parameter requestParameters.name was null or undefined when calling getChannelType.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/channeltypes/{name}`.replace(`{${\"name\"}}`, encodeURIComponent(String(requestParameters.name))),\n                method: 'GET',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Gets channel type\n     * Get channel type\n     */\n    getChannelType(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.getChannelTypeRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Lists all available channel types\n     * List channel types\n     */\n    listChannelTypesRaw(initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const queryParameters = {};\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/channeltypes`,\n                method: 'GET',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Lists all available channel types\n     * List channel types\n     */\n    listChannelTypes(initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.listChannelTypesRaw(initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Updates channel type\n     * Update channel type\n     */\n    updateChannelTypeRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.name === null || requestParameters.name === undefined) {\n                throw new RequiredError$1('name', 'Required parameter requestParameters.name was null or undefined when calling updateChannelType.');\n            }\n            if (requestParameters.updateChannelTypeRequest === null || requestParameters.updateChannelTypeRequest === undefined) {\n                throw new RequiredError$1('updateChannelTypeRequest', 'Required parameter requestParameters.updateChannelTypeRequest was null or undefined when calling updateChannelType.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/channeltypes/{name}`.replace(`{${\"name\"}}`, encodeURIComponent(String(requestParameters.name))),\n                method: 'PUT',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.updateChannelTypeRequest,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Updates channel type\n     * Update channel type\n     */\n    updateChannelType(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.updateChannelTypeRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n}\n\n/* tslint:disable */\n/* eslint-disable */\n/**\n * Stream Chat API\n * No description provided (generated by Openapi Generator https://github.com/openapitools/openapi-generator)\n *\n * The version of the OpenAPI document: v92.7.0\n *\n *\n * NOTE: This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).\n * https://openapi-generator.tech\n * Do not edit the class manually.\n */\n/**\n *\n */\nclass ChannelsApi extends BaseAPI$1 {\n    /**\n     * Deletes channel  Sends events: - channel.deleted  Required permissions: - DeleteChannel\n     * Delete channel\n     */\n    deleteChannelRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.type === null || requestParameters.type === undefined) {\n                throw new RequiredError$1('type', 'Required parameter requestParameters.type was null or undefined when calling deleteChannel.');\n            }\n            if (requestParameters.id === null || requestParameters.id === undefined) {\n                throw new RequiredError$1('id', 'Required parameter requestParameters.id was null or undefined when calling deleteChannel.');\n            }\n            const queryParameters = {};\n            if (requestParameters.hardDelete !== undefined) {\n                queryParameters['hard_delete'] = requestParameters.hardDelete;\n            }\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/channels/{type}/{id}`.replace(`{${\"type\"}}`, encodeURIComponent(String(requestParameters.type))).replace(`{${\"id\"}}`, encodeURIComponent(String(requestParameters.id))),\n                method: 'DELETE',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Deletes channel  Sends events: - channel.deleted  Required permissions: - DeleteChannel\n     * Delete channel\n     */\n    deleteChannel(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.deleteChannelRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Allows to delete several channels at once asynchronously  Sends events: - channel.deleted  Required permissions: - DeleteChannel\n     * Deletes channels asynchronously\n     */\n    deleteChannelsRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.deleteChannelsRequest === null || requestParameters.deleteChannelsRequest === undefined) {\n                throw new RequiredError$1('deleteChannelsRequest', 'Required parameter requestParameters.deleteChannelsRequest was null or undefined when calling deleteChannels.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/channels/delete`,\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.deleteChannelsRequest,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Allows to delete several channels at once asynchronously  Sends events: - channel.deleted  Required permissions: - DeleteChannel\n     * Deletes channels asynchronously\n     */\n    deleteChannels(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.deleteChannelsRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Exports channel data to JSON file\n     * Export channels\n     */\n    exportChannelsRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.exportChannelsRequest === null || requestParameters.exportChannelsRequest === undefined) {\n                throw new RequiredError$1('exportChannelsRequest', 'Required parameter requestParameters.exportChannelsRequest was null or undefined when calling exportChannels.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/export_channels`,\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.exportChannelsRequest,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Exports channel data to JSON file\n     * Export channels\n     */\n    exportChannels(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.exportChannelsRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     *\n     * Export channels status\n     */\n    getExportChannelsStatusRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.id === null || requestParameters.id === undefined) {\n                throw new RequiredError$1('id', 'Required parameter requestParameters.id was null or undefined when calling getExportChannelsStatus.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/export_channels/{id}`.replace(`{${\"id\"}}`, encodeURIComponent(String(requestParameters.id))),\n                method: 'GET',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     *\n     * Export channels status\n     */\n    getExportChannelsStatus(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.getExportChannelsStatusRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * This method creates a channel or returns an existing one with matching attributes  Sends events: - channel.created - member.added - member.removed - member.updated - user.watching.start\n     * Get or create channel\n     */\n    getOrCreateChannelRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.type === null || requestParameters.type === undefined) {\n                throw new RequiredError$1('type', 'Required parameter requestParameters.type was null or undefined when calling getOrCreateChannel.');\n            }\n            if (requestParameters.id === null || requestParameters.id === undefined) {\n                throw new RequiredError$1('id', 'Required parameter requestParameters.id was null or undefined when calling getOrCreateChannel.');\n            }\n            if (requestParameters.channelGetOrCreateRequest === null || requestParameters.channelGetOrCreateRequest === undefined) {\n                throw new RequiredError$1('channelGetOrCreateRequest', 'Required parameter requestParameters.channelGetOrCreateRequest was null or undefined when calling getOrCreateChannel.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/channels/{type}/{id}/query`.replace(`{${\"type\"}}`, encodeURIComponent(String(requestParameters.type))).replace(`{${\"id\"}}`, encodeURIComponent(String(requestParameters.id))),\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.channelGetOrCreateRequest,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * This method creates a channel or returns an existing one with matching attributes  Sends events: - channel.created - member.added - member.removed - member.updated - user.watching.start\n     * Get or create channel\n     */\n    getOrCreateChannel(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.getOrCreateChannelRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Marks channel as hidden for current user  Sends events: - channel.hidden  Required permissions: - ReadChannel\n     * Hide channel\n     */\n    hideChannelRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.type === null || requestParameters.type === undefined) {\n                throw new RequiredError$1('type', 'Required parameter requestParameters.type was null or undefined when calling hideChannel.');\n            }\n            if (requestParameters.id === null || requestParameters.id === undefined) {\n                throw new RequiredError$1('id', 'Required parameter requestParameters.id was null or undefined when calling hideChannel.');\n            }\n            if (requestParameters.hideChannelRequest === null || requestParameters.hideChannelRequest === undefined) {\n                throw new RequiredError$1('hideChannelRequest', 'Required parameter requestParameters.hideChannelRequest was null or undefined when calling hideChannel.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/channels/{type}/{id}/hide`.replace(`{${\"type\"}}`, encodeURIComponent(String(requestParameters.type))).replace(`{${\"id\"}}`, encodeURIComponent(String(requestParameters.id))),\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.hideChannelRequest,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Marks channel as hidden for current user  Sends events: - channel.hidden  Required permissions: - ReadChannel\n     * Hide channel\n     */\n    hideChannel(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.hideChannelRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Marks channels as read up to the specific message. If no channels is given, mark all channel as read  Sends events: - message.read  Required permissions: - ReadChannel\n     * Mark channels as read\n     */\n    markChannelsReadRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.markChannelsReadRequest === null || requestParameters.markChannelsReadRequest === undefined) {\n                throw new RequiredError$1('markChannelsReadRequest', 'Required parameter requestParameters.markChannelsReadRequest was null or undefined when calling markChannelsRead.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/channels/read`,\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.markChannelsReadRequest,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Marks channels as read up to the specific message. If no channels is given, mark all channel as read  Sends events: - message.read  Required permissions: - ReadChannel\n     * Mark channels as read\n     */\n    markChannelsRead(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.markChannelsReadRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Marks channel as read up to the specific message  Sends events: - message.read  Required permissions: - ReadChannel\n     * Mark read\n     */\n    markReadRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.type === null || requestParameters.type === undefined) {\n                throw new RequiredError$1('type', 'Required parameter requestParameters.type was null or undefined when calling markRead.');\n            }\n            if (requestParameters.id === null || requestParameters.id === undefined) {\n                throw new RequiredError$1('id', 'Required parameter requestParameters.id was null or undefined when calling markRead.');\n            }\n            if (requestParameters.markReadRequest === null || requestParameters.markReadRequest === undefined) {\n                throw new RequiredError$1('markReadRequest', 'Required parameter requestParameters.markReadRequest was null or undefined when calling markRead.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/channels/{type}/{id}/read`.replace(`{${\"type\"}}`, encodeURIComponent(String(requestParameters.type))).replace(`{${\"id\"}}`, encodeURIComponent(String(requestParameters.id))),\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.markReadRequest,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Marks channel as read up to the specific message  Sends events: - message.read  Required permissions: - ReadChannel\n     * Mark read\n     */\n    markRead(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.markReadRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Marks channel as unread from a specific message  Required permissions: - ReadChannel\n     * Mark unread\n     */\n    markUnreadRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.type === null || requestParameters.type === undefined) {\n                throw new RequiredError$1('type', 'Required parameter requestParameters.type was null or undefined when calling markUnread.');\n            }\n            if (requestParameters.id === null || requestParameters.id === undefined) {\n                throw new RequiredError$1('id', 'Required parameter requestParameters.id was null or undefined when calling markUnread.');\n            }\n            if (requestParameters.markUnreadRequest === null || requestParameters.markUnreadRequest === undefined) {\n                throw new RequiredError$1('markUnreadRequest', 'Required parameter requestParameters.markUnreadRequest was null or undefined when calling markUnread.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/channels/{type}/{id}/unread`.replace(`{${\"type\"}}`, encodeURIComponent(String(requestParameters.type))).replace(`{${\"id\"}}`, encodeURIComponent(String(requestParameters.id))),\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.markUnreadRequest,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Marks channel as unread from a specific message  Required permissions: - ReadChannel\n     * Mark unread\n     */\n    markUnread(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.markUnreadRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Mutes channel for user  Sends events: - channel.muted  Required permissions: - MuteChannel\n     * Mute channel\n     */\n    muteChannelRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.muteChannelRequest === null || requestParameters.muteChannelRequest === undefined) {\n                throw new RequiredError$1('muteChannelRequest', 'Required parameter requestParameters.muteChannelRequest was null or undefined when calling muteChannel.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/moderation/mute/channel`,\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.muteChannelRequest,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Mutes channel for user  Sends events: - channel.muted  Required permissions: - MuteChannel\n     * Mute channel\n     */\n    muteChannel(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.muteChannelRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Query channels with filter query  Required permissions: - ReadChannel\n     * Query channels\n     */\n    queryChannelsRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.queryChannelsRequest === null || requestParameters.queryChannelsRequest === undefined) {\n                throw new RequiredError$1('queryChannelsRequest', 'Required parameter requestParameters.queryChannelsRequest was null or undefined when calling queryChannels.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/channels`,\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.queryChannelsRequest,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Query channels with filter query  Required permissions: - ReadChannel\n     * Query channels\n     */\n    queryChannels(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.queryChannelsRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Find and filter channel members  Required permissions: - ReadChannel\n     * Query members\n     */\n    queryMembersRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const queryParameters = {};\n            if (requestParameters.payload !== undefined) {\n                queryParameters['payload'] = requestParameters.payload;\n            }\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/members`,\n                method: 'GET',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Find and filter channel members  Required permissions: - ReadChannel\n     * Query members\n     */\n    queryMembers(requestParameters = {}, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.queryMembersRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Search messages across channels  Required permissions: - ReadChannel\n     * Search messages\n     */\n    searchRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const queryParameters = {};\n            if (requestParameters.payload !== undefined) {\n                queryParameters['payload'] = requestParameters.payload;\n            }\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/search`,\n                method: 'GET',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Search messages across channels  Required permissions: - ReadChannel\n     * Search messages\n     */\n    search(requestParameters = {}, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.searchRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Shows previously hidden channel  Sends events: - channel.visible\n     * Show channel\n     */\n    showChannelRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.type === null || requestParameters.type === undefined) {\n                throw new RequiredError$1('type', 'Required parameter requestParameters.type was null or undefined when calling showChannel.');\n            }\n            if (requestParameters.id === null || requestParameters.id === undefined) {\n                throw new RequiredError$1('id', 'Required parameter requestParameters.id was null or undefined when calling showChannel.');\n            }\n            if (requestParameters.showChannelRequest === null || requestParameters.showChannelRequest === undefined) {\n                throw new RequiredError$1('showChannelRequest', 'Required parameter requestParameters.showChannelRequest was null or undefined when calling showChannel.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/channels/{type}/{id}/show`.replace(`{${\"type\"}}`, encodeURIComponent(String(requestParameters.type))).replace(`{${\"id\"}}`, encodeURIComponent(String(requestParameters.id))),\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.showChannelRequest,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Shows previously hidden channel  Sends events: - channel.visible\n     * Show channel\n     */\n    showChannel(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.showChannelRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Truncates channel  Sends events: - channel.truncated  Required permissions: - DeleteChannel - TruncateChannel\n     * Truncate channel\n     */\n    truncateChannelRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.type === null || requestParameters.type === undefined) {\n                throw new RequiredError$1('type', 'Required parameter requestParameters.type was null or undefined when calling truncateChannel.');\n            }\n            if (requestParameters.id === null || requestParameters.id === undefined) {\n                throw new RequiredError$1('id', 'Required parameter requestParameters.id was null or undefined when calling truncateChannel.');\n            }\n            if (requestParameters.truncateChannelRequest === null || requestParameters.truncateChannelRequest === undefined) {\n                throw new RequiredError$1('truncateChannelRequest', 'Required parameter requestParameters.truncateChannelRequest was null or undefined when calling truncateChannel.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/channels/{type}/{id}/truncate`.replace(`{${\"type\"}}`, encodeURIComponent(String(requestParameters.type))).replace(`{${\"id\"}}`, encodeURIComponent(String(requestParameters.id))),\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.truncateChannelRequest,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Truncates channel  Sends events: - channel.truncated  Required permissions: - DeleteChannel - TruncateChannel\n     * Truncate channel\n     */\n    truncateChannel(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.truncateChannelRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Unmutes channel for user  Sends events: - channel.unmuted  Required permissions: - MuteChannel\n     * Unmute channel\n     */\n    unmuteChannelRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.unmuteChannelRequest === null || requestParameters.unmuteChannelRequest === undefined) {\n                throw new RequiredError$1('unmuteChannelRequest', 'Required parameter requestParameters.unmuteChannelRequest was null or undefined when calling unmuteChannel.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/moderation/unmute/channel`,\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.unmuteChannelRequest,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Unmutes channel for user  Sends events: - channel.unmuted  Required permissions: - MuteChannel\n     * Unmute channel\n     */\n    unmuteChannel(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.unmuteChannelRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * UnreadCount counts\n     * UnreadCount counts\n     */\n    unreadCountsRaw(initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const queryParameters = {};\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/unread`,\n                method: 'GET',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * UnreadCount counts\n     * UnreadCount counts\n     */\n    unreadCounts(initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.unreadCountsRaw(initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Change channel data  Sends events: - channel.updated - member.added - member.removed - member.updated - message.new  Required permissions: - AddOwnChannelMembership - RemoveOwnChannelMembership - UpdateChannel - UpdateChannelCooldown - UpdateChannelFrozen - UpdateChannelMembers\n     * Update channel\n     */\n    updateChannelRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.type === null || requestParameters.type === undefined) {\n                throw new RequiredError$1('type', 'Required parameter requestParameters.type was null or undefined when calling updateChannel.');\n            }\n            if (requestParameters.id === null || requestParameters.id === undefined) {\n                throw new RequiredError$1('id', 'Required parameter requestParameters.id was null or undefined when calling updateChannel.');\n            }\n            if (requestParameters.updateChannelRequest === null || requestParameters.updateChannelRequest === undefined) {\n                throw new RequiredError$1('updateChannelRequest', 'Required parameter requestParameters.updateChannelRequest was null or undefined when calling updateChannel.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/channels/{type}/{id}`.replace(`{${\"type\"}}`, encodeURIComponent(String(requestParameters.type))).replace(`{${\"id\"}}`, encodeURIComponent(String(requestParameters.id))),\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.updateChannelRequest,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Change channel data  Sends events: - channel.updated - member.added - member.removed - member.updated - message.new  Required permissions: - AddOwnChannelMembership - RemoveOwnChannelMembership - UpdateChannel - UpdateChannelCooldown - UpdateChannelFrozen - UpdateChannelMembers\n     * Update channel\n     */\n    updateChannel(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.updateChannelRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Updates certain fields of the channel  Sends events: - channel.updated  Required permissions: - UpdateChannel - UpdateChannelCooldown - UpdateChannelFrozen\n     * Partially update channel\n     */\n    updateChannelPartialRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.type === null || requestParameters.type === undefined) {\n                throw new RequiredError$1('type', 'Required parameter requestParameters.type was null or undefined when calling updateChannelPartial.');\n            }\n            if (requestParameters.id === null || requestParameters.id === undefined) {\n                throw new RequiredError$1('id', 'Required parameter requestParameters.id was null or undefined when calling updateChannelPartial.');\n            }\n            if (requestParameters.updateChannelPartialRequest === null || requestParameters.updateChannelPartialRequest === undefined) {\n                throw new RequiredError$1('updateChannelPartialRequest', 'Required parameter requestParameters.updateChannelPartialRequest was null or undefined when calling updateChannelPartial.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/channels/{type}/{id}`.replace(`{${\"type\"}}`, encodeURIComponent(String(requestParameters.type))).replace(`{${\"id\"}}`, encodeURIComponent(String(requestParameters.id))),\n                method: 'PATCH',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.updateChannelPartialRequest,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Updates certain fields of the channel  Sends events: - channel.updated  Required permissions: - UpdateChannel - UpdateChannelCooldown - UpdateChannelFrozen\n     * Partially update channel\n     */\n    updateChannelPartial(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.updateChannelPartialRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n}\n\n/* tslint:disable */\n/* eslint-disable */\n/**\n * Stream Chat API\n * No description provided (generated by Openapi Generator https://github.com/openapitools/openapi-generator)\n *\n * The version of the OpenAPI document: v92.7.0\n *\n *\n * NOTE: This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).\n * https://openapi-generator.tech\n * Do not edit the class manually.\n */\n/**\n *\n */\nclass CustomCommandsApi extends BaseAPI$1 {\n    /**\n     * Creates custom chat command\n     * Create command\n     */\n    createCommandRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.createCommandRequest === null || requestParameters.createCommandRequest === undefined) {\n                throw new RequiredError$1('createCommandRequest', 'Required parameter requestParameters.createCommandRequest was null or undefined when calling createCommand.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/commands`,\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.createCommandRequest,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Creates custom chat command\n     * Create command\n     */\n    createCommand(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.createCommandRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Deletes custom chat command\n     * Delete command\n     */\n    deleteCommandRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.name === null || requestParameters.name === undefined) {\n                throw new RequiredError$1('name', 'Required parameter requestParameters.name was null or undefined when calling deleteCommand.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/commands/{name}`.replace(`{${\"name\"}}`, encodeURIComponent(String(requestParameters.name))),\n                method: 'DELETE',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Deletes custom chat command\n     * Delete command\n     */\n    deleteCommand(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.deleteCommandRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Returns custom command by its name\n     * Get command\n     */\n    getCommandRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.name === null || requestParameters.name === undefined) {\n                throw new RequiredError$1('name', 'Required parameter requestParameters.name was null or undefined when calling getCommand.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/commands/{name}`.replace(`{${\"name\"}}`, encodeURIComponent(String(requestParameters.name))),\n                method: 'GET',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Returns custom command by its name\n     * Get command\n     */\n    getCommand(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.getCommandRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Returns all custom commands\n     * List commands\n     */\n    listCommandsRaw(initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const queryParameters = {};\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/commands`,\n                method: 'GET',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Returns all custom commands\n     * List commands\n     */\n    listCommands(initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.listCommandsRaw(initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Updates custom chat command\n     * Update command\n     */\n    updateCommandRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.name === null || requestParameters.name === undefined) {\n                throw new RequiredError$1('name', 'Required parameter requestParameters.name was null or undefined when calling updateCommand.');\n            }\n            if (requestParameters.updateCommandRequest === null || requestParameters.updateCommandRequest === undefined) {\n                throw new RequiredError$1('updateCommandRequest', 'Required parameter requestParameters.updateCommandRequest was null or undefined when calling updateCommand.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/commands/{name}`.replace(`{${\"name\"}}`, encodeURIComponent(String(requestParameters.name))),\n                method: 'PUT',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.updateCommandRequest,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Updates custom chat command\n     * Update command\n     */\n    updateCommand(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.updateCommandRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n}\n\n/* tslint:disable */\n/* eslint-disable */\n/**\n * Stream Chat API\n * No description provided (generated by Openapi Generator https://github.com/openapitools/openapi-generator)\n *\n * The version of the OpenAPI document: v92.7.0\n *\n *\n * NOTE: This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).\n * https://openapi-generator.tech\n * Do not edit the class manually.\n */\n/**\n *\n */\nclass DevicesApi extends BaseAPI$1 {\n    /**\n     * Adds a new device to a user, if the same device already exists the call will have no effect\n     * Create device\n     */\n    createDeviceRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.createDeviceRequest === null || requestParameters.createDeviceRequest === undefined) {\n                throw new RequiredError$1('createDeviceRequest', 'Required parameter requestParameters.createDeviceRequest was null or undefined when calling createDevice.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/devices`,\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.createDeviceRequest,\n            }, initOverrides);\n            return new VoidApiResponse$1(response);\n        });\n    }\n    /**\n     * Adds a new device to a user, if the same device already exists the call will have no effect\n     * Create device\n     */\n    createDevice(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.createDeviceRaw(requestParameters, initOverrides);\n        });\n    }\n    /**\n     * Deletes one device\n     * Delete device\n     */\n    deleteDeviceRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const queryParameters = {};\n            if (requestParameters.id !== undefined) {\n                queryParameters['id'] = requestParameters.id;\n            }\n            if (requestParameters.userId !== undefined) {\n                queryParameters['user_id'] = requestParameters.userId;\n            }\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/devices`,\n                method: 'DELETE',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Deletes one device\n     * Delete device\n     */\n    deleteDevice(requestParameters = {}, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.deleteDeviceRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Returns all available devices\n     * List devices\n     */\n    listDevicesRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const queryParameters = {};\n            if (requestParameters.userId !== undefined) {\n                queryParameters['user_id'] = requestParameters.userId;\n            }\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/devices`,\n                method: 'GET',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Returns all available devices\n     * List devices\n     */\n    listDevices(requestParameters = {}, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.listDevicesRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n}\n\n/* tslint:disable */\n/* eslint-disable */\n/**\n * Stream Chat API\n * No description provided (generated by Openapi Generator https://github.com/openapitools/openapi-generator)\n *\n * The version of the OpenAPI document: v92.7.0\n *\n *\n * NOTE: This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).\n * https://openapi-generator.tech\n * Do not edit the class manually.\n */\n/**\n *\n */\nclass EventsApi extends BaseAPI$1 {\n    /**\n     * Sends event to the channel  Sends events: - any  Required permissions: - SendCustomEvent\n     * Send event\n     */\n    sendEventRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.type === null || requestParameters.type === undefined) {\n                throw new RequiredError$1('type', 'Required parameter requestParameters.type was null or undefined when calling sendEvent.');\n            }\n            if (requestParameters.id === null || requestParameters.id === undefined) {\n                throw new RequiredError$1('id', 'Required parameter requestParameters.id was null or undefined when calling sendEvent.');\n            }\n            if (requestParameters.sendEventRequest === null || requestParameters.sendEventRequest === undefined) {\n                throw new RequiredError$1('sendEventRequest', 'Required parameter requestParameters.sendEventRequest was null or undefined when calling sendEvent.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/channels/{type}/{id}/event`.replace(`{${\"type\"}}`, encodeURIComponent(String(requestParameters.type))).replace(`{${\"id\"}}`, encodeURIComponent(String(requestParameters.id))),\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.sendEventRequest,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Sends event to the channel  Sends events: - any  Required permissions: - SendCustomEvent\n     * Send event\n     */\n    sendEvent(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.sendEventRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Sends a custom event to a user  Sends events: - custom\n     * Send user event\n     */\n    sendUserCustomEventRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.userId === null || requestParameters.userId === undefined) {\n                throw new RequiredError$1('userId', 'Required parameter requestParameters.userId was null or undefined when calling sendUserCustomEvent.');\n            }\n            if (requestParameters.sendUserCustomEventRequest === null || requestParameters.sendUserCustomEventRequest === undefined) {\n                throw new RequiredError$1('sendUserCustomEventRequest', 'Required parameter requestParameters.sendUserCustomEventRequest was null or undefined when calling sendUserCustomEvent.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/users/{user_id}/event`.replace(`{${\"user_id\"}}`, encodeURIComponent(String(requestParameters.userId))),\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.sendUserCustomEventRequest,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Sends a custom event to a user  Sends events: - custom\n     * Send user event\n     */\n    sendUserCustomEvent(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.sendUserCustomEventRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n}\n\n/* tslint:disable */\n/* eslint-disable */\n/**\n * Stream Chat API\n * No description provided (generated by Openapi Generator https://github.com/openapitools/openapi-generator)\n *\n * The version of the OpenAPI document: v92.7.0\n *\n *\n * NOTE: This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).\n * https://openapi-generator.tech\n * Do not edit the class manually.\n */\n/**\n *\n */\nclass MessagesApi extends BaseAPI$1 {\n    /**\n     * Deletes previously uploaded file  Required permissions: - DeleteAttachment\n     * Delete file\n     */\n    deleteFileRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.type === null || requestParameters.type === undefined) {\n                throw new RequiredError$1('type', 'Required parameter requestParameters.type was null or undefined when calling deleteFile.');\n            }\n            if (requestParameters.id === null || requestParameters.id === undefined) {\n                throw new RequiredError$1('id', 'Required parameter requestParameters.id was null or undefined when calling deleteFile.');\n            }\n            const queryParameters = {};\n            if (requestParameters.url !== undefined) {\n                queryParameters['url'] = requestParameters.url;\n            }\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/channels/{type}/{id}/file`.replace(`{${\"type\"}}`, encodeURIComponent(String(requestParameters.type))).replace(`{${\"id\"}}`, encodeURIComponent(String(requestParameters.id))),\n                method: 'DELETE',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Deletes previously uploaded file  Required permissions: - DeleteAttachment\n     * Delete file\n     */\n    deleteFile(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.deleteFileRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Deletes previously uploaded image  Required permissions: - DeleteAttachment\n     * Delete image\n     */\n    deleteImageRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.type === null || requestParameters.type === undefined) {\n                throw new RequiredError$1('type', 'Required parameter requestParameters.type was null or undefined when calling deleteImage.');\n            }\n            if (requestParameters.id === null || requestParameters.id === undefined) {\n                throw new RequiredError$1('id', 'Required parameter requestParameters.id was null or undefined when calling deleteImage.');\n            }\n            const queryParameters = {};\n            if (requestParameters.url !== undefined) {\n                queryParameters['url'] = requestParameters.url;\n            }\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/channels/{type}/{id}/image`.replace(`{${\"type\"}}`, encodeURIComponent(String(requestParameters.type))).replace(`{${\"id\"}}`, encodeURIComponent(String(requestParameters.id))),\n                method: 'DELETE',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Deletes previously uploaded image  Required permissions: - DeleteAttachment\n     * Delete image\n     */\n    deleteImage(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.deleteImageRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Deletes message  Sends events: - message.deleted  Required permissions: - DeleteMessage\n     * Delete message\n     */\n    deleteMessageRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.id === null || requestParameters.id === undefined) {\n                throw new RequiredError$1('id', 'Required parameter requestParameters.id was null or undefined when calling deleteMessage.');\n            }\n            const queryParameters = {};\n            if (requestParameters.hard !== undefined) {\n                queryParameters['hard'] = requestParameters.hard;\n            }\n            if (requestParameters.deletedBy !== undefined) {\n                queryParameters['deleted_by'] = requestParameters.deletedBy;\n            }\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/messages/{id}`.replace(`{${\"id\"}}`, encodeURIComponent(String(requestParameters.id))),\n                method: 'DELETE',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Deletes message  Sends events: - message.deleted  Required permissions: - DeleteMessage\n     * Delete message\n     */\n    deleteMessage(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.deleteMessageRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Removes user reaction from the message  Sends events: - reaction.deleted  Required permissions: - DeleteReaction\n     * Delete reaction\n     */\n    deleteReactionRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.id === null || requestParameters.id === undefined) {\n                throw new RequiredError$1('id', 'Required parameter requestParameters.id was null or undefined when calling deleteReaction.');\n            }\n            if (requestParameters.type === null || requestParameters.type === undefined) {\n                throw new RequiredError$1('type', 'Required parameter requestParameters.type was null or undefined when calling deleteReaction.');\n            }\n            const queryParameters = {};\n            if (requestParameters.userId !== undefined) {\n                queryParameters['user_id'] = requestParameters.userId;\n            }\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/messages/{id}/reaction/{type}`.replace(`{${\"id\"}}`, encodeURIComponent(String(requestParameters.id))).replace(`{${\"type\"}}`, encodeURIComponent(String(requestParameters.type))),\n                method: 'DELETE',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Removes user reaction from the message  Sends events: - reaction.deleted  Required permissions: - DeleteReaction\n     * Delete reaction\n     */\n    deleteReaction(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.deleteReactionRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Reports message or user for review by moderators  Sends events: - message.flagged - user.flagged  Required permissions: - FlagMessage - FlagUser\n     * Flag\n     */\n    flagRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.flagRequest === null || requestParameters.flagRequest === undefined) {\n                throw new RequiredError$1('flagRequest', 'Required parameter requestParameters.flagRequest was null or undefined when calling flag.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/moderation/flag`,\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.flagRequest,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Reports message or user for review by moderators  Sends events: - message.flagged - user.flagged  Required permissions: - FlagMessage - FlagUser\n     * Flag\n     */\n    flag(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.flagRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Returns list messages found by IDs  Required permissions: - ReadChannel\n     * Get many messages\n     */\n    getManyMessagesRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.type === null || requestParameters.type === undefined) {\n                throw new RequiredError$1('type', 'Required parameter requestParameters.type was null or undefined when calling getManyMessages.');\n            }\n            if (requestParameters.id === null || requestParameters.id === undefined) {\n                throw new RequiredError$1('id', 'Required parameter requestParameters.id was null or undefined when calling getManyMessages.');\n            }\n            const queryParameters = {};\n            if (requestParameters.ids) {\n                queryParameters['ids'] = requestParameters.ids.join(',');\n            }\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/channels/{type}/{id}/messages`.replace(`{${\"type\"}}`, encodeURIComponent(String(requestParameters.type))).replace(`{${\"id\"}}`, encodeURIComponent(String(requestParameters.id))),\n                method: 'GET',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Returns list messages found by IDs  Required permissions: - ReadChannel\n     * Get many messages\n     */\n    getManyMessages(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.getManyMessagesRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Returns message by ID  Required permissions: - ReadChannel\n     * Get message\n     */\n    getMessageRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.id === null || requestParameters.id === undefined) {\n                throw new RequiredError$1('id', 'Required parameter requestParameters.id was null or undefined when calling getMessage.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/messages/{id}`.replace(`{${\"id\"}}`, encodeURIComponent(String(requestParameters.id))),\n                method: 'GET',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Returns message by ID  Required permissions: - ReadChannel\n     * Get message\n     */\n    getMessage(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.getMessageRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Get an OpenGraph attachment for a link\n     * Get OG\n     */\n    getOGRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const queryParameters = {};\n            if (requestParameters.url !== undefined) {\n                queryParameters['url'] = requestParameters.url;\n            }\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/og`,\n                method: 'GET',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Get an OpenGraph attachment for a link\n     * Get OG\n     */\n    getOG(requestParameters = {}, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.getOGRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Returns list of reactions of specific message  Required permissions: - ReadChannel\n     * Get reactions\n     */\n    getReactionsRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.id === null || requestParameters.id === undefined) {\n                throw new RequiredError$1('id', 'Required parameter requestParameters.id was null or undefined when calling getReactions.');\n            }\n            const queryParameters = {};\n            if (requestParameters.limit !== undefined) {\n                queryParameters['limit'] = requestParameters.limit;\n            }\n            if (requestParameters.offset !== undefined) {\n                queryParameters['offset'] = requestParameters.offset;\n            }\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/messages/{id}/reactions`.replace(`{${\"id\"}}`, encodeURIComponent(String(requestParameters.id))),\n                method: 'GET',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Returns list of reactions of specific message  Required permissions: - ReadChannel\n     * Get reactions\n     */\n    getReactions(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.getReactionsRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Returns replies (thread) of the message  Required permissions: - ReadChannel\n     * Get replies\n     */\n    getRepliesRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.parentId === null || requestParameters.parentId === undefined) {\n                throw new RequiredError$1('parentId', 'Required parameter requestParameters.parentId was null or undefined when calling getReplies.');\n            }\n            const queryParameters = {};\n            if (requestParameters.idGte !== undefined) {\n                queryParameters['id_gte'] = requestParameters.idGte;\n            }\n            if (requestParameters.idGt !== undefined) {\n                queryParameters['id_gt'] = requestParameters.idGt;\n            }\n            if (requestParameters.idLte !== undefined) {\n                queryParameters['id_lte'] = requestParameters.idLte;\n            }\n            if (requestParameters.idLt !== undefined) {\n                queryParameters['id_lt'] = requestParameters.idLt;\n            }\n            if (requestParameters.createdAtAfterOrEqual !== undefined) {\n                queryParameters['created_at_after_or_equal'] = requestParameters.createdAtAfterOrEqual;\n            }\n            if (requestParameters.createdAtAfter !== undefined) {\n                queryParameters['created_at_after'] = requestParameters.createdAtAfter;\n            }\n            if (requestParameters.createdAtBeforeOrEqual !== undefined) {\n                queryParameters['created_at_before_or_equal'] = requestParameters.createdAtBeforeOrEqual;\n            }\n            if (requestParameters.createdAtBefore !== undefined) {\n                queryParameters['created_at_before'] = requestParameters.createdAtBefore;\n            }\n            if (requestParameters.idAround !== undefined) {\n                queryParameters['id_around'] = requestParameters.idAround;\n            }\n            if (requestParameters.createdAtAround !== undefined) {\n                queryParameters['created_at_around'] = requestParameters.createdAtAround;\n            }\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/messages/{parent_id}/replies`.replace(`{${\"parent_id\"}}`, encodeURIComponent(String(requestParameters.parentId))),\n                method: 'GET',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Returns replies (thread) of the message  Required permissions: - ReadChannel\n     * Get replies\n     */\n    getReplies(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.getRepliesRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Marks channels as read up to the specific message. If no channels is given, mark all channel as read  Sends events: - message.read  Required permissions: - ReadChannel\n     * Mark channels as read\n     */\n    markChannelsReadRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.markChannelsReadRequest === null || requestParameters.markChannelsReadRequest === undefined) {\n                throw new RequiredError$1('markChannelsReadRequest', 'Required parameter requestParameters.markChannelsReadRequest was null or undefined when calling markChannelsRead.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/channels/read`,\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.markChannelsReadRequest,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Marks channels as read up to the specific message. If no channels is given, mark all channel as read  Sends events: - message.read  Required permissions: - ReadChannel\n     * Mark channels as read\n     */\n    markChannelsRead(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.markChannelsReadRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Marks channel as read up to the specific message  Sends events: - message.read  Required permissions: - ReadChannel\n     * Mark read\n     */\n    markReadRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.type === null || requestParameters.type === undefined) {\n                throw new RequiredError$1('type', 'Required parameter requestParameters.type was null or undefined when calling markRead.');\n            }\n            if (requestParameters.id === null || requestParameters.id === undefined) {\n                throw new RequiredError$1('id', 'Required parameter requestParameters.id was null or undefined when calling markRead.');\n            }\n            if (requestParameters.markReadRequest === null || requestParameters.markReadRequest === undefined) {\n                throw new RequiredError$1('markReadRequest', 'Required parameter requestParameters.markReadRequest was null or undefined when calling markRead.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/channels/{type}/{id}/read`.replace(`{${\"type\"}}`, encodeURIComponent(String(requestParameters.type))).replace(`{${\"id\"}}`, encodeURIComponent(String(requestParameters.id))),\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.markReadRequest,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Marks channel as read up to the specific message  Sends events: - message.read  Required permissions: - ReadChannel\n     * Mark read\n     */\n    markRead(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.markReadRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Marks channel as unread from a specific message  Required permissions: - ReadChannel\n     * Mark unread\n     */\n    markUnreadRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.type === null || requestParameters.type === undefined) {\n                throw new RequiredError$1('type', 'Required parameter requestParameters.type was null or undefined when calling markUnread.');\n            }\n            if (requestParameters.id === null || requestParameters.id === undefined) {\n                throw new RequiredError$1('id', 'Required parameter requestParameters.id was null or undefined when calling markUnread.');\n            }\n            if (requestParameters.markUnreadRequest === null || requestParameters.markUnreadRequest === undefined) {\n                throw new RequiredError$1('markUnreadRequest', 'Required parameter requestParameters.markUnreadRequest was null or undefined when calling markUnread.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/channels/{type}/{id}/unread`.replace(`{${\"type\"}}`, encodeURIComponent(String(requestParameters.type))).replace(`{${\"id\"}}`, encodeURIComponent(String(requestParameters.id))),\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.markUnreadRequest,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Marks channel as unread from a specific message  Required permissions: - ReadChannel\n     * Mark unread\n     */\n    markUnread(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.markUnreadRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Find and filter message flags  Required permissions: - ReadMessageFlags\n     * Query Message Flags\n     */\n    queryMessageFlagsRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const queryParameters = {};\n            if (requestParameters.payload !== undefined) {\n                queryParameters['payload'] = requestParameters.payload;\n            }\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/moderation/flags/message`,\n                method: 'GET',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Find and filter message flags  Required permissions: - ReadMessageFlags\n     * Query Message Flags\n     */\n    queryMessageFlags(requestParameters = {}, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.queryMessageFlagsRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Executes message command action with given parameters  Sends events: - message.new  Required permissions: - RunMessageAction\n     * Run message command action\n     */\n    runMessageActionRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.id === null || requestParameters.id === undefined) {\n                throw new RequiredError$1('id', 'Required parameter requestParameters.id was null or undefined when calling runMessageAction.');\n            }\n            if (requestParameters.messageActionRequest === null || requestParameters.messageActionRequest === undefined) {\n                throw new RequiredError$1('messageActionRequest', 'Required parameter requestParameters.messageActionRequest was null or undefined when calling runMessageAction.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/messages/{id}/action`.replace(`{${\"id\"}}`, encodeURIComponent(String(requestParameters.id))),\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.messageActionRequest,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Executes message command action with given parameters  Sends events: - message.new  Required permissions: - RunMessageAction\n     * Run message command action\n     */\n    runMessageAction(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.runMessageActionRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Search messages across channels  Required permissions: - ReadChannel\n     * Search messages\n     */\n    searchRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const queryParameters = {};\n            if (requestParameters.payload !== undefined) {\n                queryParameters['payload'] = requestParameters.payload;\n            }\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/search`,\n                method: 'GET',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Search messages across channels  Required permissions: - ReadChannel\n     * Search messages\n     */\n    search(requestParameters = {}, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.searchRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Sends new message to the specified channel  Sends events: - message.new - message.updated  Required permissions: - AddLinks - CreateMessage - PinMessage - SkipChannelCooldown - SkipMessageModeration - UseFrozenChannel\n     * Send new message\n     */\n    sendMessageRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.type === null || requestParameters.type === undefined) {\n                throw new RequiredError$1('type', 'Required parameter requestParameters.type was null or undefined when calling sendMessage.');\n            }\n            if (requestParameters.id === null || requestParameters.id === undefined) {\n                throw new RequiredError$1('id', 'Required parameter requestParameters.id was null or undefined when calling sendMessage.');\n            }\n            if (requestParameters.sendMessageRequest === null || requestParameters.sendMessageRequest === undefined) {\n                throw new RequiredError$1('sendMessageRequest', 'Required parameter requestParameters.sendMessageRequest was null or undefined when calling sendMessage.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/channels/{type}/{id}/message`.replace(`{${\"type\"}}`, encodeURIComponent(String(requestParameters.type))).replace(`{${\"id\"}}`, encodeURIComponent(String(requestParameters.id))),\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.sendMessageRequest,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Sends new message to the specified channel  Sends events: - message.new - message.updated  Required permissions: - AddLinks - CreateMessage - PinMessage - SkipChannelCooldown - SkipMessageModeration - UseFrozenChannel\n     * Send new message\n     */\n    sendMessage(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.sendMessageRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Sends reaction to specified message  Sends events: - reaction.new - reaction.updated  Required permissions: - CreateReaction - UseFrozenChannel\n     * Send reaction\n     */\n    sendReactionRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.id === null || requestParameters.id === undefined) {\n                throw new RequiredError$1('id', 'Required parameter requestParameters.id was null or undefined when calling sendReaction.');\n            }\n            if (requestParameters.sendReactionRequest === null || requestParameters.sendReactionRequest === undefined) {\n                throw new RequiredError$1('sendReactionRequest', 'Required parameter requestParameters.sendReactionRequest was null or undefined when calling sendReaction.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/messages/{id}/reaction`.replace(`{${\"id\"}}`, encodeURIComponent(String(requestParameters.id))),\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.sendReactionRequest,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Sends reaction to specified message  Sends events: - reaction.new - reaction.updated  Required permissions: - CreateReaction - UseFrozenChannel\n     * Send reaction\n     */\n    sendReaction(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.sendReactionRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Translates message to a given language using automated translation software  Sends events: - message.updated  Required permissions: - ReadChannel\n     * Translate message\n     */\n    translateMessageRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.id === null || requestParameters.id === undefined) {\n                throw new RequiredError$1('id', 'Required parameter requestParameters.id was null or undefined when calling translateMessage.');\n            }\n            if (requestParameters.translateMessageRequest === null || requestParameters.translateMessageRequest === undefined) {\n                throw new RequiredError$1('translateMessageRequest', 'Required parameter requestParameters.translateMessageRequest was null or undefined when calling translateMessage.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/messages/{id}/translate`.replace(`{${\"id\"}}`, encodeURIComponent(String(requestParameters.id))),\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.translateMessageRequest,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Translates message to a given language using automated translation software  Sends events: - message.updated  Required permissions: - ReadChannel\n     * Translate message\n     */\n    translateMessage(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.translateMessageRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Removes previously created user or message flag  Required permissions: - FlagMessage - FlagUser\n     * Unflag\n     */\n    unflagRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.flagRequest === null || requestParameters.flagRequest === undefined) {\n                throw new RequiredError$1('flagRequest', 'Required parameter requestParameters.flagRequest was null or undefined when calling unflag.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/moderation/unflag`,\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.flagRequest,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Removes previously created user or message flag  Required permissions: - FlagMessage - FlagUser\n     * Unflag\n     */\n    unflag(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.unflagRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Updates message with new data  Sends events: - message.updated  Required permissions: - AddLinks - PinMessage - SkipMessageModeration - UpdateMessage\n     * Update message\n     */\n    updateMessageRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.id === null || requestParameters.id === undefined) {\n                throw new RequiredError$1('id', 'Required parameter requestParameters.id was null or undefined when calling updateMessage.');\n            }\n            if (requestParameters.updateMessageRequest === null || requestParameters.updateMessageRequest === undefined) {\n                throw new RequiredError$1('updateMessageRequest', 'Required parameter requestParameters.updateMessageRequest was null or undefined when calling updateMessage.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/messages/{id}`.replace(`{${\"id\"}}`, encodeURIComponent(String(requestParameters.id))),\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.updateMessageRequest,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Updates message with new data  Sends events: - message.updated  Required permissions: - AddLinks - PinMessage - SkipMessageModeration - UpdateMessage\n     * Update message\n     */\n    updateMessage(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.updateMessageRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Updates certain fields of the message  Sends events: - message.updated  Required permissions: - AddLinks - PinMessage - SkipMessageModeration - UpdateMessage\n     * Partially message update\n     */\n    updateMessagePartialRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.id === null || requestParameters.id === undefined) {\n                throw new RequiredError$1('id', 'Required parameter requestParameters.id was null or undefined when calling updateMessagePartial.');\n            }\n            if (requestParameters.updateMessagePartialRequest === null || requestParameters.updateMessagePartialRequest === undefined) {\n                throw new RequiredError$1('updateMessagePartialRequest', 'Required parameter requestParameters.updateMessagePartialRequest was null or undefined when calling updateMessagePartial.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/messages/{id}`.replace(`{${\"id\"}}`, encodeURIComponent(String(requestParameters.id))),\n                method: 'PUT',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.updateMessagePartialRequest,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Updates certain fields of the message  Sends events: - message.updated  Required permissions: - AddLinks - PinMessage - SkipMessageModeration - UpdateMessage\n     * Partially message update\n     */\n    updateMessagePartial(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.updateMessagePartialRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Uploads file  Required permissions: - UploadAttachment\n     * Upload file\n     */\n    uploadFileRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.type === null || requestParameters.type === undefined) {\n                throw new RequiredError$1('type', 'Required parameter requestParameters.type was null or undefined when calling uploadFile.');\n            }\n            if (requestParameters.id === null || requestParameters.id === undefined) {\n                throw new RequiredError$1('id', 'Required parameter requestParameters.id was null or undefined when calling uploadFile.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const consumes = [\n                { contentType: 'multipart/form-data' },\n            ];\n            // @ts-ignore: canConsumeForm may be unused\n            canConsumeForm(consumes);\n            let formParams;\n            {\n                formParams = new URLSearchParams();\n            }\n            if (requestParameters.file !== undefined) {\n                formParams.append('file', requestParameters.file);\n            }\n            if (requestParameters.user !== undefined) {\n                formParams.append('user', new Blob([JSON.stringify(requestParameters.user)], { type: \"application/json\", }));\n            }\n            const response = yield this.request({\n                path: `/channels/{type}/{id}/file`.replace(`{${\"type\"}}`, encodeURIComponent(String(requestParameters.type))).replace(`{${\"id\"}}`, encodeURIComponent(String(requestParameters.id))),\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: formParams,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Uploads file  Required permissions: - UploadAttachment\n     * Upload file\n     */\n    uploadFile(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.uploadFileRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Uploads image  Required permissions: - UploadAttachment\n     * Upload image\n     */\n    uploadImageRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.type === null || requestParameters.type === undefined) {\n                throw new RequiredError$1('type', 'Required parameter requestParameters.type was null or undefined when calling uploadImage.');\n            }\n            if (requestParameters.id === null || requestParameters.id === undefined) {\n                throw new RequiredError$1('id', 'Required parameter requestParameters.id was null or undefined when calling uploadImage.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const consumes = [\n                { contentType: 'multipart/form-data' },\n            ];\n            // @ts-ignore: canConsumeForm may be unused\n            canConsumeForm(consumes);\n            let formParams;\n            {\n                formParams = new URLSearchParams();\n            }\n            if (requestParameters.file !== undefined) {\n                formParams.append('file', requestParameters.file);\n            }\n            if (requestParameters.uploadSizes) {\n                formParams.append('upload_sizes', requestParameters.uploadSizes.join(COLLECTION_FORMATS[\"csv\"]));\n            }\n            if (requestParameters.user !== undefined) {\n                formParams.append('user', new Blob([JSON.stringify(requestParameters.user)], { type: \"application/json\", }));\n            }\n            const response = yield this.request({\n                path: `/channels/{type}/{id}/image`.replace(`{${\"type\"}}`, encodeURIComponent(String(requestParameters.type))).replace(`{${\"id\"}}`, encodeURIComponent(String(requestParameters.id))),\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: formParams,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Uploads image  Required permissions: - UploadAttachment\n     * Upload image\n     */\n    uploadImage(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.uploadImageRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n}\n\n/* tslint:disable */\n/* eslint-disable */\n/**\n * Stream Chat API\n * No description provided (generated by Openapi Generator https://github.com/openapitools/openapi-generator)\n *\n * The version of the OpenAPI document: v92.7.0\n *\n *\n * NOTE: This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).\n * https://openapi-generator.tech\n * Do not edit the class manually.\n */\n/**\n *\n */\nclass PermissionsV2Api extends BaseAPI$1 {\n    /**\n     * Creates custom role\n     * Create role\n     */\n    createRoleRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.createRoleRequest === null || requestParameters.createRoleRequest === undefined) {\n                throw new RequiredError$1('createRoleRequest', 'Required parameter requestParameters.createRoleRequest was null or undefined when calling createRole.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/roles`,\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.createRoleRequest,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Creates custom role\n     * Create role\n     */\n    createRole(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.createRoleRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Deletes custom role\n     * Delete role\n     */\n    deleteRoleRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.name === null || requestParameters.name === undefined) {\n                throw new RequiredError$1('name', 'Required parameter requestParameters.name was null or undefined when calling deleteRole.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/roles/{name}`.replace(`{${\"name\"}}`, encodeURIComponent(String(requestParameters.name))),\n                method: 'DELETE',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Deletes custom role\n     * Delete role\n     */\n    deleteRole(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.deleteRoleRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Gets custom permission\n     * Get permission\n     */\n    getPermissionRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.id === null || requestParameters.id === undefined) {\n                throw new RequiredError$1('id', 'Required parameter requestParameters.id was null or undefined when calling getPermission.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/permissions/{id}`.replace(`{${\"id\"}}`, encodeURIComponent(String(requestParameters.id))),\n                method: 'GET',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Gets custom permission\n     * Get permission\n     */\n    getPermission(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.getPermissionRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Lists all available permissions\n     * List permissions\n     */\n    listPermissionsRaw(initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const queryParameters = {};\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/permissions`,\n                method: 'GET',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Lists all available permissions\n     * List permissions\n     */\n    listPermissions(initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.listPermissionsRaw(initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Lists all available roles\n     * List roles\n     */\n    listRolesRaw(initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const queryParameters = {};\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/roles`,\n                method: 'GET',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Lists all available roles\n     * List roles\n     */\n    listRoles(initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.listRolesRaw(initOverrides);\n            return yield response.value();\n        });\n    }\n}\n\n/* tslint:disable */\n/* eslint-disable */\n/**\n * Stream Chat API\n * No description provided (generated by Openapi Generator https://github.com/openapitools/openapi-generator)\n *\n * The version of the OpenAPI document: v92.7.0\n *\n *\n * NOTE: This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).\n * https://openapi-generator.tech\n * Do not edit the class manually.\n */\n/**\n *\n */\nclass PushApi extends BaseAPI$1 {\n    /**\n     * Adds a new device to a user, if the same device already exists the call will have no effect\n     * Create device\n     */\n    createDeviceRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.createDeviceRequest === null || requestParameters.createDeviceRequest === undefined) {\n                throw new RequiredError$1('createDeviceRequest', 'Required parameter requestParameters.createDeviceRequest was null or undefined when calling createDevice.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/devices`,\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.createDeviceRequest,\n            }, initOverrides);\n            return new VoidApiResponse$1(response);\n        });\n    }\n    /**\n     * Adds a new device to a user, if the same device already exists the call will have no effect\n     * Create device\n     */\n    createDevice(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.createDeviceRaw(requestParameters, initOverrides);\n        });\n    }\n    /**\n     * Delete a push provider from v2 with multi bundle/package support. v1 isn\\'t supported in this endpoint\n     * Delete a push provider\n     */\n    deletePushProviderRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.type === null || requestParameters.type === undefined) {\n                throw new RequiredError$1('type', 'Required parameter requestParameters.type was null or undefined when calling deletePushProvider.');\n            }\n            if (requestParameters.name === null || requestParameters.name === undefined) {\n                throw new RequiredError$1('name', 'Required parameter requestParameters.name was null or undefined when calling deletePushProvider.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/push_providers/{type}/{name}`.replace(`{${\"type\"}}`, encodeURIComponent(String(requestParameters.type))).replace(`{${\"name\"}}`, encodeURIComponent(String(requestParameters.name))),\n                method: 'DELETE',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Delete a push provider from v2 with multi bundle/package support. v1 isn\\'t supported in this endpoint\n     * Delete a push provider\n     */\n    deletePushProvider(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.deletePushProviderRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * List details of all push providers.\n     * List push providers\n     */\n    listPushProvidersRaw(initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const queryParameters = {};\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/push_providers`,\n                method: 'GET',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * List details of all push providers.\n     * List push providers\n     */\n    listPushProviders(initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.listPushProvidersRaw(initOverrides);\n            return yield response.value();\n        });\n    }\n}\n\n/* tslint:disable */\n/* eslint-disable */\n/**\n * Stream Chat API\n * No description provided (generated by Openapi Generator https://github.com/openapitools/openapi-generator)\n *\n * The version of the OpenAPI document: v92.7.0\n *\n *\n * NOTE: This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).\n * https://openapi-generator.tech\n * Do not edit the class manually.\n */\n/**\n *\n */\nlet ServerSideApi$1 = class ServerSideApi extends BaseAPI$1 {\n    /**\n     * Upsert a push provider for v2 with multi bundle/package support\n     * Upsert a push provider\n     */\n    upsertPushProviderRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.upsertPushProviderRequest === null || requestParameters.upsertPushProviderRequest === undefined) {\n                throw new RequiredError$1('upsertPushProviderRequest', 'Required parameter requestParameters.upsertPushProviderRequest was null or undefined when calling upsertPushProvider.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/push_providers`,\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.upsertPushProviderRequest,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Upsert a push provider for v2 with multi bundle/package support\n     * Upsert a push provider\n     */\n    upsertPushProvider(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.upsertPushProviderRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n};\n\n/* tslint:disable */\n/* eslint-disable */\n/**\n * Stream Chat API\n * No description provided (generated by Openapi Generator https://github.com/openapitools/openapi-generator)\n *\n * The version of the OpenAPI document: v92.7.0\n *\n *\n * NOTE: This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).\n * https://openapi-generator.tech\n * Do not edit the class manually.\n */\n/**\n *\n */\nlet SettingsApi$1 = class SettingsApi extends BaseAPI$1 {\n    /**\n     * Sends a test message via push, this is a test endpoint to verify your push settings\n     * Check push\n     */\n    checkPushRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.checkPushRequest === null || requestParameters.checkPushRequest === undefined) {\n                throw new RequiredError$1('checkPushRequest', 'Required parameter requestParameters.checkPushRequest was null or undefined when calling checkPush.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/check_push`,\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.checkPushRequest,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Sends a test message via push, this is a test endpoint to verify your push settings\n     * Check push\n     */\n    checkPush(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.checkPushRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Validates Amazon SNS configuration\n     * Check SNS\n     */\n    checkSNSRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.checkSNSRequest === null || requestParameters.checkSNSRequest === undefined) {\n                throw new RequiredError$1('checkSNSRequest', 'Required parameter requestParameters.checkSNSRequest was null or undefined when calling checkSNS.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/check_sns`,\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.checkSNSRequest,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Validates Amazon SNS configuration\n     * Check SNS\n     */\n    checkSNS(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.checkSNSRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Validates Amazon SQS credentials\n     * Check SQS\n     */\n    checkSQSRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.checkSQSRequest === null || requestParameters.checkSQSRequest === undefined) {\n                throw new RequiredError$1('checkSQSRequest', 'Required parameter requestParameters.checkSQSRequest was null or undefined when calling checkSQS.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/check_sqs`,\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.checkSQSRequest,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Validates Amazon SQS credentials\n     * Check SQS\n     */\n    checkSQS(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.checkSQSRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Creates a new application blocklist, once created the blocklist can be used by any channel type\n     * Create block list\n     */\n    createBlockListRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.createBlockListRequest === null || requestParameters.createBlockListRequest === undefined) {\n                throw new RequiredError$1('createBlockListRequest', 'Required parameter requestParameters.createBlockListRequest was null or undefined when calling createBlockList.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/blocklists`,\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.createBlockListRequest,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Creates a new application blocklist, once created the blocklist can be used by any channel type\n     * Create block list\n     */\n    createBlockList(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.createBlockListRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Creates new channel type\n     * Create channel type\n     */\n    createChannelTypeRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.createChannelTypeRequest === null || requestParameters.createChannelTypeRequest === undefined) {\n                throw new RequiredError$1('createChannelTypeRequest', 'Required parameter requestParameters.createChannelTypeRequest was null or undefined when calling createChannelType.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/channeltypes`,\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.createChannelTypeRequest,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Creates new channel type\n     * Create channel type\n     */\n    createChannelType(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.createChannelTypeRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Deletes previously created application blocklist\n     * Delete block list\n     */\n    deleteBlockListRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.name === null || requestParameters.name === undefined) {\n                throw new RequiredError$1('name', 'Required parameter requestParameters.name was null or undefined when calling deleteBlockList.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/blocklists/{name}`.replace(`{${\"name\"}}`, encodeURIComponent(String(requestParameters.name))),\n                method: 'DELETE',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Deletes previously created application blocklist\n     * Delete block list\n     */\n    deleteBlockList(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.deleteBlockListRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Deletes channel type\n     * Delete channel type\n     */\n    deleteChannelTypeRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.name === null || requestParameters.name === undefined) {\n                throw new RequiredError$1('name', 'Required parameter requestParameters.name was null or undefined when calling deleteChannelType.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/channeltypes/{name}`.replace(`{${\"name\"}}`, encodeURIComponent(String(requestParameters.name))),\n                method: 'DELETE',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Deletes channel type\n     * Delete channel type\n     */\n    deleteChannelType(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.deleteChannelTypeRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Delete a push provider from v2 with multi bundle/package support. v1 isn\\'t supported in this endpoint\n     * Delete a push provider\n     */\n    deletePushProviderRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.type === null || requestParameters.type === undefined) {\n                throw new RequiredError$1('type', 'Required parameter requestParameters.type was null or undefined when calling deletePushProvider.');\n            }\n            if (requestParameters.name === null || requestParameters.name === undefined) {\n                throw new RequiredError$1('name', 'Required parameter requestParameters.name was null or undefined when calling deletePushProvider.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/push_providers/{type}/{name}`.replace(`{${\"type\"}}`, encodeURIComponent(String(requestParameters.type))).replace(`{${\"name\"}}`, encodeURIComponent(String(requestParameters.name))),\n                method: 'DELETE',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Delete a push provider from v2 with multi bundle/package support. v1 isn\\'t supported in this endpoint\n     * Delete a push provider\n     */\n    deletePushProvider(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.deletePushProviderRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * This method returns the application settings\n     * Get App Settings\n     */\n    getAppRaw(initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const queryParameters = {};\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/app`,\n                method: 'GET',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * This method returns the application settings\n     * Get App Settings\n     */\n    getApp(initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.getAppRaw(initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Returns block list by given name\n     * Get block list\n     */\n    getBlockListRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.name === null || requestParameters.name === undefined) {\n                throw new RequiredError$1('name', 'Required parameter requestParameters.name was null or undefined when calling getBlockList.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/blocklists/{name}`.replace(`{${\"name\"}}`, encodeURIComponent(String(requestParameters.name))),\n                method: 'GET',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Returns block list by given name\n     * Get block list\n     */\n    getBlockList(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.getBlockListRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Gets channel type\n     * Get channel type\n     */\n    getChannelTypeRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.name === null || requestParameters.name === undefined) {\n                throw new RequiredError$1('name', 'Required parameter requestParameters.name was null or undefined when calling getChannelType.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/channeltypes/{name}`.replace(`{${\"name\"}}`, encodeURIComponent(String(requestParameters.name))),\n                method: 'GET',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Gets channel type\n     * Get channel type\n     */\n    getChannelType(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.getChannelTypeRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Get rate limits usage and quotas\n     * Get rate limits\n     */\n    getRateLimitsRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const queryParameters = {};\n            if (requestParameters.serverSide !== undefined) {\n                queryParameters['server_side'] = requestParameters.serverSide;\n            }\n            if (requestParameters.android !== undefined) {\n                queryParameters['android'] = requestParameters.android;\n            }\n            if (requestParameters.ios !== undefined) {\n                queryParameters['ios'] = requestParameters.ios;\n            }\n            if (requestParameters.web !== undefined) {\n                queryParameters['web'] = requestParameters.web;\n            }\n            if (requestParameters.endpoints !== undefined) {\n                queryParameters['endpoints'] = requestParameters.endpoints;\n            }\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/rate_limits`,\n                method: 'GET',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Get rate limits usage and quotas\n     * Get rate limits\n     */\n    getRateLimits(requestParameters = {}, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.getRateLimitsRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Returns all available block lists\n     * List block lists\n     */\n    listBlockListsRaw(initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const queryParameters = {};\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/blocklists`,\n                method: 'GET',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Returns all available block lists\n     * List block lists\n     */\n    listBlockLists(initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.listBlockListsRaw(initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Lists all available channel types\n     * List channel types\n     */\n    listChannelTypesRaw(initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const queryParameters = {};\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/channeltypes`,\n                method: 'GET',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Lists all available channel types\n     * List channel types\n     */\n    listChannelTypes(initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.listChannelTypesRaw(initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * List details of all push providers.\n     * List push providers\n     */\n    listPushProvidersRaw(initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const queryParameters = {};\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/push_providers`,\n                method: 'GET',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * List details of all push providers.\n     * List push providers\n     */\n    listPushProviders(initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.listPushProvidersRaw(initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * This method updates one or more application settings\n     * Update App Settings\n     */\n    updateAppRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.updateAppRequest === null || requestParameters.updateAppRequest === undefined) {\n                throw new RequiredError$1('updateAppRequest', 'Required parameter requestParameters.updateAppRequest was null or undefined when calling updateApp.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/app`,\n                method: 'PATCH',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.updateAppRequest,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * This method updates one or more application settings\n     * Update App Settings\n     */\n    updateApp(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.updateAppRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Updates contents of the block list\n     * Update block list\n     */\n    updateBlockListRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.name === null || requestParameters.name === undefined) {\n                throw new RequiredError$1('name', 'Required parameter requestParameters.name was null or undefined when calling updateBlockList.');\n            }\n            if (requestParameters.updateBlockListRequest === null || requestParameters.updateBlockListRequest === undefined) {\n                throw new RequiredError$1('updateBlockListRequest', 'Required parameter requestParameters.updateBlockListRequest was null or undefined when calling updateBlockList.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/blocklists/{name}`.replace(`{${\"name\"}}`, encodeURIComponent(String(requestParameters.name))),\n                method: 'PUT',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.updateBlockListRequest,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Updates contents of the block list\n     * Update block list\n     */\n    updateBlockList(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.updateBlockListRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Updates channel type\n     * Update channel type\n     */\n    updateChannelTypeRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.name === null || requestParameters.name === undefined) {\n                throw new RequiredError$1('name', 'Required parameter requestParameters.name was null or undefined when calling updateChannelType.');\n            }\n            if (requestParameters.updateChannelTypeRequest === null || requestParameters.updateChannelTypeRequest === undefined) {\n                throw new RequiredError$1('updateChannelTypeRequest', 'Required parameter requestParameters.updateChannelTypeRequest was null or undefined when calling updateChannelType.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/channeltypes/{name}`.replace(`{${\"name\"}}`, encodeURIComponent(String(requestParameters.name))),\n                method: 'PUT',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.updateChannelTypeRequest,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Updates channel type\n     * Update channel type\n     */\n    updateChannelType(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.updateChannelTypeRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n};\n\n/* tslint:disable */\n/* eslint-disable */\n/**\n * Stream Chat API\n * No description provided (generated by Openapi Generator https://github.com/openapitools/openapi-generator)\n *\n * The version of the OpenAPI document: v92.7.0\n *\n *\n * NOTE: This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).\n * https://openapi-generator.tech\n * Do not edit the class manually.\n */\n/**\n *\n */\nclass TasksApi extends BaseAPI$1 {\n    /**\n     * Gets status of a task\n     * Get status of a task\n     */\n    getTaskRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.id === null || requestParameters.id === undefined) {\n                throw new RequiredError$1('id', 'Required parameter requestParameters.id was null or undefined when calling getTask.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/tasks/{id}`.replace(`{${\"id\"}}`, encodeURIComponent(String(requestParameters.id))),\n                method: 'GET',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Gets status of a task\n     * Get status of a task\n     */\n    getTask(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.getTaskRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n}\n\n/* tslint:disable */\n/* eslint-disable */\n/**\n * Stream Chat API\n * No description provided (generated by Openapi Generator https://github.com/openapitools/openapi-generator)\n *\n * The version of the OpenAPI document: v92.7.0\n *\n *\n * NOTE: This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).\n * https://openapi-generator.tech\n * Do not edit the class manually.\n */\n/**\n *\n */\nclass TestingApi extends BaseAPI$1 {\n    /**\n     * Sends a test message via push, this is a test endpoint to verify your push settings\n     * Check push\n     */\n    checkPushRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.checkPushRequest === null || requestParameters.checkPushRequest === undefined) {\n                throw new RequiredError$1('checkPushRequest', 'Required parameter requestParameters.checkPushRequest was null or undefined when calling checkPush.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/check_push`,\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.checkPushRequest,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Sends a test message via push, this is a test endpoint to verify your push settings\n     * Check push\n     */\n    checkPush(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.checkPushRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Validates Amazon SNS configuration\n     * Check SNS\n     */\n    checkSNSRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.checkSNSRequest === null || requestParameters.checkSNSRequest === undefined) {\n                throw new RequiredError$1('checkSNSRequest', 'Required parameter requestParameters.checkSNSRequest was null or undefined when calling checkSNS.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/check_sns`,\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.checkSNSRequest,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Validates Amazon SNS configuration\n     * Check SNS\n     */\n    checkSNS(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.checkSNSRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Validates Amazon SQS credentials\n     * Check SQS\n     */\n    checkSQSRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.checkSQSRequest === null || requestParameters.checkSQSRequest === undefined) {\n                throw new RequiredError$1('checkSQSRequest', 'Required parameter requestParameters.checkSQSRequest was null or undefined when calling checkSQS.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/check_sqs`,\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.checkSQSRequest,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Validates Amazon SQS credentials\n     * Check SQS\n     */\n    checkSQS(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.checkSQSRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n}\n\n/* tslint:disable */\n/* eslint-disable */\n/**\n * Stream Chat API\n * No description provided (generated by Openapi Generator https://github.com/openapitools/openapi-generator)\n *\n * The version of the OpenAPI document: v92.7.0\n *\n *\n * NOTE: This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).\n * https://openapi-generator.tech\n * Do not edit the class manually.\n */\n/**\n *\n */\nclass UsersApi extends BaseAPI$1 {\n    /**\n     * Restricts user activity either in specific channel or globally  Sends events: - user.banned  Required permissions: - BanChannelMember - BanUser\n     * Ban user\n     */\n    banRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.banRequest === null || requestParameters.banRequest === undefined) {\n                throw new RequiredError$1('banRequest', 'Required parameter requestParameters.banRequest was null or undefined when calling ban.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/moderation/ban`,\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.banRequest,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Restricts user activity either in specific channel or globally  Sends events: - user.banned  Required permissions: - BanChannelMember - BanUser\n     * Ban user\n     */\n    ban(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.banRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Establishes WebSocket connection for user  Sends events: - user.updated\n     * Connect (WebSocket)\n     */\n    connectRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const queryParameters = {};\n            if (requestParameters.json !== undefined) {\n                queryParameters['json'] = requestParameters.json;\n            }\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/connect`,\n                method: 'GET',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new VoidApiResponse$1(response);\n        });\n    }\n    /**\n     * Establishes WebSocket connection for user  Sends events: - user.updated\n     * Connect (WebSocket)\n     */\n    connect(requestParameters = {}, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.connectRaw(requestParameters, initOverrides);\n        });\n    }\n    /**\n     * Creates guest user\n     * Create guest\n     */\n    createGuestRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.guestRequest === null || requestParameters.guestRequest === undefined) {\n                throw new RequiredError$1('guestRequest', 'Required parameter requestParameters.guestRequest was null or undefined when calling createGuest.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/guest`,\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.guestRequest,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Creates guest user\n     * Create guest\n     */\n    createGuest(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.createGuestRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Deactivates user with possibility to activate it back  Sends events: - user.deactivated\n     * Deactivate user\n     */\n    deactivateUserRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.userId === null || requestParameters.userId === undefined) {\n                throw new RequiredError$1('userId', 'Required parameter requestParameters.userId was null or undefined when calling deactivateUser.');\n            }\n            if (requestParameters.deactivateUserRequest === null || requestParameters.deactivateUserRequest === undefined) {\n                throw new RequiredError$1('deactivateUserRequest', 'Required parameter requestParameters.deactivateUserRequest was null or undefined when calling deactivateUser.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/users/{user_id}/deactivate`.replace(`{${\"user_id\"}}`, encodeURIComponent(String(requestParameters.userId))),\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.deactivateUserRequest,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Deactivates user with possibility to activate it back  Sends events: - user.deactivated\n     * Deactivate user\n     */\n    deactivateUser(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.deactivateUserRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Deactivate users in batches  Sends events: - user.deactivated\n     * Deactivate users\n     */\n    deactivateUsersRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.deactivateUsersRequest === null || requestParameters.deactivateUsersRequest === undefined) {\n                throw new RequiredError$1('deactivateUsersRequest', 'Required parameter requestParameters.deactivateUsersRequest was null or undefined when calling deactivateUsers.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/users/deactivate`,\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.deactivateUsersRequest,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Deactivate users in batches  Sends events: - user.deactivated\n     * Deactivate users\n     */\n    deactivateUsers(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.deactivateUsersRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Deletes user and optionally all their belongings. The Endpoint is deprecated, please use \\'Delete Users\\' endpoint instead  Sends events: - channel.deleted - message.deleted - user.deleted\n     * Delete user\n     */\n    deleteUserRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.userId === null || requestParameters.userId === undefined) {\n                throw new RequiredError$1('userId', 'Required parameter requestParameters.userId was null or undefined when calling deleteUser.');\n            }\n            const queryParameters = {};\n            if (requestParameters.markMessagesDeleted !== undefined) {\n                queryParameters['mark_messages_deleted'] = requestParameters.markMessagesDeleted;\n            }\n            if (requestParameters.hardDelete !== undefined) {\n                queryParameters['hard_delete'] = requestParameters.hardDelete;\n            }\n            if (requestParameters.deleteConversationChannels !== undefined) {\n                queryParameters['delete_conversation_channels'] = requestParameters.deleteConversationChannels;\n            }\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/users/{user_id}`.replace(`{${\"user_id\"}}`, encodeURIComponent(String(requestParameters.userId))),\n                method: 'DELETE',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Deletes user and optionally all their belongings. The Endpoint is deprecated, please use \\'Delete Users\\' endpoint instead  Sends events: - channel.deleted - message.deleted - user.deleted\n     * Delete user\n     */\n    deleteUser(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.deleteUserRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Deletes users and optionally all their belongings asynchronously.  Sends events: - channel.deleted - user.deleted\n     * Delete Users\n     */\n    deleteUsersRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.deleteUsersRequest === null || requestParameters.deleteUsersRequest === undefined) {\n                throw new RequiredError$1('deleteUsersRequest', 'Required parameter requestParameters.deleteUsersRequest was null or undefined when calling deleteUsers.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/users/delete`,\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.deleteUsersRequest,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Deletes users and optionally all their belongings asynchronously.  Sends events: - channel.deleted - user.deleted\n     * Delete Users\n     */\n    deleteUsers(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.deleteUsersRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Exports the user\\'s profile, reactions and messages. Raises an error if a user has more than 10k messages or reactions\n     * Export user\n     */\n    exportUserRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.userId === null || requestParameters.userId === undefined) {\n                throw new RequiredError$1('userId', 'Required parameter requestParameters.userId was null or undefined when calling exportUser.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/users/{user_id}/export`.replace(`{${\"user_id\"}}`, encodeURIComponent(String(requestParameters.userId))),\n                method: 'GET',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Exports the user\\'s profile, reactions and messages. Raises an error if a user has more than 10k messages or reactions\n     * Export user\n     */\n    exportUser(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.exportUserRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Exports user profile, reactions and messages for list of given users\n     * Export users\n     */\n    exportUsersRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.exportUsersRequest === null || requestParameters.exportUsersRequest === undefined) {\n                throw new RequiredError$1('exportUsersRequest', 'Required parameter requestParameters.exportUsersRequest was null or undefined when calling exportUsers.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/export/users`,\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.exportUsersRequest,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Exports user profile, reactions and messages for list of given users\n     * Export users\n     */\n    exportUsers(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.exportUsersRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Reports message or user for review by moderators  Sends events: - message.flagged - user.flagged  Required permissions: - FlagMessage - FlagUser\n     * Flag\n     */\n    flagRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.flagRequest === null || requestParameters.flagRequest === undefined) {\n                throw new RequiredError$1('flagRequest', 'Required parameter requestParameters.flagRequest was null or undefined when calling flag.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/moderation/flag`,\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.flagRequest,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Reports message or user for review by moderators  Sends events: - message.flagged - user.flagged  Required permissions: - FlagMessage - FlagUser\n     * Flag\n     */\n    flag(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.flagRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * WebSocket fallback transport endpoint  Sends events: - user.updated\n     * Long Poll (Transport)\n     */\n    longPollRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const queryParameters = {};\n            if (requestParameters.json !== undefined) {\n                queryParameters['json'] = requestParameters.json;\n            }\n            if (requestParameters.connectionId !== undefined) {\n                queryParameters['connection_id'] = requestParameters.connectionId;\n            }\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/longpoll`,\n                method: 'GET',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new VoidApiResponse$1(response);\n        });\n    }\n    /**\n     * WebSocket fallback transport endpoint  Sends events: - user.updated\n     * Long Poll (Transport)\n     */\n    longPoll(requestParameters = {}, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.longPollRaw(requestParameters, initOverrides);\n        });\n    }\n    /**\n     * Mutes one or several users  Sends events: - user.muted  Required permissions: - MuteUser\n     * Mute user\n     */\n    muteUserRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.muteUserRequest === null || requestParameters.muteUserRequest === undefined) {\n                throw new RequiredError$1('muteUserRequest', 'Required parameter requestParameters.muteUserRequest was null or undefined when calling muteUser.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/moderation/mute`,\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.muteUserRequest,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Mutes one or several users  Sends events: - user.muted  Required permissions: - MuteUser\n     * Mute user\n     */\n    muteUser(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.muteUserRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Find and filter channel scoped or global user bans  Required permissions: - ReadChannel\n     * Query Banned Users\n     */\n    queryBannedUsersRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const queryParameters = {};\n            if (requestParameters.payload !== undefined) {\n                queryParameters['payload'] = requestParameters.payload;\n            }\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/query_banned_users`,\n                method: 'GET',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Find and filter channel scoped or global user bans  Required permissions: - ReadChannel\n     * Query Banned Users\n     */\n    queryBannedUsers(requestParameters = {}, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.queryBannedUsersRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Find and filter users  Required permissions: - SearchUser\n     * Query users\n     */\n    queryUsersRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const queryParameters = {};\n            if (requestParameters.payload !== undefined) {\n                queryParameters['payload'] = requestParameters.payload;\n            }\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/users`,\n                method: 'GET',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Find and filter users  Required permissions: - SearchUser\n     * Query users\n     */\n    queryUsers(requestParameters = {}, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.queryUsersRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Activates user who\\'s been deactivated previously  Sends events: - user.reactivated\n     * Reactivate user\n     */\n    reactivateUserRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.userId === null || requestParameters.userId === undefined) {\n                throw new RequiredError$1('userId', 'Required parameter requestParameters.userId was null or undefined when calling reactivateUser.');\n            }\n            if (requestParameters.reactivateUserRequest === null || requestParameters.reactivateUserRequest === undefined) {\n                throw new RequiredError$1('reactivateUserRequest', 'Required parameter requestParameters.reactivateUserRequest was null or undefined when calling reactivateUser.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/users/{user_id}/reactivate`.replace(`{${\"user_id\"}}`, encodeURIComponent(String(requestParameters.userId))),\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.reactivateUserRequest,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Activates user who\\'s been deactivated previously  Sends events: - user.reactivated\n     * Reactivate user\n     */\n    reactivateUser(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.reactivateUserRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Reactivate users in batches  Sends events: - user.reactivated\n     * Reactivate users\n     */\n    reactivateUsersRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.reactivateUsersRequest === null || requestParameters.reactivateUsersRequest === undefined) {\n                throw new RequiredError$1('reactivateUsersRequest', 'Required parameter requestParameters.reactivateUsersRequest was null or undefined when calling reactivateUsers.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/users/reactivate`,\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.reactivateUsersRequest,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Reactivate users in batches  Sends events: - user.reactivated\n     * Reactivate users\n     */\n    reactivateUsers(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.reactivateUsersRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Restore soft deleted users\n     * Restore users\n     */\n    restoreUsersRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.restoreUsersRequest === null || requestParameters.restoreUsersRequest === undefined) {\n                throw new RequiredError$1('restoreUsersRequest', 'Required parameter requestParameters.restoreUsersRequest was null or undefined when calling restoreUsers.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/users/restore`,\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.restoreUsersRequest,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Restore soft deleted users\n     * Restore users\n     */\n    restoreUsers(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.restoreUsersRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Removes previously applied ban  Sends events: - user.unbanned  Required permissions: - BanChannelMember - BanUser\n     * Unban user\n     */\n    unbanRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const queryParameters = {};\n            if (requestParameters.targetUserId !== undefined) {\n                queryParameters['target_user_id'] = requestParameters.targetUserId;\n            }\n            if (requestParameters.type !== undefined) {\n                queryParameters['type'] = requestParameters.type;\n            }\n            if (requestParameters.id !== undefined) {\n                queryParameters['id'] = requestParameters.id;\n            }\n            if (requestParameters.createdBy !== undefined) {\n                queryParameters['created_by'] = requestParameters.createdBy;\n            }\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/moderation/ban`,\n                method: 'DELETE',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Removes previously applied ban  Sends events: - user.unbanned  Required permissions: - BanChannelMember - BanUser\n     * Unban user\n     */\n    unban(requestParameters = {}, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.unbanRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Removes previously created user or message flag  Required permissions: - FlagMessage - FlagUser\n     * Unflag\n     */\n    unflagRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.flagRequest === null || requestParameters.flagRequest === undefined) {\n                throw new RequiredError$1('flagRequest', 'Required parameter requestParameters.flagRequest was null or undefined when calling unflag.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/moderation/unflag`,\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.flagRequest,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Removes previously created user or message flag  Required permissions: - FlagMessage - FlagUser\n     * Unflag\n     */\n    unflag(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.unflagRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Unmutes previously muted user  Sends events: - user.unmuted  Required permissions: - MuteUser\n     * Unmute user\n     */\n    unmuteUserRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.unmuteUserRequest === null || requestParameters.unmuteUserRequest === undefined) {\n                throw new RequiredError$1('unmuteUserRequest', 'Required parameter requestParameters.unmuteUserRequest was null or undefined when calling unmuteUser.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/moderation/unmute`,\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.unmuteUserRequest,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Unmutes previously muted user  Sends events: - user.unmuted  Required permissions: - MuteUser\n     * Unmute user\n     */\n    unmuteUser(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.unmuteUserRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Update or create users in bulk  Sends events: - user.updated\n     * Upsert users\n     */\n    updateUsersRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.updateUsersRequest === null || requestParameters.updateUsersRequest === undefined) {\n                throw new RequiredError$1('updateUsersRequest', 'Required parameter requestParameters.updateUsersRequest was null or undefined when calling updateUsers.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/users`,\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.updateUsersRequest,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Update or create users in bulk  Sends events: - user.updated\n     * Upsert users\n     */\n    updateUsers(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.updateUsersRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Updates certain fields of the user  Sends events: - user.presence.changed - user.updated\n     * Partially update user\n     */\n    updateUsersPartialRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.updateUserPartialRequest === null || requestParameters.updateUserPartialRequest === undefined) {\n                throw new RequiredError$1('updateUserPartialRequest', 'Required parameter requestParameters.updateUserPartialRequest was null or undefined when calling updateUsersPartial.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/users`,\n                method: 'PATCH',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.updateUserPartialRequest,\n            }, initOverrides);\n            return new JSONApiResponse$1(response);\n        });\n    }\n    /**\n     * Updates certain fields of the user  Sends events: - user.presence.changed - user.updated\n     * Partially update user\n     */\n    updateUsersPartial(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.updateUsersPartialRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n}\n\nclass StreamChannel {\n    constructor(streamClient, type, id) {\n        this.streamClient = streamClient;\n        this.type = type;\n        this.id = id;\n        this.delete = (request) => {\n            return this.channelsApi.deleteChannel(Object.assign(Object.assign({}, this.baseRequest), (request !== null && request !== void 0 ? request : {})));\n        };\n        this.update = (updateChannelRequest) => {\n            return this.channelsApi.updateChannel(Object.assign(Object.assign({}, this.baseRequest), { updateChannelRequest }));\n        };\n        this.updatePartial = (updateChannelPartialRequest) => {\n            return this.channelsApi.updateChannelPartial(Object.assign(Object.assign({}, this.baseRequest), { updateChannelPartialRequest }));\n        };\n        this.getOrCreate = (channelGetOrCreateRequest) => __awaiter(this, void 0, void 0, function* () {\n            if (this.id) {\n                return yield this.channelsApi.getOrCreateChannel(Object.assign(Object.assign({}, this.baseRequest), { channelGetOrCreateRequest: channelGetOrCreateRequest !== null && channelGetOrCreateRequest !== void 0 ? channelGetOrCreateRequest : {} }));\n            }\n            else {\n                throw new Error(`This operation isn't yet implemented`);\n                // if (!channelGetOrCreateRequest?.data?.members) {\n                //   throw new Error('You need to provide members to create a channel without ID');\n                // }\n                // const response = await this.channelsApi.getOrCreateChannelType1({type: this.type, channelGetOrCreateRequest});\n                // this.id = response.channel?.id;\n                // return response;\n            }\n        });\n        this.markRead = (markReadRequest) => {\n            return this.channelsApi.markRead(Object.assign(Object.assign({}, this.baseRequest), { markReadRequest }));\n        };\n        this.markUnread = (markUnreadRequest) => {\n            return this.channelsApi.markUnread(Object.assign(Object.assign({}, this.baseRequest), { markUnreadRequest }));\n        };\n        this.show = (showChannelRequest) => {\n            return this.channelsApi.showChannel(Object.assign(Object.assign({}, this.baseRequest), { showChannelRequest }));\n        };\n        this.hide = (hideChannelRequest) => {\n            return this.channelsApi.hideChannel(Object.assign(Object.assign({}, this.baseRequest), { hideChannelRequest }));\n        };\n        this.truncate = (truncateChannelRequest) => {\n            return this.channelsApi.truncateChannel(Object.assign(Object.assign({}, this.baseRequest), { truncateChannelRequest }));\n        };\n        this.queryMembers = (request) => {\n            return this.channelsApi.queryMembers({\n                payload: Object.assign(Object.assign({}, this.baseRequest), request),\n            });\n        };\n        this.mute = (muteChannelRequest) => {\n            return this.channelsApi.muteChannel({\n                muteChannelRequest: Object.assign(Object.assign({}, muteChannelRequest), { channel_cids: [this.cid] }),\n            });\n        };\n        this.unmute = (unmuteChannelRequest) => {\n            return this.channelsApi.unmuteChannel({\n                unmuteChannelRequest: Object.assign(Object.assign({}, unmuteChannelRequest), { channel_cid: this.cid, channel_cids: [] }),\n            });\n        };\n        // TODO: there is probably an issue with the generated code here\n        // uploadFile = (options: Omit<OmitTypeId<UploadFileRequest>, 'file'>, file: Buffer) => {\n        //   return this.messagesApi.uploadFile({...options, ...this.baseRequest, file: file as any as string});\n        // }\n        // deleteFile = (request: OmitTypeId<DeleteFileRequest>) => {\n        //   return this.messagesApi.deleteFile({...request, ...this.baseRequest});\n        // }\n        // uploadImage = (request: OmitTypeId<UploadImageRequest>) => {\n        //   return this.messagesApi.uploadImage({...request, ...this.baseRequest});\n        // }\n        // deleteImage = (request: OmitTypeId<DeleteImageRequest>) => {\n        //   return this.messagesApi.deleteImage({...request, ...this.baseRequest});\n        // }\n        this.sendMessage = (sendMessageRequest) => {\n            return this.messagesApi.sendMessage(Object.assign(Object.assign({}, this.baseRequest), { sendMessageRequest }));\n        };\n        this.deleteMessage = (request) => {\n            return this.messagesApi.deleteMessage(request);\n        };\n        this.updateMessage = (id, updateMessageRequest) => {\n            return this.messagesApi.updateMessage({ id, updateMessageRequest });\n        };\n        this.updateMessagePartial = (id, updateMessagePartialRequest) => {\n            return this.messagesApi.updateMessagePartial({\n                id,\n                updateMessagePartialRequest,\n            });\n        };\n        this.getMessage = (request) => {\n            return this.messagesApi.getMessage(request);\n        };\n        this.getManyMessages = (request) => {\n            return this.messagesApi.getManyMessages(Object.assign(Object.assign({}, request), this.baseRequest));\n        };\n        this.translateMessage = (id, translateMessageRequest) => {\n            return this.messagesApi.translateMessage({ id, translateMessageRequest });\n        };\n        this.getMessagesAround = (request) => {\n            return this.messagesApi.getReplies(request);\n        };\n        this.getOpenGraphData = (request) => {\n            return this.messagesApi.getOG(request);\n        };\n        this.sendMessageReaction = (messageId, sendReactionRequest) => {\n            return this.messagesApi.sendReaction({\n                id: messageId,\n                sendReactionRequest,\n            });\n        };\n        this.deleteMessageReaction = (messageId, request) => {\n            return this.messagesApi.deleteReaction(Object.assign(Object.assign({}, request), { id: messageId }));\n        };\n        this.getMessageReactions = (messageId, request) => {\n            return this.messagesApi.getReactions(Object.assign(Object.assign({}, (request !== null && request !== void 0 ? request : {})), { id: messageId }));\n        };\n        this.sendCustomEvent = (event) => {\n            return this.eventsApi.sendEvent(Object.assign(Object.assign({}, this.baseRequest), { sendEventRequest: { event } }));\n        };\n        const configuration = this.streamClient.getConfiguration();\n        /** @ts-expect-error */\n        this.channelsApi = new ChannelsApi(configuration);\n        /** @ts-expect-error */\n        this.messagesApi = new MessagesApi(configuration);\n        /** @ts-expect-error */\n        this.eventsApi = new EventsApi(configuration);\n    }\n    get cid() {\n        return `${this.baseRequest.type}:${this.baseRequest.id}`;\n    }\n    get baseRequest() {\n        if (!this.id) {\n            throw new Error('You need to initialize the channel with `getOrCreate`');\n        }\n        return {\n            id: this.id,\n            type: this.type,\n        };\n    }\n}\n\nclass StreamChatClient {\n    constructor(streamClient) {\n        this.streamClient = streamClient;\n        this.channel = (type, id) => {\n            return new StreamChannel(this.streamClient, type, id);\n        };\n        this.createBlockList = (createBlockListRequest) => {\n            return this.settingsApi.createBlockList({ createBlockListRequest });\n        };\n        this.listBlockLists = () => {\n            return this.settingsApi.listBlockLists();\n        };\n        this.getBlockList = (request) => {\n            return this.settingsApi.getBlockList(request);\n        };\n        this.updateBlockList = (name, updateBlockListRequest) => {\n            return this.settingsApi.updateBlockList({ name, updateBlockListRequest });\n        };\n        this.deleteBlockList = (request) => {\n            return this.settingsApi.deleteBlockList(request);\n        };\n        this.createChannelType = (createChannelTypeRequest) => {\n            return this.channelTypesApi.createChannelType({ createChannelTypeRequest });\n        };\n        this.deleteChannelType = (request) => {\n            return this.channelTypesApi.deleteChannelType(request);\n        };\n        this.getChannelType = (request) => {\n            return this.channelTypesApi.getChannelType(request);\n        };\n        this.listChannelTypes = () => {\n            return this.channelTypesApi.listChannelTypes();\n        };\n        this.updateChannelType = (name, updateChannelTypeRequest) => {\n            return this.channelTypesApi.updateChannelType({\n                name,\n                updateChannelTypeRequest,\n            });\n        };\n        this.queryChannels = (queryChannelsRequest) => {\n            return this.channelsApi.queryChannels({\n                queryChannelsRequest: queryChannelsRequest !== null && queryChannelsRequest !== void 0 ? queryChannelsRequest : null,\n            });\n        };\n        this.searchMessages = (payload) => {\n            return this.channelsApi.search({ payload });\n        };\n        this.exportChannels = (exportChannelsRequest) => {\n            return this.channelsApi.exportChannels({\n                exportChannelsRequest: exportChannelsRequest !== null && exportChannelsRequest !== void 0 ? exportChannelsRequest : null,\n            });\n        };\n        this.getExportStatus = (request) => {\n            return this.channelsApi.getExportChannelsStatus(request);\n        };\n        this.listCommands = () => {\n            return this.commandsApi.listCommands();\n        };\n        this.createCommand = (createCommandRequest) => {\n            return this.commandsApi.createCommand({ createCommandRequest });\n        };\n        this.getCommand = (getCommandRequest) => {\n            return this.commandsApi.getCommand(getCommandRequest);\n        };\n        this.updateCommand = (name, updateCommandRequest) => {\n            return this.commandsApi.updateCommand({ name, updateCommandRequest });\n        };\n        this.deleteCommand = (request) => {\n            return this.commandsApi.deleteCommand(request);\n        };\n        const configuration = this.streamClient.getConfiguration();\n        /** @ts-expect-error */\n        this.settingsApi = new SettingsApi$1(configuration);\n        /** @ts-expect-error */\n        this.channelTypesApi = new ChannelTypesApi(configuration);\n        /** @ts-expect-error */\n        this.channelsApi = new ChannelsApi(configuration);\n        /** @ts-expect-error */\n        this.commandsApi = new CustomCommandsApi(configuration);\n    }\n}\n\n/* tslint:disable */\n/* eslint-disable */\n/**\n * Stream API\n * No description provided (generated by Openapi Generator https://github.com/openapitools/openapi-generator)\n *\n * The version of the OpenAPI document: v100.4.3\n *\n *\n * NOTE: This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).\n * https://openapi-generator.tech\n * Do not edit the class manually.\n */\nconst BASE_PATH = \"https://stream-io-api.com\".replace(/\\/+$/, \"\");\nclass Configuration {\n    constructor(configuration = {}) {\n        this.configuration = configuration;\n    }\n    set config(configuration) {\n        this.configuration = configuration;\n    }\n    get basePath() {\n        return this.configuration.basePath != null ? this.configuration.basePath : BASE_PATH;\n    }\n    get fetchApi() {\n        return this.configuration.fetchApi;\n    }\n    get middleware() {\n        return this.configuration.middleware || [];\n    }\n    get queryParamsStringify() {\n        return this.configuration.queryParamsStringify || querystring;\n    }\n    get username() {\n        return this.configuration.username;\n    }\n    get password() {\n        return this.configuration.password;\n    }\n    get apiKey() {\n        const apiKey = this.configuration.apiKey;\n        if (apiKey) {\n            return typeof apiKey === 'function' ? apiKey : () => apiKey;\n        }\n        return undefined;\n    }\n    get accessToken() {\n        const accessToken = this.configuration.accessToken;\n        if (accessToken) {\n            return typeof accessToken === 'function' ? accessToken : () => __awaiter(this, void 0, void 0, function* () { return accessToken; });\n        }\n        return undefined;\n    }\n    get headers() {\n        return this.configuration.headers;\n    }\n    get credentials() {\n        return this.configuration.credentials;\n    }\n}\nconst DefaultConfig = new Configuration();\n/**\n * This is the base class for all generated API classes.\n */\nclass BaseAPI {\n    constructor(configuration = DefaultConfig) {\n        this.configuration = configuration;\n        this.fetchApi = (url, init) => __awaiter(this, void 0, void 0, function* () {\n            let fetchParams = { url, init };\n            for (const middleware of this.middleware) {\n                if (middleware.pre) {\n                    fetchParams = (yield middleware.pre(Object.assign({ fetch: this.fetchApi }, fetchParams))) || fetchParams;\n                }\n            }\n            let response = undefined;\n            try {\n                response = yield (this.configuration.fetchApi || fetch)(fetchParams.url, fetchParams.init);\n            }\n            catch (e) {\n                for (const middleware of this.middleware) {\n                    if (middleware.onError) {\n                        response = (yield middleware.onError({\n                            fetch: this.fetchApi,\n                            url: fetchParams.url,\n                            init: fetchParams.init,\n                            error: e,\n                            response: response ? response.clone() : undefined,\n                        })) || response;\n                    }\n                }\n                if (response === undefined) {\n                    if (e instanceof Error) {\n                        throw new FetchError(e, 'The request failed and the interceptors did not return an alternative response');\n                    }\n                    else {\n                        throw e;\n                    }\n                }\n            }\n            for (const middleware of this.middleware) {\n                if (middleware.post) {\n                    response = (yield middleware.post({\n                        fetch: this.fetchApi,\n                        url: fetchParams.url,\n                        init: fetchParams.init,\n                        response: response.clone(),\n                    })) || response;\n                }\n            }\n            return response;\n        });\n        this.middleware = configuration.middleware;\n    }\n    withMiddleware(...middlewares) {\n        const next = this.clone();\n        next.middleware = next.middleware.concat(...middlewares);\n        return next;\n    }\n    withPreMiddleware(...preMiddlewares) {\n        const middlewares = preMiddlewares.map((pre) => ({ pre }));\n        return this.withMiddleware(...middlewares);\n    }\n    withPostMiddleware(...postMiddlewares) {\n        const middlewares = postMiddlewares.map((post) => ({ post }));\n        return this.withMiddleware(...middlewares);\n    }\n    /**\n     * Check if the given MIME is a JSON MIME.\n     * JSON MIME examples:\n     *   application/json\n     *   application/json; charset=UTF8\n     *   APPLICATION/JSON\n     *   application/vnd.company+json\n     * @param mime - MIME (Multipurpose Internet Mail Extensions)\n     * @return True if the given MIME is JSON, false otherwise.\n     */\n    isJsonMime(mime) {\n        if (!mime) {\n            return false;\n        }\n        return BaseAPI.jsonRegex.test(mime);\n    }\n    request(context, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { url, init } = yield this.createFetchParams(context, initOverrides);\n            const response = yield this.fetchApi(url, init);\n            if (response && (response.status >= 200 && response.status < 300)) {\n                return response;\n            }\n            throw new ResponseError(response, 'Response returned an error code');\n        });\n    }\n    createFetchParams(context, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let url = this.configuration.basePath + context.path;\n            if (context.query !== undefined && Object.keys(context.query).length !== 0) {\n                // only add the querystring to the URL if there are query parameters.\n                // this is done to avoid urls ending with a \"?\" character which buggy webservers\n                // do not handle correctly sometimes.\n                url += '?' + this.configuration.queryParamsStringify(context.query);\n            }\n            const headers = Object.assign({}, this.configuration.headers, context.headers);\n            Object.keys(headers).forEach(key => headers[key] === undefined ? delete headers[key] : {});\n            const initOverrideFn = typeof initOverrides === \"function\"\n                ? initOverrides\n                : () => __awaiter(this, void 0, void 0, function* () { return initOverrides; });\n            const initParams = {\n                method: context.method,\n                headers,\n                body: context.body,\n                credentials: this.configuration.credentials,\n            };\n            const overriddenInit = Object.assign(Object.assign({}, initParams), (yield initOverrideFn({\n                init: initParams,\n                context,\n            })));\n            const init = Object.assign(Object.assign({}, overriddenInit), { body: isFormData(overriddenInit.body) ||\n                    overriddenInit.body instanceof URLSearchParams ||\n                    isBlob(overriddenInit.body)\n                    ? overriddenInit.body\n                    : JSON.stringify(overriddenInit.body) });\n            return { url, init };\n        });\n    }\n    /**\n     * Create a shallow clone of `this` by constructing a new instance\n     * and then shallow cloning data members.\n     */\n    clone() {\n        const constructor = this.constructor;\n        const next = new constructor(this.configuration);\n        next.middleware = this.middleware.slice();\n        return next;\n    }\n}\nBaseAPI.jsonRegex = new RegExp('^(:?application\\/json|[^;/ \\t]+\\/[^;/ \\t]+[+]json)[ \\t]*(:?;.*)?$', 'i');\nfunction isBlob(value) {\n    return typeof Blob !== 'undefined' && value instanceof Blob;\n}\nfunction isFormData(value) {\n    return typeof FormData !== \"undefined\" && value instanceof FormData;\n}\nclass ResponseError extends Error {\n    constructor(response, msg) {\n        super(msg);\n        this.response = response;\n        this.name = \"ResponseError\";\n    }\n}\nclass FetchError extends Error {\n    constructor(cause, msg) {\n        super(msg);\n        this.cause = cause;\n        this.name = \"FetchError\";\n    }\n}\nclass RequiredError extends Error {\n    constructor(field, msg) {\n        super(msg);\n        this.field = field;\n        this.name = \"RequiredError\";\n    }\n}\nfunction querystring(params, prefix = '') {\n    return Object.keys(params)\n        .map(key => querystringSingleKey(key, params[key], prefix))\n        .filter(part => part.length > 0)\n        .join('&');\n}\nfunction querystringSingleKey(key, value, keyPrefix = '') {\n    const fullKey = keyPrefix + (keyPrefix.length ? `[${key}]` : key);\n    if (value instanceof Array) {\n        const multiValue = value.map(singleValue => encodeURIComponent(String(singleValue)))\n            .join(`&${encodeURIComponent(fullKey)}=`);\n        return `${encodeURIComponent(fullKey)}=${multiValue}`;\n    }\n    if (value instanceof Set) {\n        const valueAsArray = Array.from(value);\n        return querystringSingleKey(key, valueAsArray, keyPrefix);\n    }\n    if (value instanceof Date) {\n        return `${encodeURIComponent(fullKey)}=${encodeURIComponent(value.toISOString())}`;\n    }\n    if (value instanceof Object) {\n        return querystring(value, fullKey);\n    }\n    return `${encodeURIComponent(fullKey)}=${encodeURIComponent(String(value))}`;\n}\nclass JSONApiResponse {\n    constructor(raw, transformer = (jsonValue) => jsonValue) {\n        this.raw = raw;\n        this.transformer = transformer;\n    }\n    value() {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.transformer(yield this.raw.json());\n        });\n    }\n}\nclass VoidApiResponse {\n    constructor(raw) {\n        this.raw = raw;\n    }\n    value() {\n        return __awaiter(this, void 0, void 0, function* () {\n            return undefined;\n        });\n    }\n}\n\n/* tslint:disable */\n/* eslint-disable */\n/**\n * Stream API\n * No description provided (generated by Openapi Generator https://github.com/openapitools/openapi-generator)\n *\n * The version of the OpenAPI document: v100.4.3\n *\n *\n * NOTE: This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).\n * https://openapi-generator.tech\n * Do not edit the class manually.\n */\n/**\n *\n */\nclass DefaultApi extends BaseAPI {\n    /**\n     * Block a user, preventing them from joining the call until they are unblocked.  Sends events: - call.blocked_user  Required permissions: - BlockUser\n     * Block user on a call\n     */\n    blockUserRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.type === null || requestParameters.type === undefined) {\n                throw new RequiredError('type', 'Required parameter requestParameters.type was null or undefined when calling blockUser.');\n            }\n            if (requestParameters.id === null || requestParameters.id === undefined) {\n                throw new RequiredError('id', 'Required parameter requestParameters.id was null or undefined when calling blockUser.');\n            }\n            if (requestParameters.videoBlockUserRequest === null || requestParameters.videoBlockUserRequest === undefined) {\n                throw new RequiredError('videoBlockUserRequest', 'Required parameter requestParameters.videoBlockUserRequest was null or undefined when calling blockUser.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/video/call/{type}/{id}/block`.replace(`{${\"type\"}}`, encodeURIComponent(String(requestParameters.type))).replace(`{${\"id\"}}`, encodeURIComponent(String(requestParameters.id))),\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.videoBlockUserRequest,\n            }, initOverrides);\n            return new JSONApiResponse(response);\n        });\n    }\n    /**\n     * Block a user, preventing them from joining the call until they are unblocked.  Sends events: - call.blocked_user  Required permissions: - BlockUser\n     * Block user on a call\n     */\n    blockUser(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.blockUserRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Adds a new device to a user, if the same device already exists the call will have no effect\n     * Create device\n     */\n    createDeviceRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.videoCreateDeviceRequest === null || requestParameters.videoCreateDeviceRequest === undefined) {\n                throw new RequiredError('videoCreateDeviceRequest', 'Required parameter requestParameters.videoCreateDeviceRequest was null or undefined when calling createDevice.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/video/devices`,\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.videoCreateDeviceRequest,\n            }, initOverrides);\n            return new JSONApiResponse(response);\n        });\n    }\n    /**\n     * Adds a new device to a user, if the same device already exists the call will have no effect\n     * Create device\n     */\n    createDevice(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.createDeviceRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     *\n     * Create Guest\n     */\n    createGuestRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.videoCreateGuestRequest === null || requestParameters.videoCreateGuestRequest === undefined) {\n                throw new RequiredError('videoCreateGuestRequest', 'Required parameter requestParameters.videoCreateGuestRequest was null or undefined when calling createGuest.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/video/guest`,\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.videoCreateGuestRequest,\n            }, initOverrides);\n            return new JSONApiResponse(response);\n        });\n    }\n    /**\n     *\n     * Create Guest\n     */\n    createGuest(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.createGuestRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Deletes one device\n     * Delete device\n     */\n    deleteDeviceRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const queryParameters = {};\n            if (requestParameters.id !== undefined) {\n                queryParameters['id'] = requestParameters.id;\n            }\n            if (requestParameters.userId !== undefined) {\n                queryParameters['user_id'] = requestParameters.userId;\n            }\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/video/devices`,\n                method: 'DELETE',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new JSONApiResponse(response);\n        });\n    }\n    /**\n     * Deletes one device\n     * Delete device\n     */\n    deleteDevice(requestParameters = {}, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.deleteDeviceRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     *   Sends events: - call.ended  Required permissions: - EndCall\n     * End call\n     */\n    endCallRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.type === null || requestParameters.type === undefined) {\n                throw new RequiredError('type', 'Required parameter requestParameters.type was null or undefined when calling endCall.');\n            }\n            if (requestParameters.id === null || requestParameters.id === undefined) {\n                throw new RequiredError('id', 'Required parameter requestParameters.id was null or undefined when calling endCall.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/video/call/{type}/{id}/mark_ended`.replace(`{${\"type\"}}`, encodeURIComponent(String(requestParameters.type))).replace(`{${\"id\"}}`, encodeURIComponent(String(requestParameters.id))),\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new JSONApiResponse(response);\n        });\n    }\n    /**\n     *   Sends events: - call.ended  Required permissions: - EndCall\n     * End call\n     */\n    endCall(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.endCallRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     *   Required permissions: - ReadCall\n     * Get Call\n     */\n    getCallRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.type === null || requestParameters.type === undefined) {\n                throw new RequiredError('type', 'Required parameter requestParameters.type was null or undefined when calling getCall.');\n            }\n            if (requestParameters.id === null || requestParameters.id === undefined) {\n                throw new RequiredError('id', 'Required parameter requestParameters.id was null or undefined when calling getCall.');\n            }\n            const queryParameters = {};\n            if (requestParameters.connectionId !== undefined) {\n                queryParameters['connection_id'] = requestParameters.connectionId;\n            }\n            if (requestParameters.membersLimit !== undefined) {\n                queryParameters['members_limit'] = requestParameters.membersLimit;\n            }\n            if (requestParameters.ring !== undefined) {\n                queryParameters['ring'] = requestParameters.ring;\n            }\n            if (requestParameters.notify !== undefined) {\n                queryParameters['notify'] = requestParameters.notify;\n            }\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/video/call/{type}/{id}`.replace(`{${\"type\"}}`, encodeURIComponent(String(requestParameters.type))).replace(`{${\"id\"}}`, encodeURIComponent(String(requestParameters.id))),\n                method: 'GET',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new JSONApiResponse(response);\n        });\n    }\n    /**\n     *   Required permissions: - ReadCall\n     * Get Call\n     */\n    getCall(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.getCallRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Returns the list of all edges available for video calls.\n     * Get Edges\n     */\n    getEdgesRaw(initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const queryParameters = {};\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/video/edges`,\n                method: 'GET',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new JSONApiResponse(response);\n        });\n    }\n    /**\n     * Returns the list of all edges available for video calls.\n     * Get Edges\n     */\n    getEdges(initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.getEdgesRaw(initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Gets or creates a new call  Sends events: - call.created - call.notification - call.ring  Required permissions: - CreateCall - ReadCall - UpdateCallSettings\n     * Get or create a call\n     */\n    getOrCreateCallRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.type === null || requestParameters.type === undefined) {\n                throw new RequiredError('type', 'Required parameter requestParameters.type was null or undefined when calling getOrCreateCall.');\n            }\n            if (requestParameters.id === null || requestParameters.id === undefined) {\n                throw new RequiredError('id', 'Required parameter requestParameters.id was null or undefined when calling getOrCreateCall.');\n            }\n            if (requestParameters.videoGetOrCreateCallRequest === null || requestParameters.videoGetOrCreateCallRequest === undefined) {\n                throw new RequiredError('videoGetOrCreateCallRequest', 'Required parameter requestParameters.videoGetOrCreateCallRequest was null or undefined when calling getOrCreateCall.');\n            }\n            const queryParameters = {};\n            if (requestParameters.connectionId !== undefined) {\n                queryParameters['connection_id'] = requestParameters.connectionId;\n            }\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/video/call/{type}/{id}`.replace(`{${\"type\"}}`, encodeURIComponent(String(requestParameters.type))).replace(`{${\"id\"}}`, encodeURIComponent(String(requestParameters.id))),\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.videoGetOrCreateCallRequest,\n            }, initOverrides);\n            return new JSONApiResponse(response);\n        });\n    }\n    /**\n     * Gets or creates a new call  Sends events: - call.created - call.notification - call.ring  Required permissions: - CreateCall - ReadCall - UpdateCallSettings\n     * Get or create a call\n     */\n    getOrCreateCall(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.getOrCreateCallRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     *   Sends events: - call.live_started  Required permissions: - UpdateCall\n     * Set call as live\n     */\n    goLiveRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.type === null || requestParameters.type === undefined) {\n                throw new RequiredError('type', 'Required parameter requestParameters.type was null or undefined when calling goLive.');\n            }\n            if (requestParameters.id === null || requestParameters.id === undefined) {\n                throw new RequiredError('id', 'Required parameter requestParameters.id was null or undefined when calling goLive.');\n            }\n            if (requestParameters.videoGoLiveRequest === null || requestParameters.videoGoLiveRequest === undefined) {\n                throw new RequiredError('videoGoLiveRequest', 'Required parameter requestParameters.videoGoLiveRequest was null or undefined when calling goLive.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/video/call/{type}/{id}/go_live`.replace(`{${\"type\"}}`, encodeURIComponent(String(requestParameters.type))).replace(`{${\"id\"}}`, encodeURIComponent(String(requestParameters.id))),\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.videoGoLiveRequest,\n            }, initOverrides);\n            return new JSONApiResponse(response);\n        });\n    }\n    /**\n     *   Sends events: - call.live_started  Required permissions: - UpdateCall\n     * Set call as live\n     */\n    goLive(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.goLiveRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Returns all available devices\n     * List devices\n     */\n    listDevicesRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const queryParameters = {};\n            if (requestParameters.userId !== undefined) {\n                queryParameters['user_id'] = requestParameters.userId;\n            }\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/video/devices`,\n                method: 'GET',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new JSONApiResponse(response);\n        });\n    }\n    /**\n     * Returns all available devices\n     * List devices\n     */\n    listDevices(requestParameters = {}, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.listDevicesRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Lists recordings  Required permissions: - ListRecordings\n     * List recordings\n     */\n    listRecordingsRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.type === null || requestParameters.type === undefined) {\n                throw new RequiredError('type', 'Required parameter requestParameters.type was null or undefined when calling listRecordings.');\n            }\n            if (requestParameters.id === null || requestParameters.id === undefined) {\n                throw new RequiredError('id', 'Required parameter requestParameters.id was null or undefined when calling listRecordings.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/video/call/{type}/{id}/recordings`.replace(`{${\"type\"}}`, encodeURIComponent(String(requestParameters.type))).replace(`{${\"id\"}}`, encodeURIComponent(String(requestParameters.id))),\n                method: 'GET',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new JSONApiResponse(response);\n        });\n    }\n    /**\n     * Lists recordings  Required permissions: - ListRecordings\n     * List recordings\n     */\n    listRecordings(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.listRecordingsRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Lists transcriptions  Required permissions: - ListTranscriptions\n     * List transcriptions\n     */\n    listTranscriptionsRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.type === null || requestParameters.type === undefined) {\n                throw new RequiredError('type', 'Required parameter requestParameters.type was null or undefined when calling listTranscriptions.');\n            }\n            if (requestParameters.id === null || requestParameters.id === undefined) {\n                throw new RequiredError('id', 'Required parameter requestParameters.id was null or undefined when calling listTranscriptions.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/video/call/{type}/{id}/transcriptions`.replace(`{${\"type\"}}`, encodeURIComponent(String(requestParameters.type))).replace(`{${\"id\"}}`, encodeURIComponent(String(requestParameters.id))),\n                method: 'GET',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new JSONApiResponse(response);\n        });\n    }\n    /**\n     * Lists transcriptions  Required permissions: - ListTranscriptions\n     * List transcriptions\n     */\n    listTranscriptions(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.listTranscriptionsRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Mutes users in a call  Required permissions: - MuteUsers\n     * Mute users\n     */\n    muteUsersRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.type === null || requestParameters.type === undefined) {\n                throw new RequiredError('type', 'Required parameter requestParameters.type was null or undefined when calling muteUsers.');\n            }\n            if (requestParameters.id === null || requestParameters.id === undefined) {\n                throw new RequiredError('id', 'Required parameter requestParameters.id was null or undefined when calling muteUsers.');\n            }\n            if (requestParameters.videoMuteUsersRequest === null || requestParameters.videoMuteUsersRequest === undefined) {\n                throw new RequiredError('videoMuteUsersRequest', 'Required parameter requestParameters.videoMuteUsersRequest was null or undefined when calling muteUsers.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/video/call/{type}/{id}/mute_users`.replace(`{${\"type\"}}`, encodeURIComponent(String(requestParameters.type))).replace(`{${\"id\"}}`, encodeURIComponent(String(requestParameters.id))),\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.videoMuteUsersRequest,\n            }, initOverrides);\n            return new JSONApiResponse(response);\n        });\n    }\n    /**\n     * Mutes users in a call  Required permissions: - MuteUsers\n     * Mute users\n     */\n    muteUsers(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.muteUsersRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Query calls with filter query  Required permissions: - ReadCall\n     * Query call\n     */\n    queryCallsRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.videoQueryCallsRequest === null || requestParameters.videoQueryCallsRequest === undefined) {\n                throw new RequiredError('videoQueryCallsRequest', 'Required parameter requestParameters.videoQueryCallsRequest was null or undefined when calling queryCalls.');\n            }\n            const queryParameters = {};\n            if (requestParameters.connectionId !== undefined) {\n                queryParameters['connection_id'] = requestParameters.connectionId;\n            }\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/video/calls`,\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.videoQueryCallsRequest,\n            }, initOverrides);\n            return new JSONApiResponse(response);\n        });\n    }\n    /**\n     * Query calls with filter query  Required permissions: - ReadCall\n     * Query call\n     */\n    queryCalls(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.queryCallsRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Query call members with filter query  Required permissions: - ReadCall\n     * Query call members\n     */\n    queryMembersRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.videoQueryMembersRequest === null || requestParameters.videoQueryMembersRequest === undefined) {\n                throw new RequiredError('videoQueryMembersRequest', 'Required parameter requestParameters.videoQueryMembersRequest was null or undefined when calling queryMembers.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/video/call/members`,\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.videoQueryMembersRequest,\n            }, initOverrides);\n            return new JSONApiResponse(response);\n        });\n    }\n    /**\n     * Query call members with filter query  Required permissions: - ReadCall\n     * Query call members\n     */\n    queryMembers(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.queryMembersRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Sends custom event to the call  Sends events: - custom  Required permissions: - SendEvent\n     * Send custom event\n     */\n    sendEventRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.type === null || requestParameters.type === undefined) {\n                throw new RequiredError('type', 'Required parameter requestParameters.type was null or undefined when calling sendEvent.');\n            }\n            if (requestParameters.id === null || requestParameters.id === undefined) {\n                throw new RequiredError('id', 'Required parameter requestParameters.id was null or undefined when calling sendEvent.');\n            }\n            if (requestParameters.videoSendEventRequest === null || requestParameters.videoSendEventRequest === undefined) {\n                throw new RequiredError('videoSendEventRequest', 'Required parameter requestParameters.videoSendEventRequest was null or undefined when calling sendEvent.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/video/call/{type}/{id}/event`.replace(`{${\"type\"}}`, encodeURIComponent(String(requestParameters.type))).replace(`{${\"id\"}}`, encodeURIComponent(String(requestParameters.id))),\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.videoSendEventRequest,\n            }, initOverrides);\n            return new JSONApiResponse(response);\n        });\n    }\n    /**\n     * Sends custom event to the call  Sends events: - custom  Required permissions: - SendEvent\n     * Send custom event\n     */\n    sendEvent(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.sendEventRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Starts HLS broadcasting  Required permissions: - StartBroadcasting\n     * Start HLS broadcasting\n     */\n    startHLSBroadcastingRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.type === null || requestParameters.type === undefined) {\n                throw new RequiredError('type', 'Required parameter requestParameters.type was null or undefined when calling startHLSBroadcasting.');\n            }\n            if (requestParameters.id === null || requestParameters.id === undefined) {\n                throw new RequiredError('id', 'Required parameter requestParameters.id was null or undefined when calling startHLSBroadcasting.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/video/call/{type}/{id}/start_broadcasting`.replace(`{${\"type\"}}`, encodeURIComponent(String(requestParameters.type))).replace(`{${\"id\"}}`, encodeURIComponent(String(requestParameters.id))),\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new JSONApiResponse(response);\n        });\n    }\n    /**\n     * Starts HLS broadcasting  Required permissions: - StartBroadcasting\n     * Start HLS broadcasting\n     */\n    startHLSBroadcasting(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.startHLSBroadcastingRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Starts recording  Sends events: - call.recording_started  Required permissions: - StartRecording\n     * Start recording\n     */\n    startRecordingRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.type === null || requestParameters.type === undefined) {\n                throw new RequiredError('type', 'Required parameter requestParameters.type was null or undefined when calling startRecording.');\n            }\n            if (requestParameters.id === null || requestParameters.id === undefined) {\n                throw new RequiredError('id', 'Required parameter requestParameters.id was null or undefined when calling startRecording.');\n            }\n            if (requestParameters.videoStartRecordingRequest === null || requestParameters.videoStartRecordingRequest === undefined) {\n                throw new RequiredError('videoStartRecordingRequest', 'Required parameter requestParameters.videoStartRecordingRequest was null or undefined when calling startRecording.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/video/call/{type}/{id}/start_recording`.replace(`{${\"type\"}}`, encodeURIComponent(String(requestParameters.type))).replace(`{${\"id\"}}`, encodeURIComponent(String(requestParameters.id))),\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.videoStartRecordingRequest,\n            }, initOverrides);\n            return new JSONApiResponse(response);\n        });\n    }\n    /**\n     * Starts recording  Sends events: - call.recording_started  Required permissions: - StartRecording\n     * Start recording\n     */\n    startRecording(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.startRecordingRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Starts transcription  Required permissions: - StartTranscription\n     * Start transcription\n     */\n    startTranscriptionRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.type === null || requestParameters.type === undefined) {\n                throw new RequiredError('type', 'Required parameter requestParameters.type was null or undefined when calling startTranscription.');\n            }\n            if (requestParameters.id === null || requestParameters.id === undefined) {\n                throw new RequiredError('id', 'Required parameter requestParameters.id was null or undefined when calling startTranscription.');\n            }\n            if (requestParameters.videoStartTranscriptionRequest === null || requestParameters.videoStartTranscriptionRequest === undefined) {\n                throw new RequiredError('videoStartTranscriptionRequest', 'Required parameter requestParameters.videoStartTranscriptionRequest was null or undefined when calling startTranscription.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/video/call/{type}/{id}/start_transcription`.replace(`{${\"type\"}}`, encodeURIComponent(String(requestParameters.type))).replace(`{${\"id\"}}`, encodeURIComponent(String(requestParameters.id))),\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.videoStartTranscriptionRequest,\n            }, initOverrides);\n            return new JSONApiResponse(response);\n        });\n    }\n    /**\n     * Starts transcription  Required permissions: - StartTranscription\n     * Start transcription\n     */\n    startTranscription(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.startTranscriptionRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Stops HLS broadcasting  Required permissions: - StopBroadcasting\n     * Stop HLS broadcasting\n     */\n    stopHLSBroadcastingRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.type === null || requestParameters.type === undefined) {\n                throw new RequiredError('type', 'Required parameter requestParameters.type was null or undefined when calling stopHLSBroadcasting.');\n            }\n            if (requestParameters.id === null || requestParameters.id === undefined) {\n                throw new RequiredError('id', 'Required parameter requestParameters.id was null or undefined when calling stopHLSBroadcasting.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/video/call/{type}/{id}/stop_broadcasting`.replace(`{${\"type\"}}`, encodeURIComponent(String(requestParameters.type))).replace(`{${\"id\"}}`, encodeURIComponent(String(requestParameters.id))),\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new JSONApiResponse(response);\n        });\n    }\n    /**\n     * Stops HLS broadcasting  Required permissions: - StopBroadcasting\n     * Stop HLS broadcasting\n     */\n    stopHLSBroadcasting(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.stopHLSBroadcastingRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     *   Sends events: - call.updated  Required permissions: - UpdateCall\n     * Set call as not live\n     */\n    stopLiveRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.type === null || requestParameters.type === undefined) {\n                throw new RequiredError('type', 'Required parameter requestParameters.type was null or undefined when calling stopLive.');\n            }\n            if (requestParameters.id === null || requestParameters.id === undefined) {\n                throw new RequiredError('id', 'Required parameter requestParameters.id was null or undefined when calling stopLive.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/video/call/{type}/{id}/stop_live`.replace(`{${\"type\"}}`, encodeURIComponent(String(requestParameters.type))).replace(`{${\"id\"}}`, encodeURIComponent(String(requestParameters.id))),\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new JSONApiResponse(response);\n        });\n    }\n    /**\n     *   Sends events: - call.updated  Required permissions: - UpdateCall\n     * Set call as not live\n     */\n    stopLive(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.stopLiveRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Stops recording  Sends events: - call.recording_stopped  Required permissions: - StopRecording\n     * Stop recording\n     */\n    stopRecordingRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.type === null || requestParameters.type === undefined) {\n                throw new RequiredError('type', 'Required parameter requestParameters.type was null or undefined when calling stopRecording.');\n            }\n            if (requestParameters.id === null || requestParameters.id === undefined) {\n                throw new RequiredError('id', 'Required parameter requestParameters.id was null or undefined when calling stopRecording.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/video/call/{type}/{id}/stop_recording`.replace(`{${\"type\"}}`, encodeURIComponent(String(requestParameters.type))).replace(`{${\"id\"}}`, encodeURIComponent(String(requestParameters.id))),\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new JSONApiResponse(response);\n        });\n    }\n    /**\n     * Stops recording  Sends events: - call.recording_stopped  Required permissions: - StopRecording\n     * Stop recording\n     */\n    stopRecording(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.stopRecordingRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Stops transcription  Sends events: - call.transcription_stopped  Required permissions: - StopTranscription\n     * Stop transcription\n     */\n    stopTranscriptionRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.type === null || requestParameters.type === undefined) {\n                throw new RequiredError('type', 'Required parameter requestParameters.type was null or undefined when calling stopTranscription.');\n            }\n            if (requestParameters.id === null || requestParameters.id === undefined) {\n                throw new RequiredError('id', 'Required parameter requestParameters.id was null or undefined when calling stopTranscription.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/video/call/{type}/{id}/stop_transcription`.replace(`{${\"type\"}}`, encodeURIComponent(String(requestParameters.type))).replace(`{${\"id\"}}`, encodeURIComponent(String(requestParameters.id))),\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new JSONApiResponse(response);\n        });\n    }\n    /**\n     * Stops transcription  Sends events: - call.transcription_stopped  Required permissions: - StopTranscription\n     * Stop transcription\n     */\n    stopTranscription(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.stopTranscriptionRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Removes the block for a user on a call. The user will be able to join the call again.  Sends events: - call.unblocked_user  Required permissions: - BlockUser\n     * Unblocks user on a call\n     */\n    unblockUserRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.type === null || requestParameters.type === undefined) {\n                throw new RequiredError('type', 'Required parameter requestParameters.type was null or undefined when calling unblockUser.');\n            }\n            if (requestParameters.id === null || requestParameters.id === undefined) {\n                throw new RequiredError('id', 'Required parameter requestParameters.id was null or undefined when calling unblockUser.');\n            }\n            if (requestParameters.videoUnblockUserRequest === null || requestParameters.videoUnblockUserRequest === undefined) {\n                throw new RequiredError('videoUnblockUserRequest', 'Required parameter requestParameters.videoUnblockUserRequest was null or undefined when calling unblockUser.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/video/call/{type}/{id}/unblock`.replace(`{${\"type\"}}`, encodeURIComponent(String(requestParameters.type))).replace(`{${\"id\"}}`, encodeURIComponent(String(requestParameters.id))),\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.videoUnblockUserRequest,\n            }, initOverrides);\n            return new JSONApiResponse(response);\n        });\n    }\n    /**\n     * Removes the block for a user on a call. The user will be able to join the call again.  Sends events: - call.unblocked_user  Required permissions: - BlockUser\n     * Unblocks user on a call\n     */\n    unblockUser(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.unblockUserRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     *   Sends events: - call.updated  Required permissions: - UpdateCall\n     * Update Call\n     */\n    updateCallRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.type === null || requestParameters.type === undefined) {\n                throw new RequiredError('type', 'Required parameter requestParameters.type was null or undefined when calling updateCall.');\n            }\n            if (requestParameters.id === null || requestParameters.id === undefined) {\n                throw new RequiredError('id', 'Required parameter requestParameters.id was null or undefined when calling updateCall.');\n            }\n            if (requestParameters.videoUpdateCallRequest === null || requestParameters.videoUpdateCallRequest === undefined) {\n                throw new RequiredError('videoUpdateCallRequest', 'Required parameter requestParameters.videoUpdateCallRequest was null or undefined when calling updateCall.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/video/call/{type}/{id}`.replace(`{${\"type\"}}`, encodeURIComponent(String(requestParameters.type))).replace(`{${\"id\"}}`, encodeURIComponent(String(requestParameters.id))),\n                method: 'PATCH',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.videoUpdateCallRequest,\n            }, initOverrides);\n            return new JSONApiResponse(response);\n        });\n    }\n    /**\n     *   Sends events: - call.updated  Required permissions: - UpdateCall\n     * Update Call\n     */\n    updateCall(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.updateCallRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     *   Sends events: - call.member_added - call.member_removed - call.member_updated  Required permissions: - RemoveCallMember - UpdateCallMember - UpdateCallMemberRole\n     * Update Call Member\n     */\n    updateCallMembersRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.type === null || requestParameters.type === undefined) {\n                throw new RequiredError('type', 'Required parameter requestParameters.type was null or undefined when calling updateCallMembers.');\n            }\n            if (requestParameters.id === null || requestParameters.id === undefined) {\n                throw new RequiredError('id', 'Required parameter requestParameters.id was null or undefined when calling updateCallMembers.');\n            }\n            if (requestParameters.videoUpdateCallMembersRequest === null || requestParameters.videoUpdateCallMembersRequest === undefined) {\n                throw new RequiredError('videoUpdateCallMembersRequest', 'Required parameter requestParameters.videoUpdateCallMembersRequest was null or undefined when calling updateCallMembers.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/video/call/{type}/{id}/members`.replace(`{${\"type\"}}`, encodeURIComponent(String(requestParameters.type))).replace(`{${\"id\"}}`, encodeURIComponent(String(requestParameters.id))),\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.videoUpdateCallMembersRequest,\n            }, initOverrides);\n            return new JSONApiResponse(response);\n        });\n    }\n    /**\n     *   Sends events: - call.member_added - call.member_removed - call.member_updated  Required permissions: - RemoveCallMember - UpdateCallMember - UpdateCallMemberRole\n     * Update Call Member\n     */\n    updateCallMembers(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.updateCallMembersRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Updates user permissions  Sends events: - call.permissions_updated  Required permissions: - UpdateCallPermissions\n     * Update user permissions\n     */\n    updateUserPermissionsRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.type === null || requestParameters.type === undefined) {\n                throw new RequiredError('type', 'Required parameter requestParameters.type was null or undefined when calling updateUserPermissions.');\n            }\n            if (requestParameters.id === null || requestParameters.id === undefined) {\n                throw new RequiredError('id', 'Required parameter requestParameters.id was null or undefined when calling updateUserPermissions.');\n            }\n            if (requestParameters.videoUpdateUserPermissionsRequest === null || requestParameters.videoUpdateUserPermissionsRequest === undefined) {\n                throw new RequiredError('videoUpdateUserPermissionsRequest', 'Required parameter requestParameters.videoUpdateUserPermissionsRequest was null or undefined when calling updateUserPermissions.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/video/call/{type}/{id}/user_permissions`.replace(`{${\"type\"}}`, encodeURIComponent(String(requestParameters.type))).replace(`{${\"id\"}}`, encodeURIComponent(String(requestParameters.id))),\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.videoUpdateUserPermissionsRequest,\n            }, initOverrides);\n            return new JSONApiResponse(response);\n        });\n    }\n    /**\n     * Updates user permissions  Sends events: - call.permissions_updated  Required permissions: - UpdateCallPermissions\n     * Update user permissions\n     */\n    updateUserPermissions(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.updateUserPermissionsRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Establishes WebSocket connection for user to video  Sends events: - connection.ok - health.check\n     * Video Connect (WebSocket)\n     */\n    videoConnectRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.videoWSAuthMessageRequest === null || requestParameters.videoWSAuthMessageRequest === undefined) {\n                throw new RequiredError('videoWSAuthMessageRequest', 'Required parameter requestParameters.videoWSAuthMessageRequest was null or undefined when calling videoConnect.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/video/connect`,\n                method: 'GET',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.videoWSAuthMessageRequest,\n            }, initOverrides);\n            return new VoidApiResponse(response);\n        });\n    }\n    /**\n     * Establishes WebSocket connection for user to video  Sends events: - connection.ok - health.check\n     * Video Connect (WebSocket)\n     */\n    videoConnect(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.videoConnectRaw(requestParameters, initOverrides);\n        });\n    }\n    /**\n     * Pins a track for all users in the call.  Required permissions: - PinCallTrack\n     * Pin\n     */\n    videoPinRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.type === null || requestParameters.type === undefined) {\n                throw new RequiredError('type', 'Required parameter requestParameters.type was null or undefined when calling videoPin.');\n            }\n            if (requestParameters.id === null || requestParameters.id === undefined) {\n                throw new RequiredError('id', 'Required parameter requestParameters.id was null or undefined when calling videoPin.');\n            }\n            if (requestParameters.videoPinRequest === null || requestParameters.videoPinRequest === undefined) {\n                throw new RequiredError('videoPinRequest', 'Required parameter requestParameters.videoPinRequest was null or undefined when calling videoPin.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/video/call/{type}/{id}/pin`.replace(`{${\"type\"}}`, encodeURIComponent(String(requestParameters.type))).replace(`{${\"id\"}}`, encodeURIComponent(String(requestParameters.id))),\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.videoPinRequest,\n            }, initOverrides);\n            return new JSONApiResponse(response);\n        });\n    }\n    /**\n     * Pins a track for all users in the call.  Required permissions: - PinCallTrack\n     * Pin\n     */\n    videoPin(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.videoPinRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Unpins a track for all users in the call.  Required permissions: - PinCallTrack\n     * Unpin\n     */\n    videoUnpinRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.type === null || requestParameters.type === undefined) {\n                throw new RequiredError('type', 'Required parameter requestParameters.type was null or undefined when calling videoUnpin.');\n            }\n            if (requestParameters.id === null || requestParameters.id === undefined) {\n                throw new RequiredError('id', 'Required parameter requestParameters.id was null or undefined when calling videoUnpin.');\n            }\n            if (requestParameters.videoUnpinRequest === null || requestParameters.videoUnpinRequest === undefined) {\n                throw new RequiredError('videoUnpinRequest', 'Required parameter requestParameters.videoUnpinRequest was null or undefined when calling videoUnpin.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/video/call/{type}/{id}/unpin`.replace(`{${\"type\"}}`, encodeURIComponent(String(requestParameters.type))).replace(`{${\"id\"}}`, encodeURIComponent(String(requestParameters.id))),\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.videoUnpinRequest,\n            }, initOverrides);\n            return new JSONApiResponse(response);\n        });\n    }\n    /**\n     * Unpins a track for all users in the call.  Required permissions: - PinCallTrack\n     * Unpin\n     */\n    videoUnpin(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.videoUnpinRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n}\n\n/* tslint:disable */\n/* eslint-disable */\n/**\n * Stream API\n * No description provided (generated by Openapi Generator https://github.com/openapitools/openapi-generator)\n *\n * The version of the OpenAPI document: v100.4.3\n *\n *\n * NOTE: This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).\n * https://openapi-generator.tech\n * Do not edit the class manually.\n */\n/**\n *\n */\nclass ServerSideApi extends BaseAPI {\n    /**\n     *\n     * Check External Storage\n     */\n    checkExternalStorageRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.name === null || requestParameters.name === undefined) {\n                throw new RequiredError('name', 'Required parameter requestParameters.name was null or undefined when calling checkExternalStorage.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/video/external_storage/{name}/check`.replace(`{${\"name\"}}`, encodeURIComponent(String(requestParameters.name))),\n                method: 'GET',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new JSONApiResponse(response);\n        });\n    }\n    /**\n     *\n     * Check External Storage\n     */\n    checkExternalStorage(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.checkExternalStorageRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     *\n     * Create Call Type\n     */\n    createCallTypeRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.videoCreateCallTypeRequest === null || requestParameters.videoCreateCallTypeRequest === undefined) {\n                throw new RequiredError('videoCreateCallTypeRequest', 'Required parameter requestParameters.videoCreateCallTypeRequest was null or undefined when calling createCallType.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/video/calltypes`,\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.videoCreateCallTypeRequest,\n            }, initOverrides);\n            return new JSONApiResponse(response);\n        });\n    }\n    /**\n     *\n     * Create Call Type\n     */\n    createCallType(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.createCallTypeRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     *\n     * Delete Call Type\n     */\n    deleteCallTypeRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.name === null || requestParameters.name === undefined) {\n                throw new RequiredError('name', 'Required parameter requestParameters.name was null or undefined when calling deleteCallType.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/video/calltypes/{name}`.replace(`{${\"name\"}}`, encodeURIComponent(String(requestParameters.name))),\n                method: 'DELETE',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new JSONApiResponse(response);\n        });\n    }\n    /**\n     *\n     * Delete Call Type\n     */\n    deleteCallType(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.deleteCallTypeRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     *\n     * Get Call Type\n     */\n    getCallTypeRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.name === null || requestParameters.name === undefined) {\n                throw new RequiredError('name', 'Required parameter requestParameters.name was null or undefined when calling getCallType.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/video/calltypes/{name}`.replace(`{${\"name\"}}`, encodeURIComponent(String(requestParameters.name))),\n                method: 'GET',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new JSONApiResponse(response);\n        });\n    }\n    /**\n     *\n     * Get Call Type\n     */\n    getCallType(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.getCallTypeRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     *\n     * List Call Type\n     */\n    listCallTypesRaw(initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const queryParameters = {};\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/video/calltypes`,\n                method: 'GET',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new JSONApiResponse(response);\n        });\n    }\n    /**\n     *\n     * List Call Type\n     */\n    listCallTypes(initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.listCallTypesRaw(initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     *\n     * Update Call Type\n     */\n    updateCallTypeRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.name === null || requestParameters.name === undefined) {\n                throw new RequiredError('name', 'Required parameter requestParameters.name was null or undefined when calling updateCallType.');\n            }\n            if (requestParameters.videoUpdateCallTypeRequest === null || requestParameters.videoUpdateCallTypeRequest === undefined) {\n                throw new RequiredError('videoUpdateCallTypeRequest', 'Required parameter requestParameters.videoUpdateCallTypeRequest was null or undefined when calling updateCallType.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/video/calltypes/{name}`.replace(`{${\"name\"}}`, encodeURIComponent(String(requestParameters.name))),\n                method: 'PUT',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.videoUpdateCallTypeRequest,\n            }, initOverrides);\n            return new JSONApiResponse(response);\n        });\n    }\n    /**\n     *\n     * Update Call Type\n     */\n    updateCallType(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.updateCallTypeRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     *\n     * Update External Storage\n     */\n    updateExternalStorageRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.name === null || requestParameters.name === undefined) {\n                throw new RequiredError('name', 'Required parameter requestParameters.name was null or undefined when calling updateExternalStorage.');\n            }\n            if (requestParameters.videoUpdateExternalStorageRequest === null || requestParameters.videoUpdateExternalStorageRequest === undefined) {\n                throw new RequiredError('videoUpdateExternalStorageRequest', 'Required parameter requestParameters.videoUpdateExternalStorageRequest was null or undefined when calling updateExternalStorage.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/video/external_storage/{name}`.replace(`{${\"name\"}}`, encodeURIComponent(String(requestParameters.name))),\n                method: 'PUT',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.videoUpdateExternalStorageRequest,\n            }, initOverrides);\n            return new JSONApiResponse(response);\n        });\n    }\n    /**\n     *\n     * Update External Storage\n     */\n    updateExternalStorage(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.updateExternalStorageRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n}\n\n/* tslint:disable */\n/* eslint-disable */\n/**\n * Stream API\n * No description provided (generated by Openapi Generator https://github.com/openapitools/openapi-generator)\n *\n * The version of the OpenAPI document: v100.4.3\n *\n *\n * NOTE: This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).\n * https://openapi-generator.tech\n * Do not edit the class manually.\n */\n/**\n *\n */\nclass SettingsApi extends BaseAPI {\n    /**\n     * Creates new external storage\n     * Create external storage\n     */\n    createExternalStorageRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.videoCreateExternalStorageRequest === null || requestParameters.videoCreateExternalStorageRequest === undefined) {\n                throw new RequiredError('videoCreateExternalStorageRequest', 'Required parameter requestParameters.videoCreateExternalStorageRequest was null or undefined when calling createExternalStorage.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            headerParameters['Content-Type'] = 'application/json';\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/video/external_storage`,\n                method: 'POST',\n                headers: headerParameters,\n                query: queryParameters,\n                body: requestParameters.videoCreateExternalStorageRequest,\n            }, initOverrides);\n            return new JSONApiResponse(response);\n        });\n    }\n    /**\n     * Creates new external storage\n     * Create external storage\n     */\n    createExternalStorage(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.createExternalStorageRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Deletes external storage\n     * Delete external storage\n     */\n    deleteExternalStorageRaw(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (requestParameters.name === null || requestParameters.name === undefined) {\n                throw new RequiredError('name', 'Required parameter requestParameters.name was null or undefined when calling deleteExternalStorage.');\n            }\n            const queryParameters = {};\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/video/external_storage/{name}`.replace(`{${\"name\"}}`, encodeURIComponent(String(requestParameters.name))),\n                method: 'DELETE',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new JSONApiResponse(response);\n        });\n    }\n    /**\n     * Deletes external storage\n     * Delete external storage\n     */\n    deleteExternalStorage(requestParameters, initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.deleteExternalStorageRaw(requestParameters, initOverrides);\n            return yield response.value();\n        });\n    }\n    /**\n     * Lists external storage\n     * List external storage\n     */\n    listExternalStorageRaw(initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const queryParameters = {};\n            const headerParameters = {};\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Stream-Auth-Type\"] = this.configuration.apiKey(\"Stream-Auth-Type\"); // stream-auth-type authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                queryParameters[\"api_key\"] = this.configuration.apiKey(\"api_key\"); // api_key authentication\n            }\n            if (this.configuration && this.configuration.apiKey) {\n                headerParameters[\"Authorization\"] = this.configuration.apiKey(\"Authorization\"); // JWT authentication\n            }\n            const response = yield this.request({\n                path: `/video/external_storage`,\n                method: 'GET',\n                headers: headerParameters,\n                query: queryParameters,\n            }, initOverrides);\n            return new JSONApiResponse(response);\n        });\n    }\n    /**\n     * Lists external storage\n     * List external storage\n     */\n    listExternalStorage(initOverrides) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.listExternalStorageRaw(initOverrides);\n            return yield response.value();\n        });\n    }\n}\n\nclass StreamCall {\n    constructor(streamClient, type, id) {\n        this.streamClient = streamClient;\n        this.type = type;\n        this.id = id;\n        this.blockUser = (videoBlockUserRequest) => {\n            return this.apiClient.blockUser(Object.assign(Object.assign({}, this.baseRequest), { videoBlockUserRequest }));\n        };\n        this.endCall = () => {\n            return this.apiClient.endCall(Object.assign({}, this.baseRequest));\n        };\n        this.get = (request) => {\n            return this.apiClient.getCall(Object.assign(Object.assign({}, (request !== null && request !== void 0 ? request : {})), this.baseRequest));\n        };\n        this.getOrCreate = (videoGetOrCreateCallRequest) => {\n            return this.apiClient.getOrCreateCall(Object.assign(Object.assign({}, this.baseRequest), { videoGetOrCreateCallRequest: videoGetOrCreateCallRequest !== null && videoGetOrCreateCallRequest !== void 0 ? videoGetOrCreateCallRequest : {} }));\n        };\n        this.create = (getOrCreateCallRequest) => {\n            return this.getOrCreate(getOrCreateCallRequest);\n        };\n        this.goLive = (videoGoLiveRequest) => {\n            return this.apiClient.goLive(Object.assign(Object.assign({}, this.baseRequest), { videoGoLiveRequest: videoGoLiveRequest !== null && videoGoLiveRequest !== void 0 ? videoGoLiveRequest : {} }));\n        };\n        this.listRecordings = () => {\n            return this.apiClient.listRecordings(Object.assign({}, this.baseRequest));\n        };\n        this.muteUsers = (videoMuteUsersRequest) => {\n            return this.apiClient.muteUsers(Object.assign(Object.assign({}, this.baseRequest), { videoMuteUsersRequest }));\n        };\n        this.queryMembers = (request) => {\n            return this.apiClient.queryMembers({\n                videoQueryMembersRequest: Object.assign(Object.assign({}, (request !== null && request !== void 0 ? request : {})), this.baseRequest),\n            });\n        };\n        this.sendCustomEvent = (event) => {\n            return this.apiClient.sendEvent(Object.assign({ videoSendEventRequest: { custom: event } }, this.baseRequest));\n        };\n        this.startHLSBroadcasting = () => {\n            return this.apiClient.startHLSBroadcasting(Object.assign({}, this.baseRequest));\n        };\n        this.startRecording = (request) => {\n            return this.apiClient.startRecording(Object.assign(Object.assign({}, this.baseRequest), { videoStartRecordingRequest: request !== null && request !== void 0 ? request : {} }));\n        };\n        this.startTranscription = (videoStartTranscriptionRequest = {}) => {\n            return this.apiClient.startTranscription(Object.assign(Object.assign({}, this.baseRequest), { videoStartTranscriptionRequest }));\n        };\n        this.stopHLSBroadcasting = () => {\n            return this.apiClient.stopHLSBroadcasting(Object.assign({}, this.baseRequest));\n        };\n        this.stopLive = () => {\n            return this.apiClient.stopLive(Object.assign({}, this.baseRequest));\n        };\n        this.stopRecording = () => {\n            return this.apiClient.stopRecording(Object.assign({}, this.baseRequest));\n        };\n        this.stopTranscription = () => {\n            return this.apiClient.stopTranscription(Object.assign({}, this.baseRequest));\n        };\n        this.unblockUser = (videoUnblockUserRequest) => {\n            return this.apiClient.unblockUser(Object.assign({ videoUnblockUserRequest }, this.baseRequest));\n        };\n        this.update = (videoUpdateCallRequest) => {\n            return this.apiClient.updateCall(Object.assign({ videoUpdateCallRequest }, this.baseRequest));\n        };\n        this.updateCallMembers = (videoUpdateCallMembersRequest) => {\n            return this.apiClient.updateCallMembers(Object.assign({ videoUpdateCallMembersRequest }, this.baseRequest));\n        };\n        this.updateUserPermissions = (videoUpdateUserPermissionsRequest) => {\n            return this.apiClient.updateUserPermissions(Object.assign({ videoUpdateUserPermissionsRequest }, this.baseRequest));\n        };\n        this.pinVideo = (videoPinRequest) => {\n            return this.apiClient.videoPin(Object.assign({ videoPinRequest }, this.baseRequest));\n        };\n        this.unpinVideo = (videoUnpinRequest) => {\n            return this.apiClient.videoUnpin(Object.assign({ videoUnpinRequest }, this.baseRequest));\n        };\n        this.baseRequest = { id: this.id, type: this.type };\n        const configuration = this.streamClient.getConfiguration('video');\n        this.apiClient = new DefaultApi(configuration);\n    }\n}\n\nclass StreamVideoClient {\n    constructor(streamClient) {\n        this.streamClient = streamClient;\n        this.call = (type, id) => {\n            return new StreamCall(this.streamClient, type, id);\n        };\n        this.queryCalls = (request) => {\n            return this.apiClient.queryCalls({\n                videoQueryCallsRequest: request !== null && request !== void 0 ? request : {},\n            });\n        };\n        this.createCallType = (videoCreateCallTypeRequest) => {\n            return this.videoServerSideApiClient.createCallType({\n                videoCreateCallTypeRequest,\n            });\n        };\n        this.deleteCallType = (request) => {\n            return this.videoServerSideApiClient.deleteCallType(request);\n        };\n        this.getCallType = (request) => {\n            return this.videoServerSideApiClient.getCallType(request);\n        };\n        this.listCallTypes = () => {\n            return this.videoServerSideApiClient.listCallTypes();\n        };\n        this.updateCallType = (name, videoUpdateCallTypeRequest) => {\n            return this.videoServerSideApiClient.updateCallType({\n                name,\n                videoUpdateCallTypeRequest,\n            });\n        };\n        this.listExternalStorages = () => {\n            return this.settingsApi.listExternalStorage();\n        };\n        this.createExternalStorage = (videoCreateExternalStorageRequest) => {\n            return this.settingsApi.createExternalStorage({\n                videoCreateExternalStorageRequest,\n            });\n        };\n        this.deleteExternalStorage = (request) => {\n            return this.settingsApi.deleteExternalStorage(request);\n        };\n        this.updateExternalStorage = (name, videoUpdateExternalStorageRequest) => {\n            return this.videoServerSideApiClient.updateExternalStorage({\n                name,\n                videoUpdateExternalStorageRequest,\n            });\n        };\n        this.checkExternalStorage = (request) => {\n            return this.videoServerSideApiClient.checkExternalStorage(request);\n        };\n        const configuration = this.streamClient.getConfiguration('video');\n        this.apiClient = new DefaultApi(configuration);\n        this.settingsApi = new SettingsApi(configuration);\n        this.videoServerSideApiClient = new ServerSideApi(configuration);\n    }\n}\n\nfunction JWTUserToken(apiSecret, userId, extraData = {}, jwtOptions = {}) {\n    if (typeof userId !== 'string') {\n        throw new TypeError('userId should be a string');\n    }\n    const payload = Object.assign({ user_id: userId }, extraData);\n    // make sure we return a clear error when jwt is shimmed (ie. browser build)\n    if ((jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default()) == null || (jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().sign) == null) {\n        throw Error(`Unable to find jwt crypto, if you are getting this error is probably because you are trying to generate tokens on browser or React Native (or other environment where crypto functions are not available). Please Note: token should only be generated server-side.`);\n    }\n    const opts = Object.assign({ algorithm: 'HS256', noTimestamp: true }, jwtOptions);\n    if (payload.iat) {\n        opts.noTimestamp = false;\n    }\n    return jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().sign(payload, apiSecret, opts);\n}\nfunction JWTServerToken(apiSecret, jwtOptions = {}) {\n    const payload = {\n        server: true,\n    };\n    const opts = Object.assign({ algorithm: 'HS256', noTimestamp: true }, jwtOptions);\n    return jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().sign(payload, apiSecret, opts);\n}\n\nclass StreamClient {\n    /**\n     *\n     * @param apiKey\n     * @param secret\n     * @param config can be a string, which will be interpreted as base path (deprecated), or a config object\n     */\n    constructor(apiKey, secret, config) {\n        var _a;\n        this.apiKey = apiKey;\n        this.secret = secret;\n        this.config = config;\n        this.options = {};\n        this.createDevice = (createDeviceRequest) => {\n            return this.devicesApi.createDevice({ createDeviceRequest });\n        };\n        this.deleteDevice = (requestParameters) => {\n            return this.devicesApi.deleteDevice(requestParameters);\n        };\n        this.listDevices = (requestParameters) => {\n            return this.devicesApi.listDevices(requestParameters);\n        };\n        this.listPushProviders = () => {\n            return this.pushApi.listPushProviders();\n        };\n        this.deletePushProvider = (request) => {\n            return this.pushApi.deletePushProvider(request);\n        };\n        this.upsertPushProvider = (request) => {\n            return this.serversideApi.upsertPushProvider({\n                upsertPushProviderRequest: { push_provider: request },\n            });\n        };\n        this.checkPush = (checkPushRequest) => {\n            return this.testingApi.checkPush({ checkPushRequest });\n        };\n        this.createGuest = (guestRequest) => __awaiter(this, void 0, void 0, function* () {\n            guestRequest.user = this.mapCustomDataBeforeSend(guestRequest.user);\n            const response = yield this.usersApi.createGuest({ guestRequest });\n            response.user = this.mapCustomDataAfterReceive(response.user);\n            return response;\n        });\n        this.banUser = (banRequest) => {\n            banRequest.user = this.mapCustomDataBeforeSend(banRequest.user);\n            banRequest.banned_by = this.mapCustomDataBeforeSend(banRequest.banned_by);\n            return this.usersApi.ban({ banRequest });\n        };\n        this.deactivateUser = (deactivateUserRequest) => __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.usersApi.deactivateUser({\n                deactivateUserRequest,\n                userId: deactivateUserRequest.user_id,\n            });\n            response.user = this.mapCustomDataAfterReceive(response.user);\n            return response;\n        });\n        this.deactivateUsers = (deactivateUsersRequest) => {\n            return this.usersApi.deactivateUsers({ deactivateUsersRequest });\n        };\n        /**\n         * @deprecated use `deleteUsers` instead\n         * @param deleteUsersRequest\n         * @returns\n         */\n        this.deleteUser = (request) => __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.usersApi.deleteUser(request);\n            response.user = this.mapCustomDataAfterReceive(response.user);\n            return response;\n        });\n        this.deleteUsers = (deleteUsersRequest) => {\n            return this.usersApi.deleteUsers({ deleteUsersRequest });\n        };\n        this.exportUser = (request) => {\n            return this.usersApi.exportUser(request);\n        };\n        this.exportUsers = (exportUsersRequest) => {\n            return this.usersApi.exportUsers({ exportUsersRequest });\n        };\n        this.flag = (flagRequest) => __awaiter(this, void 0, void 0, function* () {\n            var _b, _c;\n            flagRequest.user = this.mapCustomDataBeforeSend(flagRequest.user);\n            const response = yield this.usersApi.flag({ flagRequest });\n            if ((_b = response.flag) === null || _b === void 0 ? void 0 : _b.user) {\n                response.flag.user = this.mapCustomDataAfterReceive((_c = response.flag) === null || _c === void 0 ? void 0 : _c.user);\n            }\n            return response;\n        });\n        this.queryBannedUsers = (payload) => __awaiter(this, void 0, void 0, function* () {\n            payload.user = this.mapCustomDataBeforeSend(payload.user);\n            const response = yield this.usersApi.queryBannedUsers({ payload });\n            response.bans.forEach((b) => {\n                b.banned_by = this.mapCustomDataAfterReceive(b.banned_by);\n                b.user = this.mapCustomDataAfterReceive(b.user);\n            });\n            return response;\n        });\n        this.queryUsers = (payload) => __awaiter(this, void 0, void 0, function* () {\n            payload.user = this.mapCustomDataBeforeSend(payload.user);\n            const response = yield this.usersApi.queryUsers({ payload });\n            /** @ts-expect-error */\n            response.users = response.users.map((u) => this.mapCustomDataAfterReceive(u));\n            return response;\n        });\n        this.reactivateUser = (reactivateUserRequest) => __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.usersApi.reactivateUser({\n                reactivateUserRequest,\n                userId: reactivateUserRequest.user_id,\n            });\n            response.user = this.mapCustomDataAfterReceive(response.user);\n        });\n        this.reactivateUsers = (reactivateUsersRequest) => {\n            return this.usersApi.reactivateUsers({ reactivateUsersRequest });\n        };\n        this.restoreUsers = (restoreUsersRequest) => {\n            return this.usersApi.restoreUsers({ restoreUsersRequest });\n        };\n        this.unbanUser = (request) => {\n            return this.usersApi.unban(request);\n        };\n        this.unflag = (flagRequest) => __awaiter(this, void 0, void 0, function* () {\n            var _d;\n            const response = yield this.usersApi.unflag({ flagRequest });\n            if ((_d = response.flag) === null || _d === void 0 ? void 0 : _d.user) {\n                response.flag.user = this.mapCustomDataAfterReceive(response.flag.user);\n            }\n            return response;\n        });\n        this.upsertUsers = (updateUsersRequest) => __awaiter(this, void 0, void 0, function* () {\n            Object.keys(updateUsersRequest.users).forEach((key) => {\n                updateUsersRequest.users[key] = this.mapCustomDataBeforeSend(updateUsersRequest.users[key]);\n            });\n            const response = yield this.usersApi.updateUsers({ updateUsersRequest });\n            Object.keys(response.users).forEach((key) => {\n                response.users[key] = this.mapCustomDataAfterReceive(response.users[key]);\n            });\n            return response;\n        });\n        this.updateUsersPartial = (request) => __awaiter(this, void 0, void 0, function* () {\n            const response = yield this.usersApi.updateUsersPartial({\n                /** @ts-expect-error */\n                updateUserPartialRequest: request,\n            });\n            Object.keys(response.users).forEach((key) => {\n                response.users[key] = this.mapCustomDataAfterReceive(response.users[key]);\n            });\n            return response;\n        });\n        this.muteUser = (muteUserRequest) => __awaiter(this, void 0, void 0, function* () {\n            var _e, _f;\n            muteUserRequest.user = this.mapCustomDataBeforeSend(muteUserRequest.user);\n            const response = yield this.usersApi.muteUser({ muteUserRequest });\n            if ((_e = response.mute) === null || _e === void 0 ? void 0 : _e.user) {\n                response.mute.user = this.mapCustomDataAfterReceive((_f = response.mute) === null || _f === void 0 ? void 0 : _f.user);\n            }\n            if (response.mutes) {\n                response.mutes = response.mutes.map((m) => {\n                    return Object.assign(Object.assign({}, m), { user: this.mapCustomDataAfterReceive(m.user) });\n                });\n            }\n            return response;\n        });\n        this.unmuteUser = (unmuteUserRequest) => {\n            unmuteUserRequest.user = this.mapCustomDataBeforeSend(unmuteUserRequest.user);\n            return this.usersApi.unmuteUser({ unmuteUserRequest });\n        };\n        this.sendCustomEventToUser = (userId, event) => {\n            return this.eventsApi.sendUserCustomEvent({\n                userId,\n                sendUserCustomEventRequest: { event },\n            });\n        };\n        this.createRole = (createRoleRequest) => {\n            return this.permissionsApi.createRole({ createRoleRequest });\n        };\n        this.deleteRole = (request) => {\n            return this.permissionsApi.deleteRole(request);\n        };\n        this.getPermission = (request) => {\n            return this.permissionsApi.getPermission(request);\n        };\n        this.listPermissions = () => {\n            return this.permissionsApi.listPermissions();\n        };\n        this.listRoles = () => {\n            return this.permissionsApi.listRoles();\n        };\n        this.getAppSettings = () => {\n            return this.settingsApi.getApp();\n        };\n        this.updateAppSettings = (updateAppRequest) => {\n            return this.settingsApi.updateApp({ updateAppRequest });\n        };\n        this.getRateLimits = () => {\n            return this.settingsApi.getRateLimits();\n        };\n        this.getTaskStatus = (request) => {\n            return this.tasksApi.getTask(request);\n        };\n        this.verifyWebhook = (requestBody, xSignature) => {\n            const key = Buffer.from(this.secret, 'utf8');\n            const hash = crypto__WEBPACK_IMPORTED_MODULE_1___default().createHmac('sha256', key)\n                .update(requestBody)\n                .digest('hex');\n            try {\n                return crypto__WEBPACK_IMPORTED_MODULE_1___default().timingSafeEqual(Buffer.from(hash), Buffer.from(xSignature));\n            }\n            catch (err) {\n                return false;\n            }\n        };\n        this.getConfiguration = (product = 'chat') => {\n            var _a;\n            return new Configuration({\n                apiKey: (name) => {\n                    const mapping = {\n                        'Stream-Auth-Type': 'jwt',\n                        api_key: this.apiKey,\n                        Authorization: this.token,\n                    };\n                    return mapping[name];\n                },\n                basePath: (_a = this.options.basePath) !== null && _a !== void 0 ? _a : (product === 'chat'\n                    ? 'https://chat.stream-io-api.com'\n                    : 'https://video.stream-io-api.com'),\n                headers: {\n                    'X-Stream-Client': 'stream-node-' + \"0.1.12\",\n                },\n                middleware: [\n                    {\n                        pre: (context) => {\n                            context.init.headers = Object.assign(Object.assign({}, context.init.headers), { 'x-client-request-id': (0,uuid__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(), 'Accept-Encoding': 'gzip' });\n                            return Promise.resolve(context);\n                        },\n                    },\n                    {\n                        // This should be the last post middleware because that will throw an error\n                        // The Fetch API won't throw an error for HTTP error responses, which means the \"onError\" middleware won't be called so we need to throw error from \"post\" middleware\n                        post: (context) => __awaiter(this, void 0, void 0, function* () {\n                            if ((context.response && context.response.status < 200) ||\n                                context.response.status >= 300) {\n                                const response = new JSONApiResponse(context.response);\n                                const value = (yield response.value());\n                                throw new Error(`Stream error code ${value.code}: ${value.message}`);\n                            }\n                        }),\n                    },\n                    {\n                        pre: (context) => {\n                            context.init.signal = AbortSignal.timeout(this.options.timeout);\n                            return Promise.resolve(context);\n                        },\n                        onError: (context) => {\n                            const error = context.error;\n                            if (error.name === 'AbortError' || error.name === 'TimeoutError') {\n                                throw new FetchError(error, `The request was aborted due to to the ${this.options.timeout}ms timeout, you can set the timeout in the StreamClient constructor`);\n                            }\n                            return Promise.resolve(context.response);\n                        },\n                    },\n                ],\n                // https://github.com/OpenAPITools/openapi-generator/issues/13222\n                queryParamsStringify: (params) => {\n                    const newParams = [];\n                    for (const k in params) {\n                        if (Array.isArray(params[k]) || typeof params[k] === 'object') {\n                            newParams.push(`${k}=${encodeURIComponent(JSON.stringify(params[k]))}`);\n                        }\n                        else {\n                            const value = params[k];\n                            if (typeof value === 'string' ||\n                                typeof value === 'number' ||\n                                typeof value === 'boolean') {\n                                newParams.push(`${k}=${encodeURIComponent(value)}`);\n                            }\n                        }\n                    }\n                    return newParams.join('&');\n                },\n            });\n        };\n        this.reservedKeywords = [\n            'ban_expires',\n            'banned',\n            'id',\n            'invisible',\n            'language',\n            'push_notifications',\n            'revoke_tokens_issued_before',\n            'role',\n            'teams',\n            'created_at',\n            'deactivated_at',\n            'deleted_at',\n            'last_active',\n            'online',\n            'updated_at',\n            'shadow_banned',\n            'name',\n            'image',\n        ];\n        this.mapCustomDataBeforeSend = (user) => {\n            if (!user) {\n                return undefined;\n            }\n            const copy = Object.assign({}, user);\n            delete copy.custom;\n            return Object.assign(Object.assign({}, copy), user.custom);\n        };\n        this.token = JWTServerToken(this.secret);\n        if (typeof config === 'string') {\n            this.options.basePath = config;\n            this.options.timeout = StreamClient.DEFAULT_TIMEOUT;\n        }\n        else {\n            if (config) {\n                this.options = config;\n            }\n            this.options.timeout = (_a = config === null || config === void 0 ? void 0 : config.timeout) !== null && _a !== void 0 ? _a : StreamClient.DEFAULT_TIMEOUT;\n        }\n        this.video = new StreamVideoClient(this);\n        this.chat = new StreamChatClient(this);\n        const chatConfiguration = this.getConfiguration();\n        /** @ts-expect-error */\n        this.usersApi = new UsersApi(chatConfiguration);\n        /** @ts-expect-error */\n        this.devicesApi = new DevicesApi(chatConfiguration);\n        /** @ts-expect-error */\n        this.pushApi = new PushApi(chatConfiguration);\n        /** @ts-expect-error */\n        this.serversideApi = new ServerSideApi$1(chatConfiguration);\n        /** @ts-expect-error */\n        this.testingApi = new TestingApi(chatConfiguration);\n        /** @ts-expect-error */\n        this.permissionsApi = new PermissionsV2Api(chatConfiguration);\n        /** @ts-expect-error */\n        this.settingsApi = new SettingsApi$1(chatConfiguration);\n        /** @ts-expect-error */\n        this.eventsApi = new EventsApi(chatConfiguration);\n        /** @ts-expect-error */\n        this.tasksApi = new TasksApi(chatConfiguration);\n    }\n    /**\n     *\n     * @param userID\n     * @param exp\n     * @param iat deprecated, the default date will be set internally\n     * @param call_cids this parameter is deprecated use `createCallToken` for call tokens\n     * @returns\n     */\n    createToken(userID, exp = Math.round(new Date().getTime() / 1000) + 60 * 60, iat = Math.round(Date.now() / 1000), call_cids) {\n        const extra = {};\n        if (exp) {\n            extra.exp = exp;\n        }\n        if (iat) {\n            extra.iat = iat;\n        }\n        if (call_cids) {\n            console.warn(`Use createCallToken method for creating call tokens, the \"call_cids\" param will be removed from the createToken method with version 0.2.0`);\n            extra.call_cids = call_cids;\n        }\n        return JWTUserToken(this.secret, userID, extra);\n    }\n    /**\n     *\n     * @param userID\n     * @param call_cids\n     * @param exp\n     * @param iat this is deprecated, the current date will be set internally\n     * @returns\n     */\n    createCallToken(userID, call_cids, exp = Math.round(new Date().getTime() / 1000) + 60 * 60, iat = Math.round(Date.now() / 1000)) {\n        const extra = {};\n        if (exp) {\n            extra.exp = exp;\n        }\n        if (iat) {\n            extra.iat = iat;\n        }\n        extra.call_cids = call_cids;\n        return JWTUserToken(this.secret, userID, extra);\n    }\n    mapCustomDataAfterReceive(user) {\n        if (!user) {\n            return undefined;\n        }\n        /** @ts-expect-error */\n        const result = {};\n        Object.keys(user).forEach((key) => {\n            if (!this.reservedKeywords.includes(key)) {\n                if (!result.custom) {\n                    result.custom = {};\n                }\n                result.custom[key] = user[key];\n            }\n            else {\n                result[key] = user[key];\n            }\n        });\n        return result;\n    }\n}\nStreamClient.DEFAULT_TIMEOUT = 3000;\n\n\n//# sourceMappingURL=index.es.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Ac3RyZWFtLWlvL25vZGUtc2RrL2Rpc3QvaW5kZXguZXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUEwQjtBQUNLO0FBQ0g7O0FBRTVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsK0RBQStELGlCQUFpQjtBQUM1RztBQUNBLG9DQUFvQyxNQUFNLCtCQUErQixZQUFZO0FBQ3JGLG1DQUFtQyxNQUFNLG1DQUFtQyxZQUFZO0FBQ3hGLGdDQUFnQztBQUNoQztBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEhBQTBILHFCQUFxQjtBQUMvSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBLHdFQUF3RSxzQkFBc0I7QUFDOUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJEQUEyRCxLQUFLO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBLDZEQUE2RCxNQUFNO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixZQUFZO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEM7QUFDNUMscUdBQXFHO0FBQ3JHO0FBQ0E7QUFDQSx1RUFBdUUsdUJBQXVCO0FBQzlGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlFQUFpRTtBQUNqRTtBQUNBO0FBQ0EsYUFBYTtBQUNiLHVEQUF1RCxxQkFBcUI7QUFDNUU7QUFDQTtBQUNBO0FBQ0EsMkRBQTJEO0FBQzNELHFCQUFxQjtBQUNyQixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkRBQTJELFdBQVcsd0JBQXdCO0FBQzlGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0RBQXdELElBQUk7QUFDNUQ7QUFDQTtBQUNBLHNCQUFzQiw0QkFBNEI7QUFDbEQsa0JBQWtCLDRCQUE0QixHQUFHLFdBQVc7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLDRCQUE0QixHQUFHLHdDQUF3QztBQUN6RjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsNEJBQTRCLEdBQUcsa0NBQWtDO0FBQy9FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0dBQXNHO0FBQ3RHO0FBQ0E7QUFDQSxtRkFBbUY7QUFDbkY7QUFDQTtBQUNBLGdHQUFnRztBQUNoRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzR0FBc0c7QUFDdEc7QUFDQTtBQUNBLG1GQUFtRjtBQUNuRjtBQUNBO0FBQ0EsZ0dBQWdHO0FBQ2hHO0FBQ0E7QUFDQSxzQ0FBc0MsS0FBSyxZQUFZLEVBQUUsUUFBUTtBQUNqRTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0dBQXNHO0FBQ3RHO0FBQ0E7QUFDQSxtRkFBbUY7QUFDbkY7QUFDQTtBQUNBLGdHQUFnRztBQUNoRztBQUNBO0FBQ0Esc0NBQXNDLEtBQUssWUFBWSxFQUFFLFFBQVE7QUFDakU7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNHQUFzRztBQUN0RztBQUNBO0FBQ0EsbUZBQW1GO0FBQ25GO0FBQ0E7QUFDQSxnR0FBZ0c7QUFDaEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0dBQXNHO0FBQ3RHO0FBQ0E7QUFDQSxtRkFBbUY7QUFDbkY7QUFDQTtBQUNBLGdHQUFnRztBQUNoRztBQUNBO0FBQ0Esc0NBQXNDLEtBQUssWUFBWSxFQUFFLFFBQVE7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNHQUFzRztBQUN0RztBQUNBO0FBQ0EsbUZBQW1GO0FBQ25GO0FBQ0E7QUFDQSxnR0FBZ0c7QUFDaEc7QUFDQTtBQUNBLGtDQUFrQyxLQUFLLEVBQUUsR0FBRyxZQUFZLEVBQUUsUUFBUSxpRUFBaUUsRUFBRSxNQUFNO0FBQzNJO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNHQUFzRztBQUN0RztBQUNBO0FBQ0EsbUZBQW1GO0FBQ25GO0FBQ0E7QUFDQSxnR0FBZ0c7QUFDaEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzR0FBc0c7QUFDdEc7QUFDQTtBQUNBLG1GQUFtRjtBQUNuRjtBQUNBO0FBQ0EsZ0dBQWdHO0FBQ2hHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNHQUFzRztBQUN0RztBQUNBO0FBQ0EsbUZBQW1GO0FBQ25GO0FBQ0E7QUFDQSxnR0FBZ0c7QUFDaEc7QUFDQTtBQUNBLHlDQUF5QyxHQUFHLFlBQVksRUFBRSxNQUFNO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNHQUFzRztBQUN0RztBQUNBO0FBQ0EsbUZBQW1GO0FBQ25GO0FBQ0E7QUFDQSxnR0FBZ0c7QUFDaEc7QUFDQTtBQUNBLGtDQUFrQyxLQUFLLEVBQUUsR0FBRyxrQkFBa0IsRUFBRSxRQUFRLGlFQUFpRSxFQUFFLE1BQU07QUFDako7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzR0FBc0c7QUFDdEc7QUFDQTtBQUNBLG1GQUFtRjtBQUNuRjtBQUNBO0FBQ0EsZ0dBQWdHO0FBQ2hHO0FBQ0E7QUFDQSxrQ0FBa0MsS0FBSyxFQUFFLEdBQUcsaUJBQWlCLEVBQUUsUUFBUSxpRUFBaUUsRUFBRSxNQUFNO0FBQ2hKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0dBQXNHO0FBQ3RHO0FBQ0E7QUFDQSxtRkFBbUY7QUFDbkY7QUFDQTtBQUNBLGdHQUFnRztBQUNoRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNHQUFzRztBQUN0RztBQUNBO0FBQ0EsbUZBQW1GO0FBQ25GO0FBQ0E7QUFDQSxnR0FBZ0c7QUFDaEc7QUFDQTtBQUNBLGtDQUFrQyxLQUFLLEVBQUUsR0FBRyxpQkFBaUIsRUFBRSxRQUFRLGlFQUFpRSxFQUFFLE1BQU07QUFDaEo7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzR0FBc0c7QUFDdEc7QUFDQTtBQUNBLG1GQUFtRjtBQUNuRjtBQUNBO0FBQ0EsZ0dBQWdHO0FBQ2hHO0FBQ0E7QUFDQSxrQ0FBa0MsS0FBSyxFQUFFLEdBQUcsbUJBQW1CLEVBQUUsUUFBUSxpRUFBaUUsRUFBRSxNQUFNO0FBQ2xKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0dBQXNHO0FBQ3RHO0FBQ0E7QUFDQSxtRkFBbUY7QUFDbkY7QUFDQTtBQUNBLGdHQUFnRztBQUNoRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNHQUFzRztBQUN0RztBQUNBO0FBQ0EsbUZBQW1GO0FBQ25GO0FBQ0E7QUFDQSxnR0FBZ0c7QUFDaEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0dBQXNHO0FBQ3RHO0FBQ0E7QUFDQSxtRkFBbUY7QUFDbkY7QUFDQTtBQUNBLGdHQUFnRztBQUNoRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QztBQUN2QztBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzR0FBc0c7QUFDdEc7QUFDQTtBQUNBLG1GQUFtRjtBQUNuRjtBQUNBO0FBQ0EsZ0dBQWdHO0FBQ2hHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0dBQXNHO0FBQ3RHO0FBQ0E7QUFDQSxtRkFBbUY7QUFDbkY7QUFDQTtBQUNBLGdHQUFnRztBQUNoRztBQUNBO0FBQ0Esa0NBQWtDLEtBQUssRUFBRSxHQUFHLGlCQUFpQixFQUFFLFFBQVEsaUVBQWlFLEVBQUUsTUFBTTtBQUNoSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNHQUFzRztBQUN0RztBQUNBO0FBQ0EsbUZBQW1GO0FBQ25GO0FBQ0E7QUFDQSxnR0FBZ0c7QUFDaEc7QUFDQTtBQUNBLGtDQUFrQyxLQUFLLEVBQUUsR0FBRyxxQkFBcUIsRUFBRSxRQUFRLGlFQUFpRSxFQUFFLE1BQU07QUFDcEo7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzR0FBc0c7QUFDdEc7QUFDQTtBQUNBLG1GQUFtRjtBQUNuRjtBQUNBO0FBQ0EsZ0dBQWdHO0FBQ2hHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNHQUFzRztBQUN0RztBQUNBO0FBQ0EsbUZBQW1GO0FBQ25GO0FBQ0E7QUFDQSxnR0FBZ0c7QUFDaEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0dBQXNHO0FBQ3RHO0FBQ0E7QUFDQSxtRkFBbUY7QUFDbkY7QUFDQTtBQUNBLGdHQUFnRztBQUNoRztBQUNBO0FBQ0Esa0NBQWtDLEtBQUssRUFBRSxHQUFHLFlBQVksRUFBRSxRQUFRLGlFQUFpRSxFQUFFLE1BQU07QUFDM0k7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzR0FBc0c7QUFDdEc7QUFDQTtBQUNBLG1GQUFtRjtBQUNuRjtBQUNBO0FBQ0EsZ0dBQWdHO0FBQ2hHO0FBQ0E7QUFDQSxrQ0FBa0MsS0FBSyxFQUFFLEdBQUcsWUFBWSxFQUFFLFFBQVEsaUVBQWlFLEVBQUUsTUFBTTtBQUMzSTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzR0FBc0c7QUFDdEc7QUFDQTtBQUNBLG1GQUFtRjtBQUNuRjtBQUNBO0FBQ0EsZ0dBQWdHO0FBQ2hHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNHQUFzRztBQUN0RztBQUNBO0FBQ0EsbUZBQW1GO0FBQ25GO0FBQ0E7QUFDQSxnR0FBZ0c7QUFDaEc7QUFDQTtBQUNBLGtDQUFrQyxLQUFLLFlBQVksRUFBRSxRQUFRO0FBQzdEO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzR0FBc0c7QUFDdEc7QUFDQTtBQUNBLG1GQUFtRjtBQUNuRjtBQUNBO0FBQ0EsZ0dBQWdHO0FBQ2hHO0FBQ0E7QUFDQSxrQ0FBa0MsS0FBSyxZQUFZLEVBQUUsUUFBUTtBQUM3RDtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0dBQXNHO0FBQ3RHO0FBQ0E7QUFDQSxtRkFBbUY7QUFDbkY7QUFDQTtBQUNBLGdHQUFnRztBQUNoRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzR0FBc0c7QUFDdEc7QUFDQTtBQUNBLG1GQUFtRjtBQUNuRjtBQUNBO0FBQ0EsZ0dBQWdHO0FBQ2hHO0FBQ0E7QUFDQSxrQ0FBa0MsS0FBSyxZQUFZLEVBQUUsUUFBUTtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzR0FBc0c7QUFDdEc7QUFDQTtBQUNBLG1GQUFtRjtBQUNuRjtBQUNBO0FBQ0EsZ0dBQWdHO0FBQ2hHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzR0FBc0c7QUFDdEc7QUFDQTtBQUNBLG1GQUFtRjtBQUNuRjtBQUNBO0FBQ0EsZ0dBQWdHO0FBQ2hHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNHQUFzRztBQUN0RztB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LE1BQU07QUFDNUQ7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNHQUFzRztBQUN0RztBQUNBO0FBQ0EsbUZBQW1GO0FBQ25GO0FBQ0E7QUFDQSxnR0FBZ0c7QUFDaEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNHQUFzRztBQUN0RztBQUNBO0FBQ0EsbUZBQW1GO0FBQ25GO0FBQ0E7QUFDQSxnR0FBZ0c7QUFDaEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNHQUFzRztBQUN0RztBQUNBO0FBQ0EsbUZBQW1GO0FBQ25GO0FBQ0E7QUFDQSxnR0FBZ0c7QUFDaEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNHQUFzRztBQUN0RztBQUNBO0FBQ0EsbUZBQW1GO0FBQ25GO0FBQ0E7QUFDQSxnR0FBZ0c7QUFDaEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0dBQXNHO0FBQ3RHO0FBQ0E7QUFDQSxtRkFBbUY7QUFDbkY7QUFDQTtBQUNBLGdHQUFnRztBQUNoRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQztBQUNoQztBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNHQUFzRztBQUN0RztBQUNBO0FBQ0EsbUZBQW1GO0FBQ25GO0FBQ0E7QUFDQSxnR0FBZ0c7QUFDaEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzR0FBc0c7QUFDdEc7QUFDQTtBQUNB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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTs7QUFFd25GO0FBQ3huRiIsInNvdXJjZXMiOlsid2VicGFjazovL0hhTWVldHovLi9ub2RlX21vZHVsZXMvQHN0cmVhbS1pby9ub2RlLXNkay9kaXN0L2luZGV4LmVzLmpzPzA1NjYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdjQgfSBmcm9tICd1dWlkJztcbmltcG9ydCBqd3QgZnJvbSAnanNvbndlYnRva2VuJztcbmltcG9ydCBjcnlwdG8gZnJvbSAnY3J5cHRvJztcblxuLyoqXG4gKiBAZXhwb3J0XG4gKi9cbmNvbnN0IEFQTkNvbmZpZ1JlcXVlc3RBdXRoVHlwZUVudW0gPSB7XG4gICAgQ0VSVElGSUNBVEU6ICdjZXJ0aWZpY2F0ZScsXG4gICAgVE9LRU46ICd0b2tlbidcbn07XG4vKipcbiAqIEBleHBvcnRcbiAqL1xuY29uc3QgQXBwU2VhcmNoQmFja2VuZEVudW0gPSB7XG4gICAgRUxBU1RJQ1NFQVJDSDogJ2VsYXN0aWNzZWFyY2gnLFxuICAgIFBPU1RHUkVTOiAncG9zdGdyZXMnLFxuICAgIERJU0FCTEVEOiAnZGlzYWJsZWQnXG59O1xuLyoqXG4gKiBAZXhwb3J0XG4gKi9cbmNvbnN0IEFzeW5jTW9kZXJhdGlvbkNhbGxiYWNrQ29uZmlnUmVxdWVzdE1vZGVFbnVtID0ge1xuICAgIE5PTkU6ICdDQUxMQkFDS19NT0RFX05PTkUnLFxuICAgIFJFU1Q6ICdDQUxMQkFDS19NT0RFX1JFU1QnLFxuICAgIFRXSVJQOiAnQ0FMTEJBQ0tfTU9ERV9UV0lSUCdcbn07XG4vKipcbiAqIEBleHBvcnRcbiAqL1xuY29uc3QgQXVkaW9TZXR0aW5nc0RlZmF1bHREZXZpY2VFbnVtID0ge1xuICAgIFNQRUFLRVI6ICdzcGVha2VyJyxcbiAgICBFQVJQSUVDRTogJ2VhcnBpZWNlJ1xufTtcbi8qKlxuICogQGV4cG9ydFxuICovXG5jb25zdCBCbG9ja0xpc3RPcHRpb25zQmVoYXZpb3JFbnVtID0ge1xuICAgIEZMQUc6ICdmbGFnJyxcbiAgICBCTE9DSzogJ2Jsb2NrJ1xufTtcbi8qKlxuICogQGV4cG9ydFxuICovXG5jb25zdCBCbG9ja0xpc3RPcHRpb25zUmVxdWVzdEJlaGF2aW9yRW51bSA9IHtcbiAgICBGTEFHOiAnZmxhZycsXG4gICAgQkxPQ0s6ICdibG9jaydcbn07XG4vKipcbiAqIEBleHBvcnRcbiAqL1xuY29uc3QgQ2hhbm5lbENvbmZpZ0F1dG9tb2RFbnVtID0ge1xuICAgIERJU0FCTEVEOiAnZGlzYWJsZWQnLFxuICAgIFNJTVBMRTogJ3NpbXBsZScsXG4gICAgQUk6ICdBSSdcbn07XG4vKipcbiAqIEBleHBvcnRcbiAqL1xuY29uc3QgQ2hhbm5lbENvbmZpZ0F1dG9tb2RCZWhhdmlvckVudW0gPSB7XG4gICAgRkxBRzogJ2ZsYWcnLFxuICAgIEJMT0NLOiAnYmxvY2snXG59O1xuLyoqXG4gKiBAZXhwb3J0XG4gKi9cbmNvbnN0IENoYW5uZWxDb25maWdCbG9ja2xpc3RCZWhhdmlvckVudW0gPSB7XG4gICAgRkxBRzogJ2ZsYWcnLFxuICAgIEJMT0NLOiAnYmxvY2snXG59O1xuLyoqXG4gKiBAZXhwb3J0XG4gKi9cbmNvbnN0IENoYW5uZWxDb25maWdSZXF1ZXN0QmxvY2tsaXN0QmVoYXZpb3JFbnVtID0ge1xuICAgIEZMQUc6ICdmbGFnJyxcbiAgICBCTE9DSzogJ2Jsb2NrJ1xufTtcbi8qKlxuICogQGV4cG9ydFxuICovXG5jb25zdCBDaGFubmVsQ29uZmlnV2l0aEluZm9BdXRvbW9kRW51bSA9IHtcbiAgICBESVNBQkxFRDogJ2Rpc2FibGVkJyxcbiAgICBTSU1QTEU6ICdzaW1wbGUnLFxuICAgIEFJOiAnQUknXG59O1xuLyoqXG4gKiBAZXhwb3J0XG4gKi9cbmNvbnN0IENoYW5uZWxDb25maWdXaXRoSW5mb0F1dG9tb2RCZWhhdmlvckVudW0gPSB7XG4gICAgRkxBRzogJ2ZsYWcnLFxuICAgIEJMT0NLOiAnYmxvY2snXG59O1xuLyoqXG4gKiBAZXhwb3J0XG4gKi9cbmNvbnN0IENoYW5uZWxDb25maWdXaXRoSW5mb0Jsb2NrbGlzdEJlaGF2aW9yRW51bSA9IHtcbiAgICBGTEFHOiAnZmxhZycsXG4gICAgQkxPQ0s6ICdibG9jaydcbn07XG4vKipcbiAqIEBleHBvcnRcbiAqL1xuY29uc3QgQ2hhbm5lbENvbmZpZ1dpdGhJbmZvUmVxdWVzdEF1dG9tb2RFbnVtID0ge1xuICAgIERJU0FCTEVEOiAnZGlzYWJsZWQnLFxuICAgIFNJTVBMRTogJ3NpbXBsZScsXG4gICAgQUk6ICdBSSdcbn07XG4vKipcbiAqIEBleHBvcnRcbiAqL1xuY29uc3QgQ2hhbm5lbENvbmZpZ1dpdGhJbmZvUmVxdWVzdEF1dG9tb2RCZWhhdmlvckVudW0gPSB7XG4gICAgRkxBRzogJ2ZsYWcnLFxuICAgIEJMT0NLOiAnYmxvY2snXG59O1xuLyoqXG4gKiBAZXhwb3J0XG4gKi9cbmNvbnN0IENoYW5uZWxDb25maWdXaXRoSW5mb1JlcXVlc3RCbG9ja2xpc3RCZWhhdmlvckVudW0gPSB7XG4gICAgRkxBRzogJ2ZsYWcnLFxuICAgIEJMT0NLOiAnYmxvY2snXG59O1xuLyoqXG4gKiBAZXhwb3J0XG4gKi9cbmNvbnN0IENoYW5uZWxNZW1iZXJSb2xlRW51bSA9IHtcbiAgICBNRU1CRVI6ICdtZW1iZXInLFxuICAgIE1PREVSQVRPUjogJ21vZGVyYXRvcicsXG4gICAgQURNSU46ICdhZG1pbicsXG4gICAgT1dORVI6ICdvd25lcidcbn07XG4vKipcbiAqIEBleHBvcnRcbiAqL1xuY29uc3QgQ2hhbm5lbE1lbWJlclJlcXVlc3RSb2xlRW51bSA9IHtcbiAgICBNRU1CRVI6ICdtZW1iZXInLFxuICAgIE1PREVSQVRPUjogJ21vZGVyYXRvcicsXG4gICAgQURNSU46ICdhZG1pbicsXG4gICAgT1dORVI6ICdvd25lcidcbn07XG4vKipcbiAqIEBleHBvcnRcbiAqL1xuY29uc3QgQ2hhbm5lbFR5cGVDb25maWdBdXRvbW9kRW51bSA9IHtcbiAgICBESVNBQkxFRDogJ2Rpc2FibGVkJyxcbiAgICBTSU1QTEU6ICdzaW1wbGUnLFxuICAgIEFJOiAnQUknXG59O1xuLyoqXG4gKiBAZXhwb3J0XG4gKi9cbmNvbnN0IENoYW5uZWxUeXBlQ29uZmlnQXV0b21vZEJlaGF2aW9yRW51bSA9IHtcbiAgICBGTEFHOiAnZmxhZycsXG4gICAgQkxPQ0s6ICdibG9jaydcbn07XG4vKipcbiAqIEBleHBvcnRcbiAqL1xuY29uc3QgQ2hhbm5lbFR5cGVDb25maWdCbG9ja2xpc3RCZWhhdmlvckVudW0gPSB7XG4gICAgRkxBRzogJ2ZsYWcnLFxuICAgIEJMT0NLOiAnYmxvY2snXG59O1xuLyoqXG4gKiBAZXhwb3J0XG4gKi9cbmNvbnN0IENoZWNrUHVzaFJlcXVlc3RQdXNoUHJvdmlkZXJUeXBlRW51bSA9IHtcbiAgICBGSVJFQkFTRTogJ2ZpcmViYXNlJyxcbiAgICBBUE46ICdhcG4nLFxuICAgIEhVQVdFSTogJ2h1YXdlaScsXG4gICAgWElBT01JOiAneGlhb21pJ1xufTtcbi8qKlxuICogQGV4cG9ydFxuICovXG5jb25zdCBDaGVja1NOU1Jlc3BvbnNlU3RhdHVzRW51bSA9IHtcbiAgICBPSzogJ29rJyxcbiAgICBFUlJPUjogJ2Vycm9yJ1xufTtcbi8qKlxuICogQGV4cG9ydFxuICovXG5jb25zdCBDaGVja1NRU1Jlc3BvbnNlU3RhdHVzRW51bSA9IHtcbiAgICBPSzogJ29rJyxcbiAgICBFUlJPUjogJ2Vycm9yJ1xufTtcbi8qKlxuICogQGV4cG9ydFxuICovXG5jb25zdCBDb25maWdEZWZhdWx0Um9sZUVudW0gPSB7XG4gICAgQVRURU5ERUU6ICdhdHRlbmRlZScsXG4gICAgUFVCTElTSEVSOiAncHVibGlzaGVyJyxcbiAgICBTVUJTQ1JJQkVSOiAnc3Vic2NyaWJlcicsXG4gICAgQURNSU46ICdhZG1pbidcbn07XG4vKipcbiAqIEBleHBvcnRcbiAqL1xuY29uc3QgQ29uZmlnUmVxdWVzdERlZmF1bHRSb2xlRW51bSA9IHtcbiAgICBBVFRFTkRFRTogJ2F0dGVuZGVlJyxcbiAgICBQVUJMSVNIRVI6ICdwdWJsaXNoZXInLFxuICAgIFNVQlNDUklCRVI6ICdzdWJzY3JpYmVyJyxcbiAgICBBRE1JTjogJ2FkbWluJ1xufTtcbi8qKlxuICogQGV4cG9ydFxuICovXG5jb25zdCBDcmVhdGVDYWxsUmVxdWVzdFR5cGVFbnVtID0ge1xuICAgIEFVRElPOiAnYXVkaW8nLFxuICAgIFZJREVPOiAndmlkZW8nXG59O1xuLyoqXG4gKiBAZXhwb3J0XG4gKi9cbmNvbnN0IENyZWF0ZUNoYW5uZWxUeXBlUmVxdWVzdEF1dG9tb2RFbnVtID0ge1xuICAgIERJU0FCTEVEOiAnZGlzYWJsZWQnLFxuICAgIFNJTVBMRTogJ3NpbXBsZScsXG4gICAgQUk6ICdBSSdcbn07XG4vKipcbiAqIEBleHBvcnRcbiAqL1xuY29uc3QgQ3JlYXRlQ2hhbm5lbFR5cGVSZXF1ZXN0QXV0b21vZEJlaGF2aW9yRW51bSA9IHtcbiAgICBGTEFHOiAnZmxhZycsXG4gICAgQkxPQ0s6ICdibG9jaydcbn07XG4vKipcbiAqIEBleHBvcnRcbiAqL1xuY29uc3QgQ3JlYXRlQ2hhbm5lbFR5cGVSZXF1ZXN0QmxvY2tsaXN0QmVoYXZpb3JFbnVtID0ge1xuICAgIEZMQUc6ICdmbGFnJyxcbiAgICBCTE9DSzogJ2Jsb2NrJ1xufTtcbi8qKlxuICogQGV4cG9ydFxuICovXG5jb25zdCBDcmVhdGVDaGFubmVsVHlwZVJlc3BvbnNlQXV0b21vZEVudW0gPSB7XG4gICAgRElTQUJMRUQ6ICdkaXNhYmxlZCcsXG4gICAgU0lNUExFOiAnc2ltcGxlJyxcbiAgICBBSTogJ0FJJ1xufTtcbi8qKlxuICogQGV4cG9ydFxuICovXG5jb25zdCBDcmVhdGVDaGFubmVsVHlwZVJlc3BvbnNlQXV0b21vZEJlaGF2aW9yRW51bSA9IHtcbiAgICBGTEFHOiAnZmxhZycsXG4gICAgQkxPQ0s6ICdibG9jaydcbn07XG4vKipcbiAqIEBleHBvcnRcbiAqL1xuY29uc3QgQ3JlYXRlQ2hhbm5lbFR5cGVSZXNwb25zZUJsb2NrbGlzdEJlaGF2aW9yRW51bSA9IHtcbiAgICBGTEFHOiAnZmxhZycsXG4gICAgQkxPQ0s6ICdibG9jaydcbn07XG4vKipcbiAqIEBleHBvcnRcbiAqL1xuY29uc3QgQ3JlYXRlRGV2aWNlUmVxdWVzdFB1c2hQcm92aWRlckVudW0gPSB7XG4gICAgRklSRUJBU0U6ICdmaXJlYmFzZScsXG4gICAgQVBOOiAnYXBuJyxcbiAgICBIVUFXRUk6ICdodWF3ZWknLFxuICAgIFhJQU9NSTogJ3hpYW9taSdcbn07XG4vKipcbiAqIEBleHBvcnRcbiAqL1xuY29uc3QgQ3JlYXRlSW1wb3J0UmVxdWVzdE1vZGVFbnVtID0ge1xuICAgIElOU0VSVDogJ2luc2VydCcsXG4gICAgVVBTRVJUOiAndXBzZXJ0J1xufTtcbi8qKlxuICogQGV4cG9ydFxuICovXG5jb25zdCBEZWxldGVVc2Vyc1JlcXVlc3RDb252ZXJzYXRpb25zRW51bSA9IHtcbiAgICBTT0ZUOiAnc29mdCcsXG4gICAgSEFSRDogJ2hhcmQnXG59O1xuLyoqXG4gKiBAZXhwb3J0XG4gKi9cbmNvbnN0IERlbGV0ZVVzZXJzUmVxdWVzdE1lc3NhZ2VzRW51bSA9IHtcbiAgICBTT0ZUOiAnc29mdCcsXG4gICAgUFJVTklORzogJ3BydW5pbmcnLFxuICAgIEhBUkQ6ICdoYXJkJ1xufTtcbi8qKlxuICogQGV4cG9ydFxuICovXG5jb25zdCBEZWxldGVVc2Vyc1JlcXVlc3RVc2VyRW51bSA9IHtcbiAgICBTT0ZUOiAnc29mdCcsXG4gICAgUFJVTklORzogJ3BydW5pbmcnLFxuICAgIEhBUkQ6ICdoYXJkJ1xufTtcbi8qKlxuICogQGV4cG9ydFxuICovXG5jb25zdCBEZXZpY2VQdXNoUHJvdmlkZXJFbnVtID0ge1xuICAgIEZJUkVCQVNFOiAnZmlyZWJhc2UnLFxuICAgIEFQTjogJ2FwbicsXG4gICAgSFVBV0VJOiAnaHVhd2VpJyxcbiAgICBYSUFPTUk6ICd4aWFvbWknXG59O1xuLyoqXG4gKiBAZXhwb3J0XG4gKi9cbmNvbnN0IERldmljZUZpZWxkc1B1c2hQcm92aWRlckVudW0gPSB7XG4gICAgRklSRUJBU0U6ICdmaXJlYmFzZScsXG4gICAgQVBOOiAnYXBuJyxcbiAgICBIVUFXRUk6ICdodWF3ZWknLFxuICAgIFhJQU9NSTogJ3hpYW9taSdcbn07XG4vKipcbiAqIEBleHBvcnRcbiAqL1xuY29uc3QgRGV2aWNlUmVxdWVzdFB1c2hQcm92aWRlckVudW0gPSB7XG4gICAgRklSRUJBU0U6ICdmaXJlYmFzZScsXG4gICAgQVBOOiAnYXBuJyxcbiAgICBIVUFXRUk6ICdodWF3ZWknLFxuICAgIFhJQU9NSTogJ3hpYW9taSdcbn07XG4vKipcbiAqIEBleHBvcnRcbiAqL1xuY29uc3QgSW1hZ2VTaXplQ3JvcEVudW0gPSB7XG4gICAgVE9QOiAndG9wJyxcbiAgICBCT1RUT006ICdib3R0b20nLFxuICAgIExFRlQ6ICdsZWZ0JyxcbiAgICBSSUdIVDogJ3JpZ2h0JyxcbiAgICBDRU5URVI6ICdjZW50ZXInXG59O1xuLyoqXG4gKiBAZXhwb3J0XG4gKi9cbmNvbnN0IEltYWdlU2l6ZVJlc2l6ZUVudW0gPSB7XG4gICAgQ0xJUDogJ2NsaXAnLFxuICAgIENST1A6ICdjcm9wJyxcbiAgICBTQ0FMRTogJ3NjYWxlJyxcbiAgICBGSUxMOiAnZmlsbCdcbn07XG4vKipcbiAqIEBleHBvcnRcbiAqL1xuY29uc3QgTGF5b3V0U2V0dGluZ3NOYW1lRW51bSA9IHtcbiAgICBTUE9UTElHSFQ6ICdzcG90bGlnaHQnLFxuICAgIEdSSUQ6ICdncmlkJyxcbiAgICBTSU5HTEVfUEFSVElDSVBBTlQ6ICdzaW5nbGUtcGFydGljaXBhbnQnLFxuICAgIE1PQklMRTogJ21vYmlsZScsXG4gICAgQ1VTVE9NOiAnY3VzdG9tJ1xufTtcbi8qKlxuICogQGV4cG9ydFxuICovXG5jb25zdCBNZXNzYWdlVHlwZUVudW0gPSB7XG4gICAgUkVHVUxBUjogJ3JlZ3VsYXInLFxuICAgIEVQSEVNRVJBTDogJ2VwaGVtZXJhbCcsXG4gICAgRVJST1I6ICdlcnJvcicsXG4gICAgUkVQTFk6ICdyZXBseScsXG4gICAgU1lTVEVNOiAnc3lzdGVtJyxcbiAgICBERUxFVEVEOiAnZGVsZXRlZCdcbn07XG4vKipcbiAqIEBleHBvcnRcbiAqL1xuY29uc3QgTWVzc2FnZVJlcXVlc3RUeXBlRW51bSA9IHtcbiAgICBSRUdVTEFSOiAncmVndWxhcicsXG4gICAgRVBIRU1FUkFMOiAnZXBoZW1lcmFsJyxcbiAgICBFUlJPUjogJ2Vycm9yJyxcbiAgICBSRVBMWTogJ3JlcGx5JyxcbiAgICBTWVNURU06ICdzeXN0ZW0nLFxuICAgIERFTEVURUQ6ICdkZWxldGVkJ1xufTtcbi8qKlxuICogQGV4cG9ydFxuICovXG5jb25zdCBNZXNzYWdlUmVxdWVzdDFUeXBlRW51bSA9IHtcbiAgICBSRUdVTEFSOiAncmVndWxhcicsXG4gICAgRVBIRU1FUkFMOiAnZXBoZW1lcmFsJyxcbiAgICBFUlJPUjogJ2Vycm9yJyxcbiAgICBSRVBMWTogJ3JlcGx5JyxcbiAgICBTWVNURU06ICdzeXN0ZW0nLFxuICAgIERFTEVURUQ6ICdkZWxldGVkJ1xufTtcbi8qKlxuICogQGV4cG9ydFxuICovXG5jb25zdCBQZXJtaXNzaW9uTGV2ZWxFbnVtID0ge1xuICAgIEFQUDogJ2FwcCcsXG4gICAgQ0hBTk5FTDogJ2NoYW5uZWwnXG59O1xuLyoqXG4gKiBAZXhwb3J0XG4gKi9cbmNvbnN0IFBvbGljeVJlcXVlc3RBY3Rpb25FbnVtID0ge1xuICAgIERFTlk6ICdEZW55JyxcbiAgICBBTExPVzogJ0FsbG93J1xufTtcbi8qKlxuICogQGV4cG9ydFxuICovXG5jb25zdCBQb2xpY3lSZXF1ZXN0MUFjdGlvbkVudW0gPSB7XG4gICAgREVOWTogJ0RlbnknLFxuICAgIEFMTE9XOiAnQWxsb3cnXG59O1xuLyoqXG4gKiBAZXhwb3J0XG4gKi9cbmNvbnN0IFB1c2hDb25maWdSZXF1ZXN0VmVyc2lvbkVudW0gPSB7XG4gICAgVjE6ICd2MScsXG4gICAgVjI6ICd2Midcbn07XG4vKipcbiAqIEBleHBvcnRcbiAqL1xuY29uc3QgVHJhbnNjcmlwdGlvblNldHRpbmdzTW9kZUVudW0gPSB7XG4gICAgQVZBSUxBQkxFOiAnYXZhaWxhYmxlJyxcbiAgICBESVNBQkxFRDogJ2Rpc2FibGVkJyxcbiAgICBBVVRPX09OOiAnYXV0by1vbidcbn07XG4vKipcbiAqIEBleHBvcnRcbiAqL1xuY29uc3QgVHJhbnNsYXRlTWVzc2FnZVJlcXVlc3RMYW5ndWFnZUVudW0gPSB7XG4gICAgQUY6ICdhZicsXG4gICAgU1E6ICdzcScsXG4gICAgQU06ICdhbScsXG4gICAgQVI6ICdhcicsXG4gICAgQVo6ICdheicsXG4gICAgQk46ICdibicsXG4gICAgQlM6ICdicycsXG4gICAgQkc6ICdiZycsXG4gICAgWkg6ICd6aCcsXG4gICAgWkhfVFc6ICd6aC1UVycsXG4gICAgSFI6ICdocicsXG4gICAgQ1M6ICdjcycsXG4gICAgREE6ICdkYScsXG4gICAgRkFfQUY6ICdmYS1BRicsXG4gICAgTkw6ICdubCcsXG4gICAgRU46ICdlbicsXG4gICAgRVQ6ICdldCcsXG4gICAgRkk6ICdmaScsXG4gICAgRlI6ICdmcicsXG4gICAgRlJfQ0E6ICdmci1DQScsXG4gICAgS0E6ICdrYScsXG4gICAgREU6ICdkZScsXG4gICAgRUw6ICdlbCcsXG4gICAgSEE6ICdoYScsXG4gICAgSEU6ICdoZScsXG4gICAgSEk6ICdoaScsXG4gICAgSFU6ICdodScsXG4gICAgSUQ6ICdpZCcsXG4gICAgSVQ6ICdpdCcsXG4gICAgSkE6ICdqYScsXG4gICAgS086ICdrbycsXG4gICAgTFY6ICdsdicsXG4gICAgTVM6ICdtcycsXG4gICAgTk86ICdubycsXG4gICAgRkE6ICdmYScsXG4gICAgUFM6ICdwcycsXG4gICAgUEw6ICdwbCcsXG4gICAgUFQ6ICdwdCcsXG4gICAgUk86ICdybycsXG4gICAgUlU6ICdydScsXG4gICAgU1I6ICdzcicsXG4gICAgU0s6ICdzaycsXG4gICAgU0w6ICdzbCcsXG4gICAgU086ICdzbycsXG4gICAgRVM6ICdlcycsXG4gICAgRVNfTVg6ICdlcy1NWCcsXG4gICAgU1c6ICdzdycsXG4gICAgU1Y6ICdzdicsXG4gICAgVEw6ICd0bCcsXG4gICAgVEE6ICd0YScsXG4gICAgVEg6ICd0aCcsXG4gICAgVFI6ICd0cicsXG4gICAgVUs6ICd1aycsXG4gICAgVVI6ICd1cicsXG4gICAgVkk6ICd2aSdcbn07XG4vKipcbiAqIEBleHBvcnRcbiAqL1xuY29uc3QgVXBkYXRlQXBwUmVxdWVzdEVuZm9yY2VVbmlxdWVVc2VybmFtZXNFbnVtID0ge1xuICAgIE5POiAnbm8nLFxuICAgIEFQUDogJ2FwcCcsXG4gICAgVEVBTTogJ3RlYW0nXG59O1xuLyoqXG4gKiBAZXhwb3J0XG4gKi9cbmNvbnN0IFVwZGF0ZUFwcFJlcXVlc3RQZXJtaXNzaW9uVmVyc2lvbkVudW0gPSB7XG4gICAgVjE6ICd2MScsXG4gICAgVjI6ICd2Midcbn07XG4vKipcbiAqIEBleHBvcnRcbiAqL1xuY29uc3QgVXBkYXRlQXBwUmVxdWVzdFZpZGVvUHJvdmlkZXJFbnVtID0ge1xuICAgIEFHT1JBOiAnYWdvcmEnLFxuICAgIEhNUzogJ2htcydcbn07XG4vKipcbiAqIEBleHBvcnRcbiAqL1xuY29uc3QgVXBkYXRlQ2hhbm5lbFR5cGVSZXF1ZXN0QXV0b21vZEVudW0gPSB7XG4gICAgRElTQUJMRUQ6ICdkaXNhYmxlZCcsXG4gICAgU0lNUExFOiAnc2ltcGxlJyxcbiAgICBBSTogJ0FJJ1xufTtcbi8qKlxuICogQGV4cG9ydFxuICovXG5jb25zdCBVcGRhdGVDaGFubmVsVHlwZVJlcXVlc3RBdXRvbW9kQmVoYXZpb3JFbnVtID0ge1xuICAgIEZMQUc6ICdmbGFnJyxcbiAgICBCTE9DSzogJ2Jsb2NrJ1xufTtcbi8qKlxuICogQGV4cG9ydFxuICovXG5jb25zdCBVcGRhdGVDaGFubmVsVHlwZVJlcXVlc3RCbG9ja2xpc3RCZWhhdmlvckVudW0gPSB7XG4gICAgRkxBRzogJ2ZsYWcnLFxuICAgIEJMT0NLOiAnYmxvY2snXG59O1xuLyoqXG4gKiBAZXhwb3J0XG4gKi9cbmNvbnN0IFVwZGF0ZUNoYW5uZWxUeXBlUmVzcG9uc2VBdXRvbW9kRW51bSA9IHtcbiAgICBESVNBQkxFRDogJ2Rpc2FibGVkJyxcbiAgICBTSU1QTEU6ICdzaW1wbGUnLFxuICAgIEFJOiAnQUknXG59O1xuLyoqXG4gKiBAZXhwb3J0XG4gKi9cbmNvbnN0IFVwZGF0ZUNoYW5uZWxUeXBlUmVzcG9uc2VBdXRvbW9kQmVoYXZpb3JFbnVtID0ge1xuICAgIEZMQUc6ICdmbGFnJyxcbiAgICBCTE9DSzogJ2Jsb2NrJ1xufTtcbi8qKlxuICogQGV4cG9ydFxuICovXG5jb25zdCBVcGRhdGVDaGFubmVsVHlwZVJlc3BvbnNlQmxvY2tsaXN0QmVoYXZpb3JFbnVtID0ge1xuICAgIEZMQUc6ICdmbGFnJyxcbiAgICBCTE9DSzogJ2Jsb2NrJ1xufTtcbi8qKlxuICogQGV4cG9ydFxuICovXG5jb25zdCBWaWRlb1NldHRpbmdzQ2FtZXJhRmFjaW5nRW51bSA9IHtcbiAgICBGUk9OVDogJ2Zyb250JyxcbiAgICBCQUNLOiAnYmFjaycsXG4gICAgRVhURVJOQUw6ICdleHRlcm5hbCdcbn07XG5cbi8qKlxuICogQGV4cG9ydFxuICovXG5jb25zdCBWaWRlb0F1ZGlvU2V0dGluZ3NEZWZhdWx0RGV2aWNlRW51bSA9IHtcbiAgICBTUEVBS0VSOiAnc3BlYWtlcicsXG4gICAgRUFSUElFQ0U6ICdlYXJwaWVjZSdcbn07XG4vKipcbiAqIEBleHBvcnRcbiAqL1xuY29uc3QgVmlkZW9BdWRpb1NldHRpbmdzUmVxdWVzdERlZmF1bHREZXZpY2VFbnVtID0ge1xuICAgIFNQRUFLRVI6ICdzcGVha2VyJyxcbiAgICBFQVJQSUVDRTogJ2VhcnBpZWNlJ1xufTtcbi8qKlxuICogQGV4cG9ydFxuICovXG5jb25zdCBWaWRlb0NyZWF0ZURldmljZVJlcXVlc3RQdXNoUHJvdmlkZXJFbnVtID0ge1xuICAgIEZJUkVCQVNFOiAnZmlyZWJhc2UnLFxuICAgIEFQTjogJ2FwbicsXG4gICAgSFVBV0VJOiAnaHVhd2VpJyxcbiAgICBYSUFPTUk6ICd4aWFvbWknXG59O1xuLyoqXG4gKiBAZXhwb3J0XG4gKi9cbmNvbnN0IFZpZGVvTGF5b3V0U2V0dGluZ3NOYW1lRW51bSA9IHtcbiAgICBTUE9UTElHSFQ6ICdzcG90bGlnaHQnLFxuICAgIEdSSUQ6ICdncmlkJyxcbiAgICBTSU5HTEVfUEFSVElDSVBBTlQ6ICdzaW5nbGUtcGFydGljaXBhbnQnLFxuICAgIE1PQklMRTogJ21vYmlsZScsXG4gICAgQ1VTVE9NOiAnY3VzdG9tJ1xufTtcbi8qKlxuICogQGV4cG9ydFxuICovXG5jb25zdCBWaWRlb0xheW91dFNldHRpbmdzUmVxdWVzdE5hbWVFbnVtID0ge1xuICAgIFNQT1RMSUdIVDogJ3Nwb3RsaWdodCcsXG4gICAgR1JJRDogJ2dyaWQnLFxuICAgIFNJTkdMRV9QQVJUSUNJUEFOVDogJ3NpbmdsZS1wYXJ0aWNpcGFudCcsXG4gICAgTU9CSUxFOiAnbW9iaWxlJyxcbiAgICBDVVNUT006ICdjdXN0b20nXG59O1xuLyoqXG4gKiBBbGwgcG9zc2liaWxpdHkgb2Ygc3RyaW5nIHRvIHVzZVxuICogQGV4cG9ydFxuICovXG5jb25zdCBWaWRlb093bkNhcGFiaWxpdHkgPSB7XG4gICAgQkxPQ0tfVVNFUlM6ICdibG9jay11c2VycycsXG4gICAgQ1JFQVRFX0NBTEw6ICdjcmVhdGUtY2FsbCcsXG4gICAgQ1JFQVRFX1JFQUNUSU9OOiAnY3JlYXRlLXJlYWN0aW9uJyxcbiAgICBFTkRfQ0FMTDogJ2VuZC1jYWxsJyxcbiAgICBKT0lOX0JBQ0tTVEFHRTogJ2pvaW4tYmFja3N0YWdlJyxcbiAgICBKT0lOX0NBTEw6ICdqb2luLWNhbGwnLFxuICAgIEpPSU5fRU5ERURfQ0FMTDogJ2pvaW4tZW5kZWQtY2FsbCcsXG4gICAgTVVURV9VU0VSUzogJ211dGUtdXNlcnMnLFxuICAgIFBJTl9GT1JfRVZFUllPTkU6ICdwaW4tZm9yLWV2ZXJ5b25lJyxcbiAgICBSRUFEX0NBTEw6ICdyZWFkLWNhbGwnLFxuICAgIFJFTU9WRV9DQUxMX01FTUJFUjogJ3JlbW92ZS1jYWxsLW1lbWJlcicsXG4gICAgU0NSRUVOU0hBUkU6ICdzY3JlZW5zaGFyZScsXG4gICAgU0VORF9BVURJTzogJ3NlbmQtYXVkaW8nLFxuICAgIFNFTkRfVklERU86ICdzZW5kLXZpZGVvJyxcbiAgICBTVEFSVF9CUk9BRENBU1RfQ0FMTDogJ3N0YXJ0LWJyb2FkY2FzdC1jYWxsJyxcbiAgICBTVEFSVF9SRUNPUkRfQ0FMTDogJ3N0YXJ0LXJlY29yZC1jYWxsJyxcbiAgICBTVEFSVF9UUkFOU0NSSVBUSU9OX0NBTEw6ICdzdGFydC10cmFuc2NyaXB0aW9uLWNhbGwnLFxuICAgIFNUT1BfQlJPQURDQVNUX0NBTEw6ICdzdG9wLWJyb2FkY2FzdC1jYWxsJyxcbiAgICBTVE9QX1JFQ09SRF9DQUxMOiAnc3RvcC1yZWNvcmQtY2FsbCcsXG4gICAgU1RPUF9UUkFOU0NSSVBUSU9OX0NBTEw6ICdzdG9wLXRyYW5zY3JpcHRpb24tY2FsbCcsXG4gICAgVVBEQVRFX0NBTEw6ICd1cGRhdGUtY2FsbCcsXG4gICAgVVBEQVRFX0NBTExfTUVNQkVSOiAndXBkYXRlLWNhbGwtbWVtYmVyJyxcbiAgICBVUERBVEVfQ0FMTF9QRVJNSVNTSU9OUzogJ3VwZGF0ZS1jYWxsLXBlcm1pc3Npb25zJyxcbiAgICBVUERBVEVfQ0FMTF9TRVRUSU5HUzogJ3VwZGF0ZS1jYWxsLXNldHRpbmdzJ1xufTtcbi8qKlxuICogQGV4cG9ydFxuICovXG5jb25zdCBWaWRlb1JlY29yZFNldHRpbmdzUmVxdWVzdE1vZGVFbnVtID0ge1xuICAgIEFWQUlMQUJMRTogJ2F2YWlsYWJsZScsXG4gICAgRElTQUJMRUQ6ICdkaXNhYmxlZCcsXG4gICAgQVVUT19PTjogJ2F1dG8tb24nXG59O1xuLyoqXG4gKiBAZXhwb3J0XG4gKi9cbmNvbnN0IFZpZGVvUmVjb3JkU2V0dGluZ3NSZXF1ZXN0UXVhbGl0eUVudW0gPSB7XG4gICAgXzM2MFA6ICczNjBwJyxcbiAgICBfNDgwUDogJzQ4MHAnLFxuICAgIF83MjBQOiAnNzIwcCcsXG4gICAgXzEwODBQOiAnMTA4MHAnLFxuICAgIF8xNDQwUDogJzE0NDBwJ1xufTtcbi8qKlxuICogQGV4cG9ydFxuICovXG5jb25zdCBWaWRlb1RyYW5zY3JpcHRpb25TZXR0aW5nc01vZGVFbnVtID0ge1xuICAgIEFWQUlMQUJMRTogJ2F2YWlsYWJsZScsXG4gICAgRElTQUJMRUQ6ICdkaXNhYmxlZCcsXG4gICAgQVVUT19PTjogJ2F1dG8tb24nXG59O1xuLyoqXG4gKiBAZXhwb3J0XG4gKi9cbmNvbnN0IFZpZGVvVHJhbnNjcmlwdGlvblNldHRpbmdzUmVxdWVzdE1vZGVFbnVtID0ge1xuICAgIEFWQUlMQUJMRTogJ2F2YWlsYWJsZScsXG4gICAgRElTQUJMRUQ6ICdkaXNhYmxlZCcsXG4gICAgQVVUT19PTjogJ2F1dG8tb24nXG59O1xuLyoqXG4gKiBAZXhwb3J0XG4gKi9cbmNvbnN0IFZpZGVvVmlkZW9TZXR0aW5nc0NhbWVyYUZhY2luZ0VudW0gPSB7XG4gICAgRlJPTlQ6ICdmcm9udCcsXG4gICAgQkFDSzogJ2JhY2snLFxuICAgIEVYVEVSTkFMOiAnZXh0ZXJuYWwnXG59O1xuLyoqXG4gKiBAZXhwb3J0XG4gKi9cbmNvbnN0IFZpZGVvVmlkZW9TZXR0aW5nc1JlcXVlc3RDYW1lcmFGYWNpbmdFbnVtID0ge1xuICAgIEZST05UOiAnZnJvbnQnLFxuICAgIEJBQ0s6ICdiYWNrJyxcbiAgICBFWFRFUk5BTDogJ2V4dGVybmFsJ1xufTtcblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi5cclxuXHJcblBlcm1pc3Npb24gdG8gdXNlLCBjb3B5LCBtb2RpZnksIGFuZC9vciBkaXN0cmlidXRlIHRoaXMgc29mdHdhcmUgZm9yIGFueVxyXG5wdXJwb3NlIHdpdGggb3Igd2l0aG91dCBmZWUgaXMgaGVyZWJ5IGdyYW50ZWQuXHJcblxyXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiIEFORCBUSEUgQVVUSE9SIERJU0NMQUlNUyBBTEwgV0FSUkFOVElFUyBXSVRIXHJcblJFR0FSRCBUTyBUSElTIFNPRlRXQVJFIElOQ0xVRElORyBBTEwgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWVxyXG5BTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsXHJcbklORElSRUNULCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgT1IgQU5ZIERBTUFHRVMgV0hBVFNPRVZFUiBSRVNVTFRJTkcgRlJPTVxyXG5MT1NTIE9GIFVTRSwgREFUQSBPUiBQUk9GSVRTLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgTkVHTElHRU5DRSBPUlxyXG5PVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SXHJcblBFUkZPUk1BTkNFIE9GIFRISVMgU09GVFdBUkUuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcbi8qIGdsb2JhbCBSZWZsZWN0LCBQcm9taXNlICovXHJcblxyXG5cclxuZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xyXG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufVxuXG4vKiB0c2xpbnQ6ZGlzYWJsZSAqL1xuLyogZXNsaW50LWRpc2FibGUgKi9cbi8qKlxuICogU3RyZWFtIENoYXQgQVBJXG4gKiBObyBkZXNjcmlwdGlvbiBwcm92aWRlZCAoZ2VuZXJhdGVkIGJ5IE9wZW5hcGkgR2VuZXJhdG9yIGh0dHBzOi8vZ2l0aHViLmNvbS9vcGVuYXBpdG9vbHMvb3BlbmFwaS1nZW5lcmF0b3IpXG4gKlxuICogVGhlIHZlcnNpb24gb2YgdGhlIE9wZW5BUEkgZG9jdW1lbnQ6IHY5Mi43LjBcbiAqXG4gKlxuICogTk9URTogVGhpcyBjbGFzcyBpcyBhdXRvIGdlbmVyYXRlZCBieSBPcGVuQVBJIEdlbmVyYXRvciAoaHR0cHM6Ly9vcGVuYXBpLWdlbmVyYXRvci50ZWNoKS5cbiAqIGh0dHBzOi8vb3BlbmFwaS1nZW5lcmF0b3IudGVjaFxuICogRG8gbm90IGVkaXQgdGhlIGNsYXNzIG1hbnVhbGx5LlxuICovXG5jb25zdCBCQVNFX1BBVEgkMSA9IFwiaHR0cHM6Ly9jaGF0LnN0cmVhbS1pby1hcGkuY29tXCIucmVwbGFjZSgvXFwvKyQvLCBcIlwiKTtcbmxldCBDb25maWd1cmF0aW9uJDEgPSBjbGFzcyBDb25maWd1cmF0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcihjb25maWd1cmF0aW9uID0ge30pIHtcbiAgICAgICAgdGhpcy5jb25maWd1cmF0aW9uID0gY29uZmlndXJhdGlvbjtcbiAgICB9XG4gICAgc2V0IGNvbmZpZyhjb25maWd1cmF0aW9uKSB7XG4gICAgICAgIHRoaXMuY29uZmlndXJhdGlvbiA9IGNvbmZpZ3VyYXRpb247XG4gICAgfVxuICAgIGdldCBiYXNlUGF0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aCAhPSBudWxsID8gdGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRoIDogQkFTRV9QQVRIJDE7XG4gICAgfVxuICAgIGdldCBmZXRjaEFwaSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uZmlndXJhdGlvbi5mZXRjaEFwaTtcbiAgICB9XG4gICAgZ2V0IG1pZGRsZXdhcmUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbmZpZ3VyYXRpb24ubWlkZGxld2FyZSB8fCBbXTtcbiAgICB9XG4gICAgZ2V0IHF1ZXJ5UGFyYW1zU3RyaW5naWZ5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25maWd1cmF0aW9uLnF1ZXJ5UGFyYW1zU3RyaW5naWZ5IHx8IHF1ZXJ5c3RyaW5nJDE7XG4gICAgfVxuICAgIGdldCB1c2VybmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uZmlndXJhdGlvbi51c2VybmFtZTtcbiAgICB9XG4gICAgZ2V0IHBhc3N3b3JkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25maWd1cmF0aW9uLnBhc3N3b3JkO1xuICAgIH1cbiAgICBnZXQgYXBpS2V5KCkge1xuICAgICAgICBjb25zdCBhcGlLZXkgPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5O1xuICAgICAgICBpZiAoYXBpS2V5KSB7XG4gICAgICAgICAgICByZXR1cm4gdHlwZW9mIGFwaUtleSA9PT0gJ2Z1bmN0aW9uJyA/IGFwaUtleSA6ICgpID0+IGFwaUtleTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBnZXQgYWNjZXNzVG9rZW4oKSB7XG4gICAgICAgIGNvbnN0IGFjY2Vzc1Rva2VuID0gdGhpcy5jb25maWd1cmF0aW9uLmFjY2Vzc1Rva2VuO1xuICAgICAgICBpZiAoYWNjZXNzVG9rZW4pIHtcbiAgICAgICAgICAgIHJldHVybiB0eXBlb2YgYWNjZXNzVG9rZW4gPT09ICdmdW5jdGlvbicgPyBhY2Nlc3NUb2tlbiA6ICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHsgcmV0dXJuIGFjY2Vzc1Rva2VuOyB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBnZXQgaGVhZGVycygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uZmlndXJhdGlvbi5oZWFkZXJzO1xuICAgIH1cbiAgICBnZXQgY3JlZGVudGlhbHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbmZpZ3VyYXRpb24uY3JlZGVudGlhbHM7XG4gICAgfVxufTtcbmNvbnN0IERlZmF1bHRDb25maWckMSA9IG5ldyBDb25maWd1cmF0aW9uJDEoKTtcbi8qKlxuICogVGhpcyBpcyB0aGUgYmFzZSBjbGFzcyBmb3IgYWxsIGdlbmVyYXRlZCBBUEkgY2xhc3Nlcy5cbiAqL1xubGV0IEJhc2VBUEkkMSA9IGNsYXNzIEJhc2VBUEkge1xuICAgIGNvbnN0cnVjdG9yKGNvbmZpZ3VyYXRpb24gPSBEZWZhdWx0Q29uZmlnJDEpIHtcbiAgICAgICAgdGhpcy5jb25maWd1cmF0aW9uID0gY29uZmlndXJhdGlvbjtcbiAgICAgICAgdGhpcy5mZXRjaEFwaSA9ICh1cmwsIGluaXQpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGxldCBmZXRjaFBhcmFtcyA9IHsgdXJsLCBpbml0IH07XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG1pZGRsZXdhcmUgb2YgdGhpcy5taWRkbGV3YXJlKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1pZGRsZXdhcmUucHJlKSB7XG4gICAgICAgICAgICAgICAgICAgIGZldGNoUGFyYW1zID0gKHlpZWxkIG1pZGRsZXdhcmUucHJlKE9iamVjdC5hc3NpZ24oeyBmZXRjaDogdGhpcy5mZXRjaEFwaSB9LCBmZXRjaFBhcmFtcykpKSB8fCBmZXRjaFBhcmFtcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgcmVzcG9uc2UgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlID0geWllbGQgKHRoaXMuY29uZmlndXJhdGlvbi5mZXRjaEFwaSB8fCBmZXRjaCkoZmV0Y2hQYXJhbXMudXJsLCBmZXRjaFBhcmFtcy5pbml0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBtaWRkbGV3YXJlIG9mIHRoaXMubWlkZGxld2FyZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAobWlkZGxld2FyZS5vbkVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9ICh5aWVsZCBtaWRkbGV3YXJlLm9uRXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZldGNoOiB0aGlzLmZldGNoQXBpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogZmV0Y2hQYXJhbXMudXJsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluaXQ6IGZldGNoUGFyYW1zLmluaXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2U6IHJlc3BvbnNlID8gcmVzcG9uc2UuY2xvbmUoKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKSB8fCByZXNwb25zZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRmV0Y2hFcnJvciQxKGUsICdUaGUgcmVxdWVzdCBmYWlsZWQgYW5kIHRoZSBpbnRlcmNlcHRvcnMgZGlkIG5vdCByZXR1cm4gYW4gYWx0ZXJuYXRpdmUgcmVzcG9uc2UnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG1pZGRsZXdhcmUgb2YgdGhpcy5taWRkbGV3YXJlKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1pZGRsZXdhcmUucG9zdCkge1xuICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9ICh5aWVsZCBtaWRkbGV3YXJlLnBvc3Qoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZmV0Y2g6IHRoaXMuZmV0Y2hBcGksXG4gICAgICAgICAgICAgICAgICAgICAgICB1cmw6IGZldGNoUGFyYW1zLnVybCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluaXQ6IGZldGNoUGFyYW1zLmluaXQsXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZTogcmVzcG9uc2UuY2xvbmUoKSxcbiAgICAgICAgICAgICAgICAgICAgfSkpIHx8IHJlc3BvbnNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubWlkZGxld2FyZSA9IGNvbmZpZ3VyYXRpb24ubWlkZGxld2FyZTtcbiAgICB9XG4gICAgd2l0aE1pZGRsZXdhcmUoLi4ubWlkZGxld2FyZXMpIHtcbiAgICAgICAgY29uc3QgbmV4dCA9IHRoaXMuY2xvbmUoKTtcbiAgICAgICAgbmV4dC5taWRkbGV3YXJlID0gbmV4dC5taWRkbGV3YXJlLmNvbmNhdCguLi5taWRkbGV3YXJlcyk7XG4gICAgICAgIHJldHVybiBuZXh0O1xuICAgIH1cbiAgICB3aXRoUHJlTWlkZGxld2FyZSguLi5wcmVNaWRkbGV3YXJlcykge1xuICAgICAgICBjb25zdCBtaWRkbGV3YXJlcyA9IHByZU1pZGRsZXdhcmVzLm1hcCgocHJlKSA9PiAoeyBwcmUgfSkpO1xuICAgICAgICByZXR1cm4gdGhpcy53aXRoTWlkZGxld2FyZSguLi5taWRkbGV3YXJlcyk7XG4gICAgfVxuICAgIHdpdGhQb3N0TWlkZGxld2FyZSguLi5wb3N0TWlkZGxld2FyZXMpIHtcbiAgICAgICAgY29uc3QgbWlkZGxld2FyZXMgPSBwb3N0TWlkZGxld2FyZXMubWFwKChwb3N0KSA9PiAoeyBwb3N0IH0pKTtcbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aE1pZGRsZXdhcmUoLi4ubWlkZGxld2FyZXMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGVjayBpZiB0aGUgZ2l2ZW4gTUlNRSBpcyBhIEpTT04gTUlNRS5cbiAgICAgKiBKU09OIE1JTUUgZXhhbXBsZXM6XG4gICAgICogICBhcHBsaWNhdGlvbi9qc29uXG4gICAgICogICBhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PVVURjhcbiAgICAgKiAgIEFQUExJQ0FUSU9OL0pTT05cbiAgICAgKiAgIGFwcGxpY2F0aW9uL3ZuZC5jb21wYW55K2pzb25cbiAgICAgKiBAcGFyYW0gbWltZSAtIE1JTUUgKE11bHRpcHVycG9zZSBJbnRlcm5ldCBNYWlsIEV4dGVuc2lvbnMpXG4gICAgICogQHJldHVybiBUcnVlIGlmIHRoZSBnaXZlbiBNSU1FIGlzIEpTT04sIGZhbHNlIG90aGVyd2lzZS5cbiAgICAgKi9cbiAgICBpc0pzb25NaW1lKG1pbWUpIHtcbiAgICAgICAgaWYgKCFtaW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEJhc2VBUEkuanNvblJlZ2V4LnRlc3QobWltZSk7XG4gICAgfVxuICAgIHJlcXVlc3QoY29udGV4dCwgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgeyB1cmwsIGluaXQgfSA9IHlpZWxkIHRoaXMuY3JlYXRlRmV0Y2hQYXJhbXMoY29udGV4dCwgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuZmV0Y2hBcGkodXJsLCBpbml0KTtcbiAgICAgICAgICAgIGlmIChyZXNwb25zZSAmJiAocmVzcG9uc2Uuc3RhdHVzID49IDIwMCAmJiByZXNwb25zZS5zdGF0dXMgPCAzMDApKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IkMShyZXNwb25zZSwgJ1Jlc3BvbnNlIHJldHVybmVkIGFuIGVycm9yIGNvZGUnKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNyZWF0ZUZldGNoUGFyYW1zKGNvbnRleHQsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGxldCB1cmwgPSB0aGlzLmNvbmZpZ3VyYXRpb24uYmFzZVBhdGggKyBjb250ZXh0LnBhdGg7XG4gICAgICAgICAgICBpZiAoY29udGV4dC5xdWVyeSAhPT0gdW5kZWZpbmVkICYmIE9iamVjdC5rZXlzKGNvbnRleHQucXVlcnkpLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgICAgIC8vIG9ubHkgYWRkIHRoZSBxdWVyeXN0cmluZyB0byB0aGUgVVJMIGlmIHRoZXJlIGFyZSBxdWVyeSBwYXJhbWV0ZXJzLlxuICAgICAgICAgICAgICAgIC8vIHRoaXMgaXMgZG9uZSB0byBhdm9pZCB1cmxzIGVuZGluZyB3aXRoIGEgXCI/XCIgY2hhcmFjdGVyIHdoaWNoIGJ1Z2d5IHdlYnNlcnZlcnNcbiAgICAgICAgICAgICAgICAvLyBkbyBub3QgaGFuZGxlIGNvcnJlY3RseSBzb21ldGltZXMuXG4gICAgICAgICAgICAgICAgdXJsICs9ICc/JyArIHRoaXMuY29uZmlndXJhdGlvbi5xdWVyeVBhcmFtc1N0cmluZ2lmeShjb250ZXh0LnF1ZXJ5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGhlYWRlcnMgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmNvbmZpZ3VyYXRpb24uaGVhZGVycywgY29udGV4dC5oZWFkZXJzKTtcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKGhlYWRlcnMpLmZvckVhY2goa2V5ID0+IGhlYWRlcnNba2V5XSA9PT0gdW5kZWZpbmVkID8gZGVsZXRlIGhlYWRlcnNba2V5XSA6IHt9KTtcbiAgICAgICAgICAgIGNvbnN0IGluaXRPdmVycmlkZUZuID0gdHlwZW9mIGluaXRPdmVycmlkZXMgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgICAgICAgICAgID8gaW5pdE92ZXJyaWRlc1xuICAgICAgICAgICAgICAgIDogKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkgeyByZXR1cm4gaW5pdE92ZXJyaWRlczsgfSk7XG4gICAgICAgICAgICBjb25zdCBpbml0UGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogY29udGV4dC5tZXRob2QsXG4gICAgICAgICAgICAgICAgaGVhZGVycyxcbiAgICAgICAgICAgICAgICBib2R5OiBjb250ZXh0LmJvZHksXG4gICAgICAgICAgICAgICAgY3JlZGVudGlhbHM6IHRoaXMuY29uZmlndXJhdGlvbi5jcmVkZW50aWFscyxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBvdmVycmlkZGVuSW5pdCA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgaW5pdFBhcmFtcyksICh5aWVsZCBpbml0T3ZlcnJpZGVGbih7XG4gICAgICAgICAgICAgICAgaW5pdDogaW5pdFBhcmFtcyxcbiAgICAgICAgICAgICAgICBjb250ZXh0LFxuICAgICAgICAgICAgfSkpKTtcbiAgICAgICAgICAgIGNvbnN0IGluaXQgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG92ZXJyaWRkZW5Jbml0KSwgeyBib2R5OiBpc0Zvcm1EYXRhJDEob3ZlcnJpZGRlbkluaXQuYm9keSkgfHxcbiAgICAgICAgICAgICAgICAgICAgb3ZlcnJpZGRlbkluaXQuYm9keSBpbnN0YW5jZW9mIFVSTFNlYXJjaFBhcmFtcyB8fFxuICAgICAgICAgICAgICAgICAgICBpc0Jsb2IkMShvdmVycmlkZGVuSW5pdC5ib2R5KVxuICAgICAgICAgICAgICAgICAgICA/IG92ZXJyaWRkZW5Jbml0LmJvZHlcbiAgICAgICAgICAgICAgICAgICAgOiBKU09OLnN0cmluZ2lmeShvdmVycmlkZGVuSW5pdC5ib2R5KSB9KTtcbiAgICAgICAgICAgIHJldHVybiB7IHVybCwgaW5pdCB9O1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgc2hhbGxvdyBjbG9uZSBvZiBgdGhpc2AgYnkgY29uc3RydWN0aW5nIGEgbmV3IGluc3RhbmNlXG4gICAgICogYW5kIHRoZW4gc2hhbGxvdyBjbG9uaW5nIGRhdGEgbWVtYmVycy5cbiAgICAgKi9cbiAgICBjbG9uZSgpIHtcbiAgICAgICAgY29uc3QgY29uc3RydWN0b3IgPSB0aGlzLmNvbnN0cnVjdG9yO1xuICAgICAgICBjb25zdCBuZXh0ID0gbmV3IGNvbnN0cnVjdG9yKHRoaXMuY29uZmlndXJhdGlvbik7XG4gICAgICAgIG5leHQubWlkZGxld2FyZSA9IHRoaXMubWlkZGxld2FyZS5zbGljZSgpO1xuICAgICAgICByZXR1cm4gbmV4dDtcbiAgICB9XG59O1xuQmFzZUFQSSQxLmpzb25SZWdleCA9IG5ldyBSZWdFeHAoJ14oOj9hcHBsaWNhdGlvblxcL2pzb258W147LyBcXHRdK1xcL1teOy8gXFx0XStbK11qc29uKVsgXFx0XSooOj87LiopPyQnLCAnaScpO1xuZnVuY3Rpb24gaXNCbG9iJDEodmFsdWUpIHtcbiAgICByZXR1cm4gdHlwZW9mIEJsb2IgIT09ICd1bmRlZmluZWQnICYmIHZhbHVlIGluc3RhbmNlb2YgQmxvYjtcbn1cbmZ1bmN0aW9uIGlzRm9ybURhdGEkMSh2YWx1ZSkge1xuICAgIHJldHVybiB0eXBlb2YgRm9ybURhdGEgIT09IFwidW5kZWZpbmVkXCIgJiYgdmFsdWUgaW5zdGFuY2VvZiBGb3JtRGF0YTtcbn1cbmxldCBSZXNwb25zZUVycm9yJDEgPSBjbGFzcyBSZXNwb25zZUVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKHJlc3BvbnNlLCBtc2cpIHtcbiAgICAgICAgc3VwZXIobXNnKTtcbiAgICAgICAgdGhpcy5yZXNwb25zZSA9IHJlc3BvbnNlO1xuICAgICAgICB0aGlzLm5hbWUgPSBcIlJlc3BvbnNlRXJyb3JcIjtcbiAgICB9XG59O1xubGV0IEZldGNoRXJyb3IkMSA9IGNsYXNzIEZldGNoRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IoY2F1c2UsIG1zZykge1xuICAgICAgICBzdXBlcihtc2cpO1xuICAgICAgICB0aGlzLmNhdXNlID0gY2F1c2U7XG4gICAgICAgIHRoaXMubmFtZSA9IFwiRmV0Y2hFcnJvclwiO1xuICAgIH1cbn07XG5sZXQgUmVxdWlyZWRFcnJvciQxID0gY2xhc3MgUmVxdWlyZWRFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihmaWVsZCwgbXNnKSB7XG4gICAgICAgIHN1cGVyKG1zZyk7XG4gICAgICAgIHRoaXMuZmllbGQgPSBmaWVsZDtcbiAgICAgICAgdGhpcy5uYW1lID0gXCJSZXF1aXJlZEVycm9yXCI7XG4gICAgfVxufTtcbmNvbnN0IENPTExFQ1RJT05fRk9STUFUUyA9IHtcbiAgICBjc3Y6IFwiLFwiLFxuICAgIHNzdjogXCIgXCIsXG4gICAgdHN2OiBcIlxcdFwiLFxuICAgIHBpcGVzOiBcInxcIixcbn07XG5mdW5jdGlvbiBxdWVyeXN0cmluZyQxKHBhcmFtcywgcHJlZml4ID0gJycpIHtcbiAgICByZXR1cm4gT2JqZWN0LmtleXMocGFyYW1zKVxuICAgICAgICAubWFwKGtleSA9PiBxdWVyeXN0cmluZ1NpbmdsZUtleSQxKGtleSwgcGFyYW1zW2tleV0sIHByZWZpeCkpXG4gICAgICAgIC5maWx0ZXIocGFydCA9PiBwYXJ0Lmxlbmd0aCA+IDApXG4gICAgICAgIC5qb2luKCcmJyk7XG59XG5mdW5jdGlvbiBxdWVyeXN0cmluZ1NpbmdsZUtleSQxKGtleSwgdmFsdWUsIGtleVByZWZpeCA9ICcnKSB7XG4gICAgY29uc3QgZnVsbEtleSA9IGtleVByZWZpeCArIChrZXlQcmVmaXgubGVuZ3RoID8gYFske2tleX1dYCA6IGtleSk7XG4gICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgY29uc3QgbXVsdGlWYWx1ZSA9IHZhbHVlLm1hcChzaW5nbGVWYWx1ZSA9PiBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHNpbmdsZVZhbHVlKSkpXG4gICAgICAgICAgICAuam9pbihgJiR7ZW5jb2RlVVJJQ29tcG9uZW50KGZ1bGxLZXkpfT1gKTtcbiAgICAgICAgcmV0dXJuIGAke2VuY29kZVVSSUNvbXBvbmVudChmdWxsS2V5KX09JHttdWx0aVZhbHVlfWA7XG4gICAgfVxuICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIFNldCkge1xuICAgICAgICBjb25zdCB2YWx1ZUFzQXJyYXkgPSBBcnJheS5mcm9tKHZhbHVlKTtcbiAgICAgICAgcmV0dXJuIHF1ZXJ5c3RyaW5nU2luZ2xlS2V5JDEoa2V5LCB2YWx1ZUFzQXJyYXksIGtleVByZWZpeCk7XG4gICAgfVxuICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICAgICAgcmV0dXJuIGAke2VuY29kZVVSSUNvbXBvbmVudChmdWxsS2V5KX09JHtlbmNvZGVVUklDb21wb25lbnQodmFsdWUudG9JU09TdHJpbmcoKSl9YDtcbiAgICB9XG4gICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgT2JqZWN0KSB7XG4gICAgICAgIHJldHVybiBxdWVyeXN0cmluZyQxKHZhbHVlLCBmdWxsS2V5KTtcbiAgICB9XG4gICAgcmV0dXJuIGAke2VuY29kZVVSSUNvbXBvbmVudChmdWxsS2V5KX09JHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHZhbHVlKSl9YDtcbn1cbmZ1bmN0aW9uIGNhbkNvbnN1bWVGb3JtKGNvbnN1bWVzKSB7XG4gICAgZm9yIChjb25zdCBjb25zdW1lIG9mIGNvbnN1bWVzKSB7XG4gICAgICAgIGlmICgnbXVsdGlwYXJ0L2Zvcm0tZGF0YScgPT09IGNvbnN1bWUuY29udGVudFR5cGUpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmxldCBKU09OQXBpUmVzcG9uc2UkMSA9IGNsYXNzIEpTT05BcGlSZXNwb25zZSB7XG4gICAgY29uc3RydWN0b3IocmF3LCB0cmFuc2Zvcm1lciA9IChqc29uVmFsdWUpID0+IGpzb25WYWx1ZSkge1xuICAgICAgICB0aGlzLnJhdyA9IHJhdztcbiAgICAgICAgdGhpcy50cmFuc2Zvcm1lciA9IHRyYW5zZm9ybWVyO1xuICAgIH1cbiAgICB2YWx1ZSgpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRyYW5zZm9ybWVyKHlpZWxkIHRoaXMucmF3Lmpzb24oKSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn07XG5sZXQgVm9pZEFwaVJlc3BvbnNlJDEgPSBjbGFzcyBWb2lkQXBpUmVzcG9uc2Uge1xuICAgIGNvbnN0cnVjdG9yKHJhdykge1xuICAgICAgICB0aGlzLnJhdyA9IHJhdztcbiAgICB9XG4gICAgdmFsdWUoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9KTtcbiAgICB9XG59O1xuXG4vKiB0c2xpbnQ6ZGlzYWJsZSAqL1xuLyogZXNsaW50LWRpc2FibGUgKi9cbi8qKlxuICogU3RyZWFtIENoYXQgQVBJXG4gKiBObyBkZXNjcmlwdGlvbiBwcm92aWRlZCAoZ2VuZXJhdGVkIGJ5IE9wZW5hcGkgR2VuZXJhdG9yIGh0dHBzOi8vZ2l0aHViLmNvbS9vcGVuYXBpdG9vbHMvb3BlbmFwaS1nZW5lcmF0b3IpXG4gKlxuICogVGhlIHZlcnNpb24gb2YgdGhlIE9wZW5BUEkgZG9jdW1lbnQ6IHY5Mi43LjBcbiAqXG4gKlxuICogTk9URTogVGhpcyBjbGFzcyBpcyBhdXRvIGdlbmVyYXRlZCBieSBPcGVuQVBJIEdlbmVyYXRvciAoaHR0cHM6Ly9vcGVuYXBpLWdlbmVyYXRvci50ZWNoKS5cbiAqIGh0dHBzOi8vb3BlbmFwaS1nZW5lcmF0b3IudGVjaFxuICogRG8gbm90IGVkaXQgdGhlIGNsYXNzIG1hbnVhbGx5LlxuICovXG4vKipcbiAqXG4gKi9cbmNsYXNzIENoYW5uZWxUeXBlc0FwaSBleHRlbmRzIEJhc2VBUEkkMSB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBuZXcgY2hhbm5lbCB0eXBlXG4gICAgICogQ3JlYXRlIGNoYW5uZWwgdHlwZVxuICAgICAqL1xuICAgIGNyZWF0ZUNoYW5uZWxUeXBlUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMuY3JlYXRlQ2hhbm5lbFR5cGVSZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3RQYXJhbWV0ZXJzLmNyZWF0ZUNoYW5uZWxUeXBlUmVxdWVzdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IkMSgnY3JlYXRlQ2hhbm5lbFR5cGVSZXF1ZXN0JywgJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy5jcmVhdGVDaGFubmVsVHlwZVJlcXVlc3Qgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBjcmVhdGVDaGFubmVsVHlwZS4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgY29uc3QgaGVhZGVyUGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1snQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbic7XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiU3RyZWFtLUF1dGgtVHlwZVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJTdHJlYW0tQXV0aC1UeXBlXCIpOyAvLyBzdHJlYW0tYXV0aC10eXBlIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbXCJhcGlfa2V5XCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcImFwaV9rZXlcIik7IC8vIGFwaV9rZXkgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJBdXRob3JpemF0aW9uXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIkF1dGhvcml6YXRpb25cIik7IC8vIEpXVCBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIHBhdGg6IGAvY2hhbm5lbHR5cGVzYCxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgYm9keTogcmVxdWVzdFBhcmFtZXRlcnMuY3JlYXRlQ2hhbm5lbFR5cGVSZXF1ZXN0LFxuICAgICAgICAgICAgfSwgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEpTT05BcGlSZXNwb25zZSQxKHJlc3BvbnNlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgbmV3IGNoYW5uZWwgdHlwZVxuICAgICAqIENyZWF0ZSBjaGFubmVsIHR5cGVcbiAgICAgKi9cbiAgICBjcmVhdGVDaGFubmVsVHlwZShyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLmNyZWF0ZUNoYW5uZWxUeXBlUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCByZXNwb25zZS52YWx1ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVsZXRlcyBjaGFubmVsIHR5cGVcbiAgICAgKiBEZWxldGUgY2hhbm5lbCB0eXBlXG4gICAgICovXG4gICAgZGVsZXRlQ2hhbm5lbFR5cGVSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy5uYW1lID09PSBudWxsIHx8IHJlcXVlc3RQYXJhbWV0ZXJzLm5hbWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZXF1aXJlZEVycm9yJDEoJ25hbWUnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLm5hbWUgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBkZWxldGVDaGFubmVsVHlwZS4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgY29uc3QgaGVhZGVyUGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIlN0cmVhbS1BdXRoLVR5cGVcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiU3RyZWFtLUF1dGgtVHlwZVwiKTsgLy8gc3RyZWFtLWF1dGgtdHlwZSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzW1wiYXBpX2tleVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJhcGlfa2V5XCIpOyAvLyBhcGlfa2V5IGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiQXV0aG9yaXphdGlvblwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJBdXRob3JpemF0aW9uXCIpOyAvLyBKV1QgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICBwYXRoOiBgL2NoYW5uZWx0eXBlcy97bmFtZX1gLnJlcGxhY2UoYHske1wibmFtZVwifX1gLCBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJlcXVlc3RQYXJhbWV0ZXJzLm5hbWUpKSksXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICB9LCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgSlNPTkFwaVJlc3BvbnNlJDEocmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVsZXRlcyBjaGFubmVsIHR5cGVcbiAgICAgKiBEZWxldGUgY2hhbm5lbCB0eXBlXG4gICAgICovXG4gICAgZGVsZXRlQ2hhbm5lbFR5cGUocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5kZWxldGVDaGFubmVsVHlwZVJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4geWllbGQgcmVzcG9uc2UudmFsdWUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgY2hhbm5lbCB0eXBlXG4gICAgICogR2V0IGNoYW5uZWwgdHlwZVxuICAgICAqL1xuICAgIGdldENoYW5uZWxUeXBlUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMubmFtZSA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy5uYW1lID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvciQxKCduYW1lJywgJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy5uYW1lIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0Q2hhbm5lbFR5cGUuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlclBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJTdHJlYW0tQXV0aC1UeXBlXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIlN0cmVhbS1BdXRoLVR5cGVcIik7IC8vIHN0cmVhbS1hdXRoLXR5cGUgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1tcImFwaV9rZXlcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiYXBpX2tleVwiKTsgLy8gYXBpX2tleSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiQXV0aG9yaXphdGlvblwiKTsgLy8gSldUIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgcGF0aDogYC9jaGFubmVsdHlwZXMve25hbWV9YC5yZXBsYWNlKGB7JHtcIm5hbWVcIn19YCwgZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhyZXF1ZXN0UGFyYW1ldGVycy5uYW1lKSkpLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVyUGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBxdWVyeTogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgfSwgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEpTT05BcGlSZXNwb25zZSQxKHJlc3BvbnNlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgY2hhbm5lbCB0eXBlXG4gICAgICogR2V0IGNoYW5uZWwgdHlwZVxuICAgICAqL1xuICAgIGdldENoYW5uZWxUeXBlKHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuZ2V0Q2hhbm5lbFR5cGVSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIHlpZWxkIHJlc3BvbnNlLnZhbHVlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMaXN0cyBhbGwgYXZhaWxhYmxlIGNoYW5uZWwgdHlwZXNcbiAgICAgKiBMaXN0IGNoYW5uZWwgdHlwZXNcbiAgICAgKi9cbiAgICBsaXN0Q2hhbm5lbFR5cGVzUmF3KGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgY29uc3QgaGVhZGVyUGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIlN0cmVhbS1BdXRoLVR5cGVcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiU3RyZWFtLUF1dGgtVHlwZVwiKTsgLy8gc3RyZWFtLWF1dGgtdHlwZSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzW1wiYXBpX2tleVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJhcGlfa2V5XCIpOyAvLyBhcGlfa2V5IGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiQXV0aG9yaXphdGlvblwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJBdXRob3JpemF0aW9uXCIpOyAvLyBKV1QgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICBwYXRoOiBgL2NoYW5uZWx0eXBlc2AsXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICB9LCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgSlNPTkFwaVJlc3BvbnNlJDEocmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTGlzdHMgYWxsIGF2YWlsYWJsZSBjaGFubmVsIHR5cGVzXG4gICAgICogTGlzdCBjaGFubmVsIHR5cGVzXG4gICAgICovXG4gICAgbGlzdENoYW5uZWxUeXBlcyhpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMubGlzdENoYW5uZWxUeXBlc1Jhdyhpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCByZXNwb25zZS52YWx1ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyBjaGFubmVsIHR5cGVcbiAgICAgKiBVcGRhdGUgY2hhbm5lbCB0eXBlXG4gICAgICovXG4gICAgdXBkYXRlQ2hhbm5lbFR5cGVSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy5uYW1lID09PSBudWxsIHx8IHJlcXVlc3RQYXJhbWV0ZXJzLm5hbWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZXF1aXJlZEVycm9yJDEoJ25hbWUnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLm5hbWUgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1cGRhdGVDaGFubmVsVHlwZS4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy51cGRhdGVDaGFubmVsVHlwZVJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMudXBkYXRlQ2hhbm5lbFR5cGVSZXF1ZXN0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvciQxKCd1cGRhdGVDaGFubmVsVHlwZVJlcXVlc3QnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLnVwZGF0ZUNoYW5uZWxUeXBlUmVxdWVzdCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVwZGF0ZUNoYW5uZWxUeXBlLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJztcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJTdHJlYW0tQXV0aC1UeXBlXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIlN0cmVhbS1BdXRoLVR5cGVcIik7IC8vIHN0cmVhbS1hdXRoLXR5cGUgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1tcImFwaV9rZXlcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiYXBpX2tleVwiKTsgLy8gYXBpX2tleSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiQXV0aG9yaXphdGlvblwiKTsgLy8gSldUIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgcGF0aDogYC9jaGFubmVsdHlwZXMve25hbWV9YC5yZXBsYWNlKGB7JHtcIm5hbWVcIn19YCwgZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhyZXF1ZXN0UGFyYW1ldGVycy5uYW1lKSkpLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVyUGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBxdWVyeTogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIGJvZHk6IHJlcXVlc3RQYXJhbWV0ZXJzLnVwZGF0ZUNoYW5uZWxUeXBlUmVxdWVzdCxcbiAgICAgICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBKU09OQXBpUmVzcG9uc2UkMShyZXNwb25zZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIGNoYW5uZWwgdHlwZVxuICAgICAqIFVwZGF0ZSBjaGFubmVsIHR5cGVcbiAgICAgKi9cbiAgICB1cGRhdGVDaGFubmVsVHlwZShyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnVwZGF0ZUNoYW5uZWxUeXBlUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCByZXNwb25zZS52YWx1ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5cbi8qIHRzbGludDpkaXNhYmxlICovXG4vKiBlc2xpbnQtZGlzYWJsZSAqL1xuLyoqXG4gKiBTdHJlYW0gQ2hhdCBBUElcbiAqIE5vIGRlc2NyaXB0aW9uIHByb3ZpZGVkIChnZW5lcmF0ZWQgYnkgT3BlbmFwaSBHZW5lcmF0b3IgaHR0cHM6Ly9naXRodWIuY29tL29wZW5hcGl0b29scy9vcGVuYXBpLWdlbmVyYXRvcilcbiAqXG4gKiBUaGUgdmVyc2lvbiBvZiB0aGUgT3BlbkFQSSBkb2N1bWVudDogdjkyLjcuMFxuICpcbiAqXG4gKiBOT1RFOiBUaGlzIGNsYXNzIGlzIGF1dG8gZ2VuZXJhdGVkIGJ5IE9wZW5BUEkgR2VuZXJhdG9yIChodHRwczovL29wZW5hcGktZ2VuZXJhdG9yLnRlY2gpLlxuICogaHR0cHM6Ly9vcGVuYXBpLWdlbmVyYXRvci50ZWNoXG4gKiBEbyBub3QgZWRpdCB0aGUgY2xhc3MgbWFudWFsbHkuXG4gKi9cbi8qKlxuICpcbiAqL1xuY2xhc3MgQ2hhbm5lbHNBcGkgZXh0ZW5kcyBCYXNlQVBJJDEge1xuICAgIC8qKlxuICAgICAqIERlbGV0ZXMgY2hhbm5lbCAgU2VuZHMgZXZlbnRzOiAtIGNoYW5uZWwuZGVsZXRlZCAgUmVxdWlyZWQgcGVybWlzc2lvbnM6IC0gRGVsZXRlQ2hhbm5lbFxuICAgICAqIERlbGV0ZSBjaGFubmVsXG4gICAgICovXG4gICAgZGVsZXRlQ2hhbm5lbFJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLnR5cGUgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMudHlwZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IkMSgndHlwZScsICdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVxdWVzdFBhcmFtZXRlcnMudHlwZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGRlbGV0ZUNoYW5uZWwuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMuaWQgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMuaWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZXF1aXJlZEVycm9yJDEoJ2lkJywgJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy5pZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGRlbGV0ZUNoYW5uZWwuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy5oYXJkRGVsZXRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbJ2hhcmRfZGVsZXRlJ10gPSByZXF1ZXN0UGFyYW1ldGVycy5oYXJkRGVsZXRlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgaGVhZGVyUGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIlN0cmVhbS1BdXRoLVR5cGVcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiU3RyZWFtLUF1dGgtVHlwZVwiKTsgLy8gc3RyZWFtLWF1dGgtdHlwZSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzW1wiYXBpX2tleVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJhcGlfa2V5XCIpOyAvLyBhcGlfa2V5IGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiQXV0aG9yaXphdGlvblwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJBdXRob3JpemF0aW9uXCIpOyAvLyBKV1QgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICBwYXRoOiBgL2NoYW5uZWxzL3t0eXBlfS97aWR9YC5yZXBsYWNlKGB7JHtcInR5cGVcIn19YCwgZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhyZXF1ZXN0UGFyYW1ldGVycy50eXBlKSkpLnJlcGxhY2UoYHske1wiaWRcIn19YCwgZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhyZXF1ZXN0UGFyYW1ldGVycy5pZCkpKSxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBKU09OQXBpUmVzcG9uc2UkMShyZXNwb25zZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWxldGVzIGNoYW5uZWwgIFNlbmRzIGV2ZW50czogLSBjaGFubmVsLmRlbGV0ZWQgIFJlcXVpcmVkIHBlcm1pc3Npb25zOiAtIERlbGV0ZUNoYW5uZWxcbiAgICAgKiBEZWxldGUgY2hhbm5lbFxuICAgICAqL1xuICAgIGRlbGV0ZUNoYW5uZWwocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5kZWxldGVDaGFubmVsUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCByZXNwb25zZS52YWx1ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWxsb3dzIHRvIGRlbGV0ZSBzZXZlcmFsIGNoYW5uZWxzIGF0IG9uY2UgYXN5bmNocm9ub3VzbHkgIFNlbmRzIGV2ZW50czogLSBjaGFubmVsLmRlbGV0ZWQgIFJlcXVpcmVkIHBlcm1pc3Npb25zOiAtIERlbGV0ZUNoYW5uZWxcbiAgICAgKiBEZWxldGVzIGNoYW5uZWxzIGFzeW5jaHJvbm91c2x5XG4gICAgICovXG4gICAgZGVsZXRlQ2hhbm5lbHNSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy5kZWxldGVDaGFubmVsc1JlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMuZGVsZXRlQ2hhbm5lbHNSZXF1ZXN0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvciQxKCdkZWxldGVDaGFubmVsc1JlcXVlc3QnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLmRlbGV0ZUNoYW5uZWxzUmVxdWVzdCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGRlbGV0ZUNoYW5uZWxzLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJztcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJTdHJlYW0tQXV0aC1UeXBlXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIlN0cmVhbS1BdXRoLVR5cGVcIik7IC8vIHN0cmVhbS1hdXRoLXR5cGUgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1tcImFwaV9rZXlcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiYXBpX2tleVwiKTsgLy8gYXBpX2tleSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiQXV0aG9yaXphdGlvblwiKTsgLy8gSldUIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgcGF0aDogYC9jaGFubmVscy9kZWxldGVgLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBib2R5OiByZXF1ZXN0UGFyYW1ldGVycy5kZWxldGVDaGFubmVsc1JlcXVlc3QsXG4gICAgICAgICAgICB9LCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgSlNPTkFwaVJlc3BvbnNlJDEocmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWxsb3dzIHRvIGRlbGV0ZSBzZXZlcmFsIGNoYW5uZWxzIGF0IG9uY2UgYXN5bmNocm9ub3VzbHkgIFNlbmRzIGV2ZW50czogLSBjaGFubmVsLmRlbGV0ZWQgIFJlcXVpcmVkIHBlcm1pc3Npb25zOiAtIERlbGV0ZUNoYW5uZWxcbiAgICAgKiBEZWxldGVzIGNoYW5uZWxzIGFzeW5jaHJvbm91c2x5XG4gICAgICovXG4gICAgZGVsZXRlQ2hhbm5lbHMocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5kZWxldGVDaGFubmVsc1JhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4geWllbGQgcmVzcG9uc2UudmFsdWUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEV4cG9ydHMgY2hhbm5lbCBkYXRhIHRvIEpTT04gZmlsZVxuICAgICAqIEV4cG9ydCBjaGFubmVsc1xuICAgICAqL1xuICAgIGV4cG9ydENoYW5uZWxzUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMuZXhwb3J0Q2hhbm5lbHNSZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3RQYXJhbWV0ZXJzLmV4cG9ydENoYW5uZWxzUmVxdWVzdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IkMSgnZXhwb3J0Q2hhbm5lbHNSZXF1ZXN0JywgJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy5leHBvcnRDaGFubmVsc1JlcXVlc3Qgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBleHBvcnRDaGFubmVscy4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgY29uc3QgaGVhZGVyUGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1snQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbic7XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiU3RyZWFtLUF1dGgtVHlwZVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJTdHJlYW0tQXV0aC1UeXBlXCIpOyAvLyBzdHJlYW0tYXV0aC10eXBlIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbXCJhcGlfa2V5XCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcImFwaV9rZXlcIik7IC8vIGFwaV9rZXkgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJBdXRob3JpemF0aW9uXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIkF1dGhvcml6YXRpb25cIik7IC8vIEpXVCBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIHBhdGg6IGAvZXhwb3J0X2NoYW5uZWxzYCxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgYm9keTogcmVxdWVzdFBhcmFtZXRlcnMuZXhwb3J0Q2hhbm5lbHNSZXF1ZXN0LFxuICAgICAgICAgICAgfSwgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEpTT05BcGlSZXNwb25zZSQxKHJlc3BvbnNlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEV4cG9ydHMgY2hhbm5lbCBkYXRhIHRvIEpTT04gZmlsZVxuICAgICAqIEV4cG9ydCBjaGFubmVsc1xuICAgICAqL1xuICAgIGV4cG9ydENoYW5uZWxzKHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuZXhwb3J0Q2hhbm5lbHNSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIHlpZWxkIHJlc3BvbnNlLnZhbHVlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEV4cG9ydCBjaGFubmVscyBzdGF0dXNcbiAgICAgKi9cbiAgICBnZXRFeHBvcnRDaGFubmVsc1N0YXR1c1JhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLmlkID09PSBudWxsIHx8IHJlcXVlc3RQYXJhbWV0ZXJzLmlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvciQxKCdpZCcsICdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVxdWVzdFBhcmFtZXRlcnMuaWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRFeHBvcnRDaGFubmVsc1N0YXR1cy4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgY29uc3QgaGVhZGVyUGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIlN0cmVhbS1BdXRoLVR5cGVcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiU3RyZWFtLUF1dGgtVHlwZVwiKTsgLy8gc3RyZWFtLWF1dGgtdHlwZSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzW1wiYXBpX2tleVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJhcGlfa2V5XCIpOyAvLyBhcGlfa2V5IGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiQXV0aG9yaXphdGlvblwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJBdXRob3JpemF0aW9uXCIpOyAvLyBKV1QgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICBwYXRoOiBgL2V4cG9ydF9jaGFubmVscy97aWR9YC5yZXBsYWNlKGB7JHtcImlkXCJ9fWAsIGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVxdWVzdFBhcmFtZXRlcnMuaWQpKSksXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICB9LCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgSlNPTkFwaVJlc3BvbnNlJDEocmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBFeHBvcnQgY2hhbm5lbHMgc3RhdHVzXG4gICAgICovXG4gICAgZ2V0RXhwb3J0Q2hhbm5lbHNTdGF0dXMocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5nZXRFeHBvcnRDaGFubmVsc1N0YXR1c1JhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4geWllbGQgcmVzcG9uc2UudmFsdWUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGNyZWF0ZXMgYSBjaGFubmVsIG9yIHJldHVybnMgYW4gZXhpc3Rpbmcgb25lIHdpdGggbWF0Y2hpbmcgYXR0cmlidXRlcyAgU2VuZHMgZXZlbnRzOiAtIGNoYW5uZWwuY3JlYXRlZCAtIG1lbWJlci5hZGRlZCAtIG1lbWJlci5yZW1vdmVkIC0gbWVtYmVyLnVwZGF0ZWQgLSB1c2VyLndhdGNoaW5nLnN0YXJ0XG4gICAgICogR2V0IG9yIGNyZWF0ZSBjaGFubmVsXG4gICAgICovXG4gICAgZ2V0T3JDcmVhdGVDaGFubmVsUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMudHlwZSA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy50eXBlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvciQxKCd0eXBlJywgJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy50eXBlIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0T3JDcmVhdGVDaGFubmVsLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLmlkID09PSBudWxsIHx8IHJlcXVlc3RQYXJhbWV0ZXJzLmlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvciQxKCdpZCcsICdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVxdWVzdFBhcmFtZXRlcnMuaWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRPckNyZWF0ZUNoYW5uZWwuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMuY2hhbm5lbEdldE9yQ3JlYXRlUmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy5jaGFubmVsR2V0T3JDcmVhdGVSZXF1ZXN0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvciQxKCdjaGFubmVsR2V0T3JDcmVhdGVSZXF1ZXN0JywgJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy5jaGFubmVsR2V0T3JDcmVhdGVSZXF1ZXN0IHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0T3JDcmVhdGVDaGFubmVsLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJztcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJTdHJlYW0tQXV0aC1UeXBlXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIlN0cmVhbS1BdXRoLVR5cGVcIik7IC8vIHN0cmVhbS1hdXRoLXR5cGUgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1tcImFwaV9rZXlcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiYXBpX2tleVwiKTsgLy8gYXBpX2tleSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiQXV0aG9yaXphdGlvblwiKTsgLy8gSldUIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgcGF0aDogYC9jaGFubmVscy97dHlwZX0ve2lkfS9xdWVyeWAucmVwbGFjZShgeyR7XCJ0eXBlXCJ9fWAsIGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVxdWVzdFBhcmFtZXRlcnMudHlwZSkpKS5yZXBsYWNlKGB7JHtcImlkXCJ9fWAsIGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVxdWVzdFBhcmFtZXRlcnMuaWQpKSksXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVyUGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBxdWVyeTogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIGJvZHk6IHJlcXVlc3RQYXJhbWV0ZXJzLmNoYW5uZWxHZXRPckNyZWF0ZVJlcXVlc3QsXG4gICAgICAgICAgICB9LCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgSlNPTkFwaVJlc3BvbnNlJDEocmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgY3JlYXRlcyBhIGNoYW5uZWwgb3IgcmV0dXJucyBhbiBleGlzdGluZyBvbmUgd2l0aCBtYXRjaGluZyBhdHRyaWJ1dGVzICBTZW5kcyBldmVudHM6IC0gY2hhbm5lbC5jcmVhdGVkIC0gbWVtYmVyLmFkZGVkIC0gbWVtYmVyLnJlbW92ZWQgLSBtZW1iZXIudXBkYXRlZCAtIHVzZXIud2F0Y2hpbmcuc3RhcnRcbiAgICAgKiBHZXQgb3IgY3JlYXRlIGNoYW5uZWxcbiAgICAgKi9cbiAgICBnZXRPckNyZWF0ZUNoYW5uZWwocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5nZXRPckNyZWF0ZUNoYW5uZWxSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIHlpZWxkIHJlc3BvbnNlLnZhbHVlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNYXJrcyBjaGFubmVsIGFzIGhpZGRlbiBmb3IgY3VycmVudCB1c2VyICBTZW5kcyBldmVudHM6IC0gY2hhbm5lbC5oaWRkZW4gIFJlcXVpcmVkIHBlcm1pc3Npb25zOiAtIFJlYWRDaGFubmVsXG4gICAgICogSGlkZSBjaGFubmVsXG4gICAgICovXG4gICAgaGlkZUNoYW5uZWxSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy50eXBlID09PSBudWxsIHx8IHJlcXVlc3RQYXJhbWV0ZXJzLnR5cGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZXF1aXJlZEVycm9yJDEoJ3R5cGUnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLnR5cGUgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBoaWRlQ2hhbm5lbC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy5pZCA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy5pZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IkMSgnaWQnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLmlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgaGlkZUNoYW5uZWwuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMuaGlkZUNoYW5uZWxSZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3RQYXJhbWV0ZXJzLmhpZGVDaGFubmVsUmVxdWVzdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IkMSgnaGlkZUNoYW5uZWxSZXF1ZXN0JywgJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy5oaWRlQ2hhbm5lbFJlcXVlc3Qgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBoaWRlQ2hhbm5lbC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgY29uc3QgaGVhZGVyUGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1snQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbic7XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiU3RyZWFtLUF1dGgtVHlwZVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJTdHJlYW0tQXV0aC1UeXBlXCIpOyAvLyBzdHJlYW0tYXV0aC10eXBlIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbXCJhcGlfa2V5XCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcImFwaV9rZXlcIik7IC8vIGFwaV9rZXkgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJBdXRob3JpemF0aW9uXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIkF1dGhvcml6YXRpb25cIik7IC8vIEpXVCBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIHBhdGg6IGAvY2hhbm5lbHMve3R5cGV9L3tpZH0vaGlkZWAucmVwbGFjZShgeyR7XCJ0eXBlXCJ9fWAsIGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVxdWVzdFBhcmFtZXRlcnMudHlwZSkpKS5yZXBsYWNlKGB7JHtcImlkXCJ9fWAsIGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVxdWVzdFBhcmFtZXRlcnMuaWQpKSksXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVyUGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBxdWVyeTogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIGJvZHk6IHJlcXVlc3RQYXJhbWV0ZXJzLmhpZGVDaGFubmVsUmVxdWVzdCxcbiAgICAgICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBKU09OQXBpUmVzcG9uc2UkMShyZXNwb25zZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNYXJrcyBjaGFubmVsIGFzIGhpZGRlbiBmb3IgY3VycmVudCB1c2VyICBTZW5kcyBldmVudHM6IC0gY2hhbm5lbC5oaWRkZW4gIFJlcXVpcmVkIHBlcm1pc3Npb25zOiAtIFJlYWRDaGFubmVsXG4gICAgICogSGlkZSBjaGFubmVsXG4gICAgICovXG4gICAgaGlkZUNoYW5uZWwocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5oaWRlQ2hhbm5lbFJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4geWllbGQgcmVzcG9uc2UudmFsdWUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1hcmtzIGNoYW5uZWxzIGFzIHJlYWQgdXAgdG8gdGhlIHNwZWNpZmljIG1lc3NhZ2UuIElmIG5vIGNoYW5uZWxzIGlzIGdpdmVuLCBtYXJrIGFsbCBjaGFubmVsIGFzIHJlYWQgIFNlbmRzIGV2ZW50czogLSBtZXNzYWdlLnJlYWQgIFJlcXVpcmVkIHBlcm1pc3Npb25zOiAtIFJlYWRDaGFubmVsXG4gICAgICogTWFyayBjaGFubmVscyBhcyByZWFkXG4gICAgICovXG4gICAgbWFya0NoYW5uZWxzUmVhZFJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLm1hcmtDaGFubmVsc1JlYWRSZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3RQYXJhbWV0ZXJzLm1hcmtDaGFubmVsc1JlYWRSZXF1ZXN0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvciQxKCdtYXJrQ2hhbm5lbHNSZWFkUmVxdWVzdCcsICdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVxdWVzdFBhcmFtZXRlcnMubWFya0NoYW5uZWxzUmVhZFJlcXVlc3Qgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBtYXJrQ2hhbm5lbHNSZWFkLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJztcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJTdHJlYW0tQXV0aC1UeXBlXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIlN0cmVhbS1BdXRoLVR5cGVcIik7IC8vIHN0cmVhbS1hdXRoLXR5cGUgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1tcImFwaV9rZXlcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiYXBpX2tleVwiKTsgLy8gYXBpX2tleSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiQXV0aG9yaXphdGlvblwiKTsgLy8gSldUIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgcGF0aDogYC9jaGFubmVscy9yZWFkYCxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgYm9keTogcmVxdWVzdFBhcmFtZXRlcnMubWFya0NoYW5uZWxzUmVhZFJlcXVlc3QsXG4gICAgICAgICAgICB9LCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgSlNPTkFwaVJlc3BvbnNlJDEocmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWFya3MgY2hhbm5lbHMgYXMgcmVhZCB1cCB0byB0aGUgc3BlY2lmaWMgbWVzc2FnZS4gSWYgbm8gY2hhbm5lbHMgaXMgZ2l2ZW4sIG1hcmsgYWxsIGNoYW5uZWwgYXMgcmVhZCAgU2VuZHMgZXZlbnRzOiAtIG1lc3NhZ2UucmVhZCAgUmVxdWlyZWQgcGVybWlzc2lvbnM6IC0gUmVhZENoYW5uZWxcbiAgICAgKiBNYXJrIGNoYW5uZWxzIGFzIHJlYWRcbiAgICAgKi9cbiAgICBtYXJrQ2hhbm5lbHNSZWFkKHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMubWFya0NoYW5uZWxzUmVhZFJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4geWllbGQgcmVzcG9uc2UudmFsdWUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1hcmtzIGNoYW5uZWwgYXMgcmVhZCB1cCB0byB0aGUgc3BlY2lmaWMgbWVzc2FnZSAgU2VuZHMgZXZlbnRzOiAtIG1lc3NhZ2UucmVhZCAgUmVxdWlyZWQgcGVybWlzc2lvbnM6IC0gUmVhZENoYW5uZWxcbiAgICAgKiBNYXJrIHJlYWRcbiAgICAgKi9cbiAgICBtYXJrUmVhZFJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLnR5cGUgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMudHlwZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IkMSgndHlwZScsICdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVxdWVzdFBhcmFtZXRlcnMudHlwZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIG1hcmtSZWFkLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLmlkID09PSBudWxsIHx8IHJlcXVlc3RQYXJhbWV0ZXJzLmlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvciQxKCdpZCcsICdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVxdWVzdFBhcmFtZXRlcnMuaWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBtYXJrUmVhZC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy5tYXJrUmVhZFJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMubWFya1JlYWRSZXF1ZXN0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvciQxKCdtYXJrUmVhZFJlcXVlc3QnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLm1hcmtSZWFkUmVxdWVzdCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIG1hcmtSZWFkLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJztcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJTdHJlYW0tQXV0aC1UeXBlXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIlN0cmVhbS1BdXRoLVR5cGVcIik7IC8vIHN0cmVhbS1hdXRoLXR5cGUgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1tcImFwaV9rZXlcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiYXBpX2tleVwiKTsgLy8gYXBpX2tleSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiQXV0aG9yaXphdGlvblwiKTsgLy8gSldUIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgcGF0aDogYC9jaGFubmVscy97dHlwZX0ve2lkfS9yZWFkYC5yZXBsYWNlKGB7JHtcInR5cGVcIn19YCwgZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhyZXF1ZXN0UGFyYW1ldGVycy50eXBlKSkpLnJlcGxhY2UoYHske1wiaWRcIn19YCwgZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhyZXF1ZXN0UGFyYW1ldGVycy5pZCkpKSxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgYm9keTogcmVxdWVzdFBhcmFtZXRlcnMubWFya1JlYWRSZXF1ZXN0LFxuICAgICAgICAgICAgfSwgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEpTT05BcGlSZXNwb25zZSQxKHJlc3BvbnNlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1hcmtzIGNoYW5uZWwgYXMgcmVhZCB1cCB0byB0aGUgc3BlY2lmaWMgbWVzc2FnZSAgU2VuZHMgZXZlbnRzOiAtIG1lc3NhZ2UucmVhZCAgUmVxdWlyZWQgcGVybWlzc2lvbnM6IC0gUmVhZENoYW5uZWxcbiAgICAgKiBNYXJrIHJlYWRcbiAgICAgKi9cbiAgICBtYXJrUmVhZChyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLm1hcmtSZWFkUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCByZXNwb25zZS52YWx1ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWFya3MgY2hhbm5lbCBhcyB1bnJlYWQgZnJvbSBhIHNwZWNpZmljIG1lc3NhZ2UgIFJlcXVpcmVkIHBlcm1pc3Npb25zOiAtIFJlYWRDaGFubmVsXG4gICAgICogTWFyayB1bnJlYWRcbiAgICAgKi9cbiAgICBtYXJrVW5yZWFkUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMudHlwZSA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy50eXBlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvciQxKCd0eXBlJywgJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy50eXBlIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgbWFya1VucmVhZC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy5pZCA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy5pZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IkMSgnaWQnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLmlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgbWFya1VucmVhZC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy5tYXJrVW5yZWFkUmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy5tYXJrVW5yZWFkUmVxdWVzdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IkMSgnbWFya1VucmVhZFJlcXVlc3QnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLm1hcmtVbnJlYWRSZXF1ZXN0IHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgbWFya1VucmVhZC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgY29uc3QgaGVhZGVyUGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1snQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbic7XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiU3RyZWFtLUF1dGgtVHlwZVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJTdHJlYW0tQXV0aC1UeXBlXCIpOyAvLyBzdHJlYW0tYXV0aC10eXBlIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbXCJhcGlfa2V5XCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcImFwaV9rZXlcIik7IC8vIGFwaV9rZXkgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJBdXRob3JpemF0aW9uXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIkF1dGhvcml6YXRpb25cIik7IC8vIEpXVCBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIHBhdGg6IGAvY2hhbm5lbHMve3R5cGV9L3tpZH0vdW5yZWFkYC5yZXBsYWNlKGB7JHtcInR5cGVcIn19YCwgZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhyZXF1ZXN0UGFyYW1ldGVycy50eXBlKSkpLnJlcGxhY2UoYHske1wiaWRcIn19YCwgZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhyZXF1ZXN0UGFyYW1ldGVycy5pZCkpKSxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgYm9keTogcmVxdWVzdFBhcmFtZXRlcnMubWFya1VucmVhZFJlcXVlc3QsXG4gICAgICAgICAgICB9LCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgSlNPTkFwaVJlc3BvbnNlJDEocmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWFya3MgY2hhbm5lbCBhcyB1bnJlYWQgZnJvbSBhIHNwZWNpZmljIG1lc3NhZ2UgIFJlcXVpcmVkIHBlcm1pc3Npb25zOiAtIFJlYWRDaGFubmVsXG4gICAgICogTWFyayB1bnJlYWRcbiAgICAgKi9cbiAgICBtYXJrVW5yZWFkKHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMubWFya1VucmVhZFJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4geWllbGQgcmVzcG9uc2UudmFsdWUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE11dGVzIGNoYW5uZWwgZm9yIHVzZXIgIFNlbmRzIGV2ZW50czogLSBjaGFubmVsLm11dGVkICBSZXF1aXJlZCBwZXJtaXNzaW9uczogLSBNdXRlQ2hhbm5lbFxuICAgICAqIE11dGUgY2hhbm5lbFxuICAgICAqL1xuICAgIG11dGVDaGFubmVsUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMubXV0ZUNoYW5uZWxSZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3RQYXJhbWV0ZXJzLm11dGVDaGFubmVsUmVxdWVzdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IkMSgnbXV0ZUNoYW5uZWxSZXF1ZXN0JywgJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy5tdXRlQ2hhbm5lbFJlcXVlc3Qgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBtdXRlQ2hhbm5lbC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgY29uc3QgaGVhZGVyUGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1snQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbic7XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiU3RyZWFtLUF1dGgtVHlwZVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJTdHJlYW0tQXV0aC1UeXBlXCIpOyAvLyBzdHJlYW0tYXV0aC10eXBlIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbXCJhcGlfa2V5XCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcImFwaV9rZXlcIik7IC8vIGFwaV9rZXkgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJBdXRob3JpemF0aW9uXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIkF1dGhvcml6YXRpb25cIik7IC8vIEpXVCBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIHBhdGg6IGAvbW9kZXJhdGlvbi9tdXRlL2NoYW5uZWxgLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBib2R5OiByZXF1ZXN0UGFyYW1ldGVycy5tdXRlQ2hhbm5lbFJlcXVlc3QsXG4gICAgICAgICAgICB9LCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgSlNPTkFwaVJlc3BvbnNlJDEocmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTXV0ZXMgY2hhbm5lbCBmb3IgdXNlciAgU2VuZHMgZXZlbnRzOiAtIGNoYW5uZWwubXV0ZWQgIFJlcXVpcmVkIHBlcm1pc3Npb25zOiAtIE11dGVDaGFubmVsXG4gICAgICogTXV0ZSBjaGFubmVsXG4gICAgICovXG4gICAgbXV0ZUNoYW5uZWwocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5tdXRlQ2hhbm5lbFJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4geWllbGQgcmVzcG9uc2UudmFsdWUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFF1ZXJ5IGNoYW5uZWxzIHdpdGggZmlsdGVyIHF1ZXJ5ICBSZXF1aXJlZCBwZXJtaXNzaW9uczogLSBSZWFkQ2hhbm5lbFxuICAgICAqIFF1ZXJ5IGNoYW5uZWxzXG4gICAgICovXG4gICAgcXVlcnlDaGFubmVsc1JhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLnF1ZXJ5Q2hhbm5lbHNSZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3RQYXJhbWV0ZXJzLnF1ZXJ5Q2hhbm5lbHNSZXF1ZXN0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvciQxKCdxdWVyeUNoYW5uZWxzUmVxdWVzdCcsICdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVxdWVzdFBhcmFtZXRlcnMucXVlcnlDaGFubmVsc1JlcXVlc3Qgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBxdWVyeUNoYW5uZWxzLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJztcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJTdHJlYW0tQXV0aC1UeXBlXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIlN0cmVhbS1BdXRoLVR5cGVcIik7IC8vIHN0cmVhbS1hdXRoLXR5cGUgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1tcImFwaV9rZXlcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiYXBpX2tleVwiKTsgLy8gYXBpX2tleSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiQXV0aG9yaXphdGlvblwiKTsgLy8gSldUIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgcGF0aDogYC9jaGFubmVsc2AsXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVyUGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBxdWVyeTogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIGJvZHk6IHJlcXVlc3RQYXJhbWV0ZXJzLnF1ZXJ5Q2hhbm5lbHNSZXF1ZXN0LFxuICAgICAgICAgICAgfSwgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEpTT05BcGlSZXNwb25zZSQxKHJlc3BvbnNlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFF1ZXJ5IGNoYW5uZWxzIHdpdGggZmlsdGVyIHF1ZXJ5ICBSZXF1aXJlZCBwZXJtaXNzaW9uczogLSBSZWFkQ2hhbm5lbFxuICAgICAqIFF1ZXJ5IGNoYW5uZWxzXG4gICAgICovXG4gICAgcXVlcnlDaGFubmVscyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnF1ZXJ5Q2hhbm5lbHNSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIHlpZWxkIHJlc3BvbnNlLnZhbHVlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGaW5kIGFuZCBmaWx0ZXIgY2hhbm5lbCBtZW1iZXJzICBSZXF1aXJlZCBwZXJtaXNzaW9uczogLSBSZWFkQ2hhbm5lbFxuICAgICAqIFF1ZXJ5IG1lbWJlcnNcbiAgICAgKi9cbiAgICBxdWVyeU1lbWJlcnNSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLnBheWxvYWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1sncGF5bG9hZCddID0gcmVxdWVzdFBhcmFtZXRlcnMucGF5bG9hZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGhlYWRlclBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJTdHJlYW0tQXV0aC1UeXBlXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIlN0cmVhbS1BdXRoLVR5cGVcIik7IC8vIHN0cmVhbS1hdXRoLXR5cGUgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1tcImFwaV9rZXlcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiYXBpX2tleVwiKTsgLy8gYXBpX2tleSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiQXV0aG9yaXphdGlvblwiKTsgLy8gSldUIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgcGF0aDogYC9tZW1iZXJzYCxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBKU09OQXBpUmVzcG9uc2UkMShyZXNwb25zZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGaW5kIGFuZCBmaWx0ZXIgY2hhbm5lbCBtZW1iZXJzICBSZXF1aXJlZCBwZXJtaXNzaW9uczogLSBSZWFkQ2hhbm5lbFxuICAgICAqIFF1ZXJ5IG1lbWJlcnNcbiAgICAgKi9cbiAgICBxdWVyeU1lbWJlcnMocmVxdWVzdFBhcmFtZXRlcnMgPSB7fSwgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnF1ZXJ5TWVtYmVyc1JhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4geWllbGQgcmVzcG9uc2UudmFsdWUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlYXJjaCBtZXNzYWdlcyBhY3Jvc3MgY2hhbm5lbHMgIFJlcXVpcmVkIHBlcm1pc3Npb25zOiAtIFJlYWRDaGFubmVsXG4gICAgICogU2VhcmNoIG1lc3NhZ2VzXG4gICAgICovXG4gICAgc2VhcmNoUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy5wYXlsb2FkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbJ3BheWxvYWQnXSA9IHJlcXVlc3RQYXJhbWV0ZXJzLnBheWxvYWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiU3RyZWFtLUF1dGgtVHlwZVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJTdHJlYW0tQXV0aC1UeXBlXCIpOyAvLyBzdHJlYW0tYXV0aC10eXBlIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbXCJhcGlfa2V5XCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcImFwaV9rZXlcIik7IC8vIGFwaV9rZXkgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJBdXRob3JpemF0aW9uXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIkF1dGhvcml6YXRpb25cIik7IC8vIEpXVCBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIHBhdGg6IGAvc2VhcmNoYCxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBKU09OQXBpUmVzcG9uc2UkMShyZXNwb25zZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZWFyY2ggbWVzc2FnZXMgYWNyb3NzIGNoYW5uZWxzICBSZXF1aXJlZCBwZXJtaXNzaW9uczogLSBSZWFkQ2hhbm5lbFxuICAgICAqIFNlYXJjaCBtZXNzYWdlc1xuICAgICAqL1xuICAgIHNlYXJjaChyZXF1ZXN0UGFyYW1ldGVycyA9IHt9LCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuc2VhcmNoUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCByZXNwb25zZS52YWx1ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2hvd3MgcHJldmlvdXNseSBoaWRkZW4gY2hhbm5lbCAgU2VuZHMgZXZlbnRzOiAtIGNoYW5uZWwudmlzaWJsZVxuICAgICAqIFNob3cgY2hhbm5lbFxuICAgICAqL1xuICAgIHNob3dDaGFubmVsUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMudHlwZSA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy50eXBlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvciQxKCd0eXBlJywgJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy50eXBlIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgc2hvd0NoYW5uZWwuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMuaWQgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMuaWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZXF1aXJlZEVycm9yJDEoJ2lkJywgJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy5pZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHNob3dDaGFubmVsLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLnNob3dDaGFubmVsUmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy5zaG93Q2hhbm5lbFJlcXVlc3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZXF1aXJlZEVycm9yJDEoJ3Nob3dDaGFubmVsUmVxdWVzdCcsICdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVxdWVzdFBhcmFtZXRlcnMuc2hvd0NoYW5uZWxSZXF1ZXN0IHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgc2hvd0NoYW5uZWwuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlclBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbJ0NvbnRlbnQtVHlwZSddID0gJ2FwcGxpY2F0aW9uL2pzb24nO1xuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIlN0cmVhbS1BdXRoLVR5cGVcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiU3RyZWFtLUF1dGgtVHlwZVwiKTsgLy8gc3RyZWFtLWF1dGgtdHlwZSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzW1wiYXBpX2tleVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJhcGlfa2V5XCIpOyAvLyBhcGlfa2V5IGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiQXV0aG9yaXphdGlvblwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJBdXRob3JpemF0aW9uXCIpOyAvLyBKV1QgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICBwYXRoOiBgL2NoYW5uZWxzL3t0eXBlfS97aWR9L3Nob3dgLnJlcGxhY2UoYHske1widHlwZVwifX1gLCBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJlcXVlc3RQYXJhbWV0ZXJzLnR5cGUpKSkucmVwbGFjZShgeyR7XCJpZFwifX1gLCBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJlcXVlc3RQYXJhbWV0ZXJzLmlkKSkpLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBib2R5OiByZXF1ZXN0UGFyYW1ldGVycy5zaG93Q2hhbm5lbFJlcXVlc3QsXG4gICAgICAgICAgICB9LCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgSlNPTkFwaVJlc3BvbnNlJDEocmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2hvd3MgcHJldmlvdXNseSBoaWRkZW4gY2hhbm5lbCAgU2VuZHMgZXZlbnRzOiAtIGNoYW5uZWwudmlzaWJsZVxuICAgICAqIFNob3cgY2hhbm5lbFxuICAgICAqL1xuICAgIHNob3dDaGFubmVsKHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuc2hvd0NoYW5uZWxSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIHlpZWxkIHJlc3BvbnNlLnZhbHVlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcnVuY2F0ZXMgY2hhbm5lbCAgU2VuZHMgZXZlbnRzOiAtIGNoYW5uZWwudHJ1bmNhdGVkICBSZXF1aXJlZCBwZXJtaXNzaW9uczogLSBEZWxldGVDaGFubmVsIC0gVHJ1bmNhdGVDaGFubmVsXG4gICAgICogVHJ1bmNhdGUgY2hhbm5lbFxuICAgICAqL1xuICAgIHRydW5jYXRlQ2hhbm5lbFJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLnR5cGUgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMudHlwZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IkMSgndHlwZScsICdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVxdWVzdFBhcmFtZXRlcnMudHlwZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHRydW5jYXRlQ2hhbm5lbC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy5pZCA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy5pZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IkMSgnaWQnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLmlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgdHJ1bmNhdGVDaGFubmVsLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLnRydW5jYXRlQ2hhbm5lbFJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMudHJ1bmNhdGVDaGFubmVsUmVxdWVzdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IkMSgndHJ1bmNhdGVDaGFubmVsUmVxdWVzdCcsICdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVxdWVzdFBhcmFtZXRlcnMudHJ1bmNhdGVDaGFubmVsUmVxdWVzdCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHRydW5jYXRlQ2hhbm5lbC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgY29uc3QgaGVhZGVyUGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1snQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbic7XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiU3RyZWFtLUF1dGgtVHlwZVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJTdHJlYW0tQXV0aC1UeXBlXCIpOyAvLyBzdHJlYW0tYXV0aC10eXBlIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbXCJhcGlfa2V5XCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcImFwaV9rZXlcIik7IC8vIGFwaV9rZXkgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJBdXRob3JpemF0aW9uXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIkF1dGhvcml6YXRpb25cIik7IC8vIEpXVCBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIHBhdGg6IGAvY2hhbm5lbHMve3R5cGV9L3tpZH0vdHJ1bmNhdGVgLnJlcGxhY2UoYHske1widHlwZVwifX1gLCBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJlcXVlc3RQYXJhbWV0ZXJzLnR5cGUpKSkucmVwbGFjZShgeyR7XCJpZFwifX1gLCBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJlcXVlc3RQYXJhbWV0ZXJzLmlkKSkpLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBib2R5OiByZXF1ZXN0UGFyYW1ldGVycy50cnVuY2F0ZUNoYW5uZWxSZXF1ZXN0LFxuICAgICAgICAgICAgfSwgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEpTT05BcGlSZXNwb25zZSQxKHJlc3BvbnNlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRydW5jYXRlcyBjaGFubmVsICBTZW5kcyBldmVudHM6IC0gY2hhbm5lbC50cnVuY2F0ZWQgIFJlcXVpcmVkIHBlcm1pc3Npb25zOiAtIERlbGV0ZUNoYW5uZWwgLSBUcnVuY2F0ZUNoYW5uZWxcbiAgICAgKiBUcnVuY2F0ZSBjaGFubmVsXG4gICAgICovXG4gICAgdHJ1bmNhdGVDaGFubmVsKHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMudHJ1bmNhdGVDaGFubmVsUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCByZXNwb25zZS52YWx1ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVW5tdXRlcyBjaGFubmVsIGZvciB1c2VyICBTZW5kcyBldmVudHM6IC0gY2hhbm5lbC51bm11dGVkICBSZXF1aXJlZCBwZXJtaXNzaW9uczogLSBNdXRlQ2hhbm5lbFxuICAgICAqIFVubXV0ZSBjaGFubmVsXG4gICAgICovXG4gICAgdW5tdXRlQ2hhbm5lbFJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLnVubXV0ZUNoYW5uZWxSZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3RQYXJhbWV0ZXJzLnVubXV0ZUNoYW5uZWxSZXF1ZXN0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvciQxKCd1bm11dGVDaGFubmVsUmVxdWVzdCcsICdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVxdWVzdFBhcmFtZXRlcnMudW5tdXRlQ2hhbm5lbFJlcXVlc3Qgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1bm11dGVDaGFubmVsLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJztcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJTdHJlYW0tQXV0aC1UeXBlXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIlN0cmVhbS1BdXRoLVR5cGVcIik7IC8vIHN0cmVhbS1hdXRoLXR5cGUgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1tcImFwaV9rZXlcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiYXBpX2tleVwiKTsgLy8gYXBpX2tleSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiQXV0aG9yaXphdGlvblwiKTsgLy8gSldUIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgcGF0aDogYC9tb2RlcmF0aW9uL3VubXV0ZS9jaGFubmVsYCxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgYm9keTogcmVxdWVzdFBhcmFtZXRlcnMudW5tdXRlQ2hhbm5lbFJlcXVlc3QsXG4gICAgICAgICAgICB9LCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgSlNPTkFwaVJlc3BvbnNlJDEocmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVW5tdXRlcyBjaGFubmVsIGZvciB1c2VyICBTZW5kcyBldmVudHM6IC0gY2hhbm5lbC51bm11dGVkICBSZXF1aXJlZCBwZXJtaXNzaW9uczogLSBNdXRlQ2hhbm5lbFxuICAgICAqIFVubXV0ZSBjaGFubmVsXG4gICAgICovXG4gICAgdW5tdXRlQ2hhbm5lbChyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnVubXV0ZUNoYW5uZWxSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIHlpZWxkIHJlc3BvbnNlLnZhbHVlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVbnJlYWRDb3VudCBjb3VudHNcbiAgICAgKiBVbnJlYWRDb3VudCBjb3VudHNcbiAgICAgKi9cbiAgICB1bnJlYWRDb3VudHNSYXcoaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiU3RyZWFtLUF1dGgtVHlwZVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJTdHJlYW0tQXV0aC1UeXBlXCIpOyAvLyBzdHJlYW0tYXV0aC10eXBlIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbXCJhcGlfa2V5XCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcImFwaV9rZXlcIik7IC8vIGFwaV9rZXkgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJBdXRob3JpemF0aW9uXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIkF1dGhvcml6YXRpb25cIik7IC8vIEpXVCBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIHBhdGg6IGAvdW5yZWFkYCxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBKU09OQXBpUmVzcG9uc2UkMShyZXNwb25zZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVbnJlYWRDb3VudCBjb3VudHNcbiAgICAgKiBVbnJlYWRDb3VudCBjb3VudHNcbiAgICAgKi9cbiAgICB1bnJlYWRDb3VudHMoaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnVucmVhZENvdW50c1Jhdyhpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCByZXNwb25zZS52YWx1ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hhbmdlIGNoYW5uZWwgZGF0YSAgU2VuZHMgZXZlbnRzOiAtIGNoYW5uZWwudXBkYXRlZCAtIG1lbWJlci5hZGRlZCAtIG1lbWJlci5yZW1vdmVkIC0gbWVtYmVyLnVwZGF0ZWQgLSBtZXNzYWdlLm5ldyAgUmVxdWlyZWQgcGVybWlzc2lvbnM6IC0gQWRkT3duQ2hhbm5lbE1lbWJlcnNoaXAgLSBSZW1vdmVPd25DaGFubmVsTWVtYmVyc2hpcCAtIFVwZGF0ZUNoYW5uZWwgLSBVcGRhdGVDaGFubmVsQ29vbGRvd24gLSBVcGRhdGVDaGFubmVsRnJvemVuIC0gVXBkYXRlQ2hhbm5lbE1lbWJlcnNcbiAgICAgKiBVcGRhdGUgY2hhbm5lbFxuICAgICAqL1xuICAgIHVwZGF0ZUNoYW5uZWxSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy50eXBlID09PSBudWxsIHx8IHJlcXVlc3RQYXJhbWV0ZXJzLnR5cGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZXF1aXJlZEVycm9yJDEoJ3R5cGUnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLnR5cGUgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1cGRhdGVDaGFubmVsLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLmlkID09PSBudWxsIHx8IHJlcXVlc3RQYXJhbWV0ZXJzLmlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvciQxKCdpZCcsICdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVxdWVzdFBhcmFtZXRlcnMuaWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1cGRhdGVDaGFubmVsLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLnVwZGF0ZUNoYW5uZWxSZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3RQYXJhbWV0ZXJzLnVwZGF0ZUNoYW5uZWxSZXF1ZXN0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvciQxKCd1cGRhdGVDaGFubmVsUmVxdWVzdCcsICdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVxdWVzdFBhcmFtZXRlcnMudXBkYXRlQ2hhbm5lbFJlcXVlc3Qgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1cGRhdGVDaGFubmVsLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJztcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJTdHJlYW0tQXV0aC1UeXBlXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIlN0cmVhbS1BdXRoLVR5cGVcIik7IC8vIHN0cmVhbS1hdXRoLXR5cGUgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1tcImFwaV9rZXlcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiYXBpX2tleVwiKTsgLy8gYXBpX2tleSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiQXV0aG9yaXphdGlvblwiKTsgLy8gSldUIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgcGF0aDogYC9jaGFubmVscy97dHlwZX0ve2lkfWAucmVwbGFjZShgeyR7XCJ0eXBlXCJ9fWAsIGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVxdWVzdFBhcmFtZXRlcnMudHlwZSkpKS5yZXBsYWNlKGB7JHtcImlkXCJ9fWAsIGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVxdWVzdFBhcmFtZXRlcnMuaWQpKSksXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVyUGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBxdWVyeTogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIGJvZHk6IHJlcXVlc3RQYXJhbWV0ZXJzLnVwZGF0ZUNoYW5uZWxSZXF1ZXN0LFxuICAgICAgICAgICAgfSwgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEpTT05BcGlSZXNwb25zZSQxKHJlc3BvbnNlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoYW5nZSBjaGFubmVsIGRhdGEgIFNlbmRzIGV2ZW50czogLSBjaGFubmVsLnVwZGF0ZWQgLSBtZW1iZXIuYWRkZWQgLSBtZW1iZXIucmVtb3ZlZCAtIG1lbWJlci51cGRhdGVkIC0gbWVzc2FnZS5uZXcgIFJlcXVpcmVkIHBlcm1pc3Npb25zOiAtIEFkZE93bkNoYW5uZWxNZW1iZXJzaGlwIC0gUmVtb3ZlT3duQ2hhbm5lbE1lbWJlcnNoaXAgLSBVcGRhdGVDaGFubmVsIC0gVXBkYXRlQ2hhbm5lbENvb2xkb3duIC0gVXBkYXRlQ2hhbm5lbEZyb3plbiAtIFVwZGF0ZUNoYW5uZWxNZW1iZXJzXG4gICAgICogVXBkYXRlIGNoYW5uZWxcbiAgICAgKi9cbiAgICB1cGRhdGVDaGFubmVsKHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMudXBkYXRlQ2hhbm5lbFJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4geWllbGQgcmVzcG9uc2UudmFsdWUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgY2VydGFpbiBmaWVsZHMgb2YgdGhlIGNoYW5uZWwgIFNlbmRzIGV2ZW50czogLSBjaGFubmVsLnVwZGF0ZWQgIFJlcXVpcmVkIHBlcm1pc3Npb25zOiAtIFVwZGF0ZUNoYW5uZWwgLSBVcGRhdGVDaGFubmVsQ29vbGRvd24gLSBVcGRhdGVDaGFubmVsRnJvemVuXG4gICAgICogUGFydGlhbGx5IHVwZGF0ZSBjaGFubmVsXG4gICAgICovXG4gICAgdXBkYXRlQ2hhbm5lbFBhcnRpYWxSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy50eXBlID09PSBudWxsIHx8IHJlcXVlc3RQYXJhbWV0ZXJzLnR5cGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZXF1aXJlZEVycm9yJDEoJ3R5cGUnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLnR5cGUgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1cGRhdGVDaGFubmVsUGFydGlhbC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy5pZCA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy5pZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IkMSgnaWQnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLmlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgdXBkYXRlQ2hhbm5lbFBhcnRpYWwuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMudXBkYXRlQ2hhbm5lbFBhcnRpYWxSZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3RQYXJhbWV0ZXJzLnVwZGF0ZUNoYW5uZWxQYXJ0aWFsUmVxdWVzdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IkMSgndXBkYXRlQ2hhbm5lbFBhcnRpYWxSZXF1ZXN0JywgJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy51cGRhdGVDaGFubmVsUGFydGlhbFJlcXVlc3Qgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1cGRhdGVDaGFubmVsUGFydGlhbC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgY29uc3QgaGVhZGVyUGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1snQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbic7XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiU3RyZWFtLUF1dGgtVHlwZVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJTdHJlYW0tQXV0aC1UeXBlXCIpOyAvLyBzdHJlYW0tYXV0aC10eXBlIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbXCJhcGlfa2V5XCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcImFwaV9rZXlcIik7IC8vIGFwaV9rZXkgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJBdXRob3JpemF0aW9uXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIkF1dGhvcml6YXRpb25cIik7IC8vIEpXVCBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIHBhdGg6IGAvY2hhbm5lbHMve3R5cGV9L3tpZH1gLnJlcGxhY2UoYHske1widHlwZVwifX1gLCBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJlcXVlc3RQYXJhbWV0ZXJzLnR5cGUpKSkucmVwbGFjZShgeyR7XCJpZFwifX1gLCBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJlcXVlc3RQYXJhbWV0ZXJzLmlkKSkpLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgYm9keTogcmVxdWVzdFBhcmFtZXRlcnMudXBkYXRlQ2hhbm5lbFBhcnRpYWxSZXF1ZXN0LFxuICAgICAgICAgICAgfSwgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEpTT05BcGlSZXNwb25zZSQxKHJlc3BvbnNlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgY2VydGFpbiBmaWVsZHMgb2YgdGhlIGNoYW5uZWwgIFNlbmRzIGV2ZW50czogLSBjaGFubmVsLnVwZGF0ZWQgIFJlcXVpcmVkIHBlcm1pc3Npb25zOiAtIFVwZGF0ZUNoYW5uZWwgLSBVcGRhdGVDaGFubmVsQ29vbGRvd24gLSBVcGRhdGVDaGFubmVsRnJvemVuXG4gICAgICogUGFydGlhbGx5IHVwZGF0ZSBjaGFubmVsXG4gICAgICovXG4gICAgdXBkYXRlQ2hhbm5lbFBhcnRpYWwocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy51cGRhdGVDaGFubmVsUGFydGlhbFJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4geWllbGQgcmVzcG9uc2UudmFsdWUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG4vKiB0c2xpbnQ6ZGlzYWJsZSAqL1xuLyogZXNsaW50LWRpc2FibGUgKi9cbi8qKlxuICogU3RyZWFtIENoYXQgQVBJXG4gKiBObyBkZXNjcmlwdGlvbiBwcm92aWRlZCAoZ2VuZXJhdGVkIGJ5IE9wZW5hcGkgR2VuZXJhdG9yIGh0dHBzOi8vZ2l0aHViLmNvbS9vcGVuYXBpdG9vbHMvb3BlbmFwaS1nZW5lcmF0b3IpXG4gKlxuICogVGhlIHZlcnNpb24gb2YgdGhlIE9wZW5BUEkgZG9jdW1lbnQ6IHY5Mi43LjBcbiAqXG4gKlxuICogTk9URTogVGhpcyBjbGFzcyBpcyBhdXRvIGdlbmVyYXRlZCBieSBPcGVuQVBJIEdlbmVyYXRvciAoaHR0cHM6Ly9vcGVuYXBpLWdlbmVyYXRvci50ZWNoKS5cbiAqIGh0dHBzOi8vb3BlbmFwaS1nZW5lcmF0b3IudGVjaFxuICogRG8gbm90IGVkaXQgdGhlIGNsYXNzIG1hbnVhbGx5LlxuICovXG4vKipcbiAqXG4gKi9cbmNsYXNzIEN1c3RvbUNvbW1hbmRzQXBpIGV4dGVuZHMgQmFzZUFQSSQxIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGN1c3RvbSBjaGF0IGNvbW1hbmRcbiAgICAgKiBDcmVhdGUgY29tbWFuZFxuICAgICAqL1xuICAgIGNyZWF0ZUNvbW1hbmRSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy5jcmVhdGVDb21tYW5kUmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy5jcmVhdGVDb21tYW5kUmVxdWVzdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IkMSgnY3JlYXRlQ29tbWFuZFJlcXVlc3QnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLmNyZWF0ZUNvbW1hbmRSZXF1ZXN0IHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgY3JlYXRlQ29tbWFuZC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgY29uc3QgaGVhZGVyUGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1snQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbic7XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiU3RyZWFtLUF1dGgtVHlwZVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJTdHJlYW0tQXV0aC1UeXBlXCIpOyAvLyBzdHJlYW0tYXV0aC10eXBlIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbXCJhcGlfa2V5XCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcImFwaV9rZXlcIik7IC8vIGFwaV9rZXkgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJBdXRob3JpemF0aW9uXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIkF1dGhvcml6YXRpb25cIik7IC8vIEpXVCBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIHBhdGg6IGAvY29tbWFuZHNgLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBib2R5OiByZXF1ZXN0UGFyYW1ldGVycy5jcmVhdGVDb21tYW5kUmVxdWVzdCxcbiAgICAgICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBKU09OQXBpUmVzcG9uc2UkMShyZXNwb25zZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGN1c3RvbSBjaGF0IGNvbW1hbmRcbiAgICAgKiBDcmVhdGUgY29tbWFuZFxuICAgICAqL1xuICAgIGNyZWF0ZUNvbW1hbmQocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5jcmVhdGVDb21tYW5kUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCByZXNwb25zZS52YWx1ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVsZXRlcyBjdXN0b20gY2hhdCBjb21tYW5kXG4gICAgICogRGVsZXRlIGNvbW1hbmRcbiAgICAgKi9cbiAgICBkZWxldGVDb21tYW5kUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMubmFtZSA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy5uYW1lID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvciQxKCduYW1lJywgJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy5uYW1lIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZGVsZXRlQ29tbWFuZC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgY29uc3QgaGVhZGVyUGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIlN0cmVhbS1BdXRoLVR5cGVcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiU3RyZWFtLUF1dGgtVHlwZVwiKTsgLy8gc3RyZWFtLWF1dGgtdHlwZSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzW1wiYXBpX2tleVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJhcGlfa2V5XCIpOyAvLyBhcGlfa2V5IGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiQXV0aG9yaXphdGlvblwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJBdXRob3JpemF0aW9uXCIpOyAvLyBKV1QgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICBwYXRoOiBgL2NvbW1hbmRzL3tuYW1lfWAucmVwbGFjZShgeyR7XCJuYW1lXCJ9fWAsIGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVxdWVzdFBhcmFtZXRlcnMubmFtZSkpKSxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBKU09OQXBpUmVzcG9uc2UkMShyZXNwb25zZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWxldGVzIGN1c3RvbSBjaGF0IGNvbW1hbmRcbiAgICAgKiBEZWxldGUgY29tbWFuZFxuICAgICAqL1xuICAgIGRlbGV0ZUNvbW1hbmQocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5kZWxldGVDb21tYW5kUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCByZXNwb25zZS52YWx1ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBjdXN0b20gY29tbWFuZCBieSBpdHMgbmFtZVxuICAgICAqIEdldCBjb21tYW5kXG4gICAgICovXG4gICAgZ2V0Q29tbWFuZFJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLm5hbWUgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMubmFtZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IkMSgnbmFtZScsICdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVxdWVzdFBhcmFtZXRlcnMubmFtZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldENvbW1hbmQuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlclBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJTdHJlYW0tQXV0aC1UeXBlXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIlN0cmVhbS1BdXRoLVR5cGVcIik7IC8vIHN0cmVhbS1hdXRoLXR5cGUgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1tcImFwaV9rZXlcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiYXBpX2tleVwiKTsgLy8gYXBpX2tleSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiQXV0aG9yaXphdGlvblwiKTsgLy8gSldUIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgcGF0aDogYC9jb21tYW5kcy97bmFtZX1gLnJlcGxhY2UoYHske1wibmFtZVwifX1gLCBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJlcXVlc3RQYXJhbWV0ZXJzLm5hbWUpKSksXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICB9LCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgSlNPTkFwaVJlc3BvbnNlJDEocmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBjdXN0b20gY29tbWFuZCBieSBpdHMgbmFtZVxuICAgICAqIEdldCBjb21tYW5kXG4gICAgICovXG4gICAgZ2V0Q29tbWFuZChyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLmdldENvbW1hbmRSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIHlpZWxkIHJlc3BvbnNlLnZhbHVlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFsbCBjdXN0b20gY29tbWFuZHNcbiAgICAgKiBMaXN0IGNvbW1hbmRzXG4gICAgICovXG4gICAgbGlzdENvbW1hbmRzUmF3KGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgY29uc3QgaGVhZGVyUGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIlN0cmVhbS1BdXRoLVR5cGVcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiU3RyZWFtLUF1dGgtVHlwZVwiKTsgLy8gc3RyZWFtLWF1dGgtdHlwZSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzW1wiYXBpX2tleVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJhcGlfa2V5XCIpOyAvLyBhcGlfa2V5IGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiQXV0aG9yaXphdGlvblwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJBdXRob3JpemF0aW9uXCIpOyAvLyBKV1QgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICBwYXRoOiBgL2NvbW1hbmRzYCxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBKU09OQXBpUmVzcG9uc2UkMShyZXNwb25zZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFsbCBjdXN0b20gY29tbWFuZHNcbiAgICAgKiBMaXN0IGNvbW1hbmRzXG4gICAgICovXG4gICAgbGlzdENvbW1hbmRzKGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5saXN0Q29tbWFuZHNSYXcoaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4geWllbGQgcmVzcG9uc2UudmFsdWUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgY3VzdG9tIGNoYXQgY29tbWFuZFxuICAgICAqIFVwZGF0ZSBjb21tYW5kXG4gICAgICovXG4gICAgdXBkYXRlQ29tbWFuZFJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLm5hbWUgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMubmFtZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IkMSgnbmFtZScsICdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVxdWVzdFBhcmFtZXRlcnMubmFtZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVwZGF0ZUNvbW1hbmQuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMudXBkYXRlQ29tbWFuZFJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMudXBkYXRlQ29tbWFuZFJlcXVlc3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZXF1aXJlZEVycm9yJDEoJ3VwZGF0ZUNvbW1hbmRSZXF1ZXN0JywgJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy51cGRhdGVDb21tYW5kUmVxdWVzdCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVwZGF0ZUNvbW1hbmQuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlclBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbJ0NvbnRlbnQtVHlwZSddID0gJ2FwcGxpY2F0aW9uL2pzb24nO1xuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIlN0cmVhbS1BdXRoLVR5cGVcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiU3RyZWFtLUF1dGgtVHlwZVwiKTsgLy8gc3RyZWFtLWF1dGgtdHlwZSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzW1wiYXBpX2tleVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJhcGlfa2V5XCIpOyAvLyBhcGlfa2V5IGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiQXV0aG9yaXphdGlvblwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJBdXRob3JpemF0aW9uXCIpOyAvLyBKV1QgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICBwYXRoOiBgL2NvbW1hbmRzL3tuYW1lfWAucmVwbGFjZShgeyR7XCJuYW1lXCJ9fWAsIGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVxdWVzdFBhcmFtZXRlcnMubmFtZSkpKSxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQVVQnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBib2R5OiByZXF1ZXN0UGFyYW1ldGVycy51cGRhdGVDb21tYW5kUmVxdWVzdCxcbiAgICAgICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBKU09OQXBpUmVzcG9uc2UkMShyZXNwb25zZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIGN1c3RvbSBjaGF0IGNvbW1hbmRcbiAgICAgKiBVcGRhdGUgY29tbWFuZFxuICAgICAqL1xuICAgIHVwZGF0ZUNvbW1hbmQocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy51cGRhdGVDb21tYW5kUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCByZXNwb25zZS52YWx1ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5cbi8qIHRzbGludDpkaXNhYmxlICovXG4vKiBlc2xpbnQtZGlzYWJsZSAqL1xuLyoqXG4gKiBTdHJlYW0gQ2hhdCBBUElcbiAqIE5vIGRlc2NyaXB0aW9uIHByb3ZpZGVkIChnZW5lcmF0ZWQgYnkgT3BlbmFwaSBHZW5lcmF0b3IgaHR0cHM6Ly9naXRodWIuY29tL29wZW5hcGl0b29scy9vcGVuYXBpLWdlbmVyYXRvcilcbiAqXG4gKiBUaGUgdmVyc2lvbiBvZiB0aGUgT3BlbkFQSSBkb2N1bWVudDogdjkyLjcuMFxuICpcbiAqXG4gKiBOT1RFOiBUaGlzIGNsYXNzIGlzIGF1dG8gZ2VuZXJhdGVkIGJ5IE9wZW5BUEkgR2VuZXJhdG9yIChodHRwczovL29wZW5hcGktZ2VuZXJhdG9yLnRlY2gpLlxuICogaHR0cHM6Ly9vcGVuYXBpLWdlbmVyYXRvci50ZWNoXG4gKiBEbyBub3QgZWRpdCB0aGUgY2xhc3MgbWFudWFsbHkuXG4gKi9cbi8qKlxuICpcbiAqL1xuY2xhc3MgRGV2aWNlc0FwaSBleHRlbmRzIEJhc2VBUEkkMSB7XG4gICAgLyoqXG4gICAgICogQWRkcyBhIG5ldyBkZXZpY2UgdG8gYSB1c2VyLCBpZiB0aGUgc2FtZSBkZXZpY2UgYWxyZWFkeSBleGlzdHMgdGhlIGNhbGwgd2lsbCBoYXZlIG5vIGVmZmVjdFxuICAgICAqIENyZWF0ZSBkZXZpY2VcbiAgICAgKi9cbiAgICBjcmVhdGVEZXZpY2VSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy5jcmVhdGVEZXZpY2VSZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3RQYXJhbWV0ZXJzLmNyZWF0ZURldmljZVJlcXVlc3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZXF1aXJlZEVycm9yJDEoJ2NyZWF0ZURldmljZVJlcXVlc3QnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLmNyZWF0ZURldmljZVJlcXVlc3Qgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBjcmVhdGVEZXZpY2UuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlclBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbJ0NvbnRlbnQtVHlwZSddID0gJ2FwcGxpY2F0aW9uL2pzb24nO1xuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIlN0cmVhbS1BdXRoLVR5cGVcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiU3RyZWFtLUF1dGgtVHlwZVwiKTsgLy8gc3RyZWFtLWF1dGgtdHlwZSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzW1wiYXBpX2tleVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJhcGlfa2V5XCIpOyAvLyBhcGlfa2V5IGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiQXV0aG9yaXphdGlvblwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJBdXRob3JpemF0aW9uXCIpOyAvLyBKV1QgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICBwYXRoOiBgL2RldmljZXNgLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBib2R5OiByZXF1ZXN0UGFyYW1ldGVycy5jcmVhdGVEZXZpY2VSZXF1ZXN0LFxuICAgICAgICAgICAgfSwgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFZvaWRBcGlSZXNwb25zZSQxKHJlc3BvbnNlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgYSBuZXcgZGV2aWNlIHRvIGEgdXNlciwgaWYgdGhlIHNhbWUgZGV2aWNlIGFscmVhZHkgZXhpc3RzIHRoZSBjYWxsIHdpbGwgaGF2ZSBubyBlZmZlY3RcbiAgICAgKiBDcmVhdGUgZGV2aWNlXG4gICAgICovXG4gICAgY3JlYXRlRGV2aWNlKHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB5aWVsZCB0aGlzLmNyZWF0ZURldmljZVJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWxldGVzIG9uZSBkZXZpY2VcbiAgICAgKiBEZWxldGUgZGV2aWNlXG4gICAgICovXG4gICAgZGVsZXRlRGV2aWNlUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy5pZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzWydpZCddID0gcmVxdWVzdFBhcmFtZXRlcnMuaWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMudXNlcklkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbJ3VzZXJfaWQnXSA9IHJlcXVlc3RQYXJhbWV0ZXJzLnVzZXJJZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGhlYWRlclBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJTdHJlYW0tQXV0aC1UeXBlXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIlN0cmVhbS1BdXRoLVR5cGVcIik7IC8vIHN0cmVhbS1hdXRoLXR5cGUgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1tcImFwaV9rZXlcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiYXBpX2tleVwiKTsgLy8gYXBpX2tleSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiQXV0aG9yaXphdGlvblwiKTsgLy8gSldUIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgcGF0aDogYC9kZXZpY2VzYCxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBKU09OQXBpUmVzcG9uc2UkMShyZXNwb25zZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWxldGVzIG9uZSBkZXZpY2VcbiAgICAgKiBEZWxldGUgZGV2aWNlXG4gICAgICovXG4gICAgZGVsZXRlRGV2aWNlKHJlcXVlc3RQYXJhbWV0ZXJzID0ge30sIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5kZWxldGVEZXZpY2VSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIHlpZWxkIHJlc3BvbnNlLnZhbHVlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFsbCBhdmFpbGFibGUgZGV2aWNlc1xuICAgICAqIExpc3QgZGV2aWNlc1xuICAgICAqL1xuICAgIGxpc3REZXZpY2VzUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy51c2VySWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1sndXNlcl9pZCddID0gcmVxdWVzdFBhcmFtZXRlcnMudXNlcklkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgaGVhZGVyUGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIlN0cmVhbS1BdXRoLVR5cGVcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiU3RyZWFtLUF1dGgtVHlwZVwiKTsgLy8gc3RyZWFtLWF1dGgtdHlwZSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzW1wiYXBpX2tleVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJhcGlfa2V5XCIpOyAvLyBhcGlfa2V5IGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiQXV0aG9yaXphdGlvblwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJBdXRob3JpemF0aW9uXCIpOyAvLyBKV1QgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICBwYXRoOiBgL2RldmljZXNgLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVyUGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBxdWVyeTogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgfSwgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEpTT05BcGlSZXNwb25zZSQxKHJlc3BvbnNlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYWxsIGF2YWlsYWJsZSBkZXZpY2VzXG4gICAgICogTGlzdCBkZXZpY2VzXG4gICAgICovXG4gICAgbGlzdERldmljZXMocmVxdWVzdFBhcmFtZXRlcnMgPSB7fSwgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLmxpc3REZXZpY2VzUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCByZXNwb25zZS52YWx1ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5cbi8qIHRzbGludDpkaXNhYmxlICovXG4vKiBlc2xpbnQtZGlzYWJsZSAqL1xuLyoqXG4gKiBTdHJlYW0gQ2hhdCBBUElcbiAqIE5vIGRlc2NyaXB0aW9uIHByb3ZpZGVkIChnZW5lcmF0ZWQgYnkgT3BlbmFwaSBHZW5lcmF0b3IgaHR0cHM6Ly9naXRodWIuY29tL29wZW5hcGl0b29scy9vcGVuYXBpLWdlbmVyYXRvcilcbiAqXG4gKiBUaGUgdmVyc2lvbiBvZiB0aGUgT3BlbkFQSSBkb2N1bWVudDogdjkyLjcuMFxuICpcbiAqXG4gKiBOT1RFOiBUaGlzIGNsYXNzIGlzIGF1dG8gZ2VuZXJhdGVkIGJ5IE9wZW5BUEkgR2VuZXJhdG9yIChodHRwczovL29wZW5hcGktZ2VuZXJhdG9yLnRlY2gpLlxuICogaHR0cHM6Ly9vcGVuYXBpLWdlbmVyYXRvci50ZWNoXG4gKiBEbyBub3QgZWRpdCB0aGUgY2xhc3MgbWFudWFsbHkuXG4gKi9cbi8qKlxuICpcbiAqL1xuY2xhc3MgRXZlbnRzQXBpIGV4dGVuZHMgQmFzZUFQSSQxIHtcbiAgICAvKipcbiAgICAgKiBTZW5kcyBldmVudCB0byB0aGUgY2hhbm5lbCAgU2VuZHMgZXZlbnRzOiAtIGFueSAgUmVxdWlyZWQgcGVybWlzc2lvbnM6IC0gU2VuZEN1c3RvbUV2ZW50XG4gICAgICogU2VuZCBldmVudFxuICAgICAqL1xuICAgIHNlbmRFdmVudFJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLnR5cGUgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMudHlwZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IkMSgndHlwZScsICdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVxdWVzdFBhcmFtZXRlcnMudHlwZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHNlbmRFdmVudC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy5pZCA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy5pZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IkMSgnaWQnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLmlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgc2VuZEV2ZW50LicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLnNlbmRFdmVudFJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMuc2VuZEV2ZW50UmVxdWVzdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IkMSgnc2VuZEV2ZW50UmVxdWVzdCcsICdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVxdWVzdFBhcmFtZXRlcnMuc2VuZEV2ZW50UmVxdWVzdCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHNlbmRFdmVudC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgY29uc3QgaGVhZGVyUGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1snQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbic7XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiU3RyZWFtLUF1dGgtVHlwZVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJTdHJlYW0tQXV0aC1UeXBlXCIpOyAvLyBzdHJlYW0tYXV0aC10eXBlIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbXCJhcGlfa2V5XCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcImFwaV9rZXlcIik7IC8vIGFwaV9rZXkgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJBdXRob3JpemF0aW9uXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIkF1dGhvcml6YXRpb25cIik7IC8vIEpXVCBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIHBhdGg6IGAvY2hhbm5lbHMve3R5cGV9L3tpZH0vZXZlbnRgLnJlcGxhY2UoYHske1widHlwZVwifX1gLCBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJlcXVlc3RQYXJhbWV0ZXJzLnR5cGUpKSkucmVwbGFjZShgeyR7XCJpZFwifX1gLCBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJlcXVlc3RQYXJhbWV0ZXJzLmlkKSkpLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBib2R5OiByZXF1ZXN0UGFyYW1ldGVycy5zZW5kRXZlbnRSZXF1ZXN0LFxuICAgICAgICAgICAgfSwgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEpTT05BcGlSZXNwb25zZSQxKHJlc3BvbnNlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmRzIGV2ZW50IHRvIHRoZSBjaGFubmVsICBTZW5kcyBldmVudHM6IC0gYW55ICBSZXF1aXJlZCBwZXJtaXNzaW9uczogLSBTZW5kQ3VzdG9tRXZlbnRcbiAgICAgKiBTZW5kIGV2ZW50XG4gICAgICovXG4gICAgc2VuZEV2ZW50KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuc2VuZEV2ZW50UmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCByZXNwb25zZS52YWx1ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZHMgYSBjdXN0b20gZXZlbnQgdG8gYSB1c2VyICBTZW5kcyBldmVudHM6IC0gY3VzdG9tXG4gICAgICogU2VuZCB1c2VyIGV2ZW50XG4gICAgICovXG4gICAgc2VuZFVzZXJDdXN0b21FdmVudFJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLnVzZXJJZCA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy51c2VySWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZXF1aXJlZEVycm9yJDEoJ3VzZXJJZCcsICdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVxdWVzdFBhcmFtZXRlcnMudXNlcklkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgc2VuZFVzZXJDdXN0b21FdmVudC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy5zZW5kVXNlckN1c3RvbUV2ZW50UmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy5zZW5kVXNlckN1c3RvbUV2ZW50UmVxdWVzdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IkMSgnc2VuZFVzZXJDdXN0b21FdmVudFJlcXVlc3QnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLnNlbmRVc2VyQ3VzdG9tRXZlbnRSZXF1ZXN0IHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgc2VuZFVzZXJDdXN0b21FdmVudC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgY29uc3QgaGVhZGVyUGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1snQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbic7XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiU3RyZWFtLUF1dGgtVHlwZVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJTdHJlYW0tQXV0aC1UeXBlXCIpOyAvLyBzdHJlYW0tYXV0aC10eXBlIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbXCJhcGlfa2V5XCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcImFwaV9rZXlcIik7IC8vIGFwaV9rZXkgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJBdXRob3JpemF0aW9uXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIkF1dGhvcml6YXRpb25cIik7IC8vIEpXVCBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIHBhdGg6IGAvdXNlcnMve3VzZXJfaWR9L2V2ZW50YC5yZXBsYWNlKGB7JHtcInVzZXJfaWRcIn19YCwgZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhyZXF1ZXN0UGFyYW1ldGVycy51c2VySWQpKSksXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVyUGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBxdWVyeTogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIGJvZHk6IHJlcXVlc3RQYXJhbWV0ZXJzLnNlbmRVc2VyQ3VzdG9tRXZlbnRSZXF1ZXN0LFxuICAgICAgICAgICAgfSwgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEpTT05BcGlSZXNwb25zZSQxKHJlc3BvbnNlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmRzIGEgY3VzdG9tIGV2ZW50IHRvIGEgdXNlciAgU2VuZHMgZXZlbnRzOiAtIGN1c3RvbVxuICAgICAqIFNlbmQgdXNlciBldmVudFxuICAgICAqL1xuICAgIHNlbmRVc2VyQ3VzdG9tRXZlbnQocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kVXNlckN1c3RvbUV2ZW50UmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCByZXNwb25zZS52YWx1ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5cbi8qIHRzbGludDpkaXNhYmxlICovXG4vKiBlc2xpbnQtZGlzYWJsZSAqL1xuLyoqXG4gKiBTdHJlYW0gQ2hhdCBBUElcbiAqIE5vIGRlc2NyaXB0aW9uIHByb3ZpZGVkIChnZW5lcmF0ZWQgYnkgT3BlbmFwaSBHZW5lcmF0b3IgaHR0cHM6Ly9naXRodWIuY29tL29wZW5hcGl0b29scy9vcGVuYXBpLWdlbmVyYXRvcilcbiAqXG4gKiBUaGUgdmVyc2lvbiBvZiB0aGUgT3BlbkFQSSBkb2N1bWVudDogdjkyLjcuMFxuICpcbiAqXG4gKiBOT1RFOiBUaGlzIGNsYXNzIGlzIGF1dG8gZ2VuZXJhdGVkIGJ5IE9wZW5BUEkgR2VuZXJhdG9yIChodHRwczovL29wZW5hcGktZ2VuZXJhdG9yLnRlY2gpLlxuICogaHR0cHM6Ly9vcGVuYXBpLWdlbmVyYXRvci50ZWNoXG4gKiBEbyBub3QgZWRpdCB0aGUgY2xhc3MgbWFudWFsbHkuXG4gKi9cbi8qKlxuICpcbiAqL1xuY2xhc3MgTWVzc2FnZXNBcGkgZXh0ZW5kcyBCYXNlQVBJJDEge1xuICAgIC8qKlxuICAgICAqIERlbGV0ZXMgcHJldmlvdXNseSB1cGxvYWRlZCBmaWxlICBSZXF1aXJlZCBwZXJtaXNzaW9uczogLSBEZWxldGVBdHRhY2htZW50XG4gICAgICogRGVsZXRlIGZpbGVcbiAgICAgKi9cbiAgICBkZWxldGVGaWxlUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMudHlwZSA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy50eXBlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvciQxKCd0eXBlJywgJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy50eXBlIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZGVsZXRlRmlsZS4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy5pZCA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy5pZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IkMSgnaWQnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLmlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZGVsZXRlRmlsZS4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLnVybCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzWyd1cmwnXSA9IHJlcXVlc3RQYXJhbWV0ZXJzLnVybDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGhlYWRlclBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJTdHJlYW0tQXV0aC1UeXBlXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIlN0cmVhbS1BdXRoLVR5cGVcIik7IC8vIHN0cmVhbS1hdXRoLXR5cGUgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1tcImFwaV9rZXlcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiYXBpX2tleVwiKTsgLy8gYXBpX2tleSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiQXV0aG9yaXphdGlvblwiKTsgLy8gSldUIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgcGF0aDogYC9jaGFubmVscy97dHlwZX0ve2lkfS9maWxlYC5yZXBsYWNlKGB7JHtcInR5cGVcIn19YCwgZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhyZXF1ZXN0UGFyYW1ldGVycy50eXBlKSkpLnJlcGxhY2UoYHske1wiaWRcIn19YCwgZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhyZXF1ZXN0UGFyYW1ldGVycy5pZCkpKSxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBKU09OQXBpUmVzcG9uc2UkMShyZXNwb25zZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWxldGVzIHByZXZpb3VzbHkgdXBsb2FkZWQgZmlsZSAgUmVxdWlyZWQgcGVybWlzc2lvbnM6IC0gRGVsZXRlQXR0YWNobWVudFxuICAgICAqIERlbGV0ZSBmaWxlXG4gICAgICovXG4gICAgZGVsZXRlRmlsZShyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLmRlbGV0ZUZpbGVSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIHlpZWxkIHJlc3BvbnNlLnZhbHVlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWxldGVzIHByZXZpb3VzbHkgdXBsb2FkZWQgaW1hZ2UgIFJlcXVpcmVkIHBlcm1pc3Npb25zOiAtIERlbGV0ZUF0dGFjaG1lbnRcbiAgICAgKiBEZWxldGUgaW1hZ2VcbiAgICAgKi9cbiAgICBkZWxldGVJbWFnZVJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLnR5cGUgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMudHlwZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IkMSgndHlwZScsICdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVxdWVzdFBhcmFtZXRlcnMudHlwZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGRlbGV0ZUltYWdlLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLmlkID09PSBudWxsIHx8IHJlcXVlc3RQYXJhbWV0ZXJzLmlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvciQxKCdpZCcsICdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVxdWVzdFBhcmFtZXRlcnMuaWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBkZWxldGVJbWFnZS4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLnVybCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzWyd1cmwnXSA9IHJlcXVlc3RQYXJhbWV0ZXJzLnVybDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGhlYWRlclBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJTdHJlYW0tQXV0aC1UeXBlXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIlN0cmVhbS1BdXRoLVR5cGVcIik7IC8vIHN0cmVhbS1hdXRoLXR5cGUgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1tcImFwaV9rZXlcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiYXBpX2tleVwiKTsgLy8gYXBpX2tleSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiQXV0aG9yaXphdGlvblwiKTsgLy8gSldUIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgcGF0aDogYC9jaGFubmVscy97dHlwZX0ve2lkfS9pbWFnZWAucmVwbGFjZShgeyR7XCJ0eXBlXCJ9fWAsIGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVxdWVzdFBhcmFtZXRlcnMudHlwZSkpKS5yZXBsYWNlKGB7JHtcImlkXCJ9fWAsIGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVxdWVzdFBhcmFtZXRlcnMuaWQpKSksXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICB9LCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgSlNPTkFwaVJlc3BvbnNlJDEocmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVsZXRlcyBwcmV2aW91c2x5IHVwbG9hZGVkIGltYWdlICBSZXF1aXJlZCBwZXJtaXNzaW9uczogLSBEZWxldGVBdHRhY2htZW50XG4gICAgICogRGVsZXRlIGltYWdlXG4gICAgICovXG4gICAgZGVsZXRlSW1hZ2UocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5kZWxldGVJbWFnZVJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4geWllbGQgcmVzcG9uc2UudmFsdWUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlbGV0ZXMgbWVzc2FnZSAgU2VuZHMgZXZlbnRzOiAtIG1lc3NhZ2UuZGVsZXRlZCAgUmVxdWlyZWQgcGVybWlzc2lvbnM6IC0gRGVsZXRlTWVzc2FnZVxuICAgICAqIERlbGV0ZSBtZXNzYWdlXG4gICAgICovXG4gICAgZGVsZXRlTWVzc2FnZVJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLmlkID09PSBudWxsIHx8IHJlcXVlc3RQYXJhbWV0ZXJzLmlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvciQxKCdpZCcsICdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVxdWVzdFBhcmFtZXRlcnMuaWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBkZWxldGVNZXNzYWdlLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMuaGFyZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzWydoYXJkJ10gPSByZXF1ZXN0UGFyYW1ldGVycy5oYXJkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLmRlbGV0ZWRCeSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzWydkZWxldGVkX2J5J10gPSByZXF1ZXN0UGFyYW1ldGVycy5kZWxldGVkQnk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiU3RyZWFtLUF1dGgtVHlwZVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJTdHJlYW0tQXV0aC1UeXBlXCIpOyAvLyBzdHJlYW0tYXV0aC10eXBlIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbXCJhcGlfa2V5XCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcImFwaV9rZXlcIik7IC8vIGFwaV9rZXkgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJBdXRob3JpemF0aW9uXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIkF1dGhvcml6YXRpb25cIik7IC8vIEpXVCBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIHBhdGg6IGAvbWVzc2FnZXMve2lkfWAucmVwbGFjZShgeyR7XCJpZFwifX1gLCBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJlcXVlc3RQYXJhbWV0ZXJzLmlkKSkpLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVyUGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBxdWVyeTogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgfSwgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEpTT05BcGlSZXNwb25zZSQxKHJlc3BvbnNlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlbGV0ZXMgbWVzc2FnZSAgU2VuZHMgZXZlbnRzOiAtIG1lc3NhZ2UuZGVsZXRlZCAgUmVxdWlyZWQgcGVybWlzc2lvbnM6IC0gRGVsZXRlTWVzc2FnZVxuICAgICAqIERlbGV0ZSBtZXNzYWdlXG4gICAgICovXG4gICAgZGVsZXRlTWVzc2FnZShyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLmRlbGV0ZU1lc3NhZ2VSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIHlpZWxkIHJlc3BvbnNlLnZhbHVlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIHVzZXIgcmVhY3Rpb24gZnJvbSB0aGUgbWVzc2FnZSAgU2VuZHMgZXZlbnRzOiAtIHJlYWN0aW9uLmRlbGV0ZWQgIFJlcXVpcmVkIHBlcm1pc3Npb25zOiAtIERlbGV0ZVJlYWN0aW9uXG4gICAgICogRGVsZXRlIHJlYWN0aW9uXG4gICAgICovXG4gICAgZGVsZXRlUmVhY3Rpb25SYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy5pZCA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy5pZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IkMSgnaWQnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLmlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZGVsZXRlUmVhY3Rpb24uJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMudHlwZSA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy50eXBlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvciQxKCd0eXBlJywgJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy50eXBlIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZGVsZXRlUmVhY3Rpb24uJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy51c2VySWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1sndXNlcl9pZCddID0gcmVxdWVzdFBhcmFtZXRlcnMudXNlcklkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgaGVhZGVyUGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIlN0cmVhbS1BdXRoLVR5cGVcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiU3RyZWFtLUF1dGgtVHlwZVwiKTsgLy8gc3RyZWFtLWF1dGgtdHlwZSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzW1wiYXBpX2tleVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJhcGlfa2V5XCIpOyAvLyBhcGlfa2V5IGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiQXV0aG9yaXphdGlvblwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJBdXRob3JpemF0aW9uXCIpOyAvLyBKV1QgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICBwYXRoOiBgL21lc3NhZ2VzL3tpZH0vcmVhY3Rpb24ve3R5cGV9YC5yZXBsYWNlKGB7JHtcImlkXCJ9fWAsIGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVxdWVzdFBhcmFtZXRlcnMuaWQpKSkucmVwbGFjZShgeyR7XCJ0eXBlXCJ9fWAsIGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVxdWVzdFBhcmFtZXRlcnMudHlwZSkpKSxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBKU09OQXBpUmVzcG9uc2UkMShyZXNwb25zZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIHVzZXIgcmVhY3Rpb24gZnJvbSB0aGUgbWVzc2FnZSAgU2VuZHMgZXZlbnRzOiAtIHJlYWN0aW9uLmRlbGV0ZWQgIFJlcXVpcmVkIHBlcm1pc3Npb25zOiAtIERlbGV0ZVJlYWN0aW9uXG4gICAgICogRGVsZXRlIHJlYWN0aW9uXG4gICAgICovXG4gICAgZGVsZXRlUmVhY3Rpb24ocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5kZWxldGVSZWFjdGlvblJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4geWllbGQgcmVzcG9uc2UudmFsdWUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlcG9ydHMgbWVzc2FnZSBvciB1c2VyIGZvciByZXZpZXcgYnkgbW9kZXJhdG9ycyAgU2VuZHMgZXZlbnRzOiAtIG1lc3NhZ2UuZmxhZ2dlZCAtIHVzZXIuZmxhZ2dlZCAgUmVxdWlyZWQgcGVybWlzc2lvbnM6IC0gRmxhZ01lc3NhZ2UgLSBGbGFnVXNlclxuICAgICAqIEZsYWdcbiAgICAgKi9cbiAgICBmbGFnUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMuZmxhZ1JlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMuZmxhZ1JlcXVlc3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZXF1aXJlZEVycm9yJDEoJ2ZsYWdSZXF1ZXN0JywgJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy5mbGFnUmVxdWVzdCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGZsYWcuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlclBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbJ0NvbnRlbnQtVHlwZSddID0gJ2FwcGxpY2F0aW9uL2pzb24nO1xuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIlN0cmVhbS1BdXRoLVR5cGVcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiU3RyZWFtLUF1dGgtVHlwZVwiKTsgLy8gc3RyZWFtLWF1dGgtdHlwZSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzW1wiYXBpX2tleVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJhcGlfa2V5XCIpOyAvLyBhcGlfa2V5IGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiQXV0aG9yaXphdGlvblwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJBdXRob3JpemF0aW9uXCIpOyAvLyBKV1QgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICBwYXRoOiBgL21vZGVyYXRpb24vZmxhZ2AsXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVyUGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBxdWVyeTogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIGJvZHk6IHJlcXVlc3RQYXJhbWV0ZXJzLmZsYWdSZXF1ZXN0LFxuICAgICAgICAgICAgfSwgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEpTT05BcGlSZXNwb25zZSQxKHJlc3BvbnNlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlcG9ydHMgbWVzc2FnZSBvciB1c2VyIGZvciByZXZpZXcgYnkgbW9kZXJhdG9ycyAgU2VuZHMgZXZlbnRzOiAtIG1lc3NhZ2UuZmxhZ2dlZCAtIHVzZXIuZmxhZ2dlZCAgUmVxdWlyZWQgcGVybWlzc2lvbnM6IC0gRmxhZ01lc3NhZ2UgLSBGbGFnVXNlclxuICAgICAqIEZsYWdcbiAgICAgKi9cbiAgICBmbGFnKHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuZmxhZ1JhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4geWllbGQgcmVzcG9uc2UudmFsdWUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgbGlzdCBtZXNzYWdlcyBmb3VuZCBieSBJRHMgIFJlcXVpcmVkIHBlcm1pc3Npb25zOiAtIFJlYWRDaGFubmVsXG4gICAgICogR2V0IG1hbnkgbWVzc2FnZXNcbiAgICAgKi9cbiAgICBnZXRNYW55TWVzc2FnZXNSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy50eXBlID09PSBudWxsIHx8IHJlcXVlc3RQYXJhbWV0ZXJzLnR5cGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZXF1aXJlZEVycm9yJDEoJ3R5cGUnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLnR5cGUgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRNYW55TWVzc2FnZXMuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMuaWQgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMuaWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZXF1aXJlZEVycm9yJDEoJ2lkJywgJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy5pZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldE1hbnlNZXNzYWdlcy4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLmlkcykge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1snaWRzJ10gPSByZXF1ZXN0UGFyYW1ldGVycy5pZHMuam9pbignLCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgaGVhZGVyUGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIlN0cmVhbS1BdXRoLVR5cGVcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiU3RyZWFtLUF1dGgtVHlwZVwiKTsgLy8gc3RyZWFtLWF1dGgtdHlwZSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzW1wiYXBpX2tleVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJhcGlfa2V5XCIpOyAvLyBhcGlfa2V5IGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiQXV0aG9yaXphdGlvblwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJBdXRob3JpemF0aW9uXCIpOyAvLyBKV1QgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICBwYXRoOiBgL2NoYW5uZWxzL3t0eXBlfS97aWR9L21lc3NhZ2VzYC5yZXBsYWNlKGB7JHtcInR5cGVcIn19YCwgZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhyZXF1ZXN0UGFyYW1ldGVycy50eXBlKSkpLnJlcGxhY2UoYHske1wiaWRcIn19YCwgZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhyZXF1ZXN0UGFyYW1ldGVycy5pZCkpKSxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBKU09OQXBpUmVzcG9uc2UkMShyZXNwb25zZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGxpc3QgbWVzc2FnZXMgZm91bmQgYnkgSURzICBSZXF1aXJlZCBwZXJtaXNzaW9uczogLSBSZWFkQ2hhbm5lbFxuICAgICAqIEdldCBtYW55IG1lc3NhZ2VzXG4gICAgICovXG4gICAgZ2V0TWFueU1lc3NhZ2VzKHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuZ2V0TWFueU1lc3NhZ2VzUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCByZXNwb25zZS52YWx1ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBtZXNzYWdlIGJ5IElEICBSZXF1aXJlZCBwZXJtaXNzaW9uczogLSBSZWFkQ2hhbm5lbFxuICAgICAqIEdldCBtZXNzYWdlXG4gICAgICovXG4gICAgZ2V0TWVzc2FnZVJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLmlkID09PSBudWxsIHx8IHJlcXVlc3RQYXJhbWV0ZXJzLmlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvciQxKCdpZCcsICdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVxdWVzdFBhcmFtZXRlcnMuaWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRNZXNzYWdlLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiU3RyZWFtLUF1dGgtVHlwZVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJTdHJlYW0tQXV0aC1UeXBlXCIpOyAvLyBzdHJlYW0tYXV0aC10eXBlIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbXCJhcGlfa2V5XCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcImFwaV9rZXlcIik7IC8vIGFwaV9rZXkgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJBdXRob3JpemF0aW9uXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIkF1dGhvcml6YXRpb25cIik7IC8vIEpXVCBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIHBhdGg6IGAvbWVzc2FnZXMve2lkfWAucmVwbGFjZShgeyR7XCJpZFwifX1gLCBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJlcXVlc3RQYXJhbWV0ZXJzLmlkKSkpLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVyUGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBxdWVyeTogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgfSwgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEpTT05BcGlSZXNwb25zZSQxKHJlc3BvbnNlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgbWVzc2FnZSBieSBJRCAgUmVxdWlyZWQgcGVybWlzc2lvbnM6IC0gUmVhZENoYW5uZWxcbiAgICAgKiBHZXQgbWVzc2FnZVxuICAgICAqL1xuICAgIGdldE1lc3NhZ2UocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5nZXRNZXNzYWdlUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCByZXNwb25zZS52YWx1ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IGFuIE9wZW5HcmFwaCBhdHRhY2htZW50IGZvciBhIGxpbmtcbiAgICAgKiBHZXQgT0dcbiAgICAgKi9cbiAgICBnZXRPR1JhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMudXJsICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbJ3VybCddID0gcmVxdWVzdFBhcmFtZXRlcnMudXJsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgaGVhZGVyUGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIlN0cmVhbS1BdXRoLVR5cGVcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiU3RyZWFtLUF1dGgtVHlwZVwiKTsgLy8gc3RyZWFtLWF1dGgtdHlwZSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzW1wiYXBpX2tleVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJhcGlfa2V5XCIpOyAvLyBhcGlfa2V5IGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiQXV0aG9yaXphdGlvblwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJBdXRob3JpemF0aW9uXCIpOyAvLyBKV1QgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICBwYXRoOiBgL29nYCxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBKU09OQXBpUmVzcG9uc2UkMShyZXNwb25zZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgYW4gT3BlbkdyYXBoIGF0dGFjaG1lbnQgZm9yIGEgbGlua1xuICAgICAqIEdldCBPR1xuICAgICAqL1xuICAgIGdldE9HKHJlcXVlc3RQYXJhbWV0ZXJzID0ge30sIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5nZXRPR1JhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4geWllbGQgcmVzcG9uc2UudmFsdWUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgbGlzdCBvZiByZWFjdGlvbnMgb2Ygc3BlY2lmaWMgbWVzc2FnZSAgUmVxdWlyZWQgcGVybWlzc2lvbnM6IC0gUmVhZENoYW5uZWxcbiAgICAgKiBHZXQgcmVhY3Rpb25zXG4gICAgICovXG4gICAgZ2V0UmVhY3Rpb25zUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMuaWQgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMuaWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZXF1aXJlZEVycm9yJDEoJ2lkJywgJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy5pZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldFJlYWN0aW9ucy4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLmxpbWl0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbJ2xpbWl0J10gPSByZXF1ZXN0UGFyYW1ldGVycy5saW1pdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy5vZmZzZXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1snb2Zmc2V0J10gPSByZXF1ZXN0UGFyYW1ldGVycy5vZmZzZXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiU3RyZWFtLUF1dGgtVHlwZVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJTdHJlYW0tQXV0aC1UeXBlXCIpOyAvLyBzdHJlYW0tYXV0aC10eXBlIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbXCJhcGlfa2V5XCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcImFwaV9rZXlcIik7IC8vIGFwaV9rZXkgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJBdXRob3JpemF0aW9uXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIkF1dGhvcml6YXRpb25cIik7IC8vIEpXVCBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIHBhdGg6IGAvbWVzc2FnZXMve2lkfS9yZWFjdGlvbnNgLnJlcGxhY2UoYHske1wiaWRcIn19YCwgZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhyZXF1ZXN0UGFyYW1ldGVycy5pZCkpKSxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBKU09OQXBpUmVzcG9uc2UkMShyZXNwb25zZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGxpc3Qgb2YgcmVhY3Rpb25zIG9mIHNwZWNpZmljIG1lc3NhZ2UgIFJlcXVpcmVkIHBlcm1pc3Npb25zOiAtIFJlYWRDaGFubmVsXG4gICAgICogR2V0IHJlYWN0aW9uc1xuICAgICAqL1xuICAgIGdldFJlYWN0aW9ucyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLmdldFJlYWN0aW9uc1JhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4geWllbGQgcmVzcG9uc2UudmFsdWUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgcmVwbGllcyAodGhyZWFkKSBvZiB0aGUgbWVzc2FnZSAgUmVxdWlyZWQgcGVybWlzc2lvbnM6IC0gUmVhZENoYW5uZWxcbiAgICAgKiBHZXQgcmVwbGllc1xuICAgICAqL1xuICAgIGdldFJlcGxpZXNSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy5wYXJlbnRJZCA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy5wYXJlbnRJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IkMSgncGFyZW50SWQnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLnBhcmVudElkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0UmVwbGllcy4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLmlkR3RlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbJ2lkX2d0ZSddID0gcmVxdWVzdFBhcmFtZXRlcnMuaWRHdGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMuaWRHdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzWydpZF9ndCddID0gcmVxdWVzdFBhcmFtZXRlcnMuaWRHdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy5pZEx0ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzWydpZF9sdGUnXSA9IHJlcXVlc3RQYXJhbWV0ZXJzLmlkTHRlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLmlkTHQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1snaWRfbHQnXSA9IHJlcXVlc3RQYXJhbWV0ZXJzLmlkTHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMuY3JlYXRlZEF0QWZ0ZXJPckVxdWFsICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbJ2NyZWF0ZWRfYXRfYWZ0ZXJfb3JfZXF1YWwnXSA9IHJlcXVlc3RQYXJhbWV0ZXJzLmNyZWF0ZWRBdEFmdGVyT3JFcXVhbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy5jcmVhdGVkQXRBZnRlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzWydjcmVhdGVkX2F0X2FmdGVyJ10gPSByZXF1ZXN0UGFyYW1ldGVycy5jcmVhdGVkQXRBZnRlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy5jcmVhdGVkQXRCZWZvcmVPckVxdWFsICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbJ2NyZWF0ZWRfYXRfYmVmb3JlX29yX2VxdWFsJ10gPSByZXF1ZXN0UGFyYW1ldGVycy5jcmVhdGVkQXRCZWZvcmVPckVxdWFsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLmNyZWF0ZWRBdEJlZm9yZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzWydjcmVhdGVkX2F0X2JlZm9yZSddID0gcmVxdWVzdFBhcmFtZXRlcnMuY3JlYXRlZEF0QmVmb3JlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLmlkQXJvdW5kICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbJ2lkX2Fyb3VuZCddID0gcmVxdWVzdFBhcmFtZXRlcnMuaWRBcm91bmQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMuY3JlYXRlZEF0QXJvdW5kICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbJ2NyZWF0ZWRfYXRfYXJvdW5kJ10gPSByZXF1ZXN0UGFyYW1ldGVycy5jcmVhdGVkQXRBcm91bmQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiU3RyZWFtLUF1dGgtVHlwZVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJTdHJlYW0tQXV0aC1UeXBlXCIpOyAvLyBzdHJlYW0tYXV0aC10eXBlIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbXCJhcGlfa2V5XCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcImFwaV9rZXlcIik7IC8vIGFwaV9rZXkgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJBdXRob3JpemF0aW9uXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIkF1dGhvcml6YXRpb25cIik7IC8vIEpXVCBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIHBhdGg6IGAvbWVzc2FnZXMve3BhcmVudF9pZH0vcmVwbGllc2AucmVwbGFjZShgeyR7XCJwYXJlbnRfaWRcIn19YCwgZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhyZXF1ZXN0UGFyYW1ldGVycy5wYXJlbnRJZCkpKSxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBKU09OQXBpUmVzcG9uc2UkMShyZXNwb25zZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHJlcGxpZXMgKHRocmVhZCkgb2YgdGhlIG1lc3NhZ2UgIFJlcXVpcmVkIHBlcm1pc3Npb25zOiAtIFJlYWRDaGFubmVsXG4gICAgICogR2V0IHJlcGxpZXNcbiAgICAgKi9cbiAgICBnZXRSZXBsaWVzKHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuZ2V0UmVwbGllc1JhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4geWllbGQgcmVzcG9uc2UudmFsdWUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1hcmtzIGNoYW5uZWxzIGFzIHJlYWQgdXAgdG8gdGhlIHNwZWNpZmljIG1lc3NhZ2UuIElmIG5vIGNoYW5uZWxzIGlzIGdpdmVuLCBtYXJrIGFsbCBjaGFubmVsIGFzIHJlYWQgIFNlbmRzIGV2ZW50czogLSBtZXNzYWdlLnJlYWQgIFJlcXVpcmVkIHBlcm1pc3Npb25zOiAtIFJlYWRDaGFubmVsXG4gICAgICogTWFyayBjaGFubmVscyBhcyByZWFkXG4gICAgICovXG4gICAgbWFya0NoYW5uZWxzUmVhZFJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLm1hcmtDaGFubmVsc1JlYWRSZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3RQYXJhbWV0ZXJzLm1hcmtDaGFubmVsc1JlYWRSZXF1ZXN0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvciQxKCdtYXJrQ2hhbm5lbHNSZWFkUmVxdWVzdCcsICdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVxdWVzdFBhcmFtZXRlcnMubWFya0NoYW5uZWxzUmVhZFJlcXVlc3Qgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBtYXJrQ2hhbm5lbHNSZWFkLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJztcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJTdHJlYW0tQXV0aC1UeXBlXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIlN0cmVhbS1BdXRoLVR5cGVcIik7IC8vIHN0cmVhbS1hdXRoLXR5cGUgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1tcImFwaV9rZXlcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiYXBpX2tleVwiKTsgLy8gYXBpX2tleSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiQXV0aG9yaXphdGlvblwiKTsgLy8gSldUIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgcGF0aDogYC9jaGFubmVscy9yZWFkYCxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgYm9keTogcmVxdWVzdFBhcmFtZXRlcnMubWFya0NoYW5uZWxzUmVhZFJlcXVlc3QsXG4gICAgICAgICAgICB9LCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgSlNPTkFwaVJlc3BvbnNlJDEocmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWFya3MgY2hhbm5lbHMgYXMgcmVhZCB1cCB0byB0aGUgc3BlY2lmaWMgbWVzc2FnZS4gSWYgbm8gY2hhbm5lbHMgaXMgZ2l2ZW4sIG1hcmsgYWxsIGNoYW5uZWwgYXMgcmVhZCAgU2VuZHMgZXZlbnRzOiAtIG1lc3NhZ2UucmVhZCAgUmVxdWlyZWQgcGVybWlzc2lvbnM6IC0gUmVhZENoYW5uZWxcbiAgICAgKiBNYXJrIGNoYW5uZWxzIGFzIHJlYWRcbiAgICAgKi9cbiAgICBtYXJrQ2hhbm5lbHNSZWFkKHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMubWFya0NoYW5uZWxzUmVhZFJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4geWllbGQgcmVzcG9uc2UudmFsdWUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1hcmtzIGNoYW5uZWwgYXMgcmVhZCB1cCB0byB0aGUgc3BlY2lmaWMgbWVzc2FnZSAgU2VuZHMgZXZlbnRzOiAtIG1lc3NhZ2UucmVhZCAgUmVxdWlyZWQgcGVybWlzc2lvbnM6IC0gUmVhZENoYW5uZWxcbiAgICAgKiBNYXJrIHJlYWRcbiAgICAgKi9cbiAgICBtYXJrUmVhZFJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLnR5cGUgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMudHlwZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IkMSgndHlwZScsICdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVxdWVzdFBhcmFtZXRlcnMudHlwZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIG1hcmtSZWFkLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLmlkID09PSBudWxsIHx8IHJlcXVlc3RQYXJhbWV0ZXJzLmlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvciQxKCdpZCcsICdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVxdWVzdFBhcmFtZXRlcnMuaWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBtYXJrUmVhZC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy5tYXJrUmVhZFJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMubWFya1JlYWRSZXF1ZXN0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvciQxKCdtYXJrUmVhZFJlcXVlc3QnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLm1hcmtSZWFkUmVxdWVzdCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIG1hcmtSZWFkLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJztcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJTdHJlYW0tQXV0aC1UeXBlXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIlN0cmVhbS1BdXRoLVR5cGVcIik7IC8vIHN0cmVhbS1hdXRoLXR5cGUgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1tcImFwaV9rZXlcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiYXBpX2tleVwiKTsgLy8gYXBpX2tleSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiQXV0aG9yaXphdGlvblwiKTsgLy8gSldUIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgcGF0aDogYC9jaGFubmVscy97dHlwZX0ve2lkfS9yZWFkYC5yZXBsYWNlKGB7JHtcInR5cGVcIn19YCwgZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhyZXF1ZXN0UGFyYW1ldGVycy50eXBlKSkpLnJlcGxhY2UoYHske1wiaWRcIn19YCwgZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhyZXF1ZXN0UGFyYW1ldGVycy5pZCkpKSxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgYm9keTogcmVxdWVzdFBhcmFtZXRlcnMubWFya1JlYWRSZXF1ZXN0LFxuICAgICAgICAgICAgfSwgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEpTT05BcGlSZXNwb25zZSQxKHJlc3BvbnNlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1hcmtzIGNoYW5uZWwgYXMgcmVhZCB1cCB0byB0aGUgc3BlY2lmaWMgbWVzc2FnZSAgU2VuZHMgZXZlbnRzOiAtIG1lc3NhZ2UucmVhZCAgUmVxdWlyZWQgcGVybWlzc2lvbnM6IC0gUmVhZENoYW5uZWxcbiAgICAgKiBNYXJrIHJlYWRcbiAgICAgKi9cbiAgICBtYXJrUmVhZChyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLm1hcmtSZWFkUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCByZXNwb25zZS52YWx1ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWFya3MgY2hhbm5lbCBhcyB1bnJlYWQgZnJvbSBhIHNwZWNpZmljIG1lc3NhZ2UgIFJlcXVpcmVkIHBlcm1pc3Npb25zOiAtIFJlYWRDaGFubmVsXG4gICAgICogTWFyayB1bnJlYWRcbiAgICAgKi9cbiAgICBtYXJrVW5yZWFkUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMudHlwZSA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy50eXBlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvciQxKCd0eXBlJywgJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy50eXBlIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgbWFya1VucmVhZC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy5pZCA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy5pZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IkMSgnaWQnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLmlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgbWFya1VucmVhZC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy5tYXJrVW5yZWFkUmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy5tYXJrVW5yZWFkUmVxdWVzdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IkMSgnbWFya1VucmVhZFJlcXVlc3QnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLm1hcmtVbnJlYWRSZXF1ZXN0IHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgbWFya1VucmVhZC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgY29uc3QgaGVhZGVyUGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1snQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbic7XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiU3RyZWFtLUF1dGgtVHlwZVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJTdHJlYW0tQXV0aC1UeXBlXCIpOyAvLyBzdHJlYW0tYXV0aC10eXBlIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbXCJhcGlfa2V5XCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcImFwaV9rZXlcIik7IC8vIGFwaV9rZXkgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJBdXRob3JpemF0aW9uXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIkF1dGhvcml6YXRpb25cIik7IC8vIEpXVCBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIHBhdGg6IGAvY2hhbm5lbHMve3R5cGV9L3tpZH0vdW5yZWFkYC5yZXBsYWNlKGB7JHtcInR5cGVcIn19YCwgZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhyZXF1ZXN0UGFyYW1ldGVycy50eXBlKSkpLnJlcGxhY2UoYHske1wiaWRcIn19YCwgZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhyZXF1ZXN0UGFyYW1ldGVycy5pZCkpKSxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgYm9keTogcmVxdWVzdFBhcmFtZXRlcnMubWFya1VucmVhZFJlcXVlc3QsXG4gICAgICAgICAgICB9LCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgSlNPTkFwaVJlc3BvbnNlJDEocmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWFya3MgY2hhbm5lbCBhcyB1bnJlYWQgZnJvbSBhIHNwZWNpZmljIG1lc3NhZ2UgIFJlcXVpcmVkIHBlcm1pc3Npb25zOiAtIFJlYWRDaGFubmVsXG4gICAgICogTWFyayB1bnJlYWRcbiAgICAgKi9cbiAgICBtYXJrVW5yZWFkKHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMubWFya1VucmVhZFJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4geWllbGQgcmVzcG9uc2UudmFsdWUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZpbmQgYW5kIGZpbHRlciBtZXNzYWdlIGZsYWdzICBSZXF1aXJlZCBwZXJtaXNzaW9uczogLSBSZWFkTWVzc2FnZUZsYWdzXG4gICAgICogUXVlcnkgTWVzc2FnZSBGbGFnc1xuICAgICAqL1xuICAgIHF1ZXJ5TWVzc2FnZUZsYWdzUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy5wYXlsb2FkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbJ3BheWxvYWQnXSA9IHJlcXVlc3RQYXJhbWV0ZXJzLnBheWxvYWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiU3RyZWFtLUF1dGgtVHlwZVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJTdHJlYW0tQXV0aC1UeXBlXCIpOyAvLyBzdHJlYW0tYXV0aC10eXBlIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbXCJhcGlfa2V5XCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcImFwaV9rZXlcIik7IC8vIGFwaV9rZXkgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJBdXRob3JpemF0aW9uXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIkF1dGhvcml6YXRpb25cIik7IC8vIEpXVCBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIHBhdGg6IGAvbW9kZXJhdGlvbi9mbGFncy9tZXNzYWdlYCxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBKU09OQXBpUmVzcG9uc2UkMShyZXNwb25zZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGaW5kIGFuZCBmaWx0ZXIgbWVzc2FnZSBmbGFncyAgUmVxdWlyZWQgcGVybWlzc2lvbnM6IC0gUmVhZE1lc3NhZ2VGbGFnc1xuICAgICAqIFF1ZXJ5IE1lc3NhZ2UgRmxhZ3NcbiAgICAgKi9cbiAgICBxdWVyeU1lc3NhZ2VGbGFncyhyZXF1ZXN0UGFyYW1ldGVycyA9IHt9LCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMucXVlcnlNZXNzYWdlRmxhZ3NSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIHlpZWxkIHJlc3BvbnNlLnZhbHVlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFeGVjdXRlcyBtZXNzYWdlIGNvbW1hbmQgYWN0aW9uIHdpdGggZ2l2ZW4gcGFyYW1ldGVycyAgU2VuZHMgZXZlbnRzOiAtIG1lc3NhZ2UubmV3ICBSZXF1aXJlZCBwZXJtaXNzaW9uczogLSBSdW5NZXNzYWdlQWN0aW9uXG4gICAgICogUnVuIG1lc3NhZ2UgY29tbWFuZCBhY3Rpb25cbiAgICAgKi9cbiAgICBydW5NZXNzYWdlQWN0aW9uUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMuaWQgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMuaWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZXF1aXJlZEVycm9yJDEoJ2lkJywgJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy5pZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHJ1bk1lc3NhZ2VBY3Rpb24uJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMubWVzc2FnZUFjdGlvblJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMubWVzc2FnZUFjdGlvblJlcXVlc3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZXF1aXJlZEVycm9yJDEoJ21lc3NhZ2VBY3Rpb25SZXF1ZXN0JywgJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy5tZXNzYWdlQWN0aW9uUmVxdWVzdCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHJ1bk1lc3NhZ2VBY3Rpb24uJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlclBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbJ0NvbnRlbnQtVHlwZSddID0gJ2FwcGxpY2F0aW9uL2pzb24nO1xuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIlN0cmVhbS1BdXRoLVR5cGVcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiU3RyZWFtLUF1dGgtVHlwZVwiKTsgLy8gc3RyZWFtLWF1dGgtdHlwZSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzW1wiYXBpX2tleVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJhcGlfa2V5XCIpOyAvLyBhcGlfa2V5IGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiQXV0aG9yaXphdGlvblwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJBdXRob3JpemF0aW9uXCIpOyAvLyBKV1QgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICBwYXRoOiBgL21lc3NhZ2VzL3tpZH0vYWN0aW9uYC5yZXBsYWNlKGB7JHtcImlkXCJ9fWAsIGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVxdWVzdFBhcmFtZXRlcnMuaWQpKSksXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVyUGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBxdWVyeTogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIGJvZHk6IHJlcXVlc3RQYXJhbWV0ZXJzLm1lc3NhZ2VBY3Rpb25SZXF1ZXN0LFxuICAgICAgICAgICAgfSwgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEpTT05BcGlSZXNwb25zZSQxKHJlc3BvbnNlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEV4ZWN1dGVzIG1lc3NhZ2UgY29tbWFuZCBhY3Rpb24gd2l0aCBnaXZlbiBwYXJhbWV0ZXJzICBTZW5kcyBldmVudHM6IC0gbWVzc2FnZS5uZXcgIFJlcXVpcmVkIHBlcm1pc3Npb25zOiAtIFJ1bk1lc3NhZ2VBY3Rpb25cbiAgICAgKiBSdW4gbWVzc2FnZSBjb21tYW5kIGFjdGlvblxuICAgICAqL1xuICAgIHJ1bk1lc3NhZ2VBY3Rpb24ocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5ydW5NZXNzYWdlQWN0aW9uUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCByZXNwb25zZS52YWx1ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VhcmNoIG1lc3NhZ2VzIGFjcm9zcyBjaGFubmVscyAgUmVxdWlyZWQgcGVybWlzc2lvbnM6IC0gUmVhZENoYW5uZWxcbiAgICAgKiBTZWFyY2ggbWVzc2FnZXNcbiAgICAgKi9cbiAgICBzZWFyY2hSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLnBheWxvYWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1sncGF5bG9hZCddID0gcmVxdWVzdFBhcmFtZXRlcnMucGF5bG9hZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGhlYWRlclBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJTdHJlYW0tQXV0aC1UeXBlXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIlN0cmVhbS1BdXRoLVR5cGVcIik7IC8vIHN0cmVhbS1hdXRoLXR5cGUgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1tcImFwaV9rZXlcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiYXBpX2tleVwiKTsgLy8gYXBpX2tleSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiQXV0aG9yaXphdGlvblwiKTsgLy8gSldUIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgcGF0aDogYC9zZWFyY2hgLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVyUGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBxdWVyeTogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgfSwgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEpTT05BcGlSZXNwb25zZSQxKHJlc3BvbnNlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlYXJjaCBtZXNzYWdlcyBhY3Jvc3MgY2hhbm5lbHMgIFJlcXVpcmVkIHBlcm1pc3Npb25zOiAtIFJlYWRDaGFubmVsXG4gICAgICogU2VhcmNoIG1lc3NhZ2VzXG4gICAgICovXG4gICAgc2VhcmNoKHJlcXVlc3RQYXJhbWV0ZXJzID0ge30sIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZWFyY2hSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIHlpZWxkIHJlc3BvbnNlLnZhbHVlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kcyBuZXcgbWVzc2FnZSB0byB0aGUgc3BlY2lmaWVkIGNoYW5uZWwgIFNlbmRzIGV2ZW50czogLSBtZXNzYWdlLm5ldyAtIG1lc3NhZ2UudXBkYXRlZCAgUmVxdWlyZWQgcGVybWlzc2lvbnM6IC0gQWRkTGlua3MgLSBDcmVhdGVNZXNzYWdlIC0gUGluTWVzc2FnZSAtIFNraXBDaGFubmVsQ29vbGRvd24gLSBTa2lwTWVzc2FnZU1vZGVyYXRpb24gLSBVc2VGcm96ZW5DaGFubmVsXG4gICAgICogU2VuZCBuZXcgbWVzc2FnZVxuICAgICAqL1xuICAgIHNlbmRNZXNzYWdlUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMudHlwZSA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy50eXBlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvciQxKCd0eXBlJywgJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy50eXBlIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgc2VuZE1lc3NhZ2UuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMuaWQgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMuaWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZXF1aXJlZEVycm9yJDEoJ2lkJywgJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy5pZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHNlbmRNZXNzYWdlLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLnNlbmRNZXNzYWdlUmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy5zZW5kTWVzc2FnZVJlcXVlc3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZXF1aXJlZEVycm9yJDEoJ3NlbmRNZXNzYWdlUmVxdWVzdCcsICdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVxdWVzdFBhcmFtZXRlcnMuc2VuZE1lc3NhZ2VSZXF1ZXN0IHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgc2VuZE1lc3NhZ2UuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlclBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbJ0NvbnRlbnQtVHlwZSddID0gJ2FwcGxpY2F0aW9uL2pzb24nO1xuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIlN0cmVhbS1BdXRoLVR5cGVcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiU3RyZWFtLUF1dGgtVHlwZVwiKTsgLy8gc3RyZWFtLWF1dGgtdHlwZSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzW1wiYXBpX2tleVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJhcGlfa2V5XCIpOyAvLyBhcGlfa2V5IGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiQXV0aG9yaXphdGlvblwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJBdXRob3JpemF0aW9uXCIpOyAvLyBKV1QgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICBwYXRoOiBgL2NoYW5uZWxzL3t0eXBlfS97aWR9L21lc3NhZ2VgLnJlcGxhY2UoYHske1widHlwZVwifX1gLCBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJlcXVlc3RQYXJhbWV0ZXJzLnR5cGUpKSkucmVwbGFjZShgeyR7XCJpZFwifX1gLCBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJlcXVlc3RQYXJhbWV0ZXJzLmlkKSkpLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBib2R5OiByZXF1ZXN0UGFyYW1ldGVycy5zZW5kTWVzc2FnZVJlcXVlc3QsXG4gICAgICAgICAgICB9LCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgSlNPTkFwaVJlc3BvbnNlJDEocmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZHMgbmV3IG1lc3NhZ2UgdG8gdGhlIHNwZWNpZmllZCBjaGFubmVsICBTZW5kcyBldmVudHM6IC0gbWVzc2FnZS5uZXcgLSBtZXNzYWdlLnVwZGF0ZWQgIFJlcXVpcmVkIHBlcm1pc3Npb25zOiAtIEFkZExpbmtzIC0gQ3JlYXRlTWVzc2FnZSAtIFBpbk1lc3NhZ2UgLSBTa2lwQ2hhbm5lbENvb2xkb3duIC0gU2tpcE1lc3NhZ2VNb2RlcmF0aW9uIC0gVXNlRnJvemVuQ2hhbm5lbFxuICAgICAqIFNlbmQgbmV3IG1lc3NhZ2VcbiAgICAgKi9cbiAgICBzZW5kTWVzc2FnZShyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnNlbmRNZXNzYWdlUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCByZXNwb25zZS52YWx1ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZHMgcmVhY3Rpb24gdG8gc3BlY2lmaWVkIG1lc3NhZ2UgIFNlbmRzIGV2ZW50czogLSByZWFjdGlvbi5uZXcgLSByZWFjdGlvbi51cGRhdGVkICBSZXF1aXJlZCBwZXJtaXNzaW9uczogLSBDcmVhdGVSZWFjdGlvbiAtIFVzZUZyb3plbkNoYW5uZWxcbiAgICAgKiBTZW5kIHJlYWN0aW9uXG4gICAgICovXG4gICAgc2VuZFJlYWN0aW9uUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMuaWQgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMuaWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZXF1aXJlZEVycm9yJDEoJ2lkJywgJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy5pZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHNlbmRSZWFjdGlvbi4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy5zZW5kUmVhY3Rpb25SZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3RQYXJhbWV0ZXJzLnNlbmRSZWFjdGlvblJlcXVlc3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZXF1aXJlZEVycm9yJDEoJ3NlbmRSZWFjdGlvblJlcXVlc3QnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLnNlbmRSZWFjdGlvblJlcXVlc3Qgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBzZW5kUmVhY3Rpb24uJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlclBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbJ0NvbnRlbnQtVHlwZSddID0gJ2FwcGxpY2F0aW9uL2pzb24nO1xuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIlN0cmVhbS1BdXRoLVR5cGVcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiU3RyZWFtLUF1dGgtVHlwZVwiKTsgLy8gc3RyZWFtLWF1dGgtdHlwZSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzW1wiYXBpX2tleVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJhcGlfa2V5XCIpOyAvLyBhcGlfa2V5IGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiQXV0aG9yaXphdGlvblwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJBdXRob3JpemF0aW9uXCIpOyAvLyBKV1QgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICBwYXRoOiBgL21lc3NhZ2VzL3tpZH0vcmVhY3Rpb25gLnJlcGxhY2UoYHske1wiaWRcIn19YCwgZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhyZXF1ZXN0UGFyYW1ldGVycy5pZCkpKSxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgYm9keTogcmVxdWVzdFBhcmFtZXRlcnMuc2VuZFJlYWN0aW9uUmVxdWVzdCxcbiAgICAgICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBKU09OQXBpUmVzcG9uc2UkMShyZXNwb25zZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kcyByZWFjdGlvbiB0byBzcGVjaWZpZWQgbWVzc2FnZSAgU2VuZHMgZXZlbnRzOiAtIHJlYWN0aW9uLm5ldyAtIHJlYWN0aW9uLnVwZGF0ZWQgIFJlcXVpcmVkIHBlcm1pc3Npb25zOiAtIENyZWF0ZVJlYWN0aW9uIC0gVXNlRnJvemVuQ2hhbm5lbFxuICAgICAqIFNlbmQgcmVhY3Rpb25cbiAgICAgKi9cbiAgICBzZW5kUmVhY3Rpb24ocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zZW5kUmVhY3Rpb25SYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIHlpZWxkIHJlc3BvbnNlLnZhbHVlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcmFuc2xhdGVzIG1lc3NhZ2UgdG8gYSBnaXZlbiBsYW5ndWFnZSB1c2luZyBhdXRvbWF0ZWQgdHJhbnNsYXRpb24gc29mdHdhcmUgIFNlbmRzIGV2ZW50czogLSBtZXNzYWdlLnVwZGF0ZWQgIFJlcXVpcmVkIHBlcm1pc3Npb25zOiAtIFJlYWRDaGFubmVsXG4gICAgICogVHJhbnNsYXRlIG1lc3NhZ2VcbiAgICAgKi9cbiAgICB0cmFuc2xhdGVNZXNzYWdlUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMuaWQgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMuaWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZXF1aXJlZEVycm9yJDEoJ2lkJywgJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy5pZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHRyYW5zbGF0ZU1lc3NhZ2UuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMudHJhbnNsYXRlTWVzc2FnZVJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMudHJhbnNsYXRlTWVzc2FnZVJlcXVlc3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZXF1aXJlZEVycm9yJDEoJ3RyYW5zbGF0ZU1lc3NhZ2VSZXF1ZXN0JywgJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy50cmFuc2xhdGVNZXNzYWdlUmVxdWVzdCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHRyYW5zbGF0ZU1lc3NhZ2UuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlclBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbJ0NvbnRlbnQtVHlwZSddID0gJ2FwcGxpY2F0aW9uL2pzb24nO1xuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIlN0cmVhbS1BdXRoLVR5cGVcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiU3RyZWFtLUF1dGgtVHlwZVwiKTsgLy8gc3RyZWFtLWF1dGgtdHlwZSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzW1wiYXBpX2tleVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJhcGlfa2V5XCIpOyAvLyBhcGlfa2V5IGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiQXV0aG9yaXphdGlvblwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJBdXRob3JpemF0aW9uXCIpOyAvLyBKV1QgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICBwYXRoOiBgL21lc3NhZ2VzL3tpZH0vdHJhbnNsYXRlYC5yZXBsYWNlKGB7JHtcImlkXCJ9fWAsIGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVxdWVzdFBhcmFtZXRlcnMuaWQpKSksXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVyUGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBxdWVyeTogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIGJvZHk6IHJlcXVlc3RQYXJhbWV0ZXJzLnRyYW5zbGF0ZU1lc3NhZ2VSZXF1ZXN0LFxuICAgICAgICAgICAgfSwgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEpTT05BcGlSZXNwb25zZSQxKHJlc3BvbnNlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRyYW5zbGF0ZXMgbWVzc2FnZSB0byBhIGdpdmVuIGxhbmd1YWdlIHVzaW5nIGF1dG9tYXRlZCB0cmFuc2xhdGlvbiBzb2Z0d2FyZSAgU2VuZHMgZXZlbnRzOiAtIG1lc3NhZ2UudXBkYXRlZCAgUmVxdWlyZWQgcGVybWlzc2lvbnM6IC0gUmVhZENoYW5uZWxcbiAgICAgKiBUcmFuc2xhdGUgbWVzc2FnZVxuICAgICAqL1xuICAgIHRyYW5zbGF0ZU1lc3NhZ2UocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy50cmFuc2xhdGVNZXNzYWdlUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCByZXNwb25zZS52YWx1ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBwcmV2aW91c2x5IGNyZWF0ZWQgdXNlciBvciBtZXNzYWdlIGZsYWcgIFJlcXVpcmVkIHBlcm1pc3Npb25zOiAtIEZsYWdNZXNzYWdlIC0gRmxhZ1VzZXJcbiAgICAgKiBVbmZsYWdcbiAgICAgKi9cbiAgICB1bmZsYWdSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy5mbGFnUmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy5mbGFnUmVxdWVzdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IkMSgnZmxhZ1JlcXVlc3QnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLmZsYWdSZXF1ZXN0IHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgdW5mbGFnLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJztcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJTdHJlYW0tQXV0aC1UeXBlXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIlN0cmVhbS1BdXRoLVR5cGVcIik7IC8vIHN0cmVhbS1hdXRoLXR5cGUgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1tcImFwaV9rZXlcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiYXBpX2tleVwiKTsgLy8gYXBpX2tleSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiQXV0aG9yaXphdGlvblwiKTsgLy8gSldUIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgcGF0aDogYC9tb2RlcmF0aW9uL3VuZmxhZ2AsXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVyUGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBxdWVyeTogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIGJvZHk6IHJlcXVlc3RQYXJhbWV0ZXJzLmZsYWdSZXF1ZXN0LFxuICAgICAgICAgICAgfSwgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEpTT05BcGlSZXNwb25zZSQxKHJlc3BvbnNlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgcHJldmlvdXNseSBjcmVhdGVkIHVzZXIgb3IgbWVzc2FnZSBmbGFnICBSZXF1aXJlZCBwZXJtaXNzaW9uczogLSBGbGFnTWVzc2FnZSAtIEZsYWdVc2VyXG4gICAgICogVW5mbGFnXG4gICAgICovXG4gICAgdW5mbGFnKHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMudW5mbGFnUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCByZXNwb25zZS52YWx1ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyBtZXNzYWdlIHdpdGggbmV3IGRhdGEgIFNlbmRzIGV2ZW50czogLSBtZXNzYWdlLnVwZGF0ZWQgIFJlcXVpcmVkIHBlcm1pc3Npb25zOiAtIEFkZExpbmtzIC0gUGluTWVzc2FnZSAtIFNraXBNZXNzYWdlTW9kZXJhdGlvbiAtIFVwZGF0ZU1lc3NhZ2VcbiAgICAgKiBVcGRhdGUgbWVzc2FnZVxuICAgICAqL1xuICAgIHVwZGF0ZU1lc3NhZ2VSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy5pZCA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy5pZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IkMSgnaWQnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLmlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgdXBkYXRlTWVzc2FnZS4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy51cGRhdGVNZXNzYWdlUmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy51cGRhdGVNZXNzYWdlUmVxdWVzdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IkMSgndXBkYXRlTWVzc2FnZVJlcXVlc3QnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLnVwZGF0ZU1lc3NhZ2VSZXF1ZXN0IHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgdXBkYXRlTWVzc2FnZS4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgY29uc3QgaGVhZGVyUGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1snQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbic7XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiU3RyZWFtLUF1dGgtVHlwZVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJTdHJlYW0tQXV0aC1UeXBlXCIpOyAvLyBzdHJlYW0tYXV0aC10eXBlIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbXCJhcGlfa2V5XCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcImFwaV9rZXlcIik7IC8vIGFwaV9rZXkgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJBdXRob3JpemF0aW9uXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIkF1dGhvcml6YXRpb25cIik7IC8vIEpXVCBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIHBhdGg6IGAvbWVzc2FnZXMve2lkfWAucmVwbGFjZShgeyR7XCJpZFwifX1gLCBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJlcXVlc3RQYXJhbWV0ZXJzLmlkKSkpLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBib2R5OiByZXF1ZXN0UGFyYW1ldGVycy51cGRhdGVNZXNzYWdlUmVxdWVzdCxcbiAgICAgICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBKU09OQXBpUmVzcG9uc2UkMShyZXNwb25zZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIG1lc3NhZ2Ugd2l0aCBuZXcgZGF0YSAgU2VuZHMgZXZlbnRzOiAtIG1lc3NhZ2UudXBkYXRlZCAgUmVxdWlyZWQgcGVybWlzc2lvbnM6IC0gQWRkTGlua3MgLSBQaW5NZXNzYWdlIC0gU2tpcE1lc3NhZ2VNb2RlcmF0aW9uIC0gVXBkYXRlTWVzc2FnZVxuICAgICAqIFVwZGF0ZSBtZXNzYWdlXG4gICAgICovXG4gICAgdXBkYXRlTWVzc2FnZShyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnVwZGF0ZU1lc3NhZ2VSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIHlpZWxkIHJlc3BvbnNlLnZhbHVlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIGNlcnRhaW4gZmllbGRzIG9mIHRoZSBtZXNzYWdlICBTZW5kcyBldmVudHM6IC0gbWVzc2FnZS51cGRhdGVkICBSZXF1aXJlZCBwZXJtaXNzaW9uczogLSBBZGRMaW5rcyAtIFBpbk1lc3NhZ2UgLSBTa2lwTWVzc2FnZU1vZGVyYXRpb24gLSBVcGRhdGVNZXNzYWdlXG4gICAgICogUGFydGlhbGx5IG1lc3NhZ2UgdXBkYXRlXG4gICAgICovXG4gICAgdXBkYXRlTWVzc2FnZVBhcnRpYWxSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy5pZCA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy5pZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IkMSgnaWQnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLmlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgdXBkYXRlTWVzc2FnZVBhcnRpYWwuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMudXBkYXRlTWVzc2FnZVBhcnRpYWxSZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3RQYXJhbWV0ZXJzLnVwZGF0ZU1lc3NhZ2VQYXJ0aWFsUmVxdWVzdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IkMSgndXBkYXRlTWVzc2FnZVBhcnRpYWxSZXF1ZXN0JywgJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy51cGRhdGVNZXNzYWdlUGFydGlhbFJlcXVlc3Qgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1cGRhdGVNZXNzYWdlUGFydGlhbC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgY29uc3QgaGVhZGVyUGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1snQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbic7XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiU3RyZWFtLUF1dGgtVHlwZVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJTdHJlYW0tQXV0aC1UeXBlXCIpOyAvLyBzdHJlYW0tYXV0aC10eXBlIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbXCJhcGlfa2V5XCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcImFwaV9rZXlcIik7IC8vIGFwaV9rZXkgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJBdXRob3JpemF0aW9uXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIkF1dGhvcml6YXRpb25cIik7IC8vIEpXVCBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIHBhdGg6IGAvbWVzc2FnZXMve2lkfWAucmVwbGFjZShgeyR7XCJpZFwifX1gLCBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJlcXVlc3RQYXJhbWV0ZXJzLmlkKSkpLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVyUGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBxdWVyeTogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIGJvZHk6IHJlcXVlc3RQYXJhbWV0ZXJzLnVwZGF0ZU1lc3NhZ2VQYXJ0aWFsUmVxdWVzdCxcbiAgICAgICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBKU09OQXBpUmVzcG9uc2UkMShyZXNwb25zZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIGNlcnRhaW4gZmllbGRzIG9mIHRoZSBtZXNzYWdlICBTZW5kcyBldmVudHM6IC0gbWVzc2FnZS51cGRhdGVkICBSZXF1aXJlZCBwZXJtaXNzaW9uczogLSBBZGRMaW5rcyAtIFBpbk1lc3NhZ2UgLSBTa2lwTWVzc2FnZU1vZGVyYXRpb24gLSBVcGRhdGVNZXNzYWdlXG4gICAgICogUGFydGlhbGx5IG1lc3NhZ2UgdXBkYXRlXG4gICAgICovXG4gICAgdXBkYXRlTWVzc2FnZVBhcnRpYWwocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy51cGRhdGVNZXNzYWdlUGFydGlhbFJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4geWllbGQgcmVzcG9uc2UudmFsdWUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwbG9hZHMgZmlsZSAgUmVxdWlyZWQgcGVybWlzc2lvbnM6IC0gVXBsb2FkQXR0YWNobWVudFxuICAgICAqIFVwbG9hZCBmaWxlXG4gICAgICovXG4gICAgdXBsb2FkRmlsZVJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLnR5cGUgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMudHlwZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IkMSgndHlwZScsICdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVxdWVzdFBhcmFtZXRlcnMudHlwZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVwbG9hZEZpbGUuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMuaWQgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMuaWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZXF1aXJlZEVycm9yJDEoJ2lkJywgJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy5pZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVwbG9hZEZpbGUuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlclBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJTdHJlYW0tQXV0aC1UeXBlXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIlN0cmVhbS1BdXRoLVR5cGVcIik7IC8vIHN0cmVhbS1hdXRoLXR5cGUgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1tcImFwaV9rZXlcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiYXBpX2tleVwiKTsgLy8gYXBpX2tleSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiQXV0aG9yaXphdGlvblwiKTsgLy8gSldUIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBjb25zdW1lcyA9IFtcbiAgICAgICAgICAgICAgICB7IGNvbnRlbnRUeXBlOiAnbXVsdGlwYXJ0L2Zvcm0tZGF0YScgfSxcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlOiBjYW5Db25zdW1lRm9ybSBtYXkgYmUgdW51c2VkXG4gICAgICAgICAgICBjYW5Db25zdW1lRm9ybShjb25zdW1lcyk7XG4gICAgICAgICAgICBsZXQgZm9ybVBhcmFtcztcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBmb3JtUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLmZpbGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGZvcm1QYXJhbXMuYXBwZW5kKCdmaWxlJywgcmVxdWVzdFBhcmFtZXRlcnMuZmlsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMudXNlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgZm9ybVBhcmFtcy5hcHBlbmQoJ3VzZXInLCBuZXcgQmxvYihbSlNPTi5zdHJpbmdpZnkocmVxdWVzdFBhcmFtZXRlcnMudXNlcildLCB7IHR5cGU6IFwiYXBwbGljYXRpb24vanNvblwiLCB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgcGF0aDogYC9jaGFubmVscy97dHlwZX0ve2lkfS9maWxlYC5yZXBsYWNlKGB7JHtcInR5cGVcIn19YCwgZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhyZXF1ZXN0UGFyYW1ldGVycy50eXBlKSkpLnJlcGxhY2UoYHske1wiaWRcIn19YCwgZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhyZXF1ZXN0UGFyYW1ldGVycy5pZCkpKSxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgYm9keTogZm9ybVBhcmFtcyxcbiAgICAgICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBKU09OQXBpUmVzcG9uc2UkMShyZXNwb25zZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGxvYWRzIGZpbGUgIFJlcXVpcmVkIHBlcm1pc3Npb25zOiAtIFVwbG9hZEF0dGFjaG1lbnRcbiAgICAgKiBVcGxvYWQgZmlsZVxuICAgICAqL1xuICAgIHVwbG9hZEZpbGUocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy51cGxvYWRGaWxlUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCByZXNwb25zZS52YWx1ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBsb2FkcyBpbWFnZSAgUmVxdWlyZWQgcGVybWlzc2lvbnM6IC0gVXBsb2FkQXR0YWNobWVudFxuICAgICAqIFVwbG9hZCBpbWFnZVxuICAgICAqL1xuICAgIHVwbG9hZEltYWdlUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMudHlwZSA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy50eXBlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvciQxKCd0eXBlJywgJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy50eXBlIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgdXBsb2FkSW1hZ2UuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMuaWQgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMuaWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZXF1aXJlZEVycm9yJDEoJ2lkJywgJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy5pZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVwbG9hZEltYWdlLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiU3RyZWFtLUF1dGgtVHlwZVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJTdHJlYW0tQXV0aC1UeXBlXCIpOyAvLyBzdHJlYW0tYXV0aC10eXBlIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbXCJhcGlfa2V5XCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcImFwaV9rZXlcIik7IC8vIGFwaV9rZXkgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJBdXRob3JpemF0aW9uXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIkF1dGhvcml6YXRpb25cIik7IC8vIEpXVCBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgY29uc3VtZXMgPSBbXG4gICAgICAgICAgICAgICAgeyBjb250ZW50VHlwZTogJ211bHRpcGFydC9mb3JtLWRhdGEnIH0sXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZTogY2FuQ29uc3VtZUZvcm0gbWF5IGJlIHVudXNlZFxuICAgICAgICAgICAgY2FuQ29uc3VtZUZvcm0oY29uc3VtZXMpO1xuICAgICAgICAgICAgbGV0IGZvcm1QYXJhbXM7XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZm9ybVBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy5maWxlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBmb3JtUGFyYW1zLmFwcGVuZCgnZmlsZScsIHJlcXVlc3RQYXJhbWV0ZXJzLmZpbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLnVwbG9hZFNpemVzKSB7XG4gICAgICAgICAgICAgICAgZm9ybVBhcmFtcy5hcHBlbmQoJ3VwbG9hZF9zaXplcycsIHJlcXVlc3RQYXJhbWV0ZXJzLnVwbG9hZFNpemVzLmpvaW4oQ09MTEVDVElPTl9GT1JNQVRTW1wiY3N2XCJdKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMudXNlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgZm9ybVBhcmFtcy5hcHBlbmQoJ3VzZXInLCBuZXcgQmxvYihbSlNPTi5zdHJpbmdpZnkocmVxdWVzdFBhcmFtZXRlcnMudXNlcildLCB7IHR5cGU6IFwiYXBwbGljYXRpb24vanNvblwiLCB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgcGF0aDogYC9jaGFubmVscy97dHlwZX0ve2lkfS9pbWFnZWAucmVwbGFjZShgeyR7XCJ0eXBlXCJ9fWAsIGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVxdWVzdFBhcmFtZXRlcnMudHlwZSkpKS5yZXBsYWNlKGB7JHtcImlkXCJ9fWAsIGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVxdWVzdFBhcmFtZXRlcnMuaWQpKSksXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVyUGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBxdWVyeTogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIGJvZHk6IGZvcm1QYXJhbXMsXG4gICAgICAgICAgICB9LCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgSlNPTkFwaVJlc3BvbnNlJDEocmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBsb2FkcyBpbWFnZSAgUmVxdWlyZWQgcGVybWlzc2lvbnM6IC0gVXBsb2FkQXR0YWNobWVudFxuICAgICAqIFVwbG9hZCBpbWFnZVxuICAgICAqL1xuICAgIHVwbG9hZEltYWdlKHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMudXBsb2FkSW1hZ2VSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIHlpZWxkIHJlc3BvbnNlLnZhbHVlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuLyogdHNsaW50OmRpc2FibGUgKi9cbi8qIGVzbGludC1kaXNhYmxlICovXG4vKipcbiAqIFN0cmVhbSBDaGF0IEFQSVxuICogTm8gZGVzY3JpcHRpb24gcHJvdmlkZWQgKGdlbmVyYXRlZCBieSBPcGVuYXBpIEdlbmVyYXRvciBodHRwczovL2dpdGh1Yi5jb20vb3BlbmFwaXRvb2xzL29wZW5hcGktZ2VuZXJhdG9yKVxuICpcbiAqIFRoZSB2ZXJzaW9uIG9mIHRoZSBPcGVuQVBJIGRvY3VtZW50OiB2OTIuNy4wXG4gKlxuICpcbiAqIE5PVEU6IFRoaXMgY2xhc3MgaXMgYXV0byBnZW5lcmF0ZWQgYnkgT3BlbkFQSSBHZW5lcmF0b3IgKGh0dHBzOi8vb3BlbmFwaS1nZW5lcmF0b3IudGVjaCkuXG4gKiBodHRwczovL29wZW5hcGktZ2VuZXJhdG9yLnRlY2hcbiAqIERvIG5vdCBlZGl0IHRoZSBjbGFzcyBtYW51YWxseS5cbiAqL1xuLyoqXG4gKlxuICovXG5jbGFzcyBQZXJtaXNzaW9uc1YyQXBpIGV4dGVuZHMgQmFzZUFQSSQxIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGN1c3RvbSByb2xlXG4gICAgICogQ3JlYXRlIHJvbGVcbiAgICAgKi9cbiAgICBjcmVhdGVSb2xlUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMuY3JlYXRlUm9sZVJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMuY3JlYXRlUm9sZVJlcXVlc3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZXF1aXJlZEVycm9yJDEoJ2NyZWF0ZVJvbGVSZXF1ZXN0JywgJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy5jcmVhdGVSb2xlUmVxdWVzdCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGNyZWF0ZVJvbGUuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlclBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbJ0NvbnRlbnQtVHlwZSddID0gJ2FwcGxpY2F0aW9uL2pzb24nO1xuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIlN0cmVhbS1BdXRoLVR5cGVcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiU3RyZWFtLUF1dGgtVHlwZVwiKTsgLy8gc3RyZWFtLWF1dGgtdHlwZSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzW1wiYXBpX2tleVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJhcGlfa2V5XCIpOyAvLyBhcGlfa2V5IGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiQXV0aG9yaXphdGlvblwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJBdXRob3JpemF0aW9uXCIpOyAvLyBKV1QgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICBwYXRoOiBgL3JvbGVzYCxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgYm9keTogcmVxdWVzdFBhcmFtZXRlcnMuY3JlYXRlUm9sZVJlcXVlc3QsXG4gICAgICAgICAgICB9LCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgSlNPTkFwaVJlc3BvbnNlJDEocmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBjdXN0b20gcm9sZVxuICAgICAqIENyZWF0ZSByb2xlXG4gICAgICovXG4gICAgY3JlYXRlUm9sZShyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLmNyZWF0ZVJvbGVSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIHlpZWxkIHJlc3BvbnNlLnZhbHVlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWxldGVzIGN1c3RvbSByb2xlXG4gICAgICogRGVsZXRlIHJvbGVcbiAgICAgKi9cbiAgICBkZWxldGVSb2xlUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMubmFtZSA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy5uYW1lID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvciQxKCduYW1lJywgJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy5uYW1lIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZGVsZXRlUm9sZS4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgY29uc3QgaGVhZGVyUGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIlN0cmVhbS1BdXRoLVR5cGVcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiU3RyZWFtLUF1dGgtVHlwZVwiKTsgLy8gc3RyZWFtLWF1dGgtdHlwZSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzW1wiYXBpX2tleVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJhcGlfa2V5XCIpOyAvLyBhcGlfa2V5IGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiQXV0aG9yaXphdGlvblwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJBdXRob3JpemF0aW9uXCIpOyAvLyBKV1QgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICBwYXRoOiBgL3JvbGVzL3tuYW1lfWAucmVwbGFjZShgeyR7XCJuYW1lXCJ9fWAsIGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVxdWVzdFBhcmFtZXRlcnMubmFtZSkpKSxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBKU09OQXBpUmVzcG9uc2UkMShyZXNwb25zZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWxldGVzIGN1c3RvbSByb2xlXG4gICAgICogRGVsZXRlIHJvbGVcbiAgICAgKi9cbiAgICBkZWxldGVSb2xlKHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuZGVsZXRlUm9sZVJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4geWllbGQgcmVzcG9uc2UudmFsdWUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgY3VzdG9tIHBlcm1pc3Npb25cbiAgICAgKiBHZXQgcGVybWlzc2lvblxuICAgICAqL1xuICAgIGdldFBlcm1pc3Npb25SYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy5pZCA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy5pZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IkMSgnaWQnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLmlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0UGVybWlzc2lvbi4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgY29uc3QgaGVhZGVyUGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIlN0cmVhbS1BdXRoLVR5cGVcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiU3RyZWFtLUF1dGgtVHlwZVwiKTsgLy8gc3RyZWFtLWF1dGgtdHlwZSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzW1wiYXBpX2tleVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJhcGlfa2V5XCIpOyAvLyBhcGlfa2V5IGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiQXV0aG9yaXphdGlvblwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJBdXRob3JpemF0aW9uXCIpOyAvLyBKV1QgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICBwYXRoOiBgL3Blcm1pc3Npb25zL3tpZH1gLnJlcGxhY2UoYHske1wiaWRcIn19YCwgZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhyZXF1ZXN0UGFyYW1ldGVycy5pZCkpKSxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBKU09OQXBpUmVzcG9uc2UkMShyZXNwb25zZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIGN1c3RvbSBwZXJtaXNzaW9uXG4gICAgICogR2V0IHBlcm1pc3Npb25cbiAgICAgKi9cbiAgICBnZXRQZXJtaXNzaW9uKHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuZ2V0UGVybWlzc2lvblJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4geWllbGQgcmVzcG9uc2UudmFsdWUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExpc3RzIGFsbCBhdmFpbGFibGUgcGVybWlzc2lvbnNcbiAgICAgKiBMaXN0IHBlcm1pc3Npb25zXG4gICAgICovXG4gICAgbGlzdFBlcm1pc3Npb25zUmF3KGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgY29uc3QgaGVhZGVyUGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIlN0cmVhbS1BdXRoLVR5cGVcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiU3RyZWFtLUF1dGgtVHlwZVwiKTsgLy8gc3RyZWFtLWF1dGgtdHlwZSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzW1wiYXBpX2tleVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJhcGlfa2V5XCIpOyAvLyBhcGlfa2V5IGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiQXV0aG9yaXphdGlvblwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJBdXRob3JpemF0aW9uXCIpOyAvLyBKV1QgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICBwYXRoOiBgL3Blcm1pc3Npb25zYCxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBKU09OQXBpUmVzcG9uc2UkMShyZXNwb25zZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMaXN0cyBhbGwgYXZhaWxhYmxlIHBlcm1pc3Npb25zXG4gICAgICogTGlzdCBwZXJtaXNzaW9uc1xuICAgICAqL1xuICAgIGxpc3RQZXJtaXNzaW9ucyhpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMubGlzdFBlcm1pc3Npb25zUmF3KGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIHlpZWxkIHJlc3BvbnNlLnZhbHVlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMaXN0cyBhbGwgYXZhaWxhYmxlIHJvbGVzXG4gICAgICogTGlzdCByb2xlc1xuICAgICAqL1xuICAgIGxpc3RSb2xlc1Jhdyhpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlclBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJTdHJlYW0tQXV0aC1UeXBlXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIlN0cmVhbS1BdXRoLVR5cGVcIik7IC8vIHN0cmVhbS1hdXRoLXR5cGUgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1tcImFwaV9rZXlcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiYXBpX2tleVwiKTsgLy8gYXBpX2tleSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiQXV0aG9yaXphdGlvblwiKTsgLy8gSldUIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgcGF0aDogYC9yb2xlc2AsXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICB9LCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgSlNPTkFwaVJlc3BvbnNlJDEocmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTGlzdHMgYWxsIGF2YWlsYWJsZSByb2xlc1xuICAgICAqIExpc3Qgcm9sZXNcbiAgICAgKi9cbiAgICBsaXN0Um9sZXMoaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLmxpc3RSb2xlc1Jhdyhpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCByZXNwb25zZS52YWx1ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5cbi8qIHRzbGludDpkaXNhYmxlICovXG4vKiBlc2xpbnQtZGlzYWJsZSAqL1xuLyoqXG4gKiBTdHJlYW0gQ2hhdCBBUElcbiAqIE5vIGRlc2NyaXB0aW9uIHByb3ZpZGVkIChnZW5lcmF0ZWQgYnkgT3BlbmFwaSBHZW5lcmF0b3IgaHR0cHM6Ly9naXRodWIuY29tL29wZW5hcGl0b29scy9vcGVuYXBpLWdlbmVyYXRvcilcbiAqXG4gKiBUaGUgdmVyc2lvbiBvZiB0aGUgT3BlbkFQSSBkb2N1bWVudDogdjkyLjcuMFxuICpcbiAqXG4gKiBOT1RFOiBUaGlzIGNsYXNzIGlzIGF1dG8gZ2VuZXJhdGVkIGJ5IE9wZW5BUEkgR2VuZXJhdG9yIChodHRwczovL29wZW5hcGktZ2VuZXJhdG9yLnRlY2gpLlxuICogaHR0cHM6Ly9vcGVuYXBpLWdlbmVyYXRvci50ZWNoXG4gKiBEbyBub3QgZWRpdCB0aGUgY2xhc3MgbWFudWFsbHkuXG4gKi9cbi8qKlxuICpcbiAqL1xuY2xhc3MgUHVzaEFwaSBleHRlbmRzIEJhc2VBUEkkMSB7XG4gICAgLyoqXG4gICAgICogQWRkcyBhIG5ldyBkZXZpY2UgdG8gYSB1c2VyLCBpZiB0aGUgc2FtZSBkZXZpY2UgYWxyZWFkeSBleGlzdHMgdGhlIGNhbGwgd2lsbCBoYXZlIG5vIGVmZmVjdFxuICAgICAqIENyZWF0ZSBkZXZpY2VcbiAgICAgKi9cbiAgICBjcmVhdGVEZXZpY2VSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy5jcmVhdGVEZXZpY2VSZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3RQYXJhbWV0ZXJzLmNyZWF0ZURldmljZVJlcXVlc3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZXF1aXJlZEVycm9yJDEoJ2NyZWF0ZURldmljZVJlcXVlc3QnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLmNyZWF0ZURldmljZVJlcXVlc3Qgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBjcmVhdGVEZXZpY2UuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlclBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbJ0NvbnRlbnQtVHlwZSddID0gJ2FwcGxpY2F0aW9uL2pzb24nO1xuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIlN0cmVhbS1BdXRoLVR5cGVcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiU3RyZWFtLUF1dGgtVHlwZVwiKTsgLy8gc3RyZWFtLWF1dGgtdHlwZSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzW1wiYXBpX2tleVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJhcGlfa2V5XCIpOyAvLyBhcGlfa2V5IGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiQXV0aG9yaXphdGlvblwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJBdXRob3JpemF0aW9uXCIpOyAvLyBKV1QgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICBwYXRoOiBgL2RldmljZXNgLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBib2R5OiByZXF1ZXN0UGFyYW1ldGVycy5jcmVhdGVEZXZpY2VSZXF1ZXN0LFxuICAgICAgICAgICAgfSwgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFZvaWRBcGlSZXNwb25zZSQxKHJlc3BvbnNlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgYSBuZXcgZGV2aWNlIHRvIGEgdXNlciwgaWYgdGhlIHNhbWUgZGV2aWNlIGFscmVhZHkgZXhpc3RzIHRoZSBjYWxsIHdpbGwgaGF2ZSBubyBlZmZlY3RcbiAgICAgKiBDcmVhdGUgZGV2aWNlXG4gICAgICovXG4gICAgY3JlYXRlRGV2aWNlKHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB5aWVsZCB0aGlzLmNyZWF0ZURldmljZVJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWxldGUgYSBwdXNoIHByb3ZpZGVyIGZyb20gdjIgd2l0aCBtdWx0aSBidW5kbGUvcGFja2FnZSBzdXBwb3J0LiB2MSBpc25cXCd0IHN1cHBvcnRlZCBpbiB0aGlzIGVuZHBvaW50XG4gICAgICogRGVsZXRlIGEgcHVzaCBwcm92aWRlclxuICAgICAqL1xuICAgIGRlbGV0ZVB1c2hQcm92aWRlclJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLnR5cGUgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMudHlwZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IkMSgndHlwZScsICdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVxdWVzdFBhcmFtZXRlcnMudHlwZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGRlbGV0ZVB1c2hQcm92aWRlci4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy5uYW1lID09PSBudWxsIHx8IHJlcXVlc3RQYXJhbWV0ZXJzLm5hbWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZXF1aXJlZEVycm9yJDEoJ25hbWUnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLm5hbWUgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBkZWxldGVQdXNoUHJvdmlkZXIuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlclBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJTdHJlYW0tQXV0aC1UeXBlXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIlN0cmVhbS1BdXRoLVR5cGVcIik7IC8vIHN0cmVhbS1hdXRoLXR5cGUgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1tcImFwaV9rZXlcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiYXBpX2tleVwiKTsgLy8gYXBpX2tleSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiQXV0aG9yaXphdGlvblwiKTsgLy8gSldUIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgcGF0aDogYC9wdXNoX3Byb3ZpZGVycy97dHlwZX0ve25hbWV9YC5yZXBsYWNlKGB7JHtcInR5cGVcIn19YCwgZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhyZXF1ZXN0UGFyYW1ldGVycy50eXBlKSkpLnJlcGxhY2UoYHske1wibmFtZVwifX1gLCBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJlcXVlc3RQYXJhbWV0ZXJzLm5hbWUpKSksXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICB9LCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgSlNPTkFwaVJlc3BvbnNlJDEocmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVsZXRlIGEgcHVzaCBwcm92aWRlciBmcm9tIHYyIHdpdGggbXVsdGkgYnVuZGxlL3BhY2thZ2Ugc3VwcG9ydC4gdjEgaXNuXFwndCBzdXBwb3J0ZWQgaW4gdGhpcyBlbmRwb2ludFxuICAgICAqIERlbGV0ZSBhIHB1c2ggcHJvdmlkZXJcbiAgICAgKi9cbiAgICBkZWxldGVQdXNoUHJvdmlkZXIocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5kZWxldGVQdXNoUHJvdmlkZXJSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIHlpZWxkIHJlc3BvbnNlLnZhbHVlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMaXN0IGRldGFpbHMgb2YgYWxsIHB1c2ggcHJvdmlkZXJzLlxuICAgICAqIExpc3QgcHVzaCBwcm92aWRlcnNcbiAgICAgKi9cbiAgICBsaXN0UHVzaFByb3ZpZGVyc1Jhdyhpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlclBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJTdHJlYW0tQXV0aC1UeXBlXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIlN0cmVhbS1BdXRoLVR5cGVcIik7IC8vIHN0cmVhbS1hdXRoLXR5cGUgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1tcImFwaV9rZXlcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiYXBpX2tleVwiKTsgLy8gYXBpX2tleSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiQXV0aG9yaXphdGlvblwiKTsgLy8gSldUIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgcGF0aDogYC9wdXNoX3Byb3ZpZGVyc2AsXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICB9LCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgSlNPTkFwaVJlc3BvbnNlJDEocmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTGlzdCBkZXRhaWxzIG9mIGFsbCBwdXNoIHByb3ZpZGVycy5cbiAgICAgKiBMaXN0IHB1c2ggcHJvdmlkZXJzXG4gICAgICovXG4gICAgbGlzdFB1c2hQcm92aWRlcnMoaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLmxpc3RQdXNoUHJvdmlkZXJzUmF3KGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIHlpZWxkIHJlc3BvbnNlLnZhbHVlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuLyogdHNsaW50OmRpc2FibGUgKi9cbi8qIGVzbGludC1kaXNhYmxlICovXG4vKipcbiAqIFN0cmVhbSBDaGF0IEFQSVxuICogTm8gZGVzY3JpcHRpb24gcHJvdmlkZWQgKGdlbmVyYXRlZCBieSBPcGVuYXBpIEdlbmVyYXRvciBodHRwczovL2dpdGh1Yi5jb20vb3BlbmFwaXRvb2xzL29wZW5hcGktZ2VuZXJhdG9yKVxuICpcbiAqIFRoZSB2ZXJzaW9uIG9mIHRoZSBPcGVuQVBJIGRvY3VtZW50OiB2OTIuNy4wXG4gKlxuICpcbiAqIE5PVEU6IFRoaXMgY2xhc3MgaXMgYXV0byBnZW5lcmF0ZWQgYnkgT3BlbkFQSSBHZW5lcmF0b3IgKGh0dHBzOi8vb3BlbmFwaS1nZW5lcmF0b3IudGVjaCkuXG4gKiBodHRwczovL29wZW5hcGktZ2VuZXJhdG9yLnRlY2hcbiAqIERvIG5vdCBlZGl0IHRoZSBjbGFzcyBtYW51YWxseS5cbiAqL1xuLyoqXG4gKlxuICovXG5sZXQgU2VydmVyU2lkZUFwaSQxID0gY2xhc3MgU2VydmVyU2lkZUFwaSBleHRlbmRzIEJhc2VBUEkkMSB7XG4gICAgLyoqXG4gICAgICogVXBzZXJ0IGEgcHVzaCBwcm92aWRlciBmb3IgdjIgd2l0aCBtdWx0aSBidW5kbGUvcGFja2FnZSBzdXBwb3J0XG4gICAgICogVXBzZXJ0IGEgcHVzaCBwcm92aWRlclxuICAgICAqL1xuICAgIHVwc2VydFB1c2hQcm92aWRlclJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLnVwc2VydFB1c2hQcm92aWRlclJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMudXBzZXJ0UHVzaFByb3ZpZGVyUmVxdWVzdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IkMSgndXBzZXJ0UHVzaFByb3ZpZGVyUmVxdWVzdCcsICdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVxdWVzdFBhcmFtZXRlcnMudXBzZXJ0UHVzaFByb3ZpZGVyUmVxdWVzdCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVwc2VydFB1c2hQcm92aWRlci4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgY29uc3QgaGVhZGVyUGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1snQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbic7XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiU3RyZWFtLUF1dGgtVHlwZVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJTdHJlYW0tQXV0aC1UeXBlXCIpOyAvLyBzdHJlYW0tYXV0aC10eXBlIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbXCJhcGlfa2V5XCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcImFwaV9rZXlcIik7IC8vIGFwaV9rZXkgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJBdXRob3JpemF0aW9uXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIkF1dGhvcml6YXRpb25cIik7IC8vIEpXVCBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIHBhdGg6IGAvcHVzaF9wcm92aWRlcnNgLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBib2R5OiByZXF1ZXN0UGFyYW1ldGVycy51cHNlcnRQdXNoUHJvdmlkZXJSZXF1ZXN0LFxuICAgICAgICAgICAgfSwgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEpTT05BcGlSZXNwb25zZSQxKHJlc3BvbnNlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwc2VydCBhIHB1c2ggcHJvdmlkZXIgZm9yIHYyIHdpdGggbXVsdGkgYnVuZGxlL3BhY2thZ2Ugc3VwcG9ydFxuICAgICAqIFVwc2VydCBhIHB1c2ggcHJvdmlkZXJcbiAgICAgKi9cbiAgICB1cHNlcnRQdXNoUHJvdmlkZXIocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy51cHNlcnRQdXNoUHJvdmlkZXJSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIHlpZWxkIHJlc3BvbnNlLnZhbHVlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbn07XG5cbi8qIHRzbGludDpkaXNhYmxlICovXG4vKiBlc2xpbnQtZGlzYWJsZSAqL1xuLyoqXG4gKiBTdHJlYW0gQ2hhdCBBUElcbiAqIE5vIGRlc2NyaXB0aW9uIHByb3ZpZGVkIChnZW5lcmF0ZWQgYnkgT3BlbmFwaSBHZW5lcmF0b3IgaHR0cHM6Ly9naXRodWIuY29tL29wZW5hcGl0b29scy9vcGVuYXBpLWdlbmVyYXRvcilcbiAqXG4gKiBUaGUgdmVyc2lvbiBvZiB0aGUgT3BlbkFQSSBkb2N1bWVudDogdjkyLjcuMFxuICpcbiAqXG4gKiBOT1RFOiBUaGlzIGNsYXNzIGlzIGF1dG8gZ2VuZXJhdGVkIGJ5IE9wZW5BUEkgR2VuZXJhdG9yIChodHRwczovL29wZW5hcGktZ2VuZXJhdG9yLnRlY2gpLlxuICogaHR0cHM6Ly9vcGVuYXBpLWdlbmVyYXRvci50ZWNoXG4gKiBEbyBub3QgZWRpdCB0aGUgY2xhc3MgbWFudWFsbHkuXG4gKi9cbi8qKlxuICpcbiAqL1xubGV0IFNldHRpbmdzQXBpJDEgPSBjbGFzcyBTZXR0aW5nc0FwaSBleHRlbmRzIEJhc2VBUEkkMSB7XG4gICAgLyoqXG4gICAgICogU2VuZHMgYSB0ZXN0IG1lc3NhZ2UgdmlhIHB1c2gsIHRoaXMgaXMgYSB0ZXN0IGVuZHBvaW50IHRvIHZlcmlmeSB5b3VyIHB1c2ggc2V0dGluZ3NcbiAgICAgKiBDaGVjayBwdXNoXG4gICAgICovXG4gICAgY2hlY2tQdXNoUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMuY2hlY2tQdXNoUmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy5jaGVja1B1c2hSZXF1ZXN0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvciQxKCdjaGVja1B1c2hSZXF1ZXN0JywgJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy5jaGVja1B1c2hSZXF1ZXN0IHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgY2hlY2tQdXNoLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJztcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJTdHJlYW0tQXV0aC1UeXBlXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIlN0cmVhbS1BdXRoLVR5cGVcIik7IC8vIHN0cmVhbS1hdXRoLXR5cGUgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1tcImFwaV9rZXlcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiYXBpX2tleVwiKTsgLy8gYXBpX2tleSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiQXV0aG9yaXphdGlvblwiKTsgLy8gSldUIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgcGF0aDogYC9jaGVja19wdXNoYCxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgYm9keTogcmVxdWVzdFBhcmFtZXRlcnMuY2hlY2tQdXNoUmVxdWVzdCxcbiAgICAgICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBKU09OQXBpUmVzcG9uc2UkMShyZXNwb25zZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kcyBhIHRlc3QgbWVzc2FnZSB2aWEgcHVzaCwgdGhpcyBpcyBhIHRlc3QgZW5kcG9pbnQgdG8gdmVyaWZ5IHlvdXIgcHVzaCBzZXR0aW5nc1xuICAgICAqIENoZWNrIHB1c2hcbiAgICAgKi9cbiAgICBjaGVja1B1c2gocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5jaGVja1B1c2hSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIHlpZWxkIHJlc3BvbnNlLnZhbHVlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBWYWxpZGF0ZXMgQW1hem9uIFNOUyBjb25maWd1cmF0aW9uXG4gICAgICogQ2hlY2sgU05TXG4gICAgICovXG4gICAgY2hlY2tTTlNSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy5jaGVja1NOU1JlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMuY2hlY2tTTlNSZXF1ZXN0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvciQxKCdjaGVja1NOU1JlcXVlc3QnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLmNoZWNrU05TUmVxdWVzdCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGNoZWNrU05TLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJztcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJTdHJlYW0tQXV0aC1UeXBlXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIlN0cmVhbS1BdXRoLVR5cGVcIik7IC8vIHN0cmVhbS1hdXRoLXR5cGUgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1tcImFwaV9rZXlcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiYXBpX2tleVwiKTsgLy8gYXBpX2tleSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiQXV0aG9yaXphdGlvblwiKTsgLy8gSldUIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgcGF0aDogYC9jaGVja19zbnNgLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBib2R5OiByZXF1ZXN0UGFyYW1ldGVycy5jaGVja1NOU1JlcXVlc3QsXG4gICAgICAgICAgICB9LCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgSlNPTkFwaVJlc3BvbnNlJDEocmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVmFsaWRhdGVzIEFtYXpvbiBTTlMgY29uZmlndXJhdGlvblxuICAgICAqIENoZWNrIFNOU1xuICAgICAqL1xuICAgIGNoZWNrU05TKHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuY2hlY2tTTlNSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIHlpZWxkIHJlc3BvbnNlLnZhbHVlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBWYWxpZGF0ZXMgQW1hem9uIFNRUyBjcmVkZW50aWFsc1xuICAgICAqIENoZWNrIFNRU1xuICAgICAqL1xuICAgIGNoZWNrU1FTUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMuY2hlY2tTUVNSZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3RQYXJhbWV0ZXJzLmNoZWNrU1FTUmVxdWVzdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IkMSgnY2hlY2tTUVNSZXF1ZXN0JywgJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy5jaGVja1NRU1JlcXVlc3Qgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBjaGVja1NRUy4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgY29uc3QgaGVhZGVyUGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1snQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbic7XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiU3RyZWFtLUF1dGgtVHlwZVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJTdHJlYW0tQXV0aC1UeXBlXCIpOyAvLyBzdHJlYW0tYXV0aC10eXBlIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbXCJhcGlfa2V5XCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcImFwaV9rZXlcIik7IC8vIGFwaV9rZXkgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJBdXRob3JpemF0aW9uXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIkF1dGhvcml6YXRpb25cIik7IC8vIEpXVCBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIHBhdGg6IGAvY2hlY2tfc3FzYCxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgYm9keTogcmVxdWVzdFBhcmFtZXRlcnMuY2hlY2tTUVNSZXF1ZXN0LFxuICAgICAgICAgICAgfSwgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEpTT05BcGlSZXNwb25zZSQxKHJlc3BvbnNlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFZhbGlkYXRlcyBBbWF6b24gU1FTIGNyZWRlbnRpYWxzXG4gICAgICogQ2hlY2sgU1FTXG4gICAgICovXG4gICAgY2hlY2tTUVMocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5jaGVja1NRU1JhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4geWllbGQgcmVzcG9uc2UudmFsdWUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgYXBwbGljYXRpb24gYmxvY2tsaXN0LCBvbmNlIGNyZWF0ZWQgdGhlIGJsb2NrbGlzdCBjYW4gYmUgdXNlZCBieSBhbnkgY2hhbm5lbCB0eXBlXG4gICAgICogQ3JlYXRlIGJsb2NrIGxpc3RcbiAgICAgKi9cbiAgICBjcmVhdGVCbG9ja0xpc3RSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy5jcmVhdGVCbG9ja0xpc3RSZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3RQYXJhbWV0ZXJzLmNyZWF0ZUJsb2NrTGlzdFJlcXVlc3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZXF1aXJlZEVycm9yJDEoJ2NyZWF0ZUJsb2NrTGlzdFJlcXVlc3QnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLmNyZWF0ZUJsb2NrTGlzdFJlcXVlc3Qgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBjcmVhdGVCbG9ja0xpc3QuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlclBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbJ0NvbnRlbnQtVHlwZSddID0gJ2FwcGxpY2F0aW9uL2pzb24nO1xuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIlN0cmVhbS1BdXRoLVR5cGVcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiU3RyZWFtLUF1dGgtVHlwZVwiKTsgLy8gc3RyZWFtLWF1dGgtdHlwZSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzW1wiYXBpX2tleVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJhcGlfa2V5XCIpOyAvLyBhcGlfa2V5IGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiQXV0aG9yaXphdGlvblwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJBdXRob3JpemF0aW9uXCIpOyAvLyBKV1QgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICBwYXRoOiBgL2Jsb2NrbGlzdHNgLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBib2R5OiByZXF1ZXN0UGFyYW1ldGVycy5jcmVhdGVCbG9ja0xpc3RSZXF1ZXN0LFxuICAgICAgICAgICAgfSwgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEpTT05BcGlSZXNwb25zZSQxKHJlc3BvbnNlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgYXBwbGljYXRpb24gYmxvY2tsaXN0LCBvbmNlIGNyZWF0ZWQgdGhlIGJsb2NrbGlzdCBjYW4gYmUgdXNlZCBieSBhbnkgY2hhbm5lbCB0eXBlXG4gICAgICogQ3JlYXRlIGJsb2NrIGxpc3RcbiAgICAgKi9cbiAgICBjcmVhdGVCbG9ja0xpc3QocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5jcmVhdGVCbG9ja0xpc3RSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIHlpZWxkIHJlc3BvbnNlLnZhbHVlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIG5ldyBjaGFubmVsIHR5cGVcbiAgICAgKiBDcmVhdGUgY2hhbm5lbCB0eXBlXG4gICAgICovXG4gICAgY3JlYXRlQ2hhbm5lbFR5cGVSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy5jcmVhdGVDaGFubmVsVHlwZVJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMuY3JlYXRlQ2hhbm5lbFR5cGVSZXF1ZXN0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvciQxKCdjcmVhdGVDaGFubmVsVHlwZVJlcXVlc3QnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLmNyZWF0ZUNoYW5uZWxUeXBlUmVxdWVzdCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGNyZWF0ZUNoYW5uZWxUeXBlLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJztcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJTdHJlYW0tQXV0aC1UeXBlXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIlN0cmVhbS1BdXRoLVR5cGVcIik7IC8vIHN0cmVhbS1hdXRoLXR5cGUgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1tcImFwaV9rZXlcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiYXBpX2tleVwiKTsgLy8gYXBpX2tleSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiQXV0aG9yaXphdGlvblwiKTsgLy8gSldUIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgcGF0aDogYC9jaGFubmVsdHlwZXNgLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBib2R5OiByZXF1ZXN0UGFyYW1ldGVycy5jcmVhdGVDaGFubmVsVHlwZVJlcXVlc3QsXG4gICAgICAgICAgICB9LCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgSlNPTkFwaVJlc3BvbnNlJDEocmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBuZXcgY2hhbm5lbCB0eXBlXG4gICAgICogQ3JlYXRlIGNoYW5uZWwgdHlwZVxuICAgICAqL1xuICAgIGNyZWF0ZUNoYW5uZWxUeXBlKHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuY3JlYXRlQ2hhbm5lbFR5cGVSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIHlpZWxkIHJlc3BvbnNlLnZhbHVlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWxldGVzIHByZXZpb3VzbHkgY3JlYXRlZCBhcHBsaWNhdGlvbiBibG9ja2xpc3RcbiAgICAgKiBEZWxldGUgYmxvY2sgbGlzdFxuICAgICAqL1xuICAgIGRlbGV0ZUJsb2NrTGlzdFJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLm5hbWUgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMubmFtZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IkMSgnbmFtZScsICdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVxdWVzdFBhcmFtZXRlcnMubmFtZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGRlbGV0ZUJsb2NrTGlzdC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgY29uc3QgaGVhZGVyUGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIlN0cmVhbS1BdXRoLVR5cGVcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiU3RyZWFtLUF1dGgtVHlwZVwiKTsgLy8gc3RyZWFtLWF1dGgtdHlwZSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzW1wiYXBpX2tleVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJhcGlfa2V5XCIpOyAvLyBhcGlfa2V5IGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiQXV0aG9yaXphdGlvblwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJBdXRob3JpemF0aW9uXCIpOyAvLyBKV1QgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICBwYXRoOiBgL2Jsb2NrbGlzdHMve25hbWV9YC5yZXBsYWNlKGB7JHtcIm5hbWVcIn19YCwgZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhyZXF1ZXN0UGFyYW1ldGVycy5uYW1lKSkpLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVyUGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBxdWVyeTogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgfSwgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEpTT05BcGlSZXNwb25zZSQxKHJlc3BvbnNlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlbGV0ZXMgcHJldmlvdXNseSBjcmVhdGVkIGFwcGxpY2F0aW9uIGJsb2NrbGlzdFxuICAgICAqIERlbGV0ZSBibG9jayBsaXN0XG4gICAgICovXG4gICAgZGVsZXRlQmxvY2tMaXN0KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuZGVsZXRlQmxvY2tMaXN0UmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCByZXNwb25zZS52YWx1ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVsZXRlcyBjaGFubmVsIHR5cGVcbiAgICAgKiBEZWxldGUgY2hhbm5lbCB0eXBlXG4gICAgICovXG4gICAgZGVsZXRlQ2hhbm5lbFR5cGVSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy5uYW1lID09PSBudWxsIHx8IHJlcXVlc3RQYXJhbWV0ZXJzLm5hbWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZXF1aXJlZEVycm9yJDEoJ25hbWUnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLm5hbWUgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBkZWxldGVDaGFubmVsVHlwZS4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgY29uc3QgaGVhZGVyUGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIlN0cmVhbS1BdXRoLVR5cGVcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiU3RyZWFtLUF1dGgtVHlwZVwiKTsgLy8gc3RyZWFtLWF1dGgtdHlwZSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzW1wiYXBpX2tleVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJhcGlfa2V5XCIpOyAvLyBhcGlfa2V5IGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiQXV0aG9yaXphdGlvblwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJBdXRob3JpemF0aW9uXCIpOyAvLyBKV1QgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICBwYXRoOiBgL2NoYW5uZWx0eXBlcy97bmFtZX1gLnJlcGxhY2UoYHske1wibmFtZVwifX1gLCBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJlcXVlc3RQYXJhbWV0ZXJzLm5hbWUpKSksXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICB9LCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgSlNPTkFwaVJlc3BvbnNlJDEocmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVsZXRlcyBjaGFubmVsIHR5cGVcbiAgICAgKiBEZWxldGUgY2hhbm5lbCB0eXBlXG4gICAgICovXG4gICAgZGVsZXRlQ2hhbm5lbFR5cGUocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5kZWxldGVDaGFubmVsVHlwZVJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4geWllbGQgcmVzcG9uc2UudmFsdWUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlbGV0ZSBhIHB1c2ggcHJvdmlkZXIgZnJvbSB2MiB3aXRoIG11bHRpIGJ1bmRsZS9wYWNrYWdlIHN1cHBvcnQuIHYxIGlzblxcJ3Qgc3VwcG9ydGVkIGluIHRoaXMgZW5kcG9pbnRcbiAgICAgKiBEZWxldGUgYSBwdXNoIHByb3ZpZGVyXG4gICAgICovXG4gICAgZGVsZXRlUHVzaFByb3ZpZGVyUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMudHlwZSA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy50eXBlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvciQxKCd0eXBlJywgJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy50eXBlIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZGVsZXRlUHVzaFByb3ZpZGVyLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLm5hbWUgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMubmFtZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IkMSgnbmFtZScsICdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVxdWVzdFBhcmFtZXRlcnMubmFtZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGRlbGV0ZVB1c2hQcm92aWRlci4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgY29uc3QgaGVhZGVyUGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIlN0cmVhbS1BdXRoLVR5cGVcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiU3RyZWFtLUF1dGgtVHlwZVwiKTsgLy8gc3RyZWFtLWF1dGgtdHlwZSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzW1wiYXBpX2tleVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJhcGlfa2V5XCIpOyAvLyBhcGlfa2V5IGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiQXV0aG9yaXphdGlvblwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJBdXRob3JpemF0aW9uXCIpOyAvLyBKV1QgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICBwYXRoOiBgL3B1c2hfcHJvdmlkZXJzL3t0eXBlfS97bmFtZX1gLnJlcGxhY2UoYHske1widHlwZVwifX1gLCBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJlcXVlc3RQYXJhbWV0ZXJzLnR5cGUpKSkucmVwbGFjZShgeyR7XCJuYW1lXCJ9fWAsIGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVxdWVzdFBhcmFtZXRlcnMubmFtZSkpKSxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBKU09OQXBpUmVzcG9uc2UkMShyZXNwb25zZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWxldGUgYSBwdXNoIHByb3ZpZGVyIGZyb20gdjIgd2l0aCBtdWx0aSBidW5kbGUvcGFja2FnZSBzdXBwb3J0LiB2MSBpc25cXCd0IHN1cHBvcnRlZCBpbiB0aGlzIGVuZHBvaW50XG4gICAgICogRGVsZXRlIGEgcHVzaCBwcm92aWRlclxuICAgICAqL1xuICAgIGRlbGV0ZVB1c2hQcm92aWRlcihyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLmRlbGV0ZVB1c2hQcm92aWRlclJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4geWllbGQgcmVzcG9uc2UudmFsdWUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIHJldHVybnMgdGhlIGFwcGxpY2F0aW9uIHNldHRpbmdzXG4gICAgICogR2V0IEFwcCBTZXR0aW5nc1xuICAgICAqL1xuICAgIGdldEFwcFJhdyhpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlclBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJTdHJlYW0tQXV0aC1UeXBlXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIlN0cmVhbS1BdXRoLVR5cGVcIik7IC8vIHN0cmVhbS1hdXRoLXR5cGUgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1tcImFwaV9rZXlcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiYXBpX2tleVwiKTsgLy8gYXBpX2tleSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiQXV0aG9yaXphdGlvblwiKTsgLy8gSldUIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgcGF0aDogYC9hcHBgLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVyUGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBxdWVyeTogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgfSwgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEpTT05BcGlSZXNwb25zZSQxKHJlc3BvbnNlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIHJldHVybnMgdGhlIGFwcGxpY2F0aW9uIHNldHRpbmdzXG4gICAgICogR2V0IEFwcCBTZXR0aW5nc1xuICAgICAqL1xuICAgIGdldEFwcChpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuZ2V0QXBwUmF3KGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIHlpZWxkIHJlc3BvbnNlLnZhbHVlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGJsb2NrIGxpc3QgYnkgZ2l2ZW4gbmFtZVxuICAgICAqIEdldCBibG9jayBsaXN0XG4gICAgICovXG4gICAgZ2V0QmxvY2tMaXN0UmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMubmFtZSA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy5uYW1lID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvciQxKCduYW1lJywgJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy5uYW1lIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0QmxvY2tMaXN0LicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiU3RyZWFtLUF1dGgtVHlwZVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJTdHJlYW0tQXV0aC1UeXBlXCIpOyAvLyBzdHJlYW0tYXV0aC10eXBlIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbXCJhcGlfa2V5XCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcImFwaV9rZXlcIik7IC8vIGFwaV9rZXkgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJBdXRob3JpemF0aW9uXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIkF1dGhvcml6YXRpb25cIik7IC8vIEpXVCBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIHBhdGg6IGAvYmxvY2tsaXN0cy97bmFtZX1gLnJlcGxhY2UoYHske1wibmFtZVwifX1gLCBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJlcXVlc3RQYXJhbWV0ZXJzLm5hbWUpKSksXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICB9LCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgSlNPTkFwaVJlc3BvbnNlJDEocmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBibG9jayBsaXN0IGJ5IGdpdmVuIG5hbWVcbiAgICAgKiBHZXQgYmxvY2sgbGlzdFxuICAgICAqL1xuICAgIGdldEJsb2NrTGlzdChyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLmdldEJsb2NrTGlzdFJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4geWllbGQgcmVzcG9uc2UudmFsdWUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgY2hhbm5lbCB0eXBlXG4gICAgICogR2V0IGNoYW5uZWwgdHlwZVxuICAgICAqL1xuICAgIGdldENoYW5uZWxUeXBlUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMubmFtZSA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy5uYW1lID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvciQxKCduYW1lJywgJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy5uYW1lIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0Q2hhbm5lbFR5cGUuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlclBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJTdHJlYW0tQXV0aC1UeXBlXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIlN0cmVhbS1BdXRoLVR5cGVcIik7IC8vIHN0cmVhbS1hdXRoLXR5cGUgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1tcImFwaV9rZXlcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiYXBpX2tleVwiKTsgLy8gYXBpX2tleSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiQXV0aG9yaXphdGlvblwiKTsgLy8gSldUIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgcGF0aDogYC9jaGFubmVsdHlwZXMve25hbWV9YC5yZXBsYWNlKGB7JHtcIm5hbWVcIn19YCwgZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhyZXF1ZXN0UGFyYW1ldGVycy5uYW1lKSkpLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVyUGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBxdWVyeTogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgfSwgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEpTT05BcGlSZXNwb25zZSQxKHJlc3BvbnNlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgY2hhbm5lbCB0eXBlXG4gICAgICogR2V0IGNoYW5uZWwgdHlwZVxuICAgICAqL1xuICAgIGdldENoYW5uZWxUeXBlKHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuZ2V0Q2hhbm5lbFR5cGVSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIHlpZWxkIHJlc3BvbnNlLnZhbHVlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgcmF0ZSBsaW1pdHMgdXNhZ2UgYW5kIHF1b3Rhc1xuICAgICAqIEdldCByYXRlIGxpbWl0c1xuICAgICAqL1xuICAgIGdldFJhdGVMaW1pdHNSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLnNlcnZlclNpZGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1snc2VydmVyX3NpZGUnXSA9IHJlcXVlc3RQYXJhbWV0ZXJzLnNlcnZlclNpZGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMuYW5kcm9pZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzWydhbmRyb2lkJ10gPSByZXF1ZXN0UGFyYW1ldGVycy5hbmRyb2lkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLmlvcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzWydpb3MnXSA9IHJlcXVlc3RQYXJhbWV0ZXJzLmlvcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy53ZWIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1snd2ViJ10gPSByZXF1ZXN0UGFyYW1ldGVycy53ZWI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMuZW5kcG9pbnRzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbJ2VuZHBvaW50cyddID0gcmVxdWVzdFBhcmFtZXRlcnMuZW5kcG9pbnRzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgaGVhZGVyUGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIlN0cmVhbS1BdXRoLVR5cGVcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiU3RyZWFtLUF1dGgtVHlwZVwiKTsgLy8gc3RyZWFtLWF1dGgtdHlwZSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzW1wiYXBpX2tleVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJhcGlfa2V5XCIpOyAvLyBhcGlfa2V5IGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiQXV0aG9yaXphdGlvblwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJBdXRob3JpemF0aW9uXCIpOyAvLyBKV1QgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICBwYXRoOiBgL3JhdGVfbGltaXRzYCxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBKU09OQXBpUmVzcG9uc2UkMShyZXNwb25zZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgcmF0ZSBsaW1pdHMgdXNhZ2UgYW5kIHF1b3Rhc1xuICAgICAqIEdldCByYXRlIGxpbWl0c1xuICAgICAqL1xuICAgIGdldFJhdGVMaW1pdHMocmVxdWVzdFBhcmFtZXRlcnMgPSB7fSwgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLmdldFJhdGVMaW1pdHNSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIHlpZWxkIHJlc3BvbnNlLnZhbHVlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFsbCBhdmFpbGFibGUgYmxvY2sgbGlzdHNcbiAgICAgKiBMaXN0IGJsb2NrIGxpc3RzXG4gICAgICovXG4gICAgbGlzdEJsb2NrTGlzdHNSYXcoaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiU3RyZWFtLUF1dGgtVHlwZVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJTdHJlYW0tQXV0aC1UeXBlXCIpOyAvLyBzdHJlYW0tYXV0aC10eXBlIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbXCJhcGlfa2V5XCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcImFwaV9rZXlcIik7IC8vIGFwaV9rZXkgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJBdXRob3JpemF0aW9uXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIkF1dGhvcml6YXRpb25cIik7IC8vIEpXVCBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIHBhdGg6IGAvYmxvY2tsaXN0c2AsXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICB9LCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgSlNPTkFwaVJlc3BvbnNlJDEocmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhbGwgYXZhaWxhYmxlIGJsb2NrIGxpc3RzXG4gICAgICogTGlzdCBibG9jayBsaXN0c1xuICAgICAqL1xuICAgIGxpc3RCbG9ja0xpc3RzKGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5saXN0QmxvY2tMaXN0c1Jhdyhpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCByZXNwb25zZS52YWx1ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTGlzdHMgYWxsIGF2YWlsYWJsZSBjaGFubmVsIHR5cGVzXG4gICAgICogTGlzdCBjaGFubmVsIHR5cGVzXG4gICAgICovXG4gICAgbGlzdENoYW5uZWxUeXBlc1Jhdyhpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlclBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJTdHJlYW0tQXV0aC1UeXBlXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIlN0cmVhbS1BdXRoLVR5cGVcIik7IC8vIHN0cmVhbS1hdXRoLXR5cGUgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1tcImFwaV9rZXlcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiYXBpX2tleVwiKTsgLy8gYXBpX2tleSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiQXV0aG9yaXphdGlvblwiKTsgLy8gSldUIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgcGF0aDogYC9jaGFubmVsdHlwZXNgLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVyUGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBxdWVyeTogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgfSwgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEpTT05BcGlSZXNwb25zZSQxKHJlc3BvbnNlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExpc3RzIGFsbCBhdmFpbGFibGUgY2hhbm5lbCB0eXBlc1xuICAgICAqIExpc3QgY2hhbm5lbCB0eXBlc1xuICAgICAqL1xuICAgIGxpc3RDaGFubmVsVHlwZXMoaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLmxpc3RDaGFubmVsVHlwZXNSYXcoaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4geWllbGQgcmVzcG9uc2UudmFsdWUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExpc3QgZGV0YWlscyBvZiBhbGwgcHVzaCBwcm92aWRlcnMuXG4gICAgICogTGlzdCBwdXNoIHByb3ZpZGVyc1xuICAgICAqL1xuICAgIGxpc3RQdXNoUHJvdmlkZXJzUmF3KGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgY29uc3QgaGVhZGVyUGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIlN0cmVhbS1BdXRoLVR5cGVcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiU3RyZWFtLUF1dGgtVHlwZVwiKTsgLy8gc3RyZWFtLWF1dGgtdHlwZSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzW1wiYXBpX2tleVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJhcGlfa2V5XCIpOyAvLyBhcGlfa2V5IGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiQXV0aG9yaXphdGlvblwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJBdXRob3JpemF0aW9uXCIpOyAvLyBKV1QgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICBwYXRoOiBgL3B1c2hfcHJvdmlkZXJzYCxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBKU09OQXBpUmVzcG9uc2UkMShyZXNwb25zZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMaXN0IGRldGFpbHMgb2YgYWxsIHB1c2ggcHJvdmlkZXJzLlxuICAgICAqIExpc3QgcHVzaCBwcm92aWRlcnNcbiAgICAgKi9cbiAgICBsaXN0UHVzaFByb3ZpZGVycyhpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMubGlzdFB1c2hQcm92aWRlcnNSYXcoaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4geWllbGQgcmVzcG9uc2UudmFsdWUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIHVwZGF0ZXMgb25lIG9yIG1vcmUgYXBwbGljYXRpb24gc2V0dGluZ3NcbiAgICAgKiBVcGRhdGUgQXBwIFNldHRpbmdzXG4gICAgICovXG4gICAgdXBkYXRlQXBwUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMudXBkYXRlQXBwUmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy51cGRhdGVBcHBSZXF1ZXN0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvciQxKCd1cGRhdGVBcHBSZXF1ZXN0JywgJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy51cGRhdGVBcHBSZXF1ZXN0IHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgdXBkYXRlQXBwLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJztcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJTdHJlYW0tQXV0aC1UeXBlXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIlN0cmVhbS1BdXRoLVR5cGVcIik7IC8vIHN0cmVhbS1hdXRoLXR5cGUgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1tcImFwaV9rZXlcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiYXBpX2tleVwiKTsgLy8gYXBpX2tleSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiQXV0aG9yaXphdGlvblwiKTsgLy8gSldUIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgcGF0aDogYC9hcHBgLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgYm9keTogcmVxdWVzdFBhcmFtZXRlcnMudXBkYXRlQXBwUmVxdWVzdCxcbiAgICAgICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBKU09OQXBpUmVzcG9uc2UkMShyZXNwb25zZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCB1cGRhdGVzIG9uZSBvciBtb3JlIGFwcGxpY2F0aW9uIHNldHRpbmdzXG4gICAgICogVXBkYXRlIEFwcCBTZXR0aW5nc1xuICAgICAqL1xuICAgIHVwZGF0ZUFwcChyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnVwZGF0ZUFwcFJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4geWllbGQgcmVzcG9uc2UudmFsdWUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgY29udGVudHMgb2YgdGhlIGJsb2NrIGxpc3RcbiAgICAgKiBVcGRhdGUgYmxvY2sgbGlzdFxuICAgICAqL1xuICAgIHVwZGF0ZUJsb2NrTGlzdFJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLm5hbWUgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMubmFtZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IkMSgnbmFtZScsICdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVxdWVzdFBhcmFtZXRlcnMubmFtZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVwZGF0ZUJsb2NrTGlzdC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy51cGRhdGVCbG9ja0xpc3RSZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3RQYXJhbWV0ZXJzLnVwZGF0ZUJsb2NrTGlzdFJlcXVlc3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZXF1aXJlZEVycm9yJDEoJ3VwZGF0ZUJsb2NrTGlzdFJlcXVlc3QnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLnVwZGF0ZUJsb2NrTGlzdFJlcXVlc3Qgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1cGRhdGVCbG9ja0xpc3QuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlclBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbJ0NvbnRlbnQtVHlwZSddID0gJ2FwcGxpY2F0aW9uL2pzb24nO1xuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIlN0cmVhbS1BdXRoLVR5cGVcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiU3RyZWFtLUF1dGgtVHlwZVwiKTsgLy8gc3RyZWFtLWF1dGgtdHlwZSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzW1wiYXBpX2tleVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJhcGlfa2V5XCIpOyAvLyBhcGlfa2V5IGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiQXV0aG9yaXphdGlvblwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJBdXRob3JpemF0aW9uXCIpOyAvLyBKV1QgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICBwYXRoOiBgL2Jsb2NrbGlzdHMve25hbWV9YC5yZXBsYWNlKGB7JHtcIm5hbWVcIn19YCwgZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhyZXF1ZXN0UGFyYW1ldGVycy5uYW1lKSkpLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVyUGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBxdWVyeTogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIGJvZHk6IHJlcXVlc3RQYXJhbWV0ZXJzLnVwZGF0ZUJsb2NrTGlzdFJlcXVlc3QsXG4gICAgICAgICAgICB9LCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgSlNPTkFwaVJlc3BvbnNlJDEocmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyBjb250ZW50cyBvZiB0aGUgYmxvY2sgbGlzdFxuICAgICAqIFVwZGF0ZSBibG9jayBsaXN0XG4gICAgICovXG4gICAgdXBkYXRlQmxvY2tMaXN0KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMudXBkYXRlQmxvY2tMaXN0UmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCByZXNwb25zZS52YWx1ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyBjaGFubmVsIHR5cGVcbiAgICAgKiBVcGRhdGUgY2hhbm5lbCB0eXBlXG4gICAgICovXG4gICAgdXBkYXRlQ2hhbm5lbFR5cGVSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy5uYW1lID09PSBudWxsIHx8IHJlcXVlc3RQYXJhbWV0ZXJzLm5hbWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZXF1aXJlZEVycm9yJDEoJ25hbWUnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLm5hbWUgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1cGRhdGVDaGFubmVsVHlwZS4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy51cGRhdGVDaGFubmVsVHlwZVJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMudXBkYXRlQ2hhbm5lbFR5cGVSZXF1ZXN0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvciQxKCd1cGRhdGVDaGFubmVsVHlwZVJlcXVlc3QnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLnVwZGF0ZUNoYW5uZWxUeXBlUmVxdWVzdCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVwZGF0ZUNoYW5uZWxUeXBlLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJztcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJTdHJlYW0tQXV0aC1UeXBlXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIlN0cmVhbS1BdXRoLVR5cGVcIik7IC8vIHN0cmVhbS1hdXRoLXR5cGUgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1tcImFwaV9rZXlcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiYXBpX2tleVwiKTsgLy8gYXBpX2tleSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiQXV0aG9yaXphdGlvblwiKTsgLy8gSldUIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgcGF0aDogYC9jaGFubmVsdHlwZXMve25hbWV9YC5yZXBsYWNlKGB7JHtcIm5hbWVcIn19YCwgZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhyZXF1ZXN0UGFyYW1ldGVycy5uYW1lKSkpLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVyUGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBxdWVyeTogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIGJvZHk6IHJlcXVlc3RQYXJhbWV0ZXJzLnVwZGF0ZUNoYW5uZWxUeXBlUmVxdWVzdCxcbiAgICAgICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBKU09OQXBpUmVzcG9uc2UkMShyZXNwb25zZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIGNoYW5uZWwgdHlwZVxuICAgICAqIFVwZGF0ZSBjaGFubmVsIHR5cGVcbiAgICAgKi9cbiAgICB1cGRhdGVDaGFubmVsVHlwZShyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnVwZGF0ZUNoYW5uZWxUeXBlUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCByZXNwb25zZS52YWx1ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG59O1xuXG4vKiB0c2xpbnQ6ZGlzYWJsZSAqL1xuLyogZXNsaW50LWRpc2FibGUgKi9cbi8qKlxuICogU3RyZWFtIENoYXQgQVBJXG4gKiBObyBkZXNjcmlwdGlvbiBwcm92aWRlZCAoZ2VuZXJhdGVkIGJ5IE9wZW5hcGkgR2VuZXJhdG9yIGh0dHBzOi8vZ2l0aHViLmNvbS9vcGVuYXBpdG9vbHMvb3BlbmFwaS1nZW5lcmF0b3IpXG4gKlxuICogVGhlIHZlcnNpb24gb2YgdGhlIE9wZW5BUEkgZG9jdW1lbnQ6IHY5Mi43LjBcbiAqXG4gKlxuICogTk9URTogVGhpcyBjbGFzcyBpcyBhdXRvIGdlbmVyYXRlZCBieSBPcGVuQVBJIEdlbmVyYXRvciAoaHR0cHM6Ly9vcGVuYXBpLWdlbmVyYXRvci50ZWNoKS5cbiAqIGh0dHBzOi8vb3BlbmFwaS1nZW5lcmF0b3IudGVjaFxuICogRG8gbm90IGVkaXQgdGhlIGNsYXNzIG1hbnVhbGx5LlxuICovXG4vKipcbiAqXG4gKi9cbmNsYXNzIFRhc2tzQXBpIGV4dGVuZHMgQmFzZUFQSSQxIHtcbiAgICAvKipcbiAgICAgKiBHZXRzIHN0YXR1cyBvZiBhIHRhc2tcbiAgICAgKiBHZXQgc3RhdHVzIG9mIGEgdGFza1xuICAgICAqL1xuICAgIGdldFRhc2tSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy5pZCA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy5pZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IkMSgnaWQnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLmlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0VGFzay4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgY29uc3QgaGVhZGVyUGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIlN0cmVhbS1BdXRoLVR5cGVcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiU3RyZWFtLUF1dGgtVHlwZVwiKTsgLy8gc3RyZWFtLWF1dGgtdHlwZSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzW1wiYXBpX2tleVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJhcGlfa2V5XCIpOyAvLyBhcGlfa2V5IGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiQXV0aG9yaXphdGlvblwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJBdXRob3JpemF0aW9uXCIpOyAvLyBKV1QgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICBwYXRoOiBgL3Rhc2tzL3tpZH1gLnJlcGxhY2UoYHske1wiaWRcIn19YCwgZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhyZXF1ZXN0UGFyYW1ldGVycy5pZCkpKSxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBKU09OQXBpUmVzcG9uc2UkMShyZXNwb25zZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHN0YXR1cyBvZiBhIHRhc2tcbiAgICAgKiBHZXQgc3RhdHVzIG9mIGEgdGFza1xuICAgICAqL1xuICAgIGdldFRhc2socmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5nZXRUYXNrUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCByZXNwb25zZS52YWx1ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5cbi8qIHRzbGludDpkaXNhYmxlICovXG4vKiBlc2xpbnQtZGlzYWJsZSAqL1xuLyoqXG4gKiBTdHJlYW0gQ2hhdCBBUElcbiAqIE5vIGRlc2NyaXB0aW9uIHByb3ZpZGVkIChnZW5lcmF0ZWQgYnkgT3BlbmFwaSBHZW5lcmF0b3IgaHR0cHM6Ly9naXRodWIuY29tL29wZW5hcGl0b29scy9vcGVuYXBpLWdlbmVyYXRvcilcbiAqXG4gKiBUaGUgdmVyc2lvbiBvZiB0aGUgT3BlbkFQSSBkb2N1bWVudDogdjkyLjcuMFxuICpcbiAqXG4gKiBOT1RFOiBUaGlzIGNsYXNzIGlzIGF1dG8gZ2VuZXJhdGVkIGJ5IE9wZW5BUEkgR2VuZXJhdG9yIChodHRwczovL29wZW5hcGktZ2VuZXJhdG9yLnRlY2gpLlxuICogaHR0cHM6Ly9vcGVuYXBpLWdlbmVyYXRvci50ZWNoXG4gKiBEbyBub3QgZWRpdCB0aGUgY2xhc3MgbWFudWFsbHkuXG4gKi9cbi8qKlxuICpcbiAqL1xuY2xhc3MgVGVzdGluZ0FwaSBleHRlbmRzIEJhc2VBUEkkMSB7XG4gICAgLyoqXG4gICAgICogU2VuZHMgYSB0ZXN0IG1lc3NhZ2UgdmlhIHB1c2gsIHRoaXMgaXMgYSB0ZXN0IGVuZHBvaW50IHRvIHZlcmlmeSB5b3VyIHB1c2ggc2V0dGluZ3NcbiAgICAgKiBDaGVjayBwdXNoXG4gICAgICovXG4gICAgY2hlY2tQdXNoUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMuY2hlY2tQdXNoUmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy5jaGVja1B1c2hSZXF1ZXN0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvciQxKCdjaGVja1B1c2hSZXF1ZXN0JywgJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy5jaGVja1B1c2hSZXF1ZXN0IHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgY2hlY2tQdXNoLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJztcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJTdHJlYW0tQXV0aC1UeXBlXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIlN0cmVhbS1BdXRoLVR5cGVcIik7IC8vIHN0cmVhbS1hdXRoLXR5cGUgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1tcImFwaV9rZXlcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiYXBpX2tleVwiKTsgLy8gYXBpX2tleSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiQXV0aG9yaXphdGlvblwiKTsgLy8gSldUIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgcGF0aDogYC9jaGVja19wdXNoYCxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgYm9keTogcmVxdWVzdFBhcmFtZXRlcnMuY2hlY2tQdXNoUmVxdWVzdCxcbiAgICAgICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBKU09OQXBpUmVzcG9uc2UkMShyZXNwb25zZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kcyBhIHRlc3QgbWVzc2FnZSB2aWEgcHVzaCwgdGhpcyBpcyBhIHRlc3QgZW5kcG9pbnQgdG8gdmVyaWZ5IHlvdXIgcHVzaCBzZXR0aW5nc1xuICAgICAqIENoZWNrIHB1c2hcbiAgICAgKi9cbiAgICBjaGVja1B1c2gocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5jaGVja1B1c2hSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIHlpZWxkIHJlc3BvbnNlLnZhbHVlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBWYWxpZGF0ZXMgQW1hem9uIFNOUyBjb25maWd1cmF0aW9uXG4gICAgICogQ2hlY2sgU05TXG4gICAgICovXG4gICAgY2hlY2tTTlNSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy5jaGVja1NOU1JlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMuY2hlY2tTTlNSZXF1ZXN0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvciQxKCdjaGVja1NOU1JlcXVlc3QnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLmNoZWNrU05TUmVxdWVzdCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGNoZWNrU05TLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJztcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJTdHJlYW0tQXV0aC1UeXBlXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIlN0cmVhbS1BdXRoLVR5cGVcIik7IC8vIHN0cmVhbS1hdXRoLXR5cGUgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1tcImFwaV9rZXlcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiYXBpX2tleVwiKTsgLy8gYXBpX2tleSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiQXV0aG9yaXphdGlvblwiKTsgLy8gSldUIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgcGF0aDogYC9jaGVja19zbnNgLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBib2R5OiByZXF1ZXN0UGFyYW1ldGVycy5jaGVja1NOU1JlcXVlc3QsXG4gICAgICAgICAgICB9LCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgSlNPTkFwaVJlc3BvbnNlJDEocmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVmFsaWRhdGVzIEFtYXpvbiBTTlMgY29uZmlndXJhdGlvblxuICAgICAqIENoZWNrIFNOU1xuICAgICAqL1xuICAgIGNoZWNrU05TKHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuY2hlY2tTTlNSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIHlpZWxkIHJlc3BvbnNlLnZhbHVlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBWYWxpZGF0ZXMgQW1hem9uIFNRUyBjcmVkZW50aWFsc1xuICAgICAqIENoZWNrIFNRU1xuICAgICAqL1xuICAgIGNoZWNrU1FTUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMuY2hlY2tTUVNSZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3RQYXJhbWV0ZXJzLmNoZWNrU1FTUmVxdWVzdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IkMSgnY2hlY2tTUVNSZXF1ZXN0JywgJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy5jaGVja1NRU1JlcXVlc3Qgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBjaGVja1NRUy4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgY29uc3QgaGVhZGVyUGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1snQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbic7XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiU3RyZWFtLUF1dGgtVHlwZVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJTdHJlYW0tQXV0aC1UeXBlXCIpOyAvLyBzdHJlYW0tYXV0aC10eXBlIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbXCJhcGlfa2V5XCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcImFwaV9rZXlcIik7IC8vIGFwaV9rZXkgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJBdXRob3JpemF0aW9uXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIkF1dGhvcml6YXRpb25cIik7IC8vIEpXVCBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIHBhdGg6IGAvY2hlY2tfc3FzYCxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgYm9keTogcmVxdWVzdFBhcmFtZXRlcnMuY2hlY2tTUVNSZXF1ZXN0LFxuICAgICAgICAgICAgfSwgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEpTT05BcGlSZXNwb25zZSQxKHJlc3BvbnNlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFZhbGlkYXRlcyBBbWF6b24gU1FTIGNyZWRlbnRpYWxzXG4gICAgICogQ2hlY2sgU1FTXG4gICAgICovXG4gICAgY2hlY2tTUVMocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5jaGVja1NRU1JhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4geWllbGQgcmVzcG9uc2UudmFsdWUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG4vKiB0c2xpbnQ6ZGlzYWJsZSAqL1xuLyogZXNsaW50LWRpc2FibGUgKi9cbi8qKlxuICogU3RyZWFtIENoYXQgQVBJXG4gKiBObyBkZXNjcmlwdGlvbiBwcm92aWRlZCAoZ2VuZXJhdGVkIGJ5IE9wZW5hcGkgR2VuZXJhdG9yIGh0dHBzOi8vZ2l0aHViLmNvbS9vcGVuYXBpdG9vbHMvb3BlbmFwaS1nZW5lcmF0b3IpXG4gKlxuICogVGhlIHZlcnNpb24gb2YgdGhlIE9wZW5BUEkgZG9jdW1lbnQ6IHY5Mi43LjBcbiAqXG4gKlxuICogTk9URTogVGhpcyBjbGFzcyBpcyBhdXRvIGdlbmVyYXRlZCBieSBPcGVuQVBJIEdlbmVyYXRvciAoaHR0cHM6Ly9vcGVuYXBpLWdlbmVyYXRvci50ZWNoKS5cbiAqIGh0dHBzOi8vb3BlbmFwaS1nZW5lcmF0b3IudGVjaFxuICogRG8gbm90IGVkaXQgdGhlIGNsYXNzIG1hbnVhbGx5LlxuICovXG4vKipcbiAqXG4gKi9cbmNsYXNzIFVzZXJzQXBpIGV4dGVuZHMgQmFzZUFQSSQxIHtcbiAgICAvKipcbiAgICAgKiBSZXN0cmljdHMgdXNlciBhY3Rpdml0eSBlaXRoZXIgaW4gc3BlY2lmaWMgY2hhbm5lbCBvciBnbG9iYWxseSAgU2VuZHMgZXZlbnRzOiAtIHVzZXIuYmFubmVkICBSZXF1aXJlZCBwZXJtaXNzaW9uczogLSBCYW5DaGFubmVsTWVtYmVyIC0gQmFuVXNlclxuICAgICAqIEJhbiB1c2VyXG4gICAgICovXG4gICAgYmFuUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMuYmFuUmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy5iYW5SZXF1ZXN0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvciQxKCdiYW5SZXF1ZXN0JywgJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy5iYW5SZXF1ZXN0IHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgYmFuLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJztcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJTdHJlYW0tQXV0aC1UeXBlXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIlN0cmVhbS1BdXRoLVR5cGVcIik7IC8vIHN0cmVhbS1hdXRoLXR5cGUgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1tcImFwaV9rZXlcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiYXBpX2tleVwiKTsgLy8gYXBpX2tleSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiQXV0aG9yaXphdGlvblwiKTsgLy8gSldUIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgcGF0aDogYC9tb2RlcmF0aW9uL2JhbmAsXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVyUGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBxdWVyeTogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIGJvZHk6IHJlcXVlc3RQYXJhbWV0ZXJzLmJhblJlcXVlc3QsXG4gICAgICAgICAgICB9LCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgSlNPTkFwaVJlc3BvbnNlJDEocmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzdHJpY3RzIHVzZXIgYWN0aXZpdHkgZWl0aGVyIGluIHNwZWNpZmljIGNoYW5uZWwgb3IgZ2xvYmFsbHkgIFNlbmRzIGV2ZW50czogLSB1c2VyLmJhbm5lZCAgUmVxdWlyZWQgcGVybWlzc2lvbnM6IC0gQmFuQ2hhbm5lbE1lbWJlciAtIEJhblVzZXJcbiAgICAgKiBCYW4gdXNlclxuICAgICAqL1xuICAgIGJhbihyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLmJhblJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4geWllbGQgcmVzcG9uc2UudmFsdWUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVzdGFibGlzaGVzIFdlYlNvY2tldCBjb25uZWN0aW9uIGZvciB1c2VyICBTZW5kcyBldmVudHM6IC0gdXNlci51cGRhdGVkXG4gICAgICogQ29ubmVjdCAoV2ViU29ja2V0KVxuICAgICAqL1xuICAgIGNvbm5lY3RSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLmpzb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1snanNvbiddID0gcmVxdWVzdFBhcmFtZXRlcnMuanNvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGhlYWRlclBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJTdHJlYW0tQXV0aC1UeXBlXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIlN0cmVhbS1BdXRoLVR5cGVcIik7IC8vIHN0cmVhbS1hdXRoLXR5cGUgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1tcImFwaV9rZXlcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiYXBpX2tleVwiKTsgLy8gYXBpX2tleSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiQXV0aG9yaXphdGlvblwiKTsgLy8gSldUIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgcGF0aDogYC9jb25uZWN0YCxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBWb2lkQXBpUmVzcG9uc2UkMShyZXNwb25zZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFc3RhYmxpc2hlcyBXZWJTb2NrZXQgY29ubmVjdGlvbiBmb3IgdXNlciAgU2VuZHMgZXZlbnRzOiAtIHVzZXIudXBkYXRlZFxuICAgICAqIENvbm5lY3QgKFdlYlNvY2tldClcbiAgICAgKi9cbiAgICBjb25uZWN0KHJlcXVlc3RQYXJhbWV0ZXJzID0ge30sIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHlpZWxkIHRoaXMuY29ubmVjdFJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGd1ZXN0IHVzZXJcbiAgICAgKiBDcmVhdGUgZ3Vlc3RcbiAgICAgKi9cbiAgICBjcmVhdGVHdWVzdFJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLmd1ZXN0UmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy5ndWVzdFJlcXVlc3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZXF1aXJlZEVycm9yJDEoJ2d1ZXN0UmVxdWVzdCcsICdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVxdWVzdFBhcmFtZXRlcnMuZ3Vlc3RSZXF1ZXN0IHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgY3JlYXRlR3Vlc3QuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlclBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbJ0NvbnRlbnQtVHlwZSddID0gJ2FwcGxpY2F0aW9uL2pzb24nO1xuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIlN0cmVhbS1BdXRoLVR5cGVcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiU3RyZWFtLUF1dGgtVHlwZVwiKTsgLy8gc3RyZWFtLWF1dGgtdHlwZSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzW1wiYXBpX2tleVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJhcGlfa2V5XCIpOyAvLyBhcGlfa2V5IGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiQXV0aG9yaXphdGlvblwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJBdXRob3JpemF0aW9uXCIpOyAvLyBKV1QgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICBwYXRoOiBgL2d1ZXN0YCxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgYm9keTogcmVxdWVzdFBhcmFtZXRlcnMuZ3Vlc3RSZXF1ZXN0LFxuICAgICAgICAgICAgfSwgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEpTT05BcGlSZXNwb25zZSQxKHJlc3BvbnNlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgZ3Vlc3QgdXNlclxuICAgICAqIENyZWF0ZSBndWVzdFxuICAgICAqL1xuICAgIGNyZWF0ZUd1ZXN0KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuY3JlYXRlR3Vlc3RSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIHlpZWxkIHJlc3BvbnNlLnZhbHVlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWFjdGl2YXRlcyB1c2VyIHdpdGggcG9zc2liaWxpdHkgdG8gYWN0aXZhdGUgaXQgYmFjayAgU2VuZHMgZXZlbnRzOiAtIHVzZXIuZGVhY3RpdmF0ZWRcbiAgICAgKiBEZWFjdGl2YXRlIHVzZXJcbiAgICAgKi9cbiAgICBkZWFjdGl2YXRlVXNlclJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLnVzZXJJZCA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy51c2VySWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZXF1aXJlZEVycm9yJDEoJ3VzZXJJZCcsICdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVxdWVzdFBhcmFtZXRlcnMudXNlcklkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZGVhY3RpdmF0ZVVzZXIuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMuZGVhY3RpdmF0ZVVzZXJSZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3RQYXJhbWV0ZXJzLmRlYWN0aXZhdGVVc2VyUmVxdWVzdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IkMSgnZGVhY3RpdmF0ZVVzZXJSZXF1ZXN0JywgJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy5kZWFjdGl2YXRlVXNlclJlcXVlc3Qgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBkZWFjdGl2YXRlVXNlci4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgY29uc3QgaGVhZGVyUGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1snQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbic7XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiU3RyZWFtLUF1dGgtVHlwZVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJTdHJlYW0tQXV0aC1UeXBlXCIpOyAvLyBzdHJlYW0tYXV0aC10eXBlIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbXCJhcGlfa2V5XCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcImFwaV9rZXlcIik7IC8vIGFwaV9rZXkgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJBdXRob3JpemF0aW9uXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIkF1dGhvcml6YXRpb25cIik7IC8vIEpXVCBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIHBhdGg6IGAvdXNlcnMve3VzZXJfaWR9L2RlYWN0aXZhdGVgLnJlcGxhY2UoYHske1widXNlcl9pZFwifX1gLCBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJlcXVlc3RQYXJhbWV0ZXJzLnVzZXJJZCkpKSxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgYm9keTogcmVxdWVzdFBhcmFtZXRlcnMuZGVhY3RpdmF0ZVVzZXJSZXF1ZXN0LFxuICAgICAgICAgICAgfSwgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEpTT05BcGlSZXNwb25zZSQxKHJlc3BvbnNlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlYWN0aXZhdGVzIHVzZXIgd2l0aCBwb3NzaWJpbGl0eSB0byBhY3RpdmF0ZSBpdCBiYWNrICBTZW5kcyBldmVudHM6IC0gdXNlci5kZWFjdGl2YXRlZFxuICAgICAqIERlYWN0aXZhdGUgdXNlclxuICAgICAqL1xuICAgIGRlYWN0aXZhdGVVc2VyKHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuZGVhY3RpdmF0ZVVzZXJSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIHlpZWxkIHJlc3BvbnNlLnZhbHVlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWFjdGl2YXRlIHVzZXJzIGluIGJhdGNoZXMgIFNlbmRzIGV2ZW50czogLSB1c2VyLmRlYWN0aXZhdGVkXG4gICAgICogRGVhY3RpdmF0ZSB1c2Vyc1xuICAgICAqL1xuICAgIGRlYWN0aXZhdGVVc2Vyc1JhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLmRlYWN0aXZhdGVVc2Vyc1JlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMuZGVhY3RpdmF0ZVVzZXJzUmVxdWVzdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IkMSgnZGVhY3RpdmF0ZVVzZXJzUmVxdWVzdCcsICdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVxdWVzdFBhcmFtZXRlcnMuZGVhY3RpdmF0ZVVzZXJzUmVxdWVzdCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGRlYWN0aXZhdGVVc2Vycy4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgY29uc3QgaGVhZGVyUGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1snQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbic7XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiU3RyZWFtLUF1dGgtVHlwZVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJTdHJlYW0tQXV0aC1UeXBlXCIpOyAvLyBzdHJlYW0tYXV0aC10eXBlIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbXCJhcGlfa2V5XCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcImFwaV9rZXlcIik7IC8vIGFwaV9rZXkgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJBdXRob3JpemF0aW9uXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIkF1dGhvcml6YXRpb25cIik7IC8vIEpXVCBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIHBhdGg6IGAvdXNlcnMvZGVhY3RpdmF0ZWAsXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVyUGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBxdWVyeTogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIGJvZHk6IHJlcXVlc3RQYXJhbWV0ZXJzLmRlYWN0aXZhdGVVc2Vyc1JlcXVlc3QsXG4gICAgICAgICAgICB9LCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgSlNPTkFwaVJlc3BvbnNlJDEocmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVhY3RpdmF0ZSB1c2VycyBpbiBiYXRjaGVzICBTZW5kcyBldmVudHM6IC0gdXNlci5kZWFjdGl2YXRlZFxuICAgICAqIERlYWN0aXZhdGUgdXNlcnNcbiAgICAgKi9cbiAgICBkZWFjdGl2YXRlVXNlcnMocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5kZWFjdGl2YXRlVXNlcnNSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIHlpZWxkIHJlc3BvbnNlLnZhbHVlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWxldGVzIHVzZXIgYW5kIG9wdGlvbmFsbHkgYWxsIHRoZWlyIGJlbG9uZ2luZ3MuIFRoZSBFbmRwb2ludCBpcyBkZXByZWNhdGVkLCBwbGVhc2UgdXNlIFxcJ0RlbGV0ZSBVc2Vyc1xcJyBlbmRwb2ludCBpbnN0ZWFkICBTZW5kcyBldmVudHM6IC0gY2hhbm5lbC5kZWxldGVkIC0gbWVzc2FnZS5kZWxldGVkIC0gdXNlci5kZWxldGVkXG4gICAgICogRGVsZXRlIHVzZXJcbiAgICAgKi9cbiAgICBkZWxldGVVc2VyUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMudXNlcklkID09PSBudWxsIHx8IHJlcXVlc3RQYXJhbWV0ZXJzLnVzZXJJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IkMSgndXNlcklkJywgJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy51c2VySWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBkZWxldGVVc2VyLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMubWFya01lc3NhZ2VzRGVsZXRlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzWydtYXJrX21lc3NhZ2VzX2RlbGV0ZWQnXSA9IHJlcXVlc3RQYXJhbWV0ZXJzLm1hcmtNZXNzYWdlc0RlbGV0ZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMuaGFyZERlbGV0ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzWydoYXJkX2RlbGV0ZSddID0gcmVxdWVzdFBhcmFtZXRlcnMuaGFyZERlbGV0ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy5kZWxldGVDb252ZXJzYXRpb25DaGFubmVscyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzWydkZWxldGVfY29udmVyc2F0aW9uX2NoYW5uZWxzJ10gPSByZXF1ZXN0UGFyYW1ldGVycy5kZWxldGVDb252ZXJzYXRpb25DaGFubmVscztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGhlYWRlclBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJTdHJlYW0tQXV0aC1UeXBlXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIlN0cmVhbS1BdXRoLVR5cGVcIik7IC8vIHN0cmVhbS1hdXRoLXR5cGUgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1tcImFwaV9rZXlcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiYXBpX2tleVwiKTsgLy8gYXBpX2tleSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiQXV0aG9yaXphdGlvblwiKTsgLy8gSldUIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgcGF0aDogYC91c2Vycy97dXNlcl9pZH1gLnJlcGxhY2UoYHske1widXNlcl9pZFwifX1gLCBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJlcXVlc3RQYXJhbWV0ZXJzLnVzZXJJZCkpKSxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBKU09OQXBpUmVzcG9uc2UkMShyZXNwb25zZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWxldGVzIHVzZXIgYW5kIG9wdGlvbmFsbHkgYWxsIHRoZWlyIGJlbG9uZ2luZ3MuIFRoZSBFbmRwb2ludCBpcyBkZXByZWNhdGVkLCBwbGVhc2UgdXNlIFxcJ0RlbGV0ZSBVc2Vyc1xcJyBlbmRwb2ludCBpbnN0ZWFkICBTZW5kcyBldmVudHM6IC0gY2hhbm5lbC5kZWxldGVkIC0gbWVzc2FnZS5kZWxldGVkIC0gdXNlci5kZWxldGVkXG4gICAgICogRGVsZXRlIHVzZXJcbiAgICAgKi9cbiAgICBkZWxldGVVc2VyKHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuZGVsZXRlVXNlclJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4geWllbGQgcmVzcG9uc2UudmFsdWUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlbGV0ZXMgdXNlcnMgYW5kIG9wdGlvbmFsbHkgYWxsIHRoZWlyIGJlbG9uZ2luZ3MgYXN5bmNocm9ub3VzbHkuICBTZW5kcyBldmVudHM6IC0gY2hhbm5lbC5kZWxldGVkIC0gdXNlci5kZWxldGVkXG4gICAgICogRGVsZXRlIFVzZXJzXG4gICAgICovXG4gICAgZGVsZXRlVXNlcnNSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy5kZWxldGVVc2Vyc1JlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMuZGVsZXRlVXNlcnNSZXF1ZXN0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvciQxKCdkZWxldGVVc2Vyc1JlcXVlc3QnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLmRlbGV0ZVVzZXJzUmVxdWVzdCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGRlbGV0ZVVzZXJzLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJztcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJTdHJlYW0tQXV0aC1UeXBlXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIlN0cmVhbS1BdXRoLVR5cGVcIik7IC8vIHN0cmVhbS1hdXRoLXR5cGUgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1tcImFwaV9rZXlcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiYXBpX2tleVwiKTsgLy8gYXBpX2tleSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiQXV0aG9yaXphdGlvblwiKTsgLy8gSldUIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgcGF0aDogYC91c2Vycy9kZWxldGVgLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBib2R5OiByZXF1ZXN0UGFyYW1ldGVycy5kZWxldGVVc2Vyc1JlcXVlc3QsXG4gICAgICAgICAgICB9LCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgSlNPTkFwaVJlc3BvbnNlJDEocmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVsZXRlcyB1c2VycyBhbmQgb3B0aW9uYWxseSBhbGwgdGhlaXIgYmVsb25naW5ncyBhc3luY2hyb25vdXNseS4gIFNlbmRzIGV2ZW50czogLSBjaGFubmVsLmRlbGV0ZWQgLSB1c2VyLmRlbGV0ZWRcbiAgICAgKiBEZWxldGUgVXNlcnNcbiAgICAgKi9cbiAgICBkZWxldGVVc2VycyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLmRlbGV0ZVVzZXJzUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCByZXNwb25zZS52YWx1ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXhwb3J0cyB0aGUgdXNlclxcJ3MgcHJvZmlsZSwgcmVhY3Rpb25zIGFuZCBtZXNzYWdlcy4gUmFpc2VzIGFuIGVycm9yIGlmIGEgdXNlciBoYXMgbW9yZSB0aGFuIDEwayBtZXNzYWdlcyBvciByZWFjdGlvbnNcbiAgICAgKiBFeHBvcnQgdXNlclxuICAgICAqL1xuICAgIGV4cG9ydFVzZXJSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy51c2VySWQgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMudXNlcklkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvciQxKCd1c2VySWQnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLnVzZXJJZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGV4cG9ydFVzZXIuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlclBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJTdHJlYW0tQXV0aC1UeXBlXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIlN0cmVhbS1BdXRoLVR5cGVcIik7IC8vIHN0cmVhbS1hdXRoLXR5cGUgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1tcImFwaV9rZXlcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiYXBpX2tleVwiKTsgLy8gYXBpX2tleSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiQXV0aG9yaXphdGlvblwiKTsgLy8gSldUIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgcGF0aDogYC91c2Vycy97dXNlcl9pZH0vZXhwb3J0YC5yZXBsYWNlKGB7JHtcInVzZXJfaWRcIn19YCwgZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhyZXF1ZXN0UGFyYW1ldGVycy51c2VySWQpKSksXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICB9LCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgSlNPTkFwaVJlc3BvbnNlJDEocmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXhwb3J0cyB0aGUgdXNlclxcJ3MgcHJvZmlsZSwgcmVhY3Rpb25zIGFuZCBtZXNzYWdlcy4gUmFpc2VzIGFuIGVycm9yIGlmIGEgdXNlciBoYXMgbW9yZSB0aGFuIDEwayBtZXNzYWdlcyBvciByZWFjdGlvbnNcbiAgICAgKiBFeHBvcnQgdXNlclxuICAgICAqL1xuICAgIGV4cG9ydFVzZXIocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5leHBvcnRVc2VyUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCByZXNwb25zZS52YWx1ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXhwb3J0cyB1c2VyIHByb2ZpbGUsIHJlYWN0aW9ucyBhbmQgbWVzc2FnZXMgZm9yIGxpc3Qgb2YgZ2l2ZW4gdXNlcnNcbiAgICAgKiBFeHBvcnQgdXNlcnNcbiAgICAgKi9cbiAgICBleHBvcnRVc2Vyc1JhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLmV4cG9ydFVzZXJzUmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy5leHBvcnRVc2Vyc1JlcXVlc3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZXF1aXJlZEVycm9yJDEoJ2V4cG9ydFVzZXJzUmVxdWVzdCcsICdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVxdWVzdFBhcmFtZXRlcnMuZXhwb3J0VXNlcnNSZXF1ZXN0IHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZXhwb3J0VXNlcnMuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlclBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbJ0NvbnRlbnQtVHlwZSddID0gJ2FwcGxpY2F0aW9uL2pzb24nO1xuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIlN0cmVhbS1BdXRoLVR5cGVcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiU3RyZWFtLUF1dGgtVHlwZVwiKTsgLy8gc3RyZWFtLWF1dGgtdHlwZSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzW1wiYXBpX2tleVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJhcGlfa2V5XCIpOyAvLyBhcGlfa2V5IGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiQXV0aG9yaXphdGlvblwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJBdXRob3JpemF0aW9uXCIpOyAvLyBKV1QgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICBwYXRoOiBgL2V4cG9ydC91c2Vyc2AsXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVyUGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBxdWVyeTogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIGJvZHk6IHJlcXVlc3RQYXJhbWV0ZXJzLmV4cG9ydFVzZXJzUmVxdWVzdCxcbiAgICAgICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBKU09OQXBpUmVzcG9uc2UkMShyZXNwb25zZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFeHBvcnRzIHVzZXIgcHJvZmlsZSwgcmVhY3Rpb25zIGFuZCBtZXNzYWdlcyBmb3IgbGlzdCBvZiBnaXZlbiB1c2Vyc1xuICAgICAqIEV4cG9ydCB1c2Vyc1xuICAgICAqL1xuICAgIGV4cG9ydFVzZXJzKHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuZXhwb3J0VXNlcnNSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIHlpZWxkIHJlc3BvbnNlLnZhbHVlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXBvcnRzIG1lc3NhZ2Ugb3IgdXNlciBmb3IgcmV2aWV3IGJ5IG1vZGVyYXRvcnMgIFNlbmRzIGV2ZW50czogLSBtZXNzYWdlLmZsYWdnZWQgLSB1c2VyLmZsYWdnZWQgIFJlcXVpcmVkIHBlcm1pc3Npb25zOiAtIEZsYWdNZXNzYWdlIC0gRmxhZ1VzZXJcbiAgICAgKiBGbGFnXG4gICAgICovXG4gICAgZmxhZ1JhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLmZsYWdSZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3RQYXJhbWV0ZXJzLmZsYWdSZXF1ZXN0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvciQxKCdmbGFnUmVxdWVzdCcsICdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVxdWVzdFBhcmFtZXRlcnMuZmxhZ1JlcXVlc3Qgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBmbGFnLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJztcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJTdHJlYW0tQXV0aC1UeXBlXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIlN0cmVhbS1BdXRoLVR5cGVcIik7IC8vIHN0cmVhbS1hdXRoLXR5cGUgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1tcImFwaV9rZXlcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiYXBpX2tleVwiKTsgLy8gYXBpX2tleSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiQXV0aG9yaXphdGlvblwiKTsgLy8gSldUIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgcGF0aDogYC9tb2RlcmF0aW9uL2ZsYWdgLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBib2R5OiByZXF1ZXN0UGFyYW1ldGVycy5mbGFnUmVxdWVzdCxcbiAgICAgICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBKU09OQXBpUmVzcG9uc2UkMShyZXNwb25zZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXBvcnRzIG1lc3NhZ2Ugb3IgdXNlciBmb3IgcmV2aWV3IGJ5IG1vZGVyYXRvcnMgIFNlbmRzIGV2ZW50czogLSBtZXNzYWdlLmZsYWdnZWQgLSB1c2VyLmZsYWdnZWQgIFJlcXVpcmVkIHBlcm1pc3Npb25zOiAtIEZsYWdNZXNzYWdlIC0gRmxhZ1VzZXJcbiAgICAgKiBGbGFnXG4gICAgICovXG4gICAgZmxhZyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLmZsYWdSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIHlpZWxkIHJlc3BvbnNlLnZhbHVlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXZWJTb2NrZXQgZmFsbGJhY2sgdHJhbnNwb3J0IGVuZHBvaW50ICBTZW5kcyBldmVudHM6IC0gdXNlci51cGRhdGVkXG4gICAgICogTG9uZyBQb2xsIChUcmFuc3BvcnQpXG4gICAgICovXG4gICAgbG9uZ1BvbGxSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLmpzb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1snanNvbiddID0gcmVxdWVzdFBhcmFtZXRlcnMuanNvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy5jb25uZWN0aW9uSWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1snY29ubmVjdGlvbl9pZCddID0gcmVxdWVzdFBhcmFtZXRlcnMuY29ubmVjdGlvbklkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgaGVhZGVyUGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIlN0cmVhbS1BdXRoLVR5cGVcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiU3RyZWFtLUF1dGgtVHlwZVwiKTsgLy8gc3RyZWFtLWF1dGgtdHlwZSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzW1wiYXBpX2tleVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJhcGlfa2V5XCIpOyAvLyBhcGlfa2V5IGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiQXV0aG9yaXphdGlvblwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJBdXRob3JpemF0aW9uXCIpOyAvLyBKV1QgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICBwYXRoOiBgL2xvbmdwb2xsYCxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBWb2lkQXBpUmVzcG9uc2UkMShyZXNwb25zZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXZWJTb2NrZXQgZmFsbGJhY2sgdHJhbnNwb3J0IGVuZHBvaW50ICBTZW5kcyBldmVudHM6IC0gdXNlci51cGRhdGVkXG4gICAgICogTG9uZyBQb2xsIChUcmFuc3BvcnQpXG4gICAgICovXG4gICAgbG9uZ1BvbGwocmVxdWVzdFBhcmFtZXRlcnMgPSB7fSwgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgeWllbGQgdGhpcy5sb25nUG9sbFJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNdXRlcyBvbmUgb3Igc2V2ZXJhbCB1c2VycyAgU2VuZHMgZXZlbnRzOiAtIHVzZXIubXV0ZWQgIFJlcXVpcmVkIHBlcm1pc3Npb25zOiAtIE11dGVVc2VyXG4gICAgICogTXV0ZSB1c2VyXG4gICAgICovXG4gICAgbXV0ZVVzZXJSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy5tdXRlVXNlclJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMubXV0ZVVzZXJSZXF1ZXN0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvciQxKCdtdXRlVXNlclJlcXVlc3QnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLm11dGVVc2VyUmVxdWVzdCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIG11dGVVc2VyLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJztcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJTdHJlYW0tQXV0aC1UeXBlXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIlN0cmVhbS1BdXRoLVR5cGVcIik7IC8vIHN0cmVhbS1hdXRoLXR5cGUgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1tcImFwaV9rZXlcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiYXBpX2tleVwiKTsgLy8gYXBpX2tleSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiQXV0aG9yaXphdGlvblwiKTsgLy8gSldUIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgcGF0aDogYC9tb2RlcmF0aW9uL211dGVgLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBib2R5OiByZXF1ZXN0UGFyYW1ldGVycy5tdXRlVXNlclJlcXVlc3QsXG4gICAgICAgICAgICB9LCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgSlNPTkFwaVJlc3BvbnNlJDEocmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTXV0ZXMgb25lIG9yIHNldmVyYWwgdXNlcnMgIFNlbmRzIGV2ZW50czogLSB1c2VyLm11dGVkICBSZXF1aXJlZCBwZXJtaXNzaW9uczogLSBNdXRlVXNlclxuICAgICAqIE11dGUgdXNlclxuICAgICAqL1xuICAgIG11dGVVc2VyKHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMubXV0ZVVzZXJSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIHlpZWxkIHJlc3BvbnNlLnZhbHVlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGaW5kIGFuZCBmaWx0ZXIgY2hhbm5lbCBzY29wZWQgb3IgZ2xvYmFsIHVzZXIgYmFucyAgUmVxdWlyZWQgcGVybWlzc2lvbnM6IC0gUmVhZENoYW5uZWxcbiAgICAgKiBRdWVyeSBCYW5uZWQgVXNlcnNcbiAgICAgKi9cbiAgICBxdWVyeUJhbm5lZFVzZXJzUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy5wYXlsb2FkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbJ3BheWxvYWQnXSA9IHJlcXVlc3RQYXJhbWV0ZXJzLnBheWxvYWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiU3RyZWFtLUF1dGgtVHlwZVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJTdHJlYW0tQXV0aC1UeXBlXCIpOyAvLyBzdHJlYW0tYXV0aC10eXBlIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbXCJhcGlfa2V5XCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcImFwaV9rZXlcIik7IC8vIGFwaV9rZXkgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJBdXRob3JpemF0aW9uXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIkF1dGhvcml6YXRpb25cIik7IC8vIEpXVCBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIHBhdGg6IGAvcXVlcnlfYmFubmVkX3VzZXJzYCxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBKU09OQXBpUmVzcG9uc2UkMShyZXNwb25zZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGaW5kIGFuZCBmaWx0ZXIgY2hhbm5lbCBzY29wZWQgb3IgZ2xvYmFsIHVzZXIgYmFucyAgUmVxdWlyZWQgcGVybWlzc2lvbnM6IC0gUmVhZENoYW5uZWxcbiAgICAgKiBRdWVyeSBCYW5uZWQgVXNlcnNcbiAgICAgKi9cbiAgICBxdWVyeUJhbm5lZFVzZXJzKHJlcXVlc3RQYXJhbWV0ZXJzID0ge30sIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5xdWVyeUJhbm5lZFVzZXJzUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCByZXNwb25zZS52YWx1ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRmluZCBhbmQgZmlsdGVyIHVzZXJzICBSZXF1aXJlZCBwZXJtaXNzaW9uczogLSBTZWFyY2hVc2VyXG4gICAgICogUXVlcnkgdXNlcnNcbiAgICAgKi9cbiAgICBxdWVyeVVzZXJzUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy5wYXlsb2FkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbJ3BheWxvYWQnXSA9IHJlcXVlc3RQYXJhbWV0ZXJzLnBheWxvYWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiU3RyZWFtLUF1dGgtVHlwZVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJTdHJlYW0tQXV0aC1UeXBlXCIpOyAvLyBzdHJlYW0tYXV0aC10eXBlIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbXCJhcGlfa2V5XCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcImFwaV9rZXlcIik7IC8vIGFwaV9rZXkgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJBdXRob3JpemF0aW9uXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIkF1dGhvcml6YXRpb25cIik7IC8vIEpXVCBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIHBhdGg6IGAvdXNlcnNgLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVyUGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBxdWVyeTogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgfSwgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEpTT05BcGlSZXNwb25zZSQxKHJlc3BvbnNlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZpbmQgYW5kIGZpbHRlciB1c2VycyAgUmVxdWlyZWQgcGVybWlzc2lvbnM6IC0gU2VhcmNoVXNlclxuICAgICAqIFF1ZXJ5IHVzZXJzXG4gICAgICovXG4gICAgcXVlcnlVc2VycyhyZXF1ZXN0UGFyYW1ldGVycyA9IHt9LCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMucXVlcnlVc2Vyc1JhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4geWllbGQgcmVzcG9uc2UudmFsdWUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFjdGl2YXRlcyB1c2VyIHdob1xcJ3MgYmVlbiBkZWFjdGl2YXRlZCBwcmV2aW91c2x5ICBTZW5kcyBldmVudHM6IC0gdXNlci5yZWFjdGl2YXRlZFxuICAgICAqIFJlYWN0aXZhdGUgdXNlclxuICAgICAqL1xuICAgIHJlYWN0aXZhdGVVc2VyUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMudXNlcklkID09PSBudWxsIHx8IHJlcXVlc3RQYXJhbWV0ZXJzLnVzZXJJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IkMSgndXNlcklkJywgJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy51c2VySWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyByZWFjdGl2YXRlVXNlci4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy5yZWFjdGl2YXRlVXNlclJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMucmVhY3RpdmF0ZVVzZXJSZXF1ZXN0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvciQxKCdyZWFjdGl2YXRlVXNlclJlcXVlc3QnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLnJlYWN0aXZhdGVVc2VyUmVxdWVzdCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHJlYWN0aXZhdGVVc2VyLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJztcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJTdHJlYW0tQXV0aC1UeXBlXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIlN0cmVhbS1BdXRoLVR5cGVcIik7IC8vIHN0cmVhbS1hdXRoLXR5cGUgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1tcImFwaV9rZXlcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiYXBpX2tleVwiKTsgLy8gYXBpX2tleSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiQXV0aG9yaXphdGlvblwiKTsgLy8gSldUIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgcGF0aDogYC91c2Vycy97dXNlcl9pZH0vcmVhY3RpdmF0ZWAucmVwbGFjZShgeyR7XCJ1c2VyX2lkXCJ9fWAsIGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVxdWVzdFBhcmFtZXRlcnMudXNlcklkKSkpLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBib2R5OiByZXF1ZXN0UGFyYW1ldGVycy5yZWFjdGl2YXRlVXNlclJlcXVlc3QsXG4gICAgICAgICAgICB9LCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgSlNPTkFwaVJlc3BvbnNlJDEocmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWN0aXZhdGVzIHVzZXIgd2hvXFwncyBiZWVuIGRlYWN0aXZhdGVkIHByZXZpb3VzbHkgIFNlbmRzIGV2ZW50czogLSB1c2VyLnJlYWN0aXZhdGVkXG4gICAgICogUmVhY3RpdmF0ZSB1c2VyXG4gICAgICovXG4gICAgcmVhY3RpdmF0ZVVzZXIocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5yZWFjdGl2YXRlVXNlclJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4geWllbGQgcmVzcG9uc2UudmFsdWUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlYWN0aXZhdGUgdXNlcnMgaW4gYmF0Y2hlcyAgU2VuZHMgZXZlbnRzOiAtIHVzZXIucmVhY3RpdmF0ZWRcbiAgICAgKiBSZWFjdGl2YXRlIHVzZXJzXG4gICAgICovXG4gICAgcmVhY3RpdmF0ZVVzZXJzUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMucmVhY3RpdmF0ZVVzZXJzUmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy5yZWFjdGl2YXRlVXNlcnNSZXF1ZXN0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvciQxKCdyZWFjdGl2YXRlVXNlcnNSZXF1ZXN0JywgJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy5yZWFjdGl2YXRlVXNlcnNSZXF1ZXN0IHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgcmVhY3RpdmF0ZVVzZXJzLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJztcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJTdHJlYW0tQXV0aC1UeXBlXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIlN0cmVhbS1BdXRoLVR5cGVcIik7IC8vIHN0cmVhbS1hdXRoLXR5cGUgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1tcImFwaV9rZXlcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiYXBpX2tleVwiKTsgLy8gYXBpX2tleSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiQXV0aG9yaXphdGlvblwiKTsgLy8gSldUIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgcGF0aDogYC91c2Vycy9yZWFjdGl2YXRlYCxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgYm9keTogcmVxdWVzdFBhcmFtZXRlcnMucmVhY3RpdmF0ZVVzZXJzUmVxdWVzdCxcbiAgICAgICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBKU09OQXBpUmVzcG9uc2UkMShyZXNwb25zZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWFjdGl2YXRlIHVzZXJzIGluIGJhdGNoZXMgIFNlbmRzIGV2ZW50czogLSB1c2VyLnJlYWN0aXZhdGVkXG4gICAgICogUmVhY3RpdmF0ZSB1c2Vyc1xuICAgICAqL1xuICAgIHJlYWN0aXZhdGVVc2VycyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnJlYWN0aXZhdGVVc2Vyc1JhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4geWllbGQgcmVzcG9uc2UudmFsdWUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlc3RvcmUgc29mdCBkZWxldGVkIHVzZXJzXG4gICAgICogUmVzdG9yZSB1c2Vyc1xuICAgICAqL1xuICAgIHJlc3RvcmVVc2Vyc1JhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLnJlc3RvcmVVc2Vyc1JlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMucmVzdG9yZVVzZXJzUmVxdWVzdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IkMSgncmVzdG9yZVVzZXJzUmVxdWVzdCcsICdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVxdWVzdFBhcmFtZXRlcnMucmVzdG9yZVVzZXJzUmVxdWVzdCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHJlc3RvcmVVc2Vycy4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgY29uc3QgaGVhZGVyUGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1snQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbic7XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiU3RyZWFtLUF1dGgtVHlwZVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJTdHJlYW0tQXV0aC1UeXBlXCIpOyAvLyBzdHJlYW0tYXV0aC10eXBlIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbXCJhcGlfa2V5XCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcImFwaV9rZXlcIik7IC8vIGFwaV9rZXkgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJBdXRob3JpemF0aW9uXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIkF1dGhvcml6YXRpb25cIik7IC8vIEpXVCBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIHBhdGg6IGAvdXNlcnMvcmVzdG9yZWAsXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVyUGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBxdWVyeTogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIGJvZHk6IHJlcXVlc3RQYXJhbWV0ZXJzLnJlc3RvcmVVc2Vyc1JlcXVlc3QsXG4gICAgICAgICAgICB9LCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgSlNPTkFwaVJlc3BvbnNlJDEocmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzdG9yZSBzb2Z0IGRlbGV0ZWQgdXNlcnNcbiAgICAgKiBSZXN0b3JlIHVzZXJzXG4gICAgICovXG4gICAgcmVzdG9yZVVzZXJzKHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMucmVzdG9yZVVzZXJzUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCByZXNwb25zZS52YWx1ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBwcmV2aW91c2x5IGFwcGxpZWQgYmFuICBTZW5kcyBldmVudHM6IC0gdXNlci51bmJhbm5lZCAgUmVxdWlyZWQgcGVybWlzc2lvbnM6IC0gQmFuQ2hhbm5lbE1lbWJlciAtIEJhblVzZXJcbiAgICAgKiBVbmJhbiB1c2VyXG4gICAgICovXG4gICAgdW5iYW5SYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLnRhcmdldFVzZXJJZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzWyd0YXJnZXRfdXNlcl9pZCddID0gcmVxdWVzdFBhcmFtZXRlcnMudGFyZ2V0VXNlcklkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLnR5cGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1sndHlwZSddID0gcmVxdWVzdFBhcmFtZXRlcnMudHlwZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy5pZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzWydpZCddID0gcmVxdWVzdFBhcmFtZXRlcnMuaWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMuY3JlYXRlZEJ5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbJ2NyZWF0ZWRfYnknXSA9IHJlcXVlc3RQYXJhbWV0ZXJzLmNyZWF0ZWRCeTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGhlYWRlclBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJTdHJlYW0tQXV0aC1UeXBlXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIlN0cmVhbS1BdXRoLVR5cGVcIik7IC8vIHN0cmVhbS1hdXRoLXR5cGUgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1tcImFwaV9rZXlcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiYXBpX2tleVwiKTsgLy8gYXBpX2tleSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiQXV0aG9yaXphdGlvblwiKTsgLy8gSldUIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgcGF0aDogYC9tb2RlcmF0aW9uL2JhbmAsXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICB9LCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgSlNPTkFwaVJlc3BvbnNlJDEocmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBwcmV2aW91c2x5IGFwcGxpZWQgYmFuICBTZW5kcyBldmVudHM6IC0gdXNlci51bmJhbm5lZCAgUmVxdWlyZWQgcGVybWlzc2lvbnM6IC0gQmFuQ2hhbm5lbE1lbWJlciAtIEJhblVzZXJcbiAgICAgKiBVbmJhbiB1c2VyXG4gICAgICovXG4gICAgdW5iYW4ocmVxdWVzdFBhcmFtZXRlcnMgPSB7fSwgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnVuYmFuUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCByZXNwb25zZS52YWx1ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBwcmV2aW91c2x5IGNyZWF0ZWQgdXNlciBvciBtZXNzYWdlIGZsYWcgIFJlcXVpcmVkIHBlcm1pc3Npb25zOiAtIEZsYWdNZXNzYWdlIC0gRmxhZ1VzZXJcbiAgICAgKiBVbmZsYWdcbiAgICAgKi9cbiAgICB1bmZsYWdSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy5mbGFnUmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy5mbGFnUmVxdWVzdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IkMSgnZmxhZ1JlcXVlc3QnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLmZsYWdSZXF1ZXN0IHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgdW5mbGFnLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJztcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJTdHJlYW0tQXV0aC1UeXBlXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIlN0cmVhbS1BdXRoLVR5cGVcIik7IC8vIHN0cmVhbS1hdXRoLXR5cGUgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1tcImFwaV9rZXlcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiYXBpX2tleVwiKTsgLy8gYXBpX2tleSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiQXV0aG9yaXphdGlvblwiKTsgLy8gSldUIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgcGF0aDogYC9tb2RlcmF0aW9uL3VuZmxhZ2AsXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVyUGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBxdWVyeTogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIGJvZHk6IHJlcXVlc3RQYXJhbWV0ZXJzLmZsYWdSZXF1ZXN0LFxuICAgICAgICAgICAgfSwgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEpTT05BcGlSZXNwb25zZSQxKHJlc3BvbnNlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgcHJldmlvdXNseSBjcmVhdGVkIHVzZXIgb3IgbWVzc2FnZSBmbGFnICBSZXF1aXJlZCBwZXJtaXNzaW9uczogLSBGbGFnTWVzc2FnZSAtIEZsYWdVc2VyXG4gICAgICogVW5mbGFnXG4gICAgICovXG4gICAgdW5mbGFnKHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMudW5mbGFnUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCByZXNwb25zZS52YWx1ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVW5tdXRlcyBwcmV2aW91c2x5IG11dGVkIHVzZXIgIFNlbmRzIGV2ZW50czogLSB1c2VyLnVubXV0ZWQgIFJlcXVpcmVkIHBlcm1pc3Npb25zOiAtIE11dGVVc2VyXG4gICAgICogVW5tdXRlIHVzZXJcbiAgICAgKi9cbiAgICB1bm11dGVVc2VyUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMudW5tdXRlVXNlclJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMudW5tdXRlVXNlclJlcXVlc3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZXF1aXJlZEVycm9yJDEoJ3VubXV0ZVVzZXJSZXF1ZXN0JywgJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy51bm11dGVVc2VyUmVxdWVzdCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVubXV0ZVVzZXIuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlclBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbJ0NvbnRlbnQtVHlwZSddID0gJ2FwcGxpY2F0aW9uL2pzb24nO1xuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIlN0cmVhbS1BdXRoLVR5cGVcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiU3RyZWFtLUF1dGgtVHlwZVwiKTsgLy8gc3RyZWFtLWF1dGgtdHlwZSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzW1wiYXBpX2tleVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJhcGlfa2V5XCIpOyAvLyBhcGlfa2V5IGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiQXV0aG9yaXphdGlvblwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJBdXRob3JpemF0aW9uXCIpOyAvLyBKV1QgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICBwYXRoOiBgL21vZGVyYXRpb24vdW5tdXRlYCxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgYm9keTogcmVxdWVzdFBhcmFtZXRlcnMudW5tdXRlVXNlclJlcXVlc3QsXG4gICAgICAgICAgICB9LCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgSlNPTkFwaVJlc3BvbnNlJDEocmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVW5tdXRlcyBwcmV2aW91c2x5IG11dGVkIHVzZXIgIFNlbmRzIGV2ZW50czogLSB1c2VyLnVubXV0ZWQgIFJlcXVpcmVkIHBlcm1pc3Npb25zOiAtIE11dGVVc2VyXG4gICAgICogVW5tdXRlIHVzZXJcbiAgICAgKi9cbiAgICB1bm11dGVVc2VyKHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMudW5tdXRlVXNlclJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4geWllbGQgcmVzcG9uc2UudmFsdWUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBvciBjcmVhdGUgdXNlcnMgaW4gYnVsayAgU2VuZHMgZXZlbnRzOiAtIHVzZXIudXBkYXRlZFxuICAgICAqIFVwc2VydCB1c2Vyc1xuICAgICAqL1xuICAgIHVwZGF0ZVVzZXJzUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMudXBkYXRlVXNlcnNSZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3RQYXJhbWV0ZXJzLnVwZGF0ZVVzZXJzUmVxdWVzdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IkMSgndXBkYXRlVXNlcnNSZXF1ZXN0JywgJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy51cGRhdGVVc2Vyc1JlcXVlc3Qgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1cGRhdGVVc2Vycy4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgY29uc3QgaGVhZGVyUGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1snQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbic7XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiU3RyZWFtLUF1dGgtVHlwZVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJTdHJlYW0tQXV0aC1UeXBlXCIpOyAvLyBzdHJlYW0tYXV0aC10eXBlIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbXCJhcGlfa2V5XCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcImFwaV9rZXlcIik7IC8vIGFwaV9rZXkgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJBdXRob3JpemF0aW9uXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIkF1dGhvcml6YXRpb25cIik7IC8vIEpXVCBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIHBhdGg6IGAvdXNlcnNgLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBib2R5OiByZXF1ZXN0UGFyYW1ldGVycy51cGRhdGVVc2Vyc1JlcXVlc3QsXG4gICAgICAgICAgICB9LCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgSlNPTkFwaVJlc3BvbnNlJDEocmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlIG9yIGNyZWF0ZSB1c2VycyBpbiBidWxrICBTZW5kcyBldmVudHM6IC0gdXNlci51cGRhdGVkXG4gICAgICogVXBzZXJ0IHVzZXJzXG4gICAgICovXG4gICAgdXBkYXRlVXNlcnMocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy51cGRhdGVVc2Vyc1JhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4geWllbGQgcmVzcG9uc2UudmFsdWUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgY2VydGFpbiBmaWVsZHMgb2YgdGhlIHVzZXIgIFNlbmRzIGV2ZW50czogLSB1c2VyLnByZXNlbmNlLmNoYW5nZWQgLSB1c2VyLnVwZGF0ZWRcbiAgICAgKiBQYXJ0aWFsbHkgdXBkYXRlIHVzZXJcbiAgICAgKi9cbiAgICB1cGRhdGVVc2Vyc1BhcnRpYWxSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy51cGRhdGVVc2VyUGFydGlhbFJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMudXBkYXRlVXNlclBhcnRpYWxSZXF1ZXN0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvciQxKCd1cGRhdGVVc2VyUGFydGlhbFJlcXVlc3QnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLnVwZGF0ZVVzZXJQYXJ0aWFsUmVxdWVzdCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVwZGF0ZVVzZXJzUGFydGlhbC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgY29uc3QgaGVhZGVyUGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1snQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbic7XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiU3RyZWFtLUF1dGgtVHlwZVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJTdHJlYW0tQXV0aC1UeXBlXCIpOyAvLyBzdHJlYW0tYXV0aC10eXBlIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbXCJhcGlfa2V5XCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcImFwaV9rZXlcIik7IC8vIGFwaV9rZXkgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJBdXRob3JpemF0aW9uXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIkF1dGhvcml6YXRpb25cIik7IC8vIEpXVCBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIHBhdGg6IGAvdXNlcnNgLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgYm9keTogcmVxdWVzdFBhcmFtZXRlcnMudXBkYXRlVXNlclBhcnRpYWxSZXF1ZXN0LFxuICAgICAgICAgICAgfSwgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEpTT05BcGlSZXNwb25zZSQxKHJlc3BvbnNlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgY2VydGFpbiBmaWVsZHMgb2YgdGhlIHVzZXIgIFNlbmRzIGV2ZW50czogLSB1c2VyLnByZXNlbmNlLmNoYW5nZWQgLSB1c2VyLnVwZGF0ZWRcbiAgICAgKiBQYXJ0aWFsbHkgdXBkYXRlIHVzZXJcbiAgICAgKi9cbiAgICB1cGRhdGVVc2Vyc1BhcnRpYWwocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy51cGRhdGVVc2Vyc1BhcnRpYWxSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIHlpZWxkIHJlc3BvbnNlLnZhbHVlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuY2xhc3MgU3RyZWFtQ2hhbm5lbCB7XG4gICAgY29uc3RydWN0b3Ioc3RyZWFtQ2xpZW50LCB0eXBlLCBpZCkge1xuICAgICAgICB0aGlzLnN0cmVhbUNsaWVudCA9IHN0cmVhbUNsaWVudDtcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xuICAgICAgICB0aGlzLmRlbGV0ZSA9IChyZXF1ZXN0KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jaGFubmVsc0FwaS5kZWxldGVDaGFubmVsKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5iYXNlUmVxdWVzdCksIChyZXF1ZXN0ICE9PSBudWxsICYmIHJlcXVlc3QgIT09IHZvaWQgMCA/IHJlcXVlc3QgOiB7fSkpKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy51cGRhdGUgPSAodXBkYXRlQ2hhbm5lbFJlcXVlc3QpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNoYW5uZWxzQXBpLnVwZGF0ZUNoYW5uZWwoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCB0aGlzLmJhc2VSZXF1ZXN0KSwgeyB1cGRhdGVDaGFubmVsUmVxdWVzdCB9KSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudXBkYXRlUGFydGlhbCA9ICh1cGRhdGVDaGFubmVsUGFydGlhbFJlcXVlc3QpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNoYW5uZWxzQXBpLnVwZGF0ZUNoYW5uZWxQYXJ0aWFsKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5iYXNlUmVxdWVzdCksIHsgdXBkYXRlQ2hhbm5lbFBhcnRpYWxSZXF1ZXN0IH0pKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5nZXRPckNyZWF0ZSA9IChjaGFubmVsR2V0T3JDcmVhdGVSZXF1ZXN0KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB5aWVsZCB0aGlzLmNoYW5uZWxzQXBpLmdldE9yQ3JlYXRlQ2hhbm5lbChPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHRoaXMuYmFzZVJlcXVlc3QpLCB7IGNoYW5uZWxHZXRPckNyZWF0ZVJlcXVlc3Q6IGNoYW5uZWxHZXRPckNyZWF0ZVJlcXVlc3QgIT09IG51bGwgJiYgY2hhbm5lbEdldE9yQ3JlYXRlUmVxdWVzdCAhPT0gdm9pZCAwID8gY2hhbm5lbEdldE9yQ3JlYXRlUmVxdWVzdCA6IHt9IH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVGhpcyBvcGVyYXRpb24gaXNuJ3QgeWV0IGltcGxlbWVudGVkYCk7XG4gICAgICAgICAgICAgICAgLy8gaWYgKCFjaGFubmVsR2V0T3JDcmVhdGVSZXF1ZXN0Py5kYXRhPy5tZW1iZXJzKSB7XG4gICAgICAgICAgICAgICAgLy8gICB0aHJvdyBuZXcgRXJyb3IoJ1lvdSBuZWVkIHRvIHByb3ZpZGUgbWVtYmVycyB0byBjcmVhdGUgYSBjaGFubmVsIHdpdGhvdXQgSUQnKTtcbiAgICAgICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICAgICAgLy8gY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmNoYW5uZWxzQXBpLmdldE9yQ3JlYXRlQ2hhbm5lbFR5cGUxKHt0eXBlOiB0aGlzLnR5cGUsIGNoYW5uZWxHZXRPckNyZWF0ZVJlcXVlc3R9KTtcbiAgICAgICAgICAgICAgICAvLyB0aGlzLmlkID0gcmVzcG9uc2UuY2hhbm5lbD8uaWQ7XG4gICAgICAgICAgICAgICAgLy8gcmV0dXJuIHJlc3BvbnNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5tYXJrUmVhZCA9IChtYXJrUmVhZFJlcXVlc3QpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNoYW5uZWxzQXBpLm1hcmtSZWFkKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5iYXNlUmVxdWVzdCksIHsgbWFya1JlYWRSZXF1ZXN0IH0pKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5tYXJrVW5yZWFkID0gKG1hcmtVbnJlYWRSZXF1ZXN0KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jaGFubmVsc0FwaS5tYXJrVW5yZWFkKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5iYXNlUmVxdWVzdCksIHsgbWFya1VucmVhZFJlcXVlc3QgfSkpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnNob3cgPSAoc2hvd0NoYW5uZWxSZXF1ZXN0KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jaGFubmVsc0FwaS5zaG93Q2hhbm5lbChPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHRoaXMuYmFzZVJlcXVlc3QpLCB7IHNob3dDaGFubmVsUmVxdWVzdCB9KSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaGlkZSA9IChoaWRlQ2hhbm5lbFJlcXVlc3QpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNoYW5uZWxzQXBpLmhpZGVDaGFubmVsKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5iYXNlUmVxdWVzdCksIHsgaGlkZUNoYW5uZWxSZXF1ZXN0IH0pKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy50cnVuY2F0ZSA9ICh0cnVuY2F0ZUNoYW5uZWxSZXF1ZXN0KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jaGFubmVsc0FwaS50cnVuY2F0ZUNoYW5uZWwoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCB0aGlzLmJhc2VSZXF1ZXN0KSwgeyB0cnVuY2F0ZUNoYW5uZWxSZXF1ZXN0IH0pKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5xdWVyeU1lbWJlcnMgPSAocmVxdWVzdCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2hhbm5lbHNBcGkucXVlcnlNZW1iZXJzKHtcbiAgICAgICAgICAgICAgICBwYXlsb2FkOiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHRoaXMuYmFzZVJlcXVlc3QpLCByZXF1ZXN0KSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm11dGUgPSAobXV0ZUNoYW5uZWxSZXF1ZXN0KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jaGFubmVsc0FwaS5tdXRlQ2hhbm5lbCh7XG4gICAgICAgICAgICAgICAgbXV0ZUNoYW5uZWxSZXF1ZXN0OiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG11dGVDaGFubmVsUmVxdWVzdCksIHsgY2hhbm5lbF9jaWRzOiBbdGhpcy5jaWRdIH0pLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudW5tdXRlID0gKHVubXV0ZUNoYW5uZWxSZXF1ZXN0KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jaGFubmVsc0FwaS51bm11dGVDaGFubmVsKHtcbiAgICAgICAgICAgICAgICB1bm11dGVDaGFubmVsUmVxdWVzdDogT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCB1bm11dGVDaGFubmVsUmVxdWVzdCksIHsgY2hhbm5lbF9jaWQ6IHRoaXMuY2lkLCBjaGFubmVsX2NpZHM6IFtdIH0pLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIC8vIFRPRE86IHRoZXJlIGlzIHByb2JhYmx5IGFuIGlzc3VlIHdpdGggdGhlIGdlbmVyYXRlZCBjb2RlIGhlcmVcbiAgICAgICAgLy8gdXBsb2FkRmlsZSA9IChvcHRpb25zOiBPbWl0PE9taXRUeXBlSWQ8VXBsb2FkRmlsZVJlcXVlc3Q+LCAnZmlsZSc+LCBmaWxlOiBCdWZmZXIpID0+IHtcbiAgICAgICAgLy8gICByZXR1cm4gdGhpcy5tZXNzYWdlc0FwaS51cGxvYWRGaWxlKHsuLi5vcHRpb25zLCAuLi50aGlzLmJhc2VSZXF1ZXN0LCBmaWxlOiBmaWxlIGFzIGFueSBhcyBzdHJpbmd9KTtcbiAgICAgICAgLy8gfVxuICAgICAgICAvLyBkZWxldGVGaWxlID0gKHJlcXVlc3Q6IE9taXRUeXBlSWQ8RGVsZXRlRmlsZVJlcXVlc3Q+KSA9PiB7XG4gICAgICAgIC8vICAgcmV0dXJuIHRoaXMubWVzc2FnZXNBcGkuZGVsZXRlRmlsZSh7Li4ucmVxdWVzdCwgLi4udGhpcy5iYXNlUmVxdWVzdH0pO1xuICAgICAgICAvLyB9XG4gICAgICAgIC8vIHVwbG9hZEltYWdlID0gKHJlcXVlc3Q6IE9taXRUeXBlSWQ8VXBsb2FkSW1hZ2VSZXF1ZXN0PikgPT4ge1xuICAgICAgICAvLyAgIHJldHVybiB0aGlzLm1lc3NhZ2VzQXBpLnVwbG9hZEltYWdlKHsuLi5yZXF1ZXN0LCAuLi50aGlzLmJhc2VSZXF1ZXN0fSk7XG4gICAgICAgIC8vIH1cbiAgICAgICAgLy8gZGVsZXRlSW1hZ2UgPSAocmVxdWVzdDogT21pdFR5cGVJZDxEZWxldGVJbWFnZVJlcXVlc3Q+KSA9PiB7XG4gICAgICAgIC8vICAgcmV0dXJuIHRoaXMubWVzc2FnZXNBcGkuZGVsZXRlSW1hZ2Uoey4uLnJlcXVlc3QsIC4uLnRoaXMuYmFzZVJlcXVlc3R9KTtcbiAgICAgICAgLy8gfVxuICAgICAgICB0aGlzLnNlbmRNZXNzYWdlID0gKHNlbmRNZXNzYWdlUmVxdWVzdCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubWVzc2FnZXNBcGkuc2VuZE1lc3NhZ2UoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCB0aGlzLmJhc2VSZXF1ZXN0KSwgeyBzZW5kTWVzc2FnZVJlcXVlc3QgfSkpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmRlbGV0ZU1lc3NhZ2UgPSAocmVxdWVzdCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubWVzc2FnZXNBcGkuZGVsZXRlTWVzc2FnZShyZXF1ZXN0KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy51cGRhdGVNZXNzYWdlID0gKGlkLCB1cGRhdGVNZXNzYWdlUmVxdWVzdCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubWVzc2FnZXNBcGkudXBkYXRlTWVzc2FnZSh7IGlkLCB1cGRhdGVNZXNzYWdlUmVxdWVzdCB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy51cGRhdGVNZXNzYWdlUGFydGlhbCA9IChpZCwgdXBkYXRlTWVzc2FnZVBhcnRpYWxSZXF1ZXN0KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tZXNzYWdlc0FwaS51cGRhdGVNZXNzYWdlUGFydGlhbCh7XG4gICAgICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICAgICAgdXBkYXRlTWVzc2FnZVBhcnRpYWxSZXF1ZXN0LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZ2V0TWVzc2FnZSA9IChyZXF1ZXN0KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tZXNzYWdlc0FwaS5nZXRNZXNzYWdlKHJlcXVlc3QpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmdldE1hbnlNZXNzYWdlcyA9IChyZXF1ZXN0KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tZXNzYWdlc0FwaS5nZXRNYW55TWVzc2FnZXMoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXF1ZXN0KSwgdGhpcy5iYXNlUmVxdWVzdCkpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnRyYW5zbGF0ZU1lc3NhZ2UgPSAoaWQsIHRyYW5zbGF0ZU1lc3NhZ2VSZXF1ZXN0KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tZXNzYWdlc0FwaS50cmFuc2xhdGVNZXNzYWdlKHsgaWQsIHRyYW5zbGF0ZU1lc3NhZ2VSZXF1ZXN0IH0pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmdldE1lc3NhZ2VzQXJvdW5kID0gKHJlcXVlc3QpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1lc3NhZ2VzQXBpLmdldFJlcGxpZXMocmVxdWVzdCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZ2V0T3BlbkdyYXBoRGF0YSA9IChyZXF1ZXN0KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tZXNzYWdlc0FwaS5nZXRPRyhyZXF1ZXN0KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zZW5kTWVzc2FnZVJlYWN0aW9uID0gKG1lc3NhZ2VJZCwgc2VuZFJlYWN0aW9uUmVxdWVzdCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubWVzc2FnZXNBcGkuc2VuZFJlYWN0aW9uKHtcbiAgICAgICAgICAgICAgICBpZDogbWVzc2FnZUlkLFxuICAgICAgICAgICAgICAgIHNlbmRSZWFjdGlvblJlcXVlc3QsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5kZWxldGVNZXNzYWdlUmVhY3Rpb24gPSAobWVzc2FnZUlkLCByZXF1ZXN0KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tZXNzYWdlc0FwaS5kZWxldGVSZWFjdGlvbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlcXVlc3QpLCB7IGlkOiBtZXNzYWdlSWQgfSkpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmdldE1lc3NhZ2VSZWFjdGlvbnMgPSAobWVzc2FnZUlkLCByZXF1ZXN0KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tZXNzYWdlc0FwaS5nZXRSZWFjdGlvbnMoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCAocmVxdWVzdCAhPT0gbnVsbCAmJiByZXF1ZXN0ICE9PSB2b2lkIDAgPyByZXF1ZXN0IDoge30pKSwgeyBpZDogbWVzc2FnZUlkIH0pKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zZW5kQ3VzdG9tRXZlbnQgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmV2ZW50c0FwaS5zZW5kRXZlbnQoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCB0aGlzLmJhc2VSZXF1ZXN0KSwgeyBzZW5kRXZlbnRSZXF1ZXN0OiB7IGV2ZW50IH0gfSkpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBjb25maWd1cmF0aW9uID0gdGhpcy5zdHJlYW1DbGllbnQuZ2V0Q29uZmlndXJhdGlvbigpO1xuICAgICAgICAvKiogQHRzLWV4cGVjdC1lcnJvciAqL1xuICAgICAgICB0aGlzLmNoYW5uZWxzQXBpID0gbmV3IENoYW5uZWxzQXBpKGNvbmZpZ3VyYXRpb24pO1xuICAgICAgICAvKiogQHRzLWV4cGVjdC1lcnJvciAqL1xuICAgICAgICB0aGlzLm1lc3NhZ2VzQXBpID0gbmV3IE1lc3NhZ2VzQXBpKGNvbmZpZ3VyYXRpb24pO1xuICAgICAgICAvKiogQHRzLWV4cGVjdC1lcnJvciAqL1xuICAgICAgICB0aGlzLmV2ZW50c0FwaSA9IG5ldyBFdmVudHNBcGkoY29uZmlndXJhdGlvbik7XG4gICAgfVxuICAgIGdldCBjaWQoKSB7XG4gICAgICAgIHJldHVybiBgJHt0aGlzLmJhc2VSZXF1ZXN0LnR5cGV9OiR7dGhpcy5iYXNlUmVxdWVzdC5pZH1gO1xuICAgIH1cbiAgICBnZXQgYmFzZVJlcXVlc3QoKSB7XG4gICAgICAgIGlmICghdGhpcy5pZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdZb3UgbmVlZCB0byBpbml0aWFsaXplIHRoZSBjaGFubmVsIHdpdGggYGdldE9yQ3JlYXRlYCcpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpZDogdGhpcy5pZCxcbiAgICAgICAgICAgIHR5cGU6IHRoaXMudHlwZSxcbiAgICAgICAgfTtcbiAgICB9XG59XG5cbmNsYXNzIFN0cmVhbUNoYXRDbGllbnQge1xuICAgIGNvbnN0cnVjdG9yKHN0cmVhbUNsaWVudCkge1xuICAgICAgICB0aGlzLnN0cmVhbUNsaWVudCA9IHN0cmVhbUNsaWVudDtcbiAgICAgICAgdGhpcy5jaGFubmVsID0gKHR5cGUsIGlkKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFN0cmVhbUNoYW5uZWwodGhpcy5zdHJlYW1DbGllbnQsIHR5cGUsIGlkKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5jcmVhdGVCbG9ja0xpc3QgPSAoY3JlYXRlQmxvY2tMaXN0UmVxdWVzdCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2V0dGluZ3NBcGkuY3JlYXRlQmxvY2tMaXN0KHsgY3JlYXRlQmxvY2tMaXN0UmVxdWVzdCB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5saXN0QmxvY2tMaXN0cyA9ICgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNldHRpbmdzQXBpLmxpc3RCbG9ja0xpc3RzKCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZ2V0QmxvY2tMaXN0ID0gKHJlcXVlc3QpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNldHRpbmdzQXBpLmdldEJsb2NrTGlzdChyZXF1ZXN0KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy51cGRhdGVCbG9ja0xpc3QgPSAobmFtZSwgdXBkYXRlQmxvY2tMaXN0UmVxdWVzdCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2V0dGluZ3NBcGkudXBkYXRlQmxvY2tMaXN0KHsgbmFtZSwgdXBkYXRlQmxvY2tMaXN0UmVxdWVzdCB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5kZWxldGVCbG9ja0xpc3QgPSAocmVxdWVzdCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2V0dGluZ3NBcGkuZGVsZXRlQmxvY2tMaXN0KHJlcXVlc3QpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmNyZWF0ZUNoYW5uZWxUeXBlID0gKGNyZWF0ZUNoYW5uZWxUeXBlUmVxdWVzdCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2hhbm5lbFR5cGVzQXBpLmNyZWF0ZUNoYW5uZWxUeXBlKHsgY3JlYXRlQ2hhbm5lbFR5cGVSZXF1ZXN0IH0pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmRlbGV0ZUNoYW5uZWxUeXBlID0gKHJlcXVlc3QpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNoYW5uZWxUeXBlc0FwaS5kZWxldGVDaGFubmVsVHlwZShyZXF1ZXN0KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5nZXRDaGFubmVsVHlwZSA9IChyZXF1ZXN0KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jaGFubmVsVHlwZXNBcGkuZ2V0Q2hhbm5lbFR5cGUocmVxdWVzdCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMubGlzdENoYW5uZWxUeXBlcyA9ICgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNoYW5uZWxUeXBlc0FwaS5saXN0Q2hhbm5lbFR5cGVzKCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudXBkYXRlQ2hhbm5lbFR5cGUgPSAobmFtZSwgdXBkYXRlQ2hhbm5lbFR5cGVSZXF1ZXN0KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jaGFubmVsVHlwZXNBcGkudXBkYXRlQ2hhbm5lbFR5cGUoe1xuICAgICAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICAgICAgdXBkYXRlQ2hhbm5lbFR5cGVSZXF1ZXN0LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucXVlcnlDaGFubmVscyA9IChxdWVyeUNoYW5uZWxzUmVxdWVzdCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2hhbm5lbHNBcGkucXVlcnlDaGFubmVscyh7XG4gICAgICAgICAgICAgICAgcXVlcnlDaGFubmVsc1JlcXVlc3Q6IHF1ZXJ5Q2hhbm5lbHNSZXF1ZXN0ICE9PSBudWxsICYmIHF1ZXJ5Q2hhbm5lbHNSZXF1ZXN0ICE9PSB2b2lkIDAgPyBxdWVyeUNoYW5uZWxzUmVxdWVzdCA6IG51bGwsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zZWFyY2hNZXNzYWdlcyA9IChwYXlsb2FkKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jaGFubmVsc0FwaS5zZWFyY2goeyBwYXlsb2FkIH0pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmV4cG9ydENoYW5uZWxzID0gKGV4cG9ydENoYW5uZWxzUmVxdWVzdCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2hhbm5lbHNBcGkuZXhwb3J0Q2hhbm5lbHMoe1xuICAgICAgICAgICAgICAgIGV4cG9ydENoYW5uZWxzUmVxdWVzdDogZXhwb3J0Q2hhbm5lbHNSZXF1ZXN0ICE9PSBudWxsICYmIGV4cG9ydENoYW5uZWxzUmVxdWVzdCAhPT0gdm9pZCAwID8gZXhwb3J0Q2hhbm5lbHNSZXF1ZXN0IDogbnVsbCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmdldEV4cG9ydFN0YXR1cyA9IChyZXF1ZXN0KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jaGFubmVsc0FwaS5nZXRFeHBvcnRDaGFubmVsc1N0YXR1cyhyZXF1ZXN0KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5saXN0Q29tbWFuZHMgPSAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb21tYW5kc0FwaS5saXN0Q29tbWFuZHMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5jcmVhdGVDb21tYW5kID0gKGNyZWF0ZUNvbW1hbmRSZXF1ZXN0KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb21tYW5kc0FwaS5jcmVhdGVDb21tYW5kKHsgY3JlYXRlQ29tbWFuZFJlcXVlc3QgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZ2V0Q29tbWFuZCA9IChnZXRDb21tYW5kUmVxdWVzdCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29tbWFuZHNBcGkuZ2V0Q29tbWFuZChnZXRDb21tYW5kUmVxdWVzdCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudXBkYXRlQ29tbWFuZCA9IChuYW1lLCB1cGRhdGVDb21tYW5kUmVxdWVzdCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29tbWFuZHNBcGkudXBkYXRlQ29tbWFuZCh7IG5hbWUsIHVwZGF0ZUNvbW1hbmRSZXF1ZXN0IH0pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmRlbGV0ZUNvbW1hbmQgPSAocmVxdWVzdCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29tbWFuZHNBcGkuZGVsZXRlQ29tbWFuZChyZXF1ZXN0KTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgY29uZmlndXJhdGlvbiA9IHRoaXMuc3RyZWFtQ2xpZW50LmdldENvbmZpZ3VyYXRpb24oKTtcbiAgICAgICAgLyoqIEB0cy1leHBlY3QtZXJyb3IgKi9cbiAgICAgICAgdGhpcy5zZXR0aW5nc0FwaSA9IG5ldyBTZXR0aW5nc0FwaSQxKGNvbmZpZ3VyYXRpb24pO1xuICAgICAgICAvKiogQHRzLWV4cGVjdC1lcnJvciAqL1xuICAgICAgICB0aGlzLmNoYW5uZWxUeXBlc0FwaSA9IG5ldyBDaGFubmVsVHlwZXNBcGkoY29uZmlndXJhdGlvbik7XG4gICAgICAgIC8qKiBAdHMtZXhwZWN0LWVycm9yICovXG4gICAgICAgIHRoaXMuY2hhbm5lbHNBcGkgPSBuZXcgQ2hhbm5lbHNBcGkoY29uZmlndXJhdGlvbik7XG4gICAgICAgIC8qKiBAdHMtZXhwZWN0LWVycm9yICovXG4gICAgICAgIHRoaXMuY29tbWFuZHNBcGkgPSBuZXcgQ3VzdG9tQ29tbWFuZHNBcGkoY29uZmlndXJhdGlvbik7XG4gICAgfVxufVxuXG4vKiB0c2xpbnQ6ZGlzYWJsZSAqL1xuLyogZXNsaW50LWRpc2FibGUgKi9cbi8qKlxuICogU3RyZWFtIEFQSVxuICogTm8gZGVzY3JpcHRpb24gcHJvdmlkZWQgKGdlbmVyYXRlZCBieSBPcGVuYXBpIEdlbmVyYXRvciBodHRwczovL2dpdGh1Yi5jb20vb3BlbmFwaXRvb2xzL29wZW5hcGktZ2VuZXJhdG9yKVxuICpcbiAqIFRoZSB2ZXJzaW9uIG9mIHRoZSBPcGVuQVBJIGRvY3VtZW50OiB2MTAwLjQuM1xuICpcbiAqXG4gKiBOT1RFOiBUaGlzIGNsYXNzIGlzIGF1dG8gZ2VuZXJhdGVkIGJ5IE9wZW5BUEkgR2VuZXJhdG9yIChodHRwczovL29wZW5hcGktZ2VuZXJhdG9yLnRlY2gpLlxuICogaHR0cHM6Ly9vcGVuYXBpLWdlbmVyYXRvci50ZWNoXG4gKiBEbyBub3QgZWRpdCB0aGUgY2xhc3MgbWFudWFsbHkuXG4gKi9cbmNvbnN0IEJBU0VfUEFUSCA9IFwiaHR0cHM6Ly9zdHJlYW0taW8tYXBpLmNvbVwiLnJlcGxhY2UoL1xcLyskLywgXCJcIik7XG5jbGFzcyBDb25maWd1cmF0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcihjb25maWd1cmF0aW9uID0ge30pIHtcbiAgICAgICAgdGhpcy5jb25maWd1cmF0aW9uID0gY29uZmlndXJhdGlvbjtcbiAgICB9XG4gICAgc2V0IGNvbmZpZyhjb25maWd1cmF0aW9uKSB7XG4gICAgICAgIHRoaXMuY29uZmlndXJhdGlvbiA9IGNvbmZpZ3VyYXRpb247XG4gICAgfVxuICAgIGdldCBiYXNlUGF0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aCAhPSBudWxsID8gdGhpcy5jb25maWd1cmF0aW9uLmJhc2VQYXRoIDogQkFTRV9QQVRIO1xuICAgIH1cbiAgICBnZXQgZmV0Y2hBcGkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbmZpZ3VyYXRpb24uZmV0Y2hBcGk7XG4gICAgfVxuICAgIGdldCBtaWRkbGV3YXJlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25maWd1cmF0aW9uLm1pZGRsZXdhcmUgfHwgW107XG4gICAgfVxuICAgIGdldCBxdWVyeVBhcmFtc1N0cmluZ2lmeSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uZmlndXJhdGlvbi5xdWVyeVBhcmFtc1N0cmluZ2lmeSB8fCBxdWVyeXN0cmluZztcbiAgICB9XG4gICAgZ2V0IHVzZXJuYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25maWd1cmF0aW9uLnVzZXJuYW1lO1xuICAgIH1cbiAgICBnZXQgcGFzc3dvcmQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbmZpZ3VyYXRpb24ucGFzc3dvcmQ7XG4gICAgfVxuICAgIGdldCBhcGlLZXkoKSB7XG4gICAgICAgIGNvbnN0IGFwaUtleSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXk7XG4gICAgICAgIGlmIChhcGlLZXkpIHtcbiAgICAgICAgICAgIHJldHVybiB0eXBlb2YgYXBpS2V5ID09PSAnZnVuY3Rpb24nID8gYXBpS2V5IDogKCkgPT4gYXBpS2V5O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGdldCBhY2Nlc3NUb2tlbigpIHtcbiAgICAgICAgY29uc3QgYWNjZXNzVG9rZW4gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYWNjZXNzVG9rZW47XG4gICAgICAgIGlmIChhY2Nlc3NUb2tlbikge1xuICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBhY2Nlc3NUb2tlbiA9PT0gJ2Z1bmN0aW9uJyA/IGFjY2Vzc1Rva2VuIDogKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkgeyByZXR1cm4gYWNjZXNzVG9rZW47IH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGdldCBoZWFkZXJzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25maWd1cmF0aW9uLmhlYWRlcnM7XG4gICAgfVxuICAgIGdldCBjcmVkZW50aWFscygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uZmlndXJhdGlvbi5jcmVkZW50aWFscztcbiAgICB9XG59XG5jb25zdCBEZWZhdWx0Q29uZmlnID0gbmV3IENvbmZpZ3VyYXRpb24oKTtcbi8qKlxuICogVGhpcyBpcyB0aGUgYmFzZSBjbGFzcyBmb3IgYWxsIGdlbmVyYXRlZCBBUEkgY2xhc3Nlcy5cbiAqL1xuY2xhc3MgQmFzZUFQSSB7XG4gICAgY29uc3RydWN0b3IoY29uZmlndXJhdGlvbiA9IERlZmF1bHRDb25maWcpIHtcbiAgICAgICAgdGhpcy5jb25maWd1cmF0aW9uID0gY29uZmlndXJhdGlvbjtcbiAgICAgICAgdGhpcy5mZXRjaEFwaSA9ICh1cmwsIGluaXQpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGxldCBmZXRjaFBhcmFtcyA9IHsgdXJsLCBpbml0IH07XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG1pZGRsZXdhcmUgb2YgdGhpcy5taWRkbGV3YXJlKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1pZGRsZXdhcmUucHJlKSB7XG4gICAgICAgICAgICAgICAgICAgIGZldGNoUGFyYW1zID0gKHlpZWxkIG1pZGRsZXdhcmUucHJlKE9iamVjdC5hc3NpZ24oeyBmZXRjaDogdGhpcy5mZXRjaEFwaSB9LCBmZXRjaFBhcmFtcykpKSB8fCBmZXRjaFBhcmFtcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgcmVzcG9uc2UgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlID0geWllbGQgKHRoaXMuY29uZmlndXJhdGlvbi5mZXRjaEFwaSB8fCBmZXRjaCkoZmV0Y2hQYXJhbXMudXJsLCBmZXRjaFBhcmFtcy5pbml0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBtaWRkbGV3YXJlIG9mIHRoaXMubWlkZGxld2FyZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAobWlkZGxld2FyZS5vbkVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9ICh5aWVsZCBtaWRkbGV3YXJlLm9uRXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZldGNoOiB0aGlzLmZldGNoQXBpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogZmV0Y2hQYXJhbXMudXJsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluaXQ6IGZldGNoUGFyYW1zLmluaXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2U6IHJlc3BvbnNlID8gcmVzcG9uc2UuY2xvbmUoKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKSB8fCByZXNwb25zZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRmV0Y2hFcnJvcihlLCAnVGhlIHJlcXVlc3QgZmFpbGVkIGFuZCB0aGUgaW50ZXJjZXB0b3JzIGRpZCBub3QgcmV0dXJuIGFuIGFsdGVybmF0aXZlIHJlc3BvbnNlJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChjb25zdCBtaWRkbGV3YXJlIG9mIHRoaXMubWlkZGxld2FyZSkge1xuICAgICAgICAgICAgICAgIGlmIChtaWRkbGV3YXJlLnBvc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSAoeWllbGQgbWlkZGxld2FyZS5wb3N0KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZldGNoOiB0aGlzLmZldGNoQXBpLFxuICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBmZXRjaFBhcmFtcy51cmwsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbml0OiBmZXRjaFBhcmFtcy5pbml0LFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2U6IHJlc3BvbnNlLmNsb25lKCksXG4gICAgICAgICAgICAgICAgICAgIH0pKSB8fCByZXNwb25zZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLm1pZGRsZXdhcmUgPSBjb25maWd1cmF0aW9uLm1pZGRsZXdhcmU7XG4gICAgfVxuICAgIHdpdGhNaWRkbGV3YXJlKC4uLm1pZGRsZXdhcmVzKSB7XG4gICAgICAgIGNvbnN0IG5leHQgPSB0aGlzLmNsb25lKCk7XG4gICAgICAgIG5leHQubWlkZGxld2FyZSA9IG5leHQubWlkZGxld2FyZS5jb25jYXQoLi4ubWlkZGxld2FyZXMpO1xuICAgICAgICByZXR1cm4gbmV4dDtcbiAgICB9XG4gICAgd2l0aFByZU1pZGRsZXdhcmUoLi4ucHJlTWlkZGxld2FyZXMpIHtcbiAgICAgICAgY29uc3QgbWlkZGxld2FyZXMgPSBwcmVNaWRkbGV3YXJlcy5tYXAoKHByZSkgPT4gKHsgcHJlIH0pKTtcbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aE1pZGRsZXdhcmUoLi4ubWlkZGxld2FyZXMpO1xuICAgIH1cbiAgICB3aXRoUG9zdE1pZGRsZXdhcmUoLi4ucG9zdE1pZGRsZXdhcmVzKSB7XG4gICAgICAgIGNvbnN0IG1pZGRsZXdhcmVzID0gcG9zdE1pZGRsZXdhcmVzLm1hcCgocG9zdCkgPT4gKHsgcG9zdCB9KSk7XG4gICAgICAgIHJldHVybiB0aGlzLndpdGhNaWRkbGV3YXJlKC4uLm1pZGRsZXdhcmVzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hlY2sgaWYgdGhlIGdpdmVuIE1JTUUgaXMgYSBKU09OIE1JTUUuXG4gICAgICogSlNPTiBNSU1FIGV4YW1wbGVzOlxuICAgICAqICAgYXBwbGljYXRpb24vanNvblxuICAgICAqICAgYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD1VVEY4XG4gICAgICogICBBUFBMSUNBVElPTi9KU09OXG4gICAgICogICBhcHBsaWNhdGlvbi92bmQuY29tcGFueStqc29uXG4gICAgICogQHBhcmFtIG1pbWUgLSBNSU1FIChNdWx0aXB1cnBvc2UgSW50ZXJuZXQgTWFpbCBFeHRlbnNpb25zKVxuICAgICAqIEByZXR1cm4gVHJ1ZSBpZiB0aGUgZ2l2ZW4gTUlNRSBpcyBKU09OLCBmYWxzZSBvdGhlcndpc2UuXG4gICAgICovXG4gICAgaXNKc29uTWltZShtaW1lKSB7XG4gICAgICAgIGlmICghbWltZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBCYXNlQVBJLmpzb25SZWdleC50ZXN0KG1pbWUpO1xuICAgIH1cbiAgICByZXF1ZXN0KGNvbnRleHQsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgdXJsLCBpbml0IH0gPSB5aWVsZCB0aGlzLmNyZWF0ZUZldGNoUGFyYW1zKGNvbnRleHQsIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLmZldGNoQXBpKHVybCwgaW5pdCk7XG4gICAgICAgICAgICBpZiAocmVzcG9uc2UgJiYgKHJlc3BvbnNlLnN0YXR1cyA+PSAyMDAgJiYgcmVzcG9uc2Uuc3RhdHVzIDwgMzAwKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yKHJlc3BvbnNlLCAnUmVzcG9uc2UgcmV0dXJuZWQgYW4gZXJyb3IgY29kZScpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY3JlYXRlRmV0Y2hQYXJhbXMoY29udGV4dCwgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgbGV0IHVybCA9IHRoaXMuY29uZmlndXJhdGlvbi5iYXNlUGF0aCArIGNvbnRleHQucGF0aDtcbiAgICAgICAgICAgIGlmIChjb250ZXh0LnF1ZXJ5ICE9PSB1bmRlZmluZWQgJiYgT2JqZWN0LmtleXMoY29udGV4dC5xdWVyeSkubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgLy8gb25seSBhZGQgdGhlIHF1ZXJ5c3RyaW5nIHRvIHRoZSBVUkwgaWYgdGhlcmUgYXJlIHF1ZXJ5IHBhcmFtZXRlcnMuXG4gICAgICAgICAgICAgICAgLy8gdGhpcyBpcyBkb25lIHRvIGF2b2lkIHVybHMgZW5kaW5nIHdpdGggYSBcIj9cIiBjaGFyYWN0ZXIgd2hpY2ggYnVnZ3kgd2Vic2VydmVyc1xuICAgICAgICAgICAgICAgIC8vIGRvIG5vdCBoYW5kbGUgY29ycmVjdGx5IHNvbWV0aW1lcy5cbiAgICAgICAgICAgICAgICB1cmwgKz0gJz8nICsgdGhpcy5jb25maWd1cmF0aW9uLnF1ZXJ5UGFyYW1zU3RyaW5naWZ5KGNvbnRleHQucXVlcnkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgaGVhZGVycyA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuY29uZmlndXJhdGlvbi5oZWFkZXJzLCBjb250ZXh0LmhlYWRlcnMpO1xuICAgICAgICAgICAgT2JqZWN0LmtleXMoaGVhZGVycykuZm9yRWFjaChrZXkgPT4gaGVhZGVyc1trZXldID09PSB1bmRlZmluZWQgPyBkZWxldGUgaGVhZGVyc1trZXldIDoge30pO1xuICAgICAgICAgICAgY29uc3QgaW5pdE92ZXJyaWRlRm4gPSB0eXBlb2YgaW5pdE92ZXJyaWRlcyA9PT0gXCJmdW5jdGlvblwiXG4gICAgICAgICAgICAgICAgPyBpbml0T3ZlcnJpZGVzXG4gICAgICAgICAgICAgICAgOiAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7IHJldHVybiBpbml0T3ZlcnJpZGVzOyB9KTtcbiAgICAgICAgICAgIGNvbnN0IGluaXRQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiBjb250ZXh0Lm1ldGhvZCxcbiAgICAgICAgICAgICAgICBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIGJvZHk6IGNvbnRleHQuYm9keSxcbiAgICAgICAgICAgICAgICBjcmVkZW50aWFsczogdGhpcy5jb25maWd1cmF0aW9uLmNyZWRlbnRpYWxzLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IG92ZXJyaWRkZW5Jbml0ID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBpbml0UGFyYW1zKSwgKHlpZWxkIGluaXRPdmVycmlkZUZuKHtcbiAgICAgICAgICAgICAgICBpbml0OiBpbml0UGFyYW1zLFxuICAgICAgICAgICAgICAgIGNvbnRleHQsXG4gICAgICAgICAgICB9KSkpO1xuICAgICAgICAgICAgY29uc3QgaW5pdCA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgb3ZlcnJpZGRlbkluaXQpLCB7IGJvZHk6IGlzRm9ybURhdGEob3ZlcnJpZGRlbkluaXQuYm9keSkgfHxcbiAgICAgICAgICAgICAgICAgICAgb3ZlcnJpZGRlbkluaXQuYm9keSBpbnN0YW5jZW9mIFVSTFNlYXJjaFBhcmFtcyB8fFxuICAgICAgICAgICAgICAgICAgICBpc0Jsb2Iob3ZlcnJpZGRlbkluaXQuYm9keSlcbiAgICAgICAgICAgICAgICAgICAgPyBvdmVycmlkZGVuSW5pdC5ib2R5XG4gICAgICAgICAgICAgICAgICAgIDogSlNPTi5zdHJpbmdpZnkob3ZlcnJpZGRlbkluaXQuYm9keSkgfSk7XG4gICAgICAgICAgICByZXR1cm4geyB1cmwsIGluaXQgfTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIHNoYWxsb3cgY2xvbmUgb2YgYHRoaXNgIGJ5IGNvbnN0cnVjdGluZyBhIG5ldyBpbnN0YW5jZVxuICAgICAqIGFuZCB0aGVuIHNoYWxsb3cgY2xvbmluZyBkYXRhIG1lbWJlcnMuXG4gICAgICovXG4gICAgY2xvbmUoKSB7XG4gICAgICAgIGNvbnN0IGNvbnN0cnVjdG9yID0gdGhpcy5jb25zdHJ1Y3RvcjtcbiAgICAgICAgY29uc3QgbmV4dCA9IG5ldyBjb25zdHJ1Y3Rvcih0aGlzLmNvbmZpZ3VyYXRpb24pO1xuICAgICAgICBuZXh0Lm1pZGRsZXdhcmUgPSB0aGlzLm1pZGRsZXdhcmUuc2xpY2UoKTtcbiAgICAgICAgcmV0dXJuIG5leHQ7XG4gICAgfVxufVxuQmFzZUFQSS5qc29uUmVnZXggPSBuZXcgUmVnRXhwKCdeKDo/YXBwbGljYXRpb25cXC9qc29ufFteOy8gXFx0XStcXC9bXjsvIFxcdF0rWytdanNvbilbIFxcdF0qKDo/Oy4qKT8kJywgJ2knKTtcbmZ1bmN0aW9uIGlzQmxvYih2YWx1ZSkge1xuICAgIHJldHVybiB0eXBlb2YgQmxvYiAhPT0gJ3VuZGVmaW5lZCcgJiYgdmFsdWUgaW5zdGFuY2VvZiBCbG9iO1xufVxuZnVuY3Rpb24gaXNGb3JtRGF0YSh2YWx1ZSkge1xuICAgIHJldHVybiB0eXBlb2YgRm9ybURhdGEgIT09IFwidW5kZWZpbmVkXCIgJiYgdmFsdWUgaW5zdGFuY2VvZiBGb3JtRGF0YTtcbn1cbmNsYXNzIFJlc3BvbnNlRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IocmVzcG9uc2UsIG1zZykge1xuICAgICAgICBzdXBlcihtc2cpO1xuICAgICAgICB0aGlzLnJlc3BvbnNlID0gcmVzcG9uc2U7XG4gICAgICAgIHRoaXMubmFtZSA9IFwiUmVzcG9uc2VFcnJvclwiO1xuICAgIH1cbn1cbmNsYXNzIEZldGNoRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IoY2F1c2UsIG1zZykge1xuICAgICAgICBzdXBlcihtc2cpO1xuICAgICAgICB0aGlzLmNhdXNlID0gY2F1c2U7XG4gICAgICAgIHRoaXMubmFtZSA9IFwiRmV0Y2hFcnJvclwiO1xuICAgIH1cbn1cbmNsYXNzIFJlcXVpcmVkRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IoZmllbGQsIG1zZykge1xuICAgICAgICBzdXBlcihtc2cpO1xuICAgICAgICB0aGlzLmZpZWxkID0gZmllbGQ7XG4gICAgICAgIHRoaXMubmFtZSA9IFwiUmVxdWlyZWRFcnJvclwiO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHF1ZXJ5c3RyaW5nKHBhcmFtcywgcHJlZml4ID0gJycpIHtcbiAgICByZXR1cm4gT2JqZWN0LmtleXMocGFyYW1zKVxuICAgICAgICAubWFwKGtleSA9PiBxdWVyeXN0cmluZ1NpbmdsZUtleShrZXksIHBhcmFtc1trZXldLCBwcmVmaXgpKVxuICAgICAgICAuZmlsdGVyKHBhcnQgPT4gcGFydC5sZW5ndGggPiAwKVxuICAgICAgICAuam9pbignJicpO1xufVxuZnVuY3Rpb24gcXVlcnlzdHJpbmdTaW5nbGVLZXkoa2V5LCB2YWx1ZSwga2V5UHJlZml4ID0gJycpIHtcbiAgICBjb25zdCBmdWxsS2V5ID0ga2V5UHJlZml4ICsgKGtleVByZWZpeC5sZW5ndGggPyBgWyR7a2V5fV1gIDoga2V5KTtcbiAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICBjb25zdCBtdWx0aVZhbHVlID0gdmFsdWUubWFwKHNpbmdsZVZhbHVlID0+IGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoc2luZ2xlVmFsdWUpKSlcbiAgICAgICAgICAgIC5qb2luKGAmJHtlbmNvZGVVUklDb21wb25lbnQoZnVsbEtleSl9PWApO1xuICAgICAgICByZXR1cm4gYCR7ZW5jb2RlVVJJQ29tcG9uZW50KGZ1bGxLZXkpfT0ke211bHRpVmFsdWV9YDtcbiAgICB9XG4gICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgU2V0KSB7XG4gICAgICAgIGNvbnN0IHZhbHVlQXNBcnJheSA9IEFycmF5LmZyb20odmFsdWUpO1xuICAgICAgICByZXR1cm4gcXVlcnlzdHJpbmdTaW5nbGVLZXkoa2V5LCB2YWx1ZUFzQXJyYXksIGtleVByZWZpeCk7XG4gICAgfVxuICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICAgICAgcmV0dXJuIGAke2VuY29kZVVSSUNvbXBvbmVudChmdWxsS2V5KX09JHtlbmNvZGVVUklDb21wb25lbnQodmFsdWUudG9JU09TdHJpbmcoKSl9YDtcbiAgICB9XG4gICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgT2JqZWN0KSB7XG4gICAgICAgIHJldHVybiBxdWVyeXN0cmluZyh2YWx1ZSwgZnVsbEtleSk7XG4gICAgfVxuICAgIHJldHVybiBgJHtlbmNvZGVVUklDb21wb25lbnQoZnVsbEtleSl9PSR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh2YWx1ZSkpfWA7XG59XG5jbGFzcyBKU09OQXBpUmVzcG9uc2Uge1xuICAgIGNvbnN0cnVjdG9yKHJhdywgdHJhbnNmb3JtZXIgPSAoanNvblZhbHVlKSA9PiBqc29uVmFsdWUpIHtcbiAgICAgICAgdGhpcy5yYXcgPSByYXc7XG4gICAgICAgIHRoaXMudHJhbnNmb3JtZXIgPSB0cmFuc2Zvcm1lcjtcbiAgICB9XG4gICAgdmFsdWUoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50cmFuc2Zvcm1lcih5aWVsZCB0aGlzLnJhdy5qc29uKCkpO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5jbGFzcyBWb2lkQXBpUmVzcG9uc2Uge1xuICAgIGNvbnN0cnVjdG9yKHJhdykge1xuICAgICAgICB0aGlzLnJhdyA9IHJhdztcbiAgICB9XG4gICAgdmFsdWUoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5cbi8qIHRzbGludDpkaXNhYmxlICovXG4vKiBlc2xpbnQtZGlzYWJsZSAqL1xuLyoqXG4gKiBTdHJlYW0gQVBJXG4gKiBObyBkZXNjcmlwdGlvbiBwcm92aWRlZCAoZ2VuZXJhdGVkIGJ5IE9wZW5hcGkgR2VuZXJhdG9yIGh0dHBzOi8vZ2l0aHViLmNvbS9vcGVuYXBpdG9vbHMvb3BlbmFwaS1nZW5lcmF0b3IpXG4gKlxuICogVGhlIHZlcnNpb24gb2YgdGhlIE9wZW5BUEkgZG9jdW1lbnQ6IHYxMDAuNC4zXG4gKlxuICpcbiAqIE5PVEU6IFRoaXMgY2xhc3MgaXMgYXV0byBnZW5lcmF0ZWQgYnkgT3BlbkFQSSBHZW5lcmF0b3IgKGh0dHBzOi8vb3BlbmFwaS1nZW5lcmF0b3IudGVjaCkuXG4gKiBodHRwczovL29wZW5hcGktZ2VuZXJhdG9yLnRlY2hcbiAqIERvIG5vdCBlZGl0IHRoZSBjbGFzcyBtYW51YWxseS5cbiAqL1xuLyoqXG4gKlxuICovXG5jbGFzcyBEZWZhdWx0QXBpIGV4dGVuZHMgQmFzZUFQSSB7XG4gICAgLyoqXG4gICAgICogQmxvY2sgYSB1c2VyLCBwcmV2ZW50aW5nIHRoZW0gZnJvbSBqb2luaW5nIHRoZSBjYWxsIHVudGlsIHRoZXkgYXJlIHVuYmxvY2tlZC4gIFNlbmRzIGV2ZW50czogLSBjYWxsLmJsb2NrZWRfdXNlciAgUmVxdWlyZWQgcGVybWlzc2lvbnM6IC0gQmxvY2tVc2VyXG4gICAgICogQmxvY2sgdXNlciBvbiBhIGNhbGxcbiAgICAgKi9cbiAgICBibG9ja1VzZXJSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy50eXBlID09PSBudWxsIHx8IHJlcXVlc3RQYXJhbWV0ZXJzLnR5cGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZXF1aXJlZEVycm9yKCd0eXBlJywgJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy50eXBlIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgYmxvY2tVc2VyLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLmlkID09PSBudWxsIHx8IHJlcXVlc3RQYXJhbWV0ZXJzLmlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvcignaWQnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLmlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgYmxvY2tVc2VyLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLnZpZGVvQmxvY2tVc2VyUmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy52aWRlb0Jsb2NrVXNlclJlcXVlc3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZXF1aXJlZEVycm9yKCd2aWRlb0Jsb2NrVXNlclJlcXVlc3QnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLnZpZGVvQmxvY2tVc2VyUmVxdWVzdCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGJsb2NrVXNlci4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgY29uc3QgaGVhZGVyUGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1snQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbic7XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiU3RyZWFtLUF1dGgtVHlwZVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJTdHJlYW0tQXV0aC1UeXBlXCIpOyAvLyBzdHJlYW0tYXV0aC10eXBlIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbXCJhcGlfa2V5XCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcImFwaV9rZXlcIik7IC8vIGFwaV9rZXkgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJBdXRob3JpemF0aW9uXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIkF1dGhvcml6YXRpb25cIik7IC8vIEpXVCBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIHBhdGg6IGAvdmlkZW8vY2FsbC97dHlwZX0ve2lkfS9ibG9ja2AucmVwbGFjZShgeyR7XCJ0eXBlXCJ9fWAsIGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVxdWVzdFBhcmFtZXRlcnMudHlwZSkpKS5yZXBsYWNlKGB7JHtcImlkXCJ9fWAsIGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVxdWVzdFBhcmFtZXRlcnMuaWQpKSksXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVyUGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBxdWVyeTogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIGJvZHk6IHJlcXVlc3RQYXJhbWV0ZXJzLnZpZGVvQmxvY2tVc2VyUmVxdWVzdCxcbiAgICAgICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBKU09OQXBpUmVzcG9uc2UocmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQmxvY2sgYSB1c2VyLCBwcmV2ZW50aW5nIHRoZW0gZnJvbSBqb2luaW5nIHRoZSBjYWxsIHVudGlsIHRoZXkgYXJlIHVuYmxvY2tlZC4gIFNlbmRzIGV2ZW50czogLSBjYWxsLmJsb2NrZWRfdXNlciAgUmVxdWlyZWQgcGVybWlzc2lvbnM6IC0gQmxvY2tVc2VyXG4gICAgICogQmxvY2sgdXNlciBvbiBhIGNhbGxcbiAgICAgKi9cbiAgICBibG9ja1VzZXIocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5ibG9ja1VzZXJSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIHlpZWxkIHJlc3BvbnNlLnZhbHVlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgbmV3IGRldmljZSB0byBhIHVzZXIsIGlmIHRoZSBzYW1lIGRldmljZSBhbHJlYWR5IGV4aXN0cyB0aGUgY2FsbCB3aWxsIGhhdmUgbm8gZWZmZWN0XG4gICAgICogQ3JlYXRlIGRldmljZVxuICAgICAqL1xuICAgIGNyZWF0ZURldmljZVJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLnZpZGVvQ3JlYXRlRGV2aWNlUmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy52aWRlb0NyZWF0ZURldmljZVJlcXVlc3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZXF1aXJlZEVycm9yKCd2aWRlb0NyZWF0ZURldmljZVJlcXVlc3QnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLnZpZGVvQ3JlYXRlRGV2aWNlUmVxdWVzdCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGNyZWF0ZURldmljZS4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgY29uc3QgaGVhZGVyUGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1snQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbic7XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiU3RyZWFtLUF1dGgtVHlwZVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJTdHJlYW0tQXV0aC1UeXBlXCIpOyAvLyBzdHJlYW0tYXV0aC10eXBlIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbXCJhcGlfa2V5XCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcImFwaV9rZXlcIik7IC8vIGFwaV9rZXkgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJBdXRob3JpemF0aW9uXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIkF1dGhvcml6YXRpb25cIik7IC8vIEpXVCBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIHBhdGg6IGAvdmlkZW8vZGV2aWNlc2AsXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVyUGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBxdWVyeTogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIGJvZHk6IHJlcXVlc3RQYXJhbWV0ZXJzLnZpZGVvQ3JlYXRlRGV2aWNlUmVxdWVzdCxcbiAgICAgICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBKU09OQXBpUmVzcG9uc2UocmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyBhIG5ldyBkZXZpY2UgdG8gYSB1c2VyLCBpZiB0aGUgc2FtZSBkZXZpY2UgYWxyZWFkeSBleGlzdHMgdGhlIGNhbGwgd2lsbCBoYXZlIG5vIGVmZmVjdFxuICAgICAqIENyZWF0ZSBkZXZpY2VcbiAgICAgKi9cbiAgICBjcmVhdGVEZXZpY2UocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5jcmVhdGVEZXZpY2VSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIHlpZWxkIHJlc3BvbnNlLnZhbHVlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKlxuICAgICAqIENyZWF0ZSBHdWVzdFxuICAgICAqL1xuICAgIGNyZWF0ZUd1ZXN0UmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMudmlkZW9DcmVhdGVHdWVzdFJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMudmlkZW9DcmVhdGVHdWVzdFJlcXVlc3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZXF1aXJlZEVycm9yKCd2aWRlb0NyZWF0ZUd1ZXN0UmVxdWVzdCcsICdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVxdWVzdFBhcmFtZXRlcnMudmlkZW9DcmVhdGVHdWVzdFJlcXVlc3Qgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBjcmVhdGVHdWVzdC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgY29uc3QgaGVhZGVyUGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1snQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbic7XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiU3RyZWFtLUF1dGgtVHlwZVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJTdHJlYW0tQXV0aC1UeXBlXCIpOyAvLyBzdHJlYW0tYXV0aC10eXBlIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbXCJhcGlfa2V5XCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcImFwaV9rZXlcIik7IC8vIGFwaV9rZXkgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJBdXRob3JpemF0aW9uXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIkF1dGhvcml6YXRpb25cIik7IC8vIEpXVCBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIHBhdGg6IGAvdmlkZW8vZ3Vlc3RgLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBib2R5OiByZXF1ZXN0UGFyYW1ldGVycy52aWRlb0NyZWF0ZUd1ZXN0UmVxdWVzdCxcbiAgICAgICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBKU09OQXBpUmVzcG9uc2UocmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBDcmVhdGUgR3Vlc3RcbiAgICAgKi9cbiAgICBjcmVhdGVHdWVzdChyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLmNyZWF0ZUd1ZXN0UmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCByZXNwb25zZS52YWx1ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVsZXRlcyBvbmUgZGV2aWNlXG4gICAgICogRGVsZXRlIGRldmljZVxuICAgICAqL1xuICAgIGRlbGV0ZURldmljZVJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMuaWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1snaWQnXSA9IHJlcXVlc3RQYXJhbWV0ZXJzLmlkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLnVzZXJJZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzWyd1c2VyX2lkJ10gPSByZXF1ZXN0UGFyYW1ldGVycy51c2VySWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiU3RyZWFtLUF1dGgtVHlwZVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJTdHJlYW0tQXV0aC1UeXBlXCIpOyAvLyBzdHJlYW0tYXV0aC10eXBlIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbXCJhcGlfa2V5XCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcImFwaV9rZXlcIik7IC8vIGFwaV9rZXkgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJBdXRob3JpemF0aW9uXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIkF1dGhvcml6YXRpb25cIik7IC8vIEpXVCBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIHBhdGg6IGAvdmlkZW8vZGV2aWNlc2AsXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICB9LCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgSlNPTkFwaVJlc3BvbnNlKHJlc3BvbnNlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlbGV0ZXMgb25lIGRldmljZVxuICAgICAqIERlbGV0ZSBkZXZpY2VcbiAgICAgKi9cbiAgICBkZWxldGVEZXZpY2UocmVxdWVzdFBhcmFtZXRlcnMgPSB7fSwgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLmRlbGV0ZURldmljZVJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4geWllbGQgcmVzcG9uc2UudmFsdWUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqICAgU2VuZHMgZXZlbnRzOiAtIGNhbGwuZW5kZWQgIFJlcXVpcmVkIHBlcm1pc3Npb25zOiAtIEVuZENhbGxcbiAgICAgKiBFbmQgY2FsbFxuICAgICAqL1xuICAgIGVuZENhbGxSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy50eXBlID09PSBudWxsIHx8IHJlcXVlc3RQYXJhbWV0ZXJzLnR5cGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZXF1aXJlZEVycm9yKCd0eXBlJywgJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy50eXBlIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZW5kQ2FsbC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy5pZCA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy5pZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IoJ2lkJywgJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy5pZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGVuZENhbGwuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlclBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJTdHJlYW0tQXV0aC1UeXBlXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIlN0cmVhbS1BdXRoLVR5cGVcIik7IC8vIHN0cmVhbS1hdXRoLXR5cGUgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1tcImFwaV9rZXlcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiYXBpX2tleVwiKTsgLy8gYXBpX2tleSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiQXV0aG9yaXphdGlvblwiKTsgLy8gSldUIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgcGF0aDogYC92aWRlby9jYWxsL3t0eXBlfS97aWR9L21hcmtfZW5kZWRgLnJlcGxhY2UoYHske1widHlwZVwifX1gLCBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJlcXVlc3RQYXJhbWV0ZXJzLnR5cGUpKSkucmVwbGFjZShgeyR7XCJpZFwifX1gLCBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJlcXVlc3RQYXJhbWV0ZXJzLmlkKSkpLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBKU09OQXBpUmVzcG9uc2UocmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogICBTZW5kcyBldmVudHM6IC0gY2FsbC5lbmRlZCAgUmVxdWlyZWQgcGVybWlzc2lvbnM6IC0gRW5kQ2FsbFxuICAgICAqIEVuZCBjYWxsXG4gICAgICovXG4gICAgZW5kQ2FsbChyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLmVuZENhbGxSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIHlpZWxkIHJlc3BvbnNlLnZhbHVlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiAgIFJlcXVpcmVkIHBlcm1pc3Npb25zOiAtIFJlYWRDYWxsXG4gICAgICogR2V0IENhbGxcbiAgICAgKi9cbiAgICBnZXRDYWxsUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMudHlwZSA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy50eXBlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvcigndHlwZScsICdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVxdWVzdFBhcmFtZXRlcnMudHlwZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldENhbGwuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMuaWQgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMuaWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZXF1aXJlZEVycm9yKCdpZCcsICdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVxdWVzdFBhcmFtZXRlcnMuaWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRDYWxsLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMuY29ubmVjdGlvbklkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbJ2Nvbm5lY3Rpb25faWQnXSA9IHJlcXVlc3RQYXJhbWV0ZXJzLmNvbm5lY3Rpb25JZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy5tZW1iZXJzTGltaXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1snbWVtYmVyc19saW1pdCddID0gcmVxdWVzdFBhcmFtZXRlcnMubWVtYmVyc0xpbWl0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLnJpbmcgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1sncmluZyddID0gcmVxdWVzdFBhcmFtZXRlcnMucmluZztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy5ub3RpZnkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1snbm90aWZ5J10gPSByZXF1ZXN0UGFyYW1ldGVycy5ub3RpZnk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiU3RyZWFtLUF1dGgtVHlwZVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJTdHJlYW0tQXV0aC1UeXBlXCIpOyAvLyBzdHJlYW0tYXV0aC10eXBlIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbXCJhcGlfa2V5XCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcImFwaV9rZXlcIik7IC8vIGFwaV9rZXkgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJBdXRob3JpemF0aW9uXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIkF1dGhvcml6YXRpb25cIik7IC8vIEpXVCBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIHBhdGg6IGAvdmlkZW8vY2FsbC97dHlwZX0ve2lkfWAucmVwbGFjZShgeyR7XCJ0eXBlXCJ9fWAsIGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVxdWVzdFBhcmFtZXRlcnMudHlwZSkpKS5yZXBsYWNlKGB7JHtcImlkXCJ9fWAsIGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVxdWVzdFBhcmFtZXRlcnMuaWQpKSksXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICB9LCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgSlNPTkFwaVJlc3BvbnNlKHJlc3BvbnNlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqICAgUmVxdWlyZWQgcGVybWlzc2lvbnM6IC0gUmVhZENhbGxcbiAgICAgKiBHZXQgQ2FsbFxuICAgICAqL1xuICAgIGdldENhbGwocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5nZXRDYWxsUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCByZXNwb25zZS52YWx1ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgbGlzdCBvZiBhbGwgZWRnZXMgYXZhaWxhYmxlIGZvciB2aWRlbyBjYWxscy5cbiAgICAgKiBHZXQgRWRnZXNcbiAgICAgKi9cbiAgICBnZXRFZGdlc1Jhdyhpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlclBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJTdHJlYW0tQXV0aC1UeXBlXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIlN0cmVhbS1BdXRoLVR5cGVcIik7IC8vIHN0cmVhbS1hdXRoLXR5cGUgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1tcImFwaV9rZXlcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiYXBpX2tleVwiKTsgLy8gYXBpX2tleSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiQXV0aG9yaXphdGlvblwiKTsgLy8gSldUIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgcGF0aDogYC92aWRlby9lZGdlc2AsXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICB9LCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgSlNPTkFwaVJlc3BvbnNlKHJlc3BvbnNlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGxpc3Qgb2YgYWxsIGVkZ2VzIGF2YWlsYWJsZSBmb3IgdmlkZW8gY2FsbHMuXG4gICAgICogR2V0IEVkZ2VzXG4gICAgICovXG4gICAgZ2V0RWRnZXMoaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLmdldEVkZ2VzUmF3KGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIHlpZWxkIHJlc3BvbnNlLnZhbHVlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIG9yIGNyZWF0ZXMgYSBuZXcgY2FsbCAgU2VuZHMgZXZlbnRzOiAtIGNhbGwuY3JlYXRlZCAtIGNhbGwubm90aWZpY2F0aW9uIC0gY2FsbC5yaW5nICBSZXF1aXJlZCBwZXJtaXNzaW9uczogLSBDcmVhdGVDYWxsIC0gUmVhZENhbGwgLSBVcGRhdGVDYWxsU2V0dGluZ3NcbiAgICAgKiBHZXQgb3IgY3JlYXRlIGEgY2FsbFxuICAgICAqL1xuICAgIGdldE9yQ3JlYXRlQ2FsbFJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLnR5cGUgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMudHlwZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IoJ3R5cGUnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLnR5cGUgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRPckNyZWF0ZUNhbGwuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMuaWQgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMuaWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZXF1aXJlZEVycm9yKCdpZCcsICdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVxdWVzdFBhcmFtZXRlcnMuaWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRPckNyZWF0ZUNhbGwuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMudmlkZW9HZXRPckNyZWF0ZUNhbGxSZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3RQYXJhbWV0ZXJzLnZpZGVvR2V0T3JDcmVhdGVDYWxsUmVxdWVzdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IoJ3ZpZGVvR2V0T3JDcmVhdGVDYWxsUmVxdWVzdCcsICdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVxdWVzdFBhcmFtZXRlcnMudmlkZW9HZXRPckNyZWF0ZUNhbGxSZXF1ZXN0IHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0T3JDcmVhdGVDYWxsLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMuY29ubmVjdGlvbklkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbJ2Nvbm5lY3Rpb25faWQnXSA9IHJlcXVlc3RQYXJhbWV0ZXJzLmNvbm5lY3Rpb25JZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGhlYWRlclBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbJ0NvbnRlbnQtVHlwZSddID0gJ2FwcGxpY2F0aW9uL2pzb24nO1xuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIlN0cmVhbS1BdXRoLVR5cGVcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiU3RyZWFtLUF1dGgtVHlwZVwiKTsgLy8gc3RyZWFtLWF1dGgtdHlwZSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzW1wiYXBpX2tleVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJhcGlfa2V5XCIpOyAvLyBhcGlfa2V5IGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiQXV0aG9yaXphdGlvblwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJBdXRob3JpemF0aW9uXCIpOyAvLyBKV1QgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICBwYXRoOiBgL3ZpZGVvL2NhbGwve3R5cGV9L3tpZH1gLnJlcGxhY2UoYHske1widHlwZVwifX1gLCBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJlcXVlc3RQYXJhbWV0ZXJzLnR5cGUpKSkucmVwbGFjZShgeyR7XCJpZFwifX1gLCBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJlcXVlc3RQYXJhbWV0ZXJzLmlkKSkpLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBib2R5OiByZXF1ZXN0UGFyYW1ldGVycy52aWRlb0dldE9yQ3JlYXRlQ2FsbFJlcXVlc3QsXG4gICAgICAgICAgICB9LCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgSlNPTkFwaVJlc3BvbnNlKHJlc3BvbnNlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgb3IgY3JlYXRlcyBhIG5ldyBjYWxsICBTZW5kcyBldmVudHM6IC0gY2FsbC5jcmVhdGVkIC0gY2FsbC5ub3RpZmljYXRpb24gLSBjYWxsLnJpbmcgIFJlcXVpcmVkIHBlcm1pc3Npb25zOiAtIENyZWF0ZUNhbGwgLSBSZWFkQ2FsbCAtIFVwZGF0ZUNhbGxTZXR0aW5nc1xuICAgICAqIEdldCBvciBjcmVhdGUgYSBjYWxsXG4gICAgICovXG4gICAgZ2V0T3JDcmVhdGVDYWxsKHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuZ2V0T3JDcmVhdGVDYWxsUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCByZXNwb25zZS52YWx1ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogICBTZW5kcyBldmVudHM6IC0gY2FsbC5saXZlX3N0YXJ0ZWQgIFJlcXVpcmVkIHBlcm1pc3Npb25zOiAtIFVwZGF0ZUNhbGxcbiAgICAgKiBTZXQgY2FsbCBhcyBsaXZlXG4gICAgICovXG4gICAgZ29MaXZlUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMudHlwZSA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy50eXBlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvcigndHlwZScsICdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVxdWVzdFBhcmFtZXRlcnMudHlwZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdvTGl2ZS4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy5pZCA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy5pZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IoJ2lkJywgJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy5pZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdvTGl2ZS4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy52aWRlb0dvTGl2ZVJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMudmlkZW9Hb0xpdmVSZXF1ZXN0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvcigndmlkZW9Hb0xpdmVSZXF1ZXN0JywgJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy52aWRlb0dvTGl2ZVJlcXVlc3Qgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnb0xpdmUuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlclBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbJ0NvbnRlbnQtVHlwZSddID0gJ2FwcGxpY2F0aW9uL2pzb24nO1xuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIlN0cmVhbS1BdXRoLVR5cGVcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiU3RyZWFtLUF1dGgtVHlwZVwiKTsgLy8gc3RyZWFtLWF1dGgtdHlwZSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzW1wiYXBpX2tleVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJhcGlfa2V5XCIpOyAvLyBhcGlfa2V5IGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiQXV0aG9yaXphdGlvblwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJBdXRob3JpemF0aW9uXCIpOyAvLyBKV1QgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICBwYXRoOiBgL3ZpZGVvL2NhbGwve3R5cGV9L3tpZH0vZ29fbGl2ZWAucmVwbGFjZShgeyR7XCJ0eXBlXCJ9fWAsIGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVxdWVzdFBhcmFtZXRlcnMudHlwZSkpKS5yZXBsYWNlKGB7JHtcImlkXCJ9fWAsIGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVxdWVzdFBhcmFtZXRlcnMuaWQpKSksXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVyUGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBxdWVyeTogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIGJvZHk6IHJlcXVlc3RQYXJhbWV0ZXJzLnZpZGVvR29MaXZlUmVxdWVzdCxcbiAgICAgICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBKU09OQXBpUmVzcG9uc2UocmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogICBTZW5kcyBldmVudHM6IC0gY2FsbC5saXZlX3N0YXJ0ZWQgIFJlcXVpcmVkIHBlcm1pc3Npb25zOiAtIFVwZGF0ZUNhbGxcbiAgICAgKiBTZXQgY2FsbCBhcyBsaXZlXG4gICAgICovXG4gICAgZ29MaXZlKHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuZ29MaXZlUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCByZXNwb25zZS52YWx1ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhbGwgYXZhaWxhYmxlIGRldmljZXNcbiAgICAgKiBMaXN0IGRldmljZXNcbiAgICAgKi9cbiAgICBsaXN0RGV2aWNlc1JhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMudXNlcklkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbJ3VzZXJfaWQnXSA9IHJlcXVlc3RQYXJhbWV0ZXJzLnVzZXJJZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGhlYWRlclBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJTdHJlYW0tQXV0aC1UeXBlXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIlN0cmVhbS1BdXRoLVR5cGVcIik7IC8vIHN0cmVhbS1hdXRoLXR5cGUgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1tcImFwaV9rZXlcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiYXBpX2tleVwiKTsgLy8gYXBpX2tleSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiQXV0aG9yaXphdGlvblwiKTsgLy8gSldUIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgcGF0aDogYC92aWRlby9kZXZpY2VzYCxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBKU09OQXBpUmVzcG9uc2UocmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhbGwgYXZhaWxhYmxlIGRldmljZXNcbiAgICAgKiBMaXN0IGRldmljZXNcbiAgICAgKi9cbiAgICBsaXN0RGV2aWNlcyhyZXF1ZXN0UGFyYW1ldGVycyA9IHt9LCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMubGlzdERldmljZXNSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIHlpZWxkIHJlc3BvbnNlLnZhbHVlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMaXN0cyByZWNvcmRpbmdzICBSZXF1aXJlZCBwZXJtaXNzaW9uczogLSBMaXN0UmVjb3JkaW5nc1xuICAgICAqIExpc3QgcmVjb3JkaW5nc1xuICAgICAqL1xuICAgIGxpc3RSZWNvcmRpbmdzUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMudHlwZSA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy50eXBlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvcigndHlwZScsICdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVxdWVzdFBhcmFtZXRlcnMudHlwZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGxpc3RSZWNvcmRpbmdzLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLmlkID09PSBudWxsIHx8IHJlcXVlc3RQYXJhbWV0ZXJzLmlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvcignaWQnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLmlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgbGlzdFJlY29yZGluZ3MuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlclBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJTdHJlYW0tQXV0aC1UeXBlXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIlN0cmVhbS1BdXRoLVR5cGVcIik7IC8vIHN0cmVhbS1hdXRoLXR5cGUgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1tcImFwaV9rZXlcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiYXBpX2tleVwiKTsgLy8gYXBpX2tleSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiQXV0aG9yaXphdGlvblwiKTsgLy8gSldUIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgcGF0aDogYC92aWRlby9jYWxsL3t0eXBlfS97aWR9L3JlY29yZGluZ3NgLnJlcGxhY2UoYHske1widHlwZVwifX1gLCBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJlcXVlc3RQYXJhbWV0ZXJzLnR5cGUpKSkucmVwbGFjZShgeyR7XCJpZFwifX1gLCBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJlcXVlc3RQYXJhbWV0ZXJzLmlkKSkpLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVyUGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBxdWVyeTogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgfSwgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEpTT05BcGlSZXNwb25zZShyZXNwb25zZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMaXN0cyByZWNvcmRpbmdzICBSZXF1aXJlZCBwZXJtaXNzaW9uczogLSBMaXN0UmVjb3JkaW5nc1xuICAgICAqIExpc3QgcmVjb3JkaW5nc1xuICAgICAqL1xuICAgIGxpc3RSZWNvcmRpbmdzKHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMubGlzdFJlY29yZGluZ3NSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIHlpZWxkIHJlc3BvbnNlLnZhbHVlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMaXN0cyB0cmFuc2NyaXB0aW9ucyAgUmVxdWlyZWQgcGVybWlzc2lvbnM6IC0gTGlzdFRyYW5zY3JpcHRpb25zXG4gICAgICogTGlzdCB0cmFuc2NyaXB0aW9uc1xuICAgICAqL1xuICAgIGxpc3RUcmFuc2NyaXB0aW9uc1JhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLnR5cGUgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMudHlwZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IoJ3R5cGUnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLnR5cGUgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBsaXN0VHJhbnNjcmlwdGlvbnMuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMuaWQgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMuaWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZXF1aXJlZEVycm9yKCdpZCcsICdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVxdWVzdFBhcmFtZXRlcnMuaWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBsaXN0VHJhbnNjcmlwdGlvbnMuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlclBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJTdHJlYW0tQXV0aC1UeXBlXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIlN0cmVhbS1BdXRoLVR5cGVcIik7IC8vIHN0cmVhbS1hdXRoLXR5cGUgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1tcImFwaV9rZXlcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiYXBpX2tleVwiKTsgLy8gYXBpX2tleSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiQXV0aG9yaXphdGlvblwiKTsgLy8gSldUIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgcGF0aDogYC92aWRlby9jYWxsL3t0eXBlfS97aWR9L3RyYW5zY3JpcHRpb25zYC5yZXBsYWNlKGB7JHtcInR5cGVcIn19YCwgZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhyZXF1ZXN0UGFyYW1ldGVycy50eXBlKSkpLnJlcGxhY2UoYHske1wiaWRcIn19YCwgZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhyZXF1ZXN0UGFyYW1ldGVycy5pZCkpKSxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBKU09OQXBpUmVzcG9uc2UocmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTGlzdHMgdHJhbnNjcmlwdGlvbnMgIFJlcXVpcmVkIHBlcm1pc3Npb25zOiAtIExpc3RUcmFuc2NyaXB0aW9uc1xuICAgICAqIExpc3QgdHJhbnNjcmlwdGlvbnNcbiAgICAgKi9cbiAgICBsaXN0VHJhbnNjcmlwdGlvbnMocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5saXN0VHJhbnNjcmlwdGlvbnNSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIHlpZWxkIHJlc3BvbnNlLnZhbHVlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNdXRlcyB1c2VycyBpbiBhIGNhbGwgIFJlcXVpcmVkIHBlcm1pc3Npb25zOiAtIE11dGVVc2Vyc1xuICAgICAqIE11dGUgdXNlcnNcbiAgICAgKi9cbiAgICBtdXRlVXNlcnNSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy50eXBlID09PSBudWxsIHx8IHJlcXVlc3RQYXJhbWV0ZXJzLnR5cGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZXF1aXJlZEVycm9yKCd0eXBlJywgJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy50eXBlIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgbXV0ZVVzZXJzLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLmlkID09PSBudWxsIHx8IHJlcXVlc3RQYXJhbWV0ZXJzLmlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvcignaWQnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLmlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgbXV0ZVVzZXJzLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLnZpZGVvTXV0ZVVzZXJzUmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy52aWRlb011dGVVc2Vyc1JlcXVlc3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZXF1aXJlZEVycm9yKCd2aWRlb011dGVVc2Vyc1JlcXVlc3QnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLnZpZGVvTXV0ZVVzZXJzUmVxdWVzdCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIG11dGVVc2Vycy4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgY29uc3QgaGVhZGVyUGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1snQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbic7XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiU3RyZWFtLUF1dGgtVHlwZVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJTdHJlYW0tQXV0aC1UeXBlXCIpOyAvLyBzdHJlYW0tYXV0aC10eXBlIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbXCJhcGlfa2V5XCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcImFwaV9rZXlcIik7IC8vIGFwaV9rZXkgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJBdXRob3JpemF0aW9uXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIkF1dGhvcml6YXRpb25cIik7IC8vIEpXVCBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIHBhdGg6IGAvdmlkZW8vY2FsbC97dHlwZX0ve2lkfS9tdXRlX3VzZXJzYC5yZXBsYWNlKGB7JHtcInR5cGVcIn19YCwgZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhyZXF1ZXN0UGFyYW1ldGVycy50eXBlKSkpLnJlcGxhY2UoYHske1wiaWRcIn19YCwgZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhyZXF1ZXN0UGFyYW1ldGVycy5pZCkpKSxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgYm9keTogcmVxdWVzdFBhcmFtZXRlcnMudmlkZW9NdXRlVXNlcnNSZXF1ZXN0LFxuICAgICAgICAgICAgfSwgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEpTT05BcGlSZXNwb25zZShyZXNwb25zZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNdXRlcyB1c2VycyBpbiBhIGNhbGwgIFJlcXVpcmVkIHBlcm1pc3Npb25zOiAtIE11dGVVc2Vyc1xuICAgICAqIE11dGUgdXNlcnNcbiAgICAgKi9cbiAgICBtdXRlVXNlcnMocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5tdXRlVXNlcnNSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIHlpZWxkIHJlc3BvbnNlLnZhbHVlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBRdWVyeSBjYWxscyB3aXRoIGZpbHRlciBxdWVyeSAgUmVxdWlyZWQgcGVybWlzc2lvbnM6IC0gUmVhZENhbGxcbiAgICAgKiBRdWVyeSBjYWxsXG4gICAgICovXG4gICAgcXVlcnlDYWxsc1JhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLnZpZGVvUXVlcnlDYWxsc1JlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMudmlkZW9RdWVyeUNhbGxzUmVxdWVzdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IoJ3ZpZGVvUXVlcnlDYWxsc1JlcXVlc3QnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLnZpZGVvUXVlcnlDYWxsc1JlcXVlc3Qgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBxdWVyeUNhbGxzLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMuY29ubmVjdGlvbklkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbJ2Nvbm5lY3Rpb25faWQnXSA9IHJlcXVlc3RQYXJhbWV0ZXJzLmNvbm5lY3Rpb25JZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGhlYWRlclBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbJ0NvbnRlbnQtVHlwZSddID0gJ2FwcGxpY2F0aW9uL2pzb24nO1xuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIlN0cmVhbS1BdXRoLVR5cGVcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiU3RyZWFtLUF1dGgtVHlwZVwiKTsgLy8gc3RyZWFtLWF1dGgtdHlwZSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzW1wiYXBpX2tleVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJhcGlfa2V5XCIpOyAvLyBhcGlfa2V5IGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiQXV0aG9yaXphdGlvblwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJBdXRob3JpemF0aW9uXCIpOyAvLyBKV1QgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICBwYXRoOiBgL3ZpZGVvL2NhbGxzYCxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgYm9keTogcmVxdWVzdFBhcmFtZXRlcnMudmlkZW9RdWVyeUNhbGxzUmVxdWVzdCxcbiAgICAgICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBKU09OQXBpUmVzcG9uc2UocmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUXVlcnkgY2FsbHMgd2l0aCBmaWx0ZXIgcXVlcnkgIFJlcXVpcmVkIHBlcm1pc3Npb25zOiAtIFJlYWRDYWxsXG4gICAgICogUXVlcnkgY2FsbFxuICAgICAqL1xuICAgIHF1ZXJ5Q2FsbHMocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5xdWVyeUNhbGxzUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCByZXNwb25zZS52YWx1ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUXVlcnkgY2FsbCBtZW1iZXJzIHdpdGggZmlsdGVyIHF1ZXJ5ICBSZXF1aXJlZCBwZXJtaXNzaW9uczogLSBSZWFkQ2FsbFxuICAgICAqIFF1ZXJ5IGNhbGwgbWVtYmVyc1xuICAgICAqL1xuICAgIHF1ZXJ5TWVtYmVyc1JhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLnZpZGVvUXVlcnlNZW1iZXJzUmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy52aWRlb1F1ZXJ5TWVtYmVyc1JlcXVlc3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZXF1aXJlZEVycm9yKCd2aWRlb1F1ZXJ5TWVtYmVyc1JlcXVlc3QnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLnZpZGVvUXVlcnlNZW1iZXJzUmVxdWVzdCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHF1ZXJ5TWVtYmVycy4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgY29uc3QgaGVhZGVyUGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1snQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbic7XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiU3RyZWFtLUF1dGgtVHlwZVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJTdHJlYW0tQXV0aC1UeXBlXCIpOyAvLyBzdHJlYW0tYXV0aC10eXBlIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbXCJhcGlfa2V5XCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcImFwaV9rZXlcIik7IC8vIGFwaV9rZXkgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJBdXRob3JpemF0aW9uXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIkF1dGhvcml6YXRpb25cIik7IC8vIEpXVCBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIHBhdGg6IGAvdmlkZW8vY2FsbC9tZW1iZXJzYCxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgYm9keTogcmVxdWVzdFBhcmFtZXRlcnMudmlkZW9RdWVyeU1lbWJlcnNSZXF1ZXN0LFxuICAgICAgICAgICAgfSwgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEpTT05BcGlSZXNwb25zZShyZXNwb25zZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBRdWVyeSBjYWxsIG1lbWJlcnMgd2l0aCBmaWx0ZXIgcXVlcnkgIFJlcXVpcmVkIHBlcm1pc3Npb25zOiAtIFJlYWRDYWxsXG4gICAgICogUXVlcnkgY2FsbCBtZW1iZXJzXG4gICAgICovXG4gICAgcXVlcnlNZW1iZXJzKHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMucXVlcnlNZW1iZXJzUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCByZXNwb25zZS52YWx1ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZHMgY3VzdG9tIGV2ZW50IHRvIHRoZSBjYWxsICBTZW5kcyBldmVudHM6IC0gY3VzdG9tICBSZXF1aXJlZCBwZXJtaXNzaW9uczogLSBTZW5kRXZlbnRcbiAgICAgKiBTZW5kIGN1c3RvbSBldmVudFxuICAgICAqL1xuICAgIHNlbmRFdmVudFJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLnR5cGUgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMudHlwZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IoJ3R5cGUnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLnR5cGUgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBzZW5kRXZlbnQuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMuaWQgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMuaWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZXF1aXJlZEVycm9yKCdpZCcsICdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVxdWVzdFBhcmFtZXRlcnMuaWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBzZW5kRXZlbnQuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMudmlkZW9TZW5kRXZlbnRSZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3RQYXJhbWV0ZXJzLnZpZGVvU2VuZEV2ZW50UmVxdWVzdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IoJ3ZpZGVvU2VuZEV2ZW50UmVxdWVzdCcsICdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVxdWVzdFBhcmFtZXRlcnMudmlkZW9TZW5kRXZlbnRSZXF1ZXN0IHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgc2VuZEV2ZW50LicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJztcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJTdHJlYW0tQXV0aC1UeXBlXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIlN0cmVhbS1BdXRoLVR5cGVcIik7IC8vIHN0cmVhbS1hdXRoLXR5cGUgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1tcImFwaV9rZXlcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiYXBpX2tleVwiKTsgLy8gYXBpX2tleSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiQXV0aG9yaXphdGlvblwiKTsgLy8gSldUIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgcGF0aDogYC92aWRlby9jYWxsL3t0eXBlfS97aWR9L2V2ZW50YC5yZXBsYWNlKGB7JHtcInR5cGVcIn19YCwgZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhyZXF1ZXN0UGFyYW1ldGVycy50eXBlKSkpLnJlcGxhY2UoYHske1wiaWRcIn19YCwgZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhyZXF1ZXN0UGFyYW1ldGVycy5pZCkpKSxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgYm9keTogcmVxdWVzdFBhcmFtZXRlcnMudmlkZW9TZW5kRXZlbnRSZXF1ZXN0LFxuICAgICAgICAgICAgfSwgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEpTT05BcGlSZXNwb25zZShyZXNwb25zZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kcyBjdXN0b20gZXZlbnQgdG8gdGhlIGNhbGwgIFNlbmRzIGV2ZW50czogLSBjdXN0b20gIFJlcXVpcmVkIHBlcm1pc3Npb25zOiAtIFNlbmRFdmVudFxuICAgICAqIFNlbmQgY3VzdG9tIGV2ZW50XG4gICAgICovXG4gICAgc2VuZEV2ZW50KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMuc2VuZEV2ZW50UmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCByZXNwb25zZS52YWx1ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RhcnRzIEhMUyBicm9hZGNhc3RpbmcgIFJlcXVpcmVkIHBlcm1pc3Npb25zOiAtIFN0YXJ0QnJvYWRjYXN0aW5nXG4gICAgICogU3RhcnQgSExTIGJyb2FkY2FzdGluZ1xuICAgICAqL1xuICAgIHN0YXJ0SExTQnJvYWRjYXN0aW5nUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMudHlwZSA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy50eXBlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvcigndHlwZScsICdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVxdWVzdFBhcmFtZXRlcnMudHlwZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHN0YXJ0SExTQnJvYWRjYXN0aW5nLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLmlkID09PSBudWxsIHx8IHJlcXVlc3RQYXJhbWV0ZXJzLmlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvcignaWQnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLmlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgc3RhcnRITFNCcm9hZGNhc3RpbmcuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlclBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJTdHJlYW0tQXV0aC1UeXBlXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIlN0cmVhbS1BdXRoLVR5cGVcIik7IC8vIHN0cmVhbS1hdXRoLXR5cGUgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1tcImFwaV9rZXlcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiYXBpX2tleVwiKTsgLy8gYXBpX2tleSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiQXV0aG9yaXphdGlvblwiKTsgLy8gSldUIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgcGF0aDogYC92aWRlby9jYWxsL3t0eXBlfS97aWR9L3N0YXJ0X2Jyb2FkY2FzdGluZ2AucmVwbGFjZShgeyR7XCJ0eXBlXCJ9fWAsIGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVxdWVzdFBhcmFtZXRlcnMudHlwZSkpKS5yZXBsYWNlKGB7JHtcImlkXCJ9fWAsIGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVxdWVzdFBhcmFtZXRlcnMuaWQpKSksXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVyUGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBxdWVyeTogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgfSwgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEpTT05BcGlSZXNwb25zZShyZXNwb25zZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdGFydHMgSExTIGJyb2FkY2FzdGluZyAgUmVxdWlyZWQgcGVybWlzc2lvbnM6IC0gU3RhcnRCcm9hZGNhc3RpbmdcbiAgICAgKiBTdGFydCBITFMgYnJvYWRjYXN0aW5nXG4gICAgICovXG4gICAgc3RhcnRITFNCcm9hZGNhc3RpbmcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zdGFydEhMU0Jyb2FkY2FzdGluZ1JhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4geWllbGQgcmVzcG9uc2UudmFsdWUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0YXJ0cyByZWNvcmRpbmcgIFNlbmRzIGV2ZW50czogLSBjYWxsLnJlY29yZGluZ19zdGFydGVkICBSZXF1aXJlZCBwZXJtaXNzaW9uczogLSBTdGFydFJlY29yZGluZ1xuICAgICAqIFN0YXJ0IHJlY29yZGluZ1xuICAgICAqL1xuICAgIHN0YXJ0UmVjb3JkaW5nUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMudHlwZSA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy50eXBlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvcigndHlwZScsICdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVxdWVzdFBhcmFtZXRlcnMudHlwZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHN0YXJ0UmVjb3JkaW5nLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLmlkID09PSBudWxsIHx8IHJlcXVlc3RQYXJhbWV0ZXJzLmlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvcignaWQnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLmlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgc3RhcnRSZWNvcmRpbmcuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMudmlkZW9TdGFydFJlY29yZGluZ1JlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMudmlkZW9TdGFydFJlY29yZGluZ1JlcXVlc3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZXF1aXJlZEVycm9yKCd2aWRlb1N0YXJ0UmVjb3JkaW5nUmVxdWVzdCcsICdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVxdWVzdFBhcmFtZXRlcnMudmlkZW9TdGFydFJlY29yZGluZ1JlcXVlc3Qgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBzdGFydFJlY29yZGluZy4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgY29uc3QgaGVhZGVyUGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1snQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbic7XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiU3RyZWFtLUF1dGgtVHlwZVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJTdHJlYW0tQXV0aC1UeXBlXCIpOyAvLyBzdHJlYW0tYXV0aC10eXBlIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbXCJhcGlfa2V5XCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcImFwaV9rZXlcIik7IC8vIGFwaV9rZXkgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJBdXRob3JpemF0aW9uXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIkF1dGhvcml6YXRpb25cIik7IC8vIEpXVCBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIHBhdGg6IGAvdmlkZW8vY2FsbC97dHlwZX0ve2lkfS9zdGFydF9yZWNvcmRpbmdgLnJlcGxhY2UoYHske1widHlwZVwifX1gLCBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJlcXVlc3RQYXJhbWV0ZXJzLnR5cGUpKSkucmVwbGFjZShgeyR7XCJpZFwifX1gLCBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJlcXVlc3RQYXJhbWV0ZXJzLmlkKSkpLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBib2R5OiByZXF1ZXN0UGFyYW1ldGVycy52aWRlb1N0YXJ0UmVjb3JkaW5nUmVxdWVzdCxcbiAgICAgICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBKU09OQXBpUmVzcG9uc2UocmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RhcnRzIHJlY29yZGluZyAgU2VuZHMgZXZlbnRzOiAtIGNhbGwucmVjb3JkaW5nX3N0YXJ0ZWQgIFJlcXVpcmVkIHBlcm1pc3Npb25zOiAtIFN0YXJ0UmVjb3JkaW5nXG4gICAgICogU3RhcnQgcmVjb3JkaW5nXG4gICAgICovXG4gICAgc3RhcnRSZWNvcmRpbmcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zdGFydFJlY29yZGluZ1JhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4geWllbGQgcmVzcG9uc2UudmFsdWUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0YXJ0cyB0cmFuc2NyaXB0aW9uICBSZXF1aXJlZCBwZXJtaXNzaW9uczogLSBTdGFydFRyYW5zY3JpcHRpb25cbiAgICAgKiBTdGFydCB0cmFuc2NyaXB0aW9uXG4gICAgICovXG4gICAgc3RhcnRUcmFuc2NyaXB0aW9uUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMudHlwZSA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy50eXBlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvcigndHlwZScsICdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVxdWVzdFBhcmFtZXRlcnMudHlwZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHN0YXJ0VHJhbnNjcmlwdGlvbi4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy5pZCA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy5pZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IoJ2lkJywgJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy5pZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHN0YXJ0VHJhbnNjcmlwdGlvbi4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy52aWRlb1N0YXJ0VHJhbnNjcmlwdGlvblJlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMudmlkZW9TdGFydFRyYW5zY3JpcHRpb25SZXF1ZXN0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvcigndmlkZW9TdGFydFRyYW5zY3JpcHRpb25SZXF1ZXN0JywgJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy52aWRlb1N0YXJ0VHJhbnNjcmlwdGlvblJlcXVlc3Qgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBzdGFydFRyYW5zY3JpcHRpb24uJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlclBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbJ0NvbnRlbnQtVHlwZSddID0gJ2FwcGxpY2F0aW9uL2pzb24nO1xuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIlN0cmVhbS1BdXRoLVR5cGVcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiU3RyZWFtLUF1dGgtVHlwZVwiKTsgLy8gc3RyZWFtLWF1dGgtdHlwZSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzW1wiYXBpX2tleVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJhcGlfa2V5XCIpOyAvLyBhcGlfa2V5IGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiQXV0aG9yaXphdGlvblwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJBdXRob3JpemF0aW9uXCIpOyAvLyBKV1QgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICBwYXRoOiBgL3ZpZGVvL2NhbGwve3R5cGV9L3tpZH0vc3RhcnRfdHJhbnNjcmlwdGlvbmAucmVwbGFjZShgeyR7XCJ0eXBlXCJ9fWAsIGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVxdWVzdFBhcmFtZXRlcnMudHlwZSkpKS5yZXBsYWNlKGB7JHtcImlkXCJ9fWAsIGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVxdWVzdFBhcmFtZXRlcnMuaWQpKSksXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVyUGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBxdWVyeTogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIGJvZHk6IHJlcXVlc3RQYXJhbWV0ZXJzLnZpZGVvU3RhcnRUcmFuc2NyaXB0aW9uUmVxdWVzdCxcbiAgICAgICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBKU09OQXBpUmVzcG9uc2UocmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RhcnRzIHRyYW5zY3JpcHRpb24gIFJlcXVpcmVkIHBlcm1pc3Npb25zOiAtIFN0YXJ0VHJhbnNjcmlwdGlvblxuICAgICAqIFN0YXJ0IHRyYW5zY3JpcHRpb25cbiAgICAgKi9cbiAgICBzdGFydFRyYW5zY3JpcHRpb24ocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zdGFydFRyYW5zY3JpcHRpb25SYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIHlpZWxkIHJlc3BvbnNlLnZhbHVlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdG9wcyBITFMgYnJvYWRjYXN0aW5nICBSZXF1aXJlZCBwZXJtaXNzaW9uczogLSBTdG9wQnJvYWRjYXN0aW5nXG4gICAgICogU3RvcCBITFMgYnJvYWRjYXN0aW5nXG4gICAgICovXG4gICAgc3RvcEhMU0Jyb2FkY2FzdGluZ1JhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLnR5cGUgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMudHlwZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IoJ3R5cGUnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLnR5cGUgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBzdG9wSExTQnJvYWRjYXN0aW5nLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLmlkID09PSBudWxsIHx8IHJlcXVlc3RQYXJhbWV0ZXJzLmlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvcignaWQnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLmlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgc3RvcEhMU0Jyb2FkY2FzdGluZy4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgY29uc3QgaGVhZGVyUGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIlN0cmVhbS1BdXRoLVR5cGVcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiU3RyZWFtLUF1dGgtVHlwZVwiKTsgLy8gc3RyZWFtLWF1dGgtdHlwZSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzW1wiYXBpX2tleVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJhcGlfa2V5XCIpOyAvLyBhcGlfa2V5IGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiQXV0aG9yaXphdGlvblwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJBdXRob3JpemF0aW9uXCIpOyAvLyBKV1QgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICBwYXRoOiBgL3ZpZGVvL2NhbGwve3R5cGV9L3tpZH0vc3RvcF9icm9hZGNhc3RpbmdgLnJlcGxhY2UoYHske1widHlwZVwifX1gLCBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJlcXVlc3RQYXJhbWV0ZXJzLnR5cGUpKSkucmVwbGFjZShgeyR7XCJpZFwifX1gLCBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJlcXVlc3RQYXJhbWV0ZXJzLmlkKSkpLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBKU09OQXBpUmVzcG9uc2UocmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RvcHMgSExTIGJyb2FkY2FzdGluZyAgUmVxdWlyZWQgcGVybWlzc2lvbnM6IC0gU3RvcEJyb2FkY2FzdGluZ1xuICAgICAqIFN0b3AgSExTIGJyb2FkY2FzdGluZ1xuICAgICAqL1xuICAgIHN0b3BITFNCcm9hZGNhc3RpbmcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5zdG9wSExTQnJvYWRjYXN0aW5nUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCByZXNwb25zZS52YWx1ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogICBTZW5kcyBldmVudHM6IC0gY2FsbC51cGRhdGVkICBSZXF1aXJlZCBwZXJtaXNzaW9uczogLSBVcGRhdGVDYWxsXG4gICAgICogU2V0IGNhbGwgYXMgbm90IGxpdmVcbiAgICAgKi9cbiAgICBzdG9wTGl2ZVJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLnR5cGUgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMudHlwZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IoJ3R5cGUnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLnR5cGUgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBzdG9wTGl2ZS4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy5pZCA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy5pZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IoJ2lkJywgJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy5pZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHN0b3BMaXZlLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiU3RyZWFtLUF1dGgtVHlwZVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJTdHJlYW0tQXV0aC1UeXBlXCIpOyAvLyBzdHJlYW0tYXV0aC10eXBlIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbXCJhcGlfa2V5XCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcImFwaV9rZXlcIik7IC8vIGFwaV9rZXkgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJBdXRob3JpemF0aW9uXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIkF1dGhvcml6YXRpb25cIik7IC8vIEpXVCBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIHBhdGg6IGAvdmlkZW8vY2FsbC97dHlwZX0ve2lkfS9zdG9wX2xpdmVgLnJlcGxhY2UoYHske1widHlwZVwifX1gLCBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJlcXVlc3RQYXJhbWV0ZXJzLnR5cGUpKSkucmVwbGFjZShgeyR7XCJpZFwifX1gLCBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJlcXVlc3RQYXJhbWV0ZXJzLmlkKSkpLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBKU09OQXBpUmVzcG9uc2UocmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogICBTZW5kcyBldmVudHM6IC0gY2FsbC51cGRhdGVkICBSZXF1aXJlZCBwZXJtaXNzaW9uczogLSBVcGRhdGVDYWxsXG4gICAgICogU2V0IGNhbGwgYXMgbm90IGxpdmVcbiAgICAgKi9cbiAgICBzdG9wTGl2ZShyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnN0b3BMaXZlUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCByZXNwb25zZS52YWx1ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RvcHMgcmVjb3JkaW5nICBTZW5kcyBldmVudHM6IC0gY2FsbC5yZWNvcmRpbmdfc3RvcHBlZCAgUmVxdWlyZWQgcGVybWlzc2lvbnM6IC0gU3RvcFJlY29yZGluZ1xuICAgICAqIFN0b3AgcmVjb3JkaW5nXG4gICAgICovXG4gICAgc3RvcFJlY29yZGluZ1JhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLnR5cGUgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMudHlwZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IoJ3R5cGUnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLnR5cGUgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBzdG9wUmVjb3JkaW5nLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLmlkID09PSBudWxsIHx8IHJlcXVlc3RQYXJhbWV0ZXJzLmlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvcignaWQnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLmlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgc3RvcFJlY29yZGluZy4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgY29uc3QgaGVhZGVyUGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIlN0cmVhbS1BdXRoLVR5cGVcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiU3RyZWFtLUF1dGgtVHlwZVwiKTsgLy8gc3RyZWFtLWF1dGgtdHlwZSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzW1wiYXBpX2tleVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJhcGlfa2V5XCIpOyAvLyBhcGlfa2V5IGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiQXV0aG9yaXphdGlvblwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJBdXRob3JpemF0aW9uXCIpOyAvLyBKV1QgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICBwYXRoOiBgL3ZpZGVvL2NhbGwve3R5cGV9L3tpZH0vc3RvcF9yZWNvcmRpbmdgLnJlcGxhY2UoYHske1widHlwZVwifX1gLCBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJlcXVlc3RQYXJhbWV0ZXJzLnR5cGUpKSkucmVwbGFjZShgeyR7XCJpZFwifX1gLCBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJlcXVlc3RQYXJhbWV0ZXJzLmlkKSkpLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBKU09OQXBpUmVzcG9uc2UocmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RvcHMgcmVjb3JkaW5nICBTZW5kcyBldmVudHM6IC0gY2FsbC5yZWNvcmRpbmdfc3RvcHBlZCAgUmVxdWlyZWQgcGVybWlzc2lvbnM6IC0gU3RvcFJlY29yZGluZ1xuICAgICAqIFN0b3AgcmVjb3JkaW5nXG4gICAgICovXG4gICAgc3RvcFJlY29yZGluZyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnN0b3BSZWNvcmRpbmdSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIHlpZWxkIHJlc3BvbnNlLnZhbHVlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdG9wcyB0cmFuc2NyaXB0aW9uICBTZW5kcyBldmVudHM6IC0gY2FsbC50cmFuc2NyaXB0aW9uX3N0b3BwZWQgIFJlcXVpcmVkIHBlcm1pc3Npb25zOiAtIFN0b3BUcmFuc2NyaXB0aW9uXG4gICAgICogU3RvcCB0cmFuc2NyaXB0aW9uXG4gICAgICovXG4gICAgc3RvcFRyYW5zY3JpcHRpb25SYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy50eXBlID09PSBudWxsIHx8IHJlcXVlc3RQYXJhbWV0ZXJzLnR5cGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZXF1aXJlZEVycm9yKCd0eXBlJywgJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy50eXBlIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgc3RvcFRyYW5zY3JpcHRpb24uJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMuaWQgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMuaWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZXF1aXJlZEVycm9yKCdpZCcsICdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVxdWVzdFBhcmFtZXRlcnMuaWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBzdG9wVHJhbnNjcmlwdGlvbi4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgY29uc3QgaGVhZGVyUGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIlN0cmVhbS1BdXRoLVR5cGVcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiU3RyZWFtLUF1dGgtVHlwZVwiKTsgLy8gc3RyZWFtLWF1dGgtdHlwZSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzW1wiYXBpX2tleVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJhcGlfa2V5XCIpOyAvLyBhcGlfa2V5IGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiQXV0aG9yaXphdGlvblwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJBdXRob3JpemF0aW9uXCIpOyAvLyBKV1QgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICBwYXRoOiBgL3ZpZGVvL2NhbGwve3R5cGV9L3tpZH0vc3RvcF90cmFuc2NyaXB0aW9uYC5yZXBsYWNlKGB7JHtcInR5cGVcIn19YCwgZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhyZXF1ZXN0UGFyYW1ldGVycy50eXBlKSkpLnJlcGxhY2UoYHske1wiaWRcIn19YCwgZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhyZXF1ZXN0UGFyYW1ldGVycy5pZCkpKSxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICB9LCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgSlNPTkFwaVJlc3BvbnNlKHJlc3BvbnNlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0b3BzIHRyYW5zY3JpcHRpb24gIFNlbmRzIGV2ZW50czogLSBjYWxsLnRyYW5zY3JpcHRpb25fc3RvcHBlZCAgUmVxdWlyZWQgcGVybWlzc2lvbnM6IC0gU3RvcFRyYW5zY3JpcHRpb25cbiAgICAgKiBTdG9wIHRyYW5zY3JpcHRpb25cbiAgICAgKi9cbiAgICBzdG9wVHJhbnNjcmlwdGlvbihyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnN0b3BUcmFuc2NyaXB0aW9uUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCByZXNwb25zZS52YWx1ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyB0aGUgYmxvY2sgZm9yIGEgdXNlciBvbiBhIGNhbGwuIFRoZSB1c2VyIHdpbGwgYmUgYWJsZSB0byBqb2luIHRoZSBjYWxsIGFnYWluLiAgU2VuZHMgZXZlbnRzOiAtIGNhbGwudW5ibG9ja2VkX3VzZXIgIFJlcXVpcmVkIHBlcm1pc3Npb25zOiAtIEJsb2NrVXNlclxuICAgICAqIFVuYmxvY2tzIHVzZXIgb24gYSBjYWxsXG4gICAgICovXG4gICAgdW5ibG9ja1VzZXJSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy50eXBlID09PSBudWxsIHx8IHJlcXVlc3RQYXJhbWV0ZXJzLnR5cGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZXF1aXJlZEVycm9yKCd0eXBlJywgJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy50eXBlIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgdW5ibG9ja1VzZXIuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMuaWQgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMuaWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZXF1aXJlZEVycm9yKCdpZCcsICdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVxdWVzdFBhcmFtZXRlcnMuaWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1bmJsb2NrVXNlci4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy52aWRlb1VuYmxvY2tVc2VyUmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy52aWRlb1VuYmxvY2tVc2VyUmVxdWVzdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IoJ3ZpZGVvVW5ibG9ja1VzZXJSZXF1ZXN0JywgJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy52aWRlb1VuYmxvY2tVc2VyUmVxdWVzdCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVuYmxvY2tVc2VyLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJztcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJTdHJlYW0tQXV0aC1UeXBlXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIlN0cmVhbS1BdXRoLVR5cGVcIik7IC8vIHN0cmVhbS1hdXRoLXR5cGUgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1tcImFwaV9rZXlcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiYXBpX2tleVwiKTsgLy8gYXBpX2tleSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiQXV0aG9yaXphdGlvblwiKTsgLy8gSldUIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgcGF0aDogYC92aWRlby9jYWxsL3t0eXBlfS97aWR9L3VuYmxvY2tgLnJlcGxhY2UoYHske1widHlwZVwifX1gLCBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJlcXVlc3RQYXJhbWV0ZXJzLnR5cGUpKSkucmVwbGFjZShgeyR7XCJpZFwifX1gLCBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJlcXVlc3RQYXJhbWV0ZXJzLmlkKSkpLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBib2R5OiByZXF1ZXN0UGFyYW1ldGVycy52aWRlb1VuYmxvY2tVc2VyUmVxdWVzdCxcbiAgICAgICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBKU09OQXBpUmVzcG9uc2UocmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyB0aGUgYmxvY2sgZm9yIGEgdXNlciBvbiBhIGNhbGwuIFRoZSB1c2VyIHdpbGwgYmUgYWJsZSB0byBqb2luIHRoZSBjYWxsIGFnYWluLiAgU2VuZHMgZXZlbnRzOiAtIGNhbGwudW5ibG9ja2VkX3VzZXIgIFJlcXVpcmVkIHBlcm1pc3Npb25zOiAtIEJsb2NrVXNlclxuICAgICAqIFVuYmxvY2tzIHVzZXIgb24gYSBjYWxsXG4gICAgICovXG4gICAgdW5ibG9ja1VzZXIocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy51bmJsb2NrVXNlclJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4geWllbGQgcmVzcG9uc2UudmFsdWUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqICAgU2VuZHMgZXZlbnRzOiAtIGNhbGwudXBkYXRlZCAgUmVxdWlyZWQgcGVybWlzc2lvbnM6IC0gVXBkYXRlQ2FsbFxuICAgICAqIFVwZGF0ZSBDYWxsXG4gICAgICovXG4gICAgdXBkYXRlQ2FsbFJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLnR5cGUgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMudHlwZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IoJ3R5cGUnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLnR5cGUgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1cGRhdGVDYWxsLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLmlkID09PSBudWxsIHx8IHJlcXVlc3RQYXJhbWV0ZXJzLmlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvcignaWQnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLmlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgdXBkYXRlQ2FsbC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy52aWRlb1VwZGF0ZUNhbGxSZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3RQYXJhbWV0ZXJzLnZpZGVvVXBkYXRlQ2FsbFJlcXVlc3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZXF1aXJlZEVycm9yKCd2aWRlb1VwZGF0ZUNhbGxSZXF1ZXN0JywgJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy52aWRlb1VwZGF0ZUNhbGxSZXF1ZXN0IHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgdXBkYXRlQ2FsbC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgY29uc3QgaGVhZGVyUGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1snQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbic7XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiU3RyZWFtLUF1dGgtVHlwZVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJTdHJlYW0tQXV0aC1UeXBlXCIpOyAvLyBzdHJlYW0tYXV0aC10eXBlIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbXCJhcGlfa2V5XCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcImFwaV9rZXlcIik7IC8vIGFwaV9rZXkgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJBdXRob3JpemF0aW9uXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIkF1dGhvcml6YXRpb25cIik7IC8vIEpXVCBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIHBhdGg6IGAvdmlkZW8vY2FsbC97dHlwZX0ve2lkfWAucmVwbGFjZShgeyR7XCJ0eXBlXCJ9fWAsIGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVxdWVzdFBhcmFtZXRlcnMudHlwZSkpKS5yZXBsYWNlKGB7JHtcImlkXCJ9fWAsIGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVxdWVzdFBhcmFtZXRlcnMuaWQpKSksXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBib2R5OiByZXF1ZXN0UGFyYW1ldGVycy52aWRlb1VwZGF0ZUNhbGxSZXF1ZXN0LFxuICAgICAgICAgICAgfSwgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEpTT05BcGlSZXNwb25zZShyZXNwb25zZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiAgIFNlbmRzIGV2ZW50czogLSBjYWxsLnVwZGF0ZWQgIFJlcXVpcmVkIHBlcm1pc3Npb25zOiAtIFVwZGF0ZUNhbGxcbiAgICAgKiBVcGRhdGUgQ2FsbFxuICAgICAqL1xuICAgIHVwZGF0ZUNhbGwocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy51cGRhdGVDYWxsUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCByZXNwb25zZS52YWx1ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogICBTZW5kcyBldmVudHM6IC0gY2FsbC5tZW1iZXJfYWRkZWQgLSBjYWxsLm1lbWJlcl9yZW1vdmVkIC0gY2FsbC5tZW1iZXJfdXBkYXRlZCAgUmVxdWlyZWQgcGVybWlzc2lvbnM6IC0gUmVtb3ZlQ2FsbE1lbWJlciAtIFVwZGF0ZUNhbGxNZW1iZXIgLSBVcGRhdGVDYWxsTWVtYmVyUm9sZVxuICAgICAqIFVwZGF0ZSBDYWxsIE1lbWJlclxuICAgICAqL1xuICAgIHVwZGF0ZUNhbGxNZW1iZXJzUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMudHlwZSA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy50eXBlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvcigndHlwZScsICdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVxdWVzdFBhcmFtZXRlcnMudHlwZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVwZGF0ZUNhbGxNZW1iZXJzLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLmlkID09PSBudWxsIHx8IHJlcXVlc3RQYXJhbWV0ZXJzLmlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvcignaWQnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLmlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgdXBkYXRlQ2FsbE1lbWJlcnMuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMudmlkZW9VcGRhdGVDYWxsTWVtYmVyc1JlcXVlc3QgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMudmlkZW9VcGRhdGVDYWxsTWVtYmVyc1JlcXVlc3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZXF1aXJlZEVycm9yKCd2aWRlb1VwZGF0ZUNhbGxNZW1iZXJzUmVxdWVzdCcsICdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVxdWVzdFBhcmFtZXRlcnMudmlkZW9VcGRhdGVDYWxsTWVtYmVyc1JlcXVlc3Qgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1cGRhdGVDYWxsTWVtYmVycy4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgY29uc3QgaGVhZGVyUGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1snQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbic7XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiU3RyZWFtLUF1dGgtVHlwZVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJTdHJlYW0tQXV0aC1UeXBlXCIpOyAvLyBzdHJlYW0tYXV0aC10eXBlIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbXCJhcGlfa2V5XCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcImFwaV9rZXlcIik7IC8vIGFwaV9rZXkgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJBdXRob3JpemF0aW9uXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIkF1dGhvcml6YXRpb25cIik7IC8vIEpXVCBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIHBhdGg6IGAvdmlkZW8vY2FsbC97dHlwZX0ve2lkfS9tZW1iZXJzYC5yZXBsYWNlKGB7JHtcInR5cGVcIn19YCwgZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhyZXF1ZXN0UGFyYW1ldGVycy50eXBlKSkpLnJlcGxhY2UoYHske1wiaWRcIn19YCwgZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhyZXF1ZXN0UGFyYW1ldGVycy5pZCkpKSxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgYm9keTogcmVxdWVzdFBhcmFtZXRlcnMudmlkZW9VcGRhdGVDYWxsTWVtYmVyc1JlcXVlc3QsXG4gICAgICAgICAgICB9LCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgSlNPTkFwaVJlc3BvbnNlKHJlc3BvbnNlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqICAgU2VuZHMgZXZlbnRzOiAtIGNhbGwubWVtYmVyX2FkZGVkIC0gY2FsbC5tZW1iZXJfcmVtb3ZlZCAtIGNhbGwubWVtYmVyX3VwZGF0ZWQgIFJlcXVpcmVkIHBlcm1pc3Npb25zOiAtIFJlbW92ZUNhbGxNZW1iZXIgLSBVcGRhdGVDYWxsTWVtYmVyIC0gVXBkYXRlQ2FsbE1lbWJlclJvbGVcbiAgICAgKiBVcGRhdGUgQ2FsbCBNZW1iZXJcbiAgICAgKi9cbiAgICB1cGRhdGVDYWxsTWVtYmVycyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnVwZGF0ZUNhbGxNZW1iZXJzUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCByZXNwb25zZS52YWx1ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB1c2VyIHBlcm1pc3Npb25zICBTZW5kcyBldmVudHM6IC0gY2FsbC5wZXJtaXNzaW9uc191cGRhdGVkICBSZXF1aXJlZCBwZXJtaXNzaW9uczogLSBVcGRhdGVDYWxsUGVybWlzc2lvbnNcbiAgICAgKiBVcGRhdGUgdXNlciBwZXJtaXNzaW9uc1xuICAgICAqL1xuICAgIHVwZGF0ZVVzZXJQZXJtaXNzaW9uc1JhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLnR5cGUgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMudHlwZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IoJ3R5cGUnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLnR5cGUgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1cGRhdGVVc2VyUGVybWlzc2lvbnMuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMuaWQgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMuaWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZXF1aXJlZEVycm9yKCdpZCcsICdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVxdWVzdFBhcmFtZXRlcnMuaWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1cGRhdGVVc2VyUGVybWlzc2lvbnMuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMudmlkZW9VcGRhdGVVc2VyUGVybWlzc2lvbnNSZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3RQYXJhbWV0ZXJzLnZpZGVvVXBkYXRlVXNlclBlcm1pc3Npb25zUmVxdWVzdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IoJ3ZpZGVvVXBkYXRlVXNlclBlcm1pc3Npb25zUmVxdWVzdCcsICdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVxdWVzdFBhcmFtZXRlcnMudmlkZW9VcGRhdGVVc2VyUGVybWlzc2lvbnNSZXF1ZXN0IHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgdXBkYXRlVXNlclBlcm1pc3Npb25zLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJztcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJTdHJlYW0tQXV0aC1UeXBlXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIlN0cmVhbS1BdXRoLVR5cGVcIik7IC8vIHN0cmVhbS1hdXRoLXR5cGUgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1tcImFwaV9rZXlcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiYXBpX2tleVwiKTsgLy8gYXBpX2tleSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiQXV0aG9yaXphdGlvblwiKTsgLy8gSldUIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgcGF0aDogYC92aWRlby9jYWxsL3t0eXBlfS97aWR9L3VzZXJfcGVybWlzc2lvbnNgLnJlcGxhY2UoYHske1widHlwZVwifX1gLCBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJlcXVlc3RQYXJhbWV0ZXJzLnR5cGUpKSkucmVwbGFjZShgeyR7XCJpZFwifX1gLCBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJlcXVlc3RQYXJhbWV0ZXJzLmlkKSkpLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBib2R5OiByZXF1ZXN0UGFyYW1ldGVycy52aWRlb1VwZGF0ZVVzZXJQZXJtaXNzaW9uc1JlcXVlc3QsXG4gICAgICAgICAgICB9LCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgSlNPTkFwaVJlc3BvbnNlKHJlc3BvbnNlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdXNlciBwZXJtaXNzaW9ucyAgU2VuZHMgZXZlbnRzOiAtIGNhbGwucGVybWlzc2lvbnNfdXBkYXRlZCAgUmVxdWlyZWQgcGVybWlzc2lvbnM6IC0gVXBkYXRlQ2FsbFBlcm1pc3Npb25zXG4gICAgICogVXBkYXRlIHVzZXIgcGVybWlzc2lvbnNcbiAgICAgKi9cbiAgICB1cGRhdGVVc2VyUGVybWlzc2lvbnMocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy51cGRhdGVVc2VyUGVybWlzc2lvbnNSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIHlpZWxkIHJlc3BvbnNlLnZhbHVlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFc3RhYmxpc2hlcyBXZWJTb2NrZXQgY29ubmVjdGlvbiBmb3IgdXNlciB0byB2aWRlbyAgU2VuZHMgZXZlbnRzOiAtIGNvbm5lY3Rpb24ub2sgLSBoZWFsdGguY2hlY2tcbiAgICAgKiBWaWRlbyBDb25uZWN0IChXZWJTb2NrZXQpXG4gICAgICovXG4gICAgdmlkZW9Db25uZWN0UmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMudmlkZW9XU0F1dGhNZXNzYWdlUmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy52aWRlb1dTQXV0aE1lc3NhZ2VSZXF1ZXN0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvcigndmlkZW9XU0F1dGhNZXNzYWdlUmVxdWVzdCcsICdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVxdWVzdFBhcmFtZXRlcnMudmlkZW9XU0F1dGhNZXNzYWdlUmVxdWVzdCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHZpZGVvQ29ubmVjdC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgY29uc3QgaGVhZGVyUGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1snQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbic7XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiU3RyZWFtLUF1dGgtVHlwZVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJTdHJlYW0tQXV0aC1UeXBlXCIpOyAvLyBzdHJlYW0tYXV0aC10eXBlIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbXCJhcGlfa2V5XCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcImFwaV9rZXlcIik7IC8vIGFwaV9rZXkgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJBdXRob3JpemF0aW9uXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIkF1dGhvcml6YXRpb25cIik7IC8vIEpXVCBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIHBhdGg6IGAvdmlkZW8vY29ubmVjdGAsXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgYm9keTogcmVxdWVzdFBhcmFtZXRlcnMudmlkZW9XU0F1dGhNZXNzYWdlUmVxdWVzdCxcbiAgICAgICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBWb2lkQXBpUmVzcG9uc2UocmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXN0YWJsaXNoZXMgV2ViU29ja2V0IGNvbm5lY3Rpb24gZm9yIHVzZXIgdG8gdmlkZW8gIFNlbmRzIGV2ZW50czogLSBjb25uZWN0aW9uLm9rIC0gaGVhbHRoLmNoZWNrXG4gICAgICogVmlkZW8gQ29ubmVjdCAoV2ViU29ja2V0KVxuICAgICAqL1xuICAgIHZpZGVvQ29ubmVjdChyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgeWllbGQgdGhpcy52aWRlb0Nvbm5lY3RSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGlucyBhIHRyYWNrIGZvciBhbGwgdXNlcnMgaW4gdGhlIGNhbGwuICBSZXF1aXJlZCBwZXJtaXNzaW9uczogLSBQaW5DYWxsVHJhY2tcbiAgICAgKiBQaW5cbiAgICAgKi9cbiAgICB2aWRlb1BpblJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLnR5cGUgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMudHlwZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IoJ3R5cGUnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLnR5cGUgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB2aWRlb1Bpbi4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy5pZCA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy5pZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IoJ2lkJywgJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy5pZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHZpZGVvUGluLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLnZpZGVvUGluUmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy52aWRlb1BpblJlcXVlc3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZXF1aXJlZEVycm9yKCd2aWRlb1BpblJlcXVlc3QnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLnZpZGVvUGluUmVxdWVzdCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHZpZGVvUGluLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJztcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJTdHJlYW0tQXV0aC1UeXBlXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIlN0cmVhbS1BdXRoLVR5cGVcIik7IC8vIHN0cmVhbS1hdXRoLXR5cGUgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1tcImFwaV9rZXlcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiYXBpX2tleVwiKTsgLy8gYXBpX2tleSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiQXV0aG9yaXphdGlvblwiKTsgLy8gSldUIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgcGF0aDogYC92aWRlby9jYWxsL3t0eXBlfS97aWR9L3BpbmAucmVwbGFjZShgeyR7XCJ0eXBlXCJ9fWAsIGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVxdWVzdFBhcmFtZXRlcnMudHlwZSkpKS5yZXBsYWNlKGB7JHtcImlkXCJ9fWAsIGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVxdWVzdFBhcmFtZXRlcnMuaWQpKSksXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVyUGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBxdWVyeTogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIGJvZHk6IHJlcXVlc3RQYXJhbWV0ZXJzLnZpZGVvUGluUmVxdWVzdCxcbiAgICAgICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBKU09OQXBpUmVzcG9uc2UocmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGlucyBhIHRyYWNrIGZvciBhbGwgdXNlcnMgaW4gdGhlIGNhbGwuICBSZXF1aXJlZCBwZXJtaXNzaW9uczogLSBQaW5DYWxsVHJhY2tcbiAgICAgKiBQaW5cbiAgICAgKi9cbiAgICB2aWRlb1BpbihyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnZpZGVvUGluUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCByZXNwb25zZS52YWx1ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVW5waW5zIGEgdHJhY2sgZm9yIGFsbCB1c2VycyBpbiB0aGUgY2FsbC4gIFJlcXVpcmVkIHBlcm1pc3Npb25zOiAtIFBpbkNhbGxUcmFja1xuICAgICAqIFVucGluXG4gICAgICovXG4gICAgdmlkZW9VbnBpblJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLnR5cGUgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMudHlwZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IoJ3R5cGUnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLnR5cGUgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB2aWRlb1VucGluLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLmlkID09PSBudWxsIHx8IHJlcXVlc3RQYXJhbWV0ZXJzLmlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvcignaWQnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLmlkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgdmlkZW9VbnBpbi4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy52aWRlb1VucGluUmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy52aWRlb1VucGluUmVxdWVzdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IoJ3ZpZGVvVW5waW5SZXF1ZXN0JywgJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy52aWRlb1VucGluUmVxdWVzdCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHZpZGVvVW5waW4uJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlclBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbJ0NvbnRlbnQtVHlwZSddID0gJ2FwcGxpY2F0aW9uL2pzb24nO1xuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIlN0cmVhbS1BdXRoLVR5cGVcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiU3RyZWFtLUF1dGgtVHlwZVwiKTsgLy8gc3RyZWFtLWF1dGgtdHlwZSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzW1wiYXBpX2tleVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJhcGlfa2V5XCIpOyAvLyBhcGlfa2V5IGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiQXV0aG9yaXphdGlvblwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJBdXRob3JpemF0aW9uXCIpOyAvLyBKV1QgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICBwYXRoOiBgL3ZpZGVvL2NhbGwve3R5cGV9L3tpZH0vdW5waW5gLnJlcGxhY2UoYHske1widHlwZVwifX1gLCBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJlcXVlc3RQYXJhbWV0ZXJzLnR5cGUpKSkucmVwbGFjZShgeyR7XCJpZFwifX1gLCBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHJlcXVlc3RQYXJhbWV0ZXJzLmlkKSkpLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBib2R5OiByZXF1ZXN0UGFyYW1ldGVycy52aWRlb1VucGluUmVxdWVzdCxcbiAgICAgICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBKU09OQXBpUmVzcG9uc2UocmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVW5waW5zIGEgdHJhY2sgZm9yIGFsbCB1c2VycyBpbiB0aGUgY2FsbC4gIFJlcXVpcmVkIHBlcm1pc3Npb25zOiAtIFBpbkNhbGxUcmFja1xuICAgICAqIFVucGluXG4gICAgICovXG4gICAgdmlkZW9VbnBpbihyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnZpZGVvVW5waW5SYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIHlpZWxkIHJlc3BvbnNlLnZhbHVlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuLyogdHNsaW50OmRpc2FibGUgKi9cbi8qIGVzbGludC1kaXNhYmxlICovXG4vKipcbiAqIFN0cmVhbSBBUElcbiAqIE5vIGRlc2NyaXB0aW9uIHByb3ZpZGVkIChnZW5lcmF0ZWQgYnkgT3BlbmFwaSBHZW5lcmF0b3IgaHR0cHM6Ly9naXRodWIuY29tL29wZW5hcGl0b29scy9vcGVuYXBpLWdlbmVyYXRvcilcbiAqXG4gKiBUaGUgdmVyc2lvbiBvZiB0aGUgT3BlbkFQSSBkb2N1bWVudDogdjEwMC40LjNcbiAqXG4gKlxuICogTk9URTogVGhpcyBjbGFzcyBpcyBhdXRvIGdlbmVyYXRlZCBieSBPcGVuQVBJIEdlbmVyYXRvciAoaHR0cHM6Ly9vcGVuYXBpLWdlbmVyYXRvci50ZWNoKS5cbiAqIGh0dHBzOi8vb3BlbmFwaS1nZW5lcmF0b3IudGVjaFxuICogRG8gbm90IGVkaXQgdGhlIGNsYXNzIG1hbnVhbGx5LlxuICovXG4vKipcbiAqXG4gKi9cbmNsYXNzIFNlcnZlclNpZGVBcGkgZXh0ZW5kcyBCYXNlQVBJIHtcbiAgICAvKipcbiAgICAgKlxuICAgICAqIENoZWNrIEV4dGVybmFsIFN0b3JhZ2VcbiAgICAgKi9cbiAgICBjaGVja0V4dGVybmFsU3RvcmFnZVJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLm5hbWUgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMubmFtZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IoJ25hbWUnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLm5hbWUgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBjaGVja0V4dGVybmFsU3RvcmFnZS4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgY29uc3QgaGVhZGVyUGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIlN0cmVhbS1BdXRoLVR5cGVcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiU3RyZWFtLUF1dGgtVHlwZVwiKTsgLy8gc3RyZWFtLWF1dGgtdHlwZSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzW1wiYXBpX2tleVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJhcGlfa2V5XCIpOyAvLyBhcGlfa2V5IGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiQXV0aG9yaXphdGlvblwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJBdXRob3JpemF0aW9uXCIpOyAvLyBKV1QgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICBwYXRoOiBgL3ZpZGVvL2V4dGVybmFsX3N0b3JhZ2Uve25hbWV9L2NoZWNrYC5yZXBsYWNlKGB7JHtcIm5hbWVcIn19YCwgZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhyZXF1ZXN0UGFyYW1ldGVycy5uYW1lKSkpLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVyUGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBxdWVyeTogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgfSwgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEpTT05BcGlSZXNwb25zZShyZXNwb25zZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKlxuICAgICAqIENoZWNrIEV4dGVybmFsIFN0b3JhZ2VcbiAgICAgKi9cbiAgICBjaGVja0V4dGVybmFsU3RvcmFnZShyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLmNoZWNrRXh0ZXJuYWxTdG9yYWdlUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCByZXNwb25zZS52YWx1ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBDcmVhdGUgQ2FsbCBUeXBlXG4gICAgICovXG4gICAgY3JlYXRlQ2FsbFR5cGVSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy52aWRlb0NyZWF0ZUNhbGxUeXBlUmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy52aWRlb0NyZWF0ZUNhbGxUeXBlUmVxdWVzdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IoJ3ZpZGVvQ3JlYXRlQ2FsbFR5cGVSZXF1ZXN0JywgJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy52aWRlb0NyZWF0ZUNhbGxUeXBlUmVxdWVzdCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGNyZWF0ZUNhbGxUeXBlLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJztcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJTdHJlYW0tQXV0aC1UeXBlXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIlN0cmVhbS1BdXRoLVR5cGVcIik7IC8vIHN0cmVhbS1hdXRoLXR5cGUgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1tcImFwaV9rZXlcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiYXBpX2tleVwiKTsgLy8gYXBpX2tleSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiQXV0aG9yaXphdGlvblwiKTsgLy8gSldUIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgcGF0aDogYC92aWRlby9jYWxsdHlwZXNgLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBib2R5OiByZXF1ZXN0UGFyYW1ldGVycy52aWRlb0NyZWF0ZUNhbGxUeXBlUmVxdWVzdCxcbiAgICAgICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBKU09OQXBpUmVzcG9uc2UocmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBDcmVhdGUgQ2FsbCBUeXBlXG4gICAgICovXG4gICAgY3JlYXRlQ2FsbFR5cGUocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5jcmVhdGVDYWxsVHlwZVJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4geWllbGQgcmVzcG9uc2UudmFsdWUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqXG4gICAgICogRGVsZXRlIENhbGwgVHlwZVxuICAgICAqL1xuICAgIGRlbGV0ZUNhbGxUeXBlUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMubmFtZSA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy5uYW1lID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvcignbmFtZScsICdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVxdWVzdFBhcmFtZXRlcnMubmFtZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGRlbGV0ZUNhbGxUeXBlLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiU3RyZWFtLUF1dGgtVHlwZVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJTdHJlYW0tQXV0aC1UeXBlXCIpOyAvLyBzdHJlYW0tYXV0aC10eXBlIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbXCJhcGlfa2V5XCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcImFwaV9rZXlcIik7IC8vIGFwaV9rZXkgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJBdXRob3JpemF0aW9uXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIkF1dGhvcml6YXRpb25cIik7IC8vIEpXVCBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIHBhdGg6IGAvdmlkZW8vY2FsbHR5cGVzL3tuYW1lfWAucmVwbGFjZShgeyR7XCJuYW1lXCJ9fWAsIGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVxdWVzdFBhcmFtZXRlcnMubmFtZSkpKSxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBKU09OQXBpUmVzcG9uc2UocmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBEZWxldGUgQ2FsbCBUeXBlXG4gICAgICovXG4gICAgZGVsZXRlQ2FsbFR5cGUocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5kZWxldGVDYWxsVHlwZVJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4geWllbGQgcmVzcG9uc2UudmFsdWUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqXG4gICAgICogR2V0IENhbGwgVHlwZVxuICAgICAqL1xuICAgIGdldENhbGxUeXBlUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMubmFtZSA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy5uYW1lID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWlyZWRFcnJvcignbmFtZScsICdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVxdWVzdFBhcmFtZXRlcnMubmFtZSB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIGdldENhbGxUeXBlLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiU3RyZWFtLUF1dGgtVHlwZVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJTdHJlYW0tQXV0aC1UeXBlXCIpOyAvLyBzdHJlYW0tYXV0aC10eXBlIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnNbXCJhcGlfa2V5XCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcImFwaV9rZXlcIik7IC8vIGFwaV9rZXkgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJBdXRob3JpemF0aW9uXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIkF1dGhvcml6YXRpb25cIik7IC8vIEpXVCBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIHBhdGg6IGAvdmlkZW8vY2FsbHR5cGVzL3tuYW1lfWAucmVwbGFjZShgeyR7XCJuYW1lXCJ9fWAsIGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVxdWVzdFBhcmFtZXRlcnMubmFtZSkpKSxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBKU09OQXBpUmVzcG9uc2UocmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBHZXQgQ2FsbCBUeXBlXG4gICAgICovXG4gICAgZ2V0Q2FsbFR5cGUocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5nZXRDYWxsVHlwZVJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4geWllbGQgcmVzcG9uc2UudmFsdWUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqXG4gICAgICogTGlzdCBDYWxsIFR5cGVcbiAgICAgKi9cbiAgICBsaXN0Q2FsbFR5cGVzUmF3KGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgY29uc3QgaGVhZGVyUGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIlN0cmVhbS1BdXRoLVR5cGVcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiU3RyZWFtLUF1dGgtVHlwZVwiKTsgLy8gc3RyZWFtLWF1dGgtdHlwZSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzW1wiYXBpX2tleVwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJhcGlfa2V5XCIpOyAvLyBhcGlfa2V5IGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWd1cmF0aW9uICYmIHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzW1wiQXV0aG9yaXphdGlvblwiXSA9IHRoaXMuY29uZmlndXJhdGlvbi5hcGlLZXkoXCJBdXRob3JpemF0aW9uXCIpOyAvLyBKV1QgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICBwYXRoOiBgL3ZpZGVvL2NhbGx0eXBlc2AsXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICB9LCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgSlNPTkFwaVJlc3BvbnNlKHJlc3BvbnNlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqXG4gICAgICogTGlzdCBDYWxsIFR5cGVcbiAgICAgKi9cbiAgICBsaXN0Q2FsbFR5cGVzKGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5saXN0Q2FsbFR5cGVzUmF3KGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIHlpZWxkIHJlc3BvbnNlLnZhbHVlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFVwZGF0ZSBDYWxsIFR5cGVcbiAgICAgKi9cbiAgICB1cGRhdGVDYWxsVHlwZVJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLm5hbWUgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMubmFtZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IoJ25hbWUnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLm5hbWUgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1cGRhdGVDYWxsVHlwZS4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFyYW1ldGVycy52aWRlb1VwZGF0ZUNhbGxUeXBlUmVxdWVzdCA9PT0gbnVsbCB8fCByZXF1ZXN0UGFyYW1ldGVycy52aWRlb1VwZGF0ZUNhbGxUeXBlUmVxdWVzdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IoJ3ZpZGVvVXBkYXRlQ2FsbFR5cGVSZXF1ZXN0JywgJ1JlcXVpcmVkIHBhcmFtZXRlciByZXF1ZXN0UGFyYW1ldGVycy52aWRlb1VwZGF0ZUNhbGxUeXBlUmVxdWVzdCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIHVwZGF0ZUNhbGxUeXBlLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJztcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJTdHJlYW0tQXV0aC1UeXBlXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIlN0cmVhbS1BdXRoLVR5cGVcIik7IC8vIHN0cmVhbS1hdXRoLXR5cGUgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1tcImFwaV9rZXlcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiYXBpX2tleVwiKTsgLy8gYXBpX2tleSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiQXV0aG9yaXphdGlvblwiKTsgLy8gSldUIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgcGF0aDogYC92aWRlby9jYWxsdHlwZXMve25hbWV9YC5yZXBsYWNlKGB7JHtcIm5hbWVcIn19YCwgZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhyZXF1ZXN0UGFyYW1ldGVycy5uYW1lKSkpLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVyUGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBxdWVyeTogcXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIGJvZHk6IHJlcXVlc3RQYXJhbWV0ZXJzLnZpZGVvVXBkYXRlQ2FsbFR5cGVSZXF1ZXN0LFxuICAgICAgICAgICAgfSwgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEpTT05BcGlSZXNwb25zZShyZXNwb25zZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFVwZGF0ZSBDYWxsIFR5cGVcbiAgICAgKi9cbiAgICB1cGRhdGVDYWxsVHlwZShyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnVwZGF0ZUNhbGxUeXBlUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCByZXNwb25zZS52YWx1ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBVcGRhdGUgRXh0ZXJuYWwgU3RvcmFnZVxuICAgICAqL1xuICAgIHVwZGF0ZUV4dGVybmFsU3RvcmFnZVJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLm5hbWUgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMubmFtZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IoJ25hbWUnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLm5hbWUgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1cGRhdGVFeHRlcm5hbFN0b3JhZ2UuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMudmlkZW9VcGRhdGVFeHRlcm5hbFN0b3JhZ2VSZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3RQYXJhbWV0ZXJzLnZpZGVvVXBkYXRlRXh0ZXJuYWxTdG9yYWdlUmVxdWVzdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IoJ3ZpZGVvVXBkYXRlRXh0ZXJuYWxTdG9yYWdlUmVxdWVzdCcsICdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVxdWVzdFBhcmFtZXRlcnMudmlkZW9VcGRhdGVFeHRlcm5hbFN0b3JhZ2VSZXF1ZXN0IHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgdXBkYXRlRXh0ZXJuYWxTdG9yYWdlLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJztcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJTdHJlYW0tQXV0aC1UeXBlXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIlN0cmVhbS1BdXRoLVR5cGVcIik7IC8vIHN0cmVhbS1hdXRoLXR5cGUgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1tcImFwaV9rZXlcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiYXBpX2tleVwiKTsgLy8gYXBpX2tleSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiQXV0aG9yaXphdGlvblwiKTsgLy8gSldUIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgcGF0aDogYC92aWRlby9leHRlcm5hbF9zdG9yYWdlL3tuYW1lfWAucmVwbGFjZShgeyR7XCJuYW1lXCJ9fWAsIGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVxdWVzdFBhcmFtZXRlcnMubmFtZSkpKSxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQVVQnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBib2R5OiByZXF1ZXN0UGFyYW1ldGVycy52aWRlb1VwZGF0ZUV4dGVybmFsU3RvcmFnZVJlcXVlc3QsXG4gICAgICAgICAgICB9LCBpbml0T3ZlcnJpZGVzKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgSlNPTkFwaVJlc3BvbnNlKHJlc3BvbnNlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqXG4gICAgICogVXBkYXRlIEV4dGVybmFsIFN0b3JhZ2VcbiAgICAgKi9cbiAgICB1cGRhdGVFeHRlcm5hbFN0b3JhZ2UocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy51cGRhdGVFeHRlcm5hbFN0b3JhZ2VSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIHlpZWxkIHJlc3BvbnNlLnZhbHVlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuLyogdHNsaW50OmRpc2FibGUgKi9cbi8qIGVzbGludC1kaXNhYmxlICovXG4vKipcbiAqIFN0cmVhbSBBUElcbiAqIE5vIGRlc2NyaXB0aW9uIHByb3ZpZGVkIChnZW5lcmF0ZWQgYnkgT3BlbmFwaSBHZW5lcmF0b3IgaHR0cHM6Ly9naXRodWIuY29tL29wZW5hcGl0b29scy9vcGVuYXBpLWdlbmVyYXRvcilcbiAqXG4gKiBUaGUgdmVyc2lvbiBvZiB0aGUgT3BlbkFQSSBkb2N1bWVudDogdjEwMC40LjNcbiAqXG4gKlxuICogTk9URTogVGhpcyBjbGFzcyBpcyBhdXRvIGdlbmVyYXRlZCBieSBPcGVuQVBJIEdlbmVyYXRvciAoaHR0cHM6Ly9vcGVuYXBpLWdlbmVyYXRvci50ZWNoKS5cbiAqIGh0dHBzOi8vb3BlbmFwaS1nZW5lcmF0b3IudGVjaFxuICogRG8gbm90IGVkaXQgdGhlIGNsYXNzIG1hbnVhbGx5LlxuICovXG4vKipcbiAqXG4gKi9cbmNsYXNzIFNldHRpbmdzQXBpIGV4dGVuZHMgQmFzZUFQSSB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBuZXcgZXh0ZXJuYWwgc3RvcmFnZVxuICAgICAqIENyZWF0ZSBleHRlcm5hbCBzdG9yYWdlXG4gICAgICovXG4gICAgY3JlYXRlRXh0ZXJuYWxTdG9yYWdlUmF3KHJlcXVlc3RQYXJhbWV0ZXJzLCBpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAocmVxdWVzdFBhcmFtZXRlcnMudmlkZW9DcmVhdGVFeHRlcm5hbFN0b3JhZ2VSZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3RQYXJhbWV0ZXJzLnZpZGVvQ3JlYXRlRXh0ZXJuYWxTdG9yYWdlUmVxdWVzdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IoJ3ZpZGVvQ3JlYXRlRXh0ZXJuYWxTdG9yYWdlUmVxdWVzdCcsICdSZXF1aXJlZCBwYXJhbWV0ZXIgcmVxdWVzdFBhcmFtZXRlcnMudmlkZW9DcmVhdGVFeHRlcm5hbFN0b3JhZ2VSZXF1ZXN0IHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgY3JlYXRlRXh0ZXJuYWxTdG9yYWdlLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJQYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBoZWFkZXJQYXJhbWV0ZXJzWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJztcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJTdHJlYW0tQXV0aC1UeXBlXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIlN0cmVhbS1BdXRoLVR5cGVcIik7IC8vIHN0cmVhbS1hdXRoLXR5cGUgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1tcImFwaV9rZXlcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiYXBpX2tleVwiKTsgLy8gYXBpX2tleSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiQXV0aG9yaXphdGlvblwiKTsgLy8gSldUIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgcGF0aDogYC92aWRlby9leHRlcm5hbF9zdG9yYWdlYCxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeVBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgYm9keTogcmVxdWVzdFBhcmFtZXRlcnMudmlkZW9DcmVhdGVFeHRlcm5hbFN0b3JhZ2VSZXF1ZXN0LFxuICAgICAgICAgICAgfSwgaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEpTT05BcGlSZXNwb25zZShyZXNwb25zZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIG5ldyBleHRlcm5hbCBzdG9yYWdlXG4gICAgICogQ3JlYXRlIGV4dGVybmFsIHN0b3JhZ2VcbiAgICAgKi9cbiAgICBjcmVhdGVFeHRlcm5hbFN0b3JhZ2UocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5jcmVhdGVFeHRlcm5hbFN0b3JhZ2VSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIHlpZWxkIHJlc3BvbnNlLnZhbHVlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWxldGVzIGV4dGVybmFsIHN0b3JhZ2VcbiAgICAgKiBEZWxldGUgZXh0ZXJuYWwgc3RvcmFnZVxuICAgICAqL1xuICAgIGRlbGV0ZUV4dGVybmFsU3RvcmFnZVJhdyhyZXF1ZXN0UGFyYW1ldGVycywgaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKHJlcXVlc3RQYXJhbWV0ZXJzLm5hbWUgPT09IG51bGwgfHwgcmVxdWVzdFBhcmFtZXRlcnMubmFtZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IoJ25hbWUnLCAnUmVxdWlyZWQgcGFyYW1ldGVyIHJlcXVlc3RQYXJhbWV0ZXJzLm5hbWUgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBkZWxldGVFeHRlcm5hbFN0b3JhZ2UuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlclBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJTdHJlYW0tQXV0aC1UeXBlXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIlN0cmVhbS1BdXRoLVR5cGVcIik7IC8vIHN0cmVhbS1hdXRoLXR5cGUgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1tcImFwaV9rZXlcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiYXBpX2tleVwiKTsgLy8gYXBpX2tleSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiQXV0aG9yaXphdGlvblwiKTsgLy8gSldUIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgcGF0aDogYC92aWRlby9leHRlcm5hbF9zdG9yYWdlL3tuYW1lfWAucmVwbGFjZShgeyR7XCJuYW1lXCJ9fWAsIGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcocmVxdWVzdFBhcmFtZXRlcnMubmFtZSkpKSxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBKU09OQXBpUmVzcG9uc2UocmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVsZXRlcyBleHRlcm5hbCBzdG9yYWdlXG4gICAgICogRGVsZXRlIGV4dGVybmFsIHN0b3JhZ2VcbiAgICAgKi9cbiAgICBkZWxldGVFeHRlcm5hbFN0b3JhZ2UocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy5kZWxldGVFeHRlcm5hbFN0b3JhZ2VSYXcocmVxdWVzdFBhcmFtZXRlcnMsIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIHlpZWxkIHJlc3BvbnNlLnZhbHVlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMaXN0cyBleHRlcm5hbCBzdG9yYWdlXG4gICAgICogTGlzdCBleHRlcm5hbCBzdG9yYWdlXG4gICAgICovXG4gICAgbGlzdEV4dGVybmFsU3RvcmFnZVJhdyhpbml0T3ZlcnJpZGVzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlclBhcmFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIGhlYWRlclBhcmFtZXRlcnNbXCJTdHJlYW0tQXV0aC1UeXBlXCJdID0gdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleShcIlN0cmVhbS1BdXRoLVR5cGVcIik7IC8vIHN0cmVhbS1hdXRoLXR5cGUgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24gJiYgdGhpcy5jb25maWd1cmF0aW9uLmFwaUtleSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVyc1tcImFwaV9rZXlcIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiYXBpX2tleVwiKTsgLy8gYXBpX2tleSBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlndXJhdGlvbiAmJiB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyUGFyYW1ldGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSB0aGlzLmNvbmZpZ3VyYXRpb24uYXBpS2V5KFwiQXV0aG9yaXphdGlvblwiKTsgLy8gSldUIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgcGF0aDogYC92aWRlby9leHRlcm5hbF9zdG9yYWdlYCxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlclBhcmFtZXRlcnMsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgICAgICAgIH0sIGluaXRPdmVycmlkZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBKU09OQXBpUmVzcG9uc2UocmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTGlzdHMgZXh0ZXJuYWwgc3RvcmFnZVxuICAgICAqIExpc3QgZXh0ZXJuYWwgc3RvcmFnZVxuICAgICAqL1xuICAgIGxpc3RFeHRlcm5hbFN0b3JhZ2UoaW5pdE92ZXJyaWRlcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLmxpc3RFeHRlcm5hbFN0b3JhZ2VSYXcoaW5pdE92ZXJyaWRlcyk7XG4gICAgICAgICAgICByZXR1cm4geWllbGQgcmVzcG9uc2UudmFsdWUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5jbGFzcyBTdHJlYW1DYWxsIHtcbiAgICBjb25zdHJ1Y3RvcihzdHJlYW1DbGllbnQsIHR5cGUsIGlkKSB7XG4gICAgICAgIHRoaXMuc3RyZWFtQ2xpZW50ID0gc3RyZWFtQ2xpZW50O1xuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgICAgICB0aGlzLmlkID0gaWQ7XG4gICAgICAgIHRoaXMuYmxvY2tVc2VyID0gKHZpZGVvQmxvY2tVc2VyUmVxdWVzdCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXBpQ2xpZW50LmJsb2NrVXNlcihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHRoaXMuYmFzZVJlcXVlc3QpLCB7IHZpZGVvQmxvY2tVc2VyUmVxdWVzdCB9KSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZW5kQ2FsbCA9ICgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFwaUNsaWVudC5lbmRDYWxsKE9iamVjdC5hc3NpZ24oe30sIHRoaXMuYmFzZVJlcXVlc3QpKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5nZXQgPSAocmVxdWVzdCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXBpQ2xpZW50LmdldENhbGwoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCAocmVxdWVzdCAhPT0gbnVsbCAmJiByZXF1ZXN0ICE9PSB2b2lkIDAgPyByZXF1ZXN0IDoge30pKSwgdGhpcy5iYXNlUmVxdWVzdCkpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmdldE9yQ3JlYXRlID0gKHZpZGVvR2V0T3JDcmVhdGVDYWxsUmVxdWVzdCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXBpQ2xpZW50LmdldE9yQ3JlYXRlQ2FsbChPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHRoaXMuYmFzZVJlcXVlc3QpLCB7IHZpZGVvR2V0T3JDcmVhdGVDYWxsUmVxdWVzdDogdmlkZW9HZXRPckNyZWF0ZUNhbGxSZXF1ZXN0ICE9PSBudWxsICYmIHZpZGVvR2V0T3JDcmVhdGVDYWxsUmVxdWVzdCAhPT0gdm9pZCAwID8gdmlkZW9HZXRPckNyZWF0ZUNhbGxSZXF1ZXN0IDoge30gfSkpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmNyZWF0ZSA9IChnZXRPckNyZWF0ZUNhbGxSZXF1ZXN0KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRPckNyZWF0ZShnZXRPckNyZWF0ZUNhbGxSZXF1ZXN0KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5nb0xpdmUgPSAodmlkZW9Hb0xpdmVSZXF1ZXN0KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hcGlDbGllbnQuZ29MaXZlKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5iYXNlUmVxdWVzdCksIHsgdmlkZW9Hb0xpdmVSZXF1ZXN0OiB2aWRlb0dvTGl2ZVJlcXVlc3QgIT09IG51bGwgJiYgdmlkZW9Hb0xpdmVSZXF1ZXN0ICE9PSB2b2lkIDAgPyB2aWRlb0dvTGl2ZVJlcXVlc3QgOiB7fSB9KSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMubGlzdFJlY29yZGluZ3MgPSAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hcGlDbGllbnQubGlzdFJlY29yZGluZ3MoT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5iYXNlUmVxdWVzdCkpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm11dGVVc2VycyA9ICh2aWRlb011dGVVc2Vyc1JlcXVlc3QpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFwaUNsaWVudC5tdXRlVXNlcnMoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCB0aGlzLmJhc2VSZXF1ZXN0KSwgeyB2aWRlb011dGVVc2Vyc1JlcXVlc3QgfSkpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnF1ZXJ5TWVtYmVycyA9IChyZXF1ZXN0KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hcGlDbGllbnQucXVlcnlNZW1iZXJzKHtcbiAgICAgICAgICAgICAgICB2aWRlb1F1ZXJ5TWVtYmVyc1JlcXVlc3Q6IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgKHJlcXVlc3QgIT09IG51bGwgJiYgcmVxdWVzdCAhPT0gdm9pZCAwID8gcmVxdWVzdCA6IHt9KSksIHRoaXMuYmFzZVJlcXVlc3QpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc2VuZEN1c3RvbUV2ZW50ID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hcGlDbGllbnQuc2VuZEV2ZW50KE9iamVjdC5hc3NpZ24oeyB2aWRlb1NlbmRFdmVudFJlcXVlc3Q6IHsgY3VzdG9tOiBldmVudCB9IH0sIHRoaXMuYmFzZVJlcXVlc3QpKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zdGFydEhMU0Jyb2FkY2FzdGluZyA9ICgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFwaUNsaWVudC5zdGFydEhMU0Jyb2FkY2FzdGluZyhPYmplY3QuYXNzaWduKHt9LCB0aGlzLmJhc2VSZXF1ZXN0KSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc3RhcnRSZWNvcmRpbmcgPSAocmVxdWVzdCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXBpQ2xpZW50LnN0YXJ0UmVjb3JkaW5nKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5iYXNlUmVxdWVzdCksIHsgdmlkZW9TdGFydFJlY29yZGluZ1JlcXVlc3Q6IHJlcXVlc3QgIT09IG51bGwgJiYgcmVxdWVzdCAhPT0gdm9pZCAwID8gcmVxdWVzdCA6IHt9IH0pKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zdGFydFRyYW5zY3JpcHRpb24gPSAodmlkZW9TdGFydFRyYW5zY3JpcHRpb25SZXF1ZXN0ID0ge30pID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFwaUNsaWVudC5zdGFydFRyYW5zY3JpcHRpb24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCB0aGlzLmJhc2VSZXF1ZXN0KSwgeyB2aWRlb1N0YXJ0VHJhbnNjcmlwdGlvblJlcXVlc3QgfSkpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnN0b3BITFNCcm9hZGNhc3RpbmcgPSAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hcGlDbGllbnQuc3RvcEhMU0Jyb2FkY2FzdGluZyhPYmplY3QuYXNzaWduKHt9LCB0aGlzLmJhc2VSZXF1ZXN0KSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc3RvcExpdmUgPSAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hcGlDbGllbnQuc3RvcExpdmUoT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5iYXNlUmVxdWVzdCkpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnN0b3BSZWNvcmRpbmcgPSAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hcGlDbGllbnQuc3RvcFJlY29yZGluZyhPYmplY3QuYXNzaWduKHt9LCB0aGlzLmJhc2VSZXF1ZXN0KSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc3RvcFRyYW5zY3JpcHRpb24gPSAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hcGlDbGllbnQuc3RvcFRyYW5zY3JpcHRpb24oT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5iYXNlUmVxdWVzdCkpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnVuYmxvY2tVc2VyID0gKHZpZGVvVW5ibG9ja1VzZXJSZXF1ZXN0KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hcGlDbGllbnQudW5ibG9ja1VzZXIoT2JqZWN0LmFzc2lnbih7IHZpZGVvVW5ibG9ja1VzZXJSZXF1ZXN0IH0sIHRoaXMuYmFzZVJlcXVlc3QpKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy51cGRhdGUgPSAodmlkZW9VcGRhdGVDYWxsUmVxdWVzdCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXBpQ2xpZW50LnVwZGF0ZUNhbGwoT2JqZWN0LmFzc2lnbih7IHZpZGVvVXBkYXRlQ2FsbFJlcXVlc3QgfSwgdGhpcy5iYXNlUmVxdWVzdCkpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnVwZGF0ZUNhbGxNZW1iZXJzID0gKHZpZGVvVXBkYXRlQ2FsbE1lbWJlcnNSZXF1ZXN0KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hcGlDbGllbnQudXBkYXRlQ2FsbE1lbWJlcnMoT2JqZWN0LmFzc2lnbih7IHZpZGVvVXBkYXRlQ2FsbE1lbWJlcnNSZXF1ZXN0IH0sIHRoaXMuYmFzZVJlcXVlc3QpKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy51cGRhdGVVc2VyUGVybWlzc2lvbnMgPSAodmlkZW9VcGRhdGVVc2VyUGVybWlzc2lvbnNSZXF1ZXN0KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hcGlDbGllbnQudXBkYXRlVXNlclBlcm1pc3Npb25zKE9iamVjdC5hc3NpZ24oeyB2aWRlb1VwZGF0ZVVzZXJQZXJtaXNzaW9uc1JlcXVlc3QgfSwgdGhpcy5iYXNlUmVxdWVzdCkpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnBpblZpZGVvID0gKHZpZGVvUGluUmVxdWVzdCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXBpQ2xpZW50LnZpZGVvUGluKE9iamVjdC5hc3NpZ24oeyB2aWRlb1BpblJlcXVlc3QgfSwgdGhpcy5iYXNlUmVxdWVzdCkpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnVucGluVmlkZW8gPSAodmlkZW9VbnBpblJlcXVlc3QpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFwaUNsaWVudC52aWRlb1VucGluKE9iamVjdC5hc3NpZ24oeyB2aWRlb1VucGluUmVxdWVzdCB9LCB0aGlzLmJhc2VSZXF1ZXN0KSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuYmFzZVJlcXVlc3QgPSB7IGlkOiB0aGlzLmlkLCB0eXBlOiB0aGlzLnR5cGUgfTtcbiAgICAgICAgY29uc3QgY29uZmlndXJhdGlvbiA9IHRoaXMuc3RyZWFtQ2xpZW50LmdldENvbmZpZ3VyYXRpb24oJ3ZpZGVvJyk7XG4gICAgICAgIHRoaXMuYXBpQ2xpZW50ID0gbmV3IERlZmF1bHRBcGkoY29uZmlndXJhdGlvbik7XG4gICAgfVxufVxuXG5jbGFzcyBTdHJlYW1WaWRlb0NsaWVudCB7XG4gICAgY29uc3RydWN0b3Ioc3RyZWFtQ2xpZW50KSB7XG4gICAgICAgIHRoaXMuc3RyZWFtQ2xpZW50ID0gc3RyZWFtQ2xpZW50O1xuICAgICAgICB0aGlzLmNhbGwgPSAodHlwZSwgaWQpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgU3RyZWFtQ2FsbCh0aGlzLnN0cmVhbUNsaWVudCwgdHlwZSwgaWQpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnF1ZXJ5Q2FsbHMgPSAocmVxdWVzdCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXBpQ2xpZW50LnF1ZXJ5Q2FsbHMoe1xuICAgICAgICAgICAgICAgIHZpZGVvUXVlcnlDYWxsc1JlcXVlc3Q6IHJlcXVlc3QgIT09IG51bGwgJiYgcmVxdWVzdCAhPT0gdm9pZCAwID8gcmVxdWVzdCA6IHt9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuY3JlYXRlQ2FsbFR5cGUgPSAodmlkZW9DcmVhdGVDYWxsVHlwZVJlcXVlc3QpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZpZGVvU2VydmVyU2lkZUFwaUNsaWVudC5jcmVhdGVDYWxsVHlwZSh7XG4gICAgICAgICAgICAgICAgdmlkZW9DcmVhdGVDYWxsVHlwZVJlcXVlc3QsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5kZWxldGVDYWxsVHlwZSA9IChyZXF1ZXN0KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy52aWRlb1NlcnZlclNpZGVBcGlDbGllbnQuZGVsZXRlQ2FsbFR5cGUocmVxdWVzdCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZ2V0Q2FsbFR5cGUgPSAocmVxdWVzdCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmlkZW9TZXJ2ZXJTaWRlQXBpQ2xpZW50LmdldENhbGxUeXBlKHJlcXVlc3QpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmxpc3RDYWxsVHlwZXMgPSAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy52aWRlb1NlcnZlclNpZGVBcGlDbGllbnQubGlzdENhbGxUeXBlcygpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnVwZGF0ZUNhbGxUeXBlID0gKG5hbWUsIHZpZGVvVXBkYXRlQ2FsbFR5cGVSZXF1ZXN0KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy52aWRlb1NlcnZlclNpZGVBcGlDbGllbnQudXBkYXRlQ2FsbFR5cGUoe1xuICAgICAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICAgICAgdmlkZW9VcGRhdGVDYWxsVHlwZVJlcXVlc3QsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5saXN0RXh0ZXJuYWxTdG9yYWdlcyA9ICgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNldHRpbmdzQXBpLmxpc3RFeHRlcm5hbFN0b3JhZ2UoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5jcmVhdGVFeHRlcm5hbFN0b3JhZ2UgPSAodmlkZW9DcmVhdGVFeHRlcm5hbFN0b3JhZ2VSZXF1ZXN0KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZXR0aW5nc0FwaS5jcmVhdGVFeHRlcm5hbFN0b3JhZ2Uoe1xuICAgICAgICAgICAgICAgIHZpZGVvQ3JlYXRlRXh0ZXJuYWxTdG9yYWdlUmVxdWVzdCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmRlbGV0ZUV4dGVybmFsU3RvcmFnZSA9IChyZXF1ZXN0KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZXR0aW5nc0FwaS5kZWxldGVFeHRlcm5hbFN0b3JhZ2UocmVxdWVzdCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudXBkYXRlRXh0ZXJuYWxTdG9yYWdlID0gKG5hbWUsIHZpZGVvVXBkYXRlRXh0ZXJuYWxTdG9yYWdlUmVxdWVzdCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmlkZW9TZXJ2ZXJTaWRlQXBpQ2xpZW50LnVwZGF0ZUV4dGVybmFsU3RvcmFnZSh7XG4gICAgICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgICAgICB2aWRlb1VwZGF0ZUV4dGVybmFsU3RvcmFnZVJlcXVlc3QsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5jaGVja0V4dGVybmFsU3RvcmFnZSA9IChyZXF1ZXN0KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy52aWRlb1NlcnZlclNpZGVBcGlDbGllbnQuY2hlY2tFeHRlcm5hbFN0b3JhZ2UocmVxdWVzdCk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGNvbmZpZ3VyYXRpb24gPSB0aGlzLnN0cmVhbUNsaWVudC5nZXRDb25maWd1cmF0aW9uKCd2aWRlbycpO1xuICAgICAgICB0aGlzLmFwaUNsaWVudCA9IG5ldyBEZWZhdWx0QXBpKGNvbmZpZ3VyYXRpb24pO1xuICAgICAgICB0aGlzLnNldHRpbmdzQXBpID0gbmV3IFNldHRpbmdzQXBpKGNvbmZpZ3VyYXRpb24pO1xuICAgICAgICB0aGlzLnZpZGVvU2VydmVyU2lkZUFwaUNsaWVudCA9IG5ldyBTZXJ2ZXJTaWRlQXBpKGNvbmZpZ3VyYXRpb24pO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gSldUVXNlclRva2VuKGFwaVNlY3JldCwgdXNlcklkLCBleHRyYURhdGEgPSB7fSwgand0T3B0aW9ucyA9IHt9KSB7XG4gICAgaWYgKHR5cGVvZiB1c2VySWQgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3VzZXJJZCBzaG91bGQgYmUgYSBzdHJpbmcnKTtcbiAgICB9XG4gICAgY29uc3QgcGF5bG9hZCA9IE9iamVjdC5hc3NpZ24oeyB1c2VyX2lkOiB1c2VySWQgfSwgZXh0cmFEYXRhKTtcbiAgICAvLyBtYWtlIHN1cmUgd2UgcmV0dXJuIGEgY2xlYXIgZXJyb3Igd2hlbiBqd3QgaXMgc2hpbW1lZCAoaWUuIGJyb3dzZXIgYnVpbGQpXG4gICAgaWYgKGp3dCA9PSBudWxsIHx8IGp3dC5zaWduID09IG51bGwpIHtcbiAgICAgICAgdGhyb3cgRXJyb3IoYFVuYWJsZSB0byBmaW5kIGp3dCBjcnlwdG8sIGlmIHlvdSBhcmUgZ2V0dGluZyB0aGlzIGVycm9yIGlzIHByb2JhYmx5IGJlY2F1c2UgeW91IGFyZSB0cnlpbmcgdG8gZ2VuZXJhdGUgdG9rZW5zIG9uIGJyb3dzZXIgb3IgUmVhY3QgTmF0aXZlIChvciBvdGhlciBlbnZpcm9ubWVudCB3aGVyZSBjcnlwdG8gZnVuY3Rpb25zIGFyZSBub3QgYXZhaWxhYmxlKS4gUGxlYXNlIE5vdGU6IHRva2VuIHNob3VsZCBvbmx5IGJlIGdlbmVyYXRlZCBzZXJ2ZXItc2lkZS5gKTtcbiAgICB9XG4gICAgY29uc3Qgb3B0cyA9IE9iamVjdC5hc3NpZ24oeyBhbGdvcml0aG06ICdIUzI1NicsIG5vVGltZXN0YW1wOiB0cnVlIH0sIGp3dE9wdGlvbnMpO1xuICAgIGlmIChwYXlsb2FkLmlhdCkge1xuICAgICAgICBvcHRzLm5vVGltZXN0YW1wID0gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiBqd3Quc2lnbihwYXlsb2FkLCBhcGlTZWNyZXQsIG9wdHMpO1xufVxuZnVuY3Rpb24gSldUU2VydmVyVG9rZW4oYXBpU2VjcmV0LCBqd3RPcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBwYXlsb2FkID0ge1xuICAgICAgICBzZXJ2ZXI6IHRydWUsXG4gICAgfTtcbiAgICBjb25zdCBvcHRzID0gT2JqZWN0LmFzc2lnbih7IGFsZ29yaXRobTogJ0hTMjU2Jywgbm9UaW1lc3RhbXA6IHRydWUgfSwgand0T3B0aW9ucyk7XG4gICAgcmV0dXJuIGp3dC5zaWduKHBheWxvYWQsIGFwaVNlY3JldCwgb3B0cyk7XG59XG5cbmNsYXNzIFN0cmVhbUNsaWVudCB7XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYXBpS2V5XG4gICAgICogQHBhcmFtIHNlY3JldFxuICAgICAqIEBwYXJhbSBjb25maWcgY2FuIGJlIGEgc3RyaW5nLCB3aGljaCB3aWxsIGJlIGludGVycHJldGVkIGFzIGJhc2UgcGF0aCAoZGVwcmVjYXRlZCksIG9yIGEgY29uZmlnIG9iamVjdFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGFwaUtleSwgc2VjcmV0LCBjb25maWcpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICB0aGlzLmFwaUtleSA9IGFwaUtleTtcbiAgICAgICAgdGhpcy5zZWNyZXQgPSBzZWNyZXQ7XG4gICAgICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSB7fTtcbiAgICAgICAgdGhpcy5jcmVhdGVEZXZpY2UgPSAoY3JlYXRlRGV2aWNlUmVxdWVzdCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGV2aWNlc0FwaS5jcmVhdGVEZXZpY2UoeyBjcmVhdGVEZXZpY2VSZXF1ZXN0IH0pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmRlbGV0ZURldmljZSA9IChyZXF1ZXN0UGFyYW1ldGVycykgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGV2aWNlc0FwaS5kZWxldGVEZXZpY2UocmVxdWVzdFBhcmFtZXRlcnMpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmxpc3REZXZpY2VzID0gKHJlcXVlc3RQYXJhbWV0ZXJzKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kZXZpY2VzQXBpLmxpc3REZXZpY2VzKHJlcXVlc3RQYXJhbWV0ZXJzKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5saXN0UHVzaFByb3ZpZGVycyA9ICgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnB1c2hBcGkubGlzdFB1c2hQcm92aWRlcnMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5kZWxldGVQdXNoUHJvdmlkZXIgPSAocmVxdWVzdCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHVzaEFwaS5kZWxldGVQdXNoUHJvdmlkZXIocmVxdWVzdCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudXBzZXJ0UHVzaFByb3ZpZGVyID0gKHJlcXVlc3QpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNlcnZlcnNpZGVBcGkudXBzZXJ0UHVzaFByb3ZpZGVyKHtcbiAgICAgICAgICAgICAgICB1cHNlcnRQdXNoUHJvdmlkZXJSZXF1ZXN0OiB7IHB1c2hfcHJvdmlkZXI6IHJlcXVlc3QgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmNoZWNrUHVzaCA9IChjaGVja1B1c2hSZXF1ZXN0KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50ZXN0aW5nQXBpLmNoZWNrUHVzaCh7IGNoZWNrUHVzaFJlcXVlc3QgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuY3JlYXRlR3Vlc3QgPSAoZ3Vlc3RSZXF1ZXN0KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBndWVzdFJlcXVlc3QudXNlciA9IHRoaXMubWFwQ3VzdG9tRGF0YUJlZm9yZVNlbmQoZ3Vlc3RSZXF1ZXN0LnVzZXIpO1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnVzZXJzQXBpLmNyZWF0ZUd1ZXN0KHsgZ3Vlc3RSZXF1ZXN0IH0pO1xuICAgICAgICAgICAgcmVzcG9uc2UudXNlciA9IHRoaXMubWFwQ3VzdG9tRGF0YUFmdGVyUmVjZWl2ZShyZXNwb25zZS51c2VyKTtcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuYmFuVXNlciA9IChiYW5SZXF1ZXN0KSA9PiB7XG4gICAgICAgICAgICBiYW5SZXF1ZXN0LnVzZXIgPSB0aGlzLm1hcEN1c3RvbURhdGFCZWZvcmVTZW5kKGJhblJlcXVlc3QudXNlcik7XG4gICAgICAgICAgICBiYW5SZXF1ZXN0LmJhbm5lZF9ieSA9IHRoaXMubWFwQ3VzdG9tRGF0YUJlZm9yZVNlbmQoYmFuUmVxdWVzdC5iYW5uZWRfYnkpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudXNlcnNBcGkuYmFuKHsgYmFuUmVxdWVzdCB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5kZWFjdGl2YXRlVXNlciA9IChkZWFjdGl2YXRlVXNlclJlcXVlc3QpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy51c2Vyc0FwaS5kZWFjdGl2YXRlVXNlcih7XG4gICAgICAgICAgICAgICAgZGVhY3RpdmF0ZVVzZXJSZXF1ZXN0LFxuICAgICAgICAgICAgICAgIHVzZXJJZDogZGVhY3RpdmF0ZVVzZXJSZXF1ZXN0LnVzZXJfaWQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJlc3BvbnNlLnVzZXIgPSB0aGlzLm1hcEN1c3RvbURhdGFBZnRlclJlY2VpdmUocmVzcG9uc2UudXNlcik7XG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmRlYWN0aXZhdGVVc2VycyA9IChkZWFjdGl2YXRlVXNlcnNSZXF1ZXN0KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy51c2Vyc0FwaS5kZWFjdGl2YXRlVXNlcnMoeyBkZWFjdGl2YXRlVXNlcnNSZXF1ZXN0IH0pO1xuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQGRlcHJlY2F0ZWQgdXNlIGBkZWxldGVVc2Vyc2AgaW5zdGVhZFxuICAgICAgICAgKiBAcGFyYW0gZGVsZXRlVXNlcnNSZXF1ZXN0XG4gICAgICAgICAqIEByZXR1cm5zXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmRlbGV0ZVVzZXIgPSAocmVxdWVzdCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCB0aGlzLnVzZXJzQXBpLmRlbGV0ZVVzZXIocmVxdWVzdCk7XG4gICAgICAgICAgICByZXNwb25zZS51c2VyID0gdGhpcy5tYXBDdXN0b21EYXRhQWZ0ZXJSZWNlaXZlKHJlc3BvbnNlLnVzZXIpO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5kZWxldGVVc2VycyA9IChkZWxldGVVc2Vyc1JlcXVlc3QpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnVzZXJzQXBpLmRlbGV0ZVVzZXJzKHsgZGVsZXRlVXNlcnNSZXF1ZXN0IH0pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmV4cG9ydFVzZXIgPSAocmVxdWVzdCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudXNlcnNBcGkuZXhwb3J0VXNlcihyZXF1ZXN0KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5leHBvcnRVc2VycyA9IChleHBvcnRVc2Vyc1JlcXVlc3QpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnVzZXJzQXBpLmV4cG9ydFVzZXJzKHsgZXhwb3J0VXNlcnNSZXF1ZXN0IH0pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmZsYWcgPSAoZmxhZ1JlcXVlc3QpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfYiwgX2M7XG4gICAgICAgICAgICBmbGFnUmVxdWVzdC51c2VyID0gdGhpcy5tYXBDdXN0b21EYXRhQmVmb3JlU2VuZChmbGFnUmVxdWVzdC51c2VyKTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy51c2Vyc0FwaS5mbGFnKHsgZmxhZ1JlcXVlc3QgfSk7XG4gICAgICAgICAgICBpZiAoKF9iID0gcmVzcG9uc2UuZmxhZykgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLnVzZXIpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZS5mbGFnLnVzZXIgPSB0aGlzLm1hcEN1c3RvbURhdGFBZnRlclJlY2VpdmUoKF9jID0gcmVzcG9uc2UuZmxhZykgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLnVzZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5xdWVyeUJhbm5lZFVzZXJzID0gKHBheWxvYWQpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHBheWxvYWQudXNlciA9IHRoaXMubWFwQ3VzdG9tRGF0YUJlZm9yZVNlbmQocGF5bG9hZC51c2VyKTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy51c2Vyc0FwaS5xdWVyeUJhbm5lZFVzZXJzKHsgcGF5bG9hZCB9KTtcbiAgICAgICAgICAgIHJlc3BvbnNlLmJhbnMuZm9yRWFjaCgoYikgPT4ge1xuICAgICAgICAgICAgICAgIGIuYmFubmVkX2J5ID0gdGhpcy5tYXBDdXN0b21EYXRhQWZ0ZXJSZWNlaXZlKGIuYmFubmVkX2J5KTtcbiAgICAgICAgICAgICAgICBiLnVzZXIgPSB0aGlzLm1hcEN1c3RvbURhdGFBZnRlclJlY2VpdmUoYi51c2VyKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5xdWVyeVVzZXJzID0gKHBheWxvYWQpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHBheWxvYWQudXNlciA9IHRoaXMubWFwQ3VzdG9tRGF0YUJlZm9yZVNlbmQocGF5bG9hZC51c2VyKTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy51c2Vyc0FwaS5xdWVyeVVzZXJzKHsgcGF5bG9hZCB9KTtcbiAgICAgICAgICAgIC8qKiBAdHMtZXhwZWN0LWVycm9yICovXG4gICAgICAgICAgICByZXNwb25zZS51c2VycyA9IHJlc3BvbnNlLnVzZXJzLm1hcCgodSkgPT4gdGhpcy5tYXBDdXN0b21EYXRhQWZ0ZXJSZWNlaXZlKHUpKTtcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucmVhY3RpdmF0ZVVzZXIgPSAocmVhY3RpdmF0ZVVzZXJSZXF1ZXN0KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMudXNlcnNBcGkucmVhY3RpdmF0ZVVzZXIoe1xuICAgICAgICAgICAgICAgIHJlYWN0aXZhdGVVc2VyUmVxdWVzdCxcbiAgICAgICAgICAgICAgICB1c2VySWQ6IHJlYWN0aXZhdGVVc2VyUmVxdWVzdC51c2VyX2lkLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXNwb25zZS51c2VyID0gdGhpcy5tYXBDdXN0b21EYXRhQWZ0ZXJSZWNlaXZlKHJlc3BvbnNlLnVzZXIpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5yZWFjdGl2YXRlVXNlcnMgPSAocmVhY3RpdmF0ZVVzZXJzUmVxdWVzdCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudXNlcnNBcGkucmVhY3RpdmF0ZVVzZXJzKHsgcmVhY3RpdmF0ZVVzZXJzUmVxdWVzdCB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5yZXN0b3JlVXNlcnMgPSAocmVzdG9yZVVzZXJzUmVxdWVzdCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudXNlcnNBcGkucmVzdG9yZVVzZXJzKHsgcmVzdG9yZVVzZXJzUmVxdWVzdCB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy51bmJhblVzZXIgPSAocmVxdWVzdCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudXNlcnNBcGkudW5iYW4ocmVxdWVzdCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudW5mbGFnID0gKGZsYWdSZXF1ZXN0KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB2YXIgX2Q7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMudXNlcnNBcGkudW5mbGFnKHsgZmxhZ1JlcXVlc3QgfSk7XG4gICAgICAgICAgICBpZiAoKF9kID0gcmVzcG9uc2UuZmxhZykgPT09IG51bGwgfHwgX2QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kLnVzZXIpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZS5mbGFnLnVzZXIgPSB0aGlzLm1hcEN1c3RvbURhdGFBZnRlclJlY2VpdmUocmVzcG9uc2UuZmxhZy51c2VyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMudXBzZXJ0VXNlcnMgPSAodXBkYXRlVXNlcnNSZXF1ZXN0KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBPYmplY3Qua2V5cyh1cGRhdGVVc2Vyc1JlcXVlc3QudXNlcnMpLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICAgICAgICAgIHVwZGF0ZVVzZXJzUmVxdWVzdC51c2Vyc1trZXldID0gdGhpcy5tYXBDdXN0b21EYXRhQmVmb3JlU2VuZCh1cGRhdGVVc2Vyc1JlcXVlc3QudXNlcnNba2V5XSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy51c2Vyc0FwaS51cGRhdGVVc2Vycyh7IHVwZGF0ZVVzZXJzUmVxdWVzdCB9KTtcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKHJlc3BvbnNlLnVzZXJzKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgICAgICAgICAgICByZXNwb25zZS51c2Vyc1trZXldID0gdGhpcy5tYXBDdXN0b21EYXRhQWZ0ZXJSZWNlaXZlKHJlc3BvbnNlLnVzZXJzW2tleV0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnVwZGF0ZVVzZXJzUGFydGlhbCA9IChyZXF1ZXN0KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIHRoaXMudXNlcnNBcGkudXBkYXRlVXNlcnNQYXJ0aWFsKHtcbiAgICAgICAgICAgICAgICAvKiogQHRzLWV4cGVjdC1lcnJvciAqL1xuICAgICAgICAgICAgICAgIHVwZGF0ZVVzZXJQYXJ0aWFsUmVxdWVzdDogcmVxdWVzdCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgT2JqZWN0LmtleXMocmVzcG9uc2UudXNlcnMpLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlLnVzZXJzW2tleV0gPSB0aGlzLm1hcEN1c3RvbURhdGFBZnRlclJlY2VpdmUocmVzcG9uc2UudXNlcnNba2V5XSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubXV0ZVVzZXIgPSAobXV0ZVVzZXJSZXF1ZXN0KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB2YXIgX2UsIF9mO1xuICAgICAgICAgICAgbXV0ZVVzZXJSZXF1ZXN0LnVzZXIgPSB0aGlzLm1hcEN1c3RvbURhdGFCZWZvcmVTZW5kKG11dGVVc2VyUmVxdWVzdC51c2VyKTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgdGhpcy51c2Vyc0FwaS5tdXRlVXNlcih7IG11dGVVc2VyUmVxdWVzdCB9KTtcbiAgICAgICAgICAgIGlmICgoX2UgPSByZXNwb25zZS5tdXRlKSA9PT0gbnVsbCB8fCBfZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2UudXNlcikge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlLm11dGUudXNlciA9IHRoaXMubWFwQ3VzdG9tRGF0YUFmdGVyUmVjZWl2ZSgoX2YgPSByZXNwb25zZS5tdXRlKSA9PT0gbnVsbCB8fCBfZiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2YudXNlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVzcG9uc2UubXV0ZXMpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZS5tdXRlcyA9IHJlc3BvbnNlLm11dGVzLm1hcCgobSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBtKSwgeyB1c2VyOiB0aGlzLm1hcEN1c3RvbURhdGFBZnRlclJlY2VpdmUobS51c2VyKSB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMudW5tdXRlVXNlciA9ICh1bm11dGVVc2VyUmVxdWVzdCkgPT4ge1xuICAgICAgICAgICAgdW5tdXRlVXNlclJlcXVlc3QudXNlciA9IHRoaXMubWFwQ3VzdG9tRGF0YUJlZm9yZVNlbmQodW5tdXRlVXNlclJlcXVlc3QudXNlcik7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy51c2Vyc0FwaS51bm11dGVVc2VyKHsgdW5tdXRlVXNlclJlcXVlc3QgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc2VuZEN1c3RvbUV2ZW50VG9Vc2VyID0gKHVzZXJJZCwgZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmV2ZW50c0FwaS5zZW5kVXNlckN1c3RvbUV2ZW50KHtcbiAgICAgICAgICAgICAgICB1c2VySWQsXG4gICAgICAgICAgICAgICAgc2VuZFVzZXJDdXN0b21FdmVudFJlcXVlc3Q6IHsgZXZlbnQgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmNyZWF0ZVJvbGUgPSAoY3JlYXRlUm9sZVJlcXVlc3QpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBlcm1pc3Npb25zQXBpLmNyZWF0ZVJvbGUoeyBjcmVhdGVSb2xlUmVxdWVzdCB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5kZWxldGVSb2xlID0gKHJlcXVlc3QpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBlcm1pc3Npb25zQXBpLmRlbGV0ZVJvbGUocmVxdWVzdCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZ2V0UGVybWlzc2lvbiA9IChyZXF1ZXN0KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wZXJtaXNzaW9uc0FwaS5nZXRQZXJtaXNzaW9uKHJlcXVlc3QpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmxpc3RQZXJtaXNzaW9ucyA9ICgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBlcm1pc3Npb25zQXBpLmxpc3RQZXJtaXNzaW9ucygpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmxpc3RSb2xlcyA9ICgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBlcm1pc3Npb25zQXBpLmxpc3RSb2xlcygpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmdldEFwcFNldHRpbmdzID0gKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2V0dGluZ3NBcGkuZ2V0QXBwKCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudXBkYXRlQXBwU2V0dGluZ3MgPSAodXBkYXRlQXBwUmVxdWVzdCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2V0dGluZ3NBcGkudXBkYXRlQXBwKHsgdXBkYXRlQXBwUmVxdWVzdCB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5nZXRSYXRlTGltaXRzID0gKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2V0dGluZ3NBcGkuZ2V0UmF0ZUxpbWl0cygpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmdldFRhc2tTdGF0dXMgPSAocmVxdWVzdCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudGFza3NBcGkuZ2V0VGFzayhyZXF1ZXN0KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy52ZXJpZnlXZWJob29rID0gKHJlcXVlc3RCb2R5LCB4U2lnbmF0dXJlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBrZXkgPSBCdWZmZXIuZnJvbSh0aGlzLnNlY3JldCwgJ3V0ZjgnKTtcbiAgICAgICAgICAgIGNvbnN0IGhhc2ggPSBjcnlwdG9cbiAgICAgICAgICAgICAgICAuY3JlYXRlSG1hYygnc2hhMjU2Jywga2V5KVxuICAgICAgICAgICAgICAgIC51cGRhdGUocmVxdWVzdEJvZHkpXG4gICAgICAgICAgICAgICAgLmRpZ2VzdCgnaGV4Jyk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjcnlwdG8udGltaW5nU2FmZUVxdWFsKEJ1ZmZlci5mcm9tKGhhc2gpLCBCdWZmZXIuZnJvbSh4U2lnbmF0dXJlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmdldENvbmZpZ3VyYXRpb24gPSAocHJvZHVjdCA9ICdjaGF0JykgPT4ge1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBDb25maWd1cmF0aW9uKHtcbiAgICAgICAgICAgICAgICBhcGlLZXk6IChuYW1lKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hcHBpbmcgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnU3RyZWFtLUF1dGgtVHlwZSc6ICdqd3QnLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXBpX2tleTogdGhpcy5hcGlLZXksXG4gICAgICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiB0aGlzLnRva2VuLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWFwcGluZ1tuYW1lXTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGJhc2VQYXRoOiAoX2EgPSB0aGlzLm9wdGlvbnMuYmFzZVBhdGgpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IChwcm9kdWN0ID09PSAnY2hhdCdcbiAgICAgICAgICAgICAgICAgICAgPyAnaHR0cHM6Ly9jaGF0LnN0cmVhbS1pby1hcGkuY29tJ1xuICAgICAgICAgICAgICAgICAgICA6ICdodHRwczovL3ZpZGVvLnN0cmVhbS1pby1hcGkuY29tJyksXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAnWC1TdHJlYW0tQ2xpZW50JzogJ3N0cmVhbS1ub2RlLScgKyBcIjAuMS4xMlwiLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgbWlkZGxld2FyZTogW1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcmU6IChjb250ZXh0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5pbml0LmhlYWRlcnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGNvbnRleHQuaW5pdC5oZWFkZXJzKSwgeyAneC1jbGllbnQtcmVxdWVzdC1pZCc6IHY0KCksICdBY2NlcHQtRW5jb2RpbmcnOiAnZ3ppcCcgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShjb250ZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgc2hvdWxkIGJlIHRoZSBsYXN0IHBvc3QgbWlkZGxld2FyZSBiZWNhdXNlIHRoYXQgd2lsbCB0aHJvdyBhbiBlcnJvclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIEZldGNoIEFQSSB3b24ndCB0aHJvdyBhbiBlcnJvciBmb3IgSFRUUCBlcnJvciByZXNwb25zZXMsIHdoaWNoIG1lYW5zIHRoZSBcIm9uRXJyb3JcIiBtaWRkbGV3YXJlIHdvbid0IGJlIGNhbGxlZCBzbyB3ZSBuZWVkIHRvIHRocm93IGVycm9yIGZyb20gXCJwb3N0XCIgbWlkZGxld2FyZVxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zdDogKGNvbnRleHQpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKGNvbnRleHQucmVzcG9uc2UgJiYgY29udGV4dC5yZXNwb25zZS5zdGF0dXMgPCAyMDApIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQucmVzcG9uc2Uuc3RhdHVzID49IDMwMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IG5ldyBKU09OQXBpUmVzcG9uc2UoY29udGV4dC5yZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gKHlpZWxkIHJlc3BvbnNlLnZhbHVlKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFN0cmVhbSBlcnJvciBjb2RlICR7dmFsdWUuY29kZX06ICR7dmFsdWUubWVzc2FnZX1gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJlOiAoY29udGV4dCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuaW5pdC5zaWduYWwgPSBBYm9ydFNpZ25hbC50aW1lb3V0KHRoaXMub3B0aW9ucy50aW1lb3V0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGNvbnRleHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uRXJyb3I6IChjb250ZXh0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBjb250ZXh0LmVycm9yO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnJvci5uYW1lID09PSAnQWJvcnRFcnJvcicgfHwgZXJyb3IubmFtZSA9PT0gJ1RpbWVvdXRFcnJvcicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZldGNoRXJyb3IoZXJyb3IsIGBUaGUgcmVxdWVzdCB3YXMgYWJvcnRlZCBkdWUgdG8gdG8gdGhlICR7dGhpcy5vcHRpb25zLnRpbWVvdXR9bXMgdGltZW91dCwgeW91IGNhbiBzZXQgdGhlIHRpbWVvdXQgaW4gdGhlIFN0cmVhbUNsaWVudCBjb25zdHJ1Y3RvcmApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGNvbnRleHQucmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9PcGVuQVBJVG9vbHMvb3BlbmFwaS1nZW5lcmF0b3IvaXNzdWVzLzEzMjIyXG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbXNTdHJpbmdpZnk6IChwYXJhbXMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3UGFyYW1zID0gW107XG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgayBpbiBwYXJhbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHBhcmFtc1trXSkgfHwgdHlwZW9mIHBhcmFtc1trXSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdQYXJhbXMucHVzaChgJHtrfT0ke2VuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShwYXJhbXNba10pKX1gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gcGFyYW1zW2tdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZW9mIHZhbHVlID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3UGFyYW1zLnB1c2goYCR7a309JHtlbmNvZGVVUklDb21wb25lbnQodmFsdWUpfWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3UGFyYW1zLmpvaW4oJyYnKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucmVzZXJ2ZWRLZXl3b3JkcyA9IFtcbiAgICAgICAgICAgICdiYW5fZXhwaXJlcycsXG4gICAgICAgICAgICAnYmFubmVkJyxcbiAgICAgICAgICAgICdpZCcsXG4gICAgICAgICAgICAnaW52aXNpYmxlJyxcbiAgICAgICAgICAgICdsYW5ndWFnZScsXG4gICAgICAgICAgICAncHVzaF9ub3RpZmljYXRpb25zJyxcbiAgICAgICAgICAgICdyZXZva2VfdG9rZW5zX2lzc3VlZF9iZWZvcmUnLFxuICAgICAgICAgICAgJ3JvbGUnLFxuICAgICAgICAgICAgJ3RlYW1zJyxcbiAgICAgICAgICAgICdjcmVhdGVkX2F0JyxcbiAgICAgICAgICAgICdkZWFjdGl2YXRlZF9hdCcsXG4gICAgICAgICAgICAnZGVsZXRlZF9hdCcsXG4gICAgICAgICAgICAnbGFzdF9hY3RpdmUnLFxuICAgICAgICAgICAgJ29ubGluZScsXG4gICAgICAgICAgICAndXBkYXRlZF9hdCcsXG4gICAgICAgICAgICAnc2hhZG93X2Jhbm5lZCcsXG4gICAgICAgICAgICAnbmFtZScsXG4gICAgICAgICAgICAnaW1hZ2UnLFxuICAgICAgICBdO1xuICAgICAgICB0aGlzLm1hcEN1c3RvbURhdGFCZWZvcmVTZW5kID0gKHVzZXIpID0+IHtcbiAgICAgICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBjb3B5ID0gT2JqZWN0LmFzc2lnbih7fSwgdXNlcik7XG4gICAgICAgICAgICBkZWxldGUgY29weS5jdXN0b207XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBjb3B5KSwgdXNlci5jdXN0b20pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnRva2VuID0gSldUU2VydmVyVG9rZW4odGhpcy5zZWNyZXQpO1xuICAgICAgICBpZiAodHlwZW9mIGNvbmZpZyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5iYXNlUGF0aCA9IGNvbmZpZztcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy50aW1lb3V0ID0gU3RyZWFtQ2xpZW50LkRFRkFVTFRfVElNRU9VVDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmIChjb25maWcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMgPSBjb25maWc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMudGltZW91dCA9IChfYSA9IGNvbmZpZyA9PT0gbnVsbCB8fCBjb25maWcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGNvbmZpZy50aW1lb3V0KSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBTdHJlYW1DbGllbnQuREVGQVVMVF9USU1FT1VUO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudmlkZW8gPSBuZXcgU3RyZWFtVmlkZW9DbGllbnQodGhpcyk7XG4gICAgICAgIHRoaXMuY2hhdCA9IG5ldyBTdHJlYW1DaGF0Q2xpZW50KHRoaXMpO1xuICAgICAgICBjb25zdCBjaGF0Q29uZmlndXJhdGlvbiA9IHRoaXMuZ2V0Q29uZmlndXJhdGlvbigpO1xuICAgICAgICAvKiogQHRzLWV4cGVjdC1lcnJvciAqL1xuICAgICAgICB0aGlzLnVzZXJzQXBpID0gbmV3IFVzZXJzQXBpKGNoYXRDb25maWd1cmF0aW9uKTtcbiAgICAgICAgLyoqIEB0cy1leHBlY3QtZXJyb3IgKi9cbiAgICAgICAgdGhpcy5kZXZpY2VzQXBpID0gbmV3IERldmljZXNBcGkoY2hhdENvbmZpZ3VyYXRpb24pO1xuICAgICAgICAvKiogQHRzLWV4cGVjdC1lcnJvciAqL1xuICAgICAgICB0aGlzLnB1c2hBcGkgPSBuZXcgUHVzaEFwaShjaGF0Q29uZmlndXJhdGlvbik7XG4gICAgICAgIC8qKiBAdHMtZXhwZWN0LWVycm9yICovXG4gICAgICAgIHRoaXMuc2VydmVyc2lkZUFwaSA9IG5ldyBTZXJ2ZXJTaWRlQXBpJDEoY2hhdENvbmZpZ3VyYXRpb24pO1xuICAgICAgICAvKiogQHRzLWV4cGVjdC1lcnJvciAqL1xuICAgICAgICB0aGlzLnRlc3RpbmdBcGkgPSBuZXcgVGVzdGluZ0FwaShjaGF0Q29uZmlndXJhdGlvbik7XG4gICAgICAgIC8qKiBAdHMtZXhwZWN0LWVycm9yICovXG4gICAgICAgIHRoaXMucGVybWlzc2lvbnNBcGkgPSBuZXcgUGVybWlzc2lvbnNWMkFwaShjaGF0Q29uZmlndXJhdGlvbik7XG4gICAgICAgIC8qKiBAdHMtZXhwZWN0LWVycm9yICovXG4gICAgICAgIHRoaXMuc2V0dGluZ3NBcGkgPSBuZXcgU2V0dGluZ3NBcGkkMShjaGF0Q29uZmlndXJhdGlvbik7XG4gICAgICAgIC8qKiBAdHMtZXhwZWN0LWVycm9yICovXG4gICAgICAgIHRoaXMuZXZlbnRzQXBpID0gbmV3IEV2ZW50c0FwaShjaGF0Q29uZmlndXJhdGlvbik7XG4gICAgICAgIC8qKiBAdHMtZXhwZWN0LWVycm9yICovXG4gICAgICAgIHRoaXMudGFza3NBcGkgPSBuZXcgVGFza3NBcGkoY2hhdENvbmZpZ3VyYXRpb24pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSB1c2VySURcbiAgICAgKiBAcGFyYW0gZXhwXG4gICAgICogQHBhcmFtIGlhdCBkZXByZWNhdGVkLCB0aGUgZGVmYXVsdCBkYXRlIHdpbGwgYmUgc2V0IGludGVybmFsbHlcbiAgICAgKiBAcGFyYW0gY2FsbF9jaWRzIHRoaXMgcGFyYW1ldGVyIGlzIGRlcHJlY2F0ZWQgdXNlIGBjcmVhdGVDYWxsVG9rZW5gIGZvciBjYWxsIHRva2Vuc1xuICAgICAqIEByZXR1cm5zXG4gICAgICovXG4gICAgY3JlYXRlVG9rZW4odXNlcklELCBleHAgPSBNYXRoLnJvdW5kKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC8gMTAwMCkgKyA2MCAqIDYwLCBpYXQgPSBNYXRoLnJvdW5kKERhdGUubm93KCkgLyAxMDAwKSwgY2FsbF9jaWRzKSB7XG4gICAgICAgIGNvbnN0IGV4dHJhID0ge307XG4gICAgICAgIGlmIChleHApIHtcbiAgICAgICAgICAgIGV4dHJhLmV4cCA9IGV4cDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaWF0KSB7XG4gICAgICAgICAgICBleHRyYS5pYXQgPSBpYXQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNhbGxfY2lkcykge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKGBVc2UgY3JlYXRlQ2FsbFRva2VuIG1ldGhvZCBmb3IgY3JlYXRpbmcgY2FsbCB0b2tlbnMsIHRoZSBcImNhbGxfY2lkc1wiIHBhcmFtIHdpbGwgYmUgcmVtb3ZlZCBmcm9tIHRoZSBjcmVhdGVUb2tlbiBtZXRob2Qgd2l0aCB2ZXJzaW9uIDAuMi4wYCk7XG4gICAgICAgICAgICBleHRyYS5jYWxsX2NpZHMgPSBjYWxsX2NpZHM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEpXVFVzZXJUb2tlbih0aGlzLnNlY3JldCwgdXNlcklELCBleHRyYSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIHVzZXJJRFxuICAgICAqIEBwYXJhbSBjYWxsX2NpZHNcbiAgICAgKiBAcGFyYW0gZXhwXG4gICAgICogQHBhcmFtIGlhdCB0aGlzIGlzIGRlcHJlY2F0ZWQsIHRoZSBjdXJyZW50IGRhdGUgd2lsbCBiZSBzZXQgaW50ZXJuYWxseVxuICAgICAqIEByZXR1cm5zXG4gICAgICovXG4gICAgY3JlYXRlQ2FsbFRva2VuKHVzZXJJRCwgY2FsbF9jaWRzLCBleHAgPSBNYXRoLnJvdW5kKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC8gMTAwMCkgKyA2MCAqIDYwLCBpYXQgPSBNYXRoLnJvdW5kKERhdGUubm93KCkgLyAxMDAwKSkge1xuICAgICAgICBjb25zdCBleHRyYSA9IHt9O1xuICAgICAgICBpZiAoZXhwKSB7XG4gICAgICAgICAgICBleHRyYS5leHAgPSBleHA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlhdCkge1xuICAgICAgICAgICAgZXh0cmEuaWF0ID0gaWF0O1xuICAgICAgICB9XG4gICAgICAgIGV4dHJhLmNhbGxfY2lkcyA9IGNhbGxfY2lkcztcbiAgICAgICAgcmV0dXJuIEpXVFVzZXJUb2tlbih0aGlzLnNlY3JldCwgdXNlcklELCBleHRyYSk7XG4gICAgfVxuICAgIG1hcEN1c3RvbURhdGFBZnRlclJlY2VpdmUodXNlcikge1xuICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgLyoqIEB0cy1leHBlY3QtZXJyb3IgKi9cbiAgICAgICAgY29uc3QgcmVzdWx0ID0ge307XG4gICAgICAgIE9iamVjdC5rZXlzKHVzZXIpLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnJlc2VydmVkS2V5d29yZHMuaW5jbHVkZXMoa2V5KSkge1xuICAgICAgICAgICAgICAgIGlmICghcmVzdWx0LmN1c3RvbSkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuY3VzdG9tID0ge307XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlc3VsdC5jdXN0b21ba2V5XSA9IHVzZXJba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc3VsdFtrZXldID0gdXNlcltrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG59XG5TdHJlYW1DbGllbnQuREVGQVVMVF9USU1FT1VUID0gMzAwMDtcblxuZXhwb3J0IHsgQVBOQ29uZmlnUmVxdWVzdEF1dGhUeXBlRW51bSwgQXBwU2VhcmNoQmFja2VuZEVudW0sIEFzeW5jTW9kZXJhdGlvbkNhbGxiYWNrQ29uZmlnUmVxdWVzdE1vZGVFbnVtLCBBdWRpb1NldHRpbmdzRGVmYXVsdERldmljZUVudW0sIEJsb2NrTGlzdE9wdGlvbnNCZWhhdmlvckVudW0sIEJsb2NrTGlzdE9wdGlvbnNSZXF1ZXN0QmVoYXZpb3JFbnVtLCBDaGFubmVsQ29uZmlnQXV0b21vZEJlaGF2aW9yRW51bSwgQ2hhbm5lbENvbmZpZ0F1dG9tb2RFbnVtLCBDaGFubmVsQ29uZmlnQmxvY2tsaXN0QmVoYXZpb3JFbnVtLCBDaGFubmVsQ29uZmlnUmVxdWVzdEJsb2NrbGlzdEJlaGF2aW9yRW51bSwgQ2hhbm5lbENvbmZpZ1dpdGhJbmZvQXV0b21vZEJlaGF2aW9yRW51bSwgQ2hhbm5lbENvbmZpZ1dpdGhJbmZvQXV0b21vZEVudW0sIENoYW5uZWxDb25maWdXaXRoSW5mb0Jsb2NrbGlzdEJlaGF2aW9yRW51bSwgQ2hhbm5lbENvbmZpZ1dpdGhJbmZvUmVxdWVzdEF1dG9tb2RCZWhhdmlvckVudW0sIENoYW5uZWxDb25maWdXaXRoSW5mb1JlcXVlc3RBdXRvbW9kRW51bSwgQ2hhbm5lbENvbmZpZ1dpdGhJbmZvUmVxdWVzdEJsb2NrbGlzdEJlaGF2aW9yRW51bSwgQ2hhbm5lbE1lbWJlclJlcXVlc3RSb2xlRW51bSwgQ2hhbm5lbE1lbWJlclJvbGVFbnVtLCBDaGFubmVsVHlwZUNvbmZpZ0F1dG9tb2RCZWhhdmlvckVudW0sIENoYW5uZWxUeXBlQ29uZmlnQXV0b21vZEVudW0sIENoYW5uZWxUeXBlQ29uZmlnQmxvY2tsaXN0QmVoYXZpb3JFbnVtLCBDaGVja1B1c2hSZXF1ZXN0UHVzaFByb3ZpZGVyVHlwZUVudW0sIENoZWNrU05TUmVzcG9uc2VTdGF0dXNFbnVtLCBDaGVja1NRU1Jlc3BvbnNlU3RhdHVzRW51bSwgQ29uZmlnRGVmYXVsdFJvbGVFbnVtLCBDb25maWdSZXF1ZXN0RGVmYXVsdFJvbGVFbnVtLCBDcmVhdGVDYWxsUmVxdWVzdFR5cGVFbnVtLCBDcmVhdGVDaGFubmVsVHlwZVJlcXVlc3RBdXRvbW9kQmVoYXZpb3JFbnVtLCBDcmVhdGVDaGFubmVsVHlwZVJlcXVlc3RBdXRvbW9kRW51bSwgQ3JlYXRlQ2hhbm5lbFR5cGVSZXF1ZXN0QmxvY2tsaXN0QmVoYXZpb3JFbnVtLCBDcmVhdGVDaGFubmVsVHlwZVJlc3BvbnNlQXV0b21vZEJlaGF2aW9yRW51bSwgQ3JlYXRlQ2hhbm5lbFR5cGVSZXNwb25zZUF1dG9tb2RFbnVtLCBDcmVhdGVDaGFubmVsVHlwZVJlc3BvbnNlQmxvY2tsaXN0QmVoYXZpb3JFbnVtLCBDcmVhdGVEZXZpY2VSZXF1ZXN0UHVzaFByb3ZpZGVyRW51bSwgQ3JlYXRlSW1wb3J0UmVxdWVzdE1vZGVFbnVtLCBEZWxldGVVc2Vyc1JlcXVlc3RDb252ZXJzYXRpb25zRW51bSwgRGVsZXRlVXNlcnNSZXF1ZXN0TWVzc2FnZXNFbnVtLCBEZWxldGVVc2Vyc1JlcXVlc3RVc2VyRW51bSwgRGV2aWNlRmllbGRzUHVzaFByb3ZpZGVyRW51bSwgRGV2aWNlUHVzaFByb3ZpZGVyRW51bSwgRGV2aWNlUmVxdWVzdFB1c2hQcm92aWRlckVudW0sIEltYWdlU2l6ZUNyb3BFbnVtLCBJbWFnZVNpemVSZXNpemVFbnVtLCBMYXlvdXRTZXR0aW5nc05hbWVFbnVtLCBNZXNzYWdlUmVxdWVzdDFUeXBlRW51bSwgTWVzc2FnZVJlcXVlc3RUeXBlRW51bSwgTWVzc2FnZVR5cGVFbnVtLCBQZXJtaXNzaW9uTGV2ZWxFbnVtLCBQb2xpY3lSZXF1ZXN0MUFjdGlvbkVudW0sIFBvbGljeVJlcXVlc3RBY3Rpb25FbnVtLCBQdXNoQ29uZmlnUmVxdWVzdFZlcnNpb25FbnVtLCBTdHJlYW1DYWxsLCBTdHJlYW1DaGFubmVsLCBTdHJlYW1DaGF0Q2xpZW50LCBTdHJlYW1DbGllbnQsIFN0cmVhbVZpZGVvQ2xpZW50LCBUcmFuc2NyaXB0aW9uU2V0dGluZ3NNb2RlRW51bSwgVHJhbnNsYXRlTWVzc2FnZVJlcXVlc3RMYW5ndWFnZUVudW0sIFVwZGF0ZUFwcFJlcXVlc3RFbmZvcmNlVW5pcXVlVXNlcm5hbWVzRW51bSwgVXBkYXRlQXBwUmVxdWVzdFBlcm1pc3Npb25WZXJzaW9uRW51bSwgVXBkYXRlQXBwUmVxdWVzdFZpZGVvUHJvdmlkZXJFbnVtLCBVcGRhdGVDaGFubmVsVHlwZVJlcXVlc3RBdXRvbW9kQmVoYXZpb3JFbnVtLCBVcGRhdGVDaGFubmVsVHlwZVJlcXVlc3RBdXRvbW9kRW51bSwgVXBkYXRlQ2hhbm5lbFR5cGVSZXF1ZXN0QmxvY2tsaXN0QmVoYXZpb3JFbnVtLCBVcGRhdGVDaGFubmVsVHlwZVJlc3BvbnNlQXV0b21vZEJlaGF2aW9yRW51bSwgVXBkYXRlQ2hhbm5lbFR5cGVSZXNwb25zZUF1dG9tb2RFbnVtLCBVcGRhdGVDaGFubmVsVHlwZVJlc3BvbnNlQmxvY2tsaXN0QmVoYXZpb3JFbnVtLCBWaWRlb0F1ZGlvU2V0dGluZ3NEZWZhdWx0RGV2aWNlRW51bSwgVmlkZW9BdWRpb1NldHRpbmdzUmVxdWVzdERlZmF1bHREZXZpY2VFbnVtLCBWaWRlb0NyZWF0ZURldmljZVJlcXVlc3RQdXNoUHJvdmlkZXJFbnVtLCBWaWRlb0xheW91dFNldHRpbmdzTmFtZUVudW0sIFZpZGVvTGF5b3V0U2V0dGluZ3NSZXF1ZXN0TmFtZUVudW0sIFZpZGVvT3duQ2FwYWJpbGl0eSwgVmlkZW9SZWNvcmRTZXR0aW5nc1JlcXVlc3RNb2RlRW51bSwgVmlkZW9SZWNvcmRTZXR0aW5nc1JlcXVlc3RRdWFsaXR5RW51bSwgVmlkZW9TZXR0aW5nc0NhbWVyYUZhY2luZ0VudW0sIFZpZGVvVHJhbnNjcmlwdGlvblNldHRpbmdzTW9kZUVudW0sIFZpZGVvVHJhbnNjcmlwdGlvblNldHRpbmdzUmVxdWVzdE1vZGVFbnVtLCBWaWRlb1ZpZGVvU2V0dGluZ3NDYW1lcmFGYWNpbmdFbnVtLCBWaWRlb1ZpZGVvU2V0dGluZ3NSZXF1ZXN0Q2FtZXJhRmFjaW5nRW51bSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXMuanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/@stream-io/node-sdk/dist/index.es.js\n");

/***/ })

};
;